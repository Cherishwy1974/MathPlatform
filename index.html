<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高等应用数学 | 在线课堂</title>

    <!-- 字体预加载 -->
    <link rel="preload" href="./common-assets/fonts/WD-XLLubrifontSC-Regular.otf" as="font" type="font/otf" crossorigin>
    <link rel="preload" href="./common-assets/fonts/jf-openhuninn-2.1.ttf" as="font" type="font/ttf" crossorigin>

    <!-- Three.js 本地引入 -->
    <script src="./common-assets/js/three-0.160.0.min.js"></script>

    <style>
        /* 本地字体定义 */
        @font-face {
            font-family: 'WDXLubrifontSC';
            src: url('./common-assets/fonts/WD-XLLubrifontSC-Regular.otf') format('opentype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'JfOpenHuninn';
            src: url('./common-assets/fonts/jf-openhuninn-2.1.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }

        :root {
            --bg-color: #f3f4f6;
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --accent-blue: #2563eb;
            --accent-indigo: #4f46e5;
            --card-bg: #ffffff;
            --card-hover-bg: #fafafa;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-glow: 0 0 20px rgba(37, 99, 235, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: 'WDXLubrifontSC', 'JfOpenHuninn', sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* --- 3D 背景层 --- */
        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            /* 径向渐变背景，营造光照感 */
            background: radial-gradient(circle at 50% 0%, #e0e7ff 0%, #f3f4f6 60%);
        }

        /* --- 主界面容器 --- */
        .main-container {
            position: relative;
            z-index: 10;
            width: 90%;
            max-width: 1200px;
            height: 85vh;
            display: grid;
            grid-template-rows: auto 1fr;
            gap: 2rem;
        }

        /* --- 头部区域 --- */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
            animation: slideDown 0.8s ease-out;
        }

        .brand {
            display: flex;
            flex-direction: column;
        }

        .brand h1 {
            font-family: 'JfOpenHuninn', 'WDXLubrifontSC', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.02em;
            line-height: 1.2;
        }

        .brand span {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            margin-top: 0.25rem;
        }

        /* 成绩册按钮 */
        .grade-btn {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(0,0,0,0.05);
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: var(--shadow-sm);
        }

        .grade-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            color: var(--accent-blue);
        }

        /* --- Bento Grid 导航区域 --- */
        .nav-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 1.5rem;
            padding: 1rem;
            height: 100%;
        }

        /* 卡片通用样式 */
        .card {
            background: var(--card-bg);
            border-radius: 24px;
            padding: 2rem;
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: var(--shadow-sm);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
            opacity: 0;
            animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg), var(--shadow-glow);
            border-color: rgba(37, 99, 235, 0.2);
        }

        /* 卡片图标容器 */
        .icon-box {
            width: 56px;
            height: 56px;
            background: #eff6ff;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-blue);
            margin-bottom: 1rem;
            transition: transform 0.3s ease;
        }

        .card:hover .icon-box {
            transform: scale(1.1) rotate(5deg);
            background: var(--accent-blue);
            color: white;
        }

        .card svg {
            width: 28px;
            height: 28px;
            stroke-width: 2;
        }

        /* 卡片文字 */
        .card-content h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-family: 'JfOpenHuninn', 'WDXLubrifontSC', serif;
        }

        .card-content p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .arrow-icon {
            position: absolute;
            bottom: 2rem;
            right: 2rem;
            opacity: 0;
            transform: translateX(-10px);
            transition: all 0.3s ease;
            color: var(--accent-blue);
        }

        .card:hover .arrow-icon {
            opacity: 1;
            transform: translateX(0);
        }

        /* --- 栅格布局特定样式 --- */
        
        /* 课程中心：大卡片，占据左侧两列两行 */
        .card-course {
            grid-column: span 2;
            grid-row: span 2;
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
        }

        /* 仿真实验 */
        .card-lab {
            grid-column: span 1;
            grid-row: span 2;
        }

        /* 智能题库 */
        .card-quiz {
            grid-column: span 1;
        }

        /* 数学画廊 */
        .card-gallery {
            grid-column: span 1;
        }

        /* 慧工坊 (通栏) - 如果需要可以调整，这里设为单独的小块或者大块 */
        /* 目前布局：2x2(Left) + 1x2(Mid) + 1x1(RightTop) + 1x1(RightBot) = 4列 */
        /* 修正：让题库和画廊各占一格 */
        
        /* 重新布局 */
        .card-course { grid-column: 1 / 3; grid-row: 1 / 3; } /* 左大块 */
        .card-lab    { grid-column: 3 / 4; grid-row: 1 / 3; } /* 中竖条 */
        .card-quiz   { grid-column: 4 / 5; grid-row: 1 / 2; } /* 右上 */
        .card-gallery{ grid-column: 4 / 5; grid-row: 2 / 3; } /* 右下 */

        /* 慧工坊按钮 (悬浮或放在底部) */
        /* 既然只有4个格子位置，我们可以把慧工坊做一个特殊的浮动胶囊或者放在头部 */
        
        /* 修正方案：增加一行给"慧工坊"，或者让 grid 变宽。
           为了美观，我把 grid 改为：
           左(课程): 2x2
           中上(实验): 1x1
           中下(题库): 1x1
           右(画廊): 1x2
           慧工坊放到右上角作为主行动按钮 (Primary Action)
        */

        /* 最终布局调整 */
        .nav-grid {
            grid-template-columns: 2fr 1fr 1fr;
            grid-template-rows: 1fr 1fr;
        }

        .card-course  { grid-column: 1 / 2; grid-row: 1 / 3; } /* 左侧大区域 */
        .card-lab     { grid-column: 2 / 3; grid-row: 1 / 2; } /* 中上 */
        .card-quiz    { grid-column: 2 / 3; grid-row: 2 / 3; } /* 中下 */
        .card-gallery { grid-column: 3 / 4; grid-row: 1 / 3; } /* 右侧长条 */
        
        /* 慧工坊特殊卡片：改为放在最右下角或者单独处理? 
           现在的布局已经满了。让我们把"慧工坊"做成 Header 上的一个醒目按钮，或者把它整合进Grid。
           方案：把Grid改成 3列2行。
           左: 课程 (1x2)
           中: 实验 (1x1), 题库 (1x1)
           右: 画廊 (1x1), 慧工坊 (1x1)
        */
        
        .nav-grid {
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(2, 1fr);
        }
        
        .card-course { grid-column: 1 / 2; grid-row: 1 / 3; }
        .card-lab    { grid-column: 2 / 3; grid-row: 1 / 2; }
        .card-quiz   { grid-column: 2 / 3; grid-row: 2 / 3; }
        .card-gallery{ grid-column: 3 / 4; grid-row: 1 / 2; }
        .card-project{ grid-column: 3 / 4; grid-row: 2 / 3; background: #111827; color: white; border: none; }
        
        .card-project .icon-box { background: rgba(255,255,255,0.1); color: white; }
        .card-project h2 { color: white; }
        .card-project p { color: #9ca3af; }
        .card-project:hover { background: #1f2937; }
        .card-project .arrow-icon { color: white; }

        /* 动画延迟 */
        .card:nth-child(1) { animation-delay: 0.1s; }
        .card:nth-child(2) { animation-delay: 0.2s; }
        .card:nth-child(3) { animation-delay: 0.3s; }
        .card:nth-child(4) { animation-delay: 0.4s; }
        .card:nth-child(5) { animation-delay: 0.5s; }

        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes popIn {
            from { transform: scale(0.9) translateY(20px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }

        /* 响应式 */
        @media (max-width: 900px) {
            .main-container { height: auto; display: block; padding-bottom: 2rem; }
            header { margin-bottom: 2rem; margin-top: 1rem; }
            .nav-grid {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
                gap: 1rem;
            }
            .card { grid-column: span 1 !important; grid-row: span 1 !important; min-height: 180px; }
        }
    </style>
</head>

<body>
    <!-- 3D 数学背景 -->
    <div id="canvas-container"></div>

    <div class="main-container">
        <!-- 头部 -->
        <header>
            <div class="brand">
                <h1>高等应用数学</h1>
                <span>Advanced Applied Mathematics</span>
            </div>
            <button class="grade-btn" onclick="window.location.href='成绩册.html'">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                </svg>
                成绩册
            </button>
        </header>

        <!-- 导航网格 -->
        <div class="nav-grid">
            
            <!-- 1. 课程中心 (左侧大卡片) -->
            <a href="课件/index.html" class="card card-course">
                <div class="icon-box">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                </div>
                <div class="card-content">
                    <h2>课程中心</h2>
                    <p>Core Curriculum</p>
                    <p style="margin-top: 1rem; color: var(--text-secondary);">
                        系统化的数学理论学习，包含微积分、线性代数与概率统计的核心课件与视频教程。
                    </p>
                </div>
                <svg class="arrow-icon" width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
            </a>

            <!-- 2. 仿真实验 (中上) -->
            <a href="网页资源/index.html" class="card card-lab">
                <div class="icon-box">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                </div>
                <div class="card-content">
                    <h2>仿真实验</h2>
                    <p>Simulation Lab</p>
                </div>
                <svg class="arrow-icon" width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
            </a>

            <!-- 3. 智能题库 (中下) -->
            <a href="习题/index.html" class="card card-quiz">
                <div class="icon-box">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                </div>
                <div class="card-content">
                    <h2>智能题库</h2>
                    <p>Smart Quiz</p>
                </div>
                <svg class="arrow-icon" width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
            </a>

            <!-- 4. 数学画廊 (右上) -->
            <a href="故事书/index.html" class="card card-gallery">
                <div class="icon-box">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                </div>
                <div class="card-content">
                    <h2>数学画廊</h2>
                    <p>Math Gallery</p>
                </div>
                <svg class="arrow-icon" width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
            </a>

            <!-- 5. 慧工坊 (右下 - 特殊样式) -->
            <a href="https://ai.projectmath.xyz/project/index.html" class="card card-project">
                <div class="icon-box">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                </div>
                <div class="card-content">
                    <h2>慧工坊</h2>
                    <p>Industry Project</p>
                    <p style="margin-top:0.5rem; font-size:0.8rem; color:#d1d5db;">实战案例与AI应用</p>
                </div>
                <svg class="arrow-icon" width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
            </a>

        </div>
    </div>

    <!-- 3D 渲染脚本 -->
    <script>
        function initThreeJS() {
            const container = document.getElementById('canvas-container');
            const scene = new THREE.Scene();
            
            // 相机设置
            const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 10, 20);
            camera.lookAt(0, 0, 0);

            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(renderer.domElement);

            // 绘制动态数学曲面 (Point Cloud 形式)
            // 函数 z = sin(x + t) * cos(y + t)
            const particlesGeometry = new THREE.BufferGeometry();
            const count = 60 * 60; // 点的数量
            const positions = new Float32Array(count * 3);
            
            // 初始化平面网格点
            let i = 0;
            const size = 30;
            const steps = 60;
            const stepSize = size / steps;
            
            for (let x = 0; x < steps; x++) {
                for (let z = 0; z < steps; z++) {
                    positions[i] = (x * stepSize) - (size / 2); // x
                    positions[i + 1] = 0; // y (height) - will be animated
                    positions[i + 2] = (z * stepSize) - (size / 2); // z
                    i += 3;
                }
            }
            
            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

            // 材质：蓝色小点
            const material = new THREE.PointsMaterial({
                color: 0x3b82f6, // 蓝色
                size: 0.15,
                transparent: true,
                opacity: 0.6
            });

            const particles = new THREE.Points(particlesGeometry, material);
            scene.add(particles);

            // 辅助线网格 (增加工程感)
            const gridHelper = new THREE.GridHelper(50, 50, 0xe5e7eb, 0xe5e7eb);
            gridHelper.position.y = -2;
            scene.add(gridHelper);

            // 动画循环
            const clock = new THREE.Clock();

            function animate() {
                requestAnimationFrame(animate);
                
                const time = clock.getElapsedTime() * 0.5;
                const positions = particles.geometry.attributes.position.array;

                // 更新每个点的高度 y
                let i = 0;
                for (let x = 0; x < steps; x++) {
                    for (let z = 0; z < steps; z++) {
                        // 数学波函数: y = sin(x/2 + t) + cos(z/2 + t)
                        const px = positions[i];
                        const pz = positions[i + 2];
                        
                        // 叠加波
                        const y = Math.sin(px * 0.3 + time) * 1.5 + Math.cos(pz * 0.2 + time) * 1.5;
                        
                        positions[i + 1] = y;
                        i += 3;
                    }
                }
                
                particles.geometry.attributes.position.needsUpdate = true;
                
                // 缓慢旋转整个场景
                particles.rotation.y = time * 0.05;

                renderer.render(scene, camera);
            }

            animate();

            // 响应窗口大小
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        document.addEventListener('DOMContentLoaded', initThreeJS);

        // 键盘快捷键支持
        document.addEventListener('keydown', (e) => {
            const map = {
                '1': '课件/index.html',
                '2': '网页资源/index.html',
                '3': '习题/index.html',
                '4': '故事书/index.html',
                '5': 'https://ai.projectmath.xyz/project/index.html'
            };
            if(map[e.key]) window.location.href = map[e.key];
        });
    </script>
</body>
</html>