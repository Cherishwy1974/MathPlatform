var K5=Object.create;var _m=Object.defineProperty;var X5=Object.getOwnPropertyDescriptor;var J5=Object.getOwnPropertyNames;var q5=Object.getPrototypeOf,Z5=Object.prototype.hasOwnProperty;var $5=(t,e)=>()=>(t&&(e=t(t=0)),e);var ss=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ew=(t,e)=>{for(var r in e)_m(t,r,{get:e[r],enumerable:!0})},tw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of J5(e))!Z5.call(t,i)&&i!==r&&_m(t,i,{get:()=>e[i],enumerable:!(n=X5(e,i))||n.enumerable});return t};var Mn=(t,e,r)=>(r=t!=null?K5(q5(t)):{},tw(e||!t||!t.__esModule?_m(r,"default",{value:t,enumerable:!0}):r,t));var BA=ss((ete,q_)=>{var X_=NaN,W7="[object Symbol]",V7=/^\s+|\s+$/g,Y7=/^[-+]0x[0-9a-f]+$/i,K7=/^0b[01]+$/i,X7=/^0o[0-7]+$/i,J7=parseInt,q7=Object.prototype,Z7=q7.toString;function $7(t,e,r){return t===t&&(r!==void 0&&(t=t<=r?t:r),e!==void 0&&(t=t>=e?t:e)),t}function J_(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function eD(t){return!!t&&typeof t=="object"}function tD(t){return typeof t=="symbol"||eD(t)&&Z7.call(t)==W7}function RA(t){if(typeof t=="number")return t;if(tD(t))return X_;if(J_(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=J_(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(V7,"");var r=K7.test(t);return r||X7.test(t)?J7(t.slice(2),r?2:8):Y7.test(t)?X_:+t}function rD(t,e,r){return r===void 0&&(r=e,e=void 0),r!==void 0&&(r=RA(r),r=r===r?r:0),e!==void 0&&(e=RA(e),e=e===e?e:0),$7(RA(t),e,r)}q_.exports=rD});var Cg=ss((poe,pR)=>{var DL=1/0,kL=9007199254740991,LL="[object Arguments]",PL="[object Function]",GL="[object GeneratorFunction]",zL="[object Symbol]",NL=typeof global=="object"&&global&&global.Object===Object&&global,UL=typeof self=="object"&&self&&self.Object===Object&&self,jL=NL||UL||Function("return this")();function HL(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function QL(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function WL(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ey=Object.prototype,VL=ey.hasOwnProperty,ty=ey.toString,oR=jL.Symbol,YL=ey.propertyIsEnumerable,iR=oR?oR.isConcatSpreadable:void 0,nR=Math.max;function aR(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=qL),i||(i=[]);++o<s;){var p=t[o];e>0&&r(p)?e>1?aR(p,e-1,r,n,i):WL(i,p):n||(i[i.length]=p)}return i}function KL(t,e){return t=Object(t),XL(t,e,function(r,n){return n in t})}function XL(t,e,r){for(var n=-1,i=e.length,o={};++n<i;){var s=e[n],p=t[s];r(p,s)&&(o[s]=p)}return o}function JL(t,e){return e=nR(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,i=nR(r.length-e,0),o=Array(i);++n<i;)o[n]=r[e+n];n=-1;for(var s=Array(e+1);++n<e;)s[n]=r[n];return s[e]=o,HL(t,this,s)}}function qL(t){return eP(t)||$L(t)||!!(iR&&t&&t[iR])}function ZL(t){if(typeof t=="string"||aP(t))return t;var e=t+"";return e=="0"&&1/t==-DL?"-0":e}function $L(t){return rP(t)&&VL.call(t,"callee")&&(!YL.call(t,"callee")||ty.call(t)==LL)}var eP=Array.isArray;function tP(t){return t!=null&&iP(t.length)&&!oP(t)}function rP(t){return sR(t)&&tP(t)}function oP(t){var e=nP(t)?ty.call(t):"";return e==PL||e==GL}function iP(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=kL}function nP(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function sR(t){return!!t&&typeof t=="object"}function aP(t){return typeof t=="symbol"||sR(t)&&ty.call(t)==zL}var sP=JL(function(t,e){return t==null?{}:KL(t,QL(aR(e,1),ZL))});pR.exports=sP});var vy=ss((Mie,LR)=>{var XP=200,fy="__lodash_hash_undefined__",JP=1/0,BR=9007199254740991,qP="[object Arguments]",ZP="[object Function]",$P="[object GeneratorFunction]",eG="[object Symbol]",tG=/[\\^$.*+?()[\]{}|]/g,rG=/^\[object .+?Constructor\]$/,oG=/^(?:0|[1-9]\d*)$/,iG=typeof global=="object"&&global&&global.Object===Object&&global,nG=typeof self=="object"&&self&&self.Object===Object&&self,gy=iG||nG||Function("return this")();function aG(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function sG(t,e){var r=t?t.length:0;return!!r&&cG(t,e,0)>-1}function pG(t,e,r){for(var n=-1,i=t?t.length:0;++n<i;)if(r(e,t[n]))return!0;return!1}function xR(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function hy(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function lG(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function cG(t,e,r){if(e!==e)return lG(t,dG,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function dG(t){return t!==t}function uG(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function fG(t){return function(e){return t(e)}}function gG(t,e){return t.has(e)}function hG(t,e){return t?.[e]}function mG(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function MR(t,e){return function(r){return t(e(r))}}var AG=Array.prototype,yG=Function.prototype,Tg=Object.prototype,dy=gy["__core-js_shared__"],bR=(function(){var t=/[^.]+$/.exec(dy&&dy.keys&&dy.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})(),wR=yG.toString,tl=Tg.hasOwnProperty,my=Tg.toString,vG=RegExp("^"+wR.call(tl).replace(tG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_R=gy.Symbol,EG=MR(Object.getPrototypeOf,Object),bG=Tg.propertyIsEnumerable,_G=AG.splice,CR=_R?_R.isConcatSpreadable:void 0,uy=Object.getOwnPropertySymbols,RR=Math.max,CG=SR(gy,"Map"),Dd=SR(Object,"create");function js(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function RG(){this.__data__=Dd?Dd(null):{}}function BG(t){return this.has(t)&&delete this.__data__[t]}function xG(t){var e=this.__data__;if(Dd){var r=e[t];return r===fy?void 0:r}return tl.call(e,t)?e[t]:void 0}function MG(t){var e=this.__data__;return Dd?e[t]!==void 0:tl.call(e,t)}function wG(t,e){var r=this.__data__;return r[t]=Dd&&e===void 0?fy:e,this}js.prototype.clear=RG;js.prototype.delete=BG;js.prototype.get=xG;js.prototype.has=MG;js.prototype.set=wG;function rl(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function TG(){this.__data__=[]}function SG(t){var e=this.__data__,r=Sg(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():_G.call(e,r,1),!0}function IG(t){var e=this.__data__,r=Sg(e,t);return r<0?void 0:e[r][1]}function FG(t){return Sg(this.__data__,t)>-1}function OG(t,e){var r=this.__data__,n=Sg(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}rl.prototype.clear=TG;rl.prototype.delete=SG;rl.prototype.get=IG;rl.prototype.has=FG;rl.prototype.set=OG;function ol(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function DG(){this.__data__={hash:new js,map:new(CG||rl),string:new js}}function kG(t){return Ig(this,t).delete(t)}function LG(t){return Ig(this,t).get(t)}function PG(t){return Ig(this,t).has(t)}function GG(t,e){return Ig(this,t).set(t,e),this}ol.prototype.clear=DG;ol.prototype.delete=kG;ol.prototype.get=LG;ol.prototype.has=PG;ol.prototype.set=GG;function wg(t){var e=-1,r=t?t.length:0;for(this.__data__=new ol;++e<r;)this.add(t[e])}function zG(t){return this.__data__.set(t,fy),this}function NG(t){return this.__data__.has(t)}wg.prototype.add=wg.prototype.push=zG;wg.prototype.has=NG;function UG(t,e){var r=Ay(t)||IR(t)?uG(t.length,String):[],n=r.length,i=!!n;for(var o in t)(e||tl.call(t,o))&&!(i&&(o=="length"||$G(o,n)))&&r.push(o);return r}function Sg(t,e){for(var r=t.length;r--;)if(az(t[r][0],e))return r;return-1}function jG(t,e,r,n){var i=-1,o=sG,s=!0,p=t.length,l=[],c=e.length;if(!p)return l;r&&(e=xR(e,fG(r))),n?(o=pG,s=!1):e.length>=XP&&(o=gG,s=!1,e=new wg(e));e:for(;++i<p;){var u=t[i],d=r?r(u):u;if(u=n||u!==0?u:0,s&&d===d){for(var f=c;f--;)if(e[f]===d)continue e;l.push(u)}else o(e,d,n)||l.push(u)}return l}function TR(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=ZG),i||(i=[]);++o<s;){var p=t[o];e>0&&r(p)?e>1?TR(p,e-1,r,n,i):hy(i,p):n||(i[i.length]=p)}return i}function HG(t,e,r){var n=e(t);return Ay(t)?n:hy(n,r(t))}function QG(t){if(!yy(t)||tz(t))return!1;var e=OR(t)||mG(t)?vG:rG;return e.test(nz(t))}function WG(t){if(!yy(t))return oz(t);var e=rz(t),r=[];for(var n in t)n=="constructor"&&(e||!tl.call(t,n))||r.push(n);return r}function VG(t,e){return t=Object(t),YG(t,e,function(r,n){return n in t})}function YG(t,e,r){for(var n=-1,i=e.length,o={};++n<i;){var s=e[n],p=t[s];r(p,s)&&(o[s]=p)}return o}function KG(t,e){return e=RR(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,i=RR(r.length-e,0),o=Array(i);++n<i;)o[n]=r[e+n];n=-1;for(var s=Array(e+1);++n<e;)s[n]=r[n];return s[e]=o,aG(t,this,s)}}function XG(t){return HG(t,cz,qG)}function Ig(t,e){var r=t.__data__;return ez(e)?r[typeof e=="string"?"string":"hash"]:r.map}function SR(t,e){var r=hG(t,e);return QG(r)?r:void 0}var JG=uy?MR(uy,Object):kR,qG=uy?function(t){for(var e=[];t;)hy(e,JG(t)),t=EG(t);return e}:kR;function ZG(t){return Ay(t)||IR(t)||!!(CR&&t&&t[CR])}function $G(t,e){return e=e??BR,!!e&&(typeof t=="number"||oG.test(t))&&t>-1&&t%1==0&&t<e}function ez(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function tz(t){return!!bR&&bR in t}function rz(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Tg;return t===r}function oz(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function iz(t){if(typeof t=="string"||lz(t))return t;var e=t+"";return e=="0"&&1/t==-JP?"-0":e}function nz(t){if(t!=null){try{return wR.call(t)}catch{}try{return t+""}catch{}}return""}function az(t,e){return t===e||t!==t&&e!==e}function IR(t){return sz(t)&&tl.call(t,"callee")&&(!bG.call(t,"callee")||my.call(t)==qP)}var Ay=Array.isArray;function FR(t){return t!=null&&pz(t.length)&&!OR(t)}function sz(t){return DR(t)&&FR(t)}function OR(t){var e=yy(t)?my.call(t):"";return e==ZP||e==$P}function pz(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=BR}function yy(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function DR(t){return!!t&&typeof t=="object"}function lz(t){return typeof t=="symbol"||DR(t)&&my.call(t)==eG}function cz(t){return FR(t)?UG(t,!0):WG(t)}var dz=KG(function(t,e){return t==null?{}:(e=xR(TR(e,1),iz),VG(t,jG(XG(t),e)))});function kR(){return[]}LR.exports=dz});var R6={};ew(R6,{DrawingUtils:()=>c6,FaceDetector:()=>g6,FaceLandmarker:()=>h6,FaceStylizer:()=>m6,FilesetResolver:()=>d6,GestureRecognizer:()=>A6,HandLandmarker:()=>y6,ImageClassifier:()=>v6,ImageEmbedder:()=>E6,ImageSegmenter:()=>b6,InteractiveSegmenter:()=>_6,MPImage:()=>u6,MPMask:()=>f6,ObjectDetector:()=>C6,PoseLandmarker:()=>l6,default:()=>Mt});async function _B(){if(Pg===void 0)try{await WebAssembly.instantiate(Gz),Pg=!0}catch{Pg=!1}return Pg}async function Oy(t,e=""){let r=await _B()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${e}/${t}_${r}.js`,wasmBinaryPath:`${e}/${t}_${r}.wasm`}}function Dy(t){return t=t||{},Object.assign(Object.assign(Object.assign({},zz),{fillColor:t.color}),t)}function ca(t,e){return t instanceof Function?t(e):t}function Ys(t,e){if(t===null)throw new Error(`Unable to obtain required WebGL resource: ${e}`);return t}function Hz(t=navigator){let e=t.userAgent;return e.includes("Safari")&&!e.includes("Chrome")}function Qz(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Kz(t){var e,r,n,i,o,s,p,l,c,u,d,f,g;let v=t.getScoreList(),A=t.getLabelIdList(),m=t.getLabelList(),h=t.getDisplayNameList(),y={categories:[],keypoints:[]};for(let b=0;b<v.length;b++)y.categories.push({score:v[b],index:(e=A[b])!==null&&e!==void 0?e:Yz,categoryName:(r=m[b])!==null&&r!==void 0?r:"",displayName:(n=h[b])!==null&&n!==void 0?n:""});let E=(i=t.getLocationData())===null||i===void 0?void 0:i.getBoundingBox();if(E&&(y.boundingBox={originX:(o=E.getXmin())!==null&&o!==void 0?o:0,originY:(s=E.getYmin())!==null&&s!==void 0?s:0,width:(p=E.getWidth())!==null&&p!==void 0?p:0,height:(l=E.getHeight())!==null&&l!==void 0?l:0}),(c=t.getLocationData())===null||c===void 0?void 0:c.getRelativeKeypointsList().length)for(let b of t.getLocationData().getRelativeKeypointsList())y.keypoints.push({x:(u=b.getX())!==null&&u!==void 0?u:0,y:(d=b.getY())!==null&&d!==void 0?d:0,score:(f=b.getScore())!==null&&f!==void 0?f:0,label:(g=b.getKeypointLabel())!==null&&g!==void 0?g:""});return y}function Xz(t){return class extends t{registerModelResourcesGraphService(){this.wasmModule._registerModelResourcesGraphService()}}}async function SB(t,e,r,n){let i={locateFile:()=>r.wasmBinaryPath.toString()},o=await(0,TB.createMediaPipeLib)(t,r.wasmLoaderPath,$z,e,i);return await o.setOptions(n),o}function tN(t){return class extends t{get wasmImageModule(){return this.wasmModule}addGpuBufferAsImageToStream(e,r,n){this.wrapStringPtr(r,(i=>{let[o,s]=this.bindTextureToStream(e,i);this.wasmImageModule._addBoundTextureAsImageToStream(i,o,s,n)}))}attachImageListener(e,r){this.setListener(e,r),this.wrapStringPtr(e,(n=>{this.wasmImageModule._attachImageListener(n)}))}attachImageVectorListener(e,r){this.setVectorListener(e,r),this.wrapStringPtr(e,(n=>{this.wasmImageModule._attachImageVectorListener(n)}))}}}function dN(){return typeof OffscreenCanvas<"u"&&!(0,pN.isWebKit)()?void 0:document.createElement("canvas")}function LB(t,e=sB,r=""){return{categories:t.map((n=>{var i,o,s,p;return{index:(i=n.getIndex())!==null&&i!==void 0?i:sB,score:(o=n.getScore())!==null&&o!==void 0?o:uN,categoryName:(s=n.getLabel())!==null&&s!==void 0?s:"",displayName:(p=n.getDisplayName())!==null&&p!==void 0?p:""}})),headIndex:e,headName:r}}function fN(t){var e,r;return LB((r=(e=t.getClassificationList())===null||e===void 0?void 0:e.getClassificationList())!==null&&r!==void 0?r:[],t.getHeadIndex(),t.getHeadName())}function gN(t){let e={classifications:t.getClassificationsList().map((r=>fN(r)))};return t.hasTimestampMs()&&(e.timestampMs=t.getTimestampMs()),e}function hN(t){var e,r,n;let i=[];for(let o of t.getLandmarkList())i.push({x:(e=o.getX())!==null&&e!==void 0?e:0,y:(r=o.getY())!==null&&r!==void 0?r:0,z:(n=o.getZ())!==null&&n!==void 0?n:0});return i}function mN(t){var e,r,n;let i=[];for(let o of t.getLandmarkList())i.push({x:(e=o.getX())!==null&&e!==void 0?e:0,y:(r=o.getY())!==null&&r!==void 0?r:0,z:(n=o.getZ())!==null&&n!==void 0?n:0});return i}function yN(t,e){let r=e?e.clone():new AN.ClassifierOptions;return t.displayNamesLocale!==void 0?r.setDisplayNamesLocale(t.displayNamesLocale):t.displayNamesLocale===void 0&&r.clearDisplayNamesLocale(),t.maxResults!==void 0?r.setMaxResults(t.maxResults):"maxResults"in t&&r.clearMaxResults(),t.scoreThreshold!==void 0?r.setScoreThreshold(t.scoreThreshold):"scoreThreshold"in t&&r.clearScoreThreshold(),t.categoryAllowlist!==void 0?r.setCategoryAllowlistList(t.categoryAllowlist):"categoryAllowlist"in t&&r.clearCategoryAllowlistList(),t.categoryDenylist!==void 0?r.setCategoryDenylistList(t.categoryDenylist):"categoryDenylist"in t&&r.clearCategoryDenylistList(),r}function EN(t,e){let r=e?e.clone():new vN.EmbedderOptions;return t.l2Normalize!==void 0?r.setL2Normalize(t.l2Normalize):"l2Normalize"in t&&r.clearL2Normalize(),t.quantize!==void 0?r.setQuantize(t.quantize):"quantize"in t&&r.clearQuantize(),r}function _N(t){var e,r,n,i;let o={headIndex:(e=t.getHeadIndex())!==null&&e!==void 0?e:bN,headName:(r=t.getHeadName())!==null&&r!==void 0?r:""};if(t.hasFloatEmbedding())o.floatEmbedding=t.getFloatEmbedding().getValuesList();else{let s=(i=(n=t.getQuantizedEmbedding())===null||n===void 0?void 0:n.getValues())!==null&&i!==void 0?i:"";o.quantizedEmbedding=typeof s=="string"?Uint8Array.from(atob(s),(p=>p.charCodeAt(0))):s}return o}function CN(t){return{embeddings:t.getEmbeddingsList().map((e=>_N(e))),timestampMs:t.getTimestampMs()}}function RN(t,e){if(t.floatEmbedding&&e.floatEmbedding)return hB(t.floatEmbedding,e.floatEmbedding);if(t.quantizedEmbedding&&e.quantizedEmbedding)return hB(gB(t.quantizedEmbedding),gB(e.quantizedEmbedding));throw new Error("Cannot compute cosine similarity between quantized and float embeddings.")}function gB(t){return Array.from(t,(e=>e>127?e-256:e))}function hB(t,e){if(t.length!==e.length)throw new Error(`Cannot compute cosine similarity between embeddings of different sizes (${t.length} vs. ${e.length}).`);let r=0,n=0,i=0;for(let o=0;o<t.length;o++)r+=t[o]*e[o],n+=t[o]*t[o],i+=e[o]*e[o];if(n<=0||i<=0)throw new Error("Cannot compute cosine similarity on embedding with 0 norm.");return r/Math.sqrt(n*i)}var Je,Mt,Hg,Pg,Gz,Ly,Qg,zz,Py,Hd,Va,Nz,Uz,Gy,zy,Gg,jz,Qo,Wg,Qd,Ha,zg,Wz,Vz,ri,Vg,CB,bt,Ve,ht,RB,Yg,BB,xB,MB,qR,qy,ZR,$R,kt,Zy,Ny,Kg,eh,Wd,Yz,ko,wB,Wa,$y,Ud,ky,eB,Jz,qz,TB,Zz,$z,Ng,tB,eN,Uy,jy,Ug,rN,rB,oN,iN,nN,aN,sN,pN,lN,cN,Hy,Qy,IB,oB,FB,Jd,qd,OB,DB,iB,e2,kB,nB,Wy,aB,Ks,sB,uN,Qa,PB,Xt,GB,pB,zB,NB,lB,UB,t2,Xg,jB,r2,cB,Jg,th,qg,Vd,AN,jd,HB,dB,QB,WB,uB,VB,YB,KB,XB,fB,JB,qB,ZB,Vy,Zg,vN,$g,bN,jg,$B,mB,e6,t6,Zd,AB,o2,Yd,Yy,yB,r6,i2,o6,Kd,Ky,vB,i6,n6,a6,EB,s6,n2,p6,Xy,Xd,Jy,bB,l6,BN,xN,MN,wN,TN,SN,IN,FN,ON,DN,kN,LN,PN,GN,zN,NN,c6,UN,d6,jN,u6,HN,f6,QN,g6,WN,h6,VN,m6,YN,A6,KN,y6,XN,v6,JN,E6,qN,b6,ZN,_6,$N,C6,eU,B6=$5(()=>{Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mt={},Hg={};Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.FilesetResolver=void 0;Gz=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);Ly=class{static isSimdSupported(){return _B()}static forAudioTasks(e){return Oy("audio",e)}static forTextTasks(e){return Oy("text",e)}static forVisionTasks(e){return Oy("vision",e)}};Hg.FilesetResolver=Ly;Qg={};Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.DrawingUtils=void 0;zz={color:"white",lineWidth:4,radius:6};Py=class t{constructor(e){this.ctx=e}static clamp(e,r,n){let i=Math.min(r,n),o=Math.max(r,n);return Math.max(i,Math.min(o,e))}static lerp(e,r,n,i,o){let s=i*(1-(e-r)/(n-r))+o*(1-(n-e)/(n-r));return t.clamp(s,i,o)}drawLandmarks(e,r){if(!e)return;let n=this.ctx,i=Dy(r);n.save();let o=n.canvas,s=0;for(let p of e){n.fillStyle=ca(i.fillColor,{index:s,from:p}),n.strokeStyle=ca(i.color,{index:s,from:p}),n.lineWidth=ca(i.lineWidth,{index:s,from:p});let l=new Path2D;l.arc(p.x*o.width,p.y*o.height,ca(i.radius,{index:s,from:p}),0,2*Math.PI),n.fill(l),n.stroke(l),++s}n.restore()}drawConnectors(e,r,n){if(!e||!r)return;let i=this.ctx,o=Dy(n);i.save();let s=i.canvas,p=0;for(let l of r){i.beginPath();let c=e[l.start],u=e[l.end];c&&u&&(i.strokeStyle=ca(o.color,{index:p,from:c,to:u}),i.lineWidth=ca(o.lineWidth,{index:p,from:c,to:u}),i.moveTo(c.x*s.width,c.y*s.height),i.lineTo(u.x*s.width,u.y*s.height)),++p,i.stroke()}i.restore()}drawBoundingBox(e,r){let n=this.ctx,i=Dy(r);n.save(),n.beginPath(),n.lineWidth=ca(i.lineWidth,{}),n.strokeStyle=ca(i.color,{}),n.fillStyle=ca(i.fillColor,{}),n.moveTo(e.originX,e.originY),n.lineTo(e.originX+e.width,e.originY),n.lineTo(e.originX+e.width,e.originY+e.height),n.lineTo(e.originX,e.originY+e.height),n.lineTo(e.originX,e.originY),n.stroke(),n.fill(),n.restore()}};Qg.DrawingUtils=Py;Hd={},Va={};Object.defineProperty(Va,"__esModule",{value:!0}),Va.MPImageShaderContext=Va.assertNotNull=void 0;Nz=`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,Uz=`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
   void main() {
     gl_FragColor = texture2D(inputTexture, vTex);
   }
 `;Va.assertNotNull=Ys;Gy=class{constructor(e,r,n,i){this.gl=e,this.vertexArrayObject=r,this.vertexBuffer=n,this.textureBuffer=i}bind(){this.gl.bindVertexArray(this.vertexArrayObject)}unbind(){this.gl.bindVertexArray(null)}close(){this.gl.deleteVertexArray(this.vertexArrayObject),this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.textureBuffer)}},zy=class{compileShader(e,r){let n=this.gl,i=Ys(n.createShader(r),"Failed to create WebGL shader");if(n.shaderSource(i,e),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS)){let o=n.getShaderInfoLog(i);throw new Error(`Could not compile WebGL shader: ${o}`)}return n.attachShader(this.program,i),i}setupShaders(){let e=this.gl;if(this.program=Ys(e.createProgram(),"Failed to create WebGL program"),this.vertexShader=this.compileShader(Nz,e.VERTEX_SHADER),this.fragmentShader=this.compileShader(Uz,e.FRAGMENT_SHADER),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS)){let r=e.getProgramInfoLog(this.program);throw new Error(`Error during program linking: ${r}`)}this.aVertex=e.getAttribLocation(this.program,"aVertex"),this.aTex=e.getAttribLocation(this.program,"aTex")}createBuffers(e){let r=this.gl,n=Ys(r.createVertexArray(),"Failed to create vertex array");r.bindVertexArray(n);let i=Ys(r.createBuffer(),"Failed to create buffer");r.bindBuffer(r.ARRAY_BUFFER,i),r.enableVertexAttribArray(this.aVertex),r.vertexAttribPointer(this.aVertex,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW);let o=Ys(r.createBuffer(),"Failed to create buffer");r.bindBuffer(r.ARRAY_BUFFER,o),r.enableVertexAttribArray(this.aTex),r.vertexAttribPointer(this.aTex,2,r.FLOAT,!1,0,0);let s=e?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0];return r.bufferData(r.ARRAY_BUFFER,new Float32Array(s),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),r.bindVertexArray(null),new Gy(r,n,i,o)}getShaderBuffers(e){return e?(this.shaderBuffersFlipVertically||(this.shaderBuffersFlipVertically=this.createBuffers(!0)),this.shaderBuffersFlipVertically):(this.shaderBuffersPassthrough||(this.shaderBuffersPassthrough=this.createBuffers(!1)),this.shaderBuffersPassthrough)}maybeInitGL(e){if(this.gl){if(e!==this.gl)throw new Error("Cannot change GL context once initialized")}else this.gl=e}run(e,r,n){this.maybeInitGL(e),this.program||this.setupShaders();let i=this.getShaderBuffers(r);e.useProgram(this.program),i.bind();let o=n();return i.unbind(),o}bindFramebuffer(e,r){this.maybeInitGL(e),this.framebuffer||(this.framebuffer=Ys(e.createFramebuffer(),"Failed to create framebuffe.")),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}unbindFramebuffer(){var e;(e=this.gl)===null||e===void 0||e.bindFramebuffer(this.gl.FRAMEBUFFER,null)}close(){if(this.program){let e=this.gl;e.deleteProgram(this.program),e.deleteShader(this.vertexShader),e.deleteShader(this.fragmentShader)}this.framebuffer&&this.gl.deleteFramebuffer(this.framebuffer),this.shaderBuffersPassthrough&&this.shaderBuffersPassthrough.close(),this.shaderBuffersFlipVertically&&this.shaderBuffersFlipVertically.close()}};Va.MPImageShaderContext=zy,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.MPImage=void 0;Gg=Va,jz=250;(function(t){t[t.IMAGE_DATA=0]="IMAGE_DATA",t[t.IMAGE_BITMAP=1]="IMAGE_BITMAP",t[t.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(Qo||(Qo={}));Wg=class t{constructor(e,r,n,i,o,s,p){this.containers=e,this.ownsImageBitmap=r,this.ownsWebGLTexture=n,this.canvas=i,this.shaderContext=o,this.width=s,this.height=p,(this.ownsImageBitmap||this.ownsWebGLTexture)&&(--t.instancesBeforeWarning,t.instancesBeforeWarning===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources."))}hasImageData(){return!!this.getContainer(Qo.IMAGE_DATA)}hasImageBitmap(){return!!this.getContainer(Qo.IMAGE_BITMAP)}hasWebGLTexture(){return!!this.getContainer(Qo.WEBGL_TEXTURE)}getAsImageData(){return this.convertToImageData()}getAsImageBitmap(){return this.convertToImageBitmap()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getContainer(e){switch(e){case Qo.IMAGE_DATA:return this.containers.find((r=>r instanceof ImageData));case Qo.IMAGE_BITMAP:return this.containers.find((r=>typeof ImageBitmap<"u"&&r instanceof ImageBitmap));case Qo.WEBGL_TEXTURE:return this.containers.find((r=>typeof WebGLTexture<"u"&&r instanceof WebGLTexture));default:throw new Error(`Type is not supported: ${e}`)}}clone(){let e=[];for(let r of this.containers){let n;if(r instanceof ImageData)n=new ImageData(r.data,this.width,this.height);else if(r instanceof WebGLTexture){let i=this.getGL(),o=this.getShaderContext();i.activeTexture(i.TEXTURE1),n=(0,Gg.assertNotNull)(i.createTexture(),"Failed to create texture"),i.bindTexture(i.TEXTURE_2D,n),this.configureTextureParams(),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindTexture(i.TEXTURE_2D,null),o.bindFramebuffer(i,n),o.run(i,!1,(()=>{this.bindTexture(),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),this.unbindTexture()})),o.unbindFramebuffer(),this.unbindTexture()}else{if(!(r instanceof ImageBitmap))throw new Error(`Type is not supported: ${r}`);this.convertToWebGLTexture(),this.bindTexture(),n=this.copyTextureToBitmap(),this.unbindTexture()}e.push(n)}return new t(e,this.hasImageBitmap(),this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getOffscreenCanvas(){if(!(this.canvas instanceof OffscreenCanvas))throw new Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return this.canvas}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return this.gl||(this.gl=(0,Gg.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new Gg.MPImageShaderContext),this.shaderContext}convertToImageBitmap(){let e=this.getContainer(Qo.IMAGE_BITMAP);return e||(this.convertToWebGLTexture(),e=this.convertWebGLTextureToImageBitmap(),this.containers.push(e),this.ownsImageBitmap=!0),e}convertToImageData(){let e=this.getContainer(Qo.IMAGE_DATA);if(!e){let r=this.getGL(),n=this.getShaderContext(),i=new Uint8Array(this.width*this.height*4),o=this.convertToWebGLTexture();n.bindFramebuffer(r,o),r.readPixels(0,0,this.width,this.height,r.RGBA,r.UNSIGNED_BYTE,i),n.unbindFramebuffer(),e=new ImageData(new Uint8ClampedArray(i.buffer),this.width,this.height),this.containers.push(e)}return e}convertToWebGLTexture(){let e=this.getContainer(Qo.WEBGL_TEXTURE);if(!e){let r=this.getGL();e=this.bindTexture();let n=this.getContainer(Qo.IMAGE_BITMAP)||this.convertToImageData();r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),this.unbindTexture()}return e}configureTextureParams(){let e=this.getGL();e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)}bindTexture(){let e=this.getGL();e.viewport(0,0,this.width,this.height),e.activeTexture(e.TEXTURE0);let r=this.getContainer(Qo.WEBGL_TEXTURE);return r?e.bindTexture(e.TEXTURE_2D,r):(r=(0,Gg.assertNotNull)(e.createTexture(),"Failed to create texture"),this.containers.push(r),this.ownsWebGLTexture=!0,e.bindTexture(e.TEXTURE_2D,r),this.configureTextureParams()),r}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}copyTextureToBitmap(){let e=this.getGL();return this.getShaderContext().run(e,!0,(()=>this.runWithResizedCanvas((()=>(e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),this.getOffscreenCanvas().transferToImageBitmap())))))}convertWebGLTextureToImageBitmap(){this.bindTexture();let e=this.copyTextureToBitmap();return this.unbindTexture(),e}runWithResizedCanvas(e){let r=this.canvas;if(r.width===this.width&&r.height===this.height)return e();let n=r.width,i=r.height;r.width=this.width,r.height=this.height;let o=e();return r.width=n,r.height=i,o}close(){this.ownsImageBitmap&&this.getContainer(Qo.IMAGE_BITMAP).close(),this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(Qo.WEBGL_TEXTURE)),t.instancesBeforeWarning=-1}};Hd.MPImage=Wg,Wg.instancesBeforeWarning=jz;Qd={},Ha={};Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.isIOS=Ha.isWebKit=void 0,Ha.isWebKit=Hz,Ha.isIOS=Qz,Object.defineProperty(Qd,"__esModule",{value:!0}),Qd.MPMask=void 0;zg=Va,Wz=Ha,Vz=250;(function(t){t[t.UINT8_ARRAY=0]="UINT8_ARRAY",t[t.FLOAT32_ARRAY=1]="FLOAT32_ARRAY",t[t.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(ri||(ri={}));Vg=class t{constructor(e,r,n,i,o,s){this.containers=e,this.ownsWebGLTexture=r,this.canvas=n,this.shaderContext=i,this.width=o,this.height=s,this.ownsWebGLTexture&&(--t.instancesBeforeWarning,t.instancesBeforeWarning===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources."))}hasUint8Array(){return!!this.getContainer(ri.UINT8_ARRAY)}hasFloat32Array(){return!!this.getContainer(ri.FLOAT32_ARRAY)}hasWebGLTexture(){return!!this.getContainer(ri.WEBGL_TEXTURE)}getAsUint8Array(){return this.convertToUint8Array()}getAsFloat32Array(){return this.convertToFloat32Array()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getTexImage2DFormat(){let e=this.getGL();if(!t.texImage2DFormat)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))t.texImage2DFormat=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw new Error("GPU does not fully support 4-channel float32 or float16 formats");t.texImage2DFormat=e.R16F}return t.texImage2DFormat}getContainer(e){switch(e){case ri.UINT8_ARRAY:return this.containers.find((r=>r instanceof Uint8Array));case ri.FLOAT32_ARRAY:return this.containers.find((r=>r instanceof Float32Array));case ri.WEBGL_TEXTURE:return this.containers.find((r=>typeof WebGLTexture<"u"&&r instanceof WebGLTexture));default:throw new Error(`Type is not supported: ${e}`)}}clone(){let e=[];for(let r of this.containers){let n;if(r instanceof Uint8Array)n=new Uint8Array(r);else if(r instanceof Float32Array)n=new Float32Array(r);else{if(!(r instanceof WebGLTexture))throw new Error(`Type is not supported: ${r}`);{let i=this.getGL(),o=this.getShaderContext();i.activeTexture(i.TEXTURE1),n=(0,zg.assertNotNull)(i.createTexture(),"Failed to create texture"),i.bindTexture(i.TEXTURE_2D,n),this.configureTextureParams();let s=this.getTexImage2DFormat();i.texImage2D(i.TEXTURE_2D,0,s,this.width,this.height,0,i.RED,i.FLOAT,null),i.bindTexture(i.TEXTURE_2D,null),o.bindFramebuffer(i,n),o.run(i,!1,(()=>{this.bindTexture(),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),this.unbindTexture()})),o.unbindFramebuffer(),this.unbindTexture()}}e.push(n)}return new t(e,this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return this.gl||(this.gl=(0,zg.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new zg.MPImageShaderContext),this.shaderContext}convertToFloat32Array(){let e=this.getContainer(ri.FLOAT32_ARRAY);if(!e){let r=this.getContainer(ri.UINT8_ARRAY);if(r)e=new Float32Array(r).map((n=>n/255));else{e=new Float32Array(this.width*this.height);let n=this.getGL(),i=this.getShaderContext(),o=this.convertToWebGLTexture();if(i.bindFramebuffer(n,o),(0,Wz.isIOS)()){let s=new Float32Array(this.width*this.height*4);n.readPixels(0,0,this.width,this.height,n.RGBA,n.FLOAT,s);for(let p=0,l=0;p<e.length;++p,l+=4)e[p]=s[l]}else n.readPixels(0,0,this.width,this.height,n.RED,n.FLOAT,e)}this.containers.push(e)}return e}convertToUint8Array(){let e=this.getContainer(ri.UINT8_ARRAY);if(!e){let r=this.convertToFloat32Array();e=new Uint8Array(r.map((n=>255*n))),this.containers.push(e)}return e}convertToWebGLTexture(){let e=this.getContainer(ri.WEBGL_TEXTURE);if(!e){let r=this.getGL();e=this.bindTexture();let n=this.convertToFloat32Array(),i=this.getTexImage2DFormat();r.texImage2D(r.TEXTURE_2D,0,i,this.width,this.height,0,r.RED,r.FLOAT,n),this.unbindTexture()}return e}configureTextureParams(){let e=this.getGL();e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)}bindTexture(){let e=this.getGL();e.viewport(0,0,this.width,this.height),e.activeTexture(e.TEXTURE0);let r=this.getContainer(ri.WEBGL_TEXTURE);return r?e.bindTexture(e.TEXTURE_2D,r):(r=(0,zg.assertNotNull)(e.createTexture(),"Failed to create texture"),this.containers.push(r),this.ownsWebGLTexture=!0,e.bindTexture(e.TEXTURE_2D,r),this.configureTextureParams()),r}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}close(){this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(ri.WEBGL_TEXTURE)),t.instancesBeforeWarning=-1}};Qd.MPMask=Vg,Vg.instancesBeforeWarning=Vz;CB={},bt={},Ve={};(function(exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(t,e,r){t instanceof String&&(t=String(t));for(var n=t.length,i=0;i<n;i++){var o=t[i];if(e.call(r,o,i,t))return{i,v:o}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,r){t!=Array.prototype&&t!=Object.prototype&&(t[e]=r.value)},$jscomp.getGlobal=function(t){return typeof window<"u"&&window===t?t:Je!==void 0&&Je!=null?Je:t},$jscomp.global=$jscomp.getGlobal(Je),$jscomp.polyfill=function(t,e,r,n){if(e){for(r=$jscomp.global,t=t.split("."),n=0;n<t.length-1;n++){var i=t[n];i in r||(r[i]={}),r=r[i]}(e=e(n=r[t=t[t.length-1]]))!=n&&e!=null&&$jscomp.defineProperty(r,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.findIndex",(function(t){return t||function(e,r){return $jscomp.findInternal(this,e,r).i}}),"es6","es3"),$jscomp.checkStringArgs=function(t,e,r){if(t==null)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return t+""},$jscomp.polyfill("String.prototype.endsWith",(function(t){return t||function(e,r){var n=$jscomp.checkStringArgs(this,e,"endsWith");e+="",r===void 0&&(r=n.length),r=Math.max(0,Math.min(0|r,n.length));for(var i=e.length;0<i&&0<r;)if(n[--r]!=e[--i])return!1;return 0>=i}}),"es6","es3"),$jscomp.polyfill("Array.prototype.find",(function(t){return t||function(e,r){return $jscomp.findInternal(this,e,r).v}}),"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",(function(t){return t||function(e,r){var n=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var i=n.length,o=e.length;r=Math.max(0,Math.min(0|r,n.length));for(var s=0;s<o&&r<i;)if(n[r++]!=e[s++])return!1;return s>=o}}),"es6","es3"),$jscomp.polyfill("String.prototype.repeat",(function(t){return t||function(e){var r=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=r),(e>>>=1)&&(r+=r);return n}}),"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=Je||self,goog.exportPath_=function(t,e,r){t=t.split("."),r=r||goog.global,t[0]in r||r.execScript===void 0||r.execScript("var "+t[0]);for(var n;t.length&&(n=t.shift());)t.length||e===void 0?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=e},goog.define=function(t,e){return e},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(t){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(t)},goog.constructNamespace_=function(t,e){goog.exportPath_(t,e)},goog.getScriptNonce=function(t){return t&&t!=goog.global?goog.getScriptNonce_(t.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(t)?t:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(t){if(typeof t!="string"||!t||t.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+t+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=t},goog.module.get=function(t){return goog.module.getInternal_(t)},goog.module.getInternal_=function(t){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var t=goog.global.$jscomp;return!!t&&typeof t.getCurrentModulePath=="function"&&!!t.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(t){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=t;else{var e=goog.global.$jscomp;if(!e||typeof e.getCurrentModulePath!="function")throw Error('Module with namespace "'+t+'" has been loaded incorrectly.');e=e.require(e.getCurrentModulePath()),goog.loadedModules_[t]={exports:e,type:goog.ModuleType.ES6,moduleId:t}}},goog.setTestOnly=function(t){if(goog.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},goog.forwardDeclare=function(t){},goog.getObjectByName=function(t,e){t=t.split("."),e=e||goog.global;for(var r=0;r<t.length;r++)if((e=e[t[r]])==null)return null;return e},goog.globalize=function(t,e){for(var r in e=e||goog.global,t)e[r]=t[r]},goog.addDependency=function(t,e,r,n){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(t){goog.global.console&&goog.global.console.error(t)},goog.require=function(t){},goog.requireType=function(t){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.instance_=void 0,t.getInstance=function(){return t.instance_?t.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(t){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(t){return"(function(){"+t+`
;})();
`},goog.loadModule=function(t){var e=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(t))var r=t.call(void 0,{});else{if(typeof t!="string")throw Error("Invalid module definition");goog.useSafari10Workaround()&&(t=goog.workaroundSafari10EvalBug(t)),r=goog.loadModuleFromSource_.call(void 0,t)}var n=goog.moduleLoaderState_.moduleName;if(typeof n!="string"||!n)throw Error('Invalid module name "'+n+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof r=="object"&&r!=null&&Object.seal(r),goog.loadedModules_[n]={exports:r,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(t){t=t.split("/");for(var e=0;e<t.length;)t[e]=="."?t.splice(e,1):e&&t[e]==".."&&t[e-1]&&t[e-1]!=".."?t.splice(--e,2):e++;return t.join("/")},goog.loadFileSync_=function(t){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(t);try{var e=new goog.global.XMLHttpRequest;return e.open("get",t,!1),e.send(),e.status==0||e.status==200?e.responseText:null}catch{return null}},goog.transpile_=function(t,e,r){var n=goog.global.$jscomp;n||(goog.global.$jscomp=n={});var i=n.transpile;if(!i){var o=goog.basePath+goog.TRANSPILER,s=goog.loadFileSync_(o);if(s){if(function(){(0,eval)(s+`
//# sourceURL=`+o)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,i=(n=goog.global.$jscomp).transpile}}return i||(i=n.transpile=function(p,l){return goog.logToConsole_(l+" requires transpilation but no transpiler was found."),p}),i(t,e,r)},goog.typeOf=function(t){var e=typeof t;if(e=="object"){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var r=Object.prototype.toString.call(t);if(r=="[object Window]")return"object";if(r=="[object Array]"||typeof t.length=="number"&&t.splice!==void 0&&t.propertyIsEnumerable!==void 0&&!t.propertyIsEnumerable("splice"))return"array";if(r=="[object Function]"||t.call!==void 0&&t.propertyIsEnumerable!==void 0&&!t.propertyIsEnumerable("call"))return"function"}else if(e=="function"&&t.call===void 0)return"object";return e},goog.isArray=function(t){return goog.typeOf(t)=="array"},goog.isArrayLike=function(t){var e=goog.typeOf(t);return e=="array"||e=="object"&&typeof t.length=="number"},goog.isDateLike=function(t){return goog.isObject(t)&&typeof t.getFullYear=="function"},goog.isFunction=function(t){return goog.typeOf(t)=="function"},goog.isObject=function(t){var e=typeof t;return e=="object"&&t!=null||e=="function"},goog.getUid=function(t){return Object.prototype.hasOwnProperty.call(t,goog.UID_PROPERTY_)&&t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(t){return!!t[goog.UID_PROPERTY_]},goog.removeUid=function(t){t!==null&&"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_);try{delete t[goog.UID_PROPERTY_]}catch{}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){var e=goog.typeOf(t);if(e=="object"||e=="array"){if(typeof t.clone=="function")return t.clone();for(var r in e=e=="array"?[]:{},t)e[r]=goog.cloneObject(t[r]);return e}return t},goog.bindNative_=function(t,e,r){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(t,e,r){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}},goog.bind=function(t,e,r){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=r.slice();return n.push.apply(n,arguments),t.apply(this,n)}},goog.mixin=function(t,e){for(var r in e)t[r]=e[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch{}if(goog.global._evalTest_!==void 0){try{delete goog.global._evalTest_}catch{}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(t);else{var e=goog.global.document,r=e.createElement("script");r.type="text/javascript",r.defer=!1,r.appendChild(e.createTextNode(t)),e.head.appendChild(r),e.head.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(t,e){if(String(t).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+t);var r=function(i){return goog.cssNameMapping_[i]||i},n=function(i){i=i.split("-");for(var o=[],s=0;s<i.length;s++)o.push(r(i[s]));return o.join("-")};return n=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?r:n:function(i){return i},t=e?t+"-"+n(e):n(t),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(t):t},goog.setCssNameMapping=function(t,e){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=e},goog.getMsg=function(t,e,r){return r&&r.html&&(t=t.replace(/</g,"&lt;")),e&&(t=t.replace(/\{\$([^}]+)}/g,(function(n,i){return e!=null&&i in e?e[i]:n}))),t},goog.getMsgWithFallback=function(t,e){return t},goog.exportSymbol=function(t,e,r){goog.exportPath_(t,e,r)},goog.exportProperty=function(t,e,r){t[e]=r},goog.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.base=function(n,i,o){for(var s=Array(arguments.length-2),p=2;p<arguments.length;p++)s[p-2]=arguments[p];return e.prototype[i].apply(n,s)}},goog.scope=function(t){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");t.call(goog.global)},goog.defineClass=function(t,e){var r=e.constructor,n=e.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,t),t&&goog.inherits(r,t),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(r.prototype,e),n!=null&&(n instanceof Function?n(r):goog.defineClass.applyProperties_(r,n)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(t,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return t;var r=!goog.defineClass.isUnsealable_(e),n=function(){var i=t.apply(this,arguments)||this;return i[goog.UID_PROPERTY_]=i[goog.UID_PROPERTY_],this.constructor===n&&r&&Object.seal instanceof Function&&Object.seal(i),i};return n},goog.defineClass.isUnsealable_=function(t){return t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},goog.tagUnsealableClass=function(t){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(t){return t},goog.createTrustedTypesPolicy=function(t){var e=null,r=goog.global.trustedTypes||goog.global.TrustedTypes;if(!r||!r.createPolicy)return e;try{e=r.createPolicy(t,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(n){goog.logToConsole_(n.message)}return e},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e},goog.object.forEach=function(t,e,r){for(var n in t)e.call(r,t[n],n,t)},goog.object.filter=function(t,e,r){var n,i={};for(n in t)e.call(r,t[n],n,t)&&(i[n]=t[n]);return i},goog.object.map=function(t,e,r){var n,i={};for(n in t)i[n]=e.call(r,t[n],n,t);return i},goog.object.some=function(t,e,r){for(var n in t)if(e.call(r,t[n],n,t))return!0;return!1},goog.object.every=function(t,e,r){for(var n in t)if(!e.call(r,t[n],n,t))return!1;return!0},goog.object.getCount=function(t){var e,r=0;for(e in t)r++;return r},goog.object.getAnyKey=function(t){for(var e in t)return e},goog.object.getAnyValue=function(t){for(var e in t)return t[e]},goog.object.contains=function(t,e){return goog.object.containsValue(t,e)},goog.object.getValues=function(t){var e,r=[],n=0;for(e in t)r[n++]=t[e];return r},goog.object.getKeys=function(t){var e,r=[],n=0;for(e in t)r[n++]=e;return r},goog.object.getValueByKeys=function(t,e){var r=goog.isArrayLike(e),n=r?e:arguments;for(r=r?0:1;r<n.length;r++){if(t==null)return;t=t[n[r]]}return t},goog.object.containsKey=function(t,e){return t!==null&&e in t},goog.object.containsValue=function(t,e){for(var r in t)if(t[r]==e)return!0;return!1},goog.object.findKey=function(t,e,r){for(var n in t)if(e.call(r,t[n],n,t))return n},goog.object.findValue=function(t,e,r){return(e=goog.object.findKey(t,e,r))&&t[e]},goog.object.isEmpty=function(t){for(var e in t)return!1;return!0},goog.object.clear=function(t){for(var e in t)delete t[e]},goog.object.remove=function(t,e){var r;return(r=e in t)&&delete t[e],r},goog.object.add=function(t,e,r){if(t!==null&&e in t)throw Error('The object already contains the key "'+e+'"');goog.object.set(t,e,r)},goog.object.get=function(t,e,r){return t!==null&&e in t?t[e]:r},goog.object.set=function(t,e,r){t[e]=r},goog.object.setIfUndefined=function(t,e,r){return e in t?t[e]:t[e]=r},goog.object.setWithReturnValueIfNotSet=function(t,e,r){return e in t?t[e]:(r=r(),t[e]=r)},goog.object.equals=function(t,e){for(var r in t)if(!(r in e)||t[r]!==e[r])return!1;for(var n in e)if(!(n in t))return!1;return!0},goog.object.clone=function(t){var e,r={};for(e in t)r[e]=t[e];return r},goog.object.unsafeClone=function(t){var e=goog.typeOf(t);if(e=="object"||e=="array"){if(goog.isFunction(t.clone))return t.clone();for(var r in e=e=="array"?[]:{},t)e[r]=goog.object.unsafeClone(t[r]);return e}return t},goog.object.transpose=function(t){var e,r={};for(e in t)r[t[e]]=e;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(t,e){for(var r,n,i=1;i<arguments.length;i++){for(r in n=arguments[i])t[r]=n[r];for(var o=0;o<goog.object.PROTOTYPE_FIELDS_.length;o++)r=goog.object.PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}},goog.object.create=function(t){var e=arguments.length;if(e==1&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(e%2)throw Error("Uneven number of arguments");for(var r={},n=0;n<e;n+=2)r[arguments[n]]=arguments[n+1];return r},goog.object.createSet=function(t){var e=arguments.length;if(e==1&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},n=0;n<e;n++)r[arguments[n]]=!0;return r},goog.object.createImmutableView=function(t){var e=t;return Object.isFrozen&&!Object.isFrozen(t)&&(e=Object.create(t),Object.freeze(e)),e},goog.object.isImmutableView=function(t){return!!Object.isFrozen&&Object.isFrozen(t)},goog.object.getAllPropertyNames=function(t,e,r){if(!t)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(t);for(var n={};t&&(t!==Object.prototype||e)&&(t!==Function.prototype||r);){for(var i=Object.getOwnPropertyNames(t),o=0;o<i.length;o++)n[i[o]]=!0;t=Object.getPrototypeOf(t)}return goog.object.getKeys(n)},goog.object.getSuperClass=function(t){return(t=Object.getPrototypeOf(t.prototype))&&t.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(t,e,r,n){var i="Assertion failed";if(r){i+=": "+r;var o=n}else t&&(i+=": "+t,o=e);throw Error(""+i,o||[])},jspb.asserts.assert=function(t,e,r){for(var n=[],i=2;i<arguments.length;++i)n[i-2]=arguments[i];return t||jspb.asserts.doAssertFailure("",null,e,n),t},jspb.asserts.assertString=function(t,e,r){for(var n=[],i=2;i<arguments.length;++i)n[i-2]=arguments[i];return typeof t!="string"&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(t),t],e,n),t},jspb.asserts.assertArray=function(t,e,r){for(var n=[],i=2;i<arguments.length;++i)n[i-2]=arguments[i];return Array.isArray(t)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(t),t],e,n),t},jspb.asserts.fail=function(t,e){for(var r=[],n=1;n<arguments.length;++n)r[n-1]=arguments[n];throw Error("Failure"+(t?": "+t:""),r)},jspb.asserts.assertInstanceof=function(t,e,r,n){for(var i=[],o=3;o<arguments.length;++o)i[o-3]=arguments[o];return t instanceof e||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(e),jspb.asserts.getType(t)],r,i),t},jspb.asserts.getType=function(t){return t instanceof Function?t.displayName||t.name||"unknown type name":t instanceof Object?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):t===null?"null":typeof t},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(t){var e=jspb.BinaryConstants.FieldType,r=jspb.BinaryConstants.WireType;switch(t){case e.INT32:case e.INT64:case e.UINT32:case e.UINT64:case e.SINT32:case e.SINT64:case e.BOOL:case e.ENUM:case e.VHASH64:return r.VARINT;case e.DOUBLE:case e.FIXED64:case e.SFIXED64:case e.FHASH64:return r.FIXED64;case e.STRING:case e.MESSAGE:case e.BYTES:return r.DELIMITED;case e.FLOAT:case e.FIXED32:case e.SFIXED32:return r.FIXED32;default:return r.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(t){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(t,e){goog.debug.Error.call(this,goog.asserts.subs_(t,e)),this.messagePattern=t},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(t){throw t},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(t,e){for(var r="",n=(t=t.split("%s")).length-1,i=0;i<n;i++)r+=t[i]+(i<e.length?e[i]:"%s");return r+t[n]},goog.asserts.doAssertFailure_=function(t,e,r,n){var i="Assertion failed";if(r){i+=": "+r;var o=n}else t&&(i+=": "+t,o=e);t=new goog.asserts.AssertionError(""+i,o||[]),goog.asserts.errorHandler_(t)},goog.asserts.setErrorHandler=function(t){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=t)},goog.asserts.assert=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!t&&goog.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertExists=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&t==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.fail=function(t,e){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&typeof t!="number"&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertString=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&typeof t!="string"&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertFunction=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(t)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertObject=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(t)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertArray=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(t)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertBoolean=function(t,e,r){return goog.asserts.ENABLE_ASSERTS&&typeof t!="boolean"&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertElement=function(t,e,r){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(t)&&t.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertInstanceof=function(t,e,r,n){return!goog.asserts.ENABLE_ASSERTS||t instanceof e||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(e),goog.asserts.getType_(t)],r,Array.prototype.slice.call(arguments,3)),t},goog.asserts.assertFinite=function(t,e,r){return!goog.asserts.ENABLE_ASSERTS||typeof t=="number"&&isFinite(t)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var t in Object.prototype)goog.asserts.fail(t+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(t){return t instanceof Function?t.displayName||t.name||"unknown type name":t instanceof Object?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):t===null?"null":typeof t},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(t){return t[t.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.indexOf.call(t,e,r)}:function(t,e,r){if(r=r==null?0:0>r?Math.max(0,t.length+r):r,typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,r);for(;r<t.length;r++)if(r in t&&t[r]===e)return r;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.lastIndexOf.call(t,e,r??t.length-1)}:function(t,e,r){if(0>(r=r??t.length-1)&&(r=Math.max(0,t.length+r)),typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.lastIndexOf(e,r);for(;0<=r;r--)if(r in t&&t[r]===e)return r;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(t,e,r){goog.asserts.assert(t.length!=null),Array.prototype.forEach.call(t,e,r)}:function(t,e,r){for(var n=t.length,i=typeof t=="string"?t.split(""):t,o=0;o<n;o++)o in i&&e.call(r,i[o],o,t)},goog.array.forEachRight=function(t,e,r){var n=t.length,i=typeof t=="string"?t.split(""):t;for(--n;0<=n;--n)n in i&&e.call(r,i[n],n,t)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.filter.call(t,e,r)}:function(t,e,r){for(var n=t.length,i=[],o=0,s=typeof t=="string"?t.split(""):t,p=0;p<n;p++)if(p in s){var l=s[p];e.call(r,l,p,t)&&(i[o++]=l)}return i},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.map.call(t,e,r)}:function(t,e,r){for(var n=t.length,i=Array(n),o=typeof t=="string"?t.split(""):t,s=0;s<n;s++)s in o&&(i[s]=e.call(r,o[s],s,t));return i},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(t,e,r,n){return goog.asserts.assert(t.length!=null),n&&(e=goog.bind(e,n)),Array.prototype.reduce.call(t,e,r)}:function(t,e,r,n){var i=r;return goog.array.forEach(t,(function(o,s){i=e.call(n,i,o,s,t)})),i},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(t,e,r,n){return goog.asserts.assert(t.length!=null),goog.asserts.assert(e!=null),n&&(e=goog.bind(e,n)),Array.prototype.reduceRight.call(t,e,r)}:function(t,e,r,n){var i=r;return goog.array.forEachRight(t,(function(o,s){i=e.call(n,i,o,s,t)})),i},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.some.call(t,e,r)}:function(t,e,r){for(var n=t.length,i=typeof t=="string"?t.split(""):t,o=0;o<n;o++)if(o in i&&e.call(r,i[o],o,t))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(t,e,r){return goog.asserts.assert(t.length!=null),Array.prototype.every.call(t,e,r)}:function(t,e,r){for(var n=t.length,i=typeof t=="string"?t.split(""):t,o=0;o<n;o++)if(o in i&&!e.call(r,i[o],o,t))return!1;return!0},goog.array.count=function(t,e,r){var n=0;return goog.array.forEach(t,(function(i,o,s){e.call(r,i,o,s)&&++n}),r),n},goog.array.find=function(t,e,r){return 0>(e=goog.array.findIndex(t,e,r))?null:typeof t=="string"?t.charAt(e):t[e]},goog.array.findIndex=function(t,e,r){for(var n=t.length,i=typeof t=="string"?t.split(""):t,o=0;o<n;o++)if(o in i&&e.call(r,i[o],o,t))return o;return-1},goog.array.findRight=function(t,e,r){return 0>(e=goog.array.findIndexRight(t,e,r))?null:typeof t=="string"?t.charAt(e):t[e]},goog.array.findIndexRight=function(t,e,r){var n=t.length,i=typeof t=="string"?t.split(""):t;for(--n;0<=n;n--)if(n in i&&e.call(r,i[n],n,t))return n;return-1},goog.array.contains=function(t,e){return 0<=goog.array.indexOf(t,e)},goog.array.isEmpty=function(t){return t.length==0},goog.array.clear=function(t){if(!Array.isArray(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0},goog.array.insert=function(t,e){goog.array.contains(t,e)||t.push(e)},goog.array.insertAt=function(t,e,r){goog.array.splice(t,r,0,e)},goog.array.insertArrayAt=function(t,e,r){goog.partial(goog.array.splice,t,r,0).apply(null,e)},goog.array.insertBefore=function(t,e,r){var n;arguments.length==2||0>(n=goog.array.indexOf(t,r))?t.push(e):goog.array.insertAt(t,e,n)},goog.array.remove=function(t,e){var r;return(r=0<=(e=goog.array.indexOf(t,e)))&&goog.array.removeAt(t,e),r},goog.array.removeLast=function(t,e){return 0<=(e=goog.array.lastIndexOf(t,e))&&(goog.array.removeAt(t,e),!0)},goog.array.removeAt=function(t,e){return goog.asserts.assert(t.length!=null),Array.prototype.splice.call(t,e,1).length==1},goog.array.removeIf=function(t,e,r){return 0<=(e=goog.array.findIndex(t,e,r))&&(goog.array.removeAt(t,e),!0)},goog.array.removeAllIf=function(t,e,r){var n=0;return goog.array.forEachRight(t,(function(i,o){e.call(r,i,o,t)&&goog.array.removeAt(t,o)&&n++})),n},goog.array.concat=function(t){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(t){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(t){var e=t.length;if(0<e){for(var r=Array(e),n=0;n<e;n++)r[n]=t[n];return r}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(t,e){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(goog.isArrayLike(n)){var i=t.length||0,o=n.length||0;t.length=i+o;for(var s=0;s<o;s++)t[i+s]=n[s]}else t.push(n)}},goog.array.splice=function(t,e,r,n){return goog.asserts.assert(t.length!=null),Array.prototype.splice.apply(t,goog.array.slice(arguments,1))},goog.array.slice=function(t,e,r){return goog.asserts.assert(t.length!=null),2>=arguments.length?Array.prototype.slice.call(t,e):Array.prototype.slice.call(t,e,r)},goog.array.removeDuplicates=function(t,e,r){e=e||t;var n=function(l){return goog.isObject(l)?"o"+goog.getUid(l):(typeof l).charAt(0)+l};r=r||n,n={};for(var i=0,o=0;o<t.length;){var s=t[o++],p=r(s);Object.prototype.hasOwnProperty.call(n,p)||(n[p]=!0,e[i++]=s)}e.length=i},goog.array.binarySearch=function(t,e,r){return goog.array.binarySearch_(t,r||goog.array.defaultCompare,!1,e)},goog.array.binarySelect=function(t,e,r){return goog.array.binarySearch_(t,e,!0,void 0,r)},goog.array.binarySearch_=function(t,e,r,n,i){for(var o,s=0,p=t.length;s<p;){var l=s+(p-s>>>1),c=r?e.call(i,t[l],l,t):e(n,t[l]);0<c?s=l+1:(p=l,o=!c)}return o?s:-s-1},goog.array.sort=function(t,e){t.sort(e||goog.array.defaultCompare)},goog.array.stableSort=function(t,e){for(var r=Array(t.length),n=0;n<t.length;n++)r[n]={index:n,value:t[n]};var i=e||goog.array.defaultCompare;for(goog.array.sort(r,(function(o,s){return i(o.value,s.value)||o.index-s.index})),n=0;n<t.length;n++)t[n]=r[n].value},goog.array.sortByKey=function(t,e,r){var n=r||goog.array.defaultCompare;goog.array.sort(t,(function(i,o){return n(e(i),e(o))}))},goog.array.sortObjectsByKey=function(t,e,r){goog.array.sortByKey(t,(function(n){return n[e]}),r)},goog.array.isSorted=function(t,e,r){e=e||goog.array.defaultCompare;for(var n=1;n<t.length;n++){var i=e(t[n-1],t[n]);if(0<i||i==0&&r)return!1}return!0},goog.array.equals=function(t,e,r){if(!goog.isArrayLike(t)||!goog.isArrayLike(e)||t.length!=e.length)return!1;var n=t.length;r=r||goog.array.defaultCompareEquality;for(var i=0;i<n;i++)if(!r(t[i],e[i]))return!1;return!0},goog.array.compare3=function(t,e,r){r=r||goog.array.defaultCompare;for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var o=r(t[i],e[i]);if(o!=0)return o}return goog.array.defaultCompare(t.length,e.length)},goog.array.defaultCompare=function(t,e){return t>e?1:t<e?-1:0},goog.array.inverseDefaultCompare=function(t,e){return-goog.array.defaultCompare(t,e)},goog.array.defaultCompareEquality=function(t,e){return t===e},goog.array.binaryInsert=function(t,e,r){return 0>(r=goog.array.binarySearch(t,e,r))&&(goog.array.insertAt(t,e,-(r+1)),!0)},goog.array.binaryRemove=function(t,e,r){return 0<=(e=goog.array.binarySearch(t,e,r))&&goog.array.removeAt(t,e)},goog.array.bucket=function(t,e,r){for(var n={},i=0;i<t.length;i++){var o=t[i],s=e.call(r,o,i,t);s!==void 0&&(n[s]||(n[s]=[])).push(o)}return n},goog.array.toObject=function(t,e,r){var n={};return goog.array.forEach(t,(function(i,o){n[e.call(r,i,o,t)]=i})),n},goog.array.range=function(t,e,r){var n=[],i=0,o=t;if(e!==void 0&&(i=t,o=e),0>(r=r||1)*(o-i))return[];if(0<r)for(t=i;t<o;t+=r)n.push(t);else for(t=i;t>o;t+=r)n.push(t);return n},goog.array.repeat=function(t,e){for(var r=[],n=0;n<e;n++)r[n]=t;return r},goog.array.flatten=function(t){for(var e=[],r=0;r<arguments.length;r++){var n=arguments[r];if(Array.isArray(n))for(var i=0;i<n.length;i+=8192){var o=goog.array.slice(n,i,i+8192);o=goog.array.flatten.apply(null,o);for(var s=0;s<o.length;s++)e.push(o[s])}else e.push(n)}return e},goog.array.rotate=function(t,e){return goog.asserts.assert(t.length!=null),t.length&&(0<(e%=t.length)?Array.prototype.unshift.apply(t,t.splice(-e,e)):0>e&&Array.prototype.push.apply(t,t.splice(0,-e))),t},goog.array.moveItem=function(t,e,r){goog.asserts.assert(0<=e&&e<t.length),goog.asserts.assert(0<=r&&r<t.length),e=Array.prototype.splice.call(t,e,1),Array.prototype.splice.call(t,r,0,e[0])},goog.array.zip=function(t){if(!arguments.length)return[];for(var e=[],r=arguments[0].length,n=1;n<arguments.length;n++)arguments[n].length<r&&(r=arguments[n].length);for(n=0;n<r;n++){for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o][n]);e.push(i)}return e},goog.array.shuffle=function(t,e){e=e||Math.random;for(var r=t.length-1;0<r;r--){var n=Math.floor(e()*(r+1)),i=t[r];t[r]=t[n],t[n]=i}},goog.array.copyByIndex=function(t,e){var r=[];return goog.array.forEach(e,(function(n){r.push(t[n])})),r},goog.array.concatMap=function(t,e,r){return goog.array.concat.apply([],goog.array.map(t,e,r))},goog.crypt={},goog.crypt.stringToByteArray=function(t){for(var e=[],r=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);255<i&&(e[r++]=255&i,i>>=8),e[r++]=i}return e},goog.crypt.byteArrayToString=function(t){if(8192>=t.length)return String.fromCharCode.apply(null,t);for(var e="",r=0;r<t.length;r+=8192){var n=goog.array.slice(t,r,r+8192);e+=String.fromCharCode.apply(null,n)}return e},goog.crypt.byteArrayToHex=function(t,e){return goog.array.map(t,(function(r){return 1<(r=r.toString(16)).length?r:"0"+r})).join(e||"")},goog.crypt.hexToByteArray=function(t){goog.asserts.assert(t.length%2==0,"Key string length must be multiple of 2");for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substring(r,r+2),16));return e},goog.crypt.stringToUtf8ByteArray=function(t){for(var e=[],r=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e[r++]=i:(2048>i?e[r++]=i>>6|192:((64512&i)==55296&&n+1<t.length&&(64512&t.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++n)),e[r++]=i>>18|240,e[r++]=i>>12&63|128):e[r++]=i>>12|224,e[r++]=i>>6&63|128),e[r++]=63&i|128)}return e},goog.crypt.utf8ByteArrayToString=function(t){for(var e=[],r=0,n=0;r<t.length;){var i=t[r++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=t[r++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=t[r++];var s=t[r++];i=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&t[r++])-65536,e[n++]=String.fromCharCode(55296+(i>>10)),e[n++]=String.fromCharCode(56320+(1023&i))}else o=t[r++],s=t[r++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return e.join("")},goog.crypt.xorByteArray=function(t,e){goog.asserts.assert(t.length==e.length,"XOR array lengths must match");for(var r=[],n=0;n<t.length;n++)r.push(t[n]^e[n]);return r},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(t){if(goog.asserts.ENABLE_ASSERTS){var e=goog.dom.asserts.getWindow_(t);e&&(!t||!(t instanceof e.Location)&&t instanceof e.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(t))}return t},goog.dom.asserts.assertIsElementType_=function(t,e){if(goog.asserts.ENABLE_ASSERTS){var r=goog.dom.asserts.getWindow_(t);r&&r[e]!==void 0&&(t&&(t instanceof r[e]||!(t instanceof r.Location||t instanceof r.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,goog.dom.asserts.debugStringForType_(t)))}return t},goog.dom.asserts.assertIsHTMLAnchorElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(t){return goog.dom.asserts.assertIsElementType_(t,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(t){if(!goog.isObject(t))return t===void 0?"undefined":t===null?"null":typeof t;try{return t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch{return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(t){try{var e=t&&t.ownerDocument,r=e&&(e.defaultView||e.parentWindow);if((r=r||goog.global).Element&&r.Location)return r}catch{}return null},goog.functions={},goog.functions.constant=function(t){return function(){return t}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(t,e){return t},goog.functions.error=function(t){return function(){throw Error(t)}},goog.functions.fail=function(t){return function(){throw t}},goog.functions.lock=function(t,e){return e=e||0,function(){return t.apply(this,Array.prototype.slice.call(arguments,0,e))}},goog.functions.nth=function(t){return function(){return arguments[t]}},goog.functions.partialRight=function(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var n=Array.prototype.slice.call(arguments);return n.push.apply(n,r),t.apply(this,n)}},goog.functions.withReturnValue=function(t,e){return goog.functions.sequence(t,goog.functions.constant(e))},goog.functions.equalTo=function(t,e){return function(r){return e?t==r:t===r}},goog.functions.compose=function(t,e){var r=arguments,n=r.length;return function(){var i;n&&(i=r[n-1].apply(this,arguments));for(var o=n-2;0<=o;o--)i=r[o].call(this,i);return i}},goog.functions.sequence=function(t){var e=arguments,r=e.length;return function(){for(var n,i=0;i<r;i++)n=e[i].apply(this,arguments);return n}},goog.functions.and=function(t){var e=arguments,r=e.length;return function(){for(var n=0;n<r;n++)if(!e[n].apply(this,arguments))return!1;return!0}},goog.functions.or=function(t){var e=arguments,r=e.length;return function(){for(var n=0;n<r;n++)if(e[n].apply(this,arguments))return!0;return!1}},goog.functions.not=function(t){return function(){return!t.apply(this,arguments)}},goog.functions.create=function(t,e){var r=function(){};return r.prototype=t.prototype,r=new r,t.apply(r,Array.prototype.slice.call(arguments,1)),r},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(t){var e,r=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(r||(e=t(),r=!0),e):t()}},goog.functions.once=function(t){var e=t;return function(){if(e){var r=e;e=null,r()}}},goog.functions.debounce=function(t,e,r){var n=0;return function(i){goog.global.clearTimeout(n);var o=arguments;n=goog.global.setTimeout((function(){t.apply(r,o)}),e)}},goog.functions.throttle=function(t,e,r){var n=0,i=!1,o=[],s=function(){n=0,i&&(i=!1,p())},p=function(){n=goog.global.setTimeout(s,e),t.apply(r,o)};return function(l){o=arguments,n?i=!0:p()}},goog.functions.rateLimit=function(t,e,r){var n=0,i=function(){n=0};return function(o){n||(n=goog.global.setTimeout(i,e),t.apply(r,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(t){this.tagName_=t},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(t){return goog.dom.tags.VOID_TAGS_[t]===!0},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(t,e){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=t===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(t){return t instanceof goog.string.Const&&t.constructor===goog.string.Const&&t.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?t.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+t+"'"),"type_error:Const")},goog.string.Const.from=function(t){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,t)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(t){return(t=goog.string.Const.unwrap(t)).length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeScript.fromConstantAndArgs=function(t,e){for(var r=[],n=1;n<arguments.length;n++)r.push(goog.html.SafeScript.stringify_(arguments[n]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(t)+")("+r.join(", ")+");")},goog.html.SafeScript.fromJson=function(t){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(t))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(t){return goog.html.SafeScript.unwrapTrustedScript(t).toString()},goog.html.SafeScript.unwrapTrustedScript=function(t){return t instanceof goog.html.SafeScript&&t.constructor===goog.html.SafeScript&&t.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(t){return JSON.stringify(t).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(t){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(t)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(t):t,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(t){return goog.fs.url.getUrlObject_().createObjectURL(t)},goog.fs.url.revokeObjectUrl=function(t){goog.fs.url.getUrlObject_().revokeObjectURL(t)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(t){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(t){},goog.fs.url.getUrlObject_=function(){var t=goog.fs.url.findUrlObject_();if(t!=null)return t;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.global.URL!==void 0&&goog.global.URL.createObjectURL!==void 0?goog.global.URL:goog.global.webkitURL!==void 0&&goog.global.webkitURL.createObjectURL!==void 0?goog.global.webkitURL:goog.global.createObjectURL!==void 0?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.fs.blob={},goog.fs.blob.getBlob=function(t){var e=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(e!==void 0){e=new e;for(var r=0;r<arguments.length;r++)e.append(arguments[r]);return e.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(t,e,r){var n=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(n!==void 0){n=new n;for(var i=0;i<t.length;i++)n.append(t[i],r);return n.getBlob(e)}if(goog.global.Blob!==void 0)return n={},e&&(n.type=e),r&&(n.endings=r),new Blob(t,n);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"\u202A",RLE:"\u202B",PDF:"\u202C",LRM:"\u200E",RLM:"\u200F"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(t,e){return typeof t=="number"?0<t?goog.i18n.bidi.Dir.LTR:0>t?goog.i18n.bidi.Dir.RTL:e?null:goog.i18n.bidi.Dir.NEUTRAL:t==null?null:t?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0900-\u1FFF\u200E\u2C00-\uD801\uD804-\uD839\uD83C-\uDBFF\uF900-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",goog.i18n.bidi.rtlChars_="\u0591-\u06EF\u06FA-\u08FF\u200F\uD802-\uD803\uD83A-\uD83B\uFB1D-\uFDFF\uFE70-\uFEFC",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(t,e){return e?t.replace(goog.i18n.bidi.htmlSkipReg_,""):t},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(t,e){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(t,e){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(t){return goog.i18n.bidi.rtlRe_.test(t)},goog.i18n.bidi.isLtrChar=function(t){return goog.i18n.bidi.ltrRe_.test(t)},goog.i18n.bidi.isNeutralChar=function(t){return!goog.i18n.bidi.isLtrChar(t)&&!goog.i18n.bidi.isRtlChar(t)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(t,e){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(t,e){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(t,e){return t=goog.i18n.bidi.stripHtmlIfNeeded_(t,e),goog.i18n.bidi.isRequiredLtrRe_.test(t)||!goog.i18n.bidi.hasAnyLtr(t)&&!goog.i18n.bidi.hasAnyRtl(t)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(t,e){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(t,e){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(t){return goog.i18n.bidi.rtlLocalesRe_.test(t)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(t,e){return e=(e===void 0?goog.i18n.bidi.hasAnyRtl(t):e)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,t.replace(goog.i18n.bidi.bracketGuardTextRe_,e+"$&"+e)},goog.i18n.bidi.enforceRtlInHtml=function(t){return t.charAt(0)=="<"?t.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+t+"</span>"},goog.i18n.bidi.enforceRtlInText=function(t){return goog.i18n.bidi.Format.RLE+t+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(t){return t.charAt(0)=="<"?t.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+t+"</span>"},goog.i18n.bidi.enforceLtrInText=function(t){return goog.i18n.bidi.Format.LRE+t+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(t){return t.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(t){return t.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1\u05F4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1\u05F3")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(t,e){var r=0,n=0,i=!1;for(t=goog.i18n.bidi.stripHtmlIfNeeded_(t,e).split(goog.i18n.bidi.wordSeparatorRe_),e=0;e<t.length;e++){var o=t[e];goog.i18n.bidi.startsWithRtl(o)?(r++,n++):goog.i18n.bidi.isRequiredLtrRe_.test(o)?i=!0:goog.i18n.bidi.hasAnyLtr(o)?n++:goog.i18n.bidi.hasNumeralsRe_.test(o)&&(i=!0)}return n==0?i?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:r/n>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(t,e){return goog.i18n.bidi.estimateDirection(t,e)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(t,e){t&&(e=goog.i18n.bidi.toDir(e))&&(t.style.textAlign=e==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,t.dir=e==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(t,e){switch(goog.i18n.bidi.estimateDirection(e)){case goog.i18n.bidi.Dir.LTR:t.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:t.dir="rtl";break;default:t.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(t,e){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=t===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(t,e){var r=goog.html.TrustedResourceUrl.unwrap(this),n=(r=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(r))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(r[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",r[2]||"",t)+goog.html.TrustedResourceUrl.stringifyParams_("#",n,e))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(t){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(t){return t instanceof goog.html.TrustedResourceUrl&&t.constructor===goog.html.TrustedResourceUrl&&t.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+t+"' of type "+goog.typeOf(t)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(t,e){var r=goog.string.Const.unwrap(t);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,(function(n,i){if(!Object.prototype.hasOwnProperty.call(e,i))throw Error('Found marker, "'+i+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(e));return(n=e[i])instanceof goog.string.Const?goog.string.Const.unwrap(n):encodeURIComponent(String(n))})),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(t,e,r,n){return goog.html.TrustedResourceUrl.format(t,e).cloneWithParams(r,n)},goog.html.TrustedResourceUrl.fromConstant=function(t){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(t))},goog.html.TrustedResourceUrl.fromConstants=function(t){for(var e="",r=0;r<t.length;r++)e+=goog.string.Const.unwrap(t[r]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.fromSafeScript=function(t){return t=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(t)],"text/javascript"),t=goog.fs.url.createObjectUrl(t),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(t){return t=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(t):t,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,t)},goog.html.TrustedResourceUrl.stringifyParams_=function(t,e,r){if(r==null)return e;if(typeof r=="string")return r?t+encodeURIComponent(r):"";for(var n in r){var i=r[n];i=Array.isArray(i)?i:[i];for(var o=0;o<i.length;o++){var s=i[o];s!=null&&(e||(e=t),e+=(e.length>t.length?"&":"")+encodeURIComponent(n)+"="+encodeURIComponent(String(s)))}}return e},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(t,e){return t.lastIndexOf(e,0)==0},goog.string.internal.endsWith=function(t,e){var r=t.length-e.length;return 0<=r&&t.indexOf(e,r)==r},goog.string.internal.caseInsensitiveStartsWith=function(t,e){return goog.string.internal.caseInsensitiveCompare(e,t.substr(0,e.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(t,e){return goog.string.internal.caseInsensitiveCompare(e,t.substr(t.length-e.length,e.length))==0},goog.string.internal.caseInsensitiveEquals=function(t,e){return t.toLowerCase()==e.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(t){return/^[\s\xa0]*$/.test(t)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},goog.string.internal.caseInsensitiveCompare=function(t,e){return(t=String(t).toLowerCase())<(e=String(e).toLowerCase())?-1:t==e?0:1},goog.string.internal.newLineToBr=function(t,e){return t.replace(/(\r\n|\r|\n)/g,e?"<br />":"<br>")},goog.string.internal.htmlEscape=function(t,e){if(e)t=t.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(t))return t;t.indexOf("&")!=-1&&(t=t.replace(goog.string.internal.AMP_RE_,"&amp;")),t.indexOf("<")!=-1&&(t=t.replace(goog.string.internal.LT_RE_,"&lt;")),t.indexOf(">")!=-1&&(t=t.replace(goog.string.internal.GT_RE_,"&gt;")),t.indexOf('"')!=-1&&(t=t.replace(goog.string.internal.QUOT_RE_,"&quot;")),t.indexOf("'")!=-1&&(t=t.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),t.indexOf("\0")!=-1&&(t=t.replace(goog.string.internal.NULL_RE_,"&#0;"))}return t},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(t,e){return goog.string.internal.newLineToBr(t.replace(/  /g," &#160;"),e)},goog.string.internal.contains=function(t,e){return t.indexOf(e)!=-1},goog.string.internal.caseInsensitiveContains=function(t,e){return goog.string.internal.contains(t.toLowerCase(),e.toLowerCase())},goog.string.internal.compareVersions=function(t,e){var r=0;t=goog.string.internal.trim(String(t)).split("."),e=goog.string.internal.trim(String(e)).split(".");for(var n=Math.max(t.length,e.length),i=0;r==0&&i<n;i++){var o=t[i]||"",s=e[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o[0].length==0&&s[0].length==0)break;r=o[1].length==0?0:parseInt(o[1],10);var p=s[1].length==0?0:parseInt(s[1],10);r=goog.string.internal.compareElements_(r,p)||goog.string.internal.compareElements_(o[2].length==0,s[2].length==0)||goog.string.internal.compareElements_(o[2],s[2]),o=o[3],s=s[3]}while(r==0)}return r},goog.string.internal.compareElements_=function(t,e){return t<e?-1:t>e?1:0},goog.html.SafeUrl=function(t,e){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=t===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&e||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(t){return t instanceof goog.html.SafeUrl&&t.constructor===goog.html.SafeUrl&&t.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(t){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(t))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(t){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(t)},goog.html.SafeUrl.fromBlob=function(t){return t=goog.html.SafeUrl.isSafeMimeType(t.type)?goog.fs.url.createObjectUrl(t):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromMediaSource=function(t){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),t=t instanceof MediaSource?goog.fs.url.createObjectUrl(t):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(t){var e=(t=t.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return e=e&&goog.html.SafeUrl.isSafeMimeType(e[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e?t:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(t){return goog.string.internal.caseInsensitiveStartsWith(t,"tel:")||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(t){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(t))||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(t){return goog.string.internal.caseInsensitiveStartsWith(t,"fb-messenger://share")||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromWhatsAppUrl=function(t){return goog.string.internal.caseInsensitiveStartsWith(t,"whatsapp://send")||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromSmsUrl=function(t){return goog.string.internal.caseInsensitiveStartsWith(t,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(t)||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(t){var e=t.indexOf("#");if(0<e&&(t=t.substring(0,e)),!(e=t.match(/[?&]body=/gi)))return!0;if(1<e.length)return!1;if(!(t=t.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(t)}catch{return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(t)},goog.html.SafeUrl.fromSshUrl=function(t){return goog.string.internal.caseInsensitiveStartsWith(t,"ssh://")||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(t,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,t,e)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(t,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,t,e)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(t,e){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,t,e)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(t,e,r){return(t=t.exec(e))?(t=t[1],(r instanceof goog.string.Const?[goog.string.Const.unwrap(r)]:r.map((function(n){return goog.string.Const.unwrap(n)}))).indexOf(t)==-1&&(e=goog.html.SafeUrl.INNOCUOUS_STRING)):e=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromTrustedResourceUrl=function(t){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(t))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(t){return t instanceof goog.html.SafeUrl?t:(t=typeof t=="object"&&t.implementsGoogStringTypedString?t.getTypedStringValue():String(t),goog.html.SAFE_URL_PATTERN_.test(t)||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(t,e){return t instanceof goog.html.SafeUrl?t:(t=typeof t=="object"&&t.implementsGoogStringTypedString?t.getTypedStringValue():String(t),e&&/^data:/i.test(t)&&(e=goog.html.SafeUrl.fromDataUrl(t)).getTypedStringValue()==t?e:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(t),"%s does not match the safe URL pattern",t)||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(t){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,t)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(t){return(t=goog.string.Const.unwrap(t)).length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(t,";"),"Last character of style string is not ';': "+t),goog.asserts.assert(goog.string.internal.contains(t,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+t),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(t){return t instanceof goog.html.SafeStyle&&t.constructor===goog.html.SafeStyle&&t.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(t){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(t)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=t,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(t){var e,r="";for(e in t){if(!/^[-_a-zA-Z0-9]+$/.test(e))throw Error("Name allows only [-_a-zA-Z0-9], got: "+e);var n=t[e];n!=null&&(r+=e+":"+(n=Array.isArray(n)?goog.array.map(n,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(n))+";")}return r?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(r):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(t){if(t instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(t).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(t=t instanceof goog.string.Const?goog.string.Const.unwrap(t):goog.html.SafeStyle.sanitizePropertyValueString_(String(t)),/[{;}]/.test(t))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[t]);return t},goog.html.SafeStyle.sanitizePropertyValueString_=function(t){var e=t.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(e)?goog.html.SafeStyle.COMMENT_RE_.test(t)?(goog.asserts.fail("String value disallows comments, got: "+t),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(t)?goog.html.SafeStyle.hasBalancedSquareBrackets_(t)?goog.html.SafeStyle.sanitizeUrl_(t):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+t),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+t),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+t),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(t){for(var e=!0,r=!0,n=0;n<t.length;n++){var i=t.charAt(n);i=="'"&&r?e=!e:i=='"'&&e&&(r=!r)}return e&&r},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(t){for(var e=!0,r=/^[-_a-zA-Z0-9]$/,n=0;n<t.length;n++){var i=t.charAt(n);if(i=="]"){if(e)return!1;e=!0}else if(i=="["){if(!e)return!1;e=!1}else if(!e&&!r.test(i))return!1}return e},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(t){return t.replace(goog.html.SafeStyle.URL_RE_,(function(e,r,n,i){var o="";return n=n.replace(/^(['"])(.*)\1$/,(function(s,p,l){return o=p,l})),e=goog.html.SafeUrl.sanitize(n).getTypedStringValue(),r+o+e+o+i}))},goog.html.SafeStyle.concat=function(t){var e="",r=function(n){Array.isArray(n)?goog.array.forEach(n,r):e+=goog.html.SafeStyle.unwrap(n)};return goog.array.forEach(arguments,r),e?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(t,e){if(goog.string.internal.contains(t,"<"))throw Error("Selector does not allow '<', got: "+t);var r=t.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(r))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+t);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(r))throw Error("() and [] in selector must be balanced, got: "+t);return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),t=t+"{"+goog.html.SafeStyle.unwrap(e).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(t){for(var e={"(":")","[":"]"},r=[],n=0;n<t.length;n++){var i=t[n];if(e[i])r.push(e[i]);else if(goog.object.contains(e,i)&&r.pop()!=i)return!1}return r.length==0},goog.html.SafeStyleSheet.concat=function(t){var e="",r=function(n){Array.isArray(n)?goog.array.forEach(n,r):e+=goog.html.SafeStyleSheet.unwrap(n)};return goog.array.forEach(arguments,r),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.fromConstant=function(t){return(t=goog.string.Const.unwrap(t)).length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(t,"<"),"Forbidden '<' character in style sheet string: "+t),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(t){return t instanceof goog.html.SafeStyleSheet&&t.constructor===goog.html.SafeStyleSheet&&t.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(t){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(t)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=t,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var t=goog.labs.userAgent.util.getNavigator_();return t&&(t=t.userAgent)?t:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(t){goog.labs.userAgent.util.userAgent_=t||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(t){var e=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(e,t)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(t){var e=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(e,t)},goog.labs.userAgent.util.extractVersionTuples=function(t){for(var e,r=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,n=[];e=r.exec(t);)n.push([e[1],e[2],e[3]||void 0]);return n},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function t(i){return i=goog.array.find(i,n),r[i]||""}var e=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(e);e=goog.labs.userAgent.util.extractVersionTuples(e);var r={};goog.array.forEach(e,(function(i){r[i[0]]=i[1]}));var n=goog.partial(goog.object.containsKey,r);return goog.labs.userAgent.browser.isOpera()?t(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?t(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?t(["Edg"]):goog.labs.userAgent.browser.isChrome()?t(["Chrome","CriOS","HeadlessChrome"]):(e=e[2])&&e[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(t){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),t)},goog.labs.userAgent.browser.getIEVersion_=function(t){var e=/rv: *([\d\.]*)/.exec(t);if(e&&e[1])return e[1];e="";var r=/MSIE +([\d\.]+)/.exec(t);if(r&&r[1])if(t=/Trident\/(\d.\d)/.exec(t),r[1]=="7.0")if(t&&t[1])switch(t[1]){case"4.0":e="8.0";break;case"5.0":e="9.0";break;case"6.0":e="10.0";break;case"7.0":e="11.0"}else e="7.0";else e=r[1];return e},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(t){return goog.html.SafeHtml.unwrapTrustedHTML(t).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(t){return t instanceof goog.html.SafeHtml&&t.constructor===goog.html.SafeHtml&&t.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?t.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+t+"' of type "+goog.typeOf(t)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(t){if(t instanceof goog.html.SafeHtml)return t;var e=typeof t=="object",r=null;return e&&t.implementsGoogI18nBidiDirectionalString&&(r=t.getDirection()),t=e&&t.implementsGoogStringTypedString?t.getTypedStringValue():String(t),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(t),r)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(t){return t instanceof goog.html.SafeHtml?t:(t=goog.html.SafeHtml.htmlEscape(t),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(t)),t.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(t){return t instanceof goog.html.SafeHtml?t:(t=goog.html.SafeHtml.htmlEscape(t),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(t)),t.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(t){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!--"+goog.string.internal.htmlEscape(t)+"-->",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(t,e,r){return goog.html.SafeHtml.verifyTagName(String(t)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(t),e,r)},goog.html.SafeHtml.verifyTagName=function(t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+t+">.":"");if(t.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+t+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(t,e,r,n){t&&goog.html.TrustedResourceUrl.unwrap(t);var i={};return i.src=t||null,i.srcdoc=e&&goog.html.SafeHtml.unwrap(e),t=goog.html.SafeHtml.combineAttributes(i,{sandbox:""},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",t,n)},goog.html.SafeHtml.createSandboxIframe=function(t,e,r,n){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var i={};return i.src=t?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(t)):null,i.srcdoc=e||null,i.sandbox="",t=goog.html.SafeHtml.combineAttributes(i,{},r),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",t,n)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(t,e){return goog.html.TrustedResourceUrl.unwrap(t),t=goog.html.SafeHtml.combineAttributes({src:t},{},e),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t)},goog.html.SafeHtml.createScript=function(t,e){for(var r in e){var n=r.toLowerCase();if(n=="language"||n=="src"||n=="text"||n=="type")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+n+'" attribute':"")}for(r="",t=goog.array.concat(t),n=0;n<t.length;n++)r+=goog.html.SafeScript.unwrap(t[n]);return t=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e,t)},goog.html.SafeHtml.createStyle=function(t,e){e=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},e);var r="";t=goog.array.concat(t);for(var n=0;n<t.length;n++)r+=goog.html.SafeStyleSheet.unwrap(t[n]);return t=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",e,t)},goog.html.SafeHtml.createMetaRefresh=function(t,e){return t=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(t)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(e||0)+"; url="+t})},goog.html.SafeHtml.getAttrNameAndValue_=function(t,e,r){if(r instanceof goog.string.Const)r=goog.string.Const.unwrap(r);else if(e.toLowerCase()=="style"){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");r=goog.html.SafeHtml.getStyleValue_(r)}else{if(/^on/i.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+e+'" requires goog.string.Const value, "'+r+'" given.':"");if(e.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(r instanceof goog.html.TrustedResourceUrl)r=goog.html.TrustedResourceUrl.unwrap(r);else if(r instanceof goog.html.SafeUrl)r=goog.html.SafeUrl.unwrap(r);else{if(typeof r!="string")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+e+'" on tag "'+t+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+r+'" given.':"");r=goog.html.SafeUrl.sanitize(r).getTypedStringValue()}}return r.implementsGoogStringTypedString&&(r=r.getTypedStringValue()),goog.asserts.assert(typeof r=="string"||typeof r=="number","String or number value expected, got "+typeof r+" with value: "+r),e+'="'+goog.string.internal.htmlEscape(String(r))+'"'},goog.html.SafeHtml.getStyleValue_=function(t){if(!goog.isObject(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof t+" given: "+t:"");return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),goog.html.SafeStyle.unwrap(t)},goog.html.SafeHtml.createWithDir=function(t,e,r,n){return(e=goog.html.SafeHtml.create(e,r,n)).dir_=t,e},goog.html.SafeHtml.join=function(t,e){var r=(t=goog.html.SafeHtml.htmlEscape(t)).getDirection(),n=[],i=function(o){Array.isArray(o)?goog.array.forEach(o,i):(o=goog.html.SafeHtml.htmlEscape(o),n.push(goog.html.SafeHtml.unwrap(o)),o=o.getDirection(),r==goog.i18n.bidi.Dir.NEUTRAL?r=o:o!=goog.i18n.bidi.Dir.NEUTRAL&&r!=o&&(r=null))};return goog.array.forEach(e,i),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n.join(goog.html.SafeHtml.unwrap(t)),r)},goog.html.SafeHtml.concat=function(t){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(t,e){var r=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return r.dir_=t,r},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(t,e){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(t,e)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(t,e){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(t):t,this.dir_=e,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(t,e,r){var n=null,i="<"+t+goog.html.SafeHtml.stringifyAttributes(t,e);return r==null?r=[]:Array.isArray(r)||(r=[r]),goog.dom.tags.isVoidTag(t.toLowerCase())?(goog.asserts.assert(!r.length,"Void tag <"+t+"> does not allow content."),i+=">"):(n=goog.html.SafeHtml.concat(r),i+=">"+goog.html.SafeHtml.unwrap(n)+"</"+t+">",n=n.getDirection()),(t=e&&e.dir)&&(n=/^(ltr|rtl|auto)$/i.test(t)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(i,n)},goog.html.SafeHtml.stringifyAttributes=function(t,e){var r="";if(e)for(var n in e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(n))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+n+'".':"");var i=e[n];i!=null&&(r+=" "+goog.html.SafeHtml.getAttrNameAndValue_(t,n,i))}return r},goog.html.SafeHtml.combineAttributes=function(t,e,r){var n,i={};for(n in t)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),i[n]=t[n];for(n in e)goog.asserts.assert(n.toLowerCase()==n,"Must be lower case"),i[n]=e[n];if(r)for(n in r){var o=n.toLowerCase();if(o in t)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+o+'" attribute, got "'+n+'" with value "'+r[n]+'"':"");o in e&&delete i[o],i[n]=r[n]}return i},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(t,e,r){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(e,r||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(t,e){return goog.asserts.assertString(goog.string.Const.unwrap(t),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(t)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(t,e,r){t.insertAdjacentHTML(e,goog.html.SafeHtml.unwrapTrustedHTML(r))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue((function(){if(goog.DEBUG&&typeof document>"u")return!1;var t=document.createElement("div"),e=document.createElement("div");return e.appendChild(document.createElement("div")),t.appendChild(e),!(goog.DEBUG&&!t.firstChild)&&(e=t.firstChild.firstChild,t.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!e.parentElement)})),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(t,e){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;t.lastChild;)t.removeChild(t.lastChild);t.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setInnerHtml=function(t,e){if(goog.asserts.ENABLE_ASSERTS){var r=t.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[r])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+t.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(t,e)},goog.dom.safe.setOuterHtml=function(t,e){t.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setFormElementAction=function(t,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLFormElement(t).action=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setButtonFormAction=function(t,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLButtonElement(t).formAction=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setInputFormAction=function(t,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),goog.dom.asserts.assertIsHTMLInputElement(t).formAction=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setStyle=function(t,e){t.style.cssText=goog.html.SafeStyle.unwrap(e)},goog.dom.safe.documentWrite=function(t,e){t.write(goog.html.SafeHtml.unwrapTrustedHTML(e))},goog.dom.safe.setAnchorHref=function(t,e){goog.dom.asserts.assertIsHTMLAnchorElement(t),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t.href=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setImageSrc=function(t,e){if(goog.dom.asserts.assertIsHTMLImageElement(t),!(e instanceof goog.html.SafeUrl)){var r=/^data:image\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,r)}t.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setAudioSrc=function(t,e){if(goog.dom.asserts.assertIsHTMLAudioElement(t),!(e instanceof goog.html.SafeUrl)){var r=/^data:audio\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,r)}t.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setVideoSrc=function(t,e){if(goog.dom.asserts.assertIsHTMLVideoElement(t),!(e instanceof goog.html.SafeUrl)){var r=/^data:video\//i.test(e);e=goog.html.SafeUrl.sanitizeAssertUnchanged(e,r)}t.src=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.setEmbedSrc=function(t,e){goog.dom.asserts.assertIsHTMLEmbedElement(t),t.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e)},goog.dom.safe.setFrameSrc=function(t,e){goog.dom.asserts.assertIsHTMLFrameElement(t),t.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrc=function(t,e){goog.dom.asserts.assertIsHTMLIFrameElement(t),t.src=goog.html.TrustedResourceUrl.unwrap(e)},goog.dom.safe.setIframeSrcdoc=function(t,e){goog.dom.asserts.assertIsHTMLIFrameElement(t),t.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(e)},goog.dom.safe.setLinkHrefAndRel=function(t,e,r){goog.dom.asserts.assertIsHTMLLinkElement(t),t.rel=r,goog.string.internal.caseInsensitiveContains(r,"stylesheet")?(goog.asserts.assert(e instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),t.href=goog.html.TrustedResourceUrl.unwrap(e)):t.href=e instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(e):e instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(e):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(e))},goog.dom.safe.setObjectData=function(t,e){goog.dom.asserts.assertIsHTMLObjectElement(t),t.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e)},goog.dom.safe.setScriptSrc=function(t,e){goog.dom.asserts.assertIsHTMLScriptElement(t),t.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e),(e=goog.getScriptNonce())&&t.setAttribute("nonce",e)},goog.dom.safe.setScriptContent=function(t,e){goog.dom.asserts.assertIsHTMLScriptElement(t),t.text=goog.html.SafeScript.unwrapTrustedScript(e),(e=goog.getScriptNonce())&&t.setAttribute("nonce",e)},goog.dom.safe.setLocationHref=function(t,e){goog.dom.asserts.assertIsLocation(t),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t.href=goog.html.SafeUrl.unwrap(e)},goog.dom.safe.assignLocation=function(t,e){goog.dom.asserts.assertIsLocation(t),e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t.assign(goog.html.SafeUrl.unwrap(e))},goog.dom.safe.replaceLocation=function(t,e){e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),t.replace(goog.html.SafeUrl.unwrap(e))},goog.dom.safe.openInWindow=function(t,e,r,n,i){return t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e=e||goog.global,r=r instanceof goog.string.Const?goog.string.Const.unwrap(r):r||"",e.open(goog.html.SafeUrl.unwrap(t),r,n,i)},goog.dom.safe.parseFromStringHtml=function(t,e){return goog.dom.safe.parseFromString(t,e,"text/html")},goog.dom.safe.parseFromString=function(t,e,r){return t.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(e),r)},goog.dom.safe.createImageFromBlob=function(t){if(!/^image\/.*/g.test(t.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var e=goog.global.URL.createObjectURL(t);return(t=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(e)},goog.dom.safe.setImageSrc(t,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),e)),t},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:"\xA0"},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(t,e){for(var r=t.split("%s"),n="",i=Array.prototype.slice.call(arguments,1);i.length&&1<r.length;)n+=r.shift()+i.shift();return n+r.join("%s")},goog.string.collapseWhitespace=function(t){return t.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(t){return t.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(t){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(t){return!/[^\t\n\r ]/.test(t)},goog.string.isAlpha=function(t){return!/[^a-zA-Z]/.test(t)},goog.string.isNumeric=function(t){return!/[^0-9]/.test(t)},goog.string.isAlphaNumeric=function(t){return!/[^a-zA-Z0-9]/.test(t)},goog.string.isSpace=function(t){return t==" "},goog.string.isUnicodeChar=function(t){return t.length==1&&" "<=t&&"~">=t||"\x80"<=t&&"\uFFFD">=t},goog.string.stripNewlines=function(t){return t.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(t){return t.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(t){return t.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(t){return t.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(t){return t.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(t){return t.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(t,e,r){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var n=t.toLowerCase().match(r),i=e.toLowerCase().match(r),o=Math.min(n.length,i.length),s=0;s<o;s++){r=n[s];var p=i[s];if(r!=p)return t=parseInt(r,10),!isNaN(t)&&(e=parseInt(p,10),!isNaN(e)&&t-e)?t-e:r<p?-1:1}return n.length!=i.length?n.length-i.length:t<e?-1:1},goog.string.intAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\D+/g)},goog.string.floatAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(t){return encodeURIComponent(String(t))},goog.string.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(t,e){return t=goog.string.internal.htmlEscape(t,e),goog.string.DETECT_DOUBLE_ESCAPING&&(t=t.replace(goog.string.E_RE_,"&#101;")),t},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(t){return goog.string.contains(t,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(t):goog.string.unescapePureXmlEntities_(t):t},goog.string.unescapeEntitiesWithDocument=function(t,e){return goog.string.contains(t,"&")?goog.string.unescapeEntitiesUsingDom_(t,e):t},goog.string.unescapeEntitiesUsingDom_=function(t,e){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},n=e?e.createElement("div"):goog.global.document.createElement("div");return t.replace(goog.string.HTML_ENTITY_PATTERN_,(function(i,o){var s=r[i];return s||(o.charAt(0)=="#"&&(o=+("0"+o.substr(1)),isNaN(o)||(s=String.fromCharCode(o))),s||(goog.dom.safe.setInnerHtml(n,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),i+" ")),s=n.firstChild.nodeValue.slice(0,-1)),r[i]=s)}))},goog.string.unescapePureXmlEntities_=function(t){return t.replace(/&([^;]+);/g,(function(e,r){switch(r){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return r.charAt(0)!="#"||(r=+("0"+r.substr(1)),isNaN(r))?e:String.fromCharCode(r)}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(t,e){return goog.string.newLineToBr(t.replace(/  /g," &#160;"),e)},goog.string.preserveSpaces=function(t){return t.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(t,e){for(var r=e.length,n=0;n<r;n++){var i=r==1?e:e.charAt(n);if(t.charAt(0)==i&&t.charAt(t.length-1)==i)return t.substring(1,t.length-1)}return t},goog.string.truncate=function(t,e,r){return r&&(t=goog.string.unescapeEntities(t)),t.length>e&&(t=t.substring(0,e-3)+"..."),r&&(t=goog.string.htmlEscape(t)),t},goog.string.truncateMiddle=function(t,e,r,n){if(r&&(t=goog.string.unescapeEntities(t)),n&&t.length>e){n>e&&(n=e);var i=t.length-n;t=t.substring(0,e-n)+"..."+t.substring(i)}else t.length>e&&(n=Math.floor(e/2),i=t.length-n,t=t.substring(0,n+e%2)+"..."+t.substring(i));return r&&(t=goog.string.htmlEscape(t)),t},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(t){t=String(t);for(var e=['"'],r=0;r<t.length;r++){var n=t.charAt(r),i=n.charCodeAt(0);e[r+1]=goog.string.specialEscapeChars_[n]||(31<i&&127>i?n:goog.string.escapeChar(n))}return e.push('"'),e.join("")},goog.string.escapeString=function(t){for(var e=[],r=0;r<t.length;r++)e[r]=goog.string.escapeChar(t.charAt(r));return e.join("")},goog.string.escapeChar=function(t){if(t in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[t];if(t in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[t]=goog.string.specialEscapeChars_[t];var e=t.charCodeAt(0);if(31<e&&127>e)var r=t;else 256>e?(r="\\x",(16>e||256<e)&&(r+="0")):(r="\\u",4096>e&&(r+="0")),r+=e.toString(16).toUpperCase();return goog.string.jsEscapeCache_[t]=r},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(t,e){return t&&e?t.split(e).length-1:0},goog.string.removeAt=function(t,e,r){var n=t;return 0<=e&&e<t.length&&0<r&&(n=t.substr(0,e)+t.substr(e+r,t.length-e-r)),n},goog.string.remove=function(t,e){return t.replace(e,"")},goog.string.removeAll=function(t,e){return e=new RegExp(goog.string.regExpEscape(e),"g"),t.replace(e,"")},goog.string.replaceAll=function(t,e,r){return e=new RegExp(goog.string.regExpEscape(e),"g"),t.replace(e,r.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(t){return String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(t,e){return t.repeat(e)}:function(t,e){return Array(e+1).join(t)},goog.string.padNumber=function(t,e,r){return(r=(t=r!==void 0?t.toFixed(r):String(t)).indexOf("."))==-1&&(r=t.length),goog.string.repeat("0",Math.max(0,e-r))+t},goog.string.makeSafe=function(t){return t==null?"":String(t)},goog.string.buildString=function(t){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(t){for(var e=0,r=0;r<t.length;++r)e=31*e+t.charCodeAt(r)>>>0;return e},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(t){var e=Number(t);return e==0&&goog.string.isEmptyOrWhitespace(t)?NaN:e},goog.string.isLowerCamelCase=function(t){return/^[a-z]+([A-Z][a-z]*)*$/.test(t)},goog.string.isUpperCamelCase=function(t){return/^([A-Z][a-z]*)+$/.test(t)},goog.string.toCamelCase=function(t){return String(t).replace(/\-([a-z])/g,(function(e,r){return r.toUpperCase()}))},goog.string.toSelectorCase=function(t){return String(t).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(t,e){return e=typeof e=="string"?goog.string.regExpEscape(e):"\\s",t.replace(new RegExp("(^"+(e?"|["+e+"]+":"")+")([a-z])","g"),(function(r,n,i){return n+i.toUpperCase()}))},goog.string.capitalize=function(t){return String(t.charAt(0)).toUpperCase()+String(t.substr(1)).toLowerCase()},goog.string.parseInt=function(t){return isFinite(t)&&(t=String(t)),typeof t=="string"?/^\s*-?0x/i.test(t)?parseInt(t,16):parseInt(t,10):NaN},goog.string.splitLimit=function(t,e,r){t=t.split(e);for(var n=[];0<r&&t.length;)n.push(t.shift()),r--;return t.length&&n.push(t.join(e)),n},goog.string.lastComponent=function(t,e){if(!e)return t;typeof e=="string"&&(e=[e]);for(var r=-1,n=0;n<e.length;n++)if(e[n]!=""){var i=t.lastIndexOf(e[n]);i>r&&(r=i)}return r==-1?t:t.slice(r+1)},goog.string.editDistance=function(t,e){var r=[],n=[];if(t==e)return 0;if(!t.length||!e.length)return Math.max(t.length,e.length);for(var i=0;i<e.length+1;i++)r[i]=i;for(i=0;i<t.length;i++){n[0]=i+1;for(var o=0;o<e.length;o++)n[o+1]=Math.min(n[o]+1,r[o+1]+1,r[o]+ +(t[i]!=e[o]));for(o=0;o<r.length;o++)r[o]=n[o]}return n[e.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var t=goog.labs.userAgent.util.getUserAgent();if(t){t=goog.labs.userAgent.util.extractVersionTuples(t);var e,r=goog.labs.userAgent.engine.getEngineTuple_(t);if(r)return r[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(t,"Firefox"):r[1];if((t=t[0])&&(e=t[2])&&(e=/Trident\/([^\s;]+)/.exec(e)))return e[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(t){if(!goog.labs.userAgent.engine.isEdge())return t[1];for(var e=0;e<t.length;e++){var r=t[e];if(r[0]=="Edge")return r}},goog.labs.userAgent.engine.isVersionOrHigher=function(t){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),t)},goog.labs.userAgent.engine.getVersionForKey_=function(t,e){return(t=goog.array.find(t,(function(r){return e==r[0]})))&&t[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var t=goog.labs.userAgent.util.getUserAgent(),e="";return goog.labs.userAgent.platform.isWindows()?e=(t=(e=/Windows (?:NT|Phone) ([0-9.]+)/).exec(t))?t[1]:"0.0":goog.labs.userAgent.platform.isIos()?e=(t=(e=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(t))&&t[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?e=(t=(e=/Mac OS X ([0-9_.]+)/).exec(t))?t[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?e=(t=(e=/(?:KaiOS)\/(\S+)/i).exec(t))&&t[1]:goog.labs.userAgent.platform.isAndroid()?e=(t=(e=/Android\s+([^\);]+)(\)|;)/).exec(t))&&t[1]:goog.labs.userAgent.platform.isChromeOS()&&(e=(t=(e=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(t))&&t[1]),e||""},goog.labs.userAgent.platform.isVersionOrHigher=function(t){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),t)},goog.reflect={},goog.reflect.object=function(t,e){return e},goog.reflect.objectProperty=function(t,e){return t},goog.reflect.sinkValue=function(t){return goog.reflect.sinkValue[" "](t),t},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(t,e){try{return goog.reflect.sinkValue(t[e]),!0}catch{}return!1},goog.reflect.cache=function(t,e,r,n){return n=n?n(e):e,Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=r(e)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var t=goog.userAgent.getNavigatorTyped();return t&&t.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var t=goog.userAgent.getNavigatorTyped();return!!t&&goog.string.contains(t.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var t="",e=goog.userAgent.getVersionRegexResult_();return e&&(t=e?e[1]:""),goog.userAgent.IE&&(e=goog.userAgent.getDocumentMode_())!=null&&e>parseFloat(t)?String(e):t},goog.userAgent.getVersionRegexResult_=function(){var t=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(t):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(t):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(t):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(t):void 0},goog.userAgent.getDocumentMode_=function(){var t=goog.global.document;return t?t.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(t,e){return goog.string.compareVersions(t,e)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(t){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,t,(function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,t)}))},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(t){return Number(goog.userAgent.DOCUMENT_MODE)>=t},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=(function(){if(goog.global.document&&goog.userAgent.IE){var t=goog.userAgent.getDocumentMode_();return t||parseInt(goog.userAgent.VERSION,10)||void 0}})(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(t){return goog.string.contains(goog.crypt.base64.paddingChars_,t)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(t,e){goog.asserts.assert(goog.isArrayLike(t),"encodeByteArray takes an array as a parameter"),e===void 0&&(e=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),e=goog.crypt.base64.byteToCharMaps_[e];for(var r=[],n=0;n<t.length;n+=3){var i=t[n],o=n+1<t.length,s=o?t[n+1]:0,p=n+2<t.length,l=p?t[n+2]:0,c=i>>2;i=(3&i)<<4|s>>4,s=(15&s)<<2|l>>6,l&=63,p||(l=64,o||(s=64)),r.push(e[c],e[i],e[s]||"",e[l]||"")}return r.join("")},goog.crypt.base64.encodeString=function(t,e){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!e?goog.global.btoa(t):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(t),e)},goog.crypt.base64.decodeString=function(t,e){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!e)return goog.global.atob(t);var r="";return goog.crypt.base64.decodeStringInternal_(t,(function(n){r+=String.fromCharCode(n)})),r},goog.crypt.base64.decodeStringToByteArray=function(t,e){var r=[];return goog.crypt.base64.decodeStringInternal_(t,(function(n){r.push(n)})),r},goog.crypt.base64.decodeStringToUint8Array=function(t){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var e=t.length,r=3*e/4;r%3?r=Math.floor(r):goog.crypt.base64.isPadding_(t[e-1])&&(r=goog.crypt.base64.isPadding_(t[e-2])?r-2:r-1);var n=new Uint8Array(r),i=0;return goog.crypt.base64.decodeStringInternal_(t,(function(o){n[i++]=o})),n.subarray(0,i)},goog.crypt.base64.decodeStringInternal_=function(t,e){function r(l){for(;n<t.length;){var c=t.charAt(n++),u=goog.crypt.base64.charToByteMap_[c];if(u!=null)return u;if(!goog.string.isEmptyOrWhitespace(c))throw Error("Unknown base64 encoding at char: "+c)}return l}goog.crypt.base64.init_();for(var n=0;;){var i=r(-1),o=r(0),s=r(64),p=r(64);if(p===64&&i===-1)break;e(i<<2|o>>4),s!=64&&(e(o<<4&240|s>>2),p!=64&&e(s<<6&192|p))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var t=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),e=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var n=t.concat(e[r].split(""));goog.crypt.base64.byteToCharMaps_[r]=n;for(var i=0;i<n.length;i++){var o=n[i],s=goog.crypt.base64.charToByteMap_[o];s===void 0?goog.crypt.base64.charToByteMap_[o]=i:goog.asserts.assert(s===i)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(t){var e=t>>>0;t=Math.floor((t-e)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=e,jspb.utils.split64High=t},jspb.utils.splitInt64=function(t){var e=0>t,r=(t=Math.abs(t))>>>0;t=Math.floor((t-r)/jspb.BinaryConstants.TWO_TO_32),t>>>=0,e&&(t=~t>>>0,4294967295<(r=1+(~r>>>0))&&(r=0,4294967295<++t&&(t=0))),jspb.utils.split64Low=r,jspb.utils.split64High=t},jspb.utils.splitZigzag64=function(t){var e=0>t;t=2*Math.abs(t),jspb.utils.splitUint64(t),t=jspb.utils.split64Low;var r=jspb.utils.split64High;e&&(t==0?r==0?r=t=4294967295:(r--,t=4294967295):t--),jspb.utils.split64Low=t,jspb.utils.split64High=r},jspb.utils.splitFloat32=function(t){var e=0>t?1:0;if((t=e?-t:t)===0)0<1/t?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(t))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(t>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|2139095040)>>>0;else if(t<jspb.BinaryConstants.FLOAT32_MIN)t=Math.round(t/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|t)>>>0;else{var r=Math.floor(Math.log(t)/Math.LN2);t*=Math.pow(2,-r),16777216<=(t=Math.round(t*jspb.BinaryConstants.TWO_TO_23))&&++r,jspb.utils.split64High=0,jspb.utils.split64Low=(e<<31|r+127<<23|8388607&t)>>>0}},jspb.utils.splitFloat64=function(t){var e=0>t?1:0;if((t=e?-t:t)===0)jspb.utils.split64High=0<1/t?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(t))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(t>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(e<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(t<jspb.BinaryConstants.FLOAT64_MIN){var r=t/Math.pow(2,-1074);t=r/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(e<<31|t)>>>0,jspb.utils.split64Low=r>>>0}else{var n=0;if(2<=(r=t))for(;2<=r&&1023>n;)n++,r/=2;else for(;1>r&&-1022<n;)r*=2,n--;t=(r=t*Math.pow(2,-n))*jspb.BinaryConstants.TWO_TO_20&1048575,r=r*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(e<<31|n+1023<<20|t)>>>0,jspb.utils.split64Low=r}},jspb.utils.splitHash64=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),o=t.charCodeAt(4),s=t.charCodeAt(5),p=t.charCodeAt(6);t=t.charCodeAt(7),jspb.utils.split64Low=e+(r<<8)+(n<<16)+(i<<24)>>>0,jspb.utils.split64High=o+(s<<8)+(p<<16)+(t<<24)>>>0},jspb.utils.joinUint64=function(t,e){return e*jspb.BinaryConstants.TWO_TO_32+(t>>>0)},jspb.utils.joinInt64=function(t,e){var r=2147483648&e;return r&&(e=~e>>>0,(t=1+~t>>>0)==0&&(e=e+1>>>0)),t=jspb.utils.joinUint64(t,e),r?-t:t},jspb.utils.toZigzag64=function(t,e,r){var n=e>>31;return r(t<<1^n,(e<<1|t>>>31)^n)},jspb.utils.joinZigzag64=function(t,e){return jspb.utils.fromZigzag64(t,e,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(t,e,r){var n=-(1&t);return r((t>>>1|e<<31)^n,e>>>1^n)},jspb.utils.joinFloat32=function(t,e){e=2*(t>>31)+1;var r=t>>>23&255;return t&=8388607,r==255?t?NaN:1/0*e:r==0?e*Math.pow(2,-149)*t:e*Math.pow(2,r-150)*(t+Math.pow(2,23))},jspb.utils.joinFloat64=function(t,e){var r=2*(e>>31)+1,n=e>>>20&2047;return t=jspb.BinaryConstants.TWO_TO_32*(1048575&e)+t,n==2047?t?NaN:1/0*r:n==0?r*Math.pow(2,-1074)*t:r*Math.pow(2,n-1075)*(t+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(t,e){return String.fromCharCode(t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255,e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(t,e){function r(i,o){return i=i?String(i):"",o?"0000000".slice(i.length)+i:i}if(2097151>=e)return""+jspb.utils.joinUint64(t,e);var n=(t>>>24|e<<8)>>>0&16777215;return t=(16777215&t)+6777216*n+6710656*(e=e>>16&65535),n+=8147497*e,e*=2,1e7<=t&&(n+=Math.floor(t/1e7),t%=1e7),1e7<=n&&(e+=Math.floor(n/1e7),n%=1e7),r(e,0)+r(n,e)+r(t,1)},jspb.utils.joinSignedDecimalString=function(t,e){var r=2147483648&e;return r&&(e=~e+((t=1+~t>>>0)==0?1:0)>>>0),t=jspb.utils.joinUnsignedDecimalString(t,e),r?"-"+t:t},jspb.utils.hash64ToDecimalString=function(t,e){jspb.utils.splitHash64(t),t=jspb.utils.split64Low;var r=jspb.utils.split64High;return e?jspb.utils.joinSignedDecimalString(t,r):jspb.utils.joinUnsignedDecimalString(t,r)},jspb.utils.hash64ArrayToDecimalStrings=function(t,e){for(var r=Array(t.length),n=0;n<t.length;n++)r[n]=jspb.utils.hash64ToDecimalString(t[n],e);return r},jspb.utils.decimalStringToHash64=function(t){function e(o,s){for(var p=0;8>p&&(o!==1||0<s);p++)s=o*n[p]+s,n[p]=255&s,s>>>=8}jspb.asserts.assert(0<t.length);var r=!1;t[0]==="-"&&(r=!0,t=t.slice(1));for(var n=[0,0,0,0,0,0,0,0],i=0;i<t.length;i++)e(10,t.charCodeAt(i)-jspb.utils.ZERO_CHAR_CODE_);return r&&((function(){for(var o=0;8>o;o++)n[o]=255&~n[o]})(),e(1,1)),goog.crypt.byteArrayToString(n)},jspb.utils.splitDecimalString=function(t){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(t))},jspb.utils.toHexDigit_=function(t){return String.fromCharCode(10>t?jspb.utils.ZERO_CHAR_CODE_+t:jspb.utils.A_CHAR_CODE_-10+t)},jspb.utils.fromHexCharCode_=function(t){return t>=jspb.utils.A_CHAR_CODE_?t-jspb.utils.A_CHAR_CODE_+10:t-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(t){var e=Array(18);e[0]="0",e[1]="x";for(var r=0;8>r;r++){var n=t.charCodeAt(7-r);e[2*r+2]=jspb.utils.toHexDigit_(n>>4),e[2*r+3]=jspb.utils.toHexDigit_(15&n)}return e.join("")},jspb.utils.hexStringToHash64=function(t){t=t.toLowerCase(),jspb.asserts.assert(t.length==18),jspb.asserts.assert(t[0]=="0"),jspb.asserts.assert(t[1]=="x");for(var e="",r=0;8>r;r++){var n=jspb.utils.fromHexCharCode_(t.charCodeAt(2*r+2)),i=jspb.utils.fromHexCharCode_(t.charCodeAt(2*r+3));e=String.fromCharCode(16*n+i)+e}return e},jspb.utils.hash64ToNumber=function(t,e){jspb.utils.splitHash64(t),t=jspb.utils.split64Low;var r=jspb.utils.split64High;return e?jspb.utils.joinInt64(t,r):jspb.utils.joinUint64(t,r)},jspb.utils.numberToHash64=function(t){return jspb.utils.splitInt64(t),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(t,e,r){for(var n=0,i=e;i<r;i++)n+=t[i]>>7;return r-e-n},jspb.utils.countVarintFields=function(t,e,r,n){var i=0;if(128>(n=8*n+jspb.BinaryConstants.WireType.VARINT))for(;e<r&&t[e++]==n;)for(i++;;){var o=t[e++];if((128&o)==0)break}else for(;e<r;){for(o=n;128<o;){if(t[e]!=(127&o|128))return i;e++,o>>=7}if(t[e++]!=o)break;for(i++;(128&(o=t[e++]))!=0;);}return i},jspb.utils.countFixedFields_=function(t,e,r,n,i){var o=0;if(128>n)for(;e<r&&t[e++]==n;)o++,e+=i;else for(;e<r;){for(var s=n;128<s;){if(t[e++]!=(127&s|128))return o;s>>=7}if(t[e++]!=s)break;o++,e+=i}return o},jspb.utils.countFixed32Fields=function(t,e,r,n){return jspb.utils.countFixedFields_(t,e,r,8*n+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(t,e,r,n){return jspb.utils.countFixedFields_(t,e,r,8*n+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(t,e,r,n){var i=0;for(n=8*n+jspb.BinaryConstants.WireType.DELIMITED;e<r;){for(var o=n;128<o;){if(t[e++]!=(127&o|128))return i;o>>=7}if(t[e++]!=o)break;i++;for(var s=0,p=1;s+=(127&(o=t[e++]))*p,p*=128,(128&o)!=0;);e+=s}return i},jspb.utils.debugBytesToTextFormat=function(t){var e='"';if(t){t=jspb.utils.byteSourceToUint8Array(t);for(var r=0;r<t.length;r++)e+="\\x",16>t[r]&&(e+="0"),e+=t[r].toString(16)}return e+'"'},jspb.utils.debugScalarToTextFormat=function(t){return typeof t=="string"?goog.string.quote(t):t.toString()},jspb.utils.stringToByteArray=function(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++){var n=t.charCodeAt(r);if(255<n)throw Error("Conversion error: string contains codepoint outside of byte range");e[r]=n}return e},jspb.utils.byteSourceToUint8Array=function(t){return t.constructor===Uint8Array?t:t.constructor===ArrayBuffer||t.constructor===Array?new Uint8Array(t):t.constructor===String?goog.crypt.base64.decodeStringToUint8Array(t):t instanceof Uint8Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(t,e,r){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,t&&this.setBlock(t,e,r)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(t,e,r){if(jspb.BinaryDecoder.instanceCache_.length){var n=jspb.BinaryDecoder.instanceCache_.pop();return t&&n.setBlock(t,e,r),n}return new jspb.BinaryDecoder(t,e,r)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(t,e,r){this.bytes_=jspb.utils.byteSourceToUint8Array(t),this.start_=e!==void 0?e:0,this.end_=r!==void 0?this.start_+r:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(t){this.end_=t},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(t){this.cursor_=t},jspb.BinaryDecoder.prototype.advance=function(t){this.cursor_+=t,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(t){for(var e=128,r=0,n=0,i=0;4>i&&128<=e;i++)r|=(127&(e=this.bytes_[this.cursor_++]))<<7*i;if(128<=e&&(r|=(127&(e=this.bytes_[this.cursor_++]))<<28,n|=(127&e)>>4),128<=e)for(i=0;5>i&&128<=e;i++)n|=(127&(e=this.bytes_[this.cursor_++]))<<7*i+3;if(128>e)return t(r>>>0,n>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(t){return this.readSplitVarint64((function(e,r){return jspb.utils.fromZigzag64(e,r,t)}))},jspb.BinaryDecoder.prototype.readSplitFixed64=function(t){var e=this.bytes_,r=this.cursor_;this.cursor_+=8;for(var n=0,i=0,o=r+7;o>=r;o--)n=n<<8|e[o],i=i<<8|e[o+4];return t(n,i)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(t){for(;128<t;)this.cursor_--,t>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var t=this.bytes_,e=t[this.cursor_+0],r=127&e;return 128>e?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(e=t[this.cursor_+1]))<<7,128>e?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(e=t[this.cursor_+2]))<<14,128>e?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(e=t[this.cursor_+3]))<<21,128>e?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),r):(r|=(15&(e=t[this.cursor_+4]))<<28,128>e?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),r>>>0):(this.cursor_+=5,128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),r)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var t=this.readUnsignedVarint32();return t>>>1^-(1&t)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var t=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readUint16=function(){var t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),t<<0|e<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(t<<0|e<<8|r<<16|n<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var t=this.readUint32(),e=this.readUint32();return jspb.utils.joinUint64(t,e)},jspb.BinaryDecoder.prototype.readUint64String=function(){var t=this.readUint32(),e=this.readUint32();return jspb.utils.joinUnsignedDecimalString(t,e)},jspb.BinaryDecoder.prototype.readInt8=function(){var t=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),t<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(t<<0|e<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var t=this.bytes_[this.cursor_+0],e=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),t<<0|e<<8|r<<16|n<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var t=this.readUint32(),e=this.readUint32();return jspb.utils.joinInt64(t,e)},jspb.BinaryDecoder.prototype.readInt64String=function(){var t=this.readUint32(),e=this.readUint32();return jspb.utils.joinSignedDecimalString(t,e)},jspb.BinaryDecoder.prototype.readFloat=function(){var t=this.readUint32();return jspb.utils.joinFloat32(t,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var t=this.readUint32(),e=this.readUint32();return jspb.utils.joinFloat64(t,e)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(t){var e=this.bytes_,r=this.cursor_;t=r+t;for(var n=[],i="";r<t;){var o=e[r++];if(128>o)n.push(o);else{if(192>o)continue;if(224>o){var s=e[r++];n.push((31&o)<<6|63&s)}else if(240>o){s=e[r++];var p=e[r++];n.push((15&o)<<12|(63&s)<<6|63&p)}else 248>o&&(o=(7&o)<<18|(63&(s=e[r++]))<<12|(63&(p=e[r++]))<<6|63&e[r++],o-=65536,n.push(55296+(o>>10&1023),56320+(1023&o)))}8192<=n.length&&(i+=String.fromCharCode.apply(null,n),n.length=0)}return i+=goog.crypt.byteArrayToString(n),this.cursor_=r,i},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var t=this.readUnsignedVarint32();return this.readString(t)},jspb.BinaryDecoder.prototype.readBytes=function(t){if(0>t||this.cursor_+t>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var e=this.bytes_.subarray(this.cursor_,this.cursor_+t);return this.cursor_+=t,jspb.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var t=this.bytes_,e=this.cursor_,r=t[e+0],n=t[e+1],i=t[e+2],o=t[e+3],s=t[e+4],p=t[e+5],l=t[e+6];return t=t[e+7],this.cursor_+=8,String.fromCharCode(r,n,i,o,s,p,l,t)},jspb.BinaryReader=function(t,e,r){this.decoder_=jspb.BinaryDecoder.alloc(t,e,r),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(t,e,r){if(jspb.BinaryReader.instanceCache_.length){var n=jspb.BinaryReader.instanceCache_.pop();return t&&n.decoder_.setBlock(t,e,r),n}return new jspb.BinaryReader(t,e,r)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(t,e,r){this.decoder_.setBlock(t,e,r),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(t){this.decoder_.advance(t)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var t=this.decoder_.readUnsignedVarint32(),e=t>>>3;return(t&=7)!=jspb.BinaryConstants.WireType.VARINT&&t!=jspb.BinaryConstants.WireType.FIXED32&&t!=jspb.BinaryConstants.WireType.FIXED64&&t!=jspb.BinaryConstants.WireType.DELIMITED&&t!=jspb.BinaryConstants.WireType.START_GROUP&&t!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",t,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=e,this.nextWireType_=t,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var t=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==t;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var t=this.decoder_.readUnsignedVarint32();this.decoder_.advance(t)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var t=this.nextField_;;){if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=t&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(t,e){this.readCallbacks_===null&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[t]),this.readCallbacks_[t]=e},jspb.BinaryReader.prototype.runReadCallback=function(t){return jspb.asserts.assert(this.readCallbacks_!==null),t=this.readCallbacks_[t],jspb.asserts.assert(t),t(this)},jspb.BinaryReader.prototype.readAny=function(t){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(t);var e=jspb.BinaryConstants.FieldType;switch(t){case e.DOUBLE:return this.readDouble();case e.FLOAT:return this.readFloat();case e.INT64:return this.readInt64();case e.UINT64:return this.readUint64();case e.INT32:return this.readInt32();case e.FIXED64:return this.readFixed64();case e.FIXED32:return this.readFixed32();case e.BOOL:return this.readBool();case e.STRING:return this.readString();case e.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case e.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case e.BYTES:return this.readBytes();case e.UINT32:return this.readUint32();case e.ENUM:return this.readEnum();case e.SFIXED32:return this.readSfixed32();case e.SFIXED64:return this.readSfixed64();case e.SINT32:return this.readSint32();case e.SINT64:return this.readSint64();case e.FHASH64:return this.readFixedHash64();case e.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(t,e){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var r=this.decoder_.getEnd(),n=this.decoder_.readUnsignedVarint32();n=this.decoder_.getCursor()+n,this.decoder_.setEnd(n),e(t,this),this.decoder_.setCursor(n),this.decoder_.setEnd(r)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(t,e,r){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==t),r(e,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32(),e=this.decoder_.getCursor(),r=e+t;return t=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),e,t),this.decoder_.setCursor(r),t},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(t)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var t=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(t)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(t){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(t)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(t){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64((function(e,r){return jspb.utils.fromZigzag64(e,r,t)}))},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(t){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(t)},jspb.BinaryReader.prototype.readPackedField_=function(t){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();e=this.decoder_.getCursor()+e;for(var r=[];this.decoder_.getCursor()<e;)r.push(t.call(this.decoder_));return r},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var t=this.buffer_;return this.buffer_=[],t},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(t,e){for(jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);0<e||127<t;)this.buffer_.push(127&t|128),t=(t>>>7|e<<25)>>>0,e>>>=7;this.buffer_.push(t)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(t,e){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(e==Math.floor(e)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(t),this.writeUint32(e)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(t){for(jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);127<t;)this.buffer_.push(127&t|128),t>>>=7;this.buffer_.push(t)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(t){if(jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),0<=t)this.writeUnsignedVarint32(t);else{for(var e=0;9>e;e++)this.buffer_.push(127&t|128),t>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(t),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(t),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((t<<1^t>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(t),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(t){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(t))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(t){var e=this;jspb.utils.splitHash64(t),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,(function(r,n){e.writeSplitVarint64(r>>>0,n>>>0)}))},jspb.BinaryEncoder.prototype.writeUint8=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&256>t),this.buffer_.push(t>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&65536>t),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255),this.buffer_.push(t>>>16&255),this.buffer_.push(t>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(t),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(-128<=t&&128>t),this.buffer_.push(t>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(-32768<=t&&32768>t),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(t>>>0&255),this.buffer_.push(t>>>8&255),this.buffer_.push(t>>>16&255),this.buffer_.push(t>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(t),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(+t>=-jspb.BinaryConstants.TWO_TO_63&&+t<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(t)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(t){jspb.asserts.assert(t===1/0||t===-1/0||isNaN(t)||t>=-jspb.BinaryConstants.FLOAT32_MAX&&t<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(t),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(t){jspb.asserts.assert(t===1/0||t===-1/0||isNaN(t)||t>=-jspb.BinaryConstants.FLOAT64_MAX&&t<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(t),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(t){jspb.asserts.assert(typeof t=="boolean"||typeof t=="number"),this.buffer_.push(t?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(t){jspb.asserts.assert(t==Math.floor(t)),jspb.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(t)},jspb.BinaryEncoder.prototype.writeBytes=function(t){this.buffer_.push.apply(this.buffer_,t)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(t){jspb.utils.splitHash64(t),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(t){jspb.utils.splitHash64(t),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(t){var e=this.buffer_.length;jspb.asserts.assertString(t);for(var r=0;r<t.length;r++){var n=t.charCodeAt(r);if(128>n)this.buffer_.push(n);else if(2048>n)this.buffer_.push(n>>6|192),this.buffer_.push(63&n|128);else if(65536>n)if(55296<=n&&56319>=n&&r+1<t.length){var i=t.charCodeAt(r+1);56320<=i&&57343>=i&&(n=1024*(n-55296)+i-56320+65536,this.buffer_.push(n>>18|240),this.buffer_.push(n>>12&63|128),this.buffer_.push(n>>6&63|128),this.buffer_.push(63&n|128),r++)}else this.buffer_.push(n>>12|224),this.buffer_.push(n>>6&63|128),this.buffer_.push(63&n|128)}return this.buffer_.length-e},jspb.arith={},jspb.arith.UInt64=function(t,e){this.lo=t,this.hi=e},jspb.arith.UInt64.prototype.cmp=function(t){return this.hi<t.hi||this.hi==t.hi&&this.lo<t.lo?-1:this.hi==t.hi&&this.lo==t.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(t){return new jspb.arith.UInt64((this.lo+t.lo&4294967295)>>>0>>>0,((this.hi+t.hi&4294967295)>>>0)+(4294967296<=this.lo+t.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(t){return new jspb.arith.UInt64((this.lo-t.lo&4294967295)>>>0>>>0,((this.hi-t.hi&4294967295)>>>0)-(0>this.lo-t.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(t,e){var r=65535&t,n=65535&e,i=e>>>16;for(e=r*n+65536*(r*i&65535)+65536*((t>>>=16)*n&65535),r=t*i+(r*i>>>16)+(t*n>>>16);4294967296<=e;)e-=4294967296,r+=1;return new jspb.arith.UInt64(e>>>0,r>>>0)},jspb.arith.UInt64.prototype.mul=function(t){var e=jspb.arith.UInt64.mul32x32(this.lo,t);return(t=jspb.arith.UInt64.mul32x32(this.hi,t)).hi=t.lo,t.lo=0,e.add(t)},jspb.arith.UInt64.prototype.div=function(t){if(t==0)return[];var e=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(this.lo,this.hi);t=new jspb.arith.UInt64(t,0);for(var n=new jspb.arith.UInt64(1,0);!t.msb();)t=t.leftShift(),n=n.leftShift();for(;!n.zero();)0>=t.cmp(r)&&(e=e.add(n),r=r.sub(t)),t=t.rightShift(),n=n.rightShift();return[e,r]},jspb.arith.UInt64.prototype.toString=function(){for(var t="",e=this;!e.zero();){var r=(e=e.div(10))[0];t=e[1].lo+t,e=r}return t==""&&(t="0"),t},jspb.arith.UInt64.fromString=function(t){for(var e=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(0,0),n=0;n<t.length;n++){if("0">t[n]||"9"<t[n])return null;var i=parseInt(t[n],10);r.lo=i,e=e.mul(10).add(r)}return e},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(t,e){this.lo=t,this.hi=e},jspb.arith.Int64.prototype.add=function(t){return new jspb.arith.Int64((this.lo+t.lo&4294967295)>>>0>>>0,((this.hi+t.hi&4294967295)>>>0)+(4294967296<=this.lo+t.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(t){return new jspb.arith.Int64((this.lo-t.lo&4294967295)>>>0>>>0,((this.hi-t.hi&4294967295)>>>0)-(0>this.lo-t.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var t=(2147483648&this.hi)!=0,e=new jspb.arith.UInt64(this.lo,this.hi);return t&&(e=new jspb.arith.UInt64(0,0).sub(e)),(t?"-":"")+e.toString()},jspb.arith.Int64.fromString=function(t){var e=0<t.length&&t[0]=="-";return e&&(t=t.substring(1)),(t=jspb.arith.UInt64.fromString(t))===null?null:(e&&(t=new jspb.arith.UInt64(0,0).sub(t)),new jspb.arith.Int64(t.lo,t.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(t){var e=this.encoder_.end();this.blocks_.push(e),this.blocks_.push(t),this.totalLength_+=e.length+t.length},jspb.BinaryWriter.prototype.beginDelimited_=function(t){return this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),t=this.encoder_.end(),this.blocks_.push(t),this.totalLength_+=t.length,t.push(this.totalLength_),t},jspb.BinaryWriter.prototype.endDelimited_=function(t){var e=t.pop();for(e=this.totalLength_+this.encoder_.length()-e,jspb.asserts.assert(0<=e);127<e;)t.push(127&e|128),e>>>=7,this.totalLength_++;t.push(e),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(t,e,r){this.appendUint8Array_(t.subarray(e,r))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(t,e,r){t!=null&&e!=null&&r!=null&&this.writeSerializedMessage(t,e,r)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(this.bookmarks_.length==0);for(var t=new Uint8Array(this.totalLength_+this.encoder_.length()),e=this.blocks_,r=e.length,n=0,i=0;i<r;i++){var o=e[i];t.set(o,n),n+=o.length}return e=this.encoder_.end(),t.set(e,n),n+=e.length,jspb.asserts.assert(n==t.length),this.blocks_=[t],t},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(t){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),t)},jspb.BinaryWriter.prototype.beginSubMessage=function(t){this.bookmarks_.push(this.beginDelimited_(t))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(t,e){jspb.asserts.assert(1<=t&&t==Math.floor(t)),this.encoder_.writeUnsignedVarint32(8*t+e)},jspb.BinaryWriter.prototype.writeAny=function(t,e,r){var n=jspb.BinaryConstants.FieldType;switch(t){case n.DOUBLE:this.writeDouble(e,r);break;case n.FLOAT:this.writeFloat(e,r);break;case n.INT64:this.writeInt64(e,r);break;case n.UINT64:this.writeUint64(e,r);break;case n.INT32:this.writeInt32(e,r);break;case n.FIXED64:this.writeFixed64(e,r);break;case n.FIXED32:this.writeFixed32(e,r);break;case n.BOOL:this.writeBool(e,r);break;case n.STRING:this.writeString(e,r);break;case n.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case n.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case n.BYTES:this.writeBytes(e,r);break;case n.UINT32:this.writeUint32(e,r);break;case n.ENUM:this.writeEnum(e,r);break;case n.SFIXED32:this.writeSfixed32(e,r);break;case n.SFIXED64:this.writeSfixed64(e,r);break;case n.SINT32:this.writeSint32(e,r);break;case n.SINT64:this.writeSint64(e,r);break;case n.FHASH64:this.writeFixedHash64(e,r);break;case n.VHASH64:this.writeVarintHash64(e,r);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(e))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(e))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(e))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(e))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(e))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(e))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(e))},jspb.BinaryWriter.prototype.writeInt32=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(t,e){e!=null&&(e=parseInt(e,10),jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(t,e))},jspb.BinaryWriter.prototype.writeInt64=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(t,e){e!=null&&(e=jspb.arith.Int64.fromString(e),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeUint32=function(t,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(t,e){e!=null&&(e=parseInt(e,10),jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(t,e))},jspb.BinaryWriter.prototype.writeUint64=function(t,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(t,e){e!=null&&(e=jspb.arith.UInt64.fromString(e),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeSint32=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(t,e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(t,e){e!=null&&this.writeZigzagVarintHash64_(t,e)},jspb.BinaryWriter.prototype.writeSint64String=function(t,e){e!=null&&this.writeZigzagVarint64String_(t,e)},jspb.BinaryWriter.prototype.writeFixed32=function(t,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(t,e){e!=null&&(jspb.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(t,e){e!=null&&(e=jspb.arith.UInt64.fromString(e),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(t,e){e!=null&&(e=jspb.arith.Int64.fromString(e),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e.lo,e.hi))},jspb.BinaryWriter.prototype.writeFloat=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(t,e){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(t,e){e!=null&&(jspb.asserts.assert(typeof e=="boolean"||typeof e=="number"),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(t,e){e!=null&&(jspb.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(t,e){e!=null&&(t=this.beginDelimited_(t),this.encoder_.writeString(e),this.endDelimited_(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(t,e){e!=null&&(e=jspb.utils.byteSourceToUint8Array(e),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length),this.appendUint8Array_(e))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(t,e,r){e!=null&&(t=this.beginDelimited_(t),r(e,this),this.endDelimited_(t))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(t,e,r){e!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t),t=this.beginDelimited_(3),r(e,this),this.endDelimited_(t),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(t,e,r){e!=null&&(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.START_GROUP),r(e,this),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(t,e){e!=null&&(jspb.asserts.assert(e.length==8),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(e))},jspb.BinaryWriter.prototype.writeVarintHash64=function(t,e){e!=null&&(jspb.asserts.assert(e.length==8),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(e))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(t,e,r){this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(e,r)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(t,e,r){this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(e,r)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(t,e,r){this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.VARINT);var n=this.encoder_;jspb.utils.toZigzag64(e,r,(function(i,o){n.writeSplitVarint64(i>>>0,o>>>0)}))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeSignedVarint32_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeInt32String(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeSignedVarint64_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(t,e,r,n){if(e!=null)for(var i=0;i<e.length;i++)this.writeSplitFixed64(t,r(e[i]),n(e[i]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(t,e,r,n){if(e!=null)for(var i=0;i<e.length;i++)this.writeSplitVarint64(t,r(e[i]),n(e[i]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(t,e,r,n){if(e!=null)for(var i=0;i<e.length;i++)this.writeSplitZigzagVarint64(t,r(e[i]),n(e[i]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeInt64String(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeUnsignedVarint32_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeUint32String(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeUnsignedVarint64_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeUint64String(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeZigzagVarint32_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeZigzagVarint64_(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeZigzagVarint64String_(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeZigzagVarintHash64_(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeFixed32(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeFixed64(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeFixed64String(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeSfixed32(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeSfixed64(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeSfixed64String(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeFloat(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeDouble(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeBool(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeEnum(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeString(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeBytes(t,e[r])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(t,e,r){if(e!=null)for(var n=0;n<e.length;n++){var i=this.beginDelimited_(t);r(e[n],this),this.endDelimited_(i)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(t,e,r){if(e!=null)for(var n=0;n<e.length;n++)this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.START_GROUP),r(e[n],this),this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeFixedHash64(t,e[r])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(t,e){if(e!=null)for(var r=0;r<e.length;r++)this.writeVarintHash64(t,e[r])},jspb.BinaryWriter.prototype.writePackedInt32=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeSignedVarint32(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeSignedVarint32(parseInt(e[r],10));this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedInt64=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeSignedVarint64(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(t,e,r,n){if(e!=null){t=this.beginDelimited_(t);for(var i=0;i<e.length;i++)this.encoder_.writeSplitFixed64(r(e[i]),n(e[i]));this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(t,e,r,n){if(e!=null){t=this.beginDelimited_(t);for(var i=0;i<e.length;i++)this.encoder_.writeSplitVarint64(r(e[i]),n(e[i]));this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(t,e,r,n){if(e!=null){t=this.beginDelimited_(t);for(var i=this.encoder_,o=0;o<e.length;o++)jspb.utils.toZigzag64(r(e[o]),n(e[o]),(function(s,p){i.writeSplitVarint64(s>>>0,p>>>0)}));this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++){var n=jspb.arith.Int64.fromString(e[r]);this.encoder_.writeSplitVarint64(n.lo,n.hi)}this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedUint32=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeUnsignedVarint32(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeUnsignedVarint32(parseInt(e[r],10));this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedUint64=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeUnsignedVarint64(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++){var n=jspb.arith.UInt64.fromString(e[r]);this.encoder_.writeSplitVarint64(n.lo,n.hi)}this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedSint32=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeZigzagVarint32(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeZigzagVarint64(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(e[r]));this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeZigzagVarintHash64(e[r]);this.endDelimited_(t)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),t=0;t<e.length;t++)this.encoder_.writeUint32(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++)this.encoder_.writeUint64(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++){var r=jspb.arith.UInt64.fromString(e[t]);this.encoder_.writeSplitFixed64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),t=0;t<e.length;t++)this.encoder_.writeInt32(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++)this.encoder_.writeInt64(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++)this.encoder_.writeInt64String(e[t])},jspb.BinaryWriter.prototype.writePackedFloat=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*e.length),t=0;t<e.length;t++)this.encoder_.writeFloat(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++)this.encoder_.writeDouble(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(e.length),t=0;t<e.length;t++)this.encoder_.writeBool(e[t])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeEnum(e[r]);this.endDelimited_(t)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(t,e){if(e!=null&&e.length)for(this.writeFieldHeader_(t,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*e.length),t=0;t<e.length;t++)this.encoder_.writeFixedHash64(e[t])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(t,e){if(e!=null&&e.length){t=this.beginDelimited_(t);for(var r=0;r<e.length;r++)this.encoder_.writeVarintHash64(e[r]);this.endDelimited_(t)}},jspb.Map=function(t,e){this.arr_=t,this.valueCtor_=e,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var t=0;t<this.arr_.length;t++){var e=this.arr_[t],r=e[0];this.map_[r.toString()]=new jspb.Map.Entry_(r,e[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var t,e=this.map_;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var r=e[t].valueWrapper;r&&r.toArray()}}}else{for(this.arr_.length=0,(e=this.stringKeys_()).sort(),t=0;t<e.length;t++){var n=this.map_[e[t]];(r=n.valueWrapper)&&r.toArray(),this.arr_.push([n.key,n.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(t,e){for(var r=this.toArray(),n=[],i=0;i<r.length;i++){var o=this.map_[r[i][0].toString()];this.wrapEntry_(o);var s=o.valueWrapper;s?(jspb.asserts.assert(e),n.push([o.key,e(t,s)])):n.push([o.key,o.value])}return n},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(t,e,r){e=new jspb.Map([],e);for(var n=0;n<t.length;n++){var i=t[n][0],o=r(t[n][1]);e.set(i,o)}return e},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(t){this.idx_=0,this.arr_=t},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol<"u"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(t){t=t.toString();var e=this.map_.hasOwnProperty(t);return delete this.map_[t],this.arrClean=!1,e},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var t=[],e=this.stringKeys_();e.sort();for(var r=0;r<e.length;r++){var n=this.map_[e[r]];t.push([n.key,n.value])}return t},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var t=[],e=this.stringKeys_();e.sort();for(var r=0;r<e.length;r++){var n=this.map_[e[r]];t.push([n.key,this.wrapEntry_(n)])}return new jspb.Map.ArrayIteratorIterable_(t)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var t=[],e=this.stringKeys_();e.sort();for(var r=0;r<e.length;r++)t.push(this.map_[e[r]].key);return new jspb.Map.ArrayIteratorIterable_(t)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var t=[],e=this.stringKeys_();e.sort();for(var r=0;r<e.length;r++)t.push(this.wrapEntry_(this.map_[e[r]]));return new jspb.Map.ArrayIteratorIterable_(t)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(t,e){var r=this.stringKeys_();r.sort();for(var n=0;n<r.length;n++){var i=this.map_[r[n]];t.call(e,this.wrapEntry_(i),i.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(t,e){var r=new jspb.Map.Entry_(t);return this.valueCtor_?(r.valueWrapper=e,r.value=e.toArray()):r.value=e,this.map_[t.toString()]=r,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(t){return this.valueCtor_?(t.valueWrapper||(t.valueWrapper=new this.valueCtor_(t.value)),t.valueWrapper):t.value},jspb.Map.prototype.get=function(t){if(t=this.map_[t.toString()])return this.wrapEntry_(t)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(t){return t.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(t,e,r,n,i){var o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++){var p=this.map_[o[s]];e.beginSubMessage(t),r.call(e,1,p.key),this.valueCtor_?n.call(e,2,this.wrapEntry_(p),i):n.call(e,2,p.value),e.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(t,e,r,n,i,o,s){for(;e.nextField()&&!e.isEndGroup();){var p=e.getFieldNumber();p==1?o=r.call(e):p==2&&(t.valueCtor_?(jspb.asserts.assert(i),s||(s=new t.valueCtor_),n.call(e,s,i)):s=n.call(e))}jspb.asserts.assert(o!=null),jspb.asserts.assert(s!=null),t.set(o,s)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var t,e=this.map_,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r},jspb.Map.Entry_=function(t,e){this.key=t,this.value=e,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(t,e,r,n,i){this.fieldIndex=t,this.fieldName=e,this.ctor=r,this.toObjectFn=n,this.isRepeated=i},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(t,e,r,n,i,o){this.fieldInfo=t,this.binaryReaderFn=e,this.binaryWriterFn=r,this.binaryMessageSerializeFn=n,this.binaryMessageDeserializeFn=i,this.isPacked=o},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(t,e){return e+t.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(t,e){return e-t.arrayIndexOffset_},jspb.Message.initialize=function(t,e,r,n,i,o){if(t.wrappers_=null,e||(e=r?[r]:[]),t.messageId_=r?String(r):void 0,t.arrayIndexOffset_=r===0?-1:0,t.array=e,jspb.Message.initPivotAndExtensionObject_(t,n),t.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(t.repeatedFields=i),i)for(e=0;e<i.length;e++)(r=i[e])<t.pivot_?(r=jspb.Message.getIndex_(t,r),t.array[r]=t.array[r]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(t),t.extensionObject_[r]=t.extensionObject_[r]||jspb.Message.EMPTY_LIST_SENTINEL_);if(o&&o.length)for(e=0;e<o.length;e++)jspb.Message.computeOneofCase(t,o[e])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(t){return jspb.Message.ASSUME_LOCAL_ARRAYS?t instanceof Array:Array.isArray(t)},jspb.Message.isExtensionObject_=function(t){return!(t===null||typeof t!="object"||jspb.Message.isArray_(t)||jspb.Message.SUPPORTS_UINT8ARRAY_&&t instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(t,e){var r=t.array.length,n=-1;if(r&&(n=r-1,r=t.array[n],jspb.Message.isExtensionObject_(r)))return t.pivot_=jspb.Message.getFieldNumber_(t,n),void(t.extensionObject_=r);-1<e?(t.pivot_=Math.max(e,jspb.Message.getFieldNumber_(t,n+1)),t.extensionObject_=null):t.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(t){var e=jspb.Message.getIndex_(t,t.pivot_);t.array[e]||(t.extensionObject_=t.array[e]={})},jspb.Message.toObjectList=function(t,e,r){for(var n=[],i=0;i<t.length;i++)n[i]=e.call(t[i],r,t[i]);return n},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(t,e,r,n,i){for(var o in r){var s=r[o],p=n.call(t,s);if(p!=null){for(var l in s.fieldName)if(s.fieldName.hasOwnProperty(l))break;e[l]=s.toObjectFn?s.isRepeated?jspb.Message.toObjectList(p,s.toObjectFn,i):s.toObjectFn(i,p):p}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(t,e,r,n){for(var i in r){var o=r[i],s=o.fieldInfo;if(!o.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var p=n.call(t,s);if(p!=null)if(s.isMessageType()){if(!o.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");o.binaryWriterFn.call(e,s.fieldIndex,p,o.binaryMessageSerializeFn)}else o.binaryWriterFn.call(e,s.fieldIndex,p)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(t,e,r,n,i){var o=r[e.getFieldNumber()];if(o){if(r=o.fieldInfo,!o.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(r.isMessageType()){var s=new r.ctor;o.binaryReaderFn.call(e,s,o.binaryMessageDeserializeFn)}else s=o.binaryReaderFn.call(e);r.isRepeated&&!o.isPacked?(e=n.call(t,r))?e.push(s):i.call(t,r,[s]):i.call(t,r,s)}else e.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(t,e){if(e<t.pivot_){e=jspb.Message.getIndex_(t,e);var r=t.array[e];return r===jspb.Message.EMPTY_LIST_SENTINEL_?t.array[e]=[]:r}if(t.extensionObject_)return(r=t.extensionObject_[e])===jspb.Message.EMPTY_LIST_SENTINEL_?t.extensionObject_[e]=[]:r},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(t,e){return jspb.Message.getField(t,e)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(t,e){return(t=jspb.Message.getField(t,e))==null?t:+t},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(t,e){return(t=jspb.Message.getField(t,e))==null?t:!!t},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(t,e){var r=jspb.Message.getRepeatedField(t,e);if(t.convertedPrimitiveFields_||(t.convertedPrimitiveFields_={}),!t.convertedPrimitiveFields_[e]){for(var n=0;n<r.length;n++)r[n]=+r[n];t.convertedPrimitiveFields_[e]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(t,e){var r=jspb.Message.getRepeatedField(t,e);if(t.convertedPrimitiveFields_||(t.convertedPrimitiveFields_={}),!t.convertedPrimitiveFields_[e]){for(var n=0;n<r.length;n++)r[n]=!!r[n];t.convertedPrimitiveFields_[e]=!0}return r},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(t){return t==null||typeof t=="string"?t:jspb.Message.SUPPORTS_UINT8ARRAY_&&t instanceof Uint8Array?goog.crypt.base64.encodeByteArray(t):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(t)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(t){return t==null||t instanceof Uint8Array?t:typeof t=="string"?goog.crypt.base64.decodeStringToUint8Array(t):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(t)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(t){return jspb.Message.assertConsistentTypes_(t),t.length&&typeof t[0]!="string"?goog.array.map(t,jspb.Message.bytesAsB64):t},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(t){return jspb.Message.assertConsistentTypes_(t),!t.length||t[0]instanceof Uint8Array?t:goog.array.map(t,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(t){if(goog.DEBUG&&t&&1<t.length){var e=goog.typeOf(t[0]);goog.array.forEach(t,(function(r){goog.typeOf(r)!=e&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(r)+" expected "+e)}))}},jspb.Message.getFieldWithDefault=function(t,e,r){return(t=jspb.Message.getField(t,e))==null?r:t},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(t,e,r){return(t=jspb.Message.getBooleanField(t,e))==null?r:t},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(t,e,r){return(t=jspb.Message.getOptionalFloatingPointField(t,e))==null?r:t},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(t,e,r,n){if(t.wrappers_||(t.wrappers_={}),e in t.wrappers_)return t.wrappers_[e];var i=jspb.Message.getField(t,e);if(!i){if(r)return;i=[],jspb.Message.setField(t,e,i)}return t.wrappers_[e]=new jspb.Map(i,n)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(t,e,r){return jspb.asserts.assertInstanceof(t,jspb.Message),e<t.pivot_?t.array[jspb.Message.getIndex_(t,e)]=r:(jspb.Message.maybeInitEmptyExtensionObject_(t),t.extensionObject_[e]=r),t},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(t,e,r){return jspb.Message.setFieldIgnoringDefault_(t,e,r,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(t,e,r,n){return jspb.asserts.assertInstanceof(t,jspb.Message),r!==n?jspb.Message.setField(t,e,r):e<t.pivot_?t.array[jspb.Message.getIndex_(t,e)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(t),delete t.extensionObject_[e]),t},jspb.Message.addToRepeatedField=function(t,e,r,n){return jspb.asserts.assertInstanceof(t,jspb.Message),e=jspb.Message.getRepeatedField(t,e),n!=null?e.splice(n,0,r):e.push(r),t},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(t,e,r,n){return jspb.asserts.assertInstanceof(t,jspb.Message),(r=jspb.Message.computeOneofCase(t,r))&&r!==e&&n!==void 0&&(t.wrappers_&&r in t.wrappers_&&(t.wrappers_[r]=void 0),jspb.Message.setField(t,r,void 0)),jspb.Message.setField(t,e,n)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(t,e){for(var r,n,i=0;i<e.length;i++){var o=e[i],s=jspb.Message.getField(t,o);s!=null&&(r=o,n=s,jspb.Message.setField(t,o,void 0))}return r?(jspb.Message.setField(t,r,n),r):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(t,e,r,n){if(t.wrappers_||(t.wrappers_={}),!t.wrappers_[r]){var i=jspb.Message.getField(t,r);(n||i)&&(t.wrappers_[r]=new e(i))}return t.wrappers_[r]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(t,e,r){return jspb.Message.wrapRepeatedField_(t,e,r),(e=t.wrappers_[r])==jspb.Message.EMPTY_LIST_SENTINEL_&&(e=t.wrappers_[r]=[]),e},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(t,e,r){if(t.wrappers_||(t.wrappers_={}),!t.wrappers_[r]){for(var n=jspb.Message.getRepeatedField(t,r),i=[],o=0;o<n.length;o++)i[o]=new e(n[o]);t.wrappers_[r]=i}},jspb.Message.setWrapperField=function(t,e,r){jspb.asserts.assertInstanceof(t,jspb.Message),t.wrappers_||(t.wrappers_={});var n=r&&r.toArray();return t.wrappers_[e]=r,jspb.Message.setField(t,e,n)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(t,e,r,n){jspb.asserts.assertInstanceof(t,jspb.Message),t.wrappers_||(t.wrappers_={});var i=n&&n.toArray();return t.wrappers_[e]=n,jspb.Message.setOneofField(t,e,r,i)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(t,e,r){jspb.asserts.assertInstanceof(t,jspb.Message),t.wrappers_||(t.wrappers_={}),r=r||[];for(var n=[],i=0;i<r.length;i++)n[i]=r[i].toArray();return t.wrappers_[e]=r,jspb.Message.setField(t,e,n)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(t,e,r,n,i){jspb.Message.wrapRepeatedField_(t,n,e);var o=t.wrappers_[e];return o||(o=t.wrappers_[e]=[]),r=r||new n,t=jspb.Message.getRepeatedField(t,e),i!=null?(o.splice(i,0,r),t.splice(i,0,r.toArray())):(o.push(r),t.push(r.toArray())),r},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(t,e,r,n){for(var i={},o=0;o<t.length;o++)i[e.call(t[o])]=r?r.call(t[o],n,t[o]):t[o];return i},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var t in this.wrappers_){var e=this.wrappers_[t];if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&e[r].toArray();else e&&e.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(t){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var e=t.fieldIndex;if(t.isRepeated){if(t.isMessageType())return this.wrappers_[e]||(this.wrappers_[e]=goog.array.map(this.extensionObject_[e]||[],(function(r){return new t.ctor(r)}))),this.wrappers_[e]}else if(t.isMessageType())return!this.wrappers_[e]&&this.extensionObject_[e]&&(this.wrappers_[e]=new t.ctor(this.extensionObject_[e])),this.wrappers_[e];return this.extensionObject_[e]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(t,e){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var r=t.fieldIndex;return t.isRepeated?(e=e||[],t.isMessageType()?(this.wrappers_[r]=e,this.extensionObject_[r]=goog.array.map(e,(function(n){return n.toArray()}))):this.extensionObject_[r]=e):t.isMessageType()?(this.wrappers_[r]=e,this.extensionObject_[r]=e&&e.toArray()):this.extensionObject_[r]=e,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(t,e){if(!(t instanceof e.constructor))throw Error("Messages have different types.");var r=t.toArray();e=e.toArray();var n=[],i=0,o=r.length>e.length?r.length:e.length;for(t.getJsPbMessageId()&&(n[0]=t.getJsPbMessageId(),i=1);i<o;i++)jspb.Message.compareFields(r[i],e[i])||(n[i]=e[i]);return new t.constructor(n)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(t,e){return t==e||!(!t||!e)&&t instanceof e.constructor&&jspb.Message.compareFields(t.toArray(),e.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(t,e){t=t||{},e=e||{};var r,n={};for(r in t)n[r]=0;for(r in e)n[r]=0;for(r in n)if(!jspb.Message.compareFields(t[r],e[r]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(t,e){if(t==e)return!0;if(!goog.isObject(t)||!goog.isObject(e))return!!(typeof t=="number"&&isNaN(t)||typeof e=="number"&&isNaN(e))&&String(t)==String(e);if(t.constructor!=e.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&t.constructor===Uint8Array){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!=e[r])return!1;return!0}if(t.constructor===Array){var n=void 0,i=void 0,o=Math.max(t.length,e.length);for(r=0;r<o;r++){var s=t[r],p=e[r];if(s&&s.constructor==Object&&(jspb.asserts.assert(n===void 0),jspb.asserts.assert(r===t.length-1),n=s,s=void 0),p&&p.constructor==Object&&(jspb.asserts.assert(i===void 0),jspb.asserts.assert(r===e.length-1),i=p,p=void 0),!jspb.Message.compareFields(s,p))return!1}return!n&&!i||(n=n||{},i=i||{},jspb.Message.compareExtensions(n,i))}if(t.constructor===Object)return jspb.Message.compareExtensions(t,e);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(t){return jspb.Message.cloneMessage(t)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(t){return new t.constructor(jspb.Message.clone_(t.toArray()))},jspb.Message.copyInto=function(t,e){jspb.asserts.assertInstanceof(t,jspb.Message),jspb.asserts.assertInstanceof(e,jspb.Message),jspb.asserts.assert(t.constructor==e.constructor,"Copy source and target message should have the same type."),t=jspb.Message.clone(t);for(var r=e.toArray(),n=t.toArray(),i=r.length=0;i<n.length;i++)r[i]=n[i];e.wrappers_=t.wrappers_,e.extensionObject_=t.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(t){if(Array.isArray(t)){for(var e=Array(t.length),r=0;r<t.length;r++){var n=t[r];n!=null&&(e[r]=typeof n=="object"?jspb.Message.clone_(jspb.asserts.assert(n)):n)}return e}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&t instanceof Uint8Array)return new Uint8Array(t);for(r in e={},t)(n=t[r])!=null&&(e[r]=typeof n=="object"?jspb.Message.clone_(jspb.asserts.assert(n)):n);return e},jspb.Message.registerMessageType=function(t,e){e.messageId=t},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf})(Ve);ht={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.CalculatorOptions",null,n),proto.mediapipe.CalculatorOptions=function(i){e.Message.initialize(this,i,0,2,null,null)},r.inherits(proto.mediapipe.CalculatorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorOptions.displayName="proto.mediapipe.CalculatorOptions"),proto.mediapipe.CalculatorOptions.extensions={},proto.mediapipe.CalculatorOptions.extensionsBinary={},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorOptions.prototype.toObject=function(i){return proto.mediapipe.CalculatorOptions.toObject(i,this)},proto.mediapipe.CalculatorOptions.toObject=function(i,o){var s,p={mergeFields:(s=e.Message.getBooleanField(o,1))==null?void 0:s};return e.Message.toObjectExtension(o,p,proto.mediapipe.CalculatorOptions.extensions,proto.mediapipe.CalculatorOptions.prototype.getExtension,i),i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.CalculatorOptions.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.CalculatorOptions;return proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader(s,o)},proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=o.readBool();i.setMergeFields(s)}else e.Message.readBinaryExtension(i,o,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension,proto.mediapipe.CalculatorOptions.prototype.setExtension);return i},proto.mediapipe.CalculatorOptions.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.CalculatorOptions.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.CalculatorOptions.serializeBinaryToWriter=function(i,o){var s;(s=e.Message.getField(i,1))!=null&&o.writeBool(1,s),e.Message.serializeBinaryExtensions(i,o,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension)},proto.mediapipe.CalculatorOptions.prototype.getMergeFields=function(){return e.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.CalculatorOptions.prototype.setMergeFields=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.CalculatorOptions.prototype.clearMergeFields=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.CalculatorOptions.prototype.hasMergeFields=function(){return e.Message.getField(this,1)!=null},r.object.extend(t,proto.mediapipe)})(ht);RB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.google.protobuf.Any",null,n),proto.google.protobuf.Any=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.google.protobuf.Any,e.Message),r.DEBUG&&!COMPILED&&(proto.google.protobuf.Any.displayName="proto.google.protobuf.Any"),e.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Any.prototype.toObject=function(i){return proto.google.protobuf.Any.toObject(i,this)},proto.google.protobuf.Any.toObject=function(i,o){var s={typeUrl:e.Message.getFieldWithDefault(o,1,""),value:o.getValue_asB64()};return i&&(s.$jspbMessageInstance=o),s}),proto.google.protobuf.Any.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.google.protobuf.Any;return proto.google.protobuf.Any.deserializeBinaryFromReader(s,o)},proto.google.protobuf.Any.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readString();i.setTypeUrl(s);break;case 2:s=o.readBytes(),i.setValue(s);break;default:o.skipField()}return i},proto.google.protobuf.Any.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.google.protobuf.Any.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.google.protobuf.Any.serializeBinaryToWriter=function(i,o){var s=void 0;(s=i.getTypeUrl()).length>0&&o.writeString(1,s),(s=i.getValue_asU8()).length>0&&o.writeBytes(2,s)},proto.google.protobuf.Any.prototype.getTypeUrl=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.Any.prototype.setTypeUrl=function(i){return e.Message.setProto3StringField(this,1,i)},proto.google.protobuf.Any.prototype.getValue=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.Any.prototype.getValue_asB64=function(){return e.Message.bytesAsB64(this.getValue())},proto.google.protobuf.Any.prototype.getValue_asU8=function(){return e.Message.bytesAsU8(this.getValue())},proto.google.protobuf.Any.prototype.setValue=function(i){return e.Message.setProto3BytesField(this,2,i)},r.object.extend(t,proto.google.protobuf),proto.google.protobuf.Any.prototype.getTypeName=function(){return this.getTypeUrl().split("/").pop()},proto.google.protobuf.Any.prototype.pack=function(i,o,s){s||(s="type.googleapis.com/"),s.substr(-1)!="/"?this.setTypeUrl(s+"/"+o):this.setTypeUrl(s+o),this.setValue(i)},proto.google.protobuf.Any.prototype.unpack=function(i,o){return this.getTypeName()==o?i(this.getValue_asU8()):null}})(RB);Yg={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.MediaPipeOptions",null,n),proto.mediapipe.MediaPipeOptions=function(i){e.Message.initialize(this,i,0,1,null,null)},r.inherits(proto.mediapipe.MediaPipeOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.MediaPipeOptions.displayName="proto.mediapipe.MediaPipeOptions"),proto.mediapipe.MediaPipeOptions.extensions={},proto.mediapipe.MediaPipeOptions.extensionsBinary={},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MediaPipeOptions.prototype.toObject=function(i){return proto.mediapipe.MediaPipeOptions.toObject(i,this)},proto.mediapipe.MediaPipeOptions.toObject=function(i,o){var s={};return e.Message.toObjectExtension(o,s,proto.mediapipe.MediaPipeOptions.extensions,proto.mediapipe.MediaPipeOptions.prototype.getExtension,i),i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.MediaPipeOptions.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.MediaPipeOptions;return proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader(s,o)},proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)o.getFieldNumber(),e.Message.readBinaryExtension(i,o,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension,proto.mediapipe.MediaPipeOptions.prototype.setExtension);return i},proto.mediapipe.MediaPipeOptions.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter=function(i,o){e.Message.serializeBinaryExtensions(i,o,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension)},r.object.extend(t,proto.mediapipe)})(Yg);BB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.PacketFactoryConfig",null,n),r.exportSymbol("proto.mediapipe.PacketFactoryOptions",null,n),r.exportSymbol("proto.mediapipe.PacketManagerConfig",null,n),proto.mediapipe.PacketFactoryOptions=function(i){e.Message.initialize(this,i,0,1,null,null)},r.inherits(proto.mediapipe.PacketFactoryOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryOptions.displayName="proto.mediapipe.PacketFactoryOptions"),proto.mediapipe.PacketFactoryOptions.extensions={},proto.mediapipe.PacketFactoryOptions.extensionsBinary={},proto.mediapipe.PacketFactoryConfig=function(i){e.Message.initialize(this,i,0,500,null,null)},r.inherits(proto.mediapipe.PacketFactoryConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryConfig.displayName="proto.mediapipe.PacketFactoryConfig"),proto.mediapipe.PacketManagerConfig=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.PacketManagerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.PacketManagerConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketManagerConfig.displayName="proto.mediapipe.PacketManagerConfig"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryOptions.prototype.toObject=function(i){return proto.mediapipe.PacketFactoryOptions.toObject(i,this)},proto.mediapipe.PacketFactoryOptions.toObject=function(i,o){var s={};return e.Message.toObjectExtension(o,s,proto.mediapipe.PacketFactoryOptions.extensions,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,i),i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.PacketFactoryOptions.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.PacketFactoryOptions;return proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader(s,o)},proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)o.getFieldNumber(),e.Message.readBinaryExtension(i,o,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,proto.mediapipe.PacketFactoryOptions.prototype.setExtension);return i},proto.mediapipe.PacketFactoryOptions.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter=function(i,o){e.Message.serializeBinaryExtensions(i,o,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension)},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryConfig.prototype.toObject=function(i){return proto.mediapipe.PacketFactoryConfig.toObject(i,this)},proto.mediapipe.PacketFactoryConfig.toObject=function(i,o){var s,p={packetFactory:(s=e.Message.getField(o,1))==null?void 0:s,outputSidePacket:(s=e.Message.getField(o,2))==null?void 0:s,externalOutput:(s=e.Message.getField(o,1002))==null?void 0:s,options:(s=o.getOptions())&&proto.mediapipe.PacketFactoryOptions.toObject(i,s)};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.PacketFactoryConfig.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.PacketFactoryConfig;return proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader(s,o)},proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readString();i.setPacketFactory(s);break;case 2:s=o.readString(),i.setOutputSidePacket(s);break;case 1002:s=o.readString(),i.setExternalOutput(s);break;case 3:s=new proto.mediapipe.PacketFactoryOptions,o.readMessage(s,proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader),i.setOptions(s);break;default:o.skipField()}return i},proto.mediapipe.PacketFactoryConfig.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeString(1,s),(s=e.Message.getField(i,2))!=null&&o.writeString(2,s),(s=e.Message.getField(i,1002))!=null&&o.writeString(1002,s),(s=i.getOptions())!=null&&o.writeMessage(3,s,proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter)},proto.mediapipe.PacketFactoryConfig.prototype.getPacketFactory=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketFactoryConfig.prototype.setPacketFactory=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.PacketFactoryConfig.prototype.clearPacketFactory=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasPacketFactory=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOutputSidePacket=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.PacketFactoryConfig.prototype.setOutputSidePacket=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.PacketFactoryConfig.prototype.clearOutputSidePacket=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOutputSidePacket=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getExternalOutput=function(){return e.Message.getFieldWithDefault(this,1002,"")},proto.mediapipe.PacketFactoryConfig.prototype.setExternalOutput=function(i){return e.Message.setField(this,1002,i)},proto.mediapipe.PacketFactoryConfig.prototype.clearExternalOutput=function(){return e.Message.setField(this,1002,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasExternalOutput=function(){return e.Message.getField(this,1002)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.mediapipe.PacketFactoryOptions,3)},proto.mediapipe.PacketFactoryConfig.prototype.setOptions=function(i){return e.Message.setWrapperField(this,3,i)},proto.mediapipe.PacketFactoryConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.PacketManagerConfig.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketManagerConfig.prototype.toObject=function(i){return proto.mediapipe.PacketManagerConfig.toObject(i,this)},proto.mediapipe.PacketManagerConfig.toObject=function(i,o){var s={packetList:e.Message.toObjectList(o.getPacketList(),proto.mediapipe.PacketFactoryConfig.toObject,i)};return i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.PacketManagerConfig.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.PacketManagerConfig;return proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader(s,o)},proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=new proto.mediapipe.PacketFactoryConfig;o.readMessage(s,proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader),i.addPacket(s)}else o.skipField();return i},proto.mediapipe.PacketManagerConfig.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter=function(i,o){var s;(s=i.getPacketList()).length>0&&o.writeRepeatedMessage(1,s,proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter)},proto.mediapipe.PacketManagerConfig.prototype.getPacketList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.PacketFactoryConfig,1)},proto.mediapipe.PacketManagerConfig.prototype.setPacketList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.PacketManagerConfig.prototype.addPacket=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.PacketFactoryConfig,o)},proto.mediapipe.PacketManagerConfig.prototype.clearPacketList=function(){return this.setPacketList([])},r.object.extend(t,proto.mediapipe)})(BB);xB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.PacketGeneratorConfig",null,n),r.exportSymbol("proto.mediapipe.PacketGeneratorOptions",null,n),proto.mediapipe.PacketGeneratorOptions=function(i){e.Message.initialize(this,i,0,2,null,null)},r.inherits(proto.mediapipe.PacketGeneratorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorOptions.displayName="proto.mediapipe.PacketGeneratorOptions"),proto.mediapipe.PacketGeneratorOptions.extensions={},proto.mediapipe.PacketGeneratorOptions.extensionsBinary={},proto.mediapipe.PacketGeneratorConfig=function(i){e.Message.initialize(this,i,0,500,proto.mediapipe.PacketGeneratorConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.PacketGeneratorConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorConfig.displayName="proto.mediapipe.PacketGeneratorConfig"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorOptions.prototype.toObject=function(i){return proto.mediapipe.PacketGeneratorOptions.toObject(i,this)},proto.mediapipe.PacketGeneratorOptions.toObject=function(i,o){var s={mergeFields:e.Message.getBooleanFieldWithDefault(o,1,!0)};return e.Message.toObjectExtension(o,s,proto.mediapipe.PacketGeneratorOptions.extensions,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,i),i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.PacketGeneratorOptions.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.PacketGeneratorOptions;return proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader(s,o)},proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=o.readBool();i.setMergeFields(s)}else e.Message.readBinaryExtension(i,o,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,proto.mediapipe.PacketGeneratorOptions.prototype.setExtension);return i},proto.mediapipe.PacketGeneratorOptions.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter=function(i,o){var s;(s=e.Message.getField(i,1))!=null&&o.writeBool(1,s),e.Message.serializeBinaryExtensions(i,o,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension)},proto.mediapipe.PacketGeneratorOptions.prototype.getMergeFields=function(){return e.Message.getBooleanFieldWithDefault(this,1,!0)},proto.mediapipe.PacketGeneratorOptions.prototype.setMergeFields=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.PacketGeneratorOptions.prototype.clearMergeFields=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorOptions.prototype.hasMergeFields=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.repeatedFields_=[2,1002,3,1003],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorConfig.prototype.toObject=function(i){return proto.mediapipe.PacketGeneratorConfig.toObject(i,this)},proto.mediapipe.PacketGeneratorConfig.toObject=function(i,o){var s,p={packetGenerator:(s=e.Message.getField(o,1))==null?void 0:s,inputSidePacketList:(s=e.Message.getRepeatedField(o,2))==null?void 0:s,externalInputList:(s=e.Message.getRepeatedField(o,1002))==null?void 0:s,outputSidePacketList:(s=e.Message.getRepeatedField(o,3))==null?void 0:s,externalOutputList:(s=e.Message.getRepeatedField(o,1003))==null?void 0:s,options:(s=o.getOptions())&&proto.mediapipe.PacketGeneratorOptions.toObject(i,s)};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.PacketGeneratorConfig.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.PacketGeneratorConfig;return proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader(s,o)},proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readString();i.setPacketGenerator(s);break;case 2:s=o.readString(),i.addInputSidePacket(s);break;case 1002:s=o.readString(),i.addExternalInput(s);break;case 3:s=o.readString(),i.addOutputSidePacket(s);break;case 1003:s=o.readString(),i.addExternalOutput(s);break;case 4:s=new proto.mediapipe.PacketGeneratorOptions,o.readMessage(s,proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader),i.setOptions(s);break;default:o.skipField()}return i},proto.mediapipe.PacketGeneratorConfig.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeString(1,s),(s=i.getInputSidePacketList()).length>0&&o.writeRepeatedString(2,s),(s=i.getExternalInputList()).length>0&&o.writeRepeatedString(1002,s),(s=i.getOutputSidePacketList()).length>0&&o.writeRepeatedString(3,s),(s=i.getExternalOutputList()).length>0&&o.writeRepeatedString(1003,s),(s=i.getOptions())!=null&&o.writeMessage(4,s,proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter)},proto.mediapipe.PacketGeneratorConfig.prototype.getPacketGenerator=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketGeneratorConfig.prototype.setPacketGenerator=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.PacketGeneratorConfig.prototype.clearPacketGenerator=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasPacketGenerator=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.prototype.getInputSidePacketList=function(){return e.Message.getRepeatedField(this,2)},proto.mediapipe.PacketGeneratorConfig.prototype.setInputSidePacketList=function(i){return e.Message.setField(this,2,i||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addInputSidePacket=function(i,o){return e.Message.addToRepeatedField(this,2,i,o)},proto.mediapipe.PacketGeneratorConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalInputList=function(){return e.Message.getRepeatedField(this,1002)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalInputList=function(i){return e.Message.setField(this,1002,i||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalInput=function(i,o){return e.Message.addToRepeatedField(this,1002,i,o)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOutputSidePacketList=function(){return e.Message.getRepeatedField(this,3)},proto.mediapipe.PacketGeneratorConfig.prototype.setOutputSidePacketList=function(i){return e.Message.setField(this,3,i||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addOutputSidePacket=function(i,o){return e.Message.addToRepeatedField(this,3,i,o)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalOutputList=function(){return e.Message.getRepeatedField(this,1003)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalOutputList=function(i){return e.Message.setField(this,1003,i||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalOutput=function(i,o){return e.Message.addToRepeatedField(this,1003,i,o)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalOutputList=function(){return this.setExternalOutputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,proto.mediapipe.PacketGeneratorOptions,4)},proto.mediapipe.PacketGeneratorConfig.prototype.setOptions=function(i){return e.Message.setWrapperField(this,4,i)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasOptions=function(){return e.Message.getField(this,4)!=null},r.object.extend(t,proto.mediapipe)})(xB);MB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=Yg;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.StatusHandlerConfig",null,n),proto.mediapipe.StatusHandlerConfig=function(o){e.Message.initialize(this,o,0,500,proto.mediapipe.StatusHandlerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.StatusHandlerConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.StatusHandlerConfig.displayName="proto.mediapipe.StatusHandlerConfig"),proto.mediapipe.StatusHandlerConfig.repeatedFields_=[2,1002],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.StatusHandlerConfig.prototype.toObject=function(o){return proto.mediapipe.StatusHandlerConfig.toObject(o,this)},proto.mediapipe.StatusHandlerConfig.toObject=function(o,s){var p,l={statusHandler:(p=e.Message.getField(s,1))==null?void 0:p,inputSidePacketList:(p=e.Message.getRepeatedField(s,2))==null?void 0:p,externalInputList:(p=e.Message.getRepeatedField(s,1002))==null?void 0:p,options:(p=s.getOptions())&&i.MediaPipeOptions.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.StatusHandlerConfig.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.StatusHandlerConfig;return proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader(p,s)},proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readString();o.setStatusHandler(p);break;case 2:p=s.readString(),o.addInputSidePacket(p);break;case 1002:p=s.readString(),o.addExternalInput(p);break;case 3:p=new i.MediaPipeOptions,s.readMessage(p,i.MediaPipeOptions.deserializeBinaryFromReader),o.setOptions(p);break;default:s.skipField()}return o},proto.mediapipe.StatusHandlerConfig.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeString(1,p),(p=o.getInputSidePacketList()).length>0&&s.writeRepeatedString(2,p),(p=o.getExternalInputList()).length>0&&s.writeRepeatedString(1002,p),(p=o.getOptions())!=null&&s.writeMessage(3,p,i.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.StatusHandlerConfig.prototype.getStatusHandler=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.StatusHandlerConfig.prototype.setStatusHandler=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.StatusHandlerConfig.prototype.clearStatusHandler=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasStatusHandler=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.StatusHandlerConfig.prototype.getInputSidePacketList=function(){return e.Message.getRepeatedField(this,2)},proto.mediapipe.StatusHandlerConfig.prototype.setInputSidePacketList=function(o){return e.Message.setField(this,2,o||[])},proto.mediapipe.StatusHandlerConfig.prototype.addInputSidePacket=function(o,s){return e.Message.addToRepeatedField(this,2,o,s)},proto.mediapipe.StatusHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.StatusHandlerConfig.prototype.getExternalInputList=function(){return e.Message.getRepeatedField(this,1002)},proto.mediapipe.StatusHandlerConfig.prototype.setExternalInputList=function(o){return e.Message.setField(this,1002,o||[])},proto.mediapipe.StatusHandlerConfig.prototype.addExternalInput=function(o,s){return e.Message.addToRepeatedField(this,1002,o,s)},proto.mediapipe.StatusHandlerConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.StatusHandlerConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,i.MediaPipeOptions,3)},proto.mediapipe.StatusHandlerConfig.prototype.setOptions=function(o){return e.Message.setWrapperField(this,3,o)},proto.mediapipe.StatusHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},r.object.extend(t,proto.mediapipe)})(MB);qR={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=Yg;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.InputStreamHandlerConfig",null,n),r.exportSymbol("proto.mediapipe.OutputStreamHandlerConfig",null,n),proto.mediapipe.InputStreamHandlerConfig=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.InputStreamHandlerConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamHandlerConfig.displayName="proto.mediapipe.InputStreamHandlerConfig"),proto.mediapipe.OutputStreamHandlerConfig=function(o){e.Message.initialize(this,o,0,-1,proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.OutputStreamHandlerConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.OutputStreamHandlerConfig.displayName="proto.mediapipe.OutputStreamHandlerConfig"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamHandlerConfig.prototype.toObject=function(o){return proto.mediapipe.InputStreamHandlerConfig.toObject(o,this)},proto.mediapipe.InputStreamHandlerConfig.toObject=function(o,s){var p,l={inputStreamHandler:e.Message.getFieldWithDefault(s,1,"DefaultInputStreamHandler"),options:(p=s.getOptions())&&i.MediaPipeOptions.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.InputStreamHandlerConfig.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.InputStreamHandlerConfig;return proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader(p,s)},proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readString();o.setInputStreamHandler(p);break;case 3:p=new i.MediaPipeOptions,s.readMessage(p,i.MediaPipeOptions.deserializeBinaryFromReader),o.setOptions(p);break;default:s.skipField()}return o},proto.mediapipe.InputStreamHandlerConfig.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeString(1,p),(p=o.getOptions())!=null&&s.writeMessage(3,p,i.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.InputStreamHandlerConfig.prototype.getInputStreamHandler=function(){return e.Message.getFieldWithDefault(this,1,"DefaultInputStreamHandler")},proto.mediapipe.InputStreamHandlerConfig.prototype.setInputStreamHandler=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearInputStreamHandler=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasInputStreamHandler=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InputStreamHandlerConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,i.MediaPipeOptions,3)},proto.mediapipe.InputStreamHandlerConfig.prototype.setOptions=function(o){return e.Message.setWrapperField(this,3,o)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_=[2],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.OutputStreamHandlerConfig.prototype.toObject=function(o){return proto.mediapipe.OutputStreamHandlerConfig.toObject(o,this)},proto.mediapipe.OutputStreamHandlerConfig.toObject=function(o,s){var p,l={outputStreamHandler:e.Message.getFieldWithDefault(s,1,"InOrderOutputStreamHandler"),inputSidePacketList:(p=e.Message.getRepeatedField(s,2))==null?void 0:p,options:(p=s.getOptions())&&i.MediaPipeOptions.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.OutputStreamHandlerConfig.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.OutputStreamHandlerConfig;return proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader(p,s)},proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readString();o.setOutputStreamHandler(p);break;case 2:p=s.readString(),o.addInputSidePacket(p);break;case 3:p=new i.MediaPipeOptions,s.readMessage(p,i.MediaPipeOptions.deserializeBinaryFromReader),o.setOptions(p);break;default:s.skipField()}return o},proto.mediapipe.OutputStreamHandlerConfig.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeString(1,p),(p=o.getInputSidePacketList()).length>0&&s.writeRepeatedString(2,p),(p=o.getOptions())!=null&&s.writeMessage(3,p,i.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOutputStreamHandler=function(){return e.Message.getFieldWithDefault(this,1,"InOrderOutputStreamHandler")},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOutputStreamHandler=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOutputStreamHandler=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOutputStreamHandler=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.OutputStreamHandlerConfig.prototype.getInputSidePacketList=function(){return e.Message.getRepeatedField(this,2)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setInputSidePacketList=function(o){return e.Message.setField(this,2,o||[])},proto.mediapipe.OutputStreamHandlerConfig.prototype.addInputSidePacket=function(o,s){return e.Message.addToRepeatedField(this,2,o,s)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,i.MediaPipeOptions,3)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOptions=function(o){return e.Message.setWrapperField(this,3,o)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},r.object.extend(t,proto.mediapipe)})(qR),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=ht;r.object.extend(proto,i);var o=RB;r.object.extend(proto,o);var s=Yg;r.object.extend(proto,s);var p=BB;r.object.extend(proto,p);var l=xB;r.object.extend(proto,l);var c=MB;r.object.extend(proto,c);var u=qR;r.object.extend(proto,u),r.exportSymbol("proto.mediapipe.CalculatorGraphConfig",null,n),r.exportSymbol("proto.mediapipe.CalculatorGraphConfig.Node",null,n),r.exportSymbol("proto.mediapipe.ExecutorConfig",null,n),r.exportSymbol("proto.mediapipe.InputCollection",null,n),r.exportSymbol("proto.mediapipe.InputCollection.InputType",null,n),r.exportSymbol("proto.mediapipe.InputCollectionSet",null,n),r.exportSymbol("proto.mediapipe.InputStreamInfo",null,n),r.exportSymbol("proto.mediapipe.ProfilerConfig",null,n),proto.mediapipe.ExecutorConfig=function(d){e.Message.initialize(this,d,0,-1,null,null)},r.inherits(proto.mediapipe.ExecutorConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ExecutorConfig.displayName="proto.mediapipe.ExecutorConfig"),proto.mediapipe.InputCollection=function(d){e.Message.initialize(this,d,0,500,proto.mediapipe.InputCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.InputCollection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollection.displayName="proto.mediapipe.InputCollection"),proto.mediapipe.InputCollectionSet=function(d){e.Message.initialize(this,d,0,-1,proto.mediapipe.InputCollectionSet.repeatedFields_,null)},r.inherits(proto.mediapipe.InputCollectionSet,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollectionSet.displayName="proto.mediapipe.InputCollectionSet"),proto.mediapipe.InputStreamInfo=function(d){e.Message.initialize(this,d,0,-1,null,null)},r.inherits(proto.mediapipe.InputStreamInfo,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamInfo.displayName="proto.mediapipe.InputStreamInfo"),proto.mediapipe.ProfilerConfig=function(d){e.Message.initialize(this,d,0,-1,proto.mediapipe.ProfilerConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.ProfilerConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ProfilerConfig.displayName="proto.mediapipe.ProfilerConfig"),proto.mediapipe.CalculatorGraphConfig=function(d){e.Message.initialize(this,d,0,500,proto.mediapipe.CalculatorGraphConfig.repeatedFields_,null)},r.inherits(proto.mediapipe.CalculatorGraphConfig,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.displayName="proto.mediapipe.CalculatorGraphConfig"),proto.mediapipe.CalculatorGraphConfig.Node=function(d){e.Message.initialize(this,d,0,500,proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_,null)},r.inherits(proto.mediapipe.CalculatorGraphConfig.Node,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.Node.displayName="proto.mediapipe.CalculatorGraphConfig.Node"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ExecutorConfig.prototype.toObject=function(d){return proto.mediapipe.ExecutorConfig.toObject(d,this)},proto.mediapipe.ExecutorConfig.toObject=function(d,f){var g,v={name:e.Message.getFieldWithDefault(f,1,""),type:e.Message.getFieldWithDefault(f,2,""),options:(g=f.getOptions())&&s.MediaPipeOptions.toObject(d,g)};return d&&(v.$jspbMessageInstance=f),v}),proto.mediapipe.ExecutorConfig.deserializeBinary=function(d){var f=new e.BinaryReader(d),g=new proto.mediapipe.ExecutorConfig;return proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader(g,f)},proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader=function(d,f){for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:var g=f.readString();d.setName(g);break;case 2:g=f.readString(),d.setType(g);break;case 3:g=new s.MediaPipeOptions,f.readMessage(g,s.MediaPipeOptions.deserializeBinaryFromReader),d.setOptions(g);break;default:f.skipField()}return d},proto.mediapipe.ExecutorConfig.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.ExecutorConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ExecutorConfig.serializeBinaryToWriter=function(d,f){var g=void 0;(g=d.getName()).length>0&&f.writeString(1,g),(g=d.getType()).length>0&&f.writeString(2,g),(g=d.getOptions())!=null&&f.writeMessage(3,g,s.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.ExecutorConfig.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.ExecutorConfig.prototype.setName=function(d){return e.Message.setProto3StringField(this,1,d)},proto.mediapipe.ExecutorConfig.prototype.getType=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.ExecutorConfig.prototype.setType=function(d){return e.Message.setProto3StringField(this,2,d)},proto.mediapipe.ExecutorConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,s.MediaPipeOptions,3)},proto.mediapipe.ExecutorConfig.prototype.setOptions=function(d){return e.Message.setWrapperField(this,3,d)},proto.mediapipe.ExecutorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.ExecutorConfig.prototype.hasOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.InputCollection.repeatedFields_=[2,1002],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollection.prototype.toObject=function(d){return proto.mediapipe.InputCollection.toObject(d,this)},proto.mediapipe.InputCollection.toObject=function(d,f){var g,v={name:e.Message.getFieldWithDefault(f,1,""),sidePacketNameList:(g=e.Message.getRepeatedField(f,2))==null?void 0:g,externalInputNameList:(g=e.Message.getRepeatedField(f,1002))==null?void 0:g,inputType:e.Message.getFieldWithDefault(f,3,0),fileName:e.Message.getFieldWithDefault(f,4,"")};return d&&(v.$jspbMessageInstance=f),v}),proto.mediapipe.InputCollection.deserializeBinary=function(d){var f=new e.BinaryReader(d),g=new proto.mediapipe.InputCollection;return proto.mediapipe.InputCollection.deserializeBinaryFromReader(g,f)},proto.mediapipe.InputCollection.deserializeBinaryFromReader=function(d,f){for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:var g=f.readString();d.setName(g);break;case 2:g=f.readString(),d.addSidePacketName(g);break;case 1002:g=f.readString(),d.addExternalInputName(g);break;case 3:g=f.readEnum(),d.setInputType(g);break;case 4:g=f.readString(),d.setFileName(g);break;default:f.skipField()}return d},proto.mediapipe.InputCollection.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.InputCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.InputCollection.serializeBinaryToWriter=function(d,f){var g=void 0;(g=d.getName()).length>0&&f.writeString(1,g),(g=d.getSidePacketNameList()).length>0&&f.writeRepeatedString(2,g),(g=d.getExternalInputNameList()).length>0&&f.writeRepeatedString(1002,g),(g=d.getInputType())!==0&&f.writeEnum(3,g),(g=d.getFileName()).length>0&&f.writeString(4,g)},proto.mediapipe.InputCollection.InputType={UNKNOWN:0,RECORDIO:1,FOREIGN_RECORDIO:2,FOREIGN_CSV_TEXT:3,INVALID_UPPER_BOUND:4},proto.mediapipe.InputCollection.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputCollection.prototype.setName=function(d){return e.Message.setProto3StringField(this,1,d)},proto.mediapipe.InputCollection.prototype.getSidePacketNameList=function(){return e.Message.getRepeatedField(this,2)},proto.mediapipe.InputCollection.prototype.setSidePacketNameList=function(d){return e.Message.setField(this,2,d||[])},proto.mediapipe.InputCollection.prototype.addSidePacketName=function(d,f){return e.Message.addToRepeatedField(this,2,d,f)},proto.mediapipe.InputCollection.prototype.clearSidePacketNameList=function(){return this.setSidePacketNameList([])},proto.mediapipe.InputCollection.prototype.getExternalInputNameList=function(){return e.Message.getRepeatedField(this,1002)},proto.mediapipe.InputCollection.prototype.setExternalInputNameList=function(d){return e.Message.setField(this,1002,d||[])},proto.mediapipe.InputCollection.prototype.addExternalInputName=function(d,f){return e.Message.addToRepeatedField(this,1002,d,f)},proto.mediapipe.InputCollection.prototype.clearExternalInputNameList=function(){return this.setExternalInputNameList([])},proto.mediapipe.InputCollection.prototype.getInputType=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.InputCollection.prototype.setInputType=function(d){return e.Message.setProto3EnumField(this,3,d)},proto.mediapipe.InputCollection.prototype.getFileName=function(){return e.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.InputCollection.prototype.setFileName=function(d){return e.Message.setProto3StringField(this,4,d)},proto.mediapipe.InputCollectionSet.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollectionSet.prototype.toObject=function(d){return proto.mediapipe.InputCollectionSet.toObject(d,this)},proto.mediapipe.InputCollectionSet.toObject=function(d,f){var g={inputCollectionList:e.Message.toObjectList(f.getInputCollectionList(),proto.mediapipe.InputCollection.toObject,d)};return d&&(g.$jspbMessageInstance=f),g}),proto.mediapipe.InputCollectionSet.deserializeBinary=function(d){var f=new e.BinaryReader(d),g=new proto.mediapipe.InputCollectionSet;return proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader(g,f)},proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader=function(d,f){for(;f.nextField()&&!f.isEndGroup();)if(f.getFieldNumber()===1){var g=new proto.mediapipe.InputCollection;f.readMessage(g,proto.mediapipe.InputCollection.deserializeBinaryFromReader),d.addInputCollection(g)}else f.skipField();return d},proto.mediapipe.InputCollectionSet.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.InputCollectionSet.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.InputCollectionSet.serializeBinaryToWriter=function(d,f){var g;(g=d.getInputCollectionList()).length>0&&f.writeRepeatedMessage(1,g,proto.mediapipe.InputCollection.serializeBinaryToWriter)},proto.mediapipe.InputCollectionSet.prototype.getInputCollectionList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.InputCollection,1)},proto.mediapipe.InputCollectionSet.prototype.setInputCollectionList=function(d){return e.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.InputCollectionSet.prototype.addInputCollection=function(d,f){return e.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.InputCollection,f)},proto.mediapipe.InputCollectionSet.prototype.clearInputCollectionList=function(){return this.setInputCollectionList([])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamInfo.prototype.toObject=function(d){return proto.mediapipe.InputStreamInfo.toObject(d,this)},proto.mediapipe.InputStreamInfo.toObject=function(d,f){var g={tagIndex:e.Message.getFieldWithDefault(f,1,""),backEdge:e.Message.getBooleanFieldWithDefault(f,2,!1)};return d&&(g.$jspbMessageInstance=f),g}),proto.mediapipe.InputStreamInfo.deserializeBinary=function(d){var f=new e.BinaryReader(d),g=new proto.mediapipe.InputStreamInfo;return proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader(g,f)},proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader=function(d,f){for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:var g=f.readString();d.setTagIndex(g);break;case 2:g=f.readBool(),d.setBackEdge(g);break;default:f.skipField()}return d},proto.mediapipe.InputStreamInfo.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.InputStreamInfo.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.InputStreamInfo.serializeBinaryToWriter=function(d,f){var g=void 0;(g=d.getTagIndex()).length>0&&f.writeString(1,g),(g=d.getBackEdge())&&f.writeBool(2,g)},proto.mediapipe.InputStreamInfo.prototype.getTagIndex=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputStreamInfo.prototype.setTagIndex=function(d){return e.Message.setProto3StringField(this,1,d)},proto.mediapipe.InputStreamInfo.prototype.getBackEdge=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InputStreamInfo.prototype.setBackEdge=function(d){return e.Message.setProto3BooleanField(this,2,d)},proto.mediapipe.ProfilerConfig.repeatedFields_=[8],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ProfilerConfig.prototype.toObject=function(d){return proto.mediapipe.ProfilerConfig.toObject(d,this)},proto.mediapipe.ProfilerConfig.toObject=function(d,f){var g,v={histogramIntervalSizeUsec:e.Message.getFieldWithDefault(f,1,0),numHistogramIntervals:e.Message.getFieldWithDefault(f,2,0),enableInputOutputLatency:e.Message.getBooleanFieldWithDefault(f,3,!1),enableProfiler:e.Message.getBooleanFieldWithDefault(f,4,!1),enableStreamLatency:e.Message.getBooleanFieldWithDefault(f,5,!1),usePacketTimestampForAddedPacket:e.Message.getBooleanFieldWithDefault(f,6,!1),traceLogCapacity:e.Message.getFieldWithDefault(f,7,0),traceEventTypesDisabledList:(g=e.Message.getRepeatedField(f,8))==null?void 0:g,traceLogPath:e.Message.getFieldWithDefault(f,9,""),traceLogCount:e.Message.getFieldWithDefault(f,10,0),traceLogIntervalUsec:e.Message.getFieldWithDefault(f,11,0),traceLogMarginUsec:e.Message.getFieldWithDefault(f,12,0),traceLogDurationEvents:e.Message.getBooleanFieldWithDefault(f,13,!1),traceLogIntervalCount:e.Message.getFieldWithDefault(f,14,0),traceLogDisabled:e.Message.getBooleanFieldWithDefault(f,15,!1),traceEnabled:e.Message.getBooleanFieldWithDefault(f,16,!1),traceLogInstantEvents:e.Message.getBooleanFieldWithDefault(f,17,!1),calculatorFilter:e.Message.getFieldWithDefault(f,18,"")};return d&&(v.$jspbMessageInstance=f),v}),proto.mediapipe.ProfilerConfig.deserializeBinary=function(d){var f=new e.BinaryReader(d),g=new proto.mediapipe.ProfilerConfig;return proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader(g,f)},proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader=function(d,f){for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:var g=f.readInt64();d.setHistogramIntervalSizeUsec(g);break;case 2:g=f.readInt64(),d.setNumHistogramIntervals(g);break;case 3:g=f.readBool(),d.setEnableInputOutputLatency(g);break;case 4:g=f.readBool(),d.setEnableProfiler(g);break;case 5:g=f.readBool(),d.setEnableStreamLatency(g);break;case 6:g=f.readBool(),d.setUsePacketTimestampForAddedPacket(g);break;case 7:g=f.readInt64(),d.setTraceLogCapacity(g);break;case 8:for(var v=f.isDelimited()?f.readPackedInt32():[f.readInt32()],A=0;A<v.length;A++)d.addTraceEventTypesDisabled(v[A]);break;case 9:g=f.readString(),d.setTraceLogPath(g);break;case 10:g=f.readInt32(),d.setTraceLogCount(g);break;case 11:g=f.readInt64(),d.setTraceLogIntervalUsec(g);break;case 12:g=f.readInt64(),d.setTraceLogMarginUsec(g);break;case 13:g=f.readBool(),d.setTraceLogDurationEvents(g);break;case 14:g=f.readInt32(),d.setTraceLogIntervalCount(g);break;case 15:g=f.readBool(),d.setTraceLogDisabled(g);break;case 16:g=f.readBool(),d.setTraceEnabled(g);break;case 17:g=f.readBool(),d.setTraceLogInstantEvents(g);break;case 18:g=f.readString(),d.setCalculatorFilter(g);break;default:f.skipField()}return d},proto.mediapipe.ProfilerConfig.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.ProfilerConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ProfilerConfig.serializeBinaryToWriter=function(d,f){var g=void 0;(g=d.getHistogramIntervalSizeUsec())!==0&&f.writeInt64(1,g),(g=d.getNumHistogramIntervals())!==0&&f.writeInt64(2,g),(g=d.getEnableInputOutputLatency())&&f.writeBool(3,g),(g=d.getEnableProfiler())&&f.writeBool(4,g),(g=d.getEnableStreamLatency())&&f.writeBool(5,g),(g=d.getUsePacketTimestampForAddedPacket())&&f.writeBool(6,g),(g=d.getTraceLogCapacity())!==0&&f.writeInt64(7,g),(g=d.getTraceEventTypesDisabledList()).length>0&&f.writePackedInt32(8,g),(g=d.getTraceLogPath()).length>0&&f.writeString(9,g),(g=d.getTraceLogCount())!==0&&f.writeInt32(10,g),(g=d.getTraceLogIntervalUsec())!==0&&f.writeInt64(11,g),(g=d.getTraceLogMarginUsec())!==0&&f.writeInt64(12,g),(g=d.getTraceLogDurationEvents())&&f.writeBool(13,g),(g=d.getTraceLogIntervalCount())!==0&&f.writeInt32(14,g),(g=d.getTraceLogDisabled())&&f.writeBool(15,g),(g=d.getTraceEnabled())&&f.writeBool(16,g),(g=d.getTraceLogInstantEvents())&&f.writeBool(17,g),(g=d.getCalculatorFilter()).length>0&&f.writeString(18,g)},proto.mediapipe.ProfilerConfig.prototype.getHistogramIntervalSizeUsec=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.ProfilerConfig.prototype.setHistogramIntervalSizeUsec=function(d){return e.Message.setProto3IntField(this,1,d)},proto.mediapipe.ProfilerConfig.prototype.getNumHistogramIntervals=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.ProfilerConfig.prototype.setNumHistogramIntervals=function(d){return e.Message.setProto3IntField(this,2,d)},proto.mediapipe.ProfilerConfig.prototype.getEnableInputOutputLatency=function(){return e.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableInputOutputLatency=function(d){return e.Message.setProto3BooleanField(this,3,d)},proto.mediapipe.ProfilerConfig.prototype.getEnableProfiler=function(){return e.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableProfiler=function(d){return e.Message.setProto3BooleanField(this,4,d)},proto.mediapipe.ProfilerConfig.prototype.getEnableStreamLatency=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableStreamLatency=function(d){return e.Message.setProto3BooleanField(this,5,d)},proto.mediapipe.ProfilerConfig.prototype.getUsePacketTimestampForAddedPacket=function(){return e.Message.getBooleanFieldWithDefault(this,6,!1)},proto.mediapipe.ProfilerConfig.prototype.setUsePacketTimestampForAddedPacket=function(d){return e.Message.setProto3BooleanField(this,6,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCapacity=function(){return e.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCapacity=function(d){return e.Message.setProto3IntField(this,7,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceEventTypesDisabledList=function(){return e.Message.getRepeatedField(this,8)},proto.mediapipe.ProfilerConfig.prototype.setTraceEventTypesDisabledList=function(d){return e.Message.setField(this,8,d||[])},proto.mediapipe.ProfilerConfig.prototype.addTraceEventTypesDisabled=function(d,f){return e.Message.addToRepeatedField(this,8,d,f)},proto.mediapipe.ProfilerConfig.prototype.clearTraceEventTypesDisabledList=function(){return this.setTraceEventTypesDisabledList([])},proto.mediapipe.ProfilerConfig.prototype.getTraceLogPath=function(){return e.Message.getFieldWithDefault(this,9,"")},proto.mediapipe.ProfilerConfig.prototype.setTraceLogPath=function(d){return e.Message.setProto3StringField(this,9,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCount=function(){return e.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCount=function(d){return e.Message.setProto3IntField(this,10,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalUsec=function(){return e.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalUsec=function(d){return e.Message.setProto3IntField(this,11,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogMarginUsec=function(){return e.Message.getFieldWithDefault(this,12,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogMarginUsec=function(d){return e.Message.setProto3IntField(this,12,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDurationEvents=function(){return e.Message.getBooleanFieldWithDefault(this,13,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDurationEvents=function(d){return e.Message.setProto3BooleanField(this,13,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalCount=function(){return e.Message.getFieldWithDefault(this,14,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalCount=function(d){return e.Message.setProto3IntField(this,14,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDisabled=function(){return e.Message.getBooleanFieldWithDefault(this,15,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDisabled=function(d){return e.Message.setProto3BooleanField(this,15,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceEnabled=function(){return e.Message.getBooleanFieldWithDefault(this,16,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceEnabled=function(d){return e.Message.setProto3BooleanField(this,16,d)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogInstantEvents=function(){return e.Message.getBooleanFieldWithDefault(this,17,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogInstantEvents=function(d){return e.Message.setProto3BooleanField(this,17,d)},proto.mediapipe.ProfilerConfig.prototype.getCalculatorFilter=function(){return e.Message.getFieldWithDefault(this,18,"")},proto.mediapipe.ProfilerConfig.prototype.setCalculatorFilter=function(d){return e.Message.setProto3StringField(this,18,d)},proto.mediapipe.CalculatorGraphConfig.repeatedFields_=[1,6,7,9,10,15,16,17,14,1002],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.prototype.toObject=function(d){return proto.mediapipe.CalculatorGraphConfig.toObject(d,this)},proto.mediapipe.CalculatorGraphConfig.toObject=function(d,f){var g,v={nodeList:e.Message.toObjectList(f.getNodeList(),proto.mediapipe.CalculatorGraphConfig.Node.toObject,d),packetFactoryList:e.Message.toObjectList(f.getPacketFactoryList(),p.PacketFactoryConfig.toObject,d),packetGeneratorList:e.Message.toObjectList(f.getPacketGeneratorList(),l.PacketGeneratorConfig.toObject,d),numThreads:e.Message.getFieldWithDefault(f,8,0),statusHandlerList:e.Message.toObjectList(f.getStatusHandlerList(),c.StatusHandlerConfig.toObject,d),inputStreamList:(g=e.Message.getRepeatedField(f,10))==null?void 0:g,outputStreamList:(g=e.Message.getRepeatedField(f,15))==null?void 0:g,inputSidePacketList:(g=e.Message.getRepeatedField(f,16))==null?void 0:g,outputSidePacketList:(g=e.Message.getRepeatedField(f,17))==null?void 0:g,maxQueueSize:e.Message.getFieldWithDefault(f,11,0),reportDeadlock:e.Message.getBooleanFieldWithDefault(f,21,!1),inputStreamHandler:(g=f.getInputStreamHandler())&&u.InputStreamHandlerConfig.toObject(d,g),outputStreamHandler:(g=f.getOutputStreamHandler())&&u.OutputStreamHandlerConfig.toObject(d,g),executorList:e.Message.toObjectList(f.getExecutorList(),proto.mediapipe.ExecutorConfig.toObject,d),profilerConfig:(g=f.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(d,g),pb_package:e.Message.getFieldWithDefault(f,19,""),type:e.Message.getFieldWithDefault(f,20,""),options:(g=f.getOptions())&&s.MediaPipeOptions.toObject(d,g),graphOptionsList:e.Message.toObjectList(f.getGraphOptionsList(),o.Any.toObject,d)};return d&&(v.$jspbMessageInstance=f),v}),proto.mediapipe.CalculatorGraphConfig.deserializeBinary=function(d){var f=new e.BinaryReader(d),g=new proto.mediapipe.CalculatorGraphConfig;return proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader(g,f)},proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader=function(d,f){for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:var g=new proto.mediapipe.CalculatorGraphConfig.Node;f.readMessage(g,proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader),d.addNode(g);break;case 6:g=new p.PacketFactoryConfig,f.readMessage(g,p.PacketFactoryConfig.deserializeBinaryFromReader),d.addPacketFactory(g);break;case 7:g=new l.PacketGeneratorConfig,f.readMessage(g,l.PacketGeneratorConfig.deserializeBinaryFromReader),d.addPacketGenerator(g);break;case 8:g=f.readInt32(),d.setNumThreads(g);break;case 9:g=new c.StatusHandlerConfig,f.readMessage(g,c.StatusHandlerConfig.deserializeBinaryFromReader),d.addStatusHandler(g);break;case 10:g=f.readString(),d.addInputStream(g);break;case 15:g=f.readString(),d.addOutputStream(g);break;case 16:g=f.readString(),d.addInputSidePacket(g);break;case 17:g=f.readString(),d.addOutputSidePacket(g);break;case 11:g=f.readInt32(),d.setMaxQueueSize(g);break;case 21:g=f.readBool(),d.setReportDeadlock(g);break;case 12:g=new u.InputStreamHandlerConfig,f.readMessage(g,u.InputStreamHandlerConfig.deserializeBinaryFromReader),d.setInputStreamHandler(g);break;case 13:g=new u.OutputStreamHandlerConfig,f.readMessage(g,u.OutputStreamHandlerConfig.deserializeBinaryFromReader),d.setOutputStreamHandler(g);break;case 14:g=new proto.mediapipe.ExecutorConfig,f.readMessage(g,proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader),d.addExecutor(g);break;case 18:g=new proto.mediapipe.ProfilerConfig,f.readMessage(g,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),d.setProfilerConfig(g);break;case 19:g=f.readString(),d.setPackage(g);break;case 20:g=f.readString(),d.setType(g);break;case 1001:g=new s.MediaPipeOptions,f.readMessage(g,s.MediaPipeOptions.deserializeBinaryFromReader),d.setOptions(g);break;case 1002:g=new o.Any,f.readMessage(g,o.Any.deserializeBinaryFromReader),d.addGraphOptions(g);break;default:f.skipField()}return d},proto.mediapipe.CalculatorGraphConfig.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter=function(d,f){var g=void 0;(g=d.getNodeList()).length>0&&f.writeRepeatedMessage(1,g,proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter),(g=d.getPacketFactoryList()).length>0&&f.writeRepeatedMessage(6,g,p.PacketFactoryConfig.serializeBinaryToWriter),(g=d.getPacketGeneratorList()).length>0&&f.writeRepeatedMessage(7,g,l.PacketGeneratorConfig.serializeBinaryToWriter),(g=d.getNumThreads())!==0&&f.writeInt32(8,g),(g=d.getStatusHandlerList()).length>0&&f.writeRepeatedMessage(9,g,c.StatusHandlerConfig.serializeBinaryToWriter),(g=d.getInputStreamList()).length>0&&f.writeRepeatedString(10,g),(g=d.getOutputStreamList()).length>0&&f.writeRepeatedString(15,g),(g=d.getInputSidePacketList()).length>0&&f.writeRepeatedString(16,g),(g=d.getOutputSidePacketList()).length>0&&f.writeRepeatedString(17,g),(g=d.getMaxQueueSize())!==0&&f.writeInt32(11,g),(g=d.getReportDeadlock())&&f.writeBool(21,g),(g=d.getInputStreamHandler())!=null&&f.writeMessage(12,g,u.InputStreamHandlerConfig.serializeBinaryToWriter),(g=d.getOutputStreamHandler())!=null&&f.writeMessage(13,g,u.OutputStreamHandlerConfig.serializeBinaryToWriter),(g=d.getExecutorList()).length>0&&f.writeRepeatedMessage(14,g,proto.mediapipe.ExecutorConfig.serializeBinaryToWriter),(g=d.getProfilerConfig())!=null&&f.writeMessage(18,g,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(g=d.getPackage()).length>0&&f.writeString(19,g),(g=d.getType()).length>0&&f.writeString(20,g),(g=d.getOptions())!=null&&f.writeMessage(1001,g,s.MediaPipeOptions.serializeBinaryToWriter),(g=d.getGraphOptionsList()).length>0&&f.writeRepeatedMessage(1002,g,o.Any.serializeBinaryToWriter)},proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_=[3,4,5,6,8,13,17,1005],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.Node.prototype.toObject=function(d){return proto.mediapipe.CalculatorGraphConfig.Node.toObject(d,this)},proto.mediapipe.CalculatorGraphConfig.Node.toObject=function(d,f){var g,v={name:e.Message.getFieldWithDefault(f,1,""),calculator:e.Message.getFieldWithDefault(f,2,""),inputStreamList:(g=e.Message.getRepeatedField(f,3))==null?void 0:g,outputStreamList:(g=e.Message.getRepeatedField(f,4))==null?void 0:g,inputSidePacketList:(g=e.Message.getRepeatedField(f,5))==null?void 0:g,outputSidePacketList:(g=e.Message.getRepeatedField(f,6))==null?void 0:g,options:(g=f.getOptions())&&i.CalculatorOptions.toObject(d,g),nodeOptionsList:e.Message.toObjectList(f.getNodeOptionsList(),o.Any.toObject,d),sourceLayer:e.Message.getFieldWithDefault(f,9,0),bufferSizeHint:e.Message.getFieldWithDefault(f,10,0),inputStreamHandler:(g=f.getInputStreamHandler())&&u.InputStreamHandlerConfig.toObject(d,g),outputStreamHandler:(g=f.getOutputStreamHandler())&&u.OutputStreamHandlerConfig.toObject(d,g),inputStreamInfoList:e.Message.toObjectList(f.getInputStreamInfoList(),proto.mediapipe.InputStreamInfo.toObject,d),executor:e.Message.getFieldWithDefault(f,14,""),profilerConfig:(g=f.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(d,g),maxInFlight:e.Message.getFieldWithDefault(f,16,0),optionValueList:(g=e.Message.getRepeatedField(f,17))==null?void 0:g,externalInputList:(g=e.Message.getRepeatedField(f,1005))==null?void 0:g};return d&&(v.$jspbMessageInstance=f),v}),proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinary=function(d){var f=new e.BinaryReader(d),g=new proto.mediapipe.CalculatorGraphConfig.Node;return proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader(g,f)},proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader=function(d,f){for(;f.nextField()&&!f.isEndGroup();)switch(f.getFieldNumber()){case 1:var g=f.readString();d.setName(g);break;case 2:g=f.readString(),d.setCalculator(g);break;case 3:g=f.readString(),d.addInputStream(g);break;case 4:g=f.readString(),d.addOutputStream(g);break;case 5:g=f.readString(),d.addInputSidePacket(g);break;case 6:g=f.readString(),d.addOutputSidePacket(g);break;case 7:g=new i.CalculatorOptions,f.readMessage(g,i.CalculatorOptions.deserializeBinaryFromReader),d.setOptions(g);break;case 8:g=new o.Any,f.readMessage(g,o.Any.deserializeBinaryFromReader),d.addNodeOptions(g);break;case 9:g=f.readInt32(),d.setSourceLayer(g);break;case 10:g=f.readInt32(),d.setBufferSizeHint(g);break;case 11:g=new u.InputStreamHandlerConfig,f.readMessage(g,u.InputStreamHandlerConfig.deserializeBinaryFromReader),d.setInputStreamHandler(g);break;case 12:g=new u.OutputStreamHandlerConfig,f.readMessage(g,u.OutputStreamHandlerConfig.deserializeBinaryFromReader),d.setOutputStreamHandler(g);break;case 13:g=new proto.mediapipe.InputStreamInfo,f.readMessage(g,proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader),d.addInputStreamInfo(g);break;case 14:g=f.readString(),d.setExecutor(g);break;case 15:g=new proto.mediapipe.ProfilerConfig,f.readMessage(g,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),d.setProfilerConfig(g);break;case 16:g=f.readInt32(),d.setMaxInFlight(g);break;case 17:g=f.readString(),d.addOptionValue(g);break;case 1005:g=f.readString(),d.addExternalInput(g);break;default:f.skipField()}return d},proto.mediapipe.CalculatorGraphConfig.Node.prototype.serializeBinary=function(){var d=new e.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter=function(d,f){var g=void 0;(g=d.getName()).length>0&&f.writeString(1,g),(g=d.getCalculator()).length>0&&f.writeString(2,g),(g=d.getInputStreamList()).length>0&&f.writeRepeatedString(3,g),(g=d.getOutputStreamList()).length>0&&f.writeRepeatedString(4,g),(g=d.getInputSidePacketList()).length>0&&f.writeRepeatedString(5,g),(g=d.getOutputSidePacketList()).length>0&&f.writeRepeatedString(6,g),(g=d.getOptions())!=null&&f.writeMessage(7,g,i.CalculatorOptions.serializeBinaryToWriter),(g=d.getNodeOptionsList()).length>0&&f.writeRepeatedMessage(8,g,o.Any.serializeBinaryToWriter),(g=d.getSourceLayer())!==0&&f.writeInt32(9,g),(g=d.getBufferSizeHint())!==0&&f.writeInt32(10,g),(g=d.getInputStreamHandler())!=null&&f.writeMessage(11,g,u.InputStreamHandlerConfig.serializeBinaryToWriter),(g=d.getOutputStreamHandler())!=null&&f.writeMessage(12,g,u.OutputStreamHandlerConfig.serializeBinaryToWriter),(g=d.getInputStreamInfoList()).length>0&&f.writeRepeatedMessage(13,g,proto.mediapipe.InputStreamInfo.serializeBinaryToWriter),(g=d.getExecutor()).length>0&&f.writeString(14,g),(g=d.getProfilerConfig())!=null&&f.writeMessage(15,g,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(g=d.getMaxInFlight())!==0&&f.writeInt32(16,g),(g=d.getOptionValueList()).length>0&&f.writeRepeatedString(17,g),(g=d.getExternalInputList()).length>0&&f.writeRepeatedString(1005,g)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setName=function(d){return e.Message.setProto3StringField(this,1,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getCalculator=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setCalculator=function(d){return e.Message.setProto3StringField(this,2,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamList=function(){return e.Message.getRepeatedField(this,3)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamList=function(d){return e.Message.setField(this,3,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStream=function(d,f){return e.Message.addToRepeatedField(this,3,d,f)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamList=function(){return e.Message.getRepeatedField(this,4)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamList=function(d){return e.Message.setField(this,4,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputStream=function(d,f){return e.Message.addToRepeatedField(this,4,d,f)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputSidePacketList=function(){return e.Message.getRepeatedField(this,5)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputSidePacketList=function(d){return e.Message.setField(this,5,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputSidePacket=function(d,f){return e.Message.addToRepeatedField(this,5,d,f)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputSidePacketList=function(){return e.Message.getRepeatedField(this,6)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputSidePacketList=function(d){return e.Message.setField(this,6,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputSidePacket=function(d,f){return e.Message.addToRepeatedField(this,6,d,f)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptions=function(){return e.Message.getWrapperField(this,i.CalculatorOptions,7)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptions=function(d){return e.Message.setWrapperField(this,7,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOptions=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getNodeOptionsList=function(){return e.Message.getRepeatedWrapperField(this,o.Any,8)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setNodeOptionsList=function(d){return e.Message.setRepeatedWrapperField(this,8,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addNodeOptions=function(d,f){return e.Message.addToRepeatedWrapperField(this,8,d,proto.google.protobuf.Any,f)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearNodeOptionsList=function(){return this.setNodeOptionsList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getSourceLayer=function(){return e.Message.getFieldWithDefault(this,9,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setSourceLayer=function(d){return e.Message.setProto3IntField(this,9,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getBufferSizeHint=function(){return e.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setBufferSizeHint=function(d){return e.Message.setProto3IntField(this,10,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamHandler=function(){return e.Message.getWrapperField(this,u.InputStreamHandlerConfig,11)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamHandler=function(d){return e.Message.setWrapperField(this,11,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasInputStreamHandler=function(){return e.Message.getField(this,11)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamHandler=function(){return e.Message.getWrapperField(this,u.OutputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamHandler=function(d){return e.Message.setWrapperField(this,12,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOutputStreamHandler=function(){return e.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamInfoList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.InputStreamInfo,13)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamInfoList=function(d){return e.Message.setRepeatedWrapperField(this,13,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStreamInfo=function(d,f){return e.Message.addToRepeatedWrapperField(this,13,d,proto.mediapipe.InputStreamInfo,f)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamInfoList=function(){return this.setInputStreamInfoList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExecutor=function(){return e.Message.getFieldWithDefault(this,14,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExecutor=function(d){return e.Message.setProto3StringField(this,14,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getProfilerConfig=function(){return e.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,15)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setProfilerConfig=function(d){return e.Message.setWrapperField(this,15,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasProfilerConfig=function(){return e.Message.getField(this,15)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getMaxInFlight=function(){return e.Message.getFieldWithDefault(this,16,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setMaxInFlight=function(d){return e.Message.setProto3IntField(this,16,d)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptionValueList=function(){return e.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptionValueList=function(d){return e.Message.setField(this,17,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOptionValue=function(d,f){return e.Message.addToRepeatedField(this,17,d,f)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptionValueList=function(){return this.setOptionValueList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExternalInputList=function(){return e.Message.getRepeatedField(this,1005)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExternalInputList=function(d){return e.Message.setField(this,1005,d||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addExternalInput=function(d,f){return e.Message.addToRepeatedField(this,1005,d,f)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNodeList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.CalculatorGraphConfig.Node,1)},proto.mediapipe.CalculatorGraphConfig.prototype.setNodeList=function(d){return e.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addNode=function(d,f){return e.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.CalculatorGraphConfig.Node,f)},proto.mediapipe.CalculatorGraphConfig.prototype.clearNodeList=function(){return this.setNodeList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketFactoryList=function(){return e.Message.getRepeatedWrapperField(this,p.PacketFactoryConfig,6)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketFactoryList=function(d){return e.Message.setRepeatedWrapperField(this,6,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketFactory=function(d,f){return e.Message.addToRepeatedWrapperField(this,6,d,proto.mediapipe.PacketFactoryConfig,f)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketFactoryList=function(){return this.setPacketFactoryList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketGeneratorList=function(){return e.Message.getRepeatedWrapperField(this,l.PacketGeneratorConfig,7)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketGeneratorList=function(d){return e.Message.setRepeatedWrapperField(this,7,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketGenerator=function(d,f){return e.Message.addToRepeatedWrapperField(this,7,d,proto.mediapipe.PacketGeneratorConfig,f)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketGeneratorList=function(){return this.setPacketGeneratorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNumThreads=function(){return e.Message.getFieldWithDefault(this,8,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setNumThreads=function(d){return e.Message.setProto3IntField(this,8,d)},proto.mediapipe.CalculatorGraphConfig.prototype.getStatusHandlerList=function(){return e.Message.getRepeatedWrapperField(this,c.StatusHandlerConfig,9)},proto.mediapipe.CalculatorGraphConfig.prototype.setStatusHandlerList=function(d){return e.Message.setRepeatedWrapperField(this,9,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addStatusHandler=function(d,f){return e.Message.addToRepeatedWrapperField(this,9,d,proto.mediapipe.StatusHandlerConfig,f)},proto.mediapipe.CalculatorGraphConfig.prototype.clearStatusHandlerList=function(){return this.setStatusHandlerList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamList=function(){return e.Message.getRepeatedField(this,10)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamList=function(d){return e.Message.setField(this,10,d||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputStream=function(d,f){return e.Message.addToRepeatedField(this,10,d,f)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamList=function(){return e.Message.getRepeatedField(this,15)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamList=function(d){return e.Message.setField(this,15,d||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputStream=function(d,f){return e.Message.addToRepeatedField(this,15,d,f)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputSidePacketList=function(){return e.Message.getRepeatedField(this,16)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputSidePacketList=function(d){return e.Message.setField(this,16,d||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputSidePacket=function(d,f){return e.Message.addToRepeatedField(this,16,d,f)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputSidePacketList=function(){return e.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputSidePacketList=function(d){return e.Message.setField(this,17,d||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputSidePacket=function(d,f){return e.Message.addToRepeatedField(this,17,d,f)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getMaxQueueSize=function(){return e.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setMaxQueueSize=function(d){return e.Message.setProto3IntField(this,11,d)},proto.mediapipe.CalculatorGraphConfig.prototype.getReportDeadlock=function(){return e.Message.getBooleanFieldWithDefault(this,21,!1)},proto.mediapipe.CalculatorGraphConfig.prototype.setReportDeadlock=function(d){return e.Message.setProto3BooleanField(this,21,d)},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamHandler=function(){return e.Message.getWrapperField(this,u.InputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamHandler=function(d){return e.Message.setWrapperField(this,12,d)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasInputStreamHandler=function(){return e.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamHandler=function(){return e.Message.getWrapperField(this,u.OutputStreamHandlerConfig,13)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamHandler=function(d){return e.Message.setWrapperField(this,13,d)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOutputStreamHandler=function(){return e.Message.getField(this,13)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getExecutorList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.ExecutorConfig,14)},proto.mediapipe.CalculatorGraphConfig.prototype.setExecutorList=function(d){return e.Message.setRepeatedWrapperField(this,14,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addExecutor=function(d,f){return e.Message.addToRepeatedWrapperField(this,14,d,proto.mediapipe.ExecutorConfig,f)},proto.mediapipe.CalculatorGraphConfig.prototype.clearExecutorList=function(){return this.setExecutorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getProfilerConfig=function(){return e.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,18)},proto.mediapipe.CalculatorGraphConfig.prototype.setProfilerConfig=function(d){return e.Message.setWrapperField(this,18,d)},proto.mediapipe.CalculatorGraphConfig.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasProfilerConfig=function(){return e.Message.getField(this,18)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getPackage=function(){return e.Message.getFieldWithDefault(this,19,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setPackage=function(d){return e.Message.setProto3StringField(this,19,d)},proto.mediapipe.CalculatorGraphConfig.prototype.getType=function(){return e.Message.getFieldWithDefault(this,20,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setType=function(d){return e.Message.setProto3StringField(this,20,d)},proto.mediapipe.CalculatorGraphConfig.prototype.getOptions=function(){return e.Message.getWrapperField(this,s.MediaPipeOptions,1001)},proto.mediapipe.CalculatorGraphConfig.prototype.setOptions=function(d){return e.Message.setWrapperField(this,1001,d)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOptions=function(){return e.Message.getField(this,1001)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getGraphOptionsList=function(){return e.Message.getRepeatedWrapperField(this,o.Any,1002)},proto.mediapipe.CalculatorGraphConfig.prototype.setGraphOptionsList=function(d){return e.Message.setRepeatedWrapperField(this,1002,d)},proto.mediapipe.CalculatorGraphConfig.prototype.addGraphOptions=function(d,f){return e.Message.addToRepeatedWrapperField(this,1002,d,proto.google.protobuf.Any,f)},proto.mediapipe.CalculatorGraphConfig.prototype.clearGraphOptionsList=function(){return this.setGraphOptionsList([])},r.object.extend(t,proto.mediapipe)})(bt);qy={},ZR={},$R={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Rasterization",null,n),r.exportSymbol("proto.mediapipe.Rasterization.Interval",null,n),proto.mediapipe.Rasterization=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.Rasterization.repeatedFields_,null)},r.inherits(proto.mediapipe.Rasterization,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.displayName="proto.mediapipe.Rasterization"),proto.mediapipe.Rasterization.Interval=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.Rasterization.Interval,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.Interval.displayName="proto.mediapipe.Rasterization.Interval"),proto.mediapipe.Rasterization.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.prototype.toObject=function(i){return proto.mediapipe.Rasterization.toObject(i,this)},proto.mediapipe.Rasterization.toObject=function(i,o){var s={intervalList:e.Message.toObjectList(o.getIntervalList(),proto.mediapipe.Rasterization.Interval.toObject,i)};return i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.Rasterization.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.Rasterization;return proto.mediapipe.Rasterization.deserializeBinaryFromReader(s,o)},proto.mediapipe.Rasterization.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=new proto.mediapipe.Rasterization.Interval;o.readMessage(s,proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader),i.addInterval(s)}else o.skipField();return i},proto.mediapipe.Rasterization.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.Rasterization.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.Rasterization.serializeBinaryToWriter=function(i,o){var s;(s=i.getIntervalList()).length>0&&o.writeRepeatedMessage(1,s,proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter)},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.Interval.prototype.toObject=function(i){return proto.mediapipe.Rasterization.Interval.toObject(i,this)},proto.mediapipe.Rasterization.Interval.toObject=function(i,o){var s,p={y:(s=e.Message.getField(o,1))==null?void 0:s,leftX:(s=e.Message.getField(o,2))==null?void 0:s,rightX:(s=e.Message.getField(o,3))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.Rasterization.Interval.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.Rasterization.Interval;return proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader(s,o)},proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readInt32();i.setY(s);break;case 2:s=o.readInt32(),i.setLeftX(s);break;case 3:s=o.readInt32(),i.setRightX(s);break;default:o.skipField()}return i},proto.mediapipe.Rasterization.Interval.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeInt32(1,s),(s=e.Message.getField(i,2))!=null&&o.writeInt32(2,s),(s=e.Message.getField(i,3))!=null&&o.writeInt32(3,s)},proto.mediapipe.Rasterization.Interval.prototype.getY=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rasterization.Interval.prototype.setY=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.Rasterization.Interval.prototype.clearY=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasY=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Rasterization.Interval.prototype.getLeftX=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rasterization.Interval.prototype.setLeftX=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.Rasterization.Interval.prototype.clearLeftX=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasLeftX=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Rasterization.Interval.prototype.getRightX=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rasterization.Interval.prototype.setRightX=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.Rasterization.Interval.prototype.clearRightX=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasRightX=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.Rasterization.prototype.getIntervalList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.Rasterization.Interval,1)},proto.mediapipe.Rasterization.prototype.setIntervalList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.Rasterization.prototype.addInterval=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.Rasterization.Interval,o)},proto.mediapipe.Rasterization.prototype.clearIntervalList=function(){return this.setIntervalList([])},r.object.extend(t,proto.mediapipe)})($R),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=$R;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.LocationData",null,n),r.exportSymbol("proto.mediapipe.LocationData.BinaryMask",null,n),r.exportSymbol("proto.mediapipe.LocationData.BoundingBox",null,n),r.exportSymbol("proto.mediapipe.LocationData.Format",null,n),r.exportSymbol("proto.mediapipe.LocationData.RelativeBoundingBox",null,n),r.exportSymbol("proto.mediapipe.LocationData.RelativeKeypoint",null,n),proto.mediapipe.LocationData=function(o){e.Message.initialize(this,o,0,-1,proto.mediapipe.LocationData.repeatedFields_,null)},r.inherits(proto.mediapipe.LocationData,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.displayName="proto.mediapipe.LocationData"),proto.mediapipe.LocationData.BoundingBox=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.BoundingBox,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BoundingBox.displayName="proto.mediapipe.LocationData.BoundingBox"),proto.mediapipe.LocationData.RelativeBoundingBox=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.RelativeBoundingBox,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeBoundingBox.displayName="proto.mediapipe.LocationData.RelativeBoundingBox"),proto.mediapipe.LocationData.BinaryMask=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.BinaryMask,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BinaryMask.displayName="proto.mediapipe.LocationData.BinaryMask"),proto.mediapipe.LocationData.RelativeKeypoint=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.LocationData.RelativeKeypoint,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeKeypoint.displayName="proto.mediapipe.LocationData.RelativeKeypoint"),proto.mediapipe.LocationData.repeatedFields_=[5],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.prototype.toObject=function(o){return proto.mediapipe.LocationData.toObject(o,this)},proto.mediapipe.LocationData.toObject=function(o,s){var p,l={format:(p=e.Message.getField(s,1))==null?void 0:p,boundingBox:(p=s.getBoundingBox())&&proto.mediapipe.LocationData.BoundingBox.toObject(o,p),relativeBoundingBox:(p=s.getRelativeBoundingBox())&&proto.mediapipe.LocationData.RelativeBoundingBox.toObject(o,p),mask:(p=s.getMask())&&proto.mediapipe.LocationData.BinaryMask.toObject(o,p),relativeKeypointsList:e.Message.toObjectList(s.getRelativeKeypointsList(),proto.mediapipe.LocationData.RelativeKeypoint.toObject,o)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.LocationData.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.LocationData;return proto.mediapipe.LocationData.deserializeBinaryFromReader(p,s)},proto.mediapipe.LocationData.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readEnum();o.setFormat(p);break;case 2:p=new proto.mediapipe.LocationData.BoundingBox,s.readMessage(p,proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader),o.setBoundingBox(p);break;case 3:p=new proto.mediapipe.LocationData.RelativeBoundingBox,s.readMessage(p,proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader),o.setRelativeBoundingBox(p);break;case 4:p=new proto.mediapipe.LocationData.BinaryMask,s.readMessage(p,proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader),o.setMask(p);break;case 5:p=new proto.mediapipe.LocationData.RelativeKeypoint,s.readMessage(p,proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader),o.addRelativeKeypoints(p);break;default:s.skipField()}return o},proto.mediapipe.LocationData.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.LocationData.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.LocationData.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeEnum(1,p),(p=o.getBoundingBox())!=null&&s.writeMessage(2,p,proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter),(p=o.getRelativeBoundingBox())!=null&&s.writeMessage(3,p,proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter),(p=o.getMask())!=null&&s.writeMessage(4,p,proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter),(p=o.getRelativeKeypointsList()).length>0&&s.writeRepeatedMessage(5,p,proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter)},proto.mediapipe.LocationData.Format={GLOBAL:0,BOUNDING_BOX:1,RELATIVE_BOUNDING_BOX:2,MASK:3},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BoundingBox.prototype.toObject=function(o){return proto.mediapipe.LocationData.BoundingBox.toObject(o,this)},proto.mediapipe.LocationData.BoundingBox.toObject=function(o,s){var p,l={xmin:(p=e.Message.getField(s,1))==null?void 0:p,ymin:(p=e.Message.getField(s,2))==null?void 0:p,width:(p=e.Message.getField(s,3))==null?void 0:p,height:(p=e.Message.getField(s,4))==null?void 0:p};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.LocationData.BoundingBox.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.LocationData.BoundingBox;return proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader(p,s)},proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readInt32();o.setXmin(p);break;case 2:p=s.readInt32(),o.setYmin(p);break;case 3:p=s.readInt32(),o.setWidth(p);break;case 4:p=s.readInt32(),o.setHeight(p);break;default:s.skipField()}return o},proto.mediapipe.LocationData.BoundingBox.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeInt32(1,p),(p=e.Message.getField(o,2))!=null&&s.writeInt32(2,p),(p=e.Message.getField(o,3))!=null&&s.writeInt32(3,p),(p=e.Message.getField(o,4))!=null&&s.writeInt32(4,p)},proto.mediapipe.LocationData.BoundingBox.prototype.getXmin=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setXmin=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.LocationData.BoundingBox.prototype.clearXmin=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasXmin=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getYmin=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setYmin=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.LocationData.BoundingBox.prototype.clearYmin=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasYmin=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getWidth=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setWidth=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.LocationData.BoundingBox.prototype.clearWidth=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasWidth=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getHeight=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setHeight=function(o){return e.Message.setField(this,4,o)},proto.mediapipe.LocationData.BoundingBox.prototype.clearHeight=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasHeight=function(){return e.Message.getField(this,4)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeBoundingBox.prototype.toObject=function(o){return proto.mediapipe.LocationData.RelativeBoundingBox.toObject(o,this)},proto.mediapipe.LocationData.RelativeBoundingBox.toObject=function(o,s){var p,l={xmin:(p=e.Message.getOptionalFloatingPointField(s,1))==null?void 0:p,ymin:(p=e.Message.getOptionalFloatingPointField(s,2))==null?void 0:p,width:(p=e.Message.getOptionalFloatingPointField(s,3))==null?void 0:p,height:(p=e.Message.getOptionalFloatingPointField(s,4))==null?void 0:p};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.LocationData.RelativeBoundingBox;return proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader(p,s)},proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readFloat();o.setXmin(p);break;case 2:p=s.readFloat(),o.setYmin(p);break;case 3:p=s.readFloat(),o.setWidth(p);break;case 4:p=s.readFloat(),o.setHeight(p);break;default:s.skipField()}return o},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeFloat(1,p),(p=e.Message.getField(o,2))!=null&&s.writeFloat(2,p),(p=e.Message.getField(o,3))!=null&&s.writeFloat(3,p),(p=e.Message.getField(o,4))!=null&&s.writeFloat(4,p)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getXmin=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setXmin=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearXmin=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasXmin=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getYmin=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setYmin=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearYmin=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasYmin=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getWidth=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setWidth=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearWidth=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasWidth=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getHeight=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setHeight=function(o){return e.Message.setField(this,4,o)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearHeight=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasHeight=function(){return e.Message.getField(this,4)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BinaryMask.prototype.toObject=function(o){return proto.mediapipe.LocationData.BinaryMask.toObject(o,this)},proto.mediapipe.LocationData.BinaryMask.toObject=function(o,s){var p,l={width:(p=e.Message.getField(s,1))==null?void 0:p,height:(p=e.Message.getField(s,2))==null?void 0:p,rasterization:(p=s.getRasterization())&&i.Rasterization.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.LocationData.BinaryMask.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.LocationData.BinaryMask;return proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader(p,s)},proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readInt32();o.setWidth(p);break;case 2:p=s.readInt32(),o.setHeight(p);break;case 3:p=new i.Rasterization,s.readMessage(p,i.Rasterization.deserializeBinaryFromReader),o.setRasterization(p);break;default:s.skipField()}return o},proto.mediapipe.LocationData.BinaryMask.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeInt32(1,p),(p=e.Message.getField(o,2))!=null&&s.writeInt32(2,p),(p=o.getRasterization())!=null&&s.writeMessage(3,p,i.Rasterization.serializeBinaryToWriter)},proto.mediapipe.LocationData.BinaryMask.prototype.getWidth=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setWidth=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.LocationData.BinaryMask.prototype.clearWidth=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasWidth=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getHeight=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setHeight=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.LocationData.BinaryMask.prototype.clearHeight=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasHeight=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getRasterization=function(){return e.Message.getWrapperField(this,i.Rasterization,3)},proto.mediapipe.LocationData.BinaryMask.prototype.setRasterization=function(o){return e.Message.setWrapperField(this,3,o)},proto.mediapipe.LocationData.BinaryMask.prototype.clearRasterization=function(){return this.setRasterization(void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasRasterization=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeKeypoint.prototype.toObject=function(o){return proto.mediapipe.LocationData.RelativeKeypoint.toObject(o,this)},proto.mediapipe.LocationData.RelativeKeypoint.toObject=function(o,s){var p,l={x:(p=e.Message.getOptionalFloatingPointField(s,1))==null?void 0:p,y:(p=e.Message.getOptionalFloatingPointField(s,2))==null?void 0:p,keypointLabel:(p=e.Message.getField(s,3))==null?void 0:p,score:(p=e.Message.getOptionalFloatingPointField(s,4))==null?void 0:p};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.LocationData.RelativeKeypoint;return proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader(p,s)},proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readFloat();o.setX(p);break;case 2:p=s.readFloat(),o.setY(p);break;case 3:p=s.readString(),o.setKeypointLabel(p);break;case 4:p=s.readFloat(),o.setScore(p);break;default:s.skipField()}return o},proto.mediapipe.LocationData.RelativeKeypoint.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeFloat(1,p),(p=e.Message.getField(o,2))!=null&&s.writeFloat(2,p),(p=e.Message.getField(o,3))!=null&&s.writeString(3,p),(p=e.Message.getField(o,4))!=null&&s.writeFloat(4,p)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getX=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setX=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearX=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasX=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getY=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setY=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearY=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasY=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getKeypointLabel=function(){return e.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setKeypointLabel=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearKeypointLabel=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasKeypointLabel=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getScore=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setScore=function(o){return e.Message.setField(this,4,o)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearScore=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasScore=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getFormat=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.prototype.setFormat=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.LocationData.prototype.clearFormat=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.prototype.hasFormat=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LocationData.prototype.getBoundingBox=function(){return e.Message.getWrapperField(this,proto.mediapipe.LocationData.BoundingBox,2)},proto.mediapipe.LocationData.prototype.setBoundingBox=function(o){return e.Message.setWrapperField(this,2,o)},proto.mediapipe.LocationData.prototype.clearBoundingBox=function(){return this.setBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasBoundingBox=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LocationData.prototype.getRelativeBoundingBox=function(){return e.Message.getWrapperField(this,proto.mediapipe.LocationData.RelativeBoundingBox,3)},proto.mediapipe.LocationData.prototype.setRelativeBoundingBox=function(o){return e.Message.setWrapperField(this,3,o)},proto.mediapipe.LocationData.prototype.clearRelativeBoundingBox=function(){return this.setRelativeBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasRelativeBoundingBox=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.LocationData.prototype.getMask=function(){return e.Message.getWrapperField(this,proto.mediapipe.LocationData.BinaryMask,4)},proto.mediapipe.LocationData.prototype.setMask=function(o){return e.Message.setWrapperField(this,4,o)},proto.mediapipe.LocationData.prototype.clearMask=function(){return this.setMask(void 0)},proto.mediapipe.LocationData.prototype.hasMask=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getRelativeKeypointsList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.LocationData.RelativeKeypoint,5)},proto.mediapipe.LocationData.prototype.setRelativeKeypointsList=function(o){return e.Message.setRepeatedWrapperField(this,5,o)},proto.mediapipe.LocationData.prototype.addRelativeKeypoints=function(o,s){return e.Message.addToRepeatedWrapperField(this,5,o,proto.mediapipe.LocationData.RelativeKeypoint,s)},proto.mediapipe.LocationData.prototype.clearRelativeKeypointsList=function(){return this.setRelativeKeypointsList([])},r.object.extend(t,proto.mediapipe)})(ZR),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=ZR;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.Detection",null,n),r.exportSymbol("proto.mediapipe.Detection.AssociatedDetection",null,n),r.exportSymbol("proto.mediapipe.DetectionList",null,n),proto.mediapipe.Detection=function(o){e.Message.initialize(this,o,0,-1,proto.mediapipe.Detection.repeatedFields_,null)},r.inherits(proto.mediapipe.Detection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.displayName="proto.mediapipe.Detection"),proto.mediapipe.Detection.AssociatedDetection=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.Detection.AssociatedDetection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.AssociatedDetection.displayName="proto.mediapipe.Detection.AssociatedDetection"),proto.mediapipe.DetectionList=function(o){e.Message.initialize(this,o,0,-1,proto.mediapipe.DetectionList.repeatedFields_,null)},r.inherits(proto.mediapipe.DetectionList,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.DetectionList.displayName="proto.mediapipe.DetectionList"),proto.mediapipe.Detection.repeatedFields_=[1,2,3,8,9],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.prototype.toObject=function(o){return proto.mediapipe.Detection.toObject(o,this)},proto.mediapipe.Detection.toObject=function(o,s){var p,l={labelList:(p=e.Message.getRepeatedField(s,1))==null?void 0:p,labelIdList:(p=e.Message.getRepeatedField(s,2))==null?void 0:p,scoreList:(p=e.Message.getRepeatedFloatingPointField(s,3))==null?void 0:p,locationData:(p=s.getLocationData())&&i.LocationData.toObject(o,p),featureTag:(p=e.Message.getField(s,5))==null?void 0:p,trackId:(p=e.Message.getField(s,6))==null?void 0:p,detectionId:(p=e.Message.getField(s,7))==null?void 0:p,associatedDetectionsList:e.Message.toObjectList(s.getAssociatedDetectionsList(),proto.mediapipe.Detection.AssociatedDetection.toObject,o),displayNameList:(p=e.Message.getRepeatedField(s,9))==null?void 0:p,timestampUsec:(p=e.Message.getField(s,10))==null?void 0:p};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.Detection.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.Detection;return proto.mediapipe.Detection.deserializeBinaryFromReader(p,s)},proto.mediapipe.Detection.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readString();o.addLabel(p);break;case 2:for(var l=s.isDelimited()?s.readPackedInt32():[s.readInt32()],c=0;c<l.length;c++)o.addLabelId(l[c]);break;case 3:for(l=s.isDelimited()?s.readPackedFloat():[s.readFloat()],c=0;c<l.length;c++)o.addScore(l[c]);break;case 4:p=new i.LocationData,s.readMessage(p,i.LocationData.deserializeBinaryFromReader),o.setLocationData(p);break;case 5:p=s.readString(),o.setFeatureTag(p);break;case 6:p=s.readString(),o.setTrackId(p);break;case 7:p=s.readInt64(),o.setDetectionId(p);break;case 8:p=new proto.mediapipe.Detection.AssociatedDetection,s.readMessage(p,proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader),o.addAssociatedDetections(p);break;case 9:p=s.readString(),o.addDisplayName(p);break;case 10:p=s.readInt64(),o.setTimestampUsec(p);break;default:s.skipField()}return o},proto.mediapipe.Detection.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.Detection.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.Detection.serializeBinaryToWriter=function(o,s){var p=void 0;(p=o.getLabelList()).length>0&&s.writeRepeatedString(1,p),(p=o.getLabelIdList()).length>0&&s.writePackedInt32(2,p),(p=o.getScoreList()).length>0&&s.writePackedFloat(3,p),(p=o.getLocationData())!=null&&s.writeMessage(4,p,i.LocationData.serializeBinaryToWriter),(p=e.Message.getField(o,5))!=null&&s.writeString(5,p),(p=e.Message.getField(o,6))!=null&&s.writeString(6,p),(p=e.Message.getField(o,7))!=null&&s.writeInt64(7,p),(p=o.getAssociatedDetectionsList()).length>0&&s.writeRepeatedMessage(8,p,proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter),(p=o.getDisplayNameList()).length>0&&s.writeRepeatedString(9,p),(p=e.Message.getField(o,10))!=null&&s.writeInt64(10,p)},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.AssociatedDetection.prototype.toObject=function(o){return proto.mediapipe.Detection.AssociatedDetection.toObject(o,this)},proto.mediapipe.Detection.AssociatedDetection.toObject=function(o,s){var p,l={id:(p=e.Message.getField(s,1))==null?void 0:p,confidence:(p=e.Message.getOptionalFloatingPointField(s,2))==null?void 0:p};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.Detection.AssociatedDetection.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.Detection.AssociatedDetection;return proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader(p,s)},proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readInt32();o.setId(p);break;case 2:p=s.readFloat(),o.setConfidence(p);break;default:s.skipField()}return o},proto.mediapipe.Detection.AssociatedDetection.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeInt32(1,p),(p=e.Message.getField(o,2))!=null&&s.writeFloat(2,p)},proto.mediapipe.Detection.AssociatedDetection.prototype.getId=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setId=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearId=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasId=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Detection.AssociatedDetection.prototype.getConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setConfidence=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Detection.prototype.getLabelList=function(){return e.Message.getRepeatedField(this,1)},proto.mediapipe.Detection.prototype.setLabelList=function(o){return e.Message.setField(this,1,o||[])},proto.mediapipe.Detection.prototype.addLabel=function(o,s){return e.Message.addToRepeatedField(this,1,o,s)},proto.mediapipe.Detection.prototype.clearLabelList=function(){return this.setLabelList([])},proto.mediapipe.Detection.prototype.getLabelIdList=function(){return e.Message.getRepeatedField(this,2)},proto.mediapipe.Detection.prototype.setLabelIdList=function(o){return e.Message.setField(this,2,o||[])},proto.mediapipe.Detection.prototype.addLabelId=function(o,s){return e.Message.addToRepeatedField(this,2,o,s)},proto.mediapipe.Detection.prototype.clearLabelIdList=function(){return this.setLabelIdList([])},proto.mediapipe.Detection.prototype.getScoreList=function(){return e.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.Detection.prototype.setScoreList=function(o){return e.Message.setField(this,3,o||[])},proto.mediapipe.Detection.prototype.addScore=function(o,s){return e.Message.addToRepeatedField(this,3,o,s)},proto.mediapipe.Detection.prototype.clearScoreList=function(){return this.setScoreList([])},proto.mediapipe.Detection.prototype.getLocationData=function(){return e.Message.getWrapperField(this,i.LocationData,4)},proto.mediapipe.Detection.prototype.setLocationData=function(o){return e.Message.setWrapperField(this,4,o)},proto.mediapipe.Detection.prototype.clearLocationData=function(){return this.setLocationData(void 0)},proto.mediapipe.Detection.prototype.hasLocationData=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.Detection.prototype.getFeatureTag=function(){return e.Message.getFieldWithDefault(this,5,"")},proto.mediapipe.Detection.prototype.setFeatureTag=function(o){return e.Message.setField(this,5,o)},proto.mediapipe.Detection.prototype.clearFeatureTag=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.Detection.prototype.hasFeatureTag=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.Detection.prototype.getTrackId=function(){return e.Message.getFieldWithDefault(this,6,"")},proto.mediapipe.Detection.prototype.setTrackId=function(o){return e.Message.setField(this,6,o)},proto.mediapipe.Detection.prototype.clearTrackId=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.Detection.prototype.hasTrackId=function(){return e.Message.getField(this,6)!=null},proto.mediapipe.Detection.prototype.getDetectionId=function(){return e.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.Detection.prototype.setDetectionId=function(o){return e.Message.setField(this,7,o)},proto.mediapipe.Detection.prototype.clearDetectionId=function(){return e.Message.setField(this,7,void 0)},proto.mediapipe.Detection.prototype.hasDetectionId=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.Detection.prototype.getAssociatedDetectionsList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection.AssociatedDetection,8)},proto.mediapipe.Detection.prototype.setAssociatedDetectionsList=function(o){return e.Message.setRepeatedWrapperField(this,8,o)},proto.mediapipe.Detection.prototype.addAssociatedDetections=function(o,s){return e.Message.addToRepeatedWrapperField(this,8,o,proto.mediapipe.Detection.AssociatedDetection,s)},proto.mediapipe.Detection.prototype.clearAssociatedDetectionsList=function(){return this.setAssociatedDetectionsList([])},proto.mediapipe.Detection.prototype.getDisplayNameList=function(){return e.Message.getRepeatedField(this,9)},proto.mediapipe.Detection.prototype.setDisplayNameList=function(o){return e.Message.setField(this,9,o||[])},proto.mediapipe.Detection.prototype.addDisplayName=function(o,s){return e.Message.addToRepeatedField(this,9,o,s)},proto.mediapipe.Detection.prototype.clearDisplayNameList=function(){return this.setDisplayNameList([])},proto.mediapipe.Detection.prototype.getTimestampUsec=function(){return e.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.Detection.prototype.setTimestampUsec=function(o){return e.Message.setField(this,10,o)},proto.mediapipe.Detection.prototype.clearTimestampUsec=function(){return e.Message.setField(this,10,void 0)},proto.mediapipe.Detection.prototype.hasTimestampUsec=function(){return e.Message.getField(this,10)!=null},proto.mediapipe.DetectionList.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.DetectionList.prototype.toObject=function(o){return proto.mediapipe.DetectionList.toObject(o,this)},proto.mediapipe.DetectionList.toObject=function(o,s){var p={detectionList:e.Message.toObjectList(s.getDetectionList(),proto.mediapipe.Detection.toObject,o)};return o&&(p.$jspbMessageInstance=s),p}),proto.mediapipe.DetectionList.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.DetectionList;return proto.mediapipe.DetectionList.deserializeBinaryFromReader(p,s)},proto.mediapipe.DetectionList.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)if(s.getFieldNumber()===1){var p=new proto.mediapipe.Detection;s.readMessage(p,proto.mediapipe.Detection.deserializeBinaryFromReader),o.addDetection(p)}else s.skipField();return o},proto.mediapipe.DetectionList.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.DetectionList.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.DetectionList.serializeBinaryToWriter=function(o,s){var p;(p=o.getDetectionList()).length>0&&s.writeRepeatedMessage(1,p,proto.mediapipe.Detection.serializeBinaryToWriter)},proto.mediapipe.DetectionList.prototype.getDetectionList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection,1)},proto.mediapipe.DetectionList.prototype.setDetectionList=function(o){return e.Message.setRepeatedWrapperField(this,1,o)},proto.mediapipe.DetectionList.prototype.addDetection=function(o,s){return e.Message.addToRepeatedWrapperField(this,1,o,proto.mediapipe.Detection,s)},proto.mediapipe.DetectionList.prototype.clearDetectionList=function(){return this.setDetectionList([])},r.object.extend(t,proto.mediapipe)})(qy);kt={},Zy={},Ny={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite",null,n),r.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack",null,n),proto.mediapipe.InferenceCalculatorOptions=function(s){e.Message.initialize(this,s,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.displayName="proto.mediapipe.InferenceCalculatorOptions"),proto.mediapipe.InferenceCalculatorOptions.Delegate=function(s){e.Message.initialize(this,s,0,-1,null,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate"),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite=function(s){e.Message.initialize(this,s,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu=function(s){e.Message.initialize(this,s,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi=function(s){e.Message.initialize(this,s,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack=function(s){e.Message.initialize(this,s,0,-1,null,null)},r.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.toObject=function(s,p){var l,c={modelPath:(l=e.Message.getField(p,1))==null?void 0:l,useGpu:e.Message.getBooleanFieldWithDefault(p,2,!1),useNnapi:e.Message.getBooleanFieldWithDefault(p,3,!1),cpuNumThread:e.Message.getFieldWithDefault(p,4,-1),delegate:(l=p.getDelegate())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(s,l)};return s&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.InferenceCalculatorOptions.deserializeBinary=function(s){var p=new e.BinaryReader(s),l=new proto.mediapipe.InferenceCalculatorOptions;return proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader=function(s,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=p.readString();s.setModelPath(l);break;case 2:l=p.readBool(),s.setUseGpu(l);break;case 3:l=p.readBool(),s.setUseNnapi(l);break;case 4:l=p.readInt32(),s.setCpuNumThread(l);break;case 5:l=new proto.mediapipe.InferenceCalculatorOptions.Delegate,p.readMessage(l,proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader),s.setDelegate(l);break;default:p.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.prototype.serializeBinary=function(){var s=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter=function(s,p){var l=void 0;(l=e.Message.getField(s,1))!=null&&p.writeString(1,l),(l=e.Message.getField(s,2))!=null&&p.writeBool(2,l),(l=e.Message.getField(s,3))!=null&&p.writeBool(3,l),(l=e.Message.getField(s,4))!=null&&p.writeInt32(4,l),(l=s.getDelegate())!=null&&p.writeMessage(5,l,proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter)},proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_=[[1,2,3,4]],proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase={DELEGATE_NOT_SET:0,TFLITE:1,GPU:2,NNAPI:3,XNNPACK:4},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getDelegateCase=function(){return e.Message.computeOneofCase(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject=function(s,p){var l,c={tflite:(l=p.getTflite())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(s,l),gpu:(l=p.getGpu())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(s,l),nnapi:(l=p.getNnapi())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(s,l),xnnpack:(l=p.getXnnpack())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(s,l)};return s&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinary=function(s){var p=new e.BinaryReader(s),l=new proto.mediapipe.InferenceCalculatorOptions.Delegate;return proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader=function(s,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;p.readMessage(l,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),s.setTflite(l);break;case 2:l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,p.readMessage(l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),s.setGpu(l);break;case 3:l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,p.readMessage(l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),s.setNnapi(l);break;case 4:l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,p.readMessage(l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),s.setXnnpack(l);break;default:p.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.serializeBinary=function(){var s=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter=function(s,p){var l=void 0;(l=s.getTflite())!=null&&p.writeMessage(1,l,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(l=s.getGpu())!=null&&p.writeMessage(2,l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(l=s.getNnapi())!=null&&p.writeMessage(3,l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter),(l=s.getXnnpack())!=null&&p.writeMessage(4,l,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter)},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject=function(s,p){var l={};return s&&(l.$jspbMessageInstance=p),l}),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinary=function(s){var p=new e.BinaryReader(s),l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader=function(s,p){for(;p.nextField()&&!p.isEndGroup();)p.getFieldNumber(),p.skipField();return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.serializeBinary=function(){var s=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter=function(s,p){},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject=function(s,p){var l,c={useAdvancedGpuApi:e.Message.getBooleanFieldWithDefault(p,1,!1),api:e.Message.getFieldWithDefault(p,4,0),allowPrecisionLoss:e.Message.getBooleanFieldWithDefault(p,3,!0),cachedKernelPath:(l=e.Message.getField(p,2))==null?void 0:l,serializedModelDir:(l=e.Message.getField(p,7))==null?void 0:l,modelToken:(l=e.Message.getField(p,8))==null?void 0:l,usage:e.Message.getFieldWithDefault(p,5,2)};return s&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinary=function(s){var p=new e.BinaryReader(s),l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader=function(s,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=p.readBool();s.setUseAdvancedGpuApi(l);break;case 4:l=p.readEnum(),s.setApi(l);break;case 3:l=p.readBool(),s.setAllowPrecisionLoss(l);break;case 2:l=p.readString(),s.setCachedKernelPath(l);break;case 7:l=p.readString(),s.setSerializedModelDir(l);break;case 8:l=p.readString(),s.setModelToken(l);break;case 5:l=p.readEnum(),s.setUsage(l);break;default:p.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.serializeBinary=function(){var s=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter=function(s,p){var l=void 0;(l=e.Message.getField(s,1))!=null&&p.writeBool(1,l),(l=e.Message.getField(s,4))!=null&&p.writeEnum(4,l),(l=e.Message.getField(s,3))!=null&&p.writeBool(3,l),(l=e.Message.getField(s,2))!=null&&p.writeString(2,l),(l=e.Message.getField(s,7))!=null&&p.writeString(7,l),(l=e.Message.getField(s,8))!=null&&p.writeString(8,l),(l=e.Message.getField(s,5))!=null&&p.writeEnum(5,l)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api={ANY:0,OPENGL:1,OPENCL:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage={UNSPECIFIED:0,FAST_SINGLE_ANSWER:1,SUSTAINED_SPEED:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUseAdvancedGpuApi=function(){return e.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUseAdvancedGpuApi=function(s){return e.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUseAdvancedGpuApi=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUseAdvancedGpuApi=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getApi=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setApi=function(s){return e.Message.setField(this,4,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearApi=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasApi=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getAllowPrecisionLoss=function(){return e.Message.getBooleanFieldWithDefault(this,3,!0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setAllowPrecisionLoss=function(s){return e.Message.setField(this,3,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearAllowPrecisionLoss=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasAllowPrecisionLoss=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getCachedKernelPath=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setCachedKernelPath=function(s){return e.Message.setField(this,2,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearCachedKernelPath=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasCachedKernelPath=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getSerializedModelDir=function(){return e.Message.getFieldWithDefault(this,7,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setSerializedModelDir=function(s){return e.Message.setField(this,7,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearSerializedModelDir=function(){return e.Message.setField(this,7,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasSerializedModelDir=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getModelToken=function(){return e.Message.getFieldWithDefault(this,8,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setModelToken=function(s){return e.Message.setField(this,8,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearModelToken=function(){return e.Message.setField(this,8,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasModelToken=function(){return e.Message.getField(this,8)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUsage=function(){return e.Message.getFieldWithDefault(this,5,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUsage=function(s){return e.Message.setField(this,5,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUsage=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUsage=function(){return e.Message.getField(this,5)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject=function(s,p){var l,c={cacheDir:(l=e.Message.getField(p,1))==null?void 0:l,modelToken:(l=e.Message.getField(p,2))==null?void 0:l,acceleratorName:(l=e.Message.getField(p,3))==null?void 0:l};return s&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinary=function(s){var p=new e.BinaryReader(s),l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader=function(s,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=p.readString();s.setCacheDir(l);break;case 2:l=p.readString(),s.setModelToken(l);break;case 3:l=p.readString(),s.setAcceleratorName(l);break;default:p.skipField()}return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.serializeBinary=function(){var s=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter=function(s,p){var l=void 0;(l=e.Message.getField(s,1))!=null&&p.writeString(1,l),(l=e.Message.getField(s,2))!=null&&p.writeString(2,l),(l=e.Message.getField(s,3))!=null&&p.writeString(3,l)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getCacheDir=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setCacheDir=function(s){return e.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearCacheDir=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasCacheDir=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getModelToken=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setModelToken=function(s){return e.Message.setField(this,2,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearModelToken=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasModelToken=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getAcceleratorName=function(){return e.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setAcceleratorName=function(s){return e.Message.setField(this,3,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearAcceleratorName=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasAcceleratorName=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.toObject=function(s){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(s,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject=function(s,p){var l={numThreads:e.Message.getFieldWithDefault(p,1,-1)};return s&&(l.$jspbMessageInstance=p),l}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinary=function(s){var p=new e.BinaryReader(s),l=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader(l,p)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader=function(s,p){for(;p.nextField()&&!p.isEndGroup();)if(p.getFieldNumber()===1){var l=p.readInt32();s.setNumThreads(l)}else p.skipField();return s},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.serializeBinary=function(){var s=new e.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter=function(s,p){var l;(l=e.Message.getField(s,1))!=null&&p.writeInt32(1,l)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.getNumThreads=function(){return e.Message.getFieldWithDefault(this,1,-1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.setNumThreads=function(s){return e.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.clearNumThreads=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.hasNumThreads=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getTflite=function(){return e.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setTflite=function(s){return e.Message.setOneofWrapperField(this,1,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasTflite=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getGpu=function(){return e.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setGpu=function(s){return e.Message.setOneofWrapperField(this,2,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasGpu=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getNnapi=function(){return e.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setNnapi=function(s){return e.Message.setOneofWrapperField(this,3,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasNnapi=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getXnnpack=function(){return e.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,4)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setXnnpack=function(s){return e.Message.setOneofWrapperField(this,4,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],s)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasXnnpack=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new e.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[336783863]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,proto.mediapipe.InferenceCalculatorOptions.prototype.getModelPath=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.prototype.setModelPath=function(s){return e.Message.setField(this,1,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearModelPath=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasModelPath=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseGpu=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseGpu=function(s){return e.Message.setField(this,2,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseGpu=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseGpu=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseNnapi=function(){return e.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseNnapi=function(s){return e.Message.setField(this,3,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseNnapi=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseNnapi=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getCpuNumThread=function(){return e.Message.getFieldWithDefault(this,4,-1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setCpuNumThread=function(s){return e.Message.setField(this,4,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearCpuNumThread=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasCpuNumThread=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getDelegate=function(){return e.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate,5)},proto.mediapipe.InferenceCalculatorOptions.prototype.setDelegate=function(s){return e.Message.setWrapperField(this,5,s)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearDelegate=function(){return this.setDelegate(void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasDelegate=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new e.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[336783863]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,r.object.extend(t,proto.mediapipe)})(Ny),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=Ny;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration",null,n),r.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase",null,n),proto.mediapipe.tasks.core.proto.Acceleration=function(o){e.Message.initialize(this,o,0,-1,null,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_)},r.inherits(proto.mediapipe.tasks.core.proto.Acceleration,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.Acceleration.displayName="proto.mediapipe.tasks.core.proto.Acceleration"),proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_=[[1,2,4,5]],proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase={DELEGATE_NOT_SET:0,XNNPACK:1,GPU:2,TFLITE:4,NNAPI:5},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getDelegateCase=function(){return e.Message.computeOneofCase(this,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.Acceleration.prototype.toObject=function(o){return proto.mediapipe.tasks.core.proto.Acceleration.toObject(o,this)},proto.mediapipe.tasks.core.proto.Acceleration.toObject=function(o,s){var p,l={xnnpack:(p=s.getXnnpack())&&i.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(o,p),gpu:(p=s.getGpu())&&i.InferenceCalculatorOptions.Delegate.Gpu.toObject(o,p),tflite:(p=s.getTflite())&&i.InferenceCalculatorOptions.Delegate.TfLite.toObject(o,p),nnapi:(p=s.getNnapi())&&i.InferenceCalculatorOptions.Delegate.Nnapi.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.tasks.core.proto.Acceleration;return proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader(p,s)},proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=new i.InferenceCalculatorOptions.Delegate.Xnnpack;s.readMessage(p,i.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),o.setXnnpack(p);break;case 2:p=new i.InferenceCalculatorOptions.Delegate.Gpu,s.readMessage(p,i.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),o.setGpu(p);break;case 4:p=new i.InferenceCalculatorOptions.Delegate.TfLite,s.readMessage(p,i.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),o.setTflite(p);break;case 5:p=new i.InferenceCalculatorOptions.Delegate.Nnapi,s.readMessage(p,i.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),o.setNnapi(p);break;default:s.skipField()}return o},proto.mediapipe.tasks.core.proto.Acceleration.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter=function(o,s){var p=void 0;(p=o.getXnnpack())!=null&&s.writeMessage(1,p,i.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter),(p=o.getGpu())!=null&&s.writeMessage(2,p,i.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(p=o.getTflite())!=null&&s.writeMessage(4,p,i.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(p=o.getNnapi())!=null&&s.writeMessage(5,p,i.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getXnnpack=function(){return e.Message.getWrapperField(this,i.InferenceCalculatorOptions.Delegate.Xnnpack,1)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setXnnpack=function(o){return e.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],o)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasXnnpack=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getGpu=function(){return e.Message.getWrapperField(this,i.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setGpu=function(o){return e.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],o)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasGpu=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getTflite=function(){return e.Message.getWrapperField(this,i.InferenceCalculatorOptions.Delegate.TfLite,4)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setTflite=function(o){return e.Message.setOneofWrapperField(this,4,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],o)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasTflite=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getNnapi=function(){return e.Message.getWrapperField(this,i.InferenceCalculatorOptions.Delegate.Nnapi,5)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setNnapi=function(o){return e.Message.setOneofWrapperField(this,5,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],o)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasNnapi=function(){return e.Message.getField(this,5)!=null},r.object.extend(t,proto.mediapipe.tasks.core.proto)})(Zy);Kg={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.core.proto.ExternalFile",null,n),r.exportSymbol("proto.mediapipe.tasks.core.proto.FileDescriptorMeta",null,n),r.exportSymbol("proto.mediapipe.tasks.core.proto.FilePointerMeta",null,n),proto.mediapipe.tasks.core.proto.ExternalFile=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.ExternalFile,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.ExternalFile.displayName="proto.mediapipe.tasks.core.proto.ExternalFile"),proto.mediapipe.tasks.core.proto.FileDescriptorMeta=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.FileDescriptorMeta,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.displayName="proto.mediapipe.tasks.core.proto.FileDescriptorMeta"),proto.mediapipe.tasks.core.proto.FilePointerMeta=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.FilePointerMeta,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.displayName="proto.mediapipe.tasks.core.proto.FilePointerMeta"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.ExternalFile.prototype.toObject=function(i){return proto.mediapipe.tasks.core.proto.ExternalFile.toObject(i,this)},proto.mediapipe.tasks.core.proto.ExternalFile.toObject=function(i,o){var s,p={fileContent:o.getFileContent_asB64(),fileName:(s=e.Message.getField(o,2))==null?void 0:s,fileDescriptorMeta:(s=o.getFileDescriptorMeta())&&proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(i,s),filePointerMeta:(s=o.getFilePointerMeta())&&proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(i,s)};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.tasks.core.proto.ExternalFile;return proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader(s,o)},proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readBytes();i.setFileContent(s);break;case 2:s=o.readString(),i.setFileName(s);break;case 3:s=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta,o.readMessage(s,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader),i.setFileDescriptorMeta(s);break;case 4:s=new proto.mediapipe.tasks.core.proto.FilePointerMeta,o.readMessage(s,proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader),i.setFilePointerMeta(s);break;default:o.skipField()}return i},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeBytes(1,s),(s=e.Message.getField(i,2))!=null&&o.writeString(2,s),(s=i.getFileDescriptorMeta())!=null&&o.writeMessage(3,s,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter),(s=i.getFilePointerMeta())!=null&&o.writeMessage(4,s,proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asB64=function(){return e.Message.bytesAsB64(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asU8=function(){return e.Message.bytesAsU8(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileContent=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileContent=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileContent=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileName=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileName=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileName=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileName=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileDescriptorMeta=function(){return e.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FileDescriptorMeta,3)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileDescriptorMeta=function(i){return e.Message.setWrapperField(this,3,i)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileDescriptorMeta=function(){return this.setFileDescriptorMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileDescriptorMeta=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFilePointerMeta=function(){return e.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FilePointerMeta,4)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFilePointerMeta=function(i){return e.Message.setWrapperField(this,4,i)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFilePointerMeta=function(){return this.setFilePointerMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFilePointerMeta=function(){return e.Message.getField(this,4)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.toObject=function(i){return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(i,this)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject=function(i,o){var s,p={fd:(s=e.Message.getField(o,1))==null?void 0:s,length:(s=e.Message.getField(o,2))==null?void 0:s,offset:(s=e.Message.getField(o,3))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader(s,o)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readInt32();i.setFd(s);break;case 2:s=o.readInt64(),i.setLength(s);break;case 3:s=o.readInt64(),i.setOffset(s);break;default:o.skipField()}return i},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeInt32(1,s),(s=e.Message.getField(i,2))!=null&&o.writeInt64(2,s),(s=e.Message.getField(i,3))!=null&&o.writeInt64(3,s)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getFd=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setFd=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearFd=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasFd=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getLength=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setLength=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearLength=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasLength=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getOffset=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setOffset=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearOffset=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasOffset=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.toObject=function(i){return proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(i,this)},proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject=function(i,o){var s,p={pointer:(s=e.Message.getField(o,1))==null?void 0:s,length:(s=e.Message.getField(o,2))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.tasks.core.proto.FilePointerMeta;return proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader(s,o)},proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readUint64();i.setPointer(s);break;case 2:s=o.readInt64(),i.setLength(s);break;default:o.skipField()}return i},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeUint64(1,s),(s=e.Message.getField(i,2))!=null&&o.writeInt64(2,s)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getPointer=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setPointer=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearPointer=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasPointer=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getLength=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setLength=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearLength=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasLength=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.core.proto)})(Kg),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=Zy;r.object.extend(proto,i);var o=Kg;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.core.proto.BaseOptions",null,n),proto.mediapipe.tasks.core.proto.BaseOptions=function(s){e.Message.initialize(this,s,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.core.proto.BaseOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.BaseOptions.displayName="proto.mediapipe.tasks.core.proto.BaseOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.BaseOptions.prototype.toObject=function(s){return proto.mediapipe.tasks.core.proto.BaseOptions.toObject(s,this)},proto.mediapipe.tasks.core.proto.BaseOptions.toObject=function(s,p){var l,c={modelAsset:(l=p.getModelAsset())&&o.ExternalFile.toObject(s,l),useStreamMode:e.Message.getBooleanFieldWithDefault(p,2,!1),acceleration:(l=p.getAcceleration())&&i.Acceleration.toObject(s,l)};return s&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinary=function(s){var p=new e.BinaryReader(s),l=new proto.mediapipe.tasks.core.proto.BaseOptions;return proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader(l,p)},proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader=function(s,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=new o.ExternalFile;p.readMessage(l,o.ExternalFile.deserializeBinaryFromReader),s.setModelAsset(l);break;case 2:l=p.readBool(),s.setUseStreamMode(l);break;case 3:l=new i.Acceleration,p.readMessage(l,i.Acceleration.deserializeBinaryFromReader),s.setAcceleration(l);break;default:p.skipField()}return s},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.serializeBinary=function(){var s=new e.BinaryWriter;return proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter=function(s,p){var l=void 0;(l=s.getModelAsset())!=null&&p.writeMessage(1,l,o.ExternalFile.serializeBinaryToWriter),(l=e.Message.getField(s,2))!=null&&p.writeBool(2,l),(l=s.getAcceleration())!=null&&p.writeMessage(3,l,i.Acceleration.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getModelAsset=function(){return e.Message.getWrapperField(this,o.ExternalFile,1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setModelAsset=function(s){return e.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearModelAsset=function(){return this.setModelAsset(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasModelAsset=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getUseStreamMode=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setUseStreamMode=function(s){return e.Message.setField(this,2,s)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearUseStreamMode=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasUseStreamMode=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getAcceleration=function(){return e.Message.getWrapperField(this,i.Acceleration,3)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setAcceleration=function(s){return e.Message.setWrapperField(this,3,s)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearAcceleration=function(){return this.setAcceleration(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasAcceleration=function(){return e.Message.getField(this,3)!=null},r.object.extend(t,proto.mediapipe.tasks.core.proto)})(kt);eh={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject=function(p,l){var c,u={baseOptions:(c=l.getBaseOptions())&&s.BaseOptions.toObject(p,c),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(l,2,.5),minSuppressionThreshold:e.Message.getFloatingPointFieldWithDefault(l,3,.5),numFaces:(c=e.Message.getField(l,4))==null?void 0:c};return p&&(u.$jspbMessageInstance=l),u}),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new s.BaseOptions;l.readMessage(c,s.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readFloat(),p.setMinDetectionConfidence(c);break;case 3:c=l.readFloat(),p.setMinSuppressionThreshold(c);break;case 4:c=l.readInt32(),p.setNumFaces(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,s.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeFloat(2,c),(c=e.Message.getField(p,3))!=null&&l.writeFloat(3,c),(c=e.Message.getField(p,4))!=null&&l.writeInt32(4,c)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new e.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[502141897]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinDetectionConfidence=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(p){return e.Message.setField(this,3,p)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getNumFaces=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setNumFaces=function(p){return e.Message.setField(this,4,p)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearNumFaces=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasNumFaces=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new e.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[502141897]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_detector.proto)})(eh);Wd={};Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.convertFromDetectionProto=void 0;Yz=-1;Wd.convertFromDetectionProto=Kz;ko={},wB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.NormalizedRect",null,n),r.exportSymbol("proto.mediapipe.Rect",null,n),proto.mediapipe.Rect=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.Rect,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Rect.displayName="proto.mediapipe.Rect"),proto.mediapipe.NormalizedRect=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.NormalizedRect,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedRect.displayName="proto.mediapipe.NormalizedRect"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rect.prototype.toObject=function(i){return proto.mediapipe.Rect.toObject(i,this)},proto.mediapipe.Rect.toObject=function(i,o){var s,p={xCenter:(s=e.Message.getField(o,1))==null?void 0:s,yCenter:(s=e.Message.getField(o,2))==null?void 0:s,height:(s=e.Message.getField(o,3))==null?void 0:s,width:(s=e.Message.getField(o,4))==null?void 0:s,rotation:e.Message.getFloatingPointFieldWithDefault(o,5,0),rectId:(s=e.Message.getField(o,6))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.Rect.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.Rect;return proto.mediapipe.Rect.deserializeBinaryFromReader(s,o)},proto.mediapipe.Rect.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readInt32();i.setXCenter(s);break;case 2:s=o.readInt32(),i.setYCenter(s);break;case 3:s=o.readInt32(),i.setHeight(s);break;case 4:s=o.readInt32(),i.setWidth(s);break;case 5:s=o.readFloat(),i.setRotation(s);break;case 6:s=o.readInt64(),i.setRectId(s);break;default:o.skipField()}return i},proto.mediapipe.Rect.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.Rect.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.Rect.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeInt32(1,s),(s=e.Message.getField(i,2))!=null&&o.writeInt32(2,s),(s=e.Message.getField(i,3))!=null&&o.writeInt32(3,s),(s=e.Message.getField(i,4))!=null&&o.writeInt32(4,s),(s=e.Message.getField(i,5))!=null&&o.writeFloat(5,s),(s=e.Message.getField(i,6))!=null&&o.writeInt64(6,s)},proto.mediapipe.Rect.prototype.getXCenter=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rect.prototype.setXCenter=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.Rect.prototype.clearXCenter=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Rect.prototype.hasXCenter=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Rect.prototype.getYCenter=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rect.prototype.setYCenter=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.Rect.prototype.clearYCenter=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Rect.prototype.hasYCenter=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Rect.prototype.getHeight=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rect.prototype.setHeight=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.Rect.prototype.clearHeight=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.Rect.prototype.hasHeight=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.Rect.prototype.getWidth=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.Rect.prototype.setWidth=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.Rect.prototype.clearWidth=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.Rect.prototype.hasWidth=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.Rect.prototype.getRotation=function(){return e.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Rect.prototype.setRotation=function(i){return e.Message.setField(this,5,i)},proto.mediapipe.Rect.prototype.clearRotation=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.Rect.prototype.hasRotation=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.Rect.prototype.getRectId=function(){return e.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.Rect.prototype.setRectId=function(i){return e.Message.setField(this,6,i)},proto.mediapipe.Rect.prototype.clearRectId=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.Rect.prototype.hasRectId=function(){return e.Message.getField(this,6)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedRect.prototype.toObject=function(i){return proto.mediapipe.NormalizedRect.toObject(i,this)},proto.mediapipe.NormalizedRect.toObject=function(i,o){var s,p={xCenter:(s=e.Message.getOptionalFloatingPointField(o,1))==null?void 0:s,yCenter:(s=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:s,height:(s=e.Message.getOptionalFloatingPointField(o,3))==null?void 0:s,width:(s=e.Message.getOptionalFloatingPointField(o,4))==null?void 0:s,rotation:e.Message.getFloatingPointFieldWithDefault(o,5,0),rectId:(s=e.Message.getField(o,6))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.NormalizedRect.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.NormalizedRect;return proto.mediapipe.NormalizedRect.deserializeBinaryFromReader(s,o)},proto.mediapipe.NormalizedRect.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readFloat();i.setXCenter(s);break;case 2:s=o.readFloat(),i.setYCenter(s);break;case 3:s=o.readFloat(),i.setHeight(s);break;case 4:s=o.readFloat(),i.setWidth(s);break;case 5:s=o.readFloat(),i.setRotation(s);break;case 6:s=o.readInt64(),i.setRectId(s);break;default:o.skipField()}return i},proto.mediapipe.NormalizedRect.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.NormalizedRect.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.NormalizedRect.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeFloat(1,s),(s=e.Message.getField(i,2))!=null&&o.writeFloat(2,s),(s=e.Message.getField(i,3))!=null&&o.writeFloat(3,s),(s=e.Message.getField(i,4))!=null&&o.writeFloat(4,s),(s=e.Message.getField(i,5))!=null&&o.writeFloat(5,s),(s=e.Message.getField(i,6))!=null&&o.writeInt64(6,s)},proto.mediapipe.NormalizedRect.prototype.getXCenter=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedRect.prototype.setXCenter=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.NormalizedRect.prototype.clearXCenter=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedRect.prototype.hasXCenter=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.NormalizedRect.prototype.getYCenter=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedRect.prototype.setYCenter=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.NormalizedRect.prototype.clearYCenter=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedRect.prototype.hasYCenter=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.NormalizedRect.prototype.getHeight=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedRect.prototype.setHeight=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.NormalizedRect.prototype.clearHeight=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedRect.prototype.hasHeight=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.NormalizedRect.prototype.getWidth=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedRect.prototype.setWidth=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.NormalizedRect.prototype.clearWidth=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedRect.prototype.hasWidth=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.NormalizedRect.prototype.getRotation=function(){return e.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedRect.prototype.setRotation=function(i){return e.Message.setField(this,5,i)},proto.mediapipe.NormalizedRect.prototype.clearRotation=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRotation=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.NormalizedRect.prototype.getRectId=function(){return e.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.NormalizedRect.prototype.setRectId=function(i){return e.Message.setField(this,6,i)},proto.mediapipe.NormalizedRect.prototype.clearRectId=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRectId=function(){return e.Message.getField(this,6)!=null},r.object.extend(t,proto.mediapipe)})(wB);Wa={},$y={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.createGraphRunner=t.createMediaPipeLib=t.GraphRunner=t.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME=void 0;let e=Ha;t.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME="__graph_config__";class r{constructor(s,p){this.autoResizeCanvas=!0,this.wasmModule=s,this.audioPtr=null,this.audioSize=0,this.hasMultiStreamSupport=typeof this.wasmModule._addIntToInputStream=="function",p!==void 0?this.wasmModule.canvas=p:typeof OffscreenCanvas>"u"||(0,e.isWebKit)()?(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.wasmModule.canvas=document.createElement("canvas")):this.wasmModule.canvas=new OffscreenCanvas(1,1)}async initializeGraph(s){let p=await fetch(s),l=await p.arrayBuffer(),c=!(s.endsWith(".pbtxt")||s.endsWith(".textproto"));this.setGraph(new Uint8Array(l),c)}setGraphFromString(s){this.setGraph(new TextEncoder().encode(s),!1)}setGraph(s,p){let l=s.length,c=this.wasmModule._malloc(l);this.wasmModule.HEAPU8.set(s,c),p?this.wasmModule._changeBinaryGraph(l,c):this.wasmModule._changeTextGraph(l,c),this.wasmModule._free(c)}configureAudio(s,p,l,c,u){this.wasmModule._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),c=c||"input_audio",this.wrapStringPtr(c,(d=>{u=u||"audio_header",this.wrapStringPtr(u,(f=>{this.wasmModule._configureAudio(d,f,s,p,l)}))}))}setAutoResizeCanvas(s){this.autoResizeCanvas=s}setAutoRenderToScreen(s){this.wasmModule._setAutoRenderToScreen(s)}bindTextureToStream(s,p){if(!this.wasmModule.canvas)throw new Error("No OpenGL canvas configured.");p?this.wasmModule._bindTextureToStream(p):console.assert(this.wasmModule._bindTextureToCanvas());let l=this.wasmModule.canvas.getContext("webgl2")||this.wasmModule.canvas.getContext("webgl");if(!l)throw new Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");let c,u;return l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,s),s.videoWidth?(c=s.videoWidth,u=s.videoHeight):s.naturalWidth?(c=s.naturalWidth,u=s.naturalHeight):(c=s.width,u=s.height),!this.autoResizeCanvas||c===this.wasmModule.canvas.width&&u===this.wasmModule.canvas.height||(this.wasmModule.canvas.width=c,this.wasmModule.canvas.height=u),[c,u]}processGl(s,p){let[l,c]=this.bindTextureToStream(s),u=this.wasmModule._malloc(16);this.wasmModule.HEAPU32[u/4]=l,this.wasmModule.HEAPU32[u/4+1]=c,this.wasmModule.HEAPF64[u/8+1]=p,this.wasmModule._processGl(u),this.wasmModule._free(u)}wrapStringPtr(s,p){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");let l=this.wasmModule.stringToNewUTF8(s);p(l),this.wasmModule._free(l)}wrapStringPtrPtr(s,p){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");let l=new Uint32Array(s.length);for(let u=0;u<s.length;u++)l[u]=this.wasmModule.stringToNewUTF8(s[u]);let c=this.wasmModule._malloc(4*l.length);this.wasmModule.HEAPU32.set(l,c>>2),p(c);for(let u of l)this.wasmModule._free(u);this.wasmModule._free(c)}getCalculatorGraphConfig(s,p){let l=t.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME;this.setListener(l,(c=>{s(c)})),this.wrapStringPtr(l,(c=>{this.wasmModule._getGraphConfig(c,p)})),delete this.wasmModule.simpleListeners[l]}setListener(s,p){this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[s]=p}setVectorListener(s,p){let l=[];this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[s]=(c,u,d)=>{u?(p(l,d),l=[]):l.push(c)}}attachErrorListener(s){this.wasmModule.errorListener=s}attachEmptyPacketListener(s,p){this.wasmModule.emptyPacketListeners=this.wasmModule.emptyPacketListeners||{},this.wasmModule.emptyPacketListeners[s]=p}addAudioToStream(s,p,l){this.addAudioToStreamWithShape(s,0,0,p,l)}addAudioToStreamWithShape(s,p,l,c,u){let d=4*s.length;this.audioSize!==d&&(this.audioPtr&&this.wasmModule._free(this.audioPtr),this.audioPtr=this.wasmModule._malloc(d),this.audioSize=d),this.wasmModule.HEAPF32.set(s,this.audioPtr/4),this.wrapStringPtr(c,(f=>{this.wasmModule._addAudioToInputStream(this.audioPtr,p,l,f,u)}))}addGpuBufferToStream(s,p,l){this.wrapStringPtr(p,(c=>{let[u,d]=this.bindTextureToStream(s,c);this.wasmModule._addBoundTextureToStream(c,u,d,l)}))}addBoolToStream(s,p,l){this.wrapStringPtr(p,(c=>{this.wasmModule._addBoolToInputStream(s,c,l)}))}addDoubleToStream(s,p,l){this.wrapStringPtr(p,(c=>{this.wasmModule._addDoubleToInputStream(s,c,l)}))}addFloatToStream(s,p,l){this.wrapStringPtr(p,(c=>{this.wasmModule._addFloatToInputStream(s,c,l)}))}addIntToStream(s,p,l){this.wrapStringPtr(p,(c=>{this.wasmModule._addIntToInputStream(s,c,l)}))}addStringToStream(s,p,l){this.wrapStringPtr(p,(c=>{this.wrapStringPtr(s,(u=>{this.wasmModule._addStringToInputStream(u,c,l)}))}))}addStringRecordToStream(s,p,l){this.wrapStringPtr(p,(c=>{this.wrapStringPtrPtr(Object.keys(s),(u=>{this.wrapStringPtrPtr(Object.values(s),(d=>{this.wasmModule._addFlatHashMapToInputStream(u,d,Object.keys(s).length,c,l)}))}))}))}addProtoToStream(s,p,l,c){this.wrapStringPtr(l,(u=>{this.wrapStringPtr(p,(d=>{let f=this.wasmModule._malloc(s.length);this.wasmModule.HEAPU8.set(s,f),this.wasmModule._addProtoToInputStream(f,s.length,d,u,c),this.wasmModule._free(f)}))}))}addEmptyPacketToStream(s,p){this.wrapStringPtr(s,(l=>{this.wasmModule._addEmptyPacketToInputStream(l,p)}))}addBoolToInputSidePacket(s,p){this.wrapStringPtr(p,(l=>{this.wasmModule._addBoolToInputSidePacket(s,l)}))}addDoubleToInputSidePacket(s,p){this.wrapStringPtr(p,(l=>{this.wasmModule._addDoubleToInputSidePacket(s,l)}))}addFloatToInputSidePacket(s,p){this.wrapStringPtr(p,(l=>{this.wasmModule._addFloatToInputSidePacket(s,l)}))}addIntToInputSidePacket(s,p){this.wrapStringPtr(p,(l=>{this.wasmModule._addIntToInputSidePacket(s,l)}))}addStringToInputSidePacket(s,p){this.wrapStringPtr(p,(l=>{this.wrapStringPtr(s,(c=>{this.wasmModule._addStringToInputSidePacket(c,l)}))}))}addProtoToInputSidePacket(s,p,l){this.wrapStringPtr(l,(c=>{this.wrapStringPtr(p,(u=>{let d=this.wasmModule._malloc(s.length);this.wasmModule.HEAPU8.set(s,d),this.wasmModule._addProtoToInputSidePacket(d,s.length,u,c),this.wasmModule._free(d)}))}))}attachBoolListener(s,p){this.setListener(s,p),this.wrapStringPtr(s,(l=>{this.wasmModule._attachBoolListener(l)}))}attachBoolVectorListener(s,p){this.setVectorListener(s,p),this.wrapStringPtr(s,(l=>{this.wasmModule._attachBoolVectorListener(l)}))}attachIntListener(s,p){this.setListener(s,p),this.wrapStringPtr(s,(l=>{this.wasmModule._attachIntListener(l)}))}attachIntVectorListener(s,p){this.setVectorListener(s,p),this.wrapStringPtr(s,(l=>{this.wasmModule._attachIntVectorListener(l)}))}attachDoubleListener(s,p){this.setListener(s,p),this.wrapStringPtr(s,(l=>{this.wasmModule._attachDoubleListener(l)}))}attachDoubleVectorListener(s,p){this.setVectorListener(s,p),this.wrapStringPtr(s,(l=>{this.wasmModule._attachDoubleVectorListener(l)}))}attachFloatListener(s,p){this.setListener(s,p),this.wrapStringPtr(s,(l=>{this.wasmModule._attachFloatListener(l)}))}attachFloatVectorListener(s,p){this.setVectorListener(s,p),this.wrapStringPtr(s,(l=>{this.wasmModule._attachFloatVectorListener(l)}))}attachStringListener(s,p){this.setListener(s,p),this.wrapStringPtr(s,(l=>{this.wasmModule._attachStringListener(l)}))}attachStringVectorListener(s,p){this.setVectorListener(s,p),this.wrapStringPtr(s,(l=>{this.wasmModule._attachStringVectorListener(l)}))}attachProtoListener(s,p,l){this.setListener(s,p),this.wrapStringPtr(s,(c=>{this.wasmModule._attachProtoListener(c,l||!1)}))}attachProtoVectorListener(s,p,l){this.setVectorListener(s,p),this.wrapStringPtr(s,(c=>{this.wasmModule._attachProtoVectorListener(c,l||!1)}))}attachAudioListener(s,p,l){this.wasmModule._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),this.setListener(s,((c,u)=>{let d=new Float32Array(c.buffer,c.byteOffset,c.length/4);p(d,u)})),this.wrapStringPtr(s,(c=>{this.wasmModule._attachAudioListener(c,l||!1)}))}finishProcessing(){this.wasmModule._waitUntilIdle()}closeGraph(){this.wasmModule._closeGraph(),this.wasmModule.simpleListeners=void 0,this.wasmModule.emptyPacketListeners=void 0}}async function n(o){if(typeof importScripts!="function"){let s=document.createElement("script");return s.setAttribute("src",o),s.setAttribute("crossorigin","anonymous"),new Promise((p=>{s.addEventListener("load",(()=>{p()}),!1),s.addEventListener("error",(()=>{p()}),!1),document.body.appendChild(s)}))}importScripts(o.toString())}async function i(o,s,p,l,c){let u=[];if(s&&u.push(s),p&&u.push(p),u.length&&await Promise.all(u.map(n)),!self.ModuleFactory)throw new Error("ModuleFactory not set.");if(self.Module&&c){let f=self.Module;f.locateFile=c.locateFile,c.mainScriptUrlOrBlob&&(f.mainScriptUrlOrBlob=c.mainScriptUrlOrBlob)}let d=await self.ModuleFactory(self.Module||c);return self.ModuleFactory=self.Module=void 0,new o(d,l)}t.GraphRunner=r,t.createMediaPipeLib=i,t.createGraphRunner=async function(o,s,p,l){return i(r,o,s,p,l)}})($y);Ud={};Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.SupportModelResourcesGraphService=void 0,Ud.SupportModelResourcesGraphService=Xz,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.TaskRunner=Wa.createTaskRunner=Wa.CachedGraphRunner=void 0;ky=Ny,eB=bt,Jz=Zy,qz=Kg,TB=$y,Zz=Ud,$z=void 0,Ng="free_memory",tB="_unused_out",eN=(0,Zz.SupportModelResourcesGraphService)(TB.GraphRunner),Uy=class extends eN{};Wa.CachedGraphRunner=Uy,Wa.createTaskRunner=SB;jy=class{static async createInstance(e,r,n,i){return SB(e,r,n,i)}constructor(e){this.graphRunner=e,this.processingErrors=[],this.latestOutputTimestamp=0,this.graphRunner.setAutoRenderToScreen(!1)}applyOptions(e){var r,n,i,o,s,p;let l=e.baseOptions||{};if(!((r=e.baseOptions)===null||r===void 0)&&r.modelAssetBuffer&&(!((n=e.baseOptions)===null||n===void 0)&&n.modelAssetPath))throw new Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(!((i=this.baseOptions.getModelAsset())===null||i===void 0)&&i.hasFileContent()||!((o=this.baseOptions.getModelAsset())===null||o===void 0)&&o.hasFileName()||!((s=e.baseOptions)===null||s===void 0)&&s.modelAssetBuffer||!((p=e.baseOptions)===null||p===void 0)&&p.modelAssetPath))throw new Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");return this.setAcceleration(l),l.modelAssetPath?fetch(l.modelAssetPath.toString()).then((c=>{if(c.ok)return c.arrayBuffer();throw new Error(`Failed to fetch model: ${l.modelAssetPath} (${c.status})`)})).then((c=>{try{this.graphRunner.wasmModule.FS_unlink("/model.dat")}catch{}this.graphRunner.wasmModule.FS_createDataFile("/","model.dat",new Uint8Array(c),!0,!1,!1),this.setExternalFile("/model.dat"),this.refreshGraph(),this.onGraphRefreshed()})):(this.setExternalFile(l.modelAssetBuffer),this.refreshGraph(),this.onGraphRefreshed(),Promise.resolve())}onGraphRefreshed(){}getCalculatorGraphConfig(){let e;if(this.graphRunner.getCalculatorGraphConfig((r=>{e=eB.CalculatorGraphConfig.deserializeBinary(r)})),!e)throw new Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,r){this.graphRunner.attachErrorListener(((n,i)=>{this.processingErrors.push(new Error(i))})),this.graphRunner.registerModelResourcesGraphService(),this.graphRunner.setGraph(e,r),this.keepaliveNode=void 0,this.handleErrors()}finishProcessing(){this.graphRunner.finishProcessing(),this.handleErrors()}setLatestOutputTimestamp(e){this.latestOutputTimestamp=Math.max(this.latestOutputTimestamp,e)}getSynctheticTimestamp(){return this.latestOutputTimestamp+1}handleErrors(){try{let e=this.processingErrors.length;if(e===1)throw new Error(this.processingErrors[0].message);if(e>1)throw new Error("Encountered multiple errors: "+this.processingErrors.map((r=>r.message)).join(", "))}finally{this.processingErrors=[]}}setExternalFile(e){let r=this.baseOptions.getModelAsset()||new qz.ExternalFile;typeof e=="string"?(r.setFileName(e),r.clearFileContent()):e instanceof Uint8Array&&(r.setFileContent(e),r.clearFileName()),this.baseOptions.setModelAsset(r)}setAcceleration(e){let r=this.baseOptions.getAcceleration();r||(r=new Jz.Acceleration,r.setTflite(new ky.InferenceCalculatorOptions.Delegate.TfLite)),"delegate"in e&&(e.delegate==="GPU"?r.setGpu(new ky.InferenceCalculatorOptions.Delegate.Gpu):r.setTflite(new ky.InferenceCalculatorOptions.Delegate.TfLite)),this.baseOptions.setAcceleration(r)}addKeepaliveNode(e){this.keepaliveNode=new eB.CalculatorGraphConfig.Node,this.keepaliveNode.setCalculator("PassThroughCalculator"),this.keepaliveNode.addInputStream(Ng),this.keepaliveNode.addOutputStream(Ng+tB),e.addInputStream(Ng),e.addNode(this.keepaliveNode)}keepStreamAlive(e){this.keepaliveNode.addInputStream(e),this.keepaliveNode.addOutputStream(e+tB)}freeKeepaliveStreams(){this.graphRunner.addBoolToStream(!0,Ng,this.latestOutputTimestamp)}close(){this.keepaliveNode=void 0,this.graphRunner.closeGraph()}};Wa.TaskRunner=jy;Ug={};Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.SupportImage=void 0,Ug.SupportImage=tN,Object.defineProperty(ko,"__esModule",{value:!0}),ko.VisionTaskRunner=ko.VisionGraphRunner=void 0;rN=wB,rB=Wa,oN=Hd,iN=Va,nN=Qd,aN=$y,sN=Ug,pN=Ha,lN=Ud,cN=(0,lN.SupportModelResourcesGraphService)((0,sN.SupportImage)(aN.GraphRunner)),Hy=class extends cN{};ko.VisionGraphRunner=Hy;Qy=class extends rB.TaskRunner{static async createVisionInstance(e,r,n){var i;let o=(i=n.canvas)!==null&&i!==void 0?i:dN();return rB.TaskRunner.createInstance(e,o,r,n)}constructor(e,r,n,i){super(e),this.graphRunner=e,this.imageStreamName=r,this.normRectStreamName=n,this.roiAllowed=i,this.shaderContext=new iN.MPImageShaderContext}applyOptions(e){if("runningMode"in e){let r=!!e.runningMode&&e.runningMode!=="IMAGE";this.baseOptions.setUseStreamMode(r)}if(e.canvas!==void 0&&this.graphRunner.wasmModule.canvas!==e.canvas)throw new Error("You must create a new task to reset the canvas.");return super.applyOptions(e)}processImageData(e,r){var n;if(!((n=this.baseOptions)===null||n===void 0)&&n.getUseStreamMode())throw new Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");this.process(e,r,this.getSynctheticTimestamp())}processVideoData(e,r,n){var i;if(!(!((i=this.baseOptions)===null||i===void 0)&&i.getUseStreamMode()))throw new Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");this.process(e,r,n)}getImageSourceSize(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:[e.width,e.height]}convertToNormalizedRect(e,r){let n=new rN.NormalizedRect;if(r?.regionOfInterest){if(!this.roiAllowed)throw new Error("This task doesn't support region-of-interest.");let i=r.regionOfInterest;if(i.left>=i.right||i.top>=i.bottom)throw new Error("Expected RectF with left < right and top < bottom.");if(i.left<0||i.top<0||i.right>1||i.bottom>1)throw new Error("Expected RectF values to be in [0,1].");n.setXCenter((i.left+i.right)/2),n.setYCenter((i.top+i.bottom)/2),n.setWidth(i.right-i.left),n.setHeight(i.bottom-i.top)}else n.setXCenter(.5),n.setYCenter(.5),n.setWidth(1),n.setHeight(1);if(r?.rotationDegrees){if(r?.rotationDegrees%90!=0)throw new Error("Expected rotation to be a multiple of 90\xB0.");if(n.setRotation(-Math.PI*r.rotationDegrees/180),r?.rotationDegrees%180!=0){let[i,o]=this.getImageSourceSize(e),s=n.getHeight()*o/i,p=n.getWidth()*i/o;n.setWidth(s),n.setHeight(p)}}return n}process(e,r,n){let i=this.convertToNormalizedRect(e,r);this.graphRunner.addProtoToStream(i.serializeBinary(),"mediapipe.NormalizedRect",this.normRectStreamName,n),this.graphRunner.addGpuBufferAsImageToStream(e,this.imageStreamName,n??performance.now()),this.finishProcessing()}convertToMPImage(e,r){let{data:n,width:i,height:o}=e,s=i*o,p;if(n instanceof Uint8Array)if(n.length===3*s){let c=new Uint8ClampedArray(4*s);for(let u=0;u<s;++u)c[4*u]=n[3*u],c[4*u+1]=n[3*u+1],c[4*u+2]=n[3*u+2],c[4*u+3]=255;p=new ImageData(c,i,o)}else{if(n.length!==4*s)throw new Error("Unsupported channel count: "+n.length/s);p=new ImageData(new Uint8ClampedArray(n.buffer,n.byteOffset,n.length),i,o)}else{if(!(n instanceof WebGLTexture))throw new Error(`Unsupported format: ${n.constructor.name}`);p=n}let l=new oN.MPImage([p],!1,!1,this.graphRunner.wasmModule.canvas,this.shaderContext,i,o);return r?l.clone():l}convertToMPMask(e,r){let{data:n,width:i,height:o}=e,s=i*o,p;if(n instanceof Uint8Array||n instanceof Float32Array){if(n.length!==s)throw new Error("Unsupported channel count: "+n.length/s);p=n}else p=n;let l=new nN.MPMask([p],!1,this.graphRunner.wasmModule.canvas,this.shaderContext,i,o);return r?l.clone():l}close(){this.shaderContext.close(),super.close()}};ko.VisionTaskRunner=Qy;IB={};Object.defineProperty(IB,"__esModule",{value:!0});oB={};Object.defineProperty(oB,"__esModule",{value:!0}),(function(t){var e=Je&&Je.__createBinding||(Object.create?function(v,A,m,h){h===void 0&&(h=m);var y=Object.getOwnPropertyDescriptor(A,m);y&&!("get"in y?!A.__esModule:y.writable||y.configurable)||(y={enumerable:!0,get:function(){return A[m]}}),Object.defineProperty(v,h,y)}:function(v,A,m,h){h===void 0&&(h=m),v[h]=A[m]}),r=Je&&Je.__exportStar||function(v,A){for(var m in v)m==="default"||Object.prototype.hasOwnProperty.call(A,m)||e(A,v,m)};Object.defineProperty(t,"__esModule",{value:!0}),t.FaceDetector=void 0;let n=bt,i=ht,o=qy,s=kt,p=eh,l=Wd,c=ko,u="image_in",d="norm_rect_in",f="detections";r(IB,t),r(oB,t);class g extends c.VisionTaskRunner{static createFromOptions(A,m){return c.VisionTaskRunner.createVisionInstance(g,A,m)}static createFromModelBuffer(A,m){return c.VisionTaskRunner.createVisionInstance(g,A,{baseOptions:{modelAssetBuffer:m}})}static async createFromModelPath(A,m){return c.VisionTaskRunner.createVisionInstance(g,A,{baseOptions:{modelAssetPath:m}})}constructor(A,m){super(new c.VisionGraphRunner(A,m),u,d,!1),this.result={detections:[]},this.options=new p.FaceDetectorGraphOptions,this.options.setBaseOptions(new s.BaseOptions),this.options.setMinDetectionConfidence(.5),this.options.setMinSuppressionThreshold(.3)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(A){this.options.setBaseOptions(A)}setOptions(A){var m,h;return"minDetectionConfidence"in A&&this.options.setMinDetectionConfidence((m=A.minDetectionConfidence)!==null&&m!==void 0?m:.5),"minSuppressionThreshold"in A&&this.options.setMinSuppressionThreshold((h=A.minSuppressionThreshold)!==null&&h!==void 0?h:.3),this.applyOptions(A)}detect(A,m){return this.result={detections:[]},this.processImageData(A,m),this.result}detectForVideo(A,m,h){return this.result={detections:[]},this.processVideoData(A,h,m),this.result}addJsFaceDetections(A){for(let m of A){let h=o.Detection.deserializeBinary(m);this.result.detections.push((0,l.convertFromDetectionProto)(h))}}refreshGraph(){let A=new n.CalculatorGraphConfig;A.addInputStream(u),A.addInputStream(d),A.addOutputStream(f);let m=new i.CalculatorOptions;m.setExtension(p.FaceDetectorGraphOptions.ext,this.options);let h=new n.CalculatorGraphConfig.Node;h.setCalculator("mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),h.addInputStream("IMAGE:"+u),h.addInputStream("NORM_RECT:"+d),h.addOutputStream("DETECTIONS:"+f),h.setOptions(m),A.addNode(h),this.graphRunner.attachProtoVectorListener(f,((E,b)=>{this.addJsFaceDetections(E),this.setLatestOutputTimestamp(b)})),this.graphRunner.attachEmptyPacketListener(f,(E=>{this.setLatestOutputTimestamp(E)}));let y=A.serializeBinary();this.setGraph(new Uint8Array(y),!0)}}t.FaceDetector=g})(CB);FB={},Jd={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Classification",null,n),r.exportSymbol("proto.mediapipe.ClassificationList",null,n),r.exportSymbol("proto.mediapipe.ClassificationListCollection",null,n),proto.mediapipe.Classification=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.Classification,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Classification.displayName="proto.mediapipe.Classification"),proto.mediapipe.ClassificationList=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.ClassificationList.repeatedFields_,null)},r.inherits(proto.mediapipe.ClassificationList,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationList.displayName="proto.mediapipe.ClassificationList"),proto.mediapipe.ClassificationListCollection=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.ClassificationListCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.ClassificationListCollection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationListCollection.displayName="proto.mediapipe.ClassificationListCollection"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Classification.prototype.toObject=function(i){return proto.mediapipe.Classification.toObject(i,this)},proto.mediapipe.Classification.toObject=function(i,o){var s,p={index:(s=e.Message.getField(o,1))==null?void 0:s,score:(s=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:s,label:(s=e.Message.getField(o,3))==null?void 0:s,displayName:(s=e.Message.getField(o,4))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.Classification.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.Classification;return proto.mediapipe.Classification.deserializeBinaryFromReader(s,o)},proto.mediapipe.Classification.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readInt32();i.setIndex(s);break;case 2:s=o.readFloat(),i.setScore(s);break;case 3:s=o.readString(),i.setLabel(s);break;case 4:s=o.readString(),i.setDisplayName(s);break;default:o.skipField()}return i},proto.mediapipe.Classification.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.Classification.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.Classification.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeInt32(1,s),(s=e.Message.getField(i,2))!=null&&o.writeFloat(2,s),(s=e.Message.getField(i,3))!=null&&o.writeString(3,s),(s=e.Message.getField(i,4))!=null&&o.writeString(4,s)},proto.mediapipe.Classification.prototype.getIndex=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Classification.prototype.setIndex=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.Classification.prototype.clearIndex=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Classification.prototype.hasIndex=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Classification.prototype.getScore=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Classification.prototype.setScore=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.Classification.prototype.clearScore=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Classification.prototype.hasScore=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Classification.prototype.getLabel=function(){return e.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.Classification.prototype.setLabel=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.Classification.prototype.clearLabel=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.Classification.prototype.hasLabel=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.Classification.prototype.getDisplayName=function(){return e.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.Classification.prototype.setDisplayName=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.Classification.prototype.clearDisplayName=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.Classification.prototype.hasDisplayName=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.ClassificationList.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationList.prototype.toObject=function(i){return proto.mediapipe.ClassificationList.toObject(i,this)},proto.mediapipe.ClassificationList.toObject=function(i,o){var s={classificationList:e.Message.toObjectList(o.getClassificationList(),proto.mediapipe.Classification.toObject,i)};return i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.ClassificationList.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.ClassificationList;return proto.mediapipe.ClassificationList.deserializeBinaryFromReader(s,o)},proto.mediapipe.ClassificationList.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=new proto.mediapipe.Classification;o.readMessage(s,proto.mediapipe.Classification.deserializeBinaryFromReader),i.addClassification(s)}else o.skipField();return i},proto.mediapipe.ClassificationList.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.ClassificationList.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.ClassificationList.serializeBinaryToWriter=function(i,o){var s;(s=i.getClassificationList()).length>0&&o.writeRepeatedMessage(1,s,proto.mediapipe.Classification.serializeBinaryToWriter)},proto.mediapipe.ClassificationList.prototype.getClassificationList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.Classification,1)},proto.mediapipe.ClassificationList.prototype.setClassificationList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.ClassificationList.prototype.addClassification=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.Classification,o)},proto.mediapipe.ClassificationList.prototype.clearClassificationList=function(){return this.setClassificationList([])},proto.mediapipe.ClassificationListCollection.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationListCollection.prototype.toObject=function(i){return proto.mediapipe.ClassificationListCollection.toObject(i,this)},proto.mediapipe.ClassificationListCollection.toObject=function(i,o){var s={classificationListList:e.Message.toObjectList(o.getClassificationListList(),proto.mediapipe.ClassificationList.toObject,i)};return i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.ClassificationListCollection.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.ClassificationListCollection;return proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader(s,o)},proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=new proto.mediapipe.ClassificationList;o.readMessage(s,proto.mediapipe.ClassificationList.deserializeBinaryFromReader),i.addClassificationList(s)}else o.skipField();return i},proto.mediapipe.ClassificationListCollection.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter=function(i,o){var s;(s=i.getClassificationListList()).length>0&&o.writeRepeatedMessage(1,s,proto.mediapipe.ClassificationList.serializeBinaryToWriter)},proto.mediapipe.ClassificationListCollection.prototype.getClassificationListList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.ClassificationList,1)},proto.mediapipe.ClassificationListCollection.prototype.setClassificationListList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.ClassificationListCollection.prototype.addClassificationList=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.ClassificationList,o)},proto.mediapipe.ClassificationListCollection.prototype.clearClassificationListList=function(){return this.setClassificationListList([])},r.object.extend(t,proto.mediapipe)})(Jd);qd={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Landmark",null,n),r.exportSymbol("proto.mediapipe.LandmarkList",null,n),r.exportSymbol("proto.mediapipe.LandmarkListCollection",null,n),r.exportSymbol("proto.mediapipe.NormalizedLandmark",null,n),r.exportSymbol("proto.mediapipe.NormalizedLandmarkList",null,n),r.exportSymbol("proto.mediapipe.NormalizedLandmarkListCollection",null,n),proto.mediapipe.Landmark=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.Landmark,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Landmark.displayName="proto.mediapipe.Landmark"),proto.mediapipe.LandmarkList=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.LandmarkList.repeatedFields_,null)},r.inherits(proto.mediapipe.LandmarkList,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkList.displayName="proto.mediapipe.LandmarkList"),proto.mediapipe.LandmarkListCollection=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.LandmarkListCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.LandmarkListCollection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkListCollection.displayName="proto.mediapipe.LandmarkListCollection"),proto.mediapipe.NormalizedLandmark=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.NormalizedLandmark,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmark.displayName="proto.mediapipe.NormalizedLandmark"),proto.mediapipe.NormalizedLandmarkList=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.NormalizedLandmarkList.repeatedFields_,null)},r.inherits(proto.mediapipe.NormalizedLandmarkList,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkList.displayName="proto.mediapipe.NormalizedLandmarkList"),proto.mediapipe.NormalizedLandmarkListCollection=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_,null)},r.inherits(proto.mediapipe.NormalizedLandmarkListCollection,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkListCollection.displayName="proto.mediapipe.NormalizedLandmarkListCollection"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Landmark.prototype.toObject=function(i){return proto.mediapipe.Landmark.toObject(i,this)},proto.mediapipe.Landmark.toObject=function(i,o){var s,p={x:(s=e.Message.getOptionalFloatingPointField(o,1))==null?void 0:s,y:(s=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:s,z:(s=e.Message.getOptionalFloatingPointField(o,3))==null?void 0:s,visibility:(s=e.Message.getOptionalFloatingPointField(o,4))==null?void 0:s,presence:(s=e.Message.getOptionalFloatingPointField(o,5))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.Landmark.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.Landmark;return proto.mediapipe.Landmark.deserializeBinaryFromReader(s,o)},proto.mediapipe.Landmark.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readFloat();i.setX(s);break;case 2:s=o.readFloat(),i.setY(s);break;case 3:s=o.readFloat(),i.setZ(s);break;case 4:s=o.readFloat(),i.setVisibility(s);break;case 5:s=o.readFloat(),i.setPresence(s);break;default:o.skipField()}return i},proto.mediapipe.Landmark.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.Landmark.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.Landmark.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeFloat(1,s),(s=e.Message.getField(i,2))!=null&&o.writeFloat(2,s),(s=e.Message.getField(i,3))!=null&&o.writeFloat(3,s),(s=e.Message.getField(i,4))!=null&&o.writeFloat(4,s),(s=e.Message.getField(i,5))!=null&&o.writeFloat(5,s)},proto.mediapipe.Landmark.prototype.getX=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.Landmark.prototype.setX=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.Landmark.prototype.clearX=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Landmark.prototype.hasX=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Landmark.prototype.getY=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Landmark.prototype.setY=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.Landmark.prototype.clearY=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Landmark.prototype.hasY=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Landmark.prototype.getZ=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.Landmark.prototype.setZ=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.Landmark.prototype.clearZ=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.Landmark.prototype.hasZ=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.Landmark.prototype.getVisibility=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.Landmark.prototype.setVisibility=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.Landmark.prototype.clearVisibility=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.Landmark.prototype.hasVisibility=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.Landmark.prototype.getPresence=function(){return e.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Landmark.prototype.setPresence=function(i){return e.Message.setField(this,5,i)},proto.mediapipe.Landmark.prototype.clearPresence=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.Landmark.prototype.hasPresence=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.LandmarkList.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkList.prototype.toObject=function(i){return proto.mediapipe.LandmarkList.toObject(i,this)},proto.mediapipe.LandmarkList.toObject=function(i,o){var s={landmarkList:e.Message.toObjectList(o.getLandmarkList(),proto.mediapipe.Landmark.toObject,i)};return i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.LandmarkList.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.LandmarkList;return proto.mediapipe.LandmarkList.deserializeBinaryFromReader(s,o)},proto.mediapipe.LandmarkList.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=new proto.mediapipe.Landmark;o.readMessage(s,proto.mediapipe.Landmark.deserializeBinaryFromReader),i.addLandmark(s)}else o.skipField();return i},proto.mediapipe.LandmarkList.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.LandmarkList.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.LandmarkList.serializeBinaryToWriter=function(i,o){var s;(s=i.getLandmarkList()).length>0&&o.writeRepeatedMessage(1,s,proto.mediapipe.Landmark.serializeBinaryToWriter)},proto.mediapipe.LandmarkList.prototype.getLandmarkList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.Landmark,1)},proto.mediapipe.LandmarkList.prototype.setLandmarkList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.LandmarkList.prototype.addLandmark=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.Landmark,o)},proto.mediapipe.LandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.LandmarkListCollection.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkListCollection.prototype.toObject=function(i){return proto.mediapipe.LandmarkListCollection.toObject(i,this)},proto.mediapipe.LandmarkListCollection.toObject=function(i,o){var s={landmarkListList:e.Message.toObjectList(o.getLandmarkListList(),proto.mediapipe.LandmarkList.toObject,i)};return i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.LandmarkListCollection.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.LandmarkListCollection;return proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader(s,o)},proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=new proto.mediapipe.LandmarkList;o.readMessage(s,proto.mediapipe.LandmarkList.deserializeBinaryFromReader),i.addLandmarkList(s)}else o.skipField();return i},proto.mediapipe.LandmarkListCollection.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter=function(i,o){var s;(s=i.getLandmarkListList()).length>0&&o.writeRepeatedMessage(1,s,proto.mediapipe.LandmarkList.serializeBinaryToWriter)},proto.mediapipe.LandmarkListCollection.prototype.getLandmarkListList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.LandmarkList,1)},proto.mediapipe.LandmarkListCollection.prototype.setLandmarkListList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.LandmarkListCollection.prototype.addLandmarkList=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.LandmarkList,o)},proto.mediapipe.LandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmark.prototype.toObject=function(i){return proto.mediapipe.NormalizedLandmark.toObject(i,this)},proto.mediapipe.NormalizedLandmark.toObject=function(i,o){var s,p={x:(s=e.Message.getOptionalFloatingPointField(o,1))==null?void 0:s,y:(s=e.Message.getOptionalFloatingPointField(o,2))==null?void 0:s,z:(s=e.Message.getOptionalFloatingPointField(o,3))==null?void 0:s,visibility:(s=e.Message.getOptionalFloatingPointField(o,4))==null?void 0:s,presence:(s=e.Message.getOptionalFloatingPointField(o,5))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.NormalizedLandmark.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.NormalizedLandmark;return proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader(s,o)},proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readFloat();i.setX(s);break;case 2:s=o.readFloat(),i.setY(s);break;case 3:s=o.readFloat(),i.setZ(s);break;case 4:s=o.readFloat(),i.setVisibility(s);break;case 5:s=o.readFloat(),i.setPresence(s);break;default:o.skipField()}return i},proto.mediapipe.NormalizedLandmark.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeFloat(1,s),(s=e.Message.getField(i,2))!=null&&o.writeFloat(2,s),(s=e.Message.getField(i,3))!=null&&o.writeFloat(3,s),(s=e.Message.getField(i,4))!=null&&o.writeFloat(4,s),(s=e.Message.getField(i,5))!=null&&o.writeFloat(5,s)},proto.mediapipe.NormalizedLandmark.prototype.getX=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedLandmark.prototype.setX=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.NormalizedLandmark.prototype.clearX=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasX=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.NormalizedLandmark.prototype.getY=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedLandmark.prototype.setY=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.NormalizedLandmark.prototype.clearY=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasY=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.NormalizedLandmark.prototype.getZ=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedLandmark.prototype.setZ=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.NormalizedLandmark.prototype.clearZ=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasZ=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.NormalizedLandmark.prototype.getVisibility=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedLandmark.prototype.setVisibility=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.NormalizedLandmark.prototype.clearVisibility=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasVisibility=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.NormalizedLandmark.prototype.getPresence=function(){return e.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedLandmark.prototype.setPresence=function(i){return e.Message.setField(this,5,i)},proto.mediapipe.NormalizedLandmark.prototype.clearPresence=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasPresence=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.NormalizedLandmarkList.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkList.prototype.toObject=function(i){return proto.mediapipe.NormalizedLandmarkList.toObject(i,this)},proto.mediapipe.NormalizedLandmarkList.toObject=function(i,o){var s={landmarkList:e.Message.toObjectList(o.getLandmarkList(),proto.mediapipe.NormalizedLandmark.toObject,i)};return i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.NormalizedLandmarkList.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.NormalizedLandmarkList;return proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader(s,o)},proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=new proto.mediapipe.NormalizedLandmark;o.readMessage(s,proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader),i.addLandmark(s)}else o.skipField();return i},proto.mediapipe.NormalizedLandmarkList.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter=function(i,o){var s;(s=i.getLandmarkList()).length>0&&o.writeRepeatedMessage(1,s,proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkList.prototype.getLandmarkList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmark,1)},proto.mediapipe.NormalizedLandmarkList.prototype.setLandmarkList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.NormalizedLandmarkList.prototype.addLandmark=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.NormalizedLandmark,o)},proto.mediapipe.NormalizedLandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkListCollection.prototype.toObject=function(i){return proto.mediapipe.NormalizedLandmarkListCollection.toObject(i,this)},proto.mediapipe.NormalizedLandmarkListCollection.toObject=function(i,o){var s={landmarkListList:e.Message.toObjectList(o.getLandmarkListList(),proto.mediapipe.NormalizedLandmarkList.toObject,i)};return i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.NormalizedLandmarkListCollection;return proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader(s,o)},proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=new proto.mediapipe.NormalizedLandmarkList;o.readMessage(s,proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader),i.addLandmarkList(s)}else o.skipField();return i},proto.mediapipe.NormalizedLandmarkListCollection.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter=function(i,o){var s;(s=i.getLandmarkListList()).length>0&&o.writeRepeatedMessage(1,s,proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.getLandmarkListList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmarkList,1)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.setLandmarkListList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.addLandmarkList=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.NormalizedLandmarkList,o)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},r.object.extend(t,proto.mediapipe)})(qd);OB={},DB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.MatrixData",null,n),r.exportSymbol("proto.mediapipe.MatrixData.Layout",null,n),proto.mediapipe.MatrixData=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.MatrixData.repeatedFields_,null)},r.inherits(proto.mediapipe.MatrixData,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.MatrixData.displayName="proto.mediapipe.MatrixData"),proto.mediapipe.MatrixData.repeatedFields_=[3],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MatrixData.prototype.toObject=function(i){return proto.mediapipe.MatrixData.toObject(i,this)},proto.mediapipe.MatrixData.toObject=function(i,o){var s,p={rows:(s=e.Message.getField(o,1))==null?void 0:s,cols:(s=e.Message.getField(o,2))==null?void 0:s,packedDataList:(s=e.Message.getRepeatedFloatingPointField(o,3))==null?void 0:s,layout:e.Message.getFieldWithDefault(o,4,0)};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.MatrixData.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.MatrixData;return proto.mediapipe.MatrixData.deserializeBinaryFromReader(s,o)},proto.mediapipe.MatrixData.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readInt32();i.setRows(s);break;case 2:s=o.readInt32(),i.setCols(s);break;case 3:for(var p=o.isDelimited()?o.readPackedFloat():[o.readFloat()],l=0;l<p.length;l++)i.addPackedData(p[l]);break;case 4:s=o.readEnum(),i.setLayout(s);break;default:o.skipField()}return i},proto.mediapipe.MatrixData.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.MatrixData.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.MatrixData.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeInt32(1,s),(s=e.Message.getField(i,2))!=null&&o.writeInt32(2,s),(s=i.getPackedDataList()).length>0&&o.writePackedFloat(3,s),(s=e.Message.getField(i,4))!=null&&o.writeEnum(4,s)},proto.mediapipe.MatrixData.Layout={COLUMN_MAJOR:0,ROW_MAJOR:1},proto.mediapipe.MatrixData.prototype.getRows=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.MatrixData.prototype.setRows=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.MatrixData.prototype.clearRows=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.MatrixData.prototype.hasRows=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.MatrixData.prototype.getCols=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.MatrixData.prototype.setCols=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.MatrixData.prototype.clearCols=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.MatrixData.prototype.hasCols=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.MatrixData.prototype.getPackedDataList=function(){return e.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.MatrixData.prototype.setPackedDataList=function(i){return e.Message.setField(this,3,i||[])},proto.mediapipe.MatrixData.prototype.addPackedData=function(i,o){return e.Message.addToRepeatedField(this,3,i,o)},proto.mediapipe.MatrixData.prototype.clearPackedDataList=function(){return this.setPackedDataList([])},proto.mediapipe.MatrixData.prototype.getLayout=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.MatrixData.prototype.setLayout=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.MatrixData.prototype.clearLayout=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.MatrixData.prototype.hasLayout=function(){return e.Message.getField(this,4)!=null},r.object.extend(t,proto.mediapipe)})(DB);iB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d",null,n),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType",null,n),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType",null,n),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d"),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_=[3,4],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.toObject=function(i){return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject(i,this)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject=function(i,o){var s,p={vertexType:(s=e.Message.getField(o,1))==null?void 0:s,primitiveType:(s=e.Message.getField(o,2))==null?void 0:s,vertexBufferList:(s=e.Message.getRepeatedFloatingPointField(o,3))==null?void 0:s,indexBufferList:(s=e.Message.getRepeatedField(o,4))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader(s,o)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readEnum();i.setVertexType(s);break;case 2:s=o.readEnum(),i.setPrimitiveType(s);break;case 3:for(var p=o.isDelimited()?o.readPackedFloat():[o.readFloat()],l=0;l<p.length;l++)i.addVertexBuffer(p[l]);break;case 4:for(p=o.isDelimited()?o.readPackedUint32():[o.readUint32()],l=0;l<p.length;l++)i.addIndexBuffer(p[l]);break;default:o.skipField()}return i},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeEnum(1,s),(s=e.Message.getField(i,2))!=null&&o.writeEnum(2,s),(s=i.getVertexBufferList()).length>0&&o.writeRepeatedFloat(3,s),(s=i.getIndexBufferList()).length>0&&o.writeRepeatedUint32(4,s)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType={VERTEX_PT:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType={TRIANGLE:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexType=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexType=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexType=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasVertexType=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getPrimitiveType=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setPrimitiveType=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearPrimitiveType=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasPrimitiveType=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexBufferList=function(){return e.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexBufferList=function(i){return e.Message.setField(this,3,i||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addVertexBuffer=function(i,o){return e.Message.addToRepeatedField(this,3,i,o)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexBufferList=function(){return this.setVertexBufferList([])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getIndexBufferList=function(){return e.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setIndexBufferList=function(i){return e.Message.setField(this,4,i||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addIndexBuffer=function(i,o){return e.Message.addToRepeatedField(this,4,i,o)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearIndexBufferList=function(){return this.setIndexBufferList([])},r.object.extend(t,proto.mediapipe.tasks.vision.face_geometry.proto)})(iB),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=DB;r.object.extend(proto,i);var o=iB;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry",null,n),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry=function(s){e.Message.initialize(this,s,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.toObject=function(s){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject(s,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject=function(s,p){var l,c={mesh:(l=p.getMesh())&&o.Mesh3d.toObject(s,l),poseTransformMatrix:(l=p.getPoseTransformMatrix())&&i.MatrixData.toObject(s,l)};return s&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinary=function(s){var p=new e.BinaryReader(s),l=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader(l,p)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader=function(s,p){for(;p.nextField()&&!p.isEndGroup();)switch(p.getFieldNumber()){case 1:var l=new o.Mesh3d;p.readMessage(l,o.Mesh3d.deserializeBinaryFromReader),s.setMesh(l);break;case 2:l=new i.MatrixData,p.readMessage(l,i.MatrixData.deserializeBinaryFromReader),s.setPoseTransformMatrix(l);break;default:p.skipField()}return s},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.serializeBinary=function(){var s=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter=function(s,p){var l=void 0;(l=s.getMesh())!=null&&p.writeMessage(1,l,o.Mesh3d.serializeBinaryToWriter),(l=s.getPoseTransformMatrix())!=null&&p.writeMessage(2,l,i.MatrixData.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getMesh=function(){return e.Message.getWrapperField(this,o.Mesh3d,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setMesh=function(s){return e.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearMesh=function(){return this.setMesh(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasMesh=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getPoseTransformMatrix=function(){return e.Message.getWrapperField(this,i.MatrixData,2)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setPoseTransformMatrix=function(s){return e.Message.setWrapperField(this,2,s)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearPoseTransformMatrix=function(){return this.setPoseTransformMatrix(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasPoseTransformMatrix=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.vision.face_geometry.proto)})(OB);e2={},kB={},nB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=ht;r.object.extend(proto,i);var o=Kg;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions",null,n),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions=function(s){e.Message.initialize(this,s,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.toObject=function(s){return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject(s,this)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject=function(s,p){var l,c={metadataFile:(l=p.getMetadataFile())&&o.ExternalFile.toObject(s,l)};return s&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinary=function(s){var p=new e.BinaryReader(s),l=new proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader(l,p)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader=function(s,p){for(;p.nextField()&&!p.isEndGroup();)if(p.getFieldNumber()===1){var l=new o.ExternalFile;p.readMessage(l,o.ExternalFile.deserializeBinaryFromReader),s.setMetadataFile(l)}else p.skipField();return s},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.serializeBinary=function(){var s=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter=function(s,p){var l;(l=s.getMetadataFile())!=null&&p.writeMessage(1,l,o.ExternalFile.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new e.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),i.CalculatorOptions.extensionsBinary[512499200]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.getMetadataFile=function(){return e.Message.getWrapperField(this,o.ExternalFile,1)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.setMetadataFile=function(s){return e.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.clearMetadataFile=function(){return this.setMetadataFile(void 0)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.hasMetadataFile=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new e.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),i.CalculatorOptions.extensionsBinary[512499200]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_geometry)})(nB),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=ht;r.object.extend(proto,i);var o=nB;r.object.extend(proto,o),r.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions",null,n),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions=function(s){e.Message.initialize(this,s,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.toObject=function(s){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject(s,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject=function(s,p){var l,c={geometryPipelineOptions:(l=p.getGeometryPipelineOptions())&&o.FaceGeometryPipelineCalculatorOptions.toObject(s,l)};return s&&(c.$jspbMessageInstance=p),c}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinary=function(s){var p=new e.BinaryReader(s),l=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader(l,p)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader=function(s,p){for(;p.nextField()&&!p.isEndGroup();)if(p.getFieldNumber()===1){var l=new o.FaceGeometryPipelineCalculatorOptions;p.readMessage(l,o.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader),s.setGeometryPipelineOptions(l)}else p.skipField();return s},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.serializeBinary=function(){var s=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter(this,s),s.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter=function(s,p){var l;(l=s.getGeometryPipelineOptions())!=null&&p.writeMessage(1,l,o.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new e.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[515723506]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.getGeometryPipelineOptions=function(){return e.Message.getWrapperField(this,o.FaceGeometryPipelineCalculatorOptions,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.setGeometryPipelineOptions=function(s){return e.Message.setWrapperField(this,1,s)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.clearGeometryPipelineOptions=function(){return this.setGeometryPipelineOptions(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.hasGeometryPipelineOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new e.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),i.CalculatorOptions.extensionsBinary[515723506]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_geometry.proto)})(kB);Wy={},aB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions",null,n),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject=function(p,l){var c,u={baseOptions:(c=l.getBaseOptions())&&s.BaseOptions.toObject(p,c)};return p&&(u.$jspbMessageInstance=l),u}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)if(l.getFieldNumber()===1){var c=new s.BaseOptions;l.readMessage(c,s.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c)}else l.skipField();return p},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter=function(p,l){var c;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,s.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new e.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508981768]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new e.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508981768]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_landmarker.proto)})(aB),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s);var p=aB;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject=function(l,c){var u,d={baseOptions:(u=c.getBaseOptions())&&s.BaseOptions.toObject(l,u),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(c,2,.5),smoothLandmarks:(u=e.Message.getBooleanField(c,4))==null?void 0:u,faceBlendshapesGraphOptions:(u=c.getFaceBlendshapesGraphOptions())&&p.FaceBlendshapesGraphOptions.toObject(l,u)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),u=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader(u,c)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var u=new s.BaseOptions;c.readMessage(u,s.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(u);break;case 2:u=c.readFloat(),l.setMinDetectionConfidence(u);break;case 4:u=c.readBool(),l.setSmoothLandmarks(u);break;case 3:u=new p.FaceBlendshapesGraphOptions,c.readMessage(u,p.FaceBlendshapesGraphOptions.deserializeBinaryFromReader),l.setFaceBlendshapesGraphOptions(u);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(l,c){var u=void 0;(u=l.getBaseOptions())!=null&&c.writeMessage(1,u,s.BaseOptions.serializeBinaryToWriter),(u=e.Message.getField(l,2))!=null&&c.writeFloat(2,u),(u=e.Message.getField(l,4))!=null&&c.writeBool(4,u),(u=l.getFaceBlendshapesGraphOptions())!=null&&c.writeMessage(3,u,p.FaceBlendshapesGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508968149]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(l){return e.Message.setField(this,2,l)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getSmoothLandmarks=function(){return e.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setSmoothLandmarks=function(l){return e.Message.setField(this,4,l)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearSmoothLandmarks=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasSmoothLandmarks=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getFaceBlendshapesGraphOptions=function(){return e.Message.getWrapperField(this,p.FaceBlendshapesGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setFaceBlendshapesGraphOptions=function(l){return e.Message.setWrapperField(this,3,l)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearFaceBlendshapesGraphOptions=function(){return this.setFaceBlendshapesGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasFaceBlendshapesGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508968149]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_landmarker.proto)})(Wy),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s);var p=eh;r.object.extend(proto,p);var l=kB;r.object.extend(proto,l);var c=Wy;r.object.extend(proto,c),r.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions",null,n),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions=function(u){e.Message.initialize(this,u,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.toObject=function(u){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject(u,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject=function(u,d){var f,g={baseOptions:(f=d.getBaseOptions())&&s.BaseOptions.toObject(u,f),faceDetectorGraphOptions:(f=d.getFaceDetectorGraphOptions())&&p.FaceDetectorGraphOptions.toObject(u,f),faceLandmarksDetectorGraphOptions:(f=d.getFaceLandmarksDetectorGraphOptions())&&c.FaceLandmarksDetectorGraphOptions.toObject(u,f),minTrackingConfidence:e.Message.getFloatingPointFieldWithDefault(d,4,.5),faceGeometryGraphOptions:(f=d.getFaceGeometryGraphOptions())&&l.FaceGeometryGraphOptions.toObject(u,f)};return u&&(g.$jspbMessageInstance=d),g}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinary=function(u){var d=new e.BinaryReader(u),f=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader(f,d)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader=function(u,d){for(;d.nextField()&&!d.isEndGroup();)switch(d.getFieldNumber()){case 1:var f=new s.BaseOptions;d.readMessage(f,s.BaseOptions.deserializeBinaryFromReader),u.setBaseOptions(f);break;case 2:f=new p.FaceDetectorGraphOptions,d.readMessage(f,p.FaceDetectorGraphOptions.deserializeBinaryFromReader),u.setFaceDetectorGraphOptions(f);break;case 3:f=new c.FaceLandmarksDetectorGraphOptions,d.readMessage(f,c.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader),u.setFaceLandmarksDetectorGraphOptions(f);break;case 4:f=d.readFloat(),u.setMinTrackingConfidence(f);break;case 5:f=new l.FaceGeometryGraphOptions,d.readMessage(f,l.FaceGeometryGraphOptions.deserializeBinaryFromReader),u.setFaceGeometryGraphOptions(f);break;default:d.skipField()}return u},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.serializeBinary=function(){var u=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter(this,u),u.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter=function(u,d){var f=void 0;(f=u.getBaseOptions())!=null&&d.writeMessage(1,f,s.BaseOptions.serializeBinaryToWriter),(f=u.getFaceDetectorGraphOptions())!=null&&d.writeMessage(2,f,p.FaceDetectorGraphOptions.serializeBinaryToWriter),(f=u.getFaceLandmarksDetectorGraphOptions())!=null&&d.writeMessage(3,f,c.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter),(f=e.Message.getField(u,4))!=null&&d.writeFloat(4,f),(f=u.getFaceGeometryGraphOptions())!=null&&d.writeMessage(5,f,l.FaceGeometryGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508968150]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setBaseOptions=function(u){return e.Message.setWrapperField(this,1,u)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceDetectorGraphOptions=function(){return e.Message.getWrapperField(this,p.FaceDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceDetectorGraphOptions=function(u){return e.Message.setWrapperField(this,2,u)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceDetectorGraphOptions=function(){return this.setFaceDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceDetectorGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceLandmarksDetectorGraphOptions=function(){return e.Message.getWrapperField(this,c.FaceLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceLandmarksDetectorGraphOptions=function(u){return e.Message.setWrapperField(this,3,u)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceLandmarksDetectorGraphOptions=function(){return this.setFaceLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceLandmarksDetectorGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(u){return e.Message.setField(this,4,u)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceGeometryGraphOptions=function(){return e.Message.getWrapperField(this,l.FaceGeometryGraphOptions,5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceGeometryGraphOptions=function(u){return e.Message.setWrapperField(this,5,u)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceGeometryGraphOptions=function(){return this.setFaceGeometryGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceGeometryGraphOptions=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[508968150]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_landmarker.proto)})(e2);Ks={};Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.convertFromClassificationResultProto=Ks.convertFromClassifications=void 0;sB=-1,uN=0;Ks.convertFromClassifications=LB,Ks.convertFromClassificationResultProto=gN;Qa={};Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.convertToWorldLandmarks=Qa.convertToLandmarks=void 0,Qa.convertToLandmarks=hN,Qa.convertToWorldLandmarks=mN;PB={};Xt=PB,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.FACE_LANDMARKS_TESSELATION=Xt.FACE_LANDMARKS_CONTOURS=Xt.FACE_LANDMARKS_FACE_OVAL=Xt.FACE_LANDMARKS_RIGHT_IRIS=Xt.FACE_LANDMARKS_RIGHT_EYEBROW=Xt.FACE_LANDMARKS_RIGHT_EYE=Xt.FACE_LANDMARKS_LEFT_IRIS=Xt.FACE_LANDMARKS_LEFT_EYEBROW=Xt.FACE_LANDMARKS_LEFT_EYE=Xt.FACE_LANDMARKS_LIPS=void 0,Xt.FACE_LANDMARKS_LIPS=[{start:61,end:146},{start:146,end:91},{start:91,end:181},{start:181,end:84},{start:84,end:17},{start:17,end:314},{start:314,end:405},{start:405,end:321},{start:321,end:375},{start:375,end:291},{start:61,end:185},{start:185,end:40},{start:40,end:39},{start:39,end:37},{start:37,end:0},{start:0,end:267},{start:267,end:269},{start:269,end:270},{start:270,end:409},{start:409,end:291},{start:78,end:95},{start:95,end:88},{start:88,end:178},{start:178,end:87},{start:87,end:14},{start:14,end:317},{start:317,end:402},{start:402,end:318},{start:318,end:324},{start:324,end:308},{start:78,end:191},{start:191,end:80},{start:80,end:81},{start:81,end:82},{start:82,end:13},{start:13,end:312},{start:312,end:311},{start:311,end:310},{start:310,end:415},{start:415,end:308}],Xt.FACE_LANDMARKS_LEFT_EYE=[{start:263,end:249},{start:249,end:390},{start:390,end:373},{start:373,end:374},{start:374,end:380},{start:380,end:381},{start:381,end:382},{start:382,end:362},{start:263,end:466},{start:466,end:388},{start:388,end:387},{start:387,end:386},{start:386,end:385},{start:385,end:384},{start:384,end:398},{start:398,end:362}],Xt.FACE_LANDMARKS_LEFT_EYEBROW=[{start:276,end:283},{start:283,end:282},{start:282,end:295},{start:295,end:285},{start:300,end:293},{start:293,end:334},{start:334,end:296},{start:296,end:336}],Xt.FACE_LANDMARKS_LEFT_IRIS=[{start:474,end:475},{start:475,end:476},{start:476,end:477},{start:477,end:474}],Xt.FACE_LANDMARKS_RIGHT_EYE=[{start:33,end:7},{start:7,end:163},{start:163,end:144},{start:144,end:145},{start:145,end:153},{start:153,end:154},{start:154,end:155},{start:155,end:133},{start:33,end:246},{start:246,end:161},{start:161,end:160},{start:160,end:159},{start:159,end:158},{start:158,end:157},{start:157,end:173},{start:173,end:133}],Xt.FACE_LANDMARKS_RIGHT_EYEBROW=[{start:46,end:53},{start:53,end:52},{start:52,end:65},{start:65,end:55},{start:70,end:63},{start:63,end:105},{start:105,end:66},{start:66,end:107}],Xt.FACE_LANDMARKS_RIGHT_IRIS=[{start:469,end:470},{start:470,end:471},{start:471,end:472},{start:472,end:469}],Xt.FACE_LANDMARKS_FACE_OVAL=[{start:10,end:338},{start:338,end:297},{start:297,end:332},{start:332,end:284},{start:284,end:251},{start:251,end:389},{start:389,end:356},{start:356,end:454},{start:454,end:323},{start:323,end:361},{start:361,end:288},{start:288,end:397},{start:397,end:365},{start:365,end:379},{start:379,end:378},{start:378,end:400},{start:400,end:377},{start:377,end:152},{start:152,end:148},{start:148,end:176},{start:176,end:149},{start:149,end:150},{start:150,end:136},{start:136,end:172},{start:172,end:58},{start:58,end:132},{start:132,end:93},{start:93,end:234},{start:234,end:127},{start:127,end:162},{start:162,end:21},{start:21,end:54},{start:54,end:103},{start:103,end:67},{start:67,end:109},{start:109,end:10}],Xt.FACE_LANDMARKS_CONTOURS=[...Xt.FACE_LANDMARKS_LIPS,...Xt.FACE_LANDMARKS_LEFT_EYE,...Xt.FACE_LANDMARKS_LEFT_EYEBROW,...Xt.FACE_LANDMARKS_RIGHT_EYE,...Xt.FACE_LANDMARKS_RIGHT_EYEBROW,...Xt.FACE_LANDMARKS_FACE_OVAL],Xt.FACE_LANDMARKS_TESSELATION=[{start:127,end:34},{start:34,end:139},{start:139,end:127},{start:11,end:0},{start:0,end:37},{start:37,end:11},{start:232,end:231},{start:231,end:120},{start:120,end:232},{start:72,end:37},{start:37,end:39},{start:39,end:72},{start:128,end:121},{start:121,end:47},{start:47,end:128},{start:232,end:121},{start:121,end:128},{start:128,end:232},{start:104,end:69},{start:69,end:67},{start:67,end:104},{start:175,end:171},{start:171,end:148},{start:148,end:175},{start:118,end:50},{start:50,end:101},{start:101,end:118},{start:73,end:39},{start:39,end:40},{start:40,end:73},{start:9,end:151},{start:151,end:108},{start:108,end:9},{start:48,end:115},{start:115,end:131},{start:131,end:48},{start:194,end:204},{start:204,end:211},{start:211,end:194},{start:74,end:40},{start:40,end:185},{start:185,end:74},{start:80,end:42},{start:42,end:183},{start:183,end:80},{start:40,end:92},{start:92,end:186},{start:186,end:40},{start:230,end:229},{start:229,end:118},{start:118,end:230},{start:202,end:212},{start:212,end:214},{start:214,end:202},{start:83,end:18},{start:18,end:17},{start:17,end:83},{start:76,end:61},{start:61,end:146},{start:146,end:76},{start:160,end:29},{start:29,end:30},{start:30,end:160},{start:56,end:157},{start:157,end:173},{start:173,end:56},{start:106,end:204},{start:204,end:194},{start:194,end:106},{start:135,end:214},{start:214,end:192},{start:192,end:135},{start:203,end:165},{start:165,end:98},{start:98,end:203},{start:21,end:71},{start:71,end:68},{start:68,end:21},{start:51,end:45},{start:45,end:4},{start:4,end:51},{start:144,end:24},{start:24,end:23},{start:23,end:144},{start:77,end:146},{start:146,end:91},{start:91,end:77},{start:205,end:50},{start:50,end:187},{start:187,end:205},{start:201,end:200},{start:200,end:18},{start:18,end:201},{start:91,end:106},{start:106,end:182},{start:182,end:91},{start:90,end:91},{start:91,end:181},{start:181,end:90},{start:85,end:84},{start:84,end:17},{start:17,end:85},{start:206,end:203},{start:203,end:36},{start:36,end:206},{start:148,end:171},{start:171,end:140},{start:140,end:148},{start:92,end:40},{start:40,end:39},{start:39,end:92},{start:193,end:189},{start:189,end:244},{start:244,end:193},{start:159,end:158},{start:158,end:28},{start:28,end:159},{start:247,end:246},{start:246,end:161},{start:161,end:247},{start:236,end:3},{start:3,end:196},{start:196,end:236},{start:54,end:68},{start:68,end:104},{start:104,end:54},{start:193,end:168},{start:168,end:8},{start:8,end:193},{start:117,end:228},{start:228,end:31},{start:31,end:117},{start:189,end:193},{start:193,end:55},{start:55,end:189},{start:98,end:97},{start:97,end:99},{start:99,end:98},{start:126,end:47},{start:47,end:100},{start:100,end:126},{start:166,end:79},{start:79,end:218},{start:218,end:166},{start:155,end:154},{start:154,end:26},{start:26,end:155},{start:209,end:49},{start:49,end:131},{start:131,end:209},{start:135,end:136},{start:136,end:150},{start:150,end:135},{start:47,end:126},{start:126,end:217},{start:217,end:47},{start:223,end:52},{start:52,end:53},{start:53,end:223},{start:45,end:51},{start:51,end:134},{start:134,end:45},{start:211,end:170},{start:170,end:140},{start:140,end:211},{start:67,end:69},{start:69,end:108},{start:108,end:67},{start:43,end:106},{start:106,end:91},{start:91,end:43},{start:230,end:119},{start:119,end:120},{start:120,end:230},{start:226,end:130},{start:130,end:247},{start:247,end:226},{start:63,end:53},{start:53,end:52},{start:52,end:63},{start:238,end:20},{start:20,end:242},{start:242,end:238},{start:46,end:70},{start:70,end:156},{start:156,end:46},{start:78,end:62},{start:62,end:96},{start:96,end:78},{start:46,end:53},{start:53,end:63},{start:63,end:46},{start:143,end:34},{start:34,end:227},{start:227,end:143},{start:123,end:117},{start:117,end:111},{start:111,end:123},{start:44,end:125},{start:125,end:19},{start:19,end:44},{start:236,end:134},{start:134,end:51},{start:51,end:236},{start:216,end:206},{start:206,end:205},{start:205,end:216},{start:154,end:153},{start:153,end:22},{start:22,end:154},{start:39,end:37},{start:37,end:167},{start:167,end:39},{start:200,end:201},{start:201,end:208},{start:208,end:200},{start:36,end:142},{start:142,end:100},{start:100,end:36},{start:57,end:212},{start:212,end:202},{start:202,end:57},{start:20,end:60},{start:60,end:99},{start:99,end:20},{start:28,end:158},{start:158,end:157},{start:157,end:28},{start:35,end:226},{start:226,end:113},{start:113,end:35},{start:160,end:159},{start:159,end:27},{start:27,end:160},{start:204,end:202},{start:202,end:210},{start:210,end:204},{start:113,end:225},{start:225,end:46},{start:46,end:113},{start:43,end:202},{start:202,end:204},{start:204,end:43},{start:62,end:76},{start:76,end:77},{start:77,end:62},{start:137,end:123},{start:123,end:116},{start:116,end:137},{start:41,end:38},{start:38,end:72},{start:72,end:41},{start:203,end:129},{start:129,end:142},{start:142,end:203},{start:64,end:98},{start:98,end:240},{start:240,end:64},{start:49,end:102},{start:102,end:64},{start:64,end:49},{start:41,end:73},{start:73,end:74},{start:74,end:41},{start:212,end:216},{start:216,end:207},{start:207,end:212},{start:42,end:74},{start:74,end:184},{start:184,end:42},{start:169,end:170},{start:170,end:211},{start:211,end:169},{start:170,end:149},{start:149,end:176},{start:176,end:170},{start:105,end:66},{start:66,end:69},{start:69,end:105},{start:122,end:6},{start:6,end:168},{start:168,end:122},{start:123,end:147},{start:147,end:187},{start:187,end:123},{start:96,end:77},{start:77,end:90},{start:90,end:96},{start:65,end:55},{start:55,end:107},{start:107,end:65},{start:89,end:90},{start:90,end:180},{start:180,end:89},{start:101,end:100},{start:100,end:120},{start:120,end:101},{start:63,end:105},{start:105,end:104},{start:104,end:63},{start:93,end:137},{start:137,end:227},{start:227,end:93},{start:15,end:86},{start:86,end:85},{start:85,end:15},{start:129,end:102},{start:102,end:49},{start:49,end:129},{start:14,end:87},{start:87,end:86},{start:86,end:14},{start:55,end:8},{start:8,end:9},{start:9,end:55},{start:100,end:47},{start:47,end:121},{start:121,end:100},{start:145,end:23},{start:23,end:22},{start:22,end:145},{start:88,end:89},{start:89,end:179},{start:179,end:88},{start:6,end:122},{start:122,end:196},{start:196,end:6},{start:88,end:95},{start:95,end:96},{start:96,end:88},{start:138,end:172},{start:172,end:136},{start:136,end:138},{start:215,end:58},{start:58,end:172},{start:172,end:215},{start:115,end:48},{start:48,end:219},{start:219,end:115},{start:42,end:80},{start:80,end:81},{start:81,end:42},{start:195,end:3},{start:3,end:51},{start:51,end:195},{start:43,end:146},{start:146,end:61},{start:61,end:43},{start:171,end:175},{start:175,end:199},{start:199,end:171},{start:81,end:82},{start:82,end:38},{start:38,end:81},{start:53,end:46},{start:46,end:225},{start:225,end:53},{start:144,end:163},{start:163,end:110},{start:110,end:144},{start:52,end:65},{start:65,end:66},{start:66,end:52},{start:229,end:228},{start:228,end:117},{start:117,end:229},{start:34,end:127},{start:127,end:234},{start:234,end:34},{start:107,end:108},{start:108,end:69},{start:69,end:107},{start:109,end:108},{start:108,end:151},{start:151,end:109},{start:48,end:64},{start:64,end:235},{start:235,end:48},{start:62,end:78},{start:78,end:191},{start:191,end:62},{start:129,end:209},{start:209,end:126},{start:126,end:129},{start:111,end:35},{start:35,end:143},{start:143,end:111},{start:117,end:123},{start:123,end:50},{start:50,end:117},{start:222,end:65},{start:65,end:52},{start:52,end:222},{start:19,end:125},{start:125,end:141},{start:141,end:19},{start:221,end:55},{start:55,end:65},{start:65,end:221},{start:3,end:195},{start:195,end:197},{start:197,end:3},{start:25,end:7},{start:7,end:33},{start:33,end:25},{start:220,end:237},{start:237,end:44},{start:44,end:220},{start:70,end:71},{start:71,end:139},{start:139,end:70},{start:122,end:193},{start:193,end:245},{start:245,end:122},{start:247,end:130},{start:130,end:33},{start:33,end:247},{start:71,end:21},{start:21,end:162},{start:162,end:71},{start:170,end:169},{start:169,end:150},{start:150,end:170},{start:188,end:174},{start:174,end:196},{start:196,end:188},{start:216,end:186},{start:186,end:92},{start:92,end:216},{start:2,end:97},{start:97,end:167},{start:167,end:2},{start:141,end:125},{start:125,end:241},{start:241,end:141},{start:164,end:167},{start:167,end:37},{start:37,end:164},{start:72,end:38},{start:38,end:12},{start:12,end:72},{start:38,end:82},{start:82,end:13},{start:13,end:38},{start:63,end:68},{start:68,end:71},{start:71,end:63},{start:226,end:35},{start:35,end:111},{start:111,end:226},{start:101,end:50},{start:50,end:205},{start:205,end:101},{start:206,end:92},{start:92,end:165},{start:165,end:206},{start:209,end:198},{start:198,end:217},{start:217,end:209},{start:165,end:167},{start:167,end:97},{start:97,end:165},{start:220,end:115},{start:115,end:218},{start:218,end:220},{start:133,end:112},{start:112,end:243},{start:243,end:133},{start:239,end:238},{start:238,end:241},{start:241,end:239},{start:214,end:135},{start:135,end:169},{start:169,end:214},{start:190,end:173},{start:173,end:133},{start:133,end:190},{start:171,end:208},{start:208,end:32},{start:32,end:171},{start:125,end:44},{start:44,end:237},{start:237,end:125},{start:86,end:87},{start:87,end:178},{start:178,end:86},{start:85,end:86},{start:86,end:179},{start:179,end:85},{start:84,end:85},{start:85,end:180},{start:180,end:84},{start:83,end:84},{start:84,end:181},{start:181,end:83},{start:201,end:83},{start:83,end:182},{start:182,end:201},{start:137,end:93},{start:93,end:132},{start:132,end:137},{start:76,end:62},{start:62,end:183},{start:183,end:76},{start:61,end:76},{start:76,end:184},{start:184,end:61},{start:57,end:61},{start:61,end:185},{start:185,end:57},{start:212,end:57},{start:57,end:186},{start:186,end:212},{start:214,end:207},{start:207,end:187},{start:187,end:214},{start:34,end:143},{start:143,end:156},{start:156,end:34},{start:79,end:239},{start:239,end:237},{start:237,end:79},{start:123,end:137},{start:137,end:177},{start:177,end:123},{start:44,end:1},{start:1,end:4},{start:4,end:44},{start:201,end:194},{start:194,end:32},{start:32,end:201},{start:64,end:102},{start:102,end:129},{start:129,end:64},{start:213,end:215},{start:215,end:138},{start:138,end:213},{start:59,end:166},{start:166,end:219},{start:219,end:59},{start:242,end:99},{start:99,end:97},{start:97,end:242},{start:2,end:94},{start:94,end:141},{start:141,end:2},{start:75,end:59},{start:59,end:235},{start:235,end:75},{start:24,end:110},{start:110,end:228},{start:228,end:24},{start:25,end:130},{start:130,end:226},{start:226,end:25},{start:23,end:24},{start:24,end:229},{start:229,end:23},{start:22,end:23},{start:23,end:230},{start:230,end:22},{start:26,end:22},{start:22,end:231},{start:231,end:26},{start:112,end:26},{start:26,end:232},{start:232,end:112},{start:189,end:190},{start:190,end:243},{start:243,end:189},{start:221,end:56},{start:56,end:190},{start:190,end:221},{start:28,end:56},{start:56,end:221},{start:221,end:28},{start:27,end:28},{start:28,end:222},{start:222,end:27},{start:29,end:27},{start:27,end:223},{start:223,end:29},{start:30,end:29},{start:29,end:224},{start:224,end:30},{start:247,end:30},{start:30,end:225},{start:225,end:247},{start:238,end:79},{start:79,end:20},{start:20,end:238},{start:166,end:59},{start:59,end:75},{start:75,end:166},{start:60,end:75},{start:75,end:240},{start:240,end:60},{start:147,end:177},{start:177,end:215},{start:215,end:147},{start:20,end:79},{start:79,end:166},{start:166,end:20},{start:187,end:147},{start:147,end:213},{start:213,end:187},{start:112,end:233},{start:233,end:244},{start:244,end:112},{start:233,end:128},{start:128,end:245},{start:245,end:233},{start:128,end:114},{start:114,end:188},{start:188,end:128},{start:114,end:217},{start:217,end:174},{start:174,end:114},{start:131,end:115},{start:115,end:220},{start:220,end:131},{start:217,end:198},{start:198,end:236},{start:236,end:217},{start:198,end:131},{start:131,end:134},{start:134,end:198},{start:177,end:132},{start:132,end:58},{start:58,end:177},{start:143,end:35},{start:35,end:124},{start:124,end:143},{start:110,end:163},{start:163,end:7},{start:7,end:110},{start:228,end:110},{start:110,end:25},{start:25,end:228},{start:356,end:389},{start:389,end:368},{start:368,end:356},{start:11,end:302},{start:302,end:267},{start:267,end:11},{start:452,end:350},{start:350,end:349},{start:349,end:452},{start:302,end:303},{start:303,end:269},{start:269,end:302},{start:357,end:343},{start:343,end:277},{start:277,end:357},{start:452,end:453},{start:453,end:357},{start:357,end:452},{start:333,end:332},{start:332,end:297},{start:297,end:333},{start:175,end:152},{start:152,end:377},{start:377,end:175},{start:347,end:348},{start:348,end:330},{start:330,end:347},{start:303,end:304},{start:304,end:270},{start:270,end:303},{start:9,end:336},{start:336,end:337},{start:337,end:9},{start:278,end:279},{start:279,end:360},{start:360,end:278},{start:418,end:262},{start:262,end:431},{start:431,end:418},{start:304,end:408},{start:408,end:409},{start:409,end:304},{start:310,end:415},{start:415,end:407},{start:407,end:310},{start:270,end:409},{start:409,end:410},{start:410,end:270},{start:450,end:348},{start:348,end:347},{start:347,end:450},{start:422,end:430},{start:430,end:434},{start:434,end:422},{start:313,end:314},{start:314,end:17},{start:17,end:313},{start:306,end:307},{start:307,end:375},{start:375,end:306},{start:387,end:388},{start:388,end:260},{start:260,end:387},{start:286,end:414},{start:414,end:398},{start:398,end:286},{start:335,end:406},{start:406,end:418},{start:418,end:335},{start:364,end:367},{start:367,end:416},{start:416,end:364},{start:423,end:358},{start:358,end:327},{start:327,end:423},{start:251,end:284},{start:284,end:298},{start:298,end:251},{start:281,end:5},{start:5,end:4},{start:4,end:281},{start:373,end:374},{start:374,end:253},{start:253,end:373},{start:307,end:320},{start:320,end:321},{start:321,end:307},{start:425,end:427},{start:427,end:411},{start:411,end:425},{start:421,end:313},{start:313,end:18},{start:18,end:421},{start:321,end:405},{start:405,end:406},{start:406,end:321},{start:320,end:404},{start:404,end:405},{start:405,end:320},{start:315,end:16},{start:16,end:17},{start:17,end:315},{start:426,end:425},{start:425,end:266},{start:266,end:426},{start:377,end:400},{start:400,end:369},{start:369,end:377},{start:322,end:391},{start:391,end:269},{start:269,end:322},{start:417,end:465},{start:465,end:464},{start:464,end:417},{start:386,end:257},{start:257,end:258},{start:258,end:386},{start:466,end:260},{start:260,end:388},{start:388,end:466},{start:456,end:399},{start:399,end:419},{start:419,end:456},{start:284,end:332},{start:332,end:333},{start:333,end:284},{start:417,end:285},{start:285,end:8},{start:8,end:417},{start:346,end:340},{start:340,end:261},{start:261,end:346},{start:413,end:441},{start:441,end:285},{start:285,end:413},{start:327,end:460},{start:460,end:328},{start:328,end:327},{start:355,end:371},{start:371,end:329},{start:329,end:355},{start:392,end:439},{start:439,end:438},{start:438,end:392},{start:382,end:341},{start:341,end:256},{start:256,end:382},{start:429,end:420},{start:420,end:360},{start:360,end:429},{start:364,end:394},{start:394,end:379},{start:379,end:364},{start:277,end:343},{start:343,end:437},{start:437,end:277},{start:443,end:444},{start:444,end:283},{start:283,end:443},{start:275,end:440},{start:440,end:363},{start:363,end:275},{start:431,end:262},{start:262,end:369},{start:369,end:431},{start:297,end:338},{start:338,end:337},{start:337,end:297},{start:273,end:375},{start:375,end:321},{start:321,end:273},{start:450,end:451},{start:451,end:349},{start:349,end:450},{start:446,end:342},{start:342,end:467},{start:467,end:446},{start:293,end:334},{start:334,end:282},{start:282,end:293},{start:458,end:461},{start:461,end:462},{start:462,end:458},{start:276,end:353},{start:353,end:383},{start:383,end:276},{start:308,end:324},{start:324,end:325},{start:325,end:308},{start:276,end:300},{start:300,end:293},{start:293,end:276},{start:372,end:345},{start:345,end:447},{start:447,end:372},{start:352,end:345},{start:345,end:340},{start:340,end:352},{start:274,end:1},{start:1,end:19},{start:19,end:274},{start:456,end:248},{start:248,end:281},{start:281,end:456},{start:436,end:427},{start:427,end:425},{start:425,end:436},{start:381,end:256},{start:256,end:252},{start:252,end:381},{start:269,end:391},{start:391,end:393},{start:393,end:269},{start:200,end:199},{start:199,end:428},{start:428,end:200},{start:266,end:330},{start:330,end:329},{start:329,end:266},{start:287,end:273},{start:273,end:422},{start:422,end:287},{start:250,end:462},{start:462,end:328},{start:328,end:250},{start:258,end:286},{start:286,end:384},{start:384,end:258},{start:265,end:353},{start:353,end:342},{start:342,end:265},{start:387,end:259},{start:259,end:257},{start:257,end:387},{start:424,end:431},{start:431,end:430},{start:430,end:424},{start:342,end:353},{start:353,end:276},{start:276,end:342},{start:273,end:335},{start:335,end:424},{start:424,end:273},{start:292,end:325},{start:325,end:307},{start:307,end:292},{start:366,end:447},{start:447,end:345},{start:345,end:366},{start:271,end:303},{start:303,end:302},{start:302,end:271},{start:423,end:266},{start:266,end:371},{start:371,end:423},{start:294,end:455},{start:455,end:460},{start:460,end:294},{start:279,end:278},{start:278,end:294},{start:294,end:279},{start:271,end:272},{start:272,end:304},{start:304,end:271},{start:432,end:434},{start:434,end:427},{start:427,end:432},{start:272,end:407},{start:407,end:408},{start:408,end:272},{start:394,end:430},{start:430,end:431},{start:431,end:394},{start:395,end:369},{start:369,end:400},{start:400,end:395},{start:334,end:333},{start:333,end:299},{start:299,end:334},{start:351,end:417},{start:417,end:168},{start:168,end:351},{start:352,end:280},{start:280,end:411},{start:411,end:352},{start:325,end:319},{start:319,end:320},{start:320,end:325},{start:295,end:296},{start:296,end:336},{start:336,end:295},{start:319,end:403},{start:403,end:404},{start:404,end:319},{start:330,end:348},{start:348,end:349},{start:349,end:330},{start:293,end:298},{start:298,end:333},{start:333,end:293},{start:323,end:454},{start:454,end:447},{start:447,end:323},{start:15,end:16},{start:16,end:315},{start:315,end:15},{start:358,end:429},{start:429,end:279},{start:279,end:358},{start:14,end:15},{start:15,end:316},{start:316,end:14},{start:285,end:336},{start:336,end:9},{start:9,end:285},{start:329,end:349},{start:349,end:350},{start:350,end:329},{start:374,end:380},{start:380,end:252},{start:252,end:374},{start:318,end:402},{start:402,end:403},{start:403,end:318},{start:6,end:197},{start:197,end:419},{start:419,end:6},{start:318,end:319},{start:319,end:325},{start:325,end:318},{start:367,end:364},{start:364,end:365},{start:365,end:367},{start:435,end:367},{start:367,end:397},{start:397,end:435},{start:344,end:438},{start:438,end:439},{start:439,end:344},{start:272,end:271},{start:271,end:311},{start:311,end:272},{start:195,end:5},{start:5,end:281},{start:281,end:195},{start:273,end:287},{start:287,end:291},{start:291,end:273},{start:396,end:428},{start:428,end:199},{start:199,end:396},{start:311,end:271},{start:271,end:268},{start:268,end:311},{start:283,end:444},{start:444,end:445},{start:445,end:283},{start:373,end:254},{start:254,end:339},{start:339,end:373},{start:282,end:334},{start:334,end:296},{start:296,end:282},{start:449,end:347},{start:347,end:346},{start:346,end:449},{start:264,end:447},{start:447,end:454},{start:454,end:264},{start:336,end:296},{start:296,end:299},{start:299,end:336},{start:338,end:10},{start:10,end:151},{start:151,end:338},{start:278,end:439},{start:439,end:455},{start:455,end:278},{start:292,end:407},{start:407,end:415},{start:415,end:292},{start:358,end:371},{start:371,end:355},{start:355,end:358},{start:340,end:345},{start:345,end:372},{start:372,end:340},{start:346,end:347},{start:347,end:280},{start:280,end:346},{start:442,end:443},{start:443,end:282},{start:282,end:442},{start:19,end:94},{start:94,end:370},{start:370,end:19},{start:441,end:442},{start:442,end:295},{start:295,end:441},{start:248,end:419},{start:419,end:197},{start:197,end:248},{start:263,end:255},{start:255,end:359},{start:359,end:263},{start:440,end:275},{start:275,end:274},{start:274,end:440},{start:300,end:383},{start:383,end:368},{start:368,end:300},{start:351,end:412},{start:412,end:465},{start:465,end:351},{start:263,end:467},{start:467,end:466},{start:466,end:263},{start:301,end:368},{start:368,end:389},{start:389,end:301},{start:395,end:378},{start:378,end:379},{start:379,end:395},{start:412,end:351},{start:351,end:419},{start:419,end:412},{start:436,end:426},{start:426,end:322},{start:322,end:436},{start:2,end:164},{start:164,end:393},{start:393,end:2},{start:370,end:462},{start:462,end:461},{start:461,end:370},{start:164,end:0},{start:0,end:267},{start:267,end:164},{start:302,end:11},{start:11,end:12},{start:12,end:302},{start:268,end:12},{start:12,end:13},{start:13,end:268},{start:293,end:300},{start:300,end:301},{start:301,end:293},{start:446,end:261},{start:261,end:340},{start:340,end:446},{start:330,end:266},{start:266,end:425},{start:425,end:330},{start:426,end:423},{start:423,end:391},{start:391,end:426},{start:429,end:355},{start:355,end:437},{start:437,end:429},{start:391,end:327},{start:327,end:326},{start:326,end:391},{start:440,end:457},{start:457,end:438},{start:438,end:440},{start:341,end:382},{start:382,end:362},{start:362,end:341},{start:459,end:457},{start:457,end:461},{start:461,end:459},{start:434,end:430},{start:430,end:394},{start:394,end:434},{start:414,end:463},{start:463,end:362},{start:362,end:414},{start:396,end:369},{start:369,end:262},{start:262,end:396},{start:354,end:461},{start:461,end:457},{start:457,end:354},{start:316,end:403},{start:403,end:402},{start:402,end:316},{start:315,end:404},{start:404,end:403},{start:403,end:315},{start:314,end:405},{start:405,end:404},{start:404,end:314},{start:313,end:406},{start:406,end:405},{start:405,end:313},{start:421,end:418},{start:418,end:406},{start:406,end:421},{start:366,end:401},{start:401,end:361},{start:361,end:366},{start:306,end:408},{start:408,end:407},{start:407,end:306},{start:291,end:409},{start:409,end:408},{start:408,end:291},{start:287,end:410},{start:410,end:409},{start:409,end:287},{start:432,end:436},{start:436,end:410},{start:410,end:432},{start:434,end:416},{start:416,end:411},{start:411,end:434},{start:264,end:368},{start:368,end:383},{start:383,end:264},{start:309,end:438},{start:438,end:457},{start:457,end:309},{start:352,end:376},{start:376,end:401},{start:401,end:352},{start:274,end:275},{start:275,end:4},{start:4,end:274},{start:421,end:428},{start:428,end:262},{start:262,end:421},{start:294,end:327},{start:327,end:358},{start:358,end:294},{start:433,end:416},{start:416,end:367},{start:367,end:433},{start:289,end:455},{start:455,end:439},{start:439,end:289},{start:462,end:370},{start:370,end:326},{start:326,end:462},{start:2,end:326},{start:326,end:370},{start:370,end:2},{start:305,end:460},{start:460,end:455},{start:455,end:305},{start:254,end:449},{start:449,end:448},{start:448,end:254},{start:255,end:261},{start:261,end:446},{start:446,end:255},{start:253,end:450},{start:450,end:449},{start:449,end:253},{start:252,end:451},{start:451,end:450},{start:450,end:252},{start:256,end:452},{start:452,end:451},{start:451,end:256},{start:341,end:453},{start:453,end:452},{start:452,end:341},{start:413,end:464},{start:464,end:463},{start:463,end:413},{start:441,end:413},{start:413,end:414},{start:414,end:441},{start:258,end:442},{start:442,end:441},{start:441,end:258},{start:257,end:443},{start:443,end:442},{start:442,end:257},{start:259,end:444},{start:444,end:443},{start:443,end:259},{start:260,end:445},{start:445,end:444},{start:444,end:260},{start:467,end:342},{start:342,end:445},{start:445,end:467},{start:459,end:458},{start:458,end:250},{start:250,end:459},{start:289,end:392},{start:392,end:290},{start:290,end:289},{start:290,end:328},{start:328,end:460},{start:460,end:290},{start:376,end:433},{start:433,end:435},{start:435,end:376},{start:250,end:290},{start:290,end:392},{start:392,end:250},{start:411,end:416},{start:416,end:433},{start:433,end:411},{start:341,end:463},{start:463,end:464},{start:464,end:341},{start:453,end:464},{start:464,end:465},{start:465,end:453},{start:357,end:465},{start:465,end:412},{start:412,end:357},{start:343,end:412},{start:412,end:399},{start:399,end:343},{start:360,end:363},{start:363,end:440},{start:440,end:360},{start:437,end:399},{start:399,end:456},{start:456,end:437},{start:420,end:456},{start:456,end:363},{start:363,end:420},{start:401,end:435},{start:435,end:288},{start:288,end:401},{start:372,end:383},{start:383,end:353},{start:353,end:372},{start:339,end:255},{start:255,end:249},{start:249,end:339},{start:448,end:261},{start:261,end:255},{start:255,end:448},{start:133,end:243},{start:243,end:190},{start:190,end:133},{start:133,end:155},{start:155,end:112},{start:112,end:133},{start:33,end:246},{start:246,end:247},{start:247,end:33},{start:33,end:130},{start:130,end:25},{start:25,end:33},{start:398,end:384},{start:384,end:286},{start:286,end:398},{start:362,end:398},{start:398,end:414},{start:414,end:362},{start:362,end:463},{start:463,end:341},{start:341,end:362},{start:263,end:359},{start:359,end:467},{start:467,end:263},{start:263,end:249},{start:249,end:255},{start:255,end:263},{start:466,end:467},{start:467,end:260},{start:260,end:466},{start:75,end:60},{start:60,end:166},{start:166,end:75},{start:238,end:239},{start:239,end:79},{start:79,end:238},{start:162,end:127},{start:127,end:139},{start:139,end:162},{start:72,end:11},{start:11,end:37},{start:37,end:72},{start:121,end:232},{start:232,end:120},{start:120,end:121},{start:73,end:72},{start:72,end:39},{start:39,end:73},{start:114,end:128},{start:128,end:47},{start:47,end:114},{start:233,end:232},{start:232,end:128},{start:128,end:233},{start:103,end:104},{start:104,end:67},{start:67,end:103},{start:152,end:175},{start:175,end:148},{start:148,end:152},{start:119,end:118},{start:118,end:101},{start:101,end:119},{start:74,end:73},{start:73,end:40},{start:40,end:74},{start:107,end:9},{start:9,end:108},{start:108,end:107},{start:49,end:48},{start:48,end:131},{start:131,end:49},{start:32,end:194},{start:194,end:211},{start:211,end:32},{start:184,end:74},{start:74,end:185},{start:185,end:184},{start:191,end:80},{start:80,end:183},{start:183,end:191},{start:185,end:40},{start:40,end:186},{start:186,end:185},{start:119,end:230},{start:230,end:118},{start:118,end:119},{start:210,end:202},{start:202,end:214},{start:214,end:210},{start:84,end:83},{start:83,end:17},{start:17,end:84},{start:77,end:76},{start:76,end:146},{start:146,end:77},{start:161,end:160},{start:160,end:30},{start:30,end:161},{start:190,end:56},{start:56,end:173},{start:173,end:190},{start:182,end:106},{start:106,end:194},{start:194,end:182},{start:138,end:135},{start:135,end:192},{start:192,end:138},{start:129,end:203},{start:203,end:98},{start:98,end:129},{start:54,end:21},{start:21,end:68},{start:68,end:54},{start:5,end:51},{start:51,end:4},{start:4,end:5},{start:145,end:144},{start:144,end:23},{start:23,end:145},{start:90,end:77},{start:77,end:91},{start:91,end:90},{start:207,end:205},{start:205,end:187},{start:187,end:207},{start:83,end:201},{start:201,end:18},{start:18,end:83},{start:181,end:91},{start:91,end:182},{start:182,end:181},{start:180,end:90},{start:90,end:181},{start:181,end:180},{start:16,end:85},{start:85,end:17},{start:17,end:16},{start:205,end:206},{start:206,end:36},{start:36,end:205},{start:176,end:148},{start:148,end:140},{start:140,end:176},{start:165,end:92},{start:92,end:39},{start:39,end:165},{start:245,end:193},{start:193,end:244},{start:244,end:245},{start:27,end:159},{start:159,end:28},{start:28,end:27},{start:30,end:247},{start:247,end:161},{start:161,end:30},{start:174,end:236},{start:236,end:196},{start:196,end:174},{start:103,end:54},{start:54,end:104},{start:104,end:103},{start:55,end:193},{start:193,end:8},{start:8,end:55},{start:111,end:117},{start:117,end:31},{start:31,end:111},{start:221,end:189},{start:189,end:55},{start:55,end:221},{start:240,end:98},{start:98,end:99},{start:99,end:240},{start:142,end:126},{start:126,end:100},{start:100,end:142},{start:219,end:166},{start:166,end:218},{start:218,end:219},{start:112,end:155},{start:155,end:26},{start:26,end:112},{start:198,end:209},{start:209,end:131},{start:131,end:198},{start:169,end:135},{start:135,end:150},{start:150,end:169},{start:114,end:47},{start:47,end:217},{start:217,end:114},{start:224,end:223},{start:223,end:53},{start:53,end:224},{start:220,end:45},{start:45,end:134},{start:134,end:220},{start:32,end:211},{start:211,end:140},{start:140,end:32},{start:109,end:67},{start:67,end:108},{start:108,end:109},{start:146,end:43},{start:43,end:91},{start:91,end:146},{start:231,end:230},{start:230,end:120},{start:120,end:231},{start:113,end:226},{start:226,end:247},{start:247,end:113},{start:105,end:63},{start:63,end:52},{start:52,end:105},{start:241,end:238},{start:238,end:242},{start:242,end:241},{start:124,end:46},{start:46,end:156},{start:156,end:124},{start:95,end:78},{start:78,end:96},{start:96,end:95},{start:70,end:46},{start:46,end:63},{start:63,end:70},{start:116,end:143},{start:143,end:227},{start:227,end:116},{start:116,end:123},{start:123,end:111},{start:111,end:116},{start:1,end:44},{start:44,end:19},{start:19,end:1},{start:3,end:236},{start:236,end:51},{start:51,end:3},{start:207,end:216},{start:216,end:205},{start:205,end:207},{start:26,end:154},{start:154,end:22},{start:22,end:26},{start:165,end:39},{start:39,end:167},{start:167,end:165},{start:199,end:200},{start:200,end:208},{start:208,end:199},{start:101,end:36},{start:36,end:100},{start:100,end:101},{start:43,end:57},{start:57,end:202},{start:202,end:43},{start:242,end:20},{start:20,end:99},{start:99,end:242},{start:56,end:28},{start:28,end:157},{start:157,end:56},{start:124,end:35},{start:35,end:113},{start:113,end:124},{start:29,end:160},{start:160,end:27},{start:27,end:29},{start:211,end:204},{start:204,end:210},{start:210,end:211},{start:124,end:113},{start:113,end:46},{start:46,end:124},{start:106,end:43},{start:43,end:204},{start:204,end:106},{start:96,end:62},{start:62,end:77},{start:77,end:96},{start:227,end:137},{start:137,end:116},{start:116,end:227},{start:73,end:41},{start:41,end:72},{start:72,end:73},{start:36,end:203},{start:203,end:142},{start:142,end:36},{start:235,end:64},{start:64,end:240},{start:240,end:235},{start:48,end:49},{start:49,end:64},{start:64,end:48},{start:42,end:41},{start:41,end:74},{start:74,end:42},{start:214,end:212},{start:212,end:207},{start:207,end:214},{start:183,end:42},{start:42,end:184},{start:184,end:183},{start:210,end:169},{start:169,end:211},{start:211,end:210},{start:140,end:170},{start:170,end:176},{start:176,end:140},{start:104,end:105},{start:105,end:69},{start:69,end:104},{start:193,end:122},{start:122,end:168},{start:168,end:193},{start:50,end:123},{start:123,end:187},{start:187,end:50},{start:89,end:96},{start:96,end:90},{start:90,end:89},{start:66,end:65},{start:65,end:107},{start:107,end:66},{start:179,end:89},{start:89,end:180},{start:180,end:179},{start:119,end:101},{start:101,end:120},{start:120,end:119},{start:68,end:63},{start:63,end:104},{start:104,end:68},{start:234,end:93},{start:93,end:227},{start:227,end:234},{start:16,end:15},{start:15,end:85},{start:85,end:16},{start:209,end:129},{start:129,end:49},{start:49,end:209},{start:15,end:14},{start:14,end:86},{start:86,end:15},{start:107,end:55},{start:55,end:9},{start:9,end:107},{start:120,end:100},{start:100,end:121},{start:121,end:120},{start:153,end:145},{start:145,end:22},{start:22,end:153},{start:178,end:88},{start:88,end:179},{start:179,end:178},{start:197,end:6},{start:6,end:196},{start:196,end:197},{start:89,end:88},{start:88,end:96},{start:96,end:89},{start:135,end:138},{start:138,end:136},{start:136,end:135},{start:138,end:215},{start:215,end:172},{start:172,end:138},{start:218,end:115},{start:115,end:219},{start:219,end:218},{start:41,end:42},{start:42,end:81},{start:81,end:41},{start:5,end:195},{start:195,end:51},{start:51,end:5},{start:57,end:43},{start:43,end:61},{start:61,end:57},{start:208,end:171},{start:171,end:199},{start:199,end:208},{start:41,end:81},{start:81,end:38},{start:38,end:41},{start:224,end:53},{start:53,end:225},{start:225,end:224},{start:24,end:144},{start:144,end:110},{start:110,end:24},{start:105,end:52},{start:52,end:66},{start:66,end:105},{start:118,end:229},{start:229,end:117},{start:117,end:118},{start:227,end:34},{start:34,end:234},{start:234,end:227},{start:66,end:107},{start:107,end:69},{start:69,end:66},{start:10,end:109},{start:109,end:151},{start:151,end:10},{start:219,end:48},{start:48,end:235},{start:235,end:219},{start:183,end:62},{start:62,end:191},{start:191,end:183},{start:142,end:129},{start:129,end:126},{start:126,end:142},{start:116,end:111},{start:111,end:143},{start:143,end:116},{start:118,end:117},{start:117,end:50},{start:50,end:118},{start:223,end:222},{start:222,end:52},{start:52,end:223},{start:94,end:19},{start:19,end:141},{start:141,end:94},{start:222,end:221},{start:221,end:65},{start:65,end:222},{start:196,end:3},{start:3,end:197},{start:197,end:196},{start:45,end:220},{start:220,end:44},{start:44,end:45},{start:156,end:70},{start:70,end:139},{start:139,end:156},{start:188,end:122},{start:122,end:245},{start:245,end:188},{start:139,end:71},{start:71,end:162},{start:162,end:139},{start:149,end:170},{start:170,end:150},{start:150,end:149},{start:122,end:188},{start:188,end:196},{start:196,end:122},{start:206,end:216},{start:216,end:92},{start:92,end:206},{start:164,end:2},{start:2,end:167},{start:167,end:164},{start:242,end:141},{start:141,end:241},{start:241,end:242},{start:0,end:164},{start:164,end:37},{start:37,end:0},{start:11,end:72},{start:72,end:12},{start:12,end:11},{start:12,end:38},{start:38,end:13},{start:13,end:12},{start:70,end:63},{start:63,end:71},{start:71,end:70},{start:31,end:226},{start:226,end:111},{start:111,end:31},{start:36,end:101},{start:101,end:205},{start:205,end:36},{start:203,end:206},{start:206,end:165},{start:165,end:203},{start:126,end:209},{start:209,end:217},{start:217,end:126},{start:98,end:165},{start:165,end:97},{start:97,end:98},{start:237,end:220},{start:220,end:218},{start:218,end:237},{start:237,end:239},{start:239,end:241},{start:241,end:237},{start:210,end:214},{start:214,end:169},{start:169,end:210},{start:140,end:171},{start:171,end:32},{start:32,end:140},{start:241,end:125},{start:125,end:237},{start:237,end:241},{start:179,end:86},{start:86,end:178},{start:178,end:179},{start:180,end:85},{start:85,end:179},{start:179,end:180},{start:181,end:84},{start:84,end:180},{start:180,end:181},{start:182,end:83},{start:83,end:181},{start:181,end:182},{start:194,end:201},{start:201,end:182},{start:182,end:194},{start:177,end:137},{start:137,end:132},{start:132,end:177},{start:184,end:76},{start:76,end:183},{start:183,end:184},{start:185,end:61},{start:61,end:184},{start:184,end:185},{start:186,end:57},{start:57,end:185},{start:185,end:186},{start:216,end:212},{start:212,end:186},{start:186,end:216},{start:192,end:214},{start:214,end:187},{start:187,end:192},{start:139,end:34},{start:34,end:156},{start:156,end:139},{start:218,end:79},{start:79,end:237},{start:237,end:218},{start:147,end:123},{start:123,end:177},{start:177,end:147},{start:45,end:44},{start:44,end:4},{start:4,end:45},{start:208,end:201},{start:201,end:32},{start:32,end:208},{start:98,end:64},{start:64,end:129},{start:129,end:98},{start:192,end:213},{start:213,end:138},{start:138,end:192},{start:235,end:59},{start:59,end:219},{start:219,end:235},{start:141,end:242},{start:242,end:97},{start:97,end:141},{start:97,end:2},{start:2,end:141},{start:141,end:97},{start:240,end:75},{start:75,end:235},{start:235,end:240},{start:229,end:24},{start:24,end:228},{start:228,end:229},{start:31,end:25},{start:25,end:226},{start:226,end:31},{start:230,end:23},{start:23,end:229},{start:229,end:230},{start:231,end:22},{start:22,end:230},{start:230,end:231},{start:232,end:26},{start:26,end:231},{start:231,end:232},{start:233,end:112},{start:112,end:232},{start:232,end:233},{start:244,end:189},{start:189,end:243},{start:243,end:244},{start:189,end:221},{start:221,end:190},{start:190,end:189},{start:222,end:28},{start:28,end:221},{start:221,end:222},{start:223,end:27},{start:27,end:222},{start:222,end:223},{start:224,end:29},{start:29,end:223},{start:223,end:224},{start:225,end:30},{start:30,end:224},{start:224,end:225},{start:113,end:247},{start:247,end:225},{start:225,end:113},{start:99,end:60},{start:60,end:240},{start:240,end:99},{start:213,end:147},{start:147,end:215},{start:215,end:213},{start:60,end:20},{start:20,end:166},{start:166,end:60},{start:192,end:187},{start:187,end:213},{start:213,end:192},{start:243,end:112},{start:112,end:244},{start:244,end:243},{start:244,end:233},{start:233,end:245},{start:245,end:244},{start:245,end:128},{start:128,end:188},{start:188,end:245},{start:188,end:114},{start:114,end:174},{start:174,end:188},{start:134,end:131},{start:131,end:220},{start:220,end:134},{start:174,end:217},{start:217,end:236},{start:236,end:174},{start:236,end:198},{start:198,end:134},{start:134,end:236},{start:215,end:177},{start:177,end:58},{start:58,end:215},{start:156,end:143},{start:143,end:124},{start:124,end:156},{start:25,end:110},{start:110,end:7},{start:7,end:25},{start:31,end:228},{start:228,end:25},{start:25,end:31},{start:264,end:356},{start:356,end:368},{start:368,end:264},{start:0,end:11},{start:11,end:267},{start:267,end:0},{start:451,end:452},{start:452,end:349},{start:349,end:451},{start:267,end:302},{start:302,end:269},{start:269,end:267},{start:350,end:357},{start:357,end:277},{start:277,end:350},{start:350,end:452},{start:452,end:357},{start:357,end:350},{start:299,end:333},{start:333,end:297},{start:297,end:299},{start:396,end:175},{start:175,end:377},{start:377,end:396},{start:280,end:347},{start:347,end:330},{start:330,end:280},{start:269,end:303},{start:303,end:270},{start:270,end:269},{start:151,end:9},{start:9,end:337},{start:337,end:151},{start:344,end:278},{start:278,end:360},{start:360,end:344},{start:424,end:418},{start:418,end:431},{start:431,end:424},{start:270,end:304},{start:304,end:409},{start:409,end:270},{start:272,end:310},{start:310,end:407},{start:407,end:272},{start:322,end:270},{start:270,end:410},{start:410,end:322},{start:449,end:450},{start:450,end:347},{start:347,end:449},{start:432,end:422},{start:422,end:434},{start:434,end:432},{start:18,end:313},{start:313,end:17},{start:17,end:18},{start:291,end:306},{start:306,end:375},{start:375,end:291},{start:259,end:387},{start:387,end:260},{start:260,end:259},{start:424,end:335},{start:335,end:418},{start:418,end:424},{start:434,end:364},{start:364,end:416},{start:416,end:434},{start:391,end:423},{start:423,end:327},{start:327,end:391},{start:301,end:251},{start:251,end:298},{start:298,end:301},{start:275,end:281},{start:281,end:4},{start:4,end:275},{start:254,end:373},{start:373,end:253},{start:253,end:254},{start:375,end:307},{start:307,end:321},{start:321,end:375},{start:280,end:425},{start:425,end:411},{start:411,end:280},{start:200,end:421},{start:421,end:18},{start:18,end:200},{start:335,end:321},{start:321,end:406},{start:406,end:335},{start:321,end:320},{start:320,end:405},{start:405,end:321},{start:314,end:315},{start:315,end:17},{start:17,end:314},{start:423,end:426},{start:426,end:266},{start:266,end:423},{start:396,end:377},{start:377,end:369},{start:369,end:396},{start:270,end:322},{start:322,end:269},{start:269,end:270},{start:413,end:417},{start:417,end:464},{start:464,end:413},{start:385,end:386},{start:386,end:258},{start:258,end:385},{start:248,end:456},{start:456,end:419},{start:419,end:248},{start:298,end:284},{start:284,end:333},{start:333,end:298},{start:168,end:417},{start:417,end:8},{start:8,end:168},{start:448,end:346},{start:346,end:261},{start:261,end:448},{start:417,end:413},{start:413,end:285},{start:285,end:417},{start:326,end:327},{start:327,end:328},{start:328,end:326},{start:277,end:355},{start:355,end:329},{start:329,end:277},{start:309,end:392},{start:392,end:438},{start:438,end:309},{start:381,end:382},{start:382,end:256},{start:256,end:381},{start:279,end:429},{start:429,end:360},{start:360,end:279},{start:365,end:364},{start:364,end:379},{start:379,end:365},{start:355,end:277},{start:277,end:437},{start:437,end:355},{start:282,end:443},{start:443,end:283},{start:283,end:282},{start:281,end:275},{start:275,end:363},{start:363,end:281},{start:395,end:431},{start:431,end:369},{start:369,end:395},{start:299,end:297},{start:297,end:337},{start:337,end:299},{start:335,end:273},{start:273,end:321},{start:321,end:335},{start:348,end:450},{start:450,end:349},{start:349,end:348},{start:359,end:446},{start:446,end:467},{start:467,end:359},{start:283,end:293},{start:293,end:282},{start:282,end:283},{start:250,end:458},{start:458,end:462},{start:462,end:250},{start:300,end:276},{start:276,end:383},{start:383,end:300},{start:292,end:308},{start:308,end:325},{start:325,end:292},{start:283,end:276},{start:276,end:293},{start:293,end:283},{start:264,end:372},{start:372,end:447},{start:447,end:264},{start:346,end:352},{start:352,end:340},{start:340,end:346},{start:354,end:274},{start:274,end:19},{start:19,end:354},{start:363,end:456},{start:456,end:281},{start:281,end:363},{start:426,end:436},{start:436,end:425},{start:425,end:426},{start:380,end:381},{start:381,end:252},{start:252,end:380},{start:267,end:269},{start:269,end:393},{start:393,end:267},{start:421,end:200},{start:200,end:428},{start:428,end:421},{start:371,end:266},{start:266,end:329},{start:329,end:371},{start:432,end:287},{start:287,end:422},{start:422,end:432},{start:290,end:250},{start:250,end:328},{start:328,end:290},{start:385,end:258},{start:258,end:384},{start:384,end:385},{start:446,end:265},{start:265,end:342},{start:342,end:446},{start:386,end:387},{start:387,end:257},{start:257,end:386},{start:422,end:424},{start:424,end:430},{start:430,end:422},{start:445,end:342},{start:342,end:276},{start:276,end:445},{start:422,end:273},{start:273,end:424},{start:424,end:422},{start:306,end:292},{start:292,end:307},{start:307,end:306},{start:352,end:366},{start:366,end:345},{start:345,end:352},{start:268,end:271},{start:271,end:302},{start:302,end:268},{start:358,end:423},{start:423,end:371},{start:371,end:358},{start:327,end:294},{start:294,end:460},{start:460,end:327},{start:331,end:279},{start:279,end:294},{start:294,end:331},{start:303,end:271},{start:271,end:304},{start:304,end:303},{start:436,end:432},{start:432,end:427},{start:427,end:436},{start:304,end:272},{start:272,end:408},{start:408,end:304},{start:395,end:394},{start:394,end:431},{start:431,end:395},{start:378,end:395},{start:395,end:400},{start:400,end:378},{start:296,end:334},{start:334,end:299},{start:299,end:296},{start:6,end:351},{start:351,end:168},{start:168,end:6},{start:376,end:352},{start:352,end:411},{start:411,end:376},{start:307,end:325},{start:325,end:320},{start:320,end:307},{start:285,end:295},{start:295,end:336},{start:336,end:285},{start:320,end:319},{start:319,end:404},{start:404,end:320},{start:329,end:330},{start:330,end:349},{start:349,end:329},{start:334,end:293},{start:293,end:333},{start:333,end:334},{start:366,end:323},{start:323,end:447},{start:447,end:366},{start:316,end:15},{start:15,end:315},{start:315,end:316},{start:331,end:358},{start:358,end:279},{start:279,end:331},{start:317,end:14},{start:14,end:316},{start:316,end:317},{start:8,end:285},{start:285,end:9},{start:9,end:8},{start:277,end:329},{start:329,end:350},{start:350,end:277},{start:253,end:374},{start:374,end:252},{start:252,end:253},{start:319,end:318},{start:318,end:403},{start:403,end:319},{start:351,end:6},{start:6,end:419},{start:419,end:351},{start:324,end:318},{start:318,end:325},{start:325,end:324},{start:397,end:367},{start:367,end:365},{start:365,end:397},{start:288,end:435},{start:435,end:397},{start:397,end:288},{start:278,end:344},{start:344,end:439},{start:439,end:278},{start:310,end:272},{start:272,end:311},{start:311,end:310},{start:248,end:195},{start:195,end:281},{start:281,end:248},{start:375,end:273},{start:273,end:291},{start:291,end:375},{start:175,end:396},{start:396,end:199},{start:199,end:175},{start:312,end:311},{start:311,end:268},{start:268,end:312},{start:276,end:283},{start:283,end:445},{start:445,end:276},{start:390,end:373},{start:373,end:339},{start:339,end:390},{start:295,end:282},{start:282,end:296},{start:296,end:295},{start:448,end:449},{start:449,end:346},{start:346,end:448},{start:356,end:264},{start:264,end:454},{start:454,end:356},{start:337,end:336},{start:336,end:299},{start:299,end:337},{start:337,end:338},{start:338,end:151},{start:151,end:337},{start:294,end:278},{start:278,end:455},{start:455,end:294},{start:308,end:292},{start:292,end:415},{start:415,end:308},{start:429,end:358},{start:358,end:355},{start:355,end:429},{start:265,end:340},{start:340,end:372},{start:372,end:265},{start:352,end:346},{start:346,end:280},{start:280,end:352},{start:295,end:442},{start:442,end:282},{start:282,end:295},{start:354,end:19},{start:19,end:370},{start:370,end:354},{start:285,end:441},{start:441,end:295},{start:295,end:285},{start:195,end:248},{start:248,end:197},{start:197,end:195},{start:457,end:440},{start:440,end:274},{start:274,end:457},{start:301,end:300},{start:300,end:368},{start:368,end:301},{start:417,end:351},{start:351,end:465},{start:465,end:417},{start:251,end:301},{start:301,end:389},{start:389,end:251},{start:394,end:395},{start:395,end:379},{start:379,end:394},{start:399,end:412},{start:412,end:419},{start:419,end:399},{start:410,end:436},{start:436,end:322},{start:322,end:410},{start:326,end:2},{start:2,end:393},{start:393,end:326},{start:354,end:370},{start:370,end:461},{start:461,end:354},{start:393,end:164},{start:164,end:267},{start:267,end:393},{start:268,end:302},{start:302,end:12},{start:12,end:268},{start:312,end:268},{start:268,end:13},{start:13,end:312},{start:298,end:293},{start:293,end:301},{start:301,end:298},{start:265,end:446},{start:446,end:340},{start:340,end:265},{start:280,end:330},{start:330,end:425},{start:425,end:280},{start:322,end:426},{start:426,end:391},{start:391,end:322},{start:420,end:429},{start:429,end:437},{start:437,end:420},{start:393,end:391},{start:391,end:326},{start:326,end:393},{start:344,end:440},{start:440,end:438},{start:438,end:344},{start:458,end:459},{start:459,end:461},{start:461,end:458},{start:364,end:434},{start:434,end:394},{start:394,end:364},{start:428,end:396},{start:396,end:262},{start:262,end:428},{start:274,end:354},{start:354,end:457},{start:457,end:274},{start:317,end:316},{start:316,end:402},{start:402,end:317},{start:316,end:315},{start:315,end:403},{start:403,end:316},{start:315,end:314},{start:314,end:404},{start:404,end:315},{start:314,end:313},{start:313,end:405},{start:405,end:314},{start:313,end:421},{start:421,end:406},{start:406,end:313},{start:323,end:366},{start:366,end:361},{start:361,end:323},{start:292,end:306},{start:306,end:407},{start:407,end:292},{start:306,end:291},{start:291,end:408},{start:408,end:306},{start:291,end:287},{start:287,end:409},{start:409,end:291},{start:287,end:432},{start:432,end:410},{start:410,end:287},{start:427,end:434},{start:434,end:411},{start:411,end:427},{start:372,end:264},{start:264,end:383},{start:383,end:372},{start:459,end:309},{start:309,end:457},{start:457,end:459},{start:366,end:352},{start:352,end:401},{start:401,end:366},{start:1,end:274},{start:274,end:4},{start:4,end:1},{start:418,end:421},{start:421,end:262},{start:262,end:418},{start:331,end:294},{start:294,end:358},{start:358,end:331},{start:435,end:433},{start:433,end:367},{start:367,end:435},{start:392,end:289},{start:289,end:439},{start:439,end:392},{start:328,end:462},{start:462,end:326},{start:326,end:328},{start:94,end:2},{start:2,end:370},{start:370,end:94},{start:289,end:305},{start:305,end:455},{start:455,end:289},{start:339,end:254},{start:254,end:448},{start:448,end:339},{start:359,end:255},{start:255,end:446},{start:446,end:359},{start:254,end:253},{start:253,end:449},{start:449,end:254},{start:253,end:252},{start:252,end:450},{start:450,end:253},{start:252,end:256},{start:256,end:451},{start:451,end:252},{start:256,end:341},{start:341,end:452},{start:452,end:256},{start:414,end:413},{start:413,end:463},{start:463,end:414},{start:286,end:441},{start:441,end:414},{start:414,end:286},{start:286,end:258},{start:258,end:441},{start:441,end:286},{start:258,end:257},{start:257,end:442},{start:442,end:258},{start:257,end:259},{start:259,end:443},{start:443,end:257},{start:259,end:260},{start:260,end:444},{start:444,end:259},{start:260,end:467},{start:467,end:445},{start:445,end:260},{start:309,end:459},{start:459,end:250},{start:250,end:309},{start:305,end:289},{start:289,end:290},{start:290,end:305},{start:305,end:290},{start:290,end:460},{start:460,end:305},{start:401,end:376},{start:376,end:435},{start:435,end:401},{start:309,end:250},{start:250,end:392},{start:392,end:309},{start:376,end:411},{start:411,end:433},{start:433,end:376},{start:453,end:341},{start:341,end:464},{start:464,end:453},{start:357,end:453},{start:453,end:465},{start:465,end:357},{start:343,end:357},{start:357,end:412},{start:412,end:343},{start:437,end:343},{start:343,end:399},{start:399,end:437},{start:344,end:360},{start:360,end:440},{start:440,end:344},{start:420,end:437},{start:437,end:456},{start:456,end:420},{start:360,end:420},{start:420,end:363},{start:363,end:360},{start:361,end:401},{start:401,end:288},{start:288,end:361},{start:265,end:372},{start:372,end:353},{start:353,end:265},{start:390,end:339},{start:339,end:249},{start:249,end:390},{start:339,end:448},{start:448,end:255},{start:255,end:339}];GB={};Object.defineProperty(GB,"__esModule",{value:!0});pB={};Object.defineProperty(pB,"__esModule",{value:!0}),(function(t){var e=Je&&Je.__createBinding||(Object.create?function(B,R,M,x){x===void 0&&(x=M);var T=Object.getOwnPropertyDescriptor(R,M);T&&!("get"in T?!R.__esModule:T.writable||T.configurable)||(T={enumerable:!0,get:function(){return R[M]}}),Object.defineProperty(B,x,T)}:function(B,R,M,x){x===void 0&&(x=M),B[x]=R[M]}),r=Je&&Je.__exportStar||function(B,R){for(var M in B)M==="default"||Object.prototype.hasOwnProperty.call(R,M)||e(R,B,M)};Object.defineProperty(t,"__esModule",{value:!0}),t.FaceLandmarker=void 0;let n=bt,i=ht,o=Jd,s=qd,p=kt,l=eh,c=OB,u=e2,d=Wy,f=Ks,g=Qa,v=ko,A=PB;r(GB,t),r(pB,t);let m="image_in",h="norm_rect",y="face_landmarks",E="blendshapes",b="face_geometry",_=.5;class C extends v.VisionTaskRunner{static createFromOptions(R,M){return v.VisionTaskRunner.createVisionInstance(C,R,M)}static createFromModelBuffer(R,M){return v.VisionTaskRunner.createVisionInstance(C,R,{baseOptions:{modelAssetBuffer:M}})}static createFromModelPath(R,M){return v.VisionTaskRunner.createVisionInstance(C,R,{baseOptions:{modelAssetPath:M}})}constructor(R,M){super(new v.VisionGraphRunner(R,M),m,h,!1),this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFaceBlendshapes=!1,this.outputFacialTransformationMatrixes=!1,this.options=new u.FaceLandmarkerGraphOptions,this.options.setBaseOptions(new p.BaseOptions),this.faceLandmarksDetectorGraphOptions=new d.FaceLandmarksDetectorGraphOptions,this.options.setFaceLandmarksDetectorGraphOptions(this.faceLandmarksDetectorGraphOptions),this.faceDetectorGraphOptions=new l.FaceDetectorGraphOptions,this.options.setFaceDetectorGraphOptions(this.faceDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(R){this.options.setBaseOptions(R)}setOptions(R){var M,x,T,w;return"numFaces"in R&&this.faceDetectorGraphOptions.setNumFaces((M=R.numFaces)!==null&&M!==void 0?M:1),"minFaceDetectionConfidence"in R&&this.faceDetectorGraphOptions.setMinDetectionConfidence((x=R.minFaceDetectionConfidence)!==null&&x!==void 0?x:_),"minTrackingConfidence"in R&&this.options.setMinTrackingConfidence((T=R.minTrackingConfidence)!==null&&T!==void 0?T:_),"minFacePresenceConfidence"in R&&this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence((w=R.minFacePresenceConfidence)!==null&&w!==void 0?w:_),"outputFaceBlendshapes"in R&&(this.outputFaceBlendshapes=!!R.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in R&&(this.outputFacialTransformationMatrixes=!!R.outputFacialTransformationMatrixes),this.applyOptions(R)}detect(R,M){return this.resetResults(),this.processImageData(R,M),this.result}detectForVideo(R,M,x){return this.resetResults(),this.processVideoData(R,x,M),this.result}resetResults(){this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}initDefaults(){this.faceDetectorGraphOptions.setNumFaces(1),this.faceDetectorGraphOptions.setMinDetectionConfidence(_),this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence(_),this.options.setMinTrackingConfidence(_)}addJsLandmarks(R){for(let M of R){let x=s.NormalizedLandmarkList.deserializeBinary(M);this.result.faceLandmarks.push((0,g.convertToLandmarks)(x))}}addBlenshape(R){var M;if(this.outputFaceBlendshapes)for(let x of R){let T=o.ClassificationList.deserializeBinary(x);this.result.faceBlendshapes.push((0,f.convertFromClassifications)((M=T.getClassificationList())!==null&&M!==void 0?M:[]))}}addFacialTransformationMatrixes(R){var M,x,T;if(this.outputFacialTransformationMatrixes)for(let w of R){let S=c.FaceGeometry.deserializeBinary(w).getPoseTransformMatrix();S&&this.result.facialTransformationMatrixes.push({rows:(M=S.getRows())!==null&&M!==void 0?M:0,columns:(x=S.getCols())!==null&&x!==void 0?x:0,data:(T=S.getPackedDataList())!==null&&T!==void 0?T:[]})}}refreshGraph(){let R=new n.CalculatorGraphConfig;R.addInputStream(m),R.addInputStream(h),R.addOutputStream(y);let M=new i.CalculatorOptions;M.setExtension(u.FaceLandmarkerGraphOptions.ext,this.options);let x=new n.CalculatorGraphConfig.Node;x.setCalculator("mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),x.addInputStream("IMAGE:"+m),x.addInputStream("NORM_RECT:"+h),x.addOutputStream("NORM_LANDMARKS:"+y),x.setOptions(M),R.addNode(x),this.graphRunner.attachProtoVectorListener(y,((w,S)=>{this.addJsLandmarks(w),this.setLatestOutputTimestamp(S)})),this.graphRunner.attachEmptyPacketListener(y,(w=>{this.setLatestOutputTimestamp(w)})),this.outputFaceBlendshapes&&(R.addOutputStream(E),x.addOutputStream("BLENDSHAPES:"+E),this.graphRunner.attachProtoVectorListener(E,((w,S)=>{this.addBlenshape(w),this.setLatestOutputTimestamp(S)})),this.graphRunner.attachEmptyPacketListener(E,(w=>{this.setLatestOutputTimestamp(w)}))),this.outputFacialTransformationMatrixes&&(R.addOutputStream(b),x.addOutputStream("FACE_GEOMETRY:"+b),this.graphRunner.attachProtoVectorListener(b,((w,S)=>{this.addFacialTransformationMatrixes(w),this.setLatestOutputTimestamp(S)})),this.graphRunner.attachEmptyPacketListener(b,(w=>{this.setLatestOutputTimestamp(w)})));let T=R.serializeBinary();this.setGraph(new Uint8Array(T),!0)}}t.FaceLandmarker=C,C.FACE_LANDMARKS_LIPS=A.FACE_LANDMARKS_LIPS,C.FACE_LANDMARKS_LEFT_EYE=A.FACE_LANDMARKS_LEFT_EYE,C.FACE_LANDMARKS_LEFT_EYEBROW=A.FACE_LANDMARKS_LEFT_EYEBROW,C.FACE_LANDMARKS_LEFT_IRIS=A.FACE_LANDMARKS_LEFT_IRIS,C.FACE_LANDMARKS_RIGHT_EYE=A.FACE_LANDMARKS_RIGHT_EYE,C.FACE_LANDMARKS_RIGHT_EYEBROW=A.FACE_LANDMARKS_RIGHT_EYEBROW,C.FACE_LANDMARKS_RIGHT_IRIS=A.FACE_LANDMARKS_RIGHT_IRIS,C.FACE_LANDMARKS_FACE_OVAL=A.FACE_LANDMARKS_FACE_OVAL,C.FACE_LANDMARKS_CONTOURS=A.FACE_LANDMARKS_CONTOURS,C.FACE_LANDMARKS_TESSELATION=A.FACE_LANDMARKS_TESSELATION})(FB);zB={},NB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s);var p=e2;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions",null,n),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject=function(l,c){var u,d={baseOptions:(u=c.getBaseOptions())&&s.BaseOptions.toObject(l,u),faceLandmarkerGraphOptions:(u=c.getFaceLandmarkerGraphOptions())&&p.FaceLandmarkerGraphOptions.toObject(l,u),faceAlignmentSize:e.Message.getFieldWithDefault(c,3,256)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),u=new proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader(u,c)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var u=new s.BaseOptions;c.readMessage(u,s.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(u);break;case 2:u=new p.FaceLandmarkerGraphOptions,c.readMessage(u,p.FaceLandmarkerGraphOptions.deserializeBinaryFromReader),l.setFaceLandmarkerGraphOptions(u);break;case 3:u=c.readInt32(),l.setFaceAlignmentSize(u);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter=function(l,c){var u=void 0;(u=l.getBaseOptions())!=null&&c.writeMessage(1,u,s.BaseOptions.serializeBinaryToWriter),(u=l.getFaceLandmarkerGraphOptions())!=null&&c.writeMessage(2,u,p.FaceLandmarkerGraphOptions.serializeBinaryToWriter),(u=e.Message.getField(l,3))!=null&&c.writeInt32(3,u)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new e.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[513916220]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceLandmarkerGraphOptions=function(){return e.Message.getWrapperField(this,p.FaceLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceLandmarkerGraphOptions=function(l){return e.Message.setWrapperField(this,2,l)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceLandmarkerGraphOptions=function(){return this.setFaceLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceLandmarkerGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceAlignmentSize=function(){return e.Message.getFieldWithDefault(this,3,256)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceAlignmentSize=function(l){return e.Message.setField(this,3,l)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceAlignmentSize=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceAlignmentSize=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new e.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[513916220]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.face_stylizer.proto)})(NB);lB={};Object.defineProperty(lB,"__esModule",{value:!0}),(function(t){var e=Je&&Je.__createBinding||(Object.create?function(f,g,v,A){A===void 0&&(A=v);var m=Object.getOwnPropertyDescriptor(g,v);m&&!("get"in m?!g.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return g[v]}}),Object.defineProperty(f,A,m)}:function(f,g,v,A){A===void 0&&(A=v),f[A]=g[v]}),r=Je&&Je.__exportStar||function(f,g){for(var v in f)v==="default"||Object.prototype.hasOwnProperty.call(g,v)||e(g,f,v)};Object.defineProperty(t,"__esModule",{value:!0}),t.FaceStylizer=void 0;let n=bt,i=ht,o=kt,s=NB,p=ko;r(lB,t);let l="image_in",c="norm_rect",u="stylized_image";class d extends p.VisionTaskRunner{static createFromOptions(g,v){return p.VisionTaskRunner.createVisionInstance(d,g,v)}static createFromModelBuffer(g,v){return p.VisionTaskRunner.createVisionInstance(d,g,{baseOptions:{modelAssetBuffer:v}})}static createFromModelPath(g,v){return p.VisionTaskRunner.createVisionInstance(d,g,{baseOptions:{modelAssetPath:v}})}constructor(g,v){super(new p.VisionGraphRunner(g,v),l,c,!0),this.options=new s.FaceStylizerGraphOptions,this.options.setBaseOptions(new o.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(g){this.options.setBaseOptions(g)}setOptions(g){return super.applyOptions(g)}stylize(g,v,A){let m=typeof v!="function"?v:{};if(this.userCallback=typeof v=="function"?v:A,this.processImageData(g,m??{}),!this.userCallback)return this.result}stylizeForVideo(g,v,A,m){let h=typeof A!="function"?A:{};if(this.userCallback=typeof A=="function"?A:m,this.processVideoData(g,h,v),this.userCallback=void 0,!this.userCallback)return this.result}refreshGraph(){let g=new n.CalculatorGraphConfig;g.addInputStream(l),g.addInputStream(c),g.addOutputStream(u);let v=new i.CalculatorOptions;v.setExtension(s.FaceStylizerGraphOptions.ext,this.options);let A=new n.CalculatorGraphConfig.Node;A.setCalculator("mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),A.addInputStream("IMAGE:"+l),A.addInputStream("NORM_RECT:"+c),A.addOutputStream("STYLIZED_IMAGE:"+u),A.setOptions(v),g.addNode(A),this.graphRunner.attachImageListener(u,((h,y)=>{let E=this.convertToMPImage(h,!this.userCallback);this.result=E,this.userCallback&&this.userCallback(E),this.setLatestOutputTimestamp(y)})),this.graphRunner.attachEmptyPacketListener(u,(h=>{this.result=null,this.userCallback&&this.userCallback(null),this.setLatestOutputTimestamp(h)}));let m=g.serializeBinary();this.setGraph(new Uint8Array(m),!0)}}t.FaceStylizer=d})(zB);UB={},t2={},Xg={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.components.processors.proto.ClassifierOptions",null,n),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.displayName="proto.mediapipe.tasks.components.processors.proto.ClassifierOptions"),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_=[4,5],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.toObject=function(i){return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject(i,this)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject=function(i,o){var s,p={displayNamesLocale:e.Message.getFieldWithDefault(o,1,"en"),maxResults:e.Message.getFieldWithDefault(o,2,-1),scoreThreshold:(s=e.Message.getOptionalFloatingPointField(o,3))==null?void 0:s,categoryAllowlistList:(s=e.Message.getRepeatedField(o,4))==null?void 0:s,categoryDenylistList:(s=e.Message.getRepeatedField(o,5))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.tasks.components.processors.proto.ClassifierOptions;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader(s,o)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readString();i.setDisplayNamesLocale(s);break;case 2:s=o.readInt32(),i.setMaxResults(s);break;case 3:s=o.readFloat(),i.setScoreThreshold(s);break;case 4:s=o.readString(),i.addCategoryAllowlist(s);break;case 5:s=o.readString(),i.addCategoryDenylist(s);break;default:o.skipField()}return i},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeString(1,s),(s=e.Message.getField(i,2))!=null&&o.writeInt32(2,s),(s=e.Message.getField(i,3))!=null&&o.writeFloat(3,s),(s=i.getCategoryAllowlistList()).length>0&&o.writeRepeatedString(4,s),(s=i.getCategoryDenylistList()).length>0&&o.writeRepeatedString(5,s)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getDisplayNamesLocale=function(){return e.Message.getFieldWithDefault(this,1,"en")},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setDisplayNamesLocale=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearDisplayNamesLocale=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasDisplayNamesLocale=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getMaxResults=function(){return e.Message.getFieldWithDefault(this,2,-1)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setMaxResults=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearMaxResults=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasMaxResults=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getScoreThreshold=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setScoreThreshold=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearScoreThreshold=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasScoreThreshold=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryAllowlistList=function(){return e.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryAllowlistList=function(i){return e.Message.setField(this,4,i||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryAllowlist=function(i,o){return e.Message.addToRepeatedField(this,4,i,o)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryDenylistList=function(){return e.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryDenylistList=function(i){return e.Message.setField(this,5,i||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryDenylist=function(i,o){return e.Message.addToRepeatedField(this,5,i,o)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},r.object.extend(t,proto.mediapipe.tasks.components.processors.proto)})(Xg),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=Xg;r.object.extend(proto,s);var p=kt;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions",null,n),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject=function(l,c){var u,d={baseOptions:(u=c.getBaseOptions())&&p.BaseOptions.toObject(l,u),classifierOptions:(u=c.getClassifierOptions())&&s.ClassifierOptions.toObject(l,u)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),u=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader(u,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var u=new p.BaseOptions;c.readMessage(u,p.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(u);break;case 2:u=new s.ClassifierOptions,c.readMessage(u,s.ClassifierOptions.deserializeBinaryFromReader),l.setClassifierOptions(u);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter=function(l,c){var u=void 0;(u=l.getBaseOptions())!=null&&c.writeMessage(1,u,p.BaseOptions.serializeBinaryToWriter),(u=l.getClassifierOptions())!=null&&c.writeMessage(2,u,s.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new e.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[478825465]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,p.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getClassifierOptions=function(){return e.Message.getWrapperField(this,s.ClassifierOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setClassifierOptions=function(l){return e.Message.setWrapperField(this,2,l)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasClassifierOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new e.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[478825465]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.gesture_recognizer.proto)})(t2);jB={},r2={},cB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions",null,n),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject=function(p,l){var c,u={baseOptions:(c=l.getBaseOptions())&&s.BaseOptions.toObject(p,c)};return p&&(u.$jspbMessageInstance=l),u}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)if(l.getFieldNumber()===1){var c=new s.BaseOptions;l.readMessage(c,s.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c)}else l.skipField();return p},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter=function(p,l){var c;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,s.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new e.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[478825422]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new e.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[478825422]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.gesture_recognizer.proto)})(cB),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s);var p=t2;r.object.extend(proto,p);var l=cB;r.object.extend(proto,l),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions",null,n),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions=function(c){e.Message.initialize(this,c,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.toObject=function(c){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject(c,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject=function(c,u){var d,f={baseOptions:(d=u.getBaseOptions())&&s.BaseOptions.toObject(c,d),gestureEmbedderGraphOptions:(d=u.getGestureEmbedderGraphOptions())&&l.GestureEmbedderGraphOptions.toObject(c,d),cannedGestureClassifierGraphOptions:(d=u.getCannedGestureClassifierGraphOptions())&&p.GestureClassifierGraphOptions.toObject(c,d),customGestureClassifierGraphOptions:(d=u.getCustomGestureClassifierGraphOptions())&&p.GestureClassifierGraphOptions.toObject(c,d)};return c&&(f.$jspbMessageInstance=u),f}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinary=function(c){var u=new e.BinaryReader(c),d=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader(d,u)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader=function(c,u){for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:var d=new s.BaseOptions;u.readMessage(d,s.BaseOptions.deserializeBinaryFromReader),c.setBaseOptions(d);break;case 2:d=new l.GestureEmbedderGraphOptions,u.readMessage(d,l.GestureEmbedderGraphOptions.deserializeBinaryFromReader),c.setGestureEmbedderGraphOptions(d);break;case 3:d=new p.GestureClassifierGraphOptions,u.readMessage(d,p.GestureClassifierGraphOptions.deserializeBinaryFromReader),c.setCannedGestureClassifierGraphOptions(d);break;case 4:d=new p.GestureClassifierGraphOptions,u.readMessage(d,p.GestureClassifierGraphOptions.deserializeBinaryFromReader),c.setCustomGestureClassifierGraphOptions(d);break;default:u.skipField()}return c},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.serializeBinary=function(){var c=new e.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter(this,c),c.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter=function(c,u){var d=void 0;(d=c.getBaseOptions())!=null&&u.writeMessage(1,d,s.BaseOptions.serializeBinaryToWriter),(d=c.getGestureEmbedderGraphOptions())!=null&&u.writeMessage(2,d,l.GestureEmbedderGraphOptions.serializeBinaryToWriter),(d=c.getCannedGestureClassifierGraphOptions())!=null&&u.writeMessage(3,d,p.GestureClassifierGraphOptions.serializeBinaryToWriter),(d=c.getCustomGestureClassifierGraphOptions())!=null&&u.writeMessage(4,d,p.GestureClassifierGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new e.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[463370452]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setBaseOptions=function(c){return e.Message.setWrapperField(this,1,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getGestureEmbedderGraphOptions=function(){return e.Message.getWrapperField(this,l.GestureEmbedderGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setGestureEmbedderGraphOptions=function(c){return e.Message.setWrapperField(this,2,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearGestureEmbedderGraphOptions=function(){return this.setGestureEmbedderGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasGestureEmbedderGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCannedGestureClassifierGraphOptions=function(){return e.Message.getWrapperField(this,p.GestureClassifierGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCannedGestureClassifierGraphOptions=function(c){return e.Message.setWrapperField(this,3,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCannedGestureClassifierGraphOptions=function(){return this.setCannedGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCannedGestureClassifierGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCustomGestureClassifierGraphOptions=function(){return e.Message.getWrapperField(this,p.GestureClassifierGraphOptions,4)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCustomGestureClassifierGraphOptions=function(c){return e.Message.setWrapperField(this,4,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCustomGestureClassifierGraphOptions=function(){return this.setCustomGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCustomGestureClassifierGraphOptions=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new e.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[463370452]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.gesture_recognizer.proto)})(r2);Jg={},th={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject=function(p,l){var c,u={baseOptions:(c=l.getBaseOptions())&&s.BaseOptions.toObject(p,c),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(l,2,.5),numHands:(c=e.Message.getField(l,3))==null?void 0:c};return p&&(u.$jspbMessageInstance=l),u}),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new s.BaseOptions;l.readMessage(c,s.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readFloat(),p.setMinDetectionConfidence(c);break;case 3:c=l.readInt32(),p.setNumHands(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,s.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeFloat(2,c),(c=e.Message.getField(p,3))!=null&&l.writeInt32(3,c)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new e.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[464864288]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setMinDetectionConfidence=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getNumHands=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setNumHands=function(p){return e.Message.setField(this,3,p)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearNumHands=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasNumHands=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new e.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[464864288]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.hand_detector.proto)})(th);qg={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject=function(p,l){var c,u={baseOptions:(c=l.getBaseOptions())&&s.BaseOptions.toObject(p,c),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(l,2,.5)};return p&&(u.$jspbMessageInstance=l),u}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new s.BaseOptions;l.readMessage(c,s.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readFloat(),p.setMinDetectionConfidence(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,s.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeFloat(2,c)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[474472470]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[474472470]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.hand_landmarker.proto)})(qg),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s);var p=th;r.object.extend(proto,p);var l=qg;r.object.extend(proto,l),r.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions",null,n),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions=function(c){e.Message.initialize(this,c,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.toObject=function(c){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject(c,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject=function(c,u){var d,f={baseOptions:(d=u.getBaseOptions())&&s.BaseOptions.toObject(c,d),handDetectorGraphOptions:(d=u.getHandDetectorGraphOptions())&&p.HandDetectorGraphOptions.toObject(c,d),handLandmarksDetectorGraphOptions:(d=u.getHandLandmarksDetectorGraphOptions())&&l.HandLandmarksDetectorGraphOptions.toObject(c,d),minTrackingConfidence:e.Message.getFloatingPointFieldWithDefault(u,4,.5)};return c&&(f.$jspbMessageInstance=u),f}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinary=function(c){var u=new e.BinaryReader(c),d=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader(d,u)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader=function(c,u){for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:var d=new s.BaseOptions;u.readMessage(d,s.BaseOptions.deserializeBinaryFromReader),c.setBaseOptions(d);break;case 2:d=new p.HandDetectorGraphOptions,u.readMessage(d,p.HandDetectorGraphOptions.deserializeBinaryFromReader),c.setHandDetectorGraphOptions(d);break;case 3:d=new l.HandLandmarksDetectorGraphOptions,u.readMessage(d,l.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader),c.setHandLandmarksDetectorGraphOptions(d);break;case 4:d=u.readFloat(),c.setMinTrackingConfidence(d);break;default:u.skipField()}return c},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.serializeBinary=function(){var c=new e.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter(this,c),c.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter=function(c,u){var d=void 0;(d=c.getBaseOptions())!=null&&u.writeMessage(1,d,s.BaseOptions.serializeBinaryToWriter),(d=c.getHandDetectorGraphOptions())!=null&&u.writeMessage(2,d,p.HandDetectorGraphOptions.serializeBinaryToWriter),(d=c.getHandLandmarksDetectorGraphOptions())!=null&&u.writeMessage(3,d,l.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter),(d=e.Message.getField(c,4))!=null&&u.writeFloat(4,d)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[462713202]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setBaseOptions=function(c){return e.Message.setWrapperField(this,1,c)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandDetectorGraphOptions=function(){return e.Message.getWrapperField(this,p.HandDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandDetectorGraphOptions=function(c){return e.Message.setWrapperField(this,2,c)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandDetectorGraphOptions=function(){return this.setHandDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandDetectorGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandLandmarksDetectorGraphOptions=function(){return e.Message.getWrapperField(this,l.HandLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandLandmarksDetectorGraphOptions=function(c){return e.Message.setWrapperField(this,3,c)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandLandmarksDetectorGraphOptions=function(){return this.setHandLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandLandmarksDetectorGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(c){return e.Message.setField(this,4,c)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[462713202]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.hand_landmarker.proto)})(Jg),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s);var p=r2;r.object.extend(proto,p);var l=Jg;r.object.extend(proto,l),r.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions",null,n),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions=function(c){e.Message.initialize(this,c,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.toObject=function(c){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject(c,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject=function(c,u){var d,f={baseOptions:(d=u.getBaseOptions())&&s.BaseOptions.toObject(c,d),handLandmarkerGraphOptions:(d=u.getHandLandmarkerGraphOptions())&&l.HandLandmarkerGraphOptions.toObject(c,d),handGestureRecognizerGraphOptions:(d=u.getHandGestureRecognizerGraphOptions())&&p.HandGestureRecognizerGraphOptions.toObject(c,d)};return c&&(f.$jspbMessageInstance=u),f}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinary=function(c){var u=new e.BinaryReader(c),d=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader(d,u)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader=function(c,u){for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:var d=new s.BaseOptions;u.readMessage(d,s.BaseOptions.deserializeBinaryFromReader),c.setBaseOptions(d);break;case 2:d=new l.HandLandmarkerGraphOptions,u.readMessage(d,l.HandLandmarkerGraphOptions.deserializeBinaryFromReader),c.setHandLandmarkerGraphOptions(d);break;case 3:d=new p.HandGestureRecognizerGraphOptions,u.readMessage(d,p.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader),c.setHandGestureRecognizerGraphOptions(d);break;default:u.skipField()}return c},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.serializeBinary=function(){var c=new e.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter(this,c),c.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter=function(c,u){var d=void 0;(d=c.getBaseOptions())!=null&&u.writeMessage(1,d,s.BaseOptions.serializeBinaryToWriter),(d=c.getHandLandmarkerGraphOptions())!=null&&u.writeMessage(2,d,l.HandLandmarkerGraphOptions.serializeBinaryToWriter),(d=c.getHandGestureRecognizerGraphOptions())!=null&&u.writeMessage(3,d,p.HandGestureRecognizerGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new e.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[479097054]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setBaseOptions=function(c){return e.Message.setWrapperField(this,1,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandLandmarkerGraphOptions=function(){return e.Message.getWrapperField(this,l.HandLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandLandmarkerGraphOptions=function(c){return e.Message.setWrapperField(this,2,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandLandmarkerGraphOptions=function(){return this.setHandLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandLandmarkerGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandGestureRecognizerGraphOptions=function(){return e.Message.getWrapperField(this,p.HandGestureRecognizerGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandGestureRecognizerGraphOptions=function(c){return e.Message.setWrapperField(this,3,c)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandGestureRecognizerGraphOptions=function(){return this.setHandGestureRecognizerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandGestureRecognizerGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new e.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[479097054]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.gesture_recognizer.proto)})(jB);Vd={};Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.convertClassifierOptionsToProto=void 0;AN=Xg;Vd.convertClassifierOptionsToProto=yN;jd={};Object.defineProperty(jd,"__esModule",{value:!0}),jd.HAND_CONNECTIONS=void 0,jd.HAND_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:4},{start:0,end:5},{start:5,end:6},{start:6,end:7},{start:7,end:8},{start:5,end:9},{start:9,end:10},{start:10,end:11},{start:11,end:12},{start:9,end:13},{start:13,end:14},{start:14,end:15},{start:15,end:16},{start:13,end:17},{start:0,end:17},{start:17,end:18},{start:18,end:19},{start:19,end:20}];HB={};Object.defineProperty(HB,"__esModule",{value:!0});dB={};Object.defineProperty(dB,"__esModule",{value:!0}),(function(t){var e=Je&&Je.__createBinding||(Object.create?function(M,x,T,w){w===void 0&&(w=T);var S=Object.getOwnPropertyDescriptor(x,T);S&&!("get"in S?!x.__esModule:S.writable||S.configurable)||(S={enumerable:!0,get:function(){return x[T]}}),Object.defineProperty(M,w,S)}:function(M,x,T,w){w===void 0&&(w=T),M[w]=x[T]}),r=Je&&Je.__exportStar||function(M,x){for(var T in M)T==="default"||Object.prototype.hasOwnProperty.call(x,T)||e(x,M,T)};Object.defineProperty(t,"__esModule",{value:!0}),t.GestureRecognizer=void 0;let n=bt,i=ht,o=Jd,s=qd,p=kt,l=t2,c=jB,u=r2,d=th,f=Jg,g=qg,v=Vd,A=ko,m=jd;r(HB,t),r(dB,t);let h="image_in",y="norm_rect",E="hand_gestures",b="hand_landmarks",_="world_hand_landmarks",C="handedness",B=.5;class R extends A.VisionTaskRunner{static createFromOptions(x,T){return A.VisionTaskRunner.createVisionInstance(R,x,T)}static createFromModelBuffer(x,T){return A.VisionTaskRunner.createVisionInstance(R,x,{baseOptions:{modelAssetBuffer:T}})}static createFromModelPath(x,T){return A.VisionTaskRunner.createVisionInstance(R,x,{baseOptions:{modelAssetPath:T}})}constructor(x,T){super(new A.VisionGraphRunner(x,T),h,y,!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new c.GestureRecognizerGraphOptions,this.options.setBaseOptions(new p.BaseOptions),this.handLandmarkerGraphOptions=new f.HandLandmarkerGraphOptions,this.options.setHandLandmarkerGraphOptions(this.handLandmarkerGraphOptions),this.handLandmarksDetectorGraphOptions=new g.HandLandmarksDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new d.HandDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.handGestureRecognizerGraphOptions=new u.HandGestureRecognizerGraphOptions,this.options.setHandGestureRecognizerGraphOptions(this.handGestureRecognizerGraphOptions),this.handDetectorGraphOptions.setMinDetectionConfidence(B),this.handLandmarkerGraphOptions.setMinTrackingConfidence(B),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(B)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(x){this.options.setBaseOptions(x)}setOptions(x){var T,w,S,I,G,H,X,Z;if(this.handDetectorGraphOptions.setNumHands((T=x.numHands)!==null&&T!==void 0?T:1),"minHandDetectionConfidence"in x&&this.handDetectorGraphOptions.setMinDetectionConfidence((w=x.minHandDetectionConfidence)!==null&&w!==void 0?w:B),"minTrackingConfidence"in x&&this.handLandmarkerGraphOptions.setMinTrackingConfidence((S=x.minTrackingConfidence)!==null&&S!==void 0?S:B),"minHandPresenceConfidence"in x&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((I=x.minHandPresenceConfidence)!==null&&I!==void 0?I:B),x.cannedGesturesClassifierOptions){let z=new l.GestureClassifierGraphOptions;z.setClassifierOptions((0,v.convertClassifierOptionsToProto)(x.cannedGesturesClassifierOptions,(G=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||G===void 0?void 0:G.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCannedGestureClassifierGraphOptions(z)}else x.cannedGesturesClassifierOptions===void 0&&((H=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||H===void 0||H.clearClassifierOptions());if(x.customGesturesClassifierOptions){let z=new l.GestureClassifierGraphOptions;z.setClassifierOptions((0,v.convertClassifierOptionsToProto)(x.customGesturesClassifierOptions,(X=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||X===void 0?void 0:X.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCustomGestureClassifierGraphOptions(z)}else x.customGesturesClassifierOptions===void 0&&((Z=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||Z===void 0||Z.clearClassifierOptions());return this.applyOptions(x)}recognize(x,T){return this.resetResults(),this.processImageData(x,T),this.processResults()}recognizeForVideo(x,T,w){return this.resetResults(),this.processVideoData(x,w,T),this.processResults()}resetResults(){this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return this.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handednesses:[]}:{gestures:this.gestures,landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}toJsCategories(x,T=!0){var w,S,I;let G=[];for(let H of x){let X=o.ClassificationList.deserializeBinary(H),Z=[];for(let z of X.getClassificationList()){let Y=T&&z.hasIndex()?z.getIndex():-1;Z.push({score:(w=z.getScore())!==null&&w!==void 0?w:0,index:Y,categoryName:(S=z.getLabel())!==null&&S!==void 0?S:"",displayName:(I=z.getDisplayName())!==null&&I!==void 0?I:""})}G.push(Z)}return G}addJsLandmarks(x){var T,w,S;for(let I of x){let G=s.NormalizedLandmarkList.deserializeBinary(I),H=[];for(let X of G.getLandmarkList())H.push({x:(T=X.getX())!==null&&T!==void 0?T:0,y:(w=X.getY())!==null&&w!==void 0?w:0,z:(S=X.getZ())!==null&&S!==void 0?S:0});this.landmarks.push(H)}}adddJsWorldLandmarks(x){var T,w,S;for(let I of x){let G=s.LandmarkList.deserializeBinary(I),H=[];for(let X of G.getLandmarkList())H.push({x:(T=X.getX())!==null&&T!==void 0?T:0,y:(w=X.getY())!==null&&w!==void 0?w:0,z:(S=X.getZ())!==null&&S!==void 0?S:0});this.worldLandmarks.push(H)}}refreshGraph(){let x=new n.CalculatorGraphConfig;x.addInputStream(h),x.addInputStream(y),x.addOutputStream(E),x.addOutputStream(b),x.addOutputStream(_),x.addOutputStream(C);let T=new i.CalculatorOptions;T.setExtension(c.GestureRecognizerGraphOptions.ext,this.options);let w=new n.CalculatorGraphConfig.Node;w.setCalculator("mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),w.addInputStream("IMAGE:"+h),w.addInputStream("NORM_RECT:"+y),w.addOutputStream("HAND_GESTURES:"+E),w.addOutputStream("LANDMARKS:"+b),w.addOutputStream("WORLD_LANDMARKS:"+_),w.addOutputStream("HANDEDNESS:"+C),w.setOptions(T),x.addNode(w),this.graphRunner.attachProtoVectorListener(b,((I,G)=>{this.addJsLandmarks(I),this.setLatestOutputTimestamp(G)})),this.graphRunner.attachEmptyPacketListener(b,(I=>{this.setLatestOutputTimestamp(I)})),this.graphRunner.attachProtoVectorListener(_,((I,G)=>{this.adddJsWorldLandmarks(I),this.setLatestOutputTimestamp(G)})),this.graphRunner.attachEmptyPacketListener(_,(I=>{this.setLatestOutputTimestamp(I)})),this.graphRunner.attachProtoVectorListener(E,((I,G)=>{this.gestures.push(...this.toJsCategories(I,!1)),this.setLatestOutputTimestamp(G)})),this.graphRunner.attachEmptyPacketListener(E,(I=>{this.setLatestOutputTimestamp(I)})),this.graphRunner.attachProtoVectorListener(C,((I,G)=>{this.handednesses.push(...this.toJsCategories(I)),this.setLatestOutputTimestamp(G)})),this.graphRunner.attachEmptyPacketListener(C,(I=>{this.setLatestOutputTimestamp(I)}));let S=x.serializeBinary();this.setGraph(new Uint8Array(S),!0)}}t.GestureRecognizer=R,R.HAND_CONNECTIONS=m.HAND_CONNECTIONS})(UB);QB={},WB={};Object.defineProperty(WB,"__esModule",{value:!0});uB={};Object.defineProperty(uB,"__esModule",{value:!0}),(function(t){var e=Je&&Je.__createBinding||(Object.create?function(_,C,B,R){R===void 0&&(R=B);var M=Object.getOwnPropertyDescriptor(C,B);M&&!("get"in M?!C.__esModule:M.writable||M.configurable)||(M={enumerable:!0,get:function(){return C[B]}}),Object.defineProperty(_,R,M)}:function(_,C,B,R){R===void 0&&(R=B),_[R]=C[B]}),r=Je&&Je.__exportStar||function(_,C){for(var B in _)B==="default"||Object.prototype.hasOwnProperty.call(C,B)||e(C,_,B)};Object.defineProperty(t,"__esModule",{value:!0}),t.HandLandmarker=void 0;let n=bt,i=ht,o=Jd,s=qd,p=kt,l=th,c=Jg,u=qg,d=Qa,f=ko,g=jd;r(WB,t),r(uB,t);let v="image_in",A="norm_rect",m="hand_landmarks",h="world_hand_landmarks",y="handedness",E=.5;class b extends f.VisionTaskRunner{static createFromOptions(C,B){return f.VisionTaskRunner.createVisionInstance(b,C,B)}static createFromModelBuffer(C,B){return f.VisionTaskRunner.createVisionInstance(b,C,{baseOptions:{modelAssetBuffer:B}})}static createFromModelPath(C,B){return f.VisionTaskRunner.createVisionInstance(b,C,{baseOptions:{modelAssetPath:B}})}constructor(C,B){super(new f.VisionGraphRunner(C,B),v,A,!1),this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new c.HandLandmarkerGraphOptions,this.options.setBaseOptions(new p.BaseOptions),this.handLandmarksDetectorGraphOptions=new u.HandLandmarksDetectorGraphOptions,this.options.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new l.HandDetectorGraphOptions,this.options.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(C){this.options.setBaseOptions(C)}setOptions(C){var B,R,M,x;return"numHands"in C&&this.handDetectorGraphOptions.setNumHands((B=C.numHands)!==null&&B!==void 0?B:1),"minHandDetectionConfidence"in C&&this.handDetectorGraphOptions.setMinDetectionConfidence((R=C.minHandDetectionConfidence)!==null&&R!==void 0?R:E),"minTrackingConfidence"in C&&this.options.setMinTrackingConfidence((M=C.minTrackingConfidence)!==null&&M!==void 0?M:E),"minHandPresenceConfidence"in C&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((x=C.minHandPresenceConfidence)!==null&&x!==void 0?x:E),this.applyOptions(C)}detect(C,B){return this.resetResults(),this.processImageData(C,B),this.processResults()}detectForVideo(C,B,R){return this.resetResults(),this.processVideoData(C,R,B),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return{landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}initDefaults(){this.handDetectorGraphOptions.setNumHands(1),this.handDetectorGraphOptions.setMinDetectionConfidence(E),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(E),this.options.setMinTrackingConfidence(E)}toJsCategories(C){var B,R,M,x;let T=[];for(let w of C){let S=o.ClassificationList.deserializeBinary(w),I=[];for(let G of S.getClassificationList())I.push({score:(B=G.getScore())!==null&&B!==void 0?B:0,index:(R=G.getIndex())!==null&&R!==void 0?R:-1,categoryName:(M=G.getLabel())!==null&&M!==void 0?M:"",displayName:(x=G.getDisplayName())!==null&&x!==void 0?x:""});T.push(I)}return T}addJsLandmarks(C){for(let B of C){let R=s.NormalizedLandmarkList.deserializeBinary(B);this.landmarks.push((0,d.convertToLandmarks)(R))}}adddJsWorldLandmarks(C){for(let B of C){let R=s.LandmarkList.deserializeBinary(B);this.worldLandmarks.push((0,d.convertToWorldLandmarks)(R))}}refreshGraph(){let C=new n.CalculatorGraphConfig;C.addInputStream(v),C.addInputStream(A),C.addOutputStream(m),C.addOutputStream(h),C.addOutputStream(y);let B=new i.CalculatorOptions;B.setExtension(c.HandLandmarkerGraphOptions.ext,this.options);let R=new n.CalculatorGraphConfig.Node;R.setCalculator("mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),R.addInputStream("IMAGE:"+v),R.addInputStream("NORM_RECT:"+A),R.addOutputStream("LANDMARKS:"+m),R.addOutputStream("WORLD_LANDMARKS:"+h),R.addOutputStream("HANDEDNESS:"+y),R.setOptions(B),C.addNode(R),this.graphRunner.attachProtoVectorListener(m,((x,T)=>{this.addJsLandmarks(x),this.setLatestOutputTimestamp(T)})),this.graphRunner.attachEmptyPacketListener(m,(x=>{this.setLatestOutputTimestamp(x)})),this.graphRunner.attachProtoVectorListener(h,((x,T)=>{this.adddJsWorldLandmarks(x),this.setLatestOutputTimestamp(T)})),this.graphRunner.attachEmptyPacketListener(h,(x=>{this.setLatestOutputTimestamp(x)})),this.graphRunner.attachProtoVectorListener(y,((x,T)=>{this.handednesses.push(...this.toJsCategories(x)),this.setLatestOutputTimestamp(T)})),this.graphRunner.attachEmptyPacketListener(y,(x=>{this.setLatestOutputTimestamp(x)}));let M=C.serializeBinary();this.setGraph(new Uint8Array(M),!0)}}t.HandLandmarker=b,b.HAND_CONNECTIONS=g.HAND_CONNECTIONS})(QB);VB={},YB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=Jd;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.ClassificationResult",null,n),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Classifications",null,n),proto.mediapipe.tasks.components.containers.proto.Classifications=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.Classifications,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Classifications.displayName="proto.mediapipe.tasks.components.containers.proto.Classifications"),proto.mediapipe.tasks.components.containers.proto.ClassificationResult=function(o){e.Message.initialize(this,o,0,-1,proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.ClassificationResult,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.displayName="proto.mediapipe.tasks.components.containers.proto.ClassificationResult"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.toObject=function(o){return proto.mediapipe.tasks.components.containers.proto.Classifications.toObject(o,this)},proto.mediapipe.tasks.components.containers.proto.Classifications.toObject=function(o,s){var p,l={classificationList:(p=s.getClassificationList())&&i.ClassificationList.toObject(o,p),headIndex:(p=e.Message.getField(s,2))==null?void 0:p,headName:(p=e.Message.getField(s,3))==null?void 0:p};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.tasks.components.containers.proto.Classifications;return proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader(p,s)},proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 4:var p=new i.ClassificationList;s.readMessage(p,i.ClassificationList.deserializeBinaryFromReader),o.setClassificationList(p);break;case 2:p=s.readInt32(),o.setHeadIndex(p);break;case 3:p=s.readString(),o.setHeadName(p);break;default:s.skipField()}return o},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter=function(o,s){var p=void 0;(p=o.getClassificationList())!=null&&s.writeMessage(4,p,i.ClassificationList.serializeBinaryToWriter),(p=e.Message.getField(o,2))!=null&&s.writeInt32(2,p),(p=e.Message.getField(o,3))!=null&&s.writeString(3,p)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getClassificationList=function(){return e.Message.getWrapperField(this,i.ClassificationList,4)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setClassificationList=function(o){return e.Message.setWrapperField(this,4,o)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearClassificationList=function(){return this.setClassificationList(void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasClassificationList=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadIndex=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadIndex=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadIndex=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadIndex=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadName=function(){return e.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadName=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadName=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadName=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.toObject=function(o){return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject(o,this)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject=function(o,s){var p,l={classificationsList:e.Message.toObjectList(s.getClassificationsList(),proto.mediapipe.tasks.components.containers.proto.Classifications.toObject,o),timestampMs:(p=e.Message.getField(s,2))==null?void 0:p};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.tasks.components.containers.proto.ClassificationResult;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader(p,s)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=new proto.mediapipe.tasks.components.containers.proto.Classifications;s.readMessage(p,proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader),o.addClassifications(p);break;case 2:p=s.readInt64(),o.setTimestampMs(p);break;default:s.skipField()}return o},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter=function(o,s){var p=void 0;(p=o.getClassificationsList()).length>0&&s.writeRepeatedMessage(1,p,proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter),(p=e.Message.getField(o,2))!=null&&s.writeInt64(2,p)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getClassificationsList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Classifications,1)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setClassificationsList=function(o){return e.Message.setRepeatedWrapperField(this,1,o)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.addClassifications=function(o,s){return e.Message.addToRepeatedWrapperField(this,1,o,proto.mediapipe.tasks.components.containers.proto.Classifications,s)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearClassificationsList=function(){return this.setClassificationsList([])},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getTimestampMs=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setTimestampMs=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearTimestampMs=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.hasTimestampMs=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.components.containers.proto)})(YB);KB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=Xg;r.object.extend(proto,s);var p=kt;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions",null,n),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject=function(l,c){var u,d={baseOptions:(u=c.getBaseOptions())&&p.BaseOptions.toObject(l,u),classifierOptions:(u=c.getClassifierOptions())&&s.ClassifierOptions.toObject(l,u)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),u=new proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader(u,c)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var u=new p.BaseOptions;c.readMessage(u,p.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(u);break;case 2:u=new s.ClassifierOptions,c.readMessage(u,s.ClassifierOptions.deserializeBinaryFromReader),l.setClassifierOptions(u);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter=function(l,c){var u=void 0;(u=l.getBaseOptions())!=null&&c.writeMessage(1,u,p.BaseOptions.serializeBinaryToWriter),(u=l.getClassifierOptions())!=null&&c.writeMessage(2,u,s.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new e.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[456383383]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,p.BaseOptions,1)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getClassifierOptions=function(){return e.Message.getWrapperField(this,s.ClassifierOptions,2)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setClassifierOptions=function(l){return e.Message.setWrapperField(this,2,l)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasClassifierOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new e.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[456383383]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.image_classifier.proto)})(KB);XB={};Object.defineProperty(XB,"__esModule",{value:!0});fB={};Object.defineProperty(fB,"__esModule",{value:!0}),(function(t){var e=Je&&Je.__createBinding||(Object.create?function(A,m,h,y){y===void 0&&(y=h);var E=Object.getOwnPropertyDescriptor(m,h);E&&!("get"in E?!m.__esModule:E.writable||E.configurable)||(E={enumerable:!0,get:function(){return m[h]}}),Object.defineProperty(A,y,E)}:function(A,m,h,y){y===void 0&&(y=h),A[y]=m[h]}),r=Je&&Je.__exportStar||function(A,m){for(var h in A)h==="default"||Object.prototype.hasOwnProperty.call(m,h)||e(m,A,h)};Object.defineProperty(t,"__esModule",{value:!0}),t.ImageClassifier=void 0;let n=bt,i=ht,o=YB,s=kt,p=KB,l=Vd,c=Ks,u=ko,d="input_image",f="norm_rect",g="classifications";r(XB,t),r(fB,t);class v extends u.VisionTaskRunner{static createFromOptions(m,h){return u.VisionTaskRunner.createVisionInstance(v,m,h)}static createFromModelBuffer(m,h){return u.VisionTaskRunner.createVisionInstance(v,m,{baseOptions:{modelAssetBuffer:h}})}static createFromModelPath(m,h){return u.VisionTaskRunner.createVisionInstance(v,m,{baseOptions:{modelAssetPath:h}})}constructor(m,h){super(new u.VisionGraphRunner(m,h),d,f,!0),this.classificationResult={classifications:[]},this.options=new p.ImageClassifierGraphOptions,this.options.setBaseOptions(new s.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(m){this.options.setBaseOptions(m)}setOptions(m){return this.options.setClassifierOptions((0,l.convertClassifierOptionsToProto)(m,this.options.getClassifierOptions())),this.applyOptions(m)}classify(m,h){return this.classificationResult={classifications:[]},this.processImageData(m,h),this.classificationResult}classifyForVideo(m,h,y){return this.classificationResult={classifications:[]},this.processVideoData(m,y,h),this.classificationResult}refreshGraph(){let m=new n.CalculatorGraphConfig;m.addInputStream(d),m.addInputStream(f),m.addOutputStream(g);let h=new i.CalculatorOptions;h.setExtension(p.ImageClassifierGraphOptions.ext,this.options);let y=new n.CalculatorGraphConfig.Node;y.setCalculator("mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),y.addInputStream("IMAGE:"+d),y.addInputStream("NORM_RECT:"+f),y.addOutputStream("CLASSIFICATIONS:"+g),y.setOptions(h),m.addNode(y),this.graphRunner.attachProtoListener(g,((b,_)=>{this.classificationResult=(0,c.convertFromClassificationResultProto)(o.ClassificationResult.deserializeBinary(b)),this.setLatestOutputTimestamp(_)})),this.graphRunner.attachEmptyPacketListener(g,(b=>{this.setLatestOutputTimestamp(b)}));let E=m.serializeBinary();this.setGraph(new Uint8Array(E),!0)}}t.ImageClassifier=v})(VB);JB={},qB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding",null,n),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase",null,n),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.EmbeddingResult",null,n),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.FloatEmbedding",null,n),r.exportSymbol("proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding",null,n),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.FloatEmbedding"),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding"),proto.mediapipe.tasks.components.containers.proto.Embedding=function(i){e.Message.initialize(this,i,0,-1,null,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_)},r.inherits(proto.mediapipe.tasks.components.containers.proto.Embedding,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Embedding.displayName="proto.mediapipe.tasks.components.containers.proto.Embedding"),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.displayName="proto.mediapipe.tasks.components.containers.proto.EmbeddingResult"),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.toObject=function(i){return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(i,this)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject=function(i,o){var s,p={valuesList:(s=e.Message.getRepeatedFloatingPointField(o,1))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader(s,o)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1)for(var s=o.isDelimited()?o.readPackedFloat():[o.readFloat()],p=0;p<s.length;p++)i.addValues(s[p]);else o.skipField();return i},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter=function(i,o){var s;(s=i.getValuesList()).length>0&&o.writePackedFloat(1,s)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.getValuesList=function(){return e.Message.getRepeatedFloatingPointField(this,1)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.setValuesList=function(i){return e.Message.setField(this,1,i||[])},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.addValues=function(i,o){return e.Message.addToRepeatedField(this,1,i,o)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.clearValuesList=function(){return this.setValuesList([])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.toObject=function(i){return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(i,this)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject=function(i,o){var s={values:o.getValues_asB64()};return i&&(s.$jspbMessageInstance=o),s}),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader(s,o)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=o.readBytes();i.setValues(s)}else o.skipField();return i},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter=function(i,o){var s;(s=e.Message.getField(i,1))!=null&&o.writeBytes(1,s)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asB64=function(){return e.Message.bytesAsB64(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asU8=function(){return e.Message.bytesAsU8(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.setValues=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.clearValues=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.hasValues=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_=[[1,2]],proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase={EMBEDDING_NOT_SET:0,FLOAT_EMBEDDING:1,QUANTIZED_EMBEDDING:2},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getEmbeddingCase=function(){return e.Message.computeOneofCase(this,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.toObject=function(i){return proto.mediapipe.tasks.components.containers.proto.Embedding.toObject(i,this)},proto.mediapipe.tasks.components.containers.proto.Embedding.toObject=function(i,o){var s,p={floatEmbedding:(s=o.getFloatEmbedding())&&proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(i,s),quantizedEmbedding:(s=o.getQuantizedEmbedding())&&proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(i,s),headIndex:(s=e.Message.getField(o,3))==null?void 0:s,headName:(s=e.Message.getField(o,4))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.tasks.components.containers.proto.Embedding;return proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader(s,o)},proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;o.readMessage(s,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader),i.setFloatEmbedding(s);break;case 2:s=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,o.readMessage(s,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader),i.setQuantizedEmbedding(s);break;case 3:s=o.readInt32(),i.setHeadIndex(s);break;case 4:s=o.readString(),i.setHeadName(s);break;default:o.skipField()}return i},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter=function(i,o){var s=void 0;(s=i.getFloatEmbedding())!=null&&o.writeMessage(1,s,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter),(s=i.getQuantizedEmbedding())!=null&&o.writeMessage(2,s,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter),(s=e.Message.getField(i,3))!=null&&o.writeInt32(3,s),(s=e.Message.getField(i,4))!=null&&o.writeString(4,s)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getFloatEmbedding=function(){return e.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setFloatEmbedding=function(i){return e.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],i)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearFloatEmbedding=function(){return this.setFloatEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasFloatEmbedding=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getQuantizedEmbedding=function(){return e.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,2)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setQuantizedEmbedding=function(i){return e.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],i)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearQuantizedEmbedding=function(){return this.setQuantizedEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasQuantizedEmbedding=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadIndex=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadIndex=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadIndex=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadIndex=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadName=function(){return e.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadName=function(i){return e.Message.setField(this,4,i)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadName=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadName=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.toObject=function(i){return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject(i,this)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject=function(i,o){var s,p={embeddingsList:e.Message.toObjectList(o.getEmbeddingsList(),proto.mediapipe.tasks.components.containers.proto.Embedding.toObject,i),timestampMs:(s=e.Message.getField(o,2))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.tasks.components.containers.proto.EmbeddingResult;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader(s,o)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=new proto.mediapipe.tasks.components.containers.proto.Embedding;o.readMessage(s,proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader),i.addEmbeddings(s);break;case 2:s=o.readInt64(),i.setTimestampMs(s);break;default:o.skipField()}return i},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter=function(i,o){var s=void 0;(s=i.getEmbeddingsList()).length>0&&o.writeRepeatedMessage(1,s,proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter),(s=e.Message.getField(i,2))!=null&&o.writeInt64(2,s)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getEmbeddingsList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Embedding,1)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setEmbeddingsList=function(i){return e.Message.setRepeatedWrapperField(this,1,i)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.addEmbeddings=function(i,o){return e.Message.addToRepeatedWrapperField(this,1,i,proto.mediapipe.tasks.components.containers.proto.Embedding,o)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearEmbeddingsList=function(){return this.setEmbeddingsList([])},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getTimestampMs=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setTimestampMs=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearTimestampMs=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.hasTimestampMs=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.components.containers.proto)})(qB);ZB={},Vy={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.components.processors.proto.EmbedderOptions",null,n),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.displayName="proto.mediapipe.tasks.components.processors.proto.EmbedderOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.toObject=function(i){return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject(i,this)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject=function(i,o){var s,p={l2Normalize:(s=e.Message.getBooleanField(o,1))==null?void 0:s,quantize:(s=e.Message.getBooleanField(o,2))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.tasks.components.processors.proto.EmbedderOptions;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader(s,o)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readBool();i.setL2Normalize(s);break;case 2:s=o.readBool(),i.setQuantize(s);break;default:o.skipField()}return i},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeBool(1,s),(s=e.Message.getField(i,2))!=null&&o.writeBool(2,s)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getL2Normalize=function(){return e.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setL2Normalize=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearL2Normalize=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasL2Normalize=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getQuantize=function(){return e.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setQuantize=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearQuantize=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasQuantize=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.components.processors.proto)})(Vy),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=Vy;r.object.extend(proto,s);var p=kt;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions",null,n),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject=function(l,c){var u,d={baseOptions:(u=c.getBaseOptions())&&p.BaseOptions.toObject(l,u),embedderOptions:(u=c.getEmbedderOptions())&&s.EmbedderOptions.toObject(l,u)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),u=new proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader(u,c)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var u=new p.BaseOptions;c.readMessage(u,p.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(u);break;case 2:u=new s.EmbedderOptions,c.readMessage(u,s.EmbedderOptions.deserializeBinaryFromReader),l.setEmbedderOptions(u);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter=function(l,c){var u=void 0;(u=l.getBaseOptions())!=null&&c.writeMessage(1,u,p.BaseOptions.serializeBinaryToWriter),(u=l.getEmbedderOptions())!=null&&c.writeMessage(2,u,s.EmbedderOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new e.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[476348187]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,p.BaseOptions,1)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getEmbedderOptions=function(){return e.Message.getWrapperField(this,s.EmbedderOptions,2)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setEmbedderOptions=function(l){return e.Message.setWrapperField(this,2,l)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearEmbedderOptions=function(){return this.setEmbedderOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasEmbedderOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new e.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[476348187]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.image_embedder.proto)})(ZB);Zg={};Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.convertEmbedderOptionsToProto=void 0;vN=Vy;Zg.convertEmbedderOptionsToProto=EN;$g={};Object.defineProperty($g,"__esModule",{value:!0}),$g.convertFromEmbeddingResultProto=void 0;bN=-1;$g.convertFromEmbeddingResultProto=CN;jg={};Object.defineProperty(jg,"__esModule",{value:!0}),jg.computeCosineSimilarity=void 0,jg.computeCosineSimilarity=RN;$B={};Object.defineProperty($B,"__esModule",{value:!0});mB={};Object.defineProperty(mB,"__esModule",{value:!0}),(function(t){var e=Je&&Je.__createBinding||(Object.create?function(m,h,y,E){E===void 0&&(E=y);var b=Object.getOwnPropertyDescriptor(h,y);b&&!("get"in b?!h.__esModule:b.writable||b.configurable)||(b={enumerable:!0,get:function(){return h[y]}}),Object.defineProperty(m,E,b)}:function(m,h,y,E){E===void 0&&(E=y),m[E]=h[y]}),r=Je&&Je.__exportStar||function(m,h){for(var y in m)y==="default"||Object.prototype.hasOwnProperty.call(h,y)||e(h,m,y)};Object.defineProperty(t,"__esModule",{value:!0}),t.ImageEmbedder=void 0;let n=bt,i=ht,o=qB,s=kt,p=ZB,l=Zg,c=$g,u=jg,d=ko,f="image_in",g="norm_rect",v="embeddings_out";r($B,t),r(mB,t);class A extends d.VisionTaskRunner{static createFromOptions(h,y){return d.VisionTaskRunner.createVisionInstance(A,h,y)}static createFromModelBuffer(h,y){return d.VisionTaskRunner.createVisionInstance(A,h,{baseOptions:{modelAssetBuffer:y}})}static createFromModelPath(h,y){return d.VisionTaskRunner.createVisionInstance(A,h,{baseOptions:{modelAssetPath:y}})}constructor(h,y){super(new d.VisionGraphRunner(h,y),f,g,!0),this.options=new p.ImageEmbedderGraphOptions,this.embeddings={embeddings:[]},this.options.setBaseOptions(new s.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(h){this.options.setBaseOptions(h)}setOptions(h){return this.options.setEmbedderOptions((0,l.convertEmbedderOptionsToProto)(h,this.options.getEmbedderOptions())),this.applyOptions(h)}embed(h,y){return this.processImageData(h,y),this.embeddings}embedForVideo(h,y,E){return this.processVideoData(h,E,y),this.embeddings}static cosineSimilarity(h,y){return(0,u.computeCosineSimilarity)(h,y)}addJsImageEmdedding(h){let y=o.EmbeddingResult.deserializeBinary(h);this.embeddings=(0,c.convertFromEmbeddingResultProto)(y)}refreshGraph(){let h=new n.CalculatorGraphConfig;h.addInputStream(f),h.addInputStream(g),h.addOutputStream(v);let y=new i.CalculatorOptions;y.setExtension(p.ImageEmbedderGraphOptions.ext,this.options);let E=new n.CalculatorGraphConfig.Node;E.setCalculator("mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),E.addInputStream("IMAGE:"+f),E.addInputStream("NORM_RECT:"+g),E.addOutputStream("EMBEDDINGS:"+v),E.setOptions(y),h.addNode(E),this.graphRunner.attachProtoListener(v,((_,C)=>{this.addJsImageEmdedding(_),this.setLatestOutputTimestamp(C)})),this.graphRunner.attachEmptyPacketListener(v,(_=>{this.setLatestOutputTimestamp(_)}));let b=h.serializeBinary();this.setGraph(new Uint8Array(b),!0)}}t.ImageEmbedder=A})(JB);e6={},t6={},Zd={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions",null,n),r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation",null,n),r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType",null,n),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.toObject=function(i){return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject(i,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject=function(i,o){var s,p={outputType:(s=e.Message.getField(o,1))==null?void 0:s,activation:e.Message.getFieldWithDefault(o,2,0)};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader(s,o)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readEnum();i.setOutputType(s);break;case 2:s=o.readEnum(),i.setActivation(s);break;default:o.skipField()}return i},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeEnum(1,s),(s=e.Message.getField(i,2))!=null&&o.writeEnum(2,s)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType={UNSPECIFIED:0,CATEGORY_MASK:1,CONFIDENCE_MASK:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation={NONE:0,SIGMOID:1,SOFTMAX:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getOutputType=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setOutputType=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearOutputType=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasOutputType=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getActivation=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setActivation=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearActivation=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasActivation=function(){return e.Message.getField(this,2)!=null},r.object.extend(t,proto.mediapipe.tasks.vision.image_segmenter.proto)})(Zd);AB={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.LabelMapItem",null,n),proto.mediapipe.LabelMapItem=function(i){e.Message.initialize(this,i,0,-1,proto.mediapipe.LabelMapItem.repeatedFields_,null)},r.inherits(proto.mediapipe.LabelMapItem,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.LabelMapItem.displayName="proto.mediapipe.LabelMapItem"),proto.mediapipe.LabelMapItem.repeatedFields_=[3],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LabelMapItem.prototype.toObject=function(i){return proto.mediapipe.LabelMapItem.toObject(i,this)},proto.mediapipe.LabelMapItem.toObject=function(i,o){var s,p={name:(s=e.Message.getField(o,1))==null?void 0:s,displayName:(s=e.Message.getField(o,2))==null?void 0:s,childNameList:(s=e.Message.getRepeatedField(o,3))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.LabelMapItem.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.LabelMapItem;return proto.mediapipe.LabelMapItem.deserializeBinaryFromReader(s,o)},proto.mediapipe.LabelMapItem.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readString();i.setName(s);break;case 2:s=o.readString(),i.setDisplayName(s);break;case 3:s=o.readString(),i.addChildName(s);break;default:o.skipField()}return i},proto.mediapipe.LabelMapItem.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.LabelMapItem.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.LabelMapItem.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeString(1,s),(s=e.Message.getField(i,2))!=null&&o.writeString(2,s),(s=i.getChildNameList()).length>0&&o.writeRepeatedString(3,s)},proto.mediapipe.LabelMapItem.prototype.getName=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.LabelMapItem.prototype.setName=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.LabelMapItem.prototype.clearName=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.LabelMapItem.prototype.hasName=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.LabelMapItem.prototype.getDisplayName=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.LabelMapItem.prototype.setDisplayName=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.LabelMapItem.prototype.clearDisplayName=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.LabelMapItem.prototype.hasDisplayName=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.LabelMapItem.prototype.getChildNameList=function(){return e.Message.getRepeatedField(this,3)},proto.mediapipe.LabelMapItem.prototype.setChildNameList=function(i){return e.Message.setField(this,3,i||[])},proto.mediapipe.LabelMapItem.prototype.addChildName=function(i,o){return e.Message.addToRepeatedField(this,3,i,o)},proto.mediapipe.LabelMapItem.prototype.clearChildNameList=function(){return this.setChildNameList([])},r.object.extend(t,proto.mediapipe)})(AB),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=ht;r.object.extend(proto,i);var o=Zd;r.object.extend(proto,o);var s=AB;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions",null,n),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.displayName="proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject(p,this)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject=function(p,l){var c,u={segmenterOptions:(c=l.getSegmenterOptions())&&o.SegmenterOptions.toObject(p,c),labelItemsMap:(c=l.getLabelItemsMap())?c.toObject(p,proto.mediapipe.LabelMapItem.toObject):[]};return p&&(u.$jspbMessageInstance=l),u}),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new o.SegmenterOptions;l.readMessage(c,o.SegmenterOptions.deserializeBinaryFromReader),p.setSegmenterOptions(c);break;case 2:c=p.getLabelItemsMap(),l.readMessage(c,(function(u,d){e.Map.deserializeBinary(u,d,e.BinaryReader.prototype.readInt64,e.BinaryReader.prototype.readMessage,proto.mediapipe.LabelMapItem.deserializeBinaryFromReader,0,new proto.mediapipe.LabelMapItem)}));break;default:l.skipField()}return p},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getSegmenterOptions())!=null&&l.writeMessage(1,c,o.SegmenterOptions.serializeBinaryToWriter),(c=p.getLabelItemsMap(!0))&&c.getLength()>0&&c.serializeBinary(2,l,e.BinaryWriter.prototype.writeInt64,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.LabelMapItem.serializeBinaryToWriter)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new e.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),i.CalculatorOptions.extensionsBinary[458105876]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getSegmenterOptions=function(){return e.Message.getWrapperField(this,o.SegmenterOptions,1)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.setSegmenterOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.hasSegmenterOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getLabelItemsMap=function(p){return e.Message.getMapField(this,2,p,proto.mediapipe.LabelMapItem)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearLabelItemsMap=function(){return this.getLabelItemsMap().clear(),this},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new e.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),i.CalculatorOptions.extensionsBinary[458105876]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),i.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,r.object.extend(t,proto.mediapipe.tasks)})(t6);o2={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s);var p=Zd;r.object.extend(proto,p),r.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions",null,n),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions=function(l){e.Message.initialize(this,l,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.toObject=function(l){return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject(l,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject=function(l,c){var u,d={baseOptions:(u=c.getBaseOptions())&&s.BaseOptions.toObject(l,u),displayNamesLocale:e.Message.getFieldWithDefault(c,2,"en"),segmenterOptions:(u=c.getSegmenterOptions())&&p.SegmenterOptions.toObject(l,u)};return l&&(d.$jspbMessageInstance=c),d}),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinary=function(l){var c=new e.BinaryReader(l),u=new proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader(u,c)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader=function(l,c){for(;c.nextField()&&!c.isEndGroup();)switch(c.getFieldNumber()){case 1:var u=new s.BaseOptions;c.readMessage(u,s.BaseOptions.deserializeBinaryFromReader),l.setBaseOptions(u);break;case 2:u=c.readString(),l.setDisplayNamesLocale(u);break;case 3:u=new p.SegmenterOptions,c.readMessage(u,p.SegmenterOptions.deserializeBinaryFromReader),l.setSegmenterOptions(u);break;default:c.skipField()}return l},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.serializeBinary=function(){var l=new e.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter(this,l),l.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter=function(l,c){var u=void 0;(u=l.getBaseOptions())!=null&&c.writeMessage(1,u,s.BaseOptions.serializeBinaryToWriter),(u=e.Message.getField(l,2))!=null&&c.writeString(2,u),(u=l.getSegmenterOptions())!=null&&c.writeMessage(3,u,p.SegmenterOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new e.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[458105758]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setBaseOptions=function(l){return e.Message.setWrapperField(this,1,l)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getDisplayNamesLocale=function(){return e.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setDisplayNamesLocale=function(l){return e.Message.setField(this,2,l)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearDisplayNamesLocale=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasDisplayNamesLocale=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getSegmenterOptions=function(){return e.Message.getWrapperField(this,p.SegmenterOptions,3)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setSegmenterOptions=function(l){return e.Message.setWrapperField(this,3,l)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasSegmenterOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new e.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[458105758]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.image_segmenter.proto)})(o2);Yd={};Object.defineProperty(Yd,"__esModule",{value:!0}),Yd.ImageSegmenterResult=void 0;Yy=class{constructor(e,r,n){this.confidenceMasks=e,this.categoryMask=r,this.qualityScores=n}close(){var e,r;(e=this.confidenceMasks)===null||e===void 0||e.forEach((n=>{n.close()})),(r=this.categoryMask)===null||r===void 0||r.close()}};Yd.ImageSegmenterResult=Yy;yB={};Object.defineProperty(yB,"__esModule",{value:!0}),(function(t){var e=Je&&Je.__createBinding||(Object.create?function(y,E,b,_){_===void 0&&(_=b);var C=Object.getOwnPropertyDescriptor(E,b);C&&!("get"in C?!E.__esModule:C.writable||C.configurable)||(C={enumerable:!0,get:function(){return E[b]}}),Object.defineProperty(y,_,C)}:function(y,E,b,_){_===void 0&&(_=b),y[_]=E[b]}),r=Je&&Je.__exportStar||function(y,E){for(var b in y)b==="default"||Object.prototype.hasOwnProperty.call(E,b)||e(E,y,b)};Object.defineProperty(t,"__esModule",{value:!0}),t.ImageSegmenter=void 0;let n=bt,i=ht,o=kt,s=t6,p=o2,l=Zd,c=ko,u=Yd;r(yB,t),r(Yd,t);let d="image_in",f="norm_rect",g="confidence_masks",v="category_mask",A="quality_scores",m="mediapipe.tasks.TensorsToSegmentationCalculator";class h extends c.VisionTaskRunner{static createFromOptions(E,b){return c.VisionTaskRunner.createVisionInstance(h,E,b)}static createFromModelBuffer(E,b){return c.VisionTaskRunner.createVisionInstance(h,E,{baseOptions:{modelAssetBuffer:b}})}static createFromModelPath(E,b){return c.VisionTaskRunner.createVisionInstance(h,E,{baseOptions:{modelAssetPath:b}})}constructor(E,b){super(new c.VisionGraphRunner(E,b),d,f,!1),this.labels=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new p.ImageSegmenterGraphOptions,this.segmenterOptions=new l.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new o.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(E){this.options.setBaseOptions(E)}setOptions(E){var b,_;return E.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(E.displayNamesLocale):"displayNamesLocale"in E&&this.options.clearDisplayNamesLocale(),"outputCategoryMask"in E&&(this.outputCategoryMask=(b=E.outputCategoryMask)!==null&&b!==void 0&&b),"outputConfidenceMasks"in E&&(this.outputConfidenceMasks=(_=E.outputConfidenceMasks)===null||_===void 0||_),super.applyOptions(E)}onGraphRefreshed(){this.populateLabels()}populateLabels(){var E,b,_;let C=this.getCalculatorGraphConfig().getNodeList().filter((B=>B.getName().includes(m)));if(this.labels=[],C.length>1)throw new Error(`The graph has more than one ${m}.`);C.length===1&&((_=(b=(E=C[0].getOptions())===null||E===void 0?void 0:E.getExtension(s.TensorsToSegmentationCalculatorOptions.ext))===null||b===void 0?void 0:b.getLabelItemsMap())!==null&&_!==void 0?_:new Map).forEach(((B,R)=>{this.labels[Number(R)]=B.getName()}))}segment(E,b,_){let C=typeof b!="function"?b:{};return this.userCallback=typeof b=="function"?b:_,this.reset(),this.processImageData(E,C),this.processResults()}segmentForVideo(E,b,_,C){let B=typeof _!="function"?_:{};return this.userCallback=typeof _=="function"?_:C,this.reset(),this.processVideoData(E,B,b),this.processResults()}getLabels(){return this.labels}reset(){this.categoryMask=void 0,this.confidenceMasks=void 0,this.qualityScores=void 0}processResults(){try{let E=new u.ImageSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return E;this.userCallback(E)}finally{this.freeKeepaliveStreams()}}refreshGraph(){let E=new n.CalculatorGraphConfig;E.addInputStream(d),E.addInputStream(f);let b=new i.CalculatorOptions;b.setExtension(p.ImageSegmenterGraphOptions.ext,this.options);let _=new n.CalculatorGraphConfig.Node;_.setCalculator("mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),_.addInputStream("IMAGE:"+d),_.addInputStream("NORM_RECT:"+f),_.setOptions(b),E.addNode(_),this.addKeepaliveNode(E),this.outputConfidenceMasks&&(E.addOutputStream(g),_.addOutputStream("CONFIDENCE_MASKS:"+g),this.keepStreamAlive(g),this.graphRunner.attachImageVectorListener(g,((B,R)=>{this.confidenceMasks=B.map((M=>this.convertToMPMask(M,!this.userCallback))),this.setLatestOutputTimestamp(R)})),this.graphRunner.attachEmptyPacketListener(g,(B=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(B)}))),this.outputCategoryMask&&(E.addOutputStream(v),_.addOutputStream("CATEGORY_MASK:"+v),this.keepStreamAlive(v),this.graphRunner.attachImageListener(v,((B,R)=>{this.categoryMask=this.convertToMPMask(B,!this.userCallback),this.setLatestOutputTimestamp(R)})),this.graphRunner.attachEmptyPacketListener(v,(B=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(B)}))),E.addOutputStream(A),_.addOutputStream("QUALITY_SCORES:"+A),this.graphRunner.attachFloatVectorListener(A,((B,R)=>{this.qualityScores=B,this.setLatestOutputTimestamp(R)})),this.graphRunner.attachEmptyPacketListener(A,(B=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(B)}));let C=E.serializeBinary();this.setGraph(new Uint8Array(C),!0)}}t.ImageSegmenter=h})(e6);r6={},i2={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")();r.exportSymbol("proto.mediapipe.Color",null,n),r.exportSymbol("proto.mediapipe.ColorMap",null,n),proto.mediapipe.Color=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.Color,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.Color.displayName="proto.mediapipe.Color"),proto.mediapipe.ColorMap=function(i){e.Message.initialize(this,i,0,-1,null,null)},r.inherits(proto.mediapipe.ColorMap,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.ColorMap.displayName="proto.mediapipe.ColorMap"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Color.prototype.toObject=function(i){return proto.mediapipe.Color.toObject(i,this)},proto.mediapipe.Color.toObject=function(i,o){var s,p={r:(s=e.Message.getField(o,1))==null?void 0:s,g:(s=e.Message.getField(o,2))==null?void 0:s,b:(s=e.Message.getField(o,3))==null?void 0:s};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.Color.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.Color;return proto.mediapipe.Color.deserializeBinaryFromReader(s,o)},proto.mediapipe.Color.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)switch(o.getFieldNumber()){case 1:var s=o.readInt32();i.setR(s);break;case 2:s=o.readInt32(),i.setG(s);break;case 3:s=o.readInt32(),i.setB(s);break;default:o.skipField()}return i},proto.mediapipe.Color.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.Color.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.Color.serializeBinaryToWriter=function(i,o){var s=void 0;(s=e.Message.getField(i,1))!=null&&o.writeInt32(1,s),(s=e.Message.getField(i,2))!=null&&o.writeInt32(2,s),(s=e.Message.getField(i,3))!=null&&o.writeInt32(3,s)},proto.mediapipe.Color.prototype.getR=function(){return e.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Color.prototype.setR=function(i){return e.Message.setField(this,1,i)},proto.mediapipe.Color.prototype.clearR=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.Color.prototype.hasR=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.Color.prototype.getG=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Color.prototype.setG=function(i){return e.Message.setField(this,2,i)},proto.mediapipe.Color.prototype.clearG=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.Color.prototype.hasG=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.Color.prototype.getB=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Color.prototype.setB=function(i){return e.Message.setField(this,3,i)},proto.mediapipe.Color.prototype.clearB=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.Color.prototype.hasB=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ColorMap.prototype.toObject=function(i){return proto.mediapipe.ColorMap.toObject(i,this)},proto.mediapipe.ColorMap.toObject=function(i,o){var s,p={labelToColorMap:(s=o.getLabelToColorMap())?s.toObject(i,proto.mediapipe.Color.toObject):[]};return i&&(p.$jspbMessageInstance=o),p}),proto.mediapipe.ColorMap.deserializeBinary=function(i){var o=new e.BinaryReader(i),s=new proto.mediapipe.ColorMap;return proto.mediapipe.ColorMap.deserializeBinaryFromReader(s,o)},proto.mediapipe.ColorMap.deserializeBinaryFromReader=function(i,o){for(;o.nextField()&&!o.isEndGroup();)if(o.getFieldNumber()===1){var s=i.getLabelToColorMap();o.readMessage(s,(function(p,l){e.Map.deserializeBinary(p,l,e.BinaryReader.prototype.readString,e.BinaryReader.prototype.readMessage,proto.mediapipe.Color.deserializeBinaryFromReader,"",new proto.mediapipe.Color)}))}else o.skipField();return i},proto.mediapipe.ColorMap.prototype.serializeBinary=function(){var i=new e.BinaryWriter;return proto.mediapipe.ColorMap.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.ColorMap.serializeBinaryToWriter=function(i,o){var s=void 0;(s=i.getLabelToColorMap(!0))&&s.getLength()>0&&s.serializeBinary(1,o,e.BinaryWriter.prototype.writeString,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.Color.serializeBinaryToWriter)},proto.mediapipe.ColorMap.prototype.getLabelToColorMap=function(i){return e.Message.getMapField(this,1,i,proto.mediapipe.Color)},proto.mediapipe.ColorMap.prototype.clearLabelToColorMap=function(){return this.getLabelToColorMap().clear(),this},r.object.extend(t,proto.mediapipe)})(i2);o6={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=i2;r.object.extend(proto,i),r.exportSymbol("proto.mediapipe.RenderAnnotation",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Arrow",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.DataCase",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.FilledOval",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRectangle",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRoundedRectangle",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.GradientLine",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Line",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Line.LineType",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Oval",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Point",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Rectangle",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.RoundedRectangle",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Scribble",null,n),r.exportSymbol("proto.mediapipe.RenderAnnotation.Text",null,n),r.exportSymbol("proto.mediapipe.RenderData",null,n),r.exportSymbol("proto.mediapipe.RenderViewport",null,n),proto.mediapipe.RenderData=function(o){e.Message.initialize(this,o,0,-1,proto.mediapipe.RenderData.repeatedFields_,null)},r.inherits(proto.mediapipe.RenderData,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderData.displayName="proto.mediapipe.RenderData"),proto.mediapipe.RenderAnnotation=function(o){e.Message.initialize(this,o,0,-1,null,proto.mediapipe.RenderAnnotation.oneofGroups_)},r.inherits(proto.mediapipe.RenderAnnotation,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.displayName="proto.mediapipe.RenderAnnotation"),proto.mediapipe.RenderAnnotation.Rectangle=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Rectangle,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Rectangle.displayName="proto.mediapipe.RenderAnnotation.Rectangle"),proto.mediapipe.RenderAnnotation.FilledRectangle=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.FilledRectangle,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRectangle"),proto.mediapipe.RenderAnnotation.RoundedRectangle=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.RoundedRectangle,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.RoundedRectangle"),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRoundedRectangle"),proto.mediapipe.RenderAnnotation.Oval=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Oval,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Oval.displayName="proto.mediapipe.RenderAnnotation.Oval"),proto.mediapipe.RenderAnnotation.FilledOval=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.FilledOval,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledOval.displayName="proto.mediapipe.RenderAnnotation.FilledOval"),proto.mediapipe.RenderAnnotation.Point=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Point,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Point.displayName="proto.mediapipe.RenderAnnotation.Point"),proto.mediapipe.RenderAnnotation.Line=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Line,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Line.displayName="proto.mediapipe.RenderAnnotation.Line"),proto.mediapipe.RenderAnnotation.GradientLine=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.GradientLine,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.GradientLine.displayName="proto.mediapipe.RenderAnnotation.GradientLine"),proto.mediapipe.RenderAnnotation.Scribble=function(o){e.Message.initialize(this,o,0,-1,proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_,null)},r.inherits(proto.mediapipe.RenderAnnotation.Scribble,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Scribble.displayName="proto.mediapipe.RenderAnnotation.Scribble"),proto.mediapipe.RenderAnnotation.Arrow=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Arrow,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Arrow.displayName="proto.mediapipe.RenderAnnotation.Arrow"),proto.mediapipe.RenderAnnotation.Text=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderAnnotation.Text,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Text.displayName="proto.mediapipe.RenderAnnotation.Text"),proto.mediapipe.RenderViewport=function(o){e.Message.initialize(this,o,0,-1,null,null)},r.inherits(proto.mediapipe.RenderViewport,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.RenderViewport.displayName="proto.mediapipe.RenderViewport"),proto.mediapipe.RenderData.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderData.prototype.toObject=function(o){return proto.mediapipe.RenderData.toObject(o,this)},proto.mediapipe.RenderData.toObject=function(o,s){var p,l={renderAnnotationsList:e.Message.toObjectList(s.getRenderAnnotationsList(),proto.mediapipe.RenderAnnotation.toObject,o),sceneClass:(p=e.Message.getField(s,2))==null?void 0:p,sceneViewport:(p=s.getSceneViewport())&&proto.mediapipe.RenderViewport.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderData.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderData;return proto.mediapipe.RenderData.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderData.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation;s.readMessage(p,proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader),o.addRenderAnnotations(p);break;case 2:p=s.readString(),o.setSceneClass(p);break;case 3:p=new proto.mediapipe.RenderViewport,s.readMessage(p,proto.mediapipe.RenderViewport.deserializeBinaryFromReader),o.setSceneViewport(p);break;default:s.skipField()}return o},proto.mediapipe.RenderData.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderData.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderData.serializeBinaryToWriter=function(o,s){var p=void 0;(p=o.getRenderAnnotationsList()).length>0&&s.writeRepeatedMessage(1,p,proto.mediapipe.RenderAnnotation.serializeBinaryToWriter),(p=e.Message.getField(o,2))!=null&&s.writeString(2,p),(p=o.getSceneViewport())!=null&&s.writeMessage(3,p,proto.mediapipe.RenderViewport.serializeBinaryToWriter)},proto.mediapipe.RenderData.prototype.getRenderAnnotationsList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation,1)},proto.mediapipe.RenderData.prototype.setRenderAnnotationsList=function(o){return e.Message.setRepeatedWrapperField(this,1,o)},proto.mediapipe.RenderData.prototype.addRenderAnnotations=function(o,s){return e.Message.addToRepeatedWrapperField(this,1,o,proto.mediapipe.RenderAnnotation,s)},proto.mediapipe.RenderData.prototype.clearRenderAnnotationsList=function(){return this.setRenderAnnotationsList([])},proto.mediapipe.RenderData.prototype.getSceneClass=function(){return e.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.RenderData.prototype.setSceneClass=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.RenderData.prototype.clearSceneClass=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderData.prototype.hasSceneClass=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderData.prototype.getSceneViewport=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderViewport,3)},proto.mediapipe.RenderData.prototype.setSceneViewport=function(o){return e.Message.setWrapperField(this,3,o)},proto.mediapipe.RenderData.prototype.clearSceneViewport=function(){return this.setSceneViewport(void 0)},proto.mediapipe.RenderData.prototype.hasSceneViewport=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.oneofGroups_=[[1,2,3,4,5,6,7,8,9,10,14,15]],proto.mediapipe.RenderAnnotation.DataCase={DATA_NOT_SET:0,RECTANGLE:1,FILLED_RECTANGLE:2,OVAL:3,FILLED_OVAL:4,POINT:5,LINE:6,ARROW:7,TEXT:8,ROUNDED_RECTANGLE:9,FILLED_ROUNDED_RECTANGLE:10,GRADIENT_LINE:14,SCRIBBLE:15},proto.mediapipe.RenderAnnotation.prototype.getDataCase=function(){return e.Message.computeOneofCase(this,proto.mediapipe.RenderAnnotation.oneofGroups_[0])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.toObject(o,this)},proto.mediapipe.RenderAnnotation.toObject=function(o,s){var p,l={rectangle:(p=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(o,p),filledRectangle:(p=s.getFilledRectangle())&&proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(o,p),oval:(p=s.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(o,p),filledOval:(p=s.getFilledOval())&&proto.mediapipe.RenderAnnotation.FilledOval.toObject(o,p),point:(p=s.getPoint())&&proto.mediapipe.RenderAnnotation.Point.toObject(o,p),line:(p=s.getLine())&&proto.mediapipe.RenderAnnotation.Line.toObject(o,p),arrow:(p=s.getArrow())&&proto.mediapipe.RenderAnnotation.Arrow.toObject(o,p),text:(p=s.getText())&&proto.mediapipe.RenderAnnotation.Text.toObject(o,p),roundedRectangle:(p=s.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(o,p),filledRoundedRectangle:(p=s.getFilledRoundedRectangle())&&proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(o,p),gradientLine:(p=s.getGradientLine())&&proto.mediapipe.RenderAnnotation.GradientLine.toObject(o,p),scribble:(p=s.getScribble())&&proto.mediapipe.RenderAnnotation.Scribble.toObject(o,p),thickness:e.Message.getFloatingPointFieldWithDefault(s,11,1),color:(p=s.getColor())&&i.Color.toObject(o,p),sceneTag:(p=e.Message.getField(s,13))==null?void 0:p};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation;return proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(p,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),o.setRectangle(p);break;case 2:p=new proto.mediapipe.RenderAnnotation.FilledRectangle,s.readMessage(p,proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader),o.setFilledRectangle(p);break;case 3:p=new proto.mediapipe.RenderAnnotation.Oval,s.readMessage(p,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),o.setOval(p);break;case 4:p=new proto.mediapipe.RenderAnnotation.FilledOval,s.readMessage(p,proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader),o.setFilledOval(p);break;case 5:p=new proto.mediapipe.RenderAnnotation.Point,s.readMessage(p,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),o.setPoint(p);break;case 6:p=new proto.mediapipe.RenderAnnotation.Line,s.readMessage(p,proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader),o.setLine(p);break;case 7:p=new proto.mediapipe.RenderAnnotation.Arrow,s.readMessage(p,proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader),o.setArrow(p);break;case 8:p=new proto.mediapipe.RenderAnnotation.Text,s.readMessage(p,proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader),o.setText(p);break;case 9:p=new proto.mediapipe.RenderAnnotation.RoundedRectangle,s.readMessage(p,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),o.setRoundedRectangle(p);break;case 10:p=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,s.readMessage(p,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader),o.setFilledRoundedRectangle(p);break;case 14:p=new proto.mediapipe.RenderAnnotation.GradientLine,s.readMessage(p,proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader),o.setGradientLine(p);break;case 15:p=new proto.mediapipe.RenderAnnotation.Scribble,s.readMessage(p,proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader),o.setScribble(p);break;case 11:p=s.readDouble(),o.setThickness(p);break;case 12:p=new i.Color,s.readMessage(p,i.Color.deserializeBinaryFromReader),o.setColor(p);break;case 13:p=s.readString(),o.setSceneTag(p);break;default:s.skipField()}return o},proto.mediapipe.RenderAnnotation.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.serializeBinaryToWriter=function(o,s){var p=void 0;(p=o.getRectangle())!=null&&s.writeMessage(1,p,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(p=o.getFilledRectangle())!=null&&s.writeMessage(2,p,proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter),(p=o.getOval())!=null&&s.writeMessage(3,p,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(p=o.getFilledOval())!=null&&s.writeMessage(4,p,proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter),(p=o.getPoint())!=null&&s.writeMessage(5,p,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter),(p=o.getLine())!=null&&s.writeMessage(6,p,proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter),(p=o.getArrow())!=null&&s.writeMessage(7,p,proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter),(p=o.getText())!=null&&s.writeMessage(8,p,proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter),(p=o.getRoundedRectangle())!=null&&s.writeMessage(9,p,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(p=o.getFilledRoundedRectangle())!=null&&s.writeMessage(10,p,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter),(p=o.getGradientLine())!=null&&s.writeMessage(14,p,proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter),(p=o.getScribble())!=null&&s.writeMessage(15,p,proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter),(p=e.Message.getField(o,11))!=null&&s.writeDouble(11,p),(p=o.getColor())!=null&&s.writeMessage(12,p,i.Color.serializeBinaryToWriter),(p=e.Message.getField(o,13))!=null&&s.writeString(13,p)},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Rectangle.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.Rectangle.toObject(o,this)},proto.mediapipe.RenderAnnotation.Rectangle.toObject=function(o,s){var p,l={left:(p=e.Message.getOptionalFloatingPointField(s,1))==null?void 0:p,top:(p=e.Message.getOptionalFloatingPointField(s,2))==null?void 0:p,right:(p=e.Message.getOptionalFloatingPointField(s,3))==null?void 0:p,bottom:(p=e.Message.getOptionalFloatingPointField(s,4))==null?void 0:p,normalized:e.Message.getBooleanFieldWithDefault(s,5,!1),rotation:(p=e.Message.getOptionalFloatingPointField(s,6))==null?void 0:p,topLeftThickness:(p=e.Message.getOptionalFloatingPointField(s,7))==null?void 0:p};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.Rectangle;return proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readDouble();o.setLeft(p);break;case 2:p=s.readDouble(),o.setTop(p);break;case 3:p=s.readDouble(),o.setRight(p);break;case 4:p=s.readDouble(),o.setBottom(p);break;case 5:p=s.readBool(),o.setNormalized(p);break;case 6:p=s.readDouble(),o.setRotation(p);break;case 7:p=s.readDouble(),o.setTopLeftThickness(p);break;default:s.skipField()}return o},proto.mediapipe.RenderAnnotation.Rectangle.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeDouble(1,p),(p=e.Message.getField(o,2))!=null&&s.writeDouble(2,p),(p=e.Message.getField(o,3))!=null&&s.writeDouble(3,p),(p=e.Message.getField(o,4))!=null&&s.writeDouble(4,p),(p=e.Message.getField(o,5))!=null&&s.writeBool(5,p),(p=e.Message.getField(o,6))!=null&&s.writeDouble(6,p),(p=e.Message.getField(o,7))!=null&&s.writeDouble(7,p)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getLeft=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setLeft=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearLeft=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasLeft=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTop=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTop=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTop=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTop=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRight=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRight=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRight=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRight=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getBottom=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setBottom=function(o){return e.Message.setField(this,4,o)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearBottom=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasBottom=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setNormalized=function(o){return e.Message.setField(this,5,o)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearNormalized=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasNormalized=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRotation=function(){return e.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRotation=function(o){return e.Message.setField(this,6,o)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRotation=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRotation=function(){return e.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTopLeftThickness=function(){return e.Message.getFloatingPointFieldWithDefault(this,7,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTopLeftThickness=function(o){return e.Message.setField(this,7,o)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTopLeftThickness=function(){return e.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTopLeftThickness=function(){return e.Message.getField(this,7)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(o,this)},proto.mediapipe.RenderAnnotation.FilledRectangle.toObject=function(o,s){var p,l={rectangle:(p=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(o,p),fillColor:(p=s.getFillColor())&&i.Color.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.FilledRectangle;return proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(p,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),o.setRectangle(p);break;case 2:p=new i.Color,s.readMessage(p,i.Color.deserializeBinaryFromReader),o.setFillColor(p);break;default:s.skipField()}return o},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter=function(o,s){var p=void 0;(p=o.getRectangle())!=null&&s.writeMessage(1,p,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(p=o.getFillColor())!=null&&s.writeMessage(2,p,i.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setRectangle=function(o){return e.Message.setWrapperField(this,1,o)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasRectangle=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getFillColor=function(){return e.Message.getWrapperField(this,i.Color,2)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setFillColor=function(o){return e.Message.setWrapperField(this,2,o)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasFillColor=function(){return e.Message.getField(this,2)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(o,this)},proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject=function(o,s){var p,l={rectangle:(p=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(o,p),cornerRadius:e.Message.getFieldWithDefault(s,2,0),lineType:e.Message.getFieldWithDefault(s,3,4)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.RoundedRectangle;return proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(p,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),o.setRectangle(p);break;case 2:p=s.readInt32(),o.setCornerRadius(p);break;case 3:p=s.readInt32(),o.setLineType(p);break;default:s.skipField()}return o},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter=function(o,s){var p=void 0;(p=o.getRectangle())!=null&&s.writeMessage(1,p,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(p=e.Message.getField(o,2))!=null&&s.writeInt32(2,p),(p=e.Message.getField(o,3))!=null&&s.writeInt32(3,p)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setRectangle=function(o){return e.Message.setWrapperField(this,1,o)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasRectangle=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getCornerRadius=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setCornerRadius=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearCornerRadius=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasCornerRadius=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getLineType=function(){return e.Message.getFieldWithDefault(this,3,4)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setLineType=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearLineType=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasLineType=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(o,this)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject=function(o,s){var p,l={roundedRectangle:(p=s.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(o,p),fillColor:(p=s.getFillColor())&&i.Color.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation.RoundedRectangle;s.readMessage(p,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),o.setRoundedRectangle(p);break;case 2:p=new i.Color,s.readMessage(p,i.Color.deserializeBinaryFromReader),o.setFillColor(p);break;default:s.skipField()}return o},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter=function(o,s){var p=void 0;(p=o.getRoundedRectangle())!=null&&s.writeMessage(1,p,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(p=o.getFillColor())!=null&&s.writeMessage(2,p,i.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getRoundedRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,1)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setRoundedRectangle=function(o){return e.Message.setWrapperField(this,1,o)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasRoundedRectangle=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getFillColor=function(){return e.Message.getWrapperField(this,i.Color,2)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setFillColor=function(o){return e.Message.setWrapperField(this,2,o)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasFillColor=function(){return e.Message.getField(this,2)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Oval.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.Oval.toObject(o,this)},proto.mediapipe.RenderAnnotation.Oval.toObject=function(o,s){var p,l={rectangle:(p=s.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.Oval.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.Oval;return proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)if(s.getFieldNumber()===1){var p=new proto.mediapipe.RenderAnnotation.Rectangle;s.readMessage(p,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),o.setRectangle(p)}else s.skipField();return o},proto.mediapipe.RenderAnnotation.Oval.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter=function(o,s){var p;(p=o.getRectangle())!=null&&s.writeMessage(1,p,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Oval.prototype.getRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.Oval.prototype.setRectangle=function(o){return e.Message.setWrapperField(this,1,o)},proto.mediapipe.RenderAnnotation.Oval.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.Oval.prototype.hasRectangle=function(){return e.Message.getField(this,1)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledOval.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.FilledOval.toObject(o,this)},proto.mediapipe.RenderAnnotation.FilledOval.toObject=function(o,s){var p,l={oval:(p=s.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(o,p),fillColor:(p=s.getFillColor())&&i.Color.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.FilledOval;return proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=new proto.mediapipe.RenderAnnotation.Oval;s.readMessage(p,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),o.setOval(p);break;case 2:p=new i.Color,s.readMessage(p,i.Color.deserializeBinaryFromReader),o.setFillColor(p);break;default:s.skipField()}return o},proto.mediapipe.RenderAnnotation.FilledOval.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter=function(o,s){var p=void 0;(p=o.getOval())!=null&&s.writeMessage(1,p,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(p=o.getFillColor())!=null&&s.writeMessage(2,p,i.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getOval=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,1)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setOval=function(o){return e.Message.setWrapperField(this,1,o)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasOval=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getFillColor=function(){return e.Message.getWrapperField(this,i.Color,2)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setFillColor=function(o){return e.Message.setWrapperField(this,2,o)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasFillColor=function(){return e.Message.getField(this,2)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Point.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.Point.toObject(o,this)},proto.mediapipe.RenderAnnotation.Point.toObject=function(o,s){var p,l={x:(p=e.Message.getOptionalFloatingPointField(s,1))==null?void 0:p,y:(p=e.Message.getOptionalFloatingPointField(s,2))==null?void 0:p,normalized:e.Message.getBooleanFieldWithDefault(s,3,!1)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.Point.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.Point;return proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readDouble();o.setX(p);break;case 2:p=s.readDouble(),o.setY(p);break;case 3:p=s.readBool(),o.setNormalized(p);break;default:s.skipField()}return o},proto.mediapipe.RenderAnnotation.Point.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeDouble(1,p),(p=e.Message.getField(o,2))!=null&&s.writeDouble(2,p),(p=e.Message.getField(o,3))!=null&&s.writeBool(3,p)},proto.mediapipe.RenderAnnotation.Point.prototype.getX=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setX=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.RenderAnnotation.Point.prototype.clearX=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasX=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getY=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setY=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.RenderAnnotation.Point.prototype.clearY=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasY=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.RenderAnnotation.Point.prototype.setNormalized=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.RenderAnnotation.Point.prototype.clearNormalized=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasNormalized=function(){return e.Message.getField(this,3)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Line.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.Line.toObject(o,this)},proto.mediapipe.RenderAnnotation.Line.toObject=function(o,s){var p,l={xStart:(p=e.Message.getOptionalFloatingPointField(s,1))==null?void 0:p,yStart:(p=e.Message.getOptionalFloatingPointField(s,2))==null?void 0:p,xEnd:(p=e.Message.getOptionalFloatingPointField(s,3))==null?void 0:p,yEnd:(p=e.Message.getOptionalFloatingPointField(s,4))==null?void 0:p,normalized:e.Message.getBooleanFieldWithDefault(s,5,!1),lineType:e.Message.getFieldWithDefault(s,6,1)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.Line.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.Line;return proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readDouble();o.setXStart(p);break;case 2:p=s.readDouble(),o.setYStart(p);break;case 3:p=s.readDouble(),o.setXEnd(p);break;case 4:p=s.readDouble(),o.setYEnd(p);break;case 5:p=s.readBool(),o.setNormalized(p);break;case 6:p=s.readEnum(),o.setLineType(p);break;default:s.skipField()}return o},proto.mediapipe.RenderAnnotation.Line.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeDouble(1,p),(p=e.Message.getField(o,2))!=null&&s.writeDouble(2,p),(p=e.Message.getField(o,3))!=null&&s.writeDouble(3,p),(p=e.Message.getField(o,4))!=null&&s.writeDouble(4,p),(p=e.Message.getField(o,5))!=null&&s.writeBool(5,p),(p=e.Message.getField(o,6))!=null&&s.writeEnum(6,p)},proto.mediapipe.RenderAnnotation.Line.LineType={UNKNOWN:0,SOLID:1,DASHED:2},proto.mediapipe.RenderAnnotation.Line.prototype.getXStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXStart=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXStart=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXStart=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYStart=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYStart=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYStart=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getXEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXEnd=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXEnd=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXEnd=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYEnd=function(o){return e.Message.setField(this,4,o)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYEnd=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYEnd=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Line.prototype.setNormalized=function(o){return e.Message.setField(this,5,o)},proto.mediapipe.RenderAnnotation.Line.prototype.clearNormalized=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasNormalized=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getLineType=function(){return e.Message.getFieldWithDefault(this,6,1)},proto.mediapipe.RenderAnnotation.Line.prototype.setLineType=function(o){return e.Message.setField(this,6,o)},proto.mediapipe.RenderAnnotation.Line.prototype.clearLineType=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasLineType=function(){return e.Message.getField(this,6)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.GradientLine.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.GradientLine.toObject(o,this)},proto.mediapipe.RenderAnnotation.GradientLine.toObject=function(o,s){var p,l={xStart:(p=e.Message.getOptionalFloatingPointField(s,1))==null?void 0:p,yStart:(p=e.Message.getOptionalFloatingPointField(s,2))==null?void 0:p,xEnd:(p=e.Message.getOptionalFloatingPointField(s,3))==null?void 0:p,yEnd:(p=e.Message.getOptionalFloatingPointField(s,4))==null?void 0:p,normalized:e.Message.getBooleanFieldWithDefault(s,5,!1),color1:(p=s.getColor1())&&i.Color.toObject(o,p),color2:(p=s.getColor2())&&i.Color.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.GradientLine;return proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readDouble();o.setXStart(p);break;case 2:p=s.readDouble(),o.setYStart(p);break;case 3:p=s.readDouble(),o.setXEnd(p);break;case 4:p=s.readDouble(),o.setYEnd(p);break;case 5:p=s.readBool(),o.setNormalized(p);break;case 6:p=new i.Color,s.readMessage(p,i.Color.deserializeBinaryFromReader),o.setColor1(p);break;case 7:p=new i.Color,s.readMessage(p,i.Color.deserializeBinaryFromReader),o.setColor2(p);break;default:s.skipField()}return o},proto.mediapipe.RenderAnnotation.GradientLine.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeDouble(1,p),(p=e.Message.getField(o,2))!=null&&s.writeDouble(2,p),(p=e.Message.getField(o,3))!=null&&s.writeDouble(3,p),(p=e.Message.getField(o,4))!=null&&s.writeDouble(4,p),(p=e.Message.getField(o,5))!=null&&s.writeBool(5,p),(p=o.getColor1())!=null&&s.writeMessage(6,p,i.Color.serializeBinaryToWriter),(p=o.getColor2())!=null&&s.writeMessage(7,p,i.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXStart=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXStart=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXStart=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYStart=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYStart=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYStart=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXEnd=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXEnd=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXEnd=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYEnd=function(o){return e.Message.setField(this,4,o)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYEnd=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYEnd=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setNormalized=function(o){return e.Message.setField(this,5,o)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearNormalized=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasNormalized=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor1=function(){return e.Message.getWrapperField(this,i.Color,6)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor1=function(o){return e.Message.setWrapperField(this,6,o)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor1=function(){return this.setColor1(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor1=function(){return e.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor2=function(){return e.Message.getWrapperField(this,i.Color,7)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor2=function(o){return e.Message.setWrapperField(this,7,o)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor2=function(){return this.setColor2(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor2=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_=[1],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Scribble.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.Scribble.toObject(o,this)},proto.mediapipe.RenderAnnotation.Scribble.toObject=function(o,s){var p={pointList:e.Message.toObjectList(s.getPointList(),proto.mediapipe.RenderAnnotation.Point.toObject,o)};return o&&(p.$jspbMessageInstance=s),p}),proto.mediapipe.RenderAnnotation.Scribble.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.Scribble;return proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)if(s.getFieldNumber()===1){var p=new proto.mediapipe.RenderAnnotation.Point;s.readMessage(p,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),o.addPoint(p)}else s.skipField();return o},proto.mediapipe.RenderAnnotation.Scribble.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter=function(o,s){var p;(p=o.getPointList()).length>0&&s.writeRepeatedMessage(1,p,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Scribble.prototype.getPointList=function(){return e.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation.Point,1)},proto.mediapipe.RenderAnnotation.Scribble.prototype.setPointList=function(o){return e.Message.setRepeatedWrapperField(this,1,o)},proto.mediapipe.RenderAnnotation.Scribble.prototype.addPoint=function(o,s){return e.Message.addToRepeatedWrapperField(this,1,o,proto.mediapipe.RenderAnnotation.Point,s)},proto.mediapipe.RenderAnnotation.Scribble.prototype.clearPointList=function(){return this.setPointList([])},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Arrow.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.Arrow.toObject(o,this)},proto.mediapipe.RenderAnnotation.Arrow.toObject=function(o,s){var p,l={xStart:(p=e.Message.getOptionalFloatingPointField(s,1))==null?void 0:p,yStart:(p=e.Message.getOptionalFloatingPointField(s,2))==null?void 0:p,xEnd:(p=e.Message.getOptionalFloatingPointField(s,3))==null?void 0:p,yEnd:(p=e.Message.getOptionalFloatingPointField(s,4))==null?void 0:p,normalized:e.Message.getBooleanFieldWithDefault(s,5,!1)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.Arrow.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.Arrow;return proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readDouble();o.setXStart(p);break;case 2:p=s.readDouble(),o.setYStart(p);break;case 3:p=s.readDouble(),o.setXEnd(p);break;case 4:p=s.readDouble(),o.setYEnd(p);break;case 5:p=s.readBool(),o.setNormalized(p);break;default:s.skipField()}return o},proto.mediapipe.RenderAnnotation.Arrow.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeDouble(1,p),(p=e.Message.getField(o,2))!=null&&s.writeDouble(2,p),(p=e.Message.getField(o,3))!=null&&s.writeDouble(3,p),(p=e.Message.getField(o,4))!=null&&s.writeDouble(4,p),(p=e.Message.getField(o,5))!=null&&s.writeBool(5,p)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXStart=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXStart=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXStart=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYStart=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYStart=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYStart=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYStart=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXEnd=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXEnd=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXEnd=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYEnd=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYEnd=function(o){return e.Message.setField(this,4,o)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYEnd=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYEnd=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setNormalized=function(o){return e.Message.setField(this,5,o)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearNormalized=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasNormalized=function(){return e.Message.getField(this,5)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Text.prototype.toObject=function(o){return proto.mediapipe.RenderAnnotation.Text.toObject(o,this)},proto.mediapipe.RenderAnnotation.Text.toObject=function(o,s){var p,l={displayText:(p=e.Message.getField(s,1))==null?void 0:p,left:(p=e.Message.getOptionalFloatingPointField(s,2))==null?void 0:p,baseline:(p=e.Message.getOptionalFloatingPointField(s,3))==null?void 0:p,fontHeight:e.Message.getFloatingPointFieldWithDefault(s,4,8),normalized:e.Message.getBooleanFieldWithDefault(s,5,!1),fontFace:e.Message.getFieldWithDefault(s,6,0),centerHorizontally:e.Message.getBooleanFieldWithDefault(s,7,!1),centerVertically:e.Message.getBooleanFieldWithDefault(s,8,!1),outlineThickness:e.Message.getFloatingPointFieldWithDefault(s,11,0),outlineColor:(p=s.getOutlineColor())&&i.Color.toObject(o,p)};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderAnnotation.Text.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderAnnotation.Text;return proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readString();o.setDisplayText(p);break;case 2:p=s.readDouble(),o.setLeft(p);break;case 3:p=s.readDouble(),o.setBaseline(p);break;case 4:p=s.readDouble(),o.setFontHeight(p);break;case 5:p=s.readBool(),o.setNormalized(p);break;case 6:p=s.readInt32(),o.setFontFace(p);break;case 7:p=s.readBool(),o.setCenterHorizontally(p);break;case 8:p=s.readBool(),o.setCenterVertically(p);break;case 11:p=s.readDouble(),o.setOutlineThickness(p);break;case 12:p=new i.Color,s.readMessage(p,i.Color.deserializeBinaryFromReader),o.setOutlineColor(p);break;default:s.skipField()}return o},proto.mediapipe.RenderAnnotation.Text.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeString(1,p),(p=e.Message.getField(o,2))!=null&&s.writeDouble(2,p),(p=e.Message.getField(o,3))!=null&&s.writeDouble(3,p),(p=e.Message.getField(o,4))!=null&&s.writeDouble(4,p),(p=e.Message.getField(o,5))!=null&&s.writeBool(5,p),(p=e.Message.getField(o,6))!=null&&s.writeInt32(6,p),(p=e.Message.getField(o,7))!=null&&s.writeBool(7,p),(p=e.Message.getField(o,8))!=null&&s.writeBool(8,p),(p=e.Message.getField(o,11))!=null&&s.writeDouble(11,p),(p=o.getOutlineColor())!=null&&s.writeMessage(12,p,i.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Text.prototype.getDisplayText=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderAnnotation.Text.prototype.setDisplayText=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.RenderAnnotation.Text.prototype.clearDisplayText=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasDisplayText=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getLeft=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setLeft=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.RenderAnnotation.Text.prototype.clearLeft=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasLeft=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getBaseline=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setBaseline=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.RenderAnnotation.Text.prototype.clearBaseline=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasBaseline=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontHeight=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,8)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontHeight=function(o){return e.Message.setField(this,4,o)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontHeight=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontHeight=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getNormalized=function(){return e.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setNormalized=function(o){return e.Message.setField(this,5,o)},proto.mediapipe.RenderAnnotation.Text.prototype.clearNormalized=function(){return e.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasNormalized=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontFace=function(){return e.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontFace=function(o){return e.Message.setField(this,6,o)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontFace=function(){return e.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontFace=function(){return e.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterHorizontally=function(){return e.Message.getBooleanFieldWithDefault(this,7,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterHorizontally=function(o){return e.Message.setField(this,7,o)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterHorizontally=function(){return e.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterHorizontally=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterVertically=function(){return e.Message.getBooleanFieldWithDefault(this,8,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterVertically=function(o){return e.Message.setField(this,8,o)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterVertically=function(){return e.Message.setField(this,8,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterVertically=function(){return e.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineThickness=function(){return e.Message.getFloatingPointFieldWithDefault(this,11,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineThickness=function(o){return e.Message.setField(this,11,o)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineThickness=function(){return e.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineThickness=function(){return e.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineColor=function(){return e.Message.getWrapperField(this,i.Color,12)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineColor=function(o){return e.Message.setWrapperField(this,12,o)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineColor=function(){return this.setOutlineColor(void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineColor=function(){return e.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.prototype.setRectangle=function(o){return e.Message.setOneofWrapperField(this,1,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRectangle=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRectangle,2)},proto.mediapipe.RenderAnnotation.prototype.setFilledRectangle=function(o){return e.Message.setOneofWrapperField(this,2,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRectangle=function(){return this.setFilledRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRectangle=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.prototype.getOval=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,3)},proto.mediapipe.RenderAnnotation.prototype.setOval=function(o){return e.Message.setOneofWrapperField(this,3,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasOval=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledOval=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledOval,4)},proto.mediapipe.RenderAnnotation.prototype.setFilledOval=function(o){return e.Message.setOneofWrapperField(this,4,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearFilledOval=function(){return this.setFilledOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledOval=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.prototype.getPoint=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Point,5)},proto.mediapipe.RenderAnnotation.prototype.setPoint=function(o){return e.Message.setOneofWrapperField(this,5,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearPoint=function(){return this.setPoint(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasPoint=function(){return e.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.prototype.getLine=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Line,6)},proto.mediapipe.RenderAnnotation.prototype.setLine=function(o){return e.Message.setOneofWrapperField(this,6,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearLine=function(){return this.setLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasLine=function(){return e.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.prototype.getArrow=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Arrow,7)},proto.mediapipe.RenderAnnotation.prototype.setArrow=function(o){return e.Message.setOneofWrapperField(this,7,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearArrow=function(){return this.setArrow(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasArrow=function(){return e.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.prototype.getText=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Text,8)},proto.mediapipe.RenderAnnotation.prototype.setText=function(o){return e.Message.setOneofWrapperField(this,8,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearText=function(){return this.setText(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasText=function(){return e.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.prototype.getRoundedRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,9)},proto.mediapipe.RenderAnnotation.prototype.setRoundedRectangle=function(o){return e.Message.setOneofWrapperField(this,9,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRoundedRectangle=function(){return e.Message.getField(this,9)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRoundedRectangle=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,10)},proto.mediapipe.RenderAnnotation.prototype.setFilledRoundedRectangle=function(o){return e.Message.setOneofWrapperField(this,10,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRoundedRectangle=function(){return this.setFilledRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRoundedRectangle=function(){return e.Message.getField(this,10)!=null},proto.mediapipe.RenderAnnotation.prototype.getGradientLine=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.GradientLine,14)},proto.mediapipe.RenderAnnotation.prototype.setGradientLine=function(o){return e.Message.setOneofWrapperField(this,14,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearGradientLine=function(){return this.setGradientLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasGradientLine=function(){return e.Message.getField(this,14)!=null},proto.mediapipe.RenderAnnotation.prototype.getScribble=function(){return e.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Scribble,15)},proto.mediapipe.RenderAnnotation.prototype.setScribble=function(o){return e.Message.setOneofWrapperField(this,15,proto.mediapipe.RenderAnnotation.oneofGroups_[0],o)},proto.mediapipe.RenderAnnotation.prototype.clearScribble=function(){return this.setScribble(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasScribble=function(){return e.Message.getField(this,15)!=null},proto.mediapipe.RenderAnnotation.prototype.getThickness=function(){return e.Message.getFloatingPointFieldWithDefault(this,11,1)},proto.mediapipe.RenderAnnotation.prototype.setThickness=function(o){return e.Message.setField(this,11,o)},proto.mediapipe.RenderAnnotation.prototype.clearThickness=function(){return e.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasThickness=function(){return e.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.prototype.getColor=function(){return e.Message.getWrapperField(this,i.Color,12)},proto.mediapipe.RenderAnnotation.prototype.setColor=function(o){return e.Message.setWrapperField(this,12,o)},proto.mediapipe.RenderAnnotation.prototype.clearColor=function(){return this.setColor(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasColor=function(){return e.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getSceneTag=function(){return e.Message.getFieldWithDefault(this,13,"")},proto.mediapipe.RenderAnnotation.prototype.setSceneTag=function(o){return e.Message.setField(this,13,o)},proto.mediapipe.RenderAnnotation.prototype.clearSceneTag=function(){return e.Message.setField(this,13,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasSceneTag=function(){return e.Message.getField(this,13)!=null},e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderViewport.prototype.toObject=function(o){return proto.mediapipe.RenderViewport.toObject(o,this)},proto.mediapipe.RenderViewport.toObject=function(o,s){var p,l={id:(p=e.Message.getField(s,1))==null?void 0:p,widthPx:(p=e.Message.getField(s,2))==null?void 0:p,heightPx:(p=e.Message.getField(s,3))==null?void 0:p,composeOnVideo:(p=e.Message.getBooleanField(s,4))==null?void 0:p};return o&&(l.$jspbMessageInstance=s),l}),proto.mediapipe.RenderViewport.deserializeBinary=function(o){var s=new e.BinaryReader(o),p=new proto.mediapipe.RenderViewport;return proto.mediapipe.RenderViewport.deserializeBinaryFromReader(p,s)},proto.mediapipe.RenderViewport.deserializeBinaryFromReader=function(o,s){for(;s.nextField()&&!s.isEndGroup();)switch(s.getFieldNumber()){case 1:var p=s.readString();o.setId(p);break;case 2:p=s.readInt32(),o.setWidthPx(p);break;case 3:p=s.readInt32(),o.setHeightPx(p);break;case 4:p=s.readBool(),o.setComposeOnVideo(p);break;default:s.skipField()}return o},proto.mediapipe.RenderViewport.prototype.serializeBinary=function(){var o=new e.BinaryWriter;return proto.mediapipe.RenderViewport.serializeBinaryToWriter(this,o),o.getResultBuffer()},proto.mediapipe.RenderViewport.serializeBinaryToWriter=function(o,s){var p=void 0;(p=e.Message.getField(o,1))!=null&&s.writeString(1,p),(p=e.Message.getField(o,2))!=null&&s.writeInt32(2,p),(p=e.Message.getField(o,3))!=null&&s.writeInt32(3,p),(p=e.Message.getField(o,4))!=null&&s.writeBool(4,p)},proto.mediapipe.RenderViewport.prototype.getId=function(){return e.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderViewport.prototype.setId=function(o){return e.Message.setField(this,1,o)},proto.mediapipe.RenderViewport.prototype.clearId=function(){return e.Message.setField(this,1,void 0)},proto.mediapipe.RenderViewport.prototype.hasId=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.RenderViewport.prototype.getWidthPx=function(){return e.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderViewport.prototype.setWidthPx=function(o){return e.Message.setField(this,2,o)},proto.mediapipe.RenderViewport.prototype.clearWidthPx=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.RenderViewport.prototype.hasWidthPx=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.RenderViewport.prototype.getHeightPx=function(){return e.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.RenderViewport.prototype.setHeightPx=function(o){return e.Message.setField(this,3,o)},proto.mediapipe.RenderViewport.prototype.clearHeightPx=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.RenderViewport.prototype.hasHeightPx=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.RenderViewport.prototype.getComposeOnVideo=function(){return e.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.RenderViewport.prototype.setComposeOnVideo=function(o){return e.Message.setField(this,4,o)},proto.mediapipe.RenderViewport.prototype.clearComposeOnVideo=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.RenderViewport.prototype.hasComposeOnVideo=function(){return e.Message.getField(this,4)!=null},r.object.extend(t,proto.mediapipe)})(o6);Kd={};Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.InteractiveSegmenterResult=void 0;Ky=class{constructor(e,r,n){this.confidenceMasks=e,this.categoryMask=r,this.qualityScores=n}close(){var e,r;(e=this.confidenceMasks)===null||e===void 0||e.forEach((n=>{n.close()})),(r=this.categoryMask)===null||r===void 0||r.close()}};Kd.InteractiveSegmenterResult=Ky;vB={};Object.defineProperty(vB,"__esModule",{value:!0}),(function(t){var e=Je&&Je.__createBinding||(Object.create?function(E,b,_,C){C===void 0&&(C=_);var B=Object.getOwnPropertyDescriptor(b,_);B&&!("get"in B?!b.__esModule:B.writable||B.configurable)||(B={enumerable:!0,get:function(){return b[_]}}),Object.defineProperty(E,C,B)}:function(E,b,_,C){C===void 0&&(C=_),E[C]=b[_]}),r=Je&&Je.__exportStar||function(E,b){for(var _ in E)_==="default"||Object.prototype.hasOwnProperty.call(b,_)||e(b,E,_)};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractiveSegmenter=void 0;let n=bt,i=ht,o=kt,s=o2,p=Zd,l=ko,c=i2,u=o6,d=Kd;r(vB,t),r(Kd,t);let f="image_in",g="norm_rect_in",v="roi_in",A="confidence_masks",m="category_mask",h="quality_scores";class y extends l.VisionTaskRunner{static createFromOptions(b,_){return l.VisionTaskRunner.createVisionInstance(y,b,_)}static createFromModelBuffer(b,_){return l.VisionTaskRunner.createVisionInstance(y,b,{baseOptions:{modelAssetBuffer:_}})}static createFromModelPath(b,_){return l.VisionTaskRunner.createVisionInstance(y,b,{baseOptions:{modelAssetPath:_}})}constructor(b,_){super(new l.VisionGraphRunner(b,_),f,g,!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new s.ImageSegmenterGraphOptions,this.segmenterOptions=new p.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new o.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(b){this.options.setBaseOptions(b)}setOptions(b){var _,C;return"outputCategoryMask"in b&&(this.outputCategoryMask=(_=b.outputCategoryMask)!==null&&_!==void 0&&_),"outputConfidenceMasks"in b&&(this.outputConfidenceMasks=(C=b.outputConfidenceMasks)===null||C===void 0||C),super.applyOptions(b)}segment(b,_,C,B){let R=typeof C!="function"?C:{};return this.userCallback=typeof C=="function"?C:B,this.reset(),this.processRenderData(_,this.getSynctheticTimestamp()),this.processImageData(b,R),this.processResults()}reset(){this.confidenceMasks=void 0,this.categoryMask=void 0,this.qualityScores=void 0}processResults(){try{let b=new d.InteractiveSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return b;this.userCallback(b)}finally{this.freeKeepaliveStreams()}}refreshGraph(){let b=new n.CalculatorGraphConfig;b.addInputStream(f),b.addInputStream(v),b.addInputStream(g);let _=new i.CalculatorOptions;_.setExtension(s.ImageSegmenterGraphOptions.ext,this.options);let C=new n.CalculatorGraphConfig.Node;C.setCalculator("mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),C.addInputStream("IMAGE:"+f),C.addInputStream("ROI:"+v),C.addInputStream("NORM_RECT:"+g),C.setOptions(_),b.addNode(C),this.addKeepaliveNode(b),this.outputConfidenceMasks&&(b.addOutputStream(A),C.addOutputStream("CONFIDENCE_MASKS:"+A),this.keepStreamAlive(A),this.graphRunner.attachImageVectorListener(A,((R,M)=>{this.confidenceMasks=R.map((x=>this.convertToMPMask(x,!this.userCallback))),this.setLatestOutputTimestamp(M)})),this.graphRunner.attachEmptyPacketListener(A,(R=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(R)}))),this.outputCategoryMask&&(b.addOutputStream(m),C.addOutputStream("CATEGORY_MASK:"+m),this.keepStreamAlive(m),this.graphRunner.attachImageListener(m,((R,M)=>{this.categoryMask=this.convertToMPMask(R,!this.userCallback),this.setLatestOutputTimestamp(M)})),this.graphRunner.attachEmptyPacketListener(m,(R=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(R)}))),b.addOutputStream(h),C.addOutputStream("QUALITY_SCORES:"+h),this.graphRunner.attachFloatVectorListener(h,((R,M)=>{this.qualityScores=R,this.setLatestOutputTimestamp(M)})),this.graphRunner.attachEmptyPacketListener(h,(R=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(R)}));let B=b.serializeBinary();this.setGraph(new Uint8Array(B),!0)}processRenderData(b,_){let C=new u.RenderData,B=new u.RenderAnnotation,R=new c.Color;if(R.setR(255),B.setColor(R),b.keypoint&&b.scribble)throw new Error("Cannot provide both keypoint and scribble.");if(b.keypoint){let M=new u.RenderAnnotation.Point;M.setNormalized(!0),M.setX(b.keypoint.x),M.setY(b.keypoint.y),B.setPoint(M)}else{if(!b.scribble)throw new Error("Must provide either a keypoint or a scribble.");{let M=new u.RenderAnnotation.Scribble;for(let x of b.scribble){let T=new u.RenderAnnotation.Point;T.setNormalized(!0),T.setX(x.x),T.setY(x.y),M.addPoint(T)}B.setScribble(M)}}C.addRenderAnnotations(B),this.graphRunner.addProtoToStream(C.serializeBinary(),"mediapipe.RenderData",v,_)}}t.InteractiveSegmenter=y})(r6);i6={},n6={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions",null,n),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions=function(p){e.Message.initialize(this,p,0,-1,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_,null)},r.inherits(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.displayName="proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions"),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_=[5,6],e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject(p,this)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject=function(p,l){var c,u={baseOptions:(c=l.getBaseOptions())&&s.BaseOptions.toObject(p,c),displayNamesLocale:e.Message.getFieldWithDefault(l,2,"en"),maxResults:e.Message.getFieldWithDefault(l,3,-1),scoreThreshold:(c=e.Message.getOptionalFloatingPointField(l,4))==null?void 0:c,categoryAllowlistList:(c=e.Message.getRepeatedField(l,5))==null?void 0:c,categoryDenylistList:(c=e.Message.getRepeatedField(l,6))==null?void 0:c};return p&&(u.$jspbMessageInstance=l),u}),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new s.BaseOptions;l.readMessage(c,s.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readString(),p.setDisplayNamesLocale(c);break;case 3:c=l.readInt32(),p.setMaxResults(c);break;case 4:c=l.readFloat(),p.setScoreThreshold(c);break;case 5:c=l.readString(),p.addCategoryAllowlist(c);break;case 6:c=l.readString(),p.addCategoryDenylist(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,s.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeString(2,c),(c=e.Message.getField(p,3))!=null&&l.writeInt32(3,c),(c=e.Message.getField(p,4))!=null&&l.writeFloat(4,c),(c=p.getCategoryAllowlistList()).length>0&&l.writeRepeatedString(5,c),(c=p.getCategoryDenylistList()).length>0&&l.writeRepeatedString(6,c)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new e.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[443442058]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getDisplayNamesLocale=function(){return e.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setDisplayNamesLocale=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearDisplayNamesLocale=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasDisplayNamesLocale=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getMaxResults=function(){return e.Message.getFieldWithDefault(this,3,-1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setMaxResults=function(p){return e.Message.setField(this,3,p)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearMaxResults=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasMaxResults=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getScoreThreshold=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setScoreThreshold=function(p){return e.Message.setField(this,4,p)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearScoreThreshold=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasScoreThreshold=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryAllowlistList=function(){return e.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryAllowlistList=function(p){return e.Message.setField(this,5,p||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryAllowlist=function(p,l){return e.Message.addToRepeatedField(this,5,p,l)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryDenylistList=function(){return e.Message.getRepeatedField(this,6)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryDenylistList=function(p){return e.Message.setField(this,6,p||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryDenylist=function(p,l){return e.Message.addToRepeatedField(this,6,p,l)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new e.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),o.CalculatorOptions.extensionsBinary[443442058]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.object_detector.proto)})(n6);a6={};Object.defineProperty(a6,"__esModule",{value:!0});EB={};Object.defineProperty(EB,"__esModule",{value:!0}),(function(t){var e=Je&&Je.__createBinding||(Object.create?function(v,A,m,h){h===void 0&&(h=m);var y=Object.getOwnPropertyDescriptor(A,m);y&&!("get"in y?!A.__esModule:y.writable||y.configurable)||(y={enumerable:!0,get:function(){return A[m]}}),Object.defineProperty(v,h,y)}:function(v,A,m,h){h===void 0&&(h=m),v[h]=A[m]}),r=Je&&Je.__exportStar||function(v,A){for(var m in v)m==="default"||Object.prototype.hasOwnProperty.call(A,m)||e(A,v,m)};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDetector=void 0;let n=bt,i=ht,o=qy,s=kt,p=n6,l=Wd,c=ko,u="input_frame_gpu",d="norm_rect",f="detections";r(a6,t),r(EB,t);class g extends c.VisionTaskRunner{static createFromOptions(A,m){return c.VisionTaskRunner.createVisionInstance(g,A,m)}static createFromModelBuffer(A,m){return c.VisionTaskRunner.createVisionInstance(g,A,{baseOptions:{modelAssetBuffer:m}})}static async createFromModelPath(A,m){return c.VisionTaskRunner.createVisionInstance(g,A,{baseOptions:{modelAssetPath:m}})}constructor(A,m){super(new c.VisionGraphRunner(A,m),u,d,!1),this.result={detections:[]},this.options=new p.ObjectDetectorOptions,this.options.setBaseOptions(new s.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(A){this.options.setBaseOptions(A)}setOptions(A){return A.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(A.displayNamesLocale):"displayNamesLocale"in A&&this.options.clearDisplayNamesLocale(),A.maxResults!==void 0?this.options.setMaxResults(A.maxResults):"maxResults"in A&&this.options.clearMaxResults(),A.scoreThreshold!==void 0?this.options.setScoreThreshold(A.scoreThreshold):"scoreThreshold"in A&&this.options.clearScoreThreshold(),A.categoryAllowlist!==void 0?this.options.setCategoryAllowlistList(A.categoryAllowlist):"categoryAllowlist"in A&&this.options.clearCategoryAllowlistList(),A.categoryDenylist!==void 0?this.options.setCategoryDenylistList(A.categoryDenylist):"categoryDenylist"in A&&this.options.clearCategoryDenylistList(),this.applyOptions(A)}detect(A,m){return this.result={detections:[]},this.processImageData(A,m),this.result}detectForVideo(A,m,h){return this.result={detections:[]},this.processVideoData(A,h,m),this.result}addJsObjectDetections(A){for(let m of A){let h=o.Detection.deserializeBinary(m);this.result.detections.push((0,l.convertFromDetectionProto)(h))}}refreshGraph(){let A=new n.CalculatorGraphConfig;A.addInputStream(u),A.addInputStream(d),A.addOutputStream(f);let m=new i.CalculatorOptions;m.setExtension(p.ObjectDetectorOptions.ext,this.options);let h=new n.CalculatorGraphConfig.Node;h.setCalculator("mediapipe.tasks.vision.ObjectDetectorGraph"),h.addInputStream("IMAGE:"+u),h.addInputStream("NORM_RECT:"+d),h.addOutputStream("DETECTIONS:"+f),h.setOptions(m),A.addNode(h),this.graphRunner.attachProtoVectorListener(f,((E,b)=>{this.addJsObjectDetections(E),this.setLatestOutputTimestamp(b)})),this.graphRunner.attachEmptyPacketListener(f,(E=>{this.setLatestOutputTimestamp(E)}));let y=A.serializeBinary();this.setGraph(new Uint8Array(y),!0)}}t.ObjectDetector=g})(i6);s6={},n2={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject=function(p,l){var c,u={baseOptions:(c=l.getBaseOptions())&&s.BaseOptions.toObject(p,c),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(l,2,.5),minSuppressionThreshold:e.Message.getFloatingPointFieldWithDefault(l,3,.5),numPoses:(c=e.Message.getField(l,4))==null?void 0:c};return p&&(u.$jspbMessageInstance=l),u}),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new s.BaseOptions;l.readMessage(c,s.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readFloat(),p.setMinDetectionConfidence(c);break;case 3:c=l.readFloat(),p.setMinSuppressionThreshold(c);break;case 4:c=l.readInt32(),p.setNumPoses(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,s.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeFloat(2,c),(c=e.Message.getField(p,3))!=null&&l.writeFloat(3,c),(c=e.Message.getField(p,4))!=null&&l.writeInt32(4,c)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new e.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[514774813]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinDetectionConfidence=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return e.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(p){return e.Message.setField(this,3,p)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return e.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getNumPoses=function(){return e.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setNumPoses=function(p){return e.Message.setField(this,4,p)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearNumPoses=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasNumPoses=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new e.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[514774813]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.pose_detector.proto)})(n2);p6={},Xy={};(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s),r.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions",null,n),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions=function(p){e.Message.initialize(this,p,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.toObject=function(p){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject(p,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject=function(p,l){var c,u={baseOptions:(c=l.getBaseOptions())&&s.BaseOptions.toObject(p,c),minDetectionConfidence:e.Message.getFloatingPointFieldWithDefault(l,2,.5)};return p&&(u.$jspbMessageInstance=l),u}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinary=function(p){var l=new e.BinaryReader(p),c=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader(c,l)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(p,l){for(;l.nextField()&&!l.isEndGroup();)switch(l.getFieldNumber()){case 1:var c=new s.BaseOptions;l.readMessage(c,s.BaseOptions.deserializeBinaryFromReader),p.setBaseOptions(c);break;case 2:c=l.readFloat(),p.setMinDetectionConfidence(c);break;default:l.skipField()}return p},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var p=new e.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,p),p.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(p,l){var c=void 0;(c=p.getBaseOptions())!=null&&l.writeMessage(1,c,s.BaseOptions.serializeBinaryToWriter),(c=e.Message.getField(p,2))!=null&&l.writeFloat(2,c)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[518928384]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(p){return e.Message.setWrapperField(this,1,p)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(p){return e.Message.setField(this,2,p)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return e.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new e.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[518928384]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.pose_landmarker.proto)})(Xy),(function(t){var e=Ve,r=e,n=typeof globalThis<"u"&&globalThis||typeof window<"u"&&window||n!==void 0&&n||typeof self<"u"&&self||function(){return this}.call(null)||Function("return this")(),i=bt;r.object.extend(proto,i);var o=ht;r.object.extend(proto,o);var s=kt;r.object.extend(proto,s);var p=n2;r.object.extend(proto,p);var l=Xy;r.object.extend(proto,l),r.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions",null,n),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions=function(c){e.Message.initialize(this,c,0,-1,null,null)},r.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,e.Message),r.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions"),e.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.toObject=function(c){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject(c,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject=function(c,u){var d,f={baseOptions:(d=u.getBaseOptions())&&s.BaseOptions.toObject(c,d),poseDetectorGraphOptions:(d=u.getPoseDetectorGraphOptions())&&p.PoseDetectorGraphOptions.toObject(c,d),poseLandmarksDetectorGraphOptions:(d=u.getPoseLandmarksDetectorGraphOptions())&&l.PoseLandmarksDetectorGraphOptions.toObject(c,d),minTrackingConfidence:e.Message.getFloatingPointFieldWithDefault(u,4,.5)};return c&&(f.$jspbMessageInstance=u),f}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinary=function(c){var u=new e.BinaryReader(c),d=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader(d,u)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader=function(c,u){for(;u.nextField()&&!u.isEndGroup();)switch(u.getFieldNumber()){case 1:var d=new s.BaseOptions;u.readMessage(d,s.BaseOptions.deserializeBinaryFromReader),c.setBaseOptions(d);break;case 2:d=new p.PoseDetectorGraphOptions,u.readMessage(d,p.PoseDetectorGraphOptions.deserializeBinaryFromReader),c.setPoseDetectorGraphOptions(d);break;case 3:d=new l.PoseLandmarksDetectorGraphOptions,u.readMessage(d,l.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader),c.setPoseLandmarksDetectorGraphOptions(d);break;case 4:d=u.readFloat(),c.setMinTrackingConfidence(d);break;default:u.skipField()}return c},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.serializeBinary=function(){var c=new e.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter(this,c),c.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter=function(c,u){var d=void 0;(d=c.getBaseOptions())!=null&&u.writeMessage(1,d,s.BaseOptions.serializeBinaryToWriter),(d=c.getPoseDetectorGraphOptions())!=null&&u.writeMessage(2,d,p.PoseDetectorGraphOptions.serializeBinaryToWriter),(d=c.getPoseLandmarksDetectorGraphOptions())!=null&&u.writeMessage(3,d,l.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter),(d=e.Message.getField(c,4))!=null&&u.writeFloat(4,d)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[516587230]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getBaseOptions=function(){return e.Message.getWrapperField(this,s.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setBaseOptions=function(c){return e.Message.setWrapperField(this,1,c)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return e.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseDetectorGraphOptions=function(){return e.Message.getWrapperField(this,p.PoseDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseDetectorGraphOptions=function(c){return e.Message.setWrapperField(this,2,c)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseDetectorGraphOptions=function(){return this.setPoseDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseDetectorGraphOptions=function(){return e.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseLandmarksDetectorGraphOptions=function(){return e.Message.getWrapperField(this,l.PoseLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseLandmarksDetectorGraphOptions=function(c){return e.Message.setWrapperField(this,3,c)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseLandmarksDetectorGraphOptions=function(){return this.setPoseLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseLandmarksDetectorGraphOptions=function(){return e.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return e.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(c){return e.Message.setField(this,4,c)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return e.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return e.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new e.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),o.CalculatorOptions.extensionsBinary[516587230]=new e.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,e.BinaryReader.prototype.readMessage,e.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),o.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,r.object.extend(t,proto.mediapipe.tasks.vision.pose_landmarker.proto)})(p6);Xd={};Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.PoseLandmarkerResult=void 0;Jy=class{constructor(e,r,n){this.landmarks=e,this.worldLandmarks=r,this.segmentationMasks=n}close(){var e;(e=this.segmentationMasks)===null||e===void 0||e.forEach((r=>{r.close()}))}};Xd.PoseLandmarkerResult=Jy;bB={};Object.defineProperty(bB,"__esModule",{value:!0}),(function(t){var e=Je&&Je.__createBinding||(Object.create?function(b,_,C,B){B===void 0&&(B=C);var R=Object.getOwnPropertyDescriptor(_,C);R&&!("get"in R?!_.__esModule:R.writable||R.configurable)||(R={enumerable:!0,get:function(){return _[C]}}),Object.defineProperty(b,B,R)}:function(b,_,C,B){B===void 0&&(B=C),b[B]=_[C]}),r=Je&&Je.__exportStar||function(b,_){for(var C in b)C==="default"||Object.prototype.hasOwnProperty.call(_,C)||e(_,b,C)};Object.defineProperty(t,"__esModule",{value:!0}),t.PoseLandmarker=void 0;let n=bt,i=ht,o=qd,s=kt,p=n2,l=p6,c=Xy,u=Qa,d=ko,f=Xd;r(bB,t),r(Xd,t);let g="image_in",v="norm_rect",A="normalized_landmarks",m="world_landmarks",h="segmentation_masks",y=.5;class E extends d.VisionTaskRunner{static createFromOptions(_,C){return d.VisionTaskRunner.createVisionInstance(E,_,C)}static createFromModelBuffer(_,C){return d.VisionTaskRunner.createVisionInstance(E,_,{baseOptions:{modelAssetBuffer:C}})}static createFromModelPath(_,C){return d.VisionTaskRunner.createVisionInstance(E,_,{baseOptions:{modelAssetPath:C}})}constructor(_,C){super(new d.VisionGraphRunner(_,C),g,v,!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,this.options=new l.PoseLandmarkerGraphOptions,this.options.setBaseOptions(new s.BaseOptions),this.poseLandmarksDetectorGraphOptions=new c.PoseLandmarksDetectorGraphOptions,this.options.setPoseLandmarksDetectorGraphOptions(this.poseLandmarksDetectorGraphOptions),this.poseDetectorGraphOptions=new p.PoseDetectorGraphOptions,this.options.setPoseDetectorGraphOptions(this.poseDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(_){this.options.setBaseOptions(_)}setOptions(_){var C,B,R,M,x;return"numPoses"in _&&this.poseDetectorGraphOptions.setNumPoses((C=_.numPoses)!==null&&C!==void 0?C:1),"minPoseDetectionConfidence"in _&&this.poseDetectorGraphOptions.setMinDetectionConfidence((B=_.minPoseDetectionConfidence)!==null&&B!==void 0?B:y),"minTrackingConfidence"in _&&this.options.setMinTrackingConfidence((R=_.minTrackingConfidence)!==null&&R!==void 0?R:y),"minPosePresenceConfidence"in _&&this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence((M=_.minPosePresenceConfidence)!==null&&M!==void 0?M:y),"outputSegmentationMasks"in _&&(this.outputSegmentationMasks=(x=_.outputSegmentationMasks)!==null&&x!==void 0&&x),this.applyOptions(_)}detect(_,C,B){let R=typeof C!="function"?C:{};return this.userCallback=typeof C=="function"?C:B,this.resetResults(),this.processImageData(_,R),this.processResults()}detectForVideo(_,C,B,R){let M=typeof B!="function"?B:{};return this.userCallback=typeof B=="function"?B:R,this.resetResults(),this.processVideoData(_,M,C),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.segmentationMasks=void 0}processResults(){try{let _=new f.PoseLandmarkerResult(this.landmarks,this.worldLandmarks,this.segmentationMasks);if(!this.userCallback)return _;this.userCallback(_)}finally{this.freeKeepaliveStreams()}}initDefaults(){this.poseDetectorGraphOptions.setNumPoses(1),this.poseDetectorGraphOptions.setMinDetectionConfidence(y),this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence(y),this.options.setMinTrackingConfidence(y)}addJsLandmarks(_){this.landmarks=[];for(let C of _){let B=o.NormalizedLandmarkList.deserializeBinary(C);this.landmarks.push((0,u.convertToLandmarks)(B))}}adddJsWorldLandmarks(_){this.worldLandmarks=[];for(let C of _){let B=o.LandmarkList.deserializeBinary(C);this.worldLandmarks.push((0,u.convertToWorldLandmarks)(B))}}refreshGraph(){let _=new n.CalculatorGraphConfig;_.addInputStream(g),_.addInputStream(v),_.addOutputStream(A),_.addOutputStream(m),_.addOutputStream(h);let C=new i.CalculatorOptions;C.setExtension(l.PoseLandmarkerGraphOptions.ext,this.options);let B=new n.CalculatorGraphConfig.Node;B.setCalculator("mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),B.addInputStream("IMAGE:"+g),B.addInputStream("NORM_RECT:"+v),B.addOutputStream("NORM_LANDMARKS:"+A),B.addOutputStream("WORLD_LANDMARKS:"+m),B.setOptions(C),_.addNode(B),this.addKeepaliveNode(_),this.graphRunner.attachProtoVectorListener(A,((M,x)=>{this.addJsLandmarks(M),this.setLatestOutputTimestamp(x)})),this.graphRunner.attachEmptyPacketListener(A,(M=>{this.landmarks=[],this.setLatestOutputTimestamp(M)})),this.graphRunner.attachProtoVectorListener(m,((M,x)=>{this.adddJsWorldLandmarks(M),this.setLatestOutputTimestamp(x)})),this.graphRunner.attachEmptyPacketListener(m,(M=>{this.worldLandmarks=[],this.setLatestOutputTimestamp(M)})),this.outputSegmentationMasks&&(B.addOutputStream("SEGMENTATION_MASK:"+h),this.keepStreamAlive(h),this.graphRunner.attachImageVectorListener(h,((M,x)=>{this.segmentationMasks=M.map((T=>this.convertToMPMask(T,!this.userCallback))),this.setLatestOutputTimestamp(x)})),this.graphRunner.attachEmptyPacketListener(h,(M=>{this.segmentationMasks=[],this.setLatestOutputTimestamp(M)})));let R=_.serializeBinary();this.setGraph(new Uint8Array(R),!0)}}t.PoseLandmarker=E,E.POSE_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:7},{start:0,end:4},{start:4,end:5},{start:5,end:6},{start:6,end:8},{start:9,end:10},{start:11,end:12},{start:11,end:13},{start:13,end:15},{start:15,end:17},{start:15,end:19},{start:15,end:21},{start:17,end:19},{start:12,end:14},{start:14,end:16},{start:16,end:18},{start:16,end:20},{start:16,end:22},{start:18,end:20},{start:11,end:23},{start:12,end:24},{start:23,end:24},{start:23,end:25},{start:24,end:26},{start:25,end:27},{start:26,end:28},{start:27,end:29},{start:28,end:30},{start:29,end:31},{start:30,end:32},{start:27,end:31},{start:28,end:32}]})(s6),Object.defineProperty(Mt,"__esModule",{value:!0});l6=Mt.PoseLandmarker=C6=Mt.ObjectDetector=_6=Mt.InteractiveSegmenter=b6=Mt.ImageSegmenter=E6=Mt.ImageEmbedder=v6=Mt.ImageClassifier=y6=Mt.HandLandmarker=A6=Mt.GestureRecognizer=m6=Mt.FaceStylizer=h6=Mt.FaceLandmarker=g6=Mt.FaceDetector=f6=Mt.MPMask=u6=Mt.MPImage=d6=Mt.FilesetResolver=c6=Mt.DrawingUtils=void 0,BN=Hg,xN=Qg,MN=Hd,wN=Qd,TN=CB,SN=FB,IN=zB,FN=UB,ON=QB,DN=VB,kN=JB,LN=e6,PN=r6,GN=i6,zN=s6,NN=xN.DrawingUtils,c6=Mt.DrawingUtils=NN,UN=BN.FilesetResolver,d6=Mt.FilesetResolver=UN,jN=MN.MPImage,u6=Mt.MPImage=jN,HN=wN.MPMask,f6=Mt.MPMask=HN,QN=TN.FaceDetector,g6=Mt.FaceDetector=QN,WN=SN.FaceLandmarker,h6=Mt.FaceLandmarker=WN,VN=IN.FaceStylizer,m6=Mt.FaceStylizer=VN,YN=FN.GestureRecognizer,A6=Mt.GestureRecognizer=YN,KN=ON.HandLandmarker,y6=Mt.HandLandmarker=KN,XN=DN.ImageClassifier,v6=Mt.ImageClassifier=XN,JN=kN.ImageEmbedder,E6=Mt.ImageEmbedder=JN,qN=LN.ImageSegmenter,b6=Mt.ImageSegmenter=qN,ZN=PN.InteractiveSegmenter,_6=Mt.InteractiveSegmenter=ZN,$N=GN.ObjectDetector,C6=Mt.ObjectDetector=$N,eU=zN.PoseLandmarker;l6=Mt.PoseLandmarker=eU});var C2=ss((b2,_2)=>{(function(t,e){typeof b2=="object"&&typeof _2<"u"?_2.exports=e():typeof define=="function"&&define.amd?define(e):t.Stats=e()})(b2,function(){var t=function(){function e(d){return i.appendChild(d.dom),d}function r(d){for(var f=0;f<i.children.length;f++)i.children[f].style.display=f===d?"block":"none";n=d}var n=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(d){d.preventDefault(),r(++n%i.children.length)},!1);var o=(performance||Date).now(),s=o,p=0,l=e(new t.Panel("FPS","#0ff","#002")),c=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:i,addPanel:e,showPanel:r,begin:function(){o=(performance||Date).now()},end:function(){p++;var d=(performance||Date).now();if(c.update(d-o,200),d>s+1e3&&(l.update(1e3*p/(d-s),100),s=d,p=0,u)){var f=performance.memory;u.update(f.usedJSHeapSize/1048576,f.jsHeapSizeLimit/1048576)}return d},update:function(){o=this.end()},domElement:i,setMode:r}};return t.Panel=function(e,r,n){var i=1/0,o=0,s=Math.round,p=s(window.devicePixelRatio||1),l=80*p,c=48*p,u=3*p,d=2*p,f=3*p,g=15*p,v=74*p,A=30*p,m=document.createElement("canvas");m.width=l,m.height=c,m.style.cssText="width:80px;height:48px";var h=m.getContext("2d");return h.font="bold "+9*p+"px Helvetica,Arial,sans-serif",h.textBaseline="top",h.fillStyle=n,h.fillRect(0,0,l,c),h.fillStyle=r,h.fillText(e,u,d),h.fillRect(f,g,v,A),h.fillStyle=n,h.globalAlpha=.9,h.fillRect(f,g,v,A),{dom:m,update:function(y,E){i=Math.min(i,y),o=Math.max(o,y),h.fillStyle=n,h.globalAlpha=1,h.fillRect(0,0,l,g),h.fillStyle=r,h.fillText(s(y)+" "+e+" ("+s(i)+"-"+s(o)+")",u,d),h.drawImage(m,f+p,g,v-p,A,f,g,v-p,A),h.fillRect(f+v-p,g,p,A),h.fillStyle=n,h.globalAlpha=.9,h.fillRect(f+v-p,g,p,s((1-y/E)*A))}}},t})});var y5=ss((Mfe,A5)=>{"use strict";var vY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";A5.exports=vY});var _5=ss((wfe,b5)=>{"use strict";var EY=y5();function v5(){}function E5(){}E5.resetWarningCache=v5;b5.exports=function(){function t(n,i,o,s,p,l){if(l!==EY){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:E5,resetWarningCache:v5};return r.PropTypes=r,r}});var R5=ss((Ife,C5)=>{C5.exports=_5()();var Tfe,Sfe});function te(){return te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},te.apply(null,arguments)}import*as Et from"react";import*as rv from"react-dom/client";import{Vector3 as Ru,DoubleSide as rw,OrthographicCamera as ov,PerspectiveCamera as iv}from"three";import{useThree as ow,useFrame as iw}from"@react-three/fiber";var Jl=new Ru,Rm=new Ru,nw=new Ru;function aw(t,e,r){let n=Jl.setFromMatrixPosition(t.matrixWorld);n.project(e);let i=r.width/2,o=r.height/2;return[n.x*i+i,-(n.y*o)+o]}function sw(t,e){let r=Jl.setFromMatrixPosition(t.matrixWorld),n=Rm.setFromMatrixPosition(e.matrixWorld),i=r.sub(n),o=e.getWorldDirection(nw);return i.angleTo(o)>Math.PI/2}function pw(t,e,r,n){let i=Jl.setFromMatrixPosition(t.matrixWorld),o=i.clone();o.project(e),r.setFromCamera(o,e);let s=r.intersectObjects(n,!0);if(s.length){let p=s[0].distance;return i.distanceTo(r.ray.origin)<p}return!0}function lw(t,e){if(e instanceof ov)return e.zoom;if(e instanceof iv){let r=Jl.setFromMatrixPosition(t.matrixWorld),n=Rm.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,o=r.distanceTo(n);return 1/(2*Math.tan(i/2)*o)}else return 1}function cw(t,e,r){if(e instanceof iv||e instanceof ov){let n=Jl.setFromMatrixPosition(t.matrixWorld),i=Rm.setFromMatrixPosition(e.matrixWorld),o=n.distanceTo(i),s=(r[1]-r[0])/(e.far-e.near),p=r[1]-s*e.far;return Math.round(s*o+p)}}var Cm=t=>Math.abs(t)<1e-10?0:t;function nv(t,e,r=""){let n="matrix3d(";for(let i=0;i!==16;i++)n+=Cm(e[i]*t.elements[i])+(i!==15?",":")");return r+n}var dw=(t=>e=>nv(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),uw=(t=>(e,r)=>nv(e,t(r),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function fw(t){return t&&typeof t=="object"&&"current"in t}var ps=Et.forwardRef(({children:t,eps:e=.001,style:r,className:n,prepend:i,center:o,fullscreen:s,portal:p,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:d,onOcclude:f,castShadow:g,receiveShadow:v,material:A,geometry:m,zIndexRange:h=[16777271,0],calculatePosition:y=aw,as:E="div",wrapperClass:b,pointerEvents:_="auto",...C},B)=>{let{gl:R,camera:M,scene:x,size:T,raycaster:w,events:S,viewport:I}=ow(),[G]=Et.useState(()=>document.createElement(E)),H=Et.useRef(),X=Et.useRef(null),Z=Et.useRef(0),z=Et.useRef([0,0]),Y=Et.useRef(null),L=Et.useRef(null),Q=p?.current||S.connected||R.domElement.parentNode,V=Et.useRef(null),N=Et.useRef(!1),P=Et.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&fw(d[0]),[d]);Et.useLayoutEffect(()=>{let ae=R.domElement;d&&d==="blending"?(ae.style.zIndex=`${Math.floor(h[0]/2)}`,ae.style.position="absolute",ae.style.pointerEvents="none"):(ae.style.zIndex=null,ae.style.position=null,ae.style.pointerEvents=null)},[d]),Et.useLayoutEffect(()=>{if(X.current){let ae=H.current=rv.createRoot(G);if(x.updateMatrixWorld(),u)G.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let K=y(X.current,M,T);G.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${K[0]}px,${K[1]}px,0);transform-origin:0 0;`}return Q&&(i?Q.prepend(G):Q.appendChild(G)),()=>{Q&&Q.removeChild(G),ae.unmount()}}},[Q,u]),Et.useLayoutEffect(()=>{b&&(G.className=b)},[b]);let k=Et.useMemo(()=>u?{position:"absolute",top:0,left:0,width:T.width,height:T.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...s&&{top:-T.height/2,left:-T.width/2,width:T.width,height:T.height},...r},[r,o,s,T,u]),O=Et.useMemo(()=>({position:"absolute",pointerEvents:_}),[_]);Et.useLayoutEffect(()=>{if(N.current=!1,u){var ae;(ae=H.current)==null||ae.render(Et.createElement("div",{ref:Y,style:k},Et.createElement("div",{ref:L,style:O},Et.createElement("div",{ref:B,className:n,style:r,children:t}))))}else{var K;(K=H.current)==null||K.render(Et.createElement("div",{ref:B,style:k,className:n,children:t}))}});let D=Et.useRef(!0);iw(ae=>{if(X.current){M.updateMatrixWorld(),X.current.updateWorldMatrix(!0,!1);let K=u?z.current:y(X.current,M,T);if(u||Math.abs(Z.current-M.zoom)>e||Math.abs(z.current[0]-K[0])>e||Math.abs(z.current[1]-K[1])>e){let re=sw(X.current,M),he=!1;P&&(Array.isArray(d)?he=d.map(ce=>ce.current):d!=="blending"&&(he=[x]));let me=D.current;if(he){let ce=pw(X.current,M,w,he);D.current=ce&&!re}else D.current=!re;me!==D.current&&(f?f(!D.current):G.style.display=D.current?"block":"none");let J=Math.floor(h[0]/2),oe=d?P?[h[0],J]:[J-1,0]:h;if(G.style.zIndex=`${cw(X.current,M,oe)}`,u){let[ce,ie]=[T.width/2,T.height/2],W=M.projectionMatrix.elements[5]*ie,{isOrthographicCamera:j,top:ne,left:ve,bottom:Ce,right:we}=M,be=dw(M.matrixWorldInverse),Qe=j?`scale(${W})translate(${Cm(-(we+ve)/2)}px,${Cm((ne+Ce)/2)}px)`:`translateZ(${W}px)`,Le=X.current.matrixWorld;c&&(Le=M.matrixWorldInverse.clone().transpose().copyPosition(Le).scale(X.current.scale),Le.elements[3]=Le.elements[7]=Le.elements[11]=0,Le.elements[15]=1),G.style.width=T.width+"px",G.style.height=T.height+"px",G.style.perspective=j?"":`${W}px`,Y.current&&L.current&&(Y.current.style.transform=`${Qe}${be}translate(${ce}px,${ie}px)`,L.current.style.transform=uw(Le,1/((l||10)/400)))}else{let ce=l===void 0?1:lw(X.current,M)*l;G.style.transform=`translate3d(${K[0]}px,${K[1]}px,0) scale(${ce})`}z.current=K,Z.current=M.zoom}}if(!P&&V.current&&!N.current)if(u){if(Y.current){let K=Y.current.children[0];if(K!=null&&K.clientWidth&&K!=null&&K.clientHeight){let{isOrthographicCamera:re}=M;if(re||m)C.scale&&(Array.isArray(C.scale)?C.scale instanceof Ru?V.current.scale.copy(C.scale.clone().divideScalar(1)):V.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):V.current.scale.setScalar(1/C.scale));else{let he=(l||10)/400,me=K.clientWidth*he,J=K.clientHeight*he;V.current.scale.set(me,J,1)}N.current=!0}}}else{let K=G.children[0];if(K!=null&&K.clientWidth&&K!=null&&K.clientHeight){let re=1/I.factor,he=K.clientWidth*re,me=K.clientHeight*re;V.current.scale.set(he,me,1),N.current=!0}V.current.lookAt(ae.camera.position)}});let q=Et.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return Et.createElement("group",te({},C,{ref:X}),d&&!P&&Et.createElement("mesh",{castShadow:g,receiveShadow:v,ref:V},m||Et.createElement("planeGeometry",null),A||Et.createElement("shaderMaterial",{side:rw,vertexShader:q.vertexShader,fragmentShader:q.fragmentShader})))});import*as Bu from"react";import{useThree as Bm}from"@react-three/fiber";function gw({onChanged:t,portal:e,preventDefault:r=!0,scroll:n=!0,keyCode:i=9}){let o=Bu.useRef(0),s=Bm(c=>c.setEvents),p=Bm(c=>c.get),l=Bm(c=>c.gl);return Bu.useEffect(()=>{var c;let u=[],d,f=p().events.filter,g=(c=e?.current)!==null&&c!==void 0?c:l.domElement.parentNode,v=()=>g&&t&&t(u,Math.round(o.current)%u.length);s({filter:(E,b)=>{let _=[...E];(_.length!==u.length||!u.every(C=>_.map(B=>B.object.uuid).includes(C.object.uuid)))&&(o.current=0,u=_,v()),f&&(_=f(_,b));for(let C=0;C<Math.round(o.current)%_.length;C++){let B=_.shift();_=[..._,B]}return _}});let A=E=>{var b,_;o.current=E(o.current),(b=p().events.handlers)==null||b.onPointerCancel(void 0),(_=p().events.handlers)==null||_.onPointerMove(d),v()},m=E=>{(E.keyCode||E.which===i)&&(r&&E.preventDefault(),u.length>1&&A(b=>b+1))},h=E=>{r&&E.preventDefault();let b=0;E||(E=window.event),E.wheelDelta?b=E.wheelDelta/120:E.detail&&(b=-E.detail/3),u.length>1&&A(_=>Math.abs(_-b))},y=E=>d=E;return document.addEventListener("pointermove",y,{passive:!0}),n&&document.addEventListener("wheel",h),i!==void 0&&document.addEventListener("keydown",m),()=>{s({filter:f}),i!==void 0&&document.removeEventListener("keydown",m),n&&document.removeEventListener("wheel",h),document.removeEventListener("pointermove",y)}},[l,p,s,r,n,i]),null}import*as av from"react";function hw(t,e="pointer",r="auto",n=document.body){av.useEffect(()=>{if(t)return n.style.cursor=e,()=>void(n.style.cursor=r)},[t])}import*as go from"react";import{DefaultLoadingManager as Mu}from"three";import{useReducer as mw,useRef as sp,useDebugValue as Aw,useEffect as yw,useLayoutEffect as vw}from"react";function Ew(t){let e,r=new Set,n=(c,u)=>{let d=typeof c=="function"?c(e):c;if(d!==e){let f=e;e=u?d:Object.assign({},e,d),r.forEach(g=>g(e,f))}},i=()=>e,o=(c,u=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=u(e);function g(){let v=u(e);if(!d(f,v)){let A=f;c(f=v,A)}}return r.add(g),()=>r.delete(g)},l={setState:n,getState:i,subscribe:(c,u,d)=>u||d?o(c,u,d):(r.add(c),()=>r.delete(c)),destroy:()=>r.clear()};return e=t(n,i,l),l}var bw=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),sv=bw?yw:vw;function xu(t){let e=typeof t=="function"?Ew(t):t,r=(n=e.getState,i=Object.is)=>{let[,o]=mw(m=>m+1,0),s=e.getState(),p=sp(s),l=sp(n),c=sp(i),u=sp(!1),d=sp();d.current===void 0&&(d.current=n(s));let f,g=!1;(p.current!==s||l.current!==n||c.current!==i||u.current)&&(f=n(s),g=!i(d.current,f)),sv(()=>{g&&(d.current=f),p.current=s,l.current=n,c.current=i,u.current=!1});let v=sp(s);sv(()=>{let m=()=>{try{let y=e.getState(),E=l.current(y);c.current(d.current,E)||(p.current=y,d.current=E,o())}catch{u.current=!0,o()}},h=e.subscribe(m);return e.getState()!==v.current&&m(),h},[]);let A=g?f:d.current;return Aw(A),A};return Object.assign(r,e),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let n=[r,e];return{next(){let i=n.length<=0;return{value:n.shift(),done:i}}}},r}var ql=0,xm=xu(t=>(Mu.onStart=(e,r,n)=>{t({active:!0,item:e,loaded:r,total:n,progress:(r-ql)/(n-ql)*100})},Mu.onLoad=()=>{t({active:!1})},Mu.onError=e=>t(r=>({errors:[...r.errors,e]})),Mu.onProgress=(e,r,n)=>{r===n&&(ql=n),t({active:!0,item:e,loaded:r,total:n,progress:(r-ql)/(n-ql)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));var _w=t=>`Loading ${t.toFixed(2)}%`;function Cw({containerStyles:t,innerStyles:e,barStyles:r,dataStyles:n,dataInterpolation:i=_w,initialState:o=s=>s}){let{active:s,progress:p}=xm(),l=go.useRef(0),c=go.useRef(0),u=go.useRef(null),[d,f]=go.useState(o(s));go.useEffect(()=>{let v;return s!==d&&(v=setTimeout(()=>f(s),300)),()=>clearTimeout(v)},[d,s]);let g=go.useCallback(()=>{u.current&&(l.current+=(p-l.current)/2,(l.current>.95*p||p===100)&&(l.current=p),u.current.innerText=i(l.current),l.current<p&&(c.current=requestAnimationFrame(g)))},[i,p]);return go.useEffect(()=>(g(),()=>cancelAnimationFrame(c.current)),[g]),d?go.createElement("div",{style:{...wu.container,opacity:s?1:0,...t}},go.createElement("div",null,go.createElement("div",{style:{...wu.inner,...e}},go.createElement("div",{style:{...wu.bar,transform:`scaleX(${p/100})`,...r}}),go.createElement("span",{ref:u,style:{...wu.data,...n}})))):null}var wu={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};import*as Pt from"react";import*as tE from"react-dom/client";import{useThree as Gm,useFrame as zm,context as eE}from"@react-three/fiber";function Rw(t){return function(e){t.forEach(function(r){typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var tt=Rw;function pp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zl(t,e){return Zl=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Zl(t,e)}function Mm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}import{Vector2 as Sm,Matrix4 as NK}from"three";import{Matrix3 as Bw}from"three";function pv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],i=e[1],o=e[2],s=e[3],p=e[4],l=e[5],c=e[6],u=e[7],d=e[8];return n*p*d+i*l*c+o*s*u-o*p*c-i*s*d-n*l*u}function wm(t,e){for(var r=[],n=t.toArray(),i=e.toArray(),o=0;o<n.length;o++)r[o]=n[o]+i[o];return new Bw().fromArray(r)}function xw(t){if(Array.isArray(t))return t}function Mw(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],i=!0,o=!1,s,p;try{for(r=r.call(t);!(i=(s=r.next()).done)&&(n.push(s.value),!(e&&n.length===e));i=!0);}catch(l){o=!0,p=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(o)throw p}}return n}}function Tm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lv(t,e){if(t){if(typeof t=="string")return Tm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tm(t,e)}}function ww(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xi(t,e){return xw(t)||Mw(t,e)||lv(t,e)||ww()}function Tw(t){if(Array.isArray(t))return Tm(t)}function Sw(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Iw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lp(t){return Tw(t)||Sw(t)||lv(t)||Iw()}function Tu(t,e,r){return Mm()?Tu=Reflect.construct:Tu=function(i,o,s){var p=[null];p.push.apply(p,o);var l=Function.bind.apply(i,p),c=new l;return s&&Zl(c,s.prototype),c},Tu.apply(null,arguments)}function Fw(t){var e=xi(t[0],2),r=e[0],n=e[1],i=xi(t[1],2),o=i[0],s=i[1],p=xi(t[2],2),l=p[0],c=p[1];return pv(r,n,1,o,s,1,l,c,1)}function Ow(t){return Fw(t)===0}var Dw=new Sm,kw=new Sm;function Im(t){var e=t.map(function(c){return Array.isArray(c)?Tu(Sm,lp(c)):c}),r=xi(e,3),n=r[0],i=r[1],o=r[2];if(Ow(t))return!1;var s=Dw.subVectors(i,n),p=kw.subVectors(o,n),l=p.cross(s);return l>0}import{Quaternion as tX,Vector3 as rX}from"three";import{Vector3 as Om,Matrix3 as Fm}from"three";function cv(t,e,r){return Math.max(e,Math.min(r,t))}function dv(t,e){return cv(t-Math.floor(t/e)*e,0,e)}function Dm(t,e){var r=dv(e-t,Math.PI*2);return r>Math.PI&&(r-=Math.PI*2),r}function Lw(t){return t/180*Math.PI}function Pw(t){return t*180/Math.PI}function Gw(t,e){for(var r=e.radius,n=r===void 0?1:r,i=t.length/3,o=2/i,s=Math.PI*(3-2.2360679775),p=0;p<t.length;p+=3){var l=p*o-1+o/2,c=Math.sqrt(1-Math.pow(l,2)),u=p%i*s,d=Math.cos(u)*c,f=Math.sin(u)*c;t[p]=d*n,t[p+1]=l*n,t[p+2]=f*n}}function zw(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(t.x-e.x)<r&&Math.abs(t.y-e.y)<r&&Math.abs(t.z-e.z)<r}function uv(t,e){return t.x===e.x?typeof t.z<"u"&&t.y===e.y?t.z-e.z:t.y-e.y:t.x-e.x}function Nw(t){for(var e=t.sort(uv),r=[e[0],e[1]],n=2;n<e.length;n++)for(r.push(e[n]);r.length>2&&Im(lp(r.slice(-3)));)r.splice(r.length-2,1);for(var i=[e[e.length-1],e[e.length-2]],o=e.length-3;o>=0;o--)for(i.push(e[o]);i.length>2&&Im(lp(i.slice(-3)));)i.splice(i.length-2,1);i.splice(0,1),i.splice(i.length-1,1);var s=[].concat(r,i);return s}function Uw(t,e,r){var n=xi(e,2),i=n[0],o=n[1],s=xi(r,2),p=s[0],l=s[1];return p+(t-i)*(l-p)/(o-i)}function fv(t){return t*t*t*(t*(t*6-15)+10)}function km(t,e,r){return t*(1-r)+e*r}function gv(t,e,r){return(r-t)/(e-t)}function jw(t,e,r){var n=Math.sqrt(t*t+e*e+r*r);return[t/n,e/n,r/n]}function Hw(t,e,r){var n=t*t,i=e*e,o=r*r,s=t*Math.sqrt(1-(i+o)/2+i*o/3),p=e*Math.sqrt(1-(o+n)/2+o*n/3),l=r*Math.sqrt(1-(n+i)/2+n*i/3);return[s,p,l]}function hv(t,e){var r=new Om().crossVectors(t,e),n=t.dot(e),i=new Fm().identity(),o=new Fm().set(0,-r.z,r.y,r.z,0,-r.x,-r.y,r.x,0),s=new Fm().multiplyMatrices(o,o).multiplyScalar(1/(1+n)),p=wm(wm(i,o),s);return p}function Qw(t,e,r){var n=Math.asin(e),i=Math.atan2(t,-r);return[n,i]}function Ww(t,e){var r=Math.sin(t),n=Math.cos(t),i=Math.sin(e)*n,o=-Math.cos(e)*n;return[i,r,o]}function Vw(t,e){var r=xi(e,2),n=r[0],i=r[1],o=hv(t.normal,new Om(0,1,0)),s=gv(n.clone().applyMatrix3(o).y,i.clone().applyMatrix3(o).y,0);return new Om().lerpVectors(n,i,s)}function Yw(t,e){var r=e.normal.dot(t);return r}function Kw(t,e){var r=xi(t,3),n=r[0],i=r[1],o=r[2],s=xi(e,2),p=s[0],l=s[1];return o*p*l+i*p+n}function Xw(t,e){var r=xi(e,2),n=r[0],i=r[1],o=n*i,s=t/o,p=t-o*s,l=p/n,c=p%n;return[c,l,s]}function Jw(t,e){return t[0]+e[0]*t[1]}function qw(t,e){var r=t%e,n=Math.floor(t/e);return[r,n]}var $l=Object.freeze({__proto__:null,clamp:cv,repeat:dv,deltaAngle:Dm,degToRad:Lw,radToDeg:Pw,fibonacciOnSphere:Gw,vectorEquals:zw,lexicographic:uv,convexHull:Nw,remap:Uw,fade:fv,lerp:km,inverseLerp:gv,normalize:jw,pointOnCubeToPointOnSphere:Hw,rotateVectorOnVector:hv,pointToCoordinate:Qw,coordinateToPoint:Ww,planeSegmentIntersection:Vw,pointToPlaneDistance:Yw,getIndexFrom3D:Kw,get3DFromIndex:Xw,getIndexFrom2D:Jw,get2DFromIndex:qw});function Su(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Mi=function t(e,r,n){var i=this;Su(this,t),pp(this,"dot2",function(o,s){return i.x*o+i.y*s}),pp(this,"dot3",function(o,s,p){return i.x*o+i.y*s+i.z*p}),this.x=e,this.y=r,this.z=n},$w=[new Mi(1,1,0),new Mi(-1,1,0),new Mi(1,-1,0),new Mi(-1,-1,0),new Mi(1,0,1),new Mi(-1,0,1),new Mi(1,0,-1),new Mi(-1,0,-1),new Mi(0,1,1),new Mi(0,-1,1),new Mi(0,1,-1),new Mi(0,-1,-1)],mv=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Av=new Array(512),yv=new Array(512),eT=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var r=0;r<256;r++){var n;r&1?n=mv[r]^e&255:n=mv[r]^e>>8&255,Av[r]=Av[r+256]=n,yv[r]=yv[r+256]=$w[n%12]}};eT(0);var dX=.5*(Math.sqrt(3)-1),uX=(3-Math.sqrt(3))/6,fX=1/3,gX=1/6;var hX=Math.PI*2;function tT(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var e=t;t=0;for(var r=0;r<e.length;r++)t=(t+(r+1)*(e.charCodeAt(r)%96))%2147483647}return t===0&&(t=311),t}function vv(t){var e=tT(t);return function(){var r=e*48271%2147483647;return e=r,r/2147483647}}var rT=function t(e){var r=this;Su(this,t),pp(this,"seed",0),pp(this,"init",function(n){r.seed=n,r.value=vv(n)}),pp(this,"value",vv(this.seed)),this.init(e)},mX=new rT(Math.random());import{Color as qv,Vector3 as cs,Quaternion as ac,Matrix4 as Zv,Vector2 as oT,Vector4 as Ou,Euler as iT,Spherical as nT}from"three";var aT=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return n/Math.atan(1/r)*Math.atan(Math.sin(2*Math.PI*e*i)/r)},$v=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},sT=function(e){return e},pT={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},lT={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},cT={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},dT={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},uT={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},fT={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function Zr(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:$v,p=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(t.__damp===void 0&&(t.__damp={}),t.__damp[l]===void 0&&(t.__damp[l]=0),Math.abs(t[e]-r)<=p)return t[e]=r,!1;n=Math.max(1e-4,n);var c=2/n,u=s(c*i),d=t[e]-r,f=r,g=o*n;d=Math.min(Math.max(d,-g),g),r=t[e]-d;var v=(t.__damp[l]+c*d)*i;t.__damp[l]=(t.__damp[l]-c*v)*u;var A=r+(d+v)*u;return f-t[e]>0==A>f&&(A=f,t.__damp[l]=(A-f)/i),t[e]=A,!0}var gT=function(e){return e&&e.isCamera},hT=function(e){return e&&e.isLight},ec=new cs,Ev=new ac,bv=new ac,tc=new Zv,Lm=new cs;function mT(t,e,r,n,i,o,s){typeof e=="number"?ec.setScalar(e):Array.isArray(e)?ec.set(e[0],e[1],e[2]):ec.copy(e);var p=t.parent;t.updateWorldMatrix(!0,!1),Lm.setFromMatrixPosition(t.matrixWorld),gT(t)||hT(t)?tc.lookAt(Lm,ec,t.up):tc.lookAt(ec,Lm,t.up),Fu(t.quaternion,bv.setFromRotationMatrix(tc),r,n,i,o,s),p&&(tc.extractRotation(p.matrixWorld),Ev.setFromRotationMatrix(tc),Fu(t.quaternion,bv.copy(t.quaternion).premultiply(Ev.invert()),r,n,i,o,s))}function up(t,e,r,n,i,o,s,p){return Zr(t,e,t[e]+Dm(t[e],r),n,i,o,s,p)}var rc=new oT,_v,Cv;function AT(t,e,r,n,i,o,s){return typeof e=="number"?rc.setScalar(e):Array.isArray(e)?rc.set(e[0],e[1]):rc.copy(e),_v=Zr(t,"x",rc.x,r,n,i,o,s),Cv=Zr(t,"y",rc.y,r,n,i,o,s),_v||Cv}var cp=new cs,Rv,Bv,xv;function Pm(t,e,r,n,i,o,s){return typeof e=="number"?cp.setScalar(e):Array.isArray(e)?cp.set(e[0],e[1],e[2]):cp.copy(e),Rv=Zr(t,"x",cp.x,r,n,i,o,s),Bv=Zr(t,"y",cp.y,r,n,i,o,s),xv=Zr(t,"z",cp.z,r,n,i,o,s),Rv||Bv||xv}var ls=new Ou,Mv,wv,Tv,Sv;function yT(t,e,r,n,i,o,s){return typeof e=="number"?ls.setScalar(e):Array.isArray(e)?ls.set(e[0],e[1],e[2],e[3]):ls.copy(e),Mv=Zr(t,"x",ls.x,r,n,i,o,s),wv=Zr(t,"y",ls.y,r,n,i,o,s),Tv=Zr(t,"z",ls.z,r,n,i,o,s),Sv=Zr(t,"w",ls.w,r,n,i,o,s),Mv||wv||Tv||Sv}var oc=new iT,Iv,Fv,Ov;function vT(t,e,r,n,i,o,s){return Array.isArray(e)?oc.set(e[0],e[1],e[2],e[3]):oc.copy(e),Iv=up(t,"x",oc.x,r,n,i,o,s),Fv=up(t,"y",oc.y,r,n,i,o,s),Ov=up(t,"z",oc.z,r,n,i,o,s),Iv||Fv||Ov}var dp=new qv,Dv,kv,Lv;function ET(t,e,r,n,i,o,s){return e instanceof qv?dp.copy(e):Array.isArray(e)?dp.setRGB(e[0],e[1],e[2]):dp.set(e),Dv=Zr(t,"r",dp.r,r,n,i,o,s),kv=Zr(t,"g",dp.g,r,n,i,o,s),Lv=Zr(t,"b",dp.b,r,n,i,o,s),Dv||kv||Lv}var Yi=new ac,Zn=new Ou,Pv=new Ou,ic=new Ou,Gv,zv,Nv,Uv;function Fu(t,e,r,n,i,o,s){var p=t;Array.isArray(e)?Yi.set(e[0],e[1],e[2],e[3]):Yi.copy(e);var l=t.dot(Yi)>0?1:-1;return Yi.x*=l,Yi.y*=l,Yi.z*=l,Yi.w*=l,Gv=Zr(t,"x",Yi.x,r,n,i,o,s),zv=Zr(t,"y",Yi.y,r,n,i,o,s),Nv=Zr(t,"z",Yi.z,r,n,i,o,s),Uv=Zr(t,"w",Yi.w,r,n,i,o,s),Zn.set(t.x,t.y,t.z,t.w).normalize(),Pv.set(p.__damp.velocity_x,p.__damp.velocity_y,p.__damp.velocity_z,p.__damp.velocity_w),ic.copy(Zn).multiplyScalar(Pv.dot(Zn)/Zn.dot(Zn)),p.__damp.velocity_x-=ic.x,p.__damp.velocity_y-=ic.y,p.__damp.velocity_z-=ic.z,p.__damp.velocity_w-=ic.w,t.set(Zn.x,Zn.y,Zn.z,Zn.w),Gv||zv||Nv||Uv}var nc=new nT,jv,Hv,Qv;function bT(t,e,r,n,i,o,s){return Array.isArray(e)?nc.set(e[0],e[1],e[2]):nc.copy(e),jv=Zr(t,"radius",nc.radius,r,n,i,o,s),Hv=up(t,"phi",nc.phi,r,n,i,o,s),Qv=up(t,"theta",nc.theta,r,n,i,o,s),jv||Hv||Qv}var Iu=new Zv,Wv=new cs,Vv=new ac,Yv=new cs,Kv,Xv,Jv;function _T(t,e,r,n,i,o,s){var p=t;return p.__damp===void 0&&(p.__damp={position:new cs,rotation:new ac,scale:new cs},t.decompose(p.__damp.position,p.__damp.rotation,p.__damp.scale)),Array.isArray(e)?Iu.set.apply(Iu,lp(e)):Iu.copy(e),Iu.decompose(Wv,Vv,Yv),Kv=Pm(p.__damp.position,Wv,r,n,i,o,s),Xv=Fu(p.__damp.rotation,Vv,r,n,i,o,s),Jv=Pm(p.__damp.scale,Yv,r,n,i,o,s),t.compose(p.__damp.position,p.__damp.rotation,p.__damp.scale),Kv||Xv||Jv}var wn=Object.freeze({__proto__:null,rsqw:aT,exp:$v,linear:sT,sine:pT,cubic:lT,quint:cT,circ:dT,quart:uT,expo:fT,damp:Zr,dampLookAt:mT,dampAngle:up,damp2:AT,damp3:Pm,damp4:yT,dampE:vT,dampC:ET,dampQ:Fu,dampS:bT,dampM:_T});import*as $n from"three";import{Vector3 as xX,Vector2 as MX}from"three";import"three";var Nm=Pt.createContext(null);function Um(){return Pt.useContext(Nm)}function CT({eps:t=1e-5,enabled:e=!0,infinite:r,horizontal:n,pages:i=1,distance:o=1,damping:s=.25,maxSpeed:p=1/0,style:l={},children:c}){let{get:u,setEvents:d,gl:f,size:g,invalidate:v,events:A}=Gm(),[m]=Pt.useState(()=>document.createElement("div")),[h]=Pt.useState(()=>document.createElement("div")),[y]=Pt.useState(()=>document.createElement("div")),E=f.domElement.parentNode,b=Pt.useRef(0),_=Pt.useMemo(()=>({el:m,eps:t,fill:h,fixed:y,horizontal:n,damping:s,offset:0,delta:0,scroll:b,pages:i,range(R,M,x=0){let T=R-x,w=T+M+x*2;return this.offset<T?0:this.offset>w?1:(this.offset-T)/(w-T)},curve(R,M,x=0){return Math.sin(this.range(R,M,x)*Math.PI)},visible(R,M,x=0){let T=R-x,w=T+M+x*2;return this.offset>=T&&this.offset<=w}}),[t,s,n,i]);Pt.useEffect(()=>{m.style.position="absolute",m.style.width="100%",m.style.height="100%",m.style[n?"overflowX":"overflowY"]="auto",m.style[n?"overflowY":"overflowX"]="hidden",m.style.top="0px",m.style.left="0px";for(let M in l)m.style[M]=l[M];y.style.position="sticky",y.style.top="0px",y.style.left="0px",y.style.width="100%",y.style.height="100%",y.style.overflow="hidden",m.appendChild(y),h.style.height=n?"100%":`${i*o*100}%`,h.style.width=n?`${i*o*100}%`:"100%",h.style.pointerEvents="none",m.appendChild(h),E.appendChild(m),m[n?"scrollLeft":"scrollTop"]=1;let B=A.connected||f.domElement;requestAnimationFrame(()=>A.connect==null?void 0:A.connect(m));let R=u().events.compute;return d({compute(M,x){let{left:T,top:w}=E.getBoundingClientRect(),S=M.clientX-T,I=M.clientY-w;x.pointer.set(S/x.size.width*2-1,-(I/x.size.height)*2+1),x.raycaster.setFromCamera(x.pointer,x.camera)}}),()=>{E.removeChild(m),d({compute:R}),A.connect==null||A.connect(B)}},[i,o,n,m,h,y,E]),Pt.useEffect(()=>{if(A.connected===m){let B=g[n?"width":"height"],R=m[n?"scrollWidth":"scrollHeight"],M=R-B,x=0,T=!0,w=!0,S=()=>{if(!(!e||w)&&(v(),x=m[n?"scrollLeft":"scrollTop"],b.current=x/M,r)){if(!T){if(x>=M){let G=1-_.offset;m[n?"scrollLeft":"scrollTop"]=1,b.current=_.offset=-G,T=!0}else if(x<=0){let G=1+_.offset;m[n?"scrollLeft":"scrollTop"]=R,b.current=_.offset=G,T=!0}}T&&setTimeout(()=>T=!1,40)}};m.addEventListener("scroll",S,{passive:!0}),requestAnimationFrame(()=>w=!1);let I=G=>m.scrollLeft+=G.deltaY/2;return n&&m.addEventListener("wheel",I,{passive:!0}),()=>{m.removeEventListener("scroll",S),n&&m.removeEventListener("wheel",I)}}},[m,A,g,r,_,v,n,e]);let C=0;return zm((B,R)=>{C=_.offset,wn.damp(_,"offset",b.current,s,R,p,void 0,t),wn.damp(_,"delta",Math.abs(C-_.offset),s,R,p,void 0,t),_.delta>t&&v()}),Pt.createElement(Nm.Provider,{value:_},c)}var RT=Pt.forwardRef(({children:t},e)=>{let r=Pt.useRef(null),n=Um(),{width:i,height:o}=Gm(s=>s.viewport);return zm(()=>{r.current.position.x=n.horizontal?-i*(n.pages-1)*n.offset:0,r.current.position.y=n.horizontal?0:o*(n.pages-1)*n.offset}),Pt.createElement("group",{ref:tt([e,r])},t)}),BT=Pt.forwardRef(({children:t,style:e,...r},n)=>{let i=Um(),o=Pt.useRef(null),{width:s,height:p}=Gm(u=>u.size),l=Pt.useContext(eE),c=Pt.useMemo(()=>tE.createRoot(i.fixed),[i.fixed]);return zm(()=>{i.delta>i.eps&&(o.current.style.transform=`translate3d(${i.horizontal?-s*(i.pages-1)*i.offset:0}px,${i.horizontal?0:p*(i.pages-1)*-i.offset}px,0)`)}),c.render(Pt.createElement("div",te({ref:tt([n,o]),style:{...e,position:"absolute",top:0,left:0,willChange:"transform"}},r),Pt.createElement(Nm.Provider,{value:i},Pt.createElement(eE.Provider,{value:l},t)))),null}),xT=Pt.forwardRef(({html:t,...e},r)=>Pt.createElement(t?BT:RT,te({ref:r},e)));import*as ea from"react";import{MathUtils as uf}from"three";import{useThree as U0}from"@react-three/fiber";import{addEffect as TS,applyProps as SS}from"@react-three/fiber";var Hm=pc(),Xe=t=>sc(t,Hm),Qm=pc();Xe.write=t=>sc(t,Qm);var Du=pc();Xe.onStart=t=>sc(t,Du);var Wm=pc();Xe.onFrame=t=>sc(t,Wm);var Vm=pc();Xe.onFinish=t=>sc(t,Vm);var fp=[];Xe.setTimeout=(t,e)=>{let r=Xe.now()+e,n=()=>{let o=fp.findIndex(s=>s.cancel==n);~o&&fp.splice(o,1),_a-=~o?1:0},i={time:r,handler:t,cancel:n};return fp.splice(rE(r),0,i),_a+=1,oE(),i};var rE=t=>~(~fp.findIndex(e=>e.time>t)||~fp.length);Xe.cancel=t=>{Du.delete(t),Wm.delete(t),Vm.delete(t),Hm.delete(t),Qm.delete(t)};Xe.sync=t=>{jm=!0,Xe.batchedUpdates(t),jm=!1};Xe.throttle=t=>{let e;function r(){try{t(...e)}finally{e=null}}function n(...i){e=i,Xe.onStart(r)}return n.handler=t,n.cancel=()=>{Du.delete(r),e=null},n};var Ym=typeof window<"u"?window.requestAnimationFrame:()=>{};Xe.use=t=>Ym=t;Xe.now=typeof performance<"u"?()=>performance.now():Date.now;Xe.batchedUpdates=t=>t();Xe.catch=console.error;Xe.frameLoop="always";Xe.advance=()=>{Xe.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):nE()};var ba=-1,_a=0,jm=!1;function sc(t,e){jm?(e.delete(t),t(0)):(e.add(t),oE())}function oE(){ba<0&&(ba=0,Xe.frameLoop!=="demand"&&Ym(iE))}function MT(){ba=-1}function iE(){~ba&&(Ym(iE),Xe.batchedUpdates(nE))}function nE(){let t=ba;ba=Xe.now();let e=rE(ba);if(e&&(aE(fp.splice(0,e),r=>r.handler()),_a-=e),!_a){MT();return}Du.flush(),Hm.flush(t?Math.min(64,ba-t):16.667),Wm.flush(),Qm.flush(),Vm.flush()}function pc(){let t=new Set,e=t;return{add(r){_a+=e==t&&!t.has(r)?1:0,t.add(r)},delete(r){return _a-=e==t&&t.has(r)?1:0,t.delete(r)},flush(r){e.size&&(t=new Set,_a-=e.size,aE(e,n=>n(r)&&t.add(n)),_a+=t.size,e=t)}}}function aE(t,e){t.forEach(r=>{try{e(r)}catch(n){Xe.catch(n)}})}import{useRef as $m,useEffect as Hu,useLayoutEffect as wT,useState as hE}from"react";function Qu(){}var mE=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0}),Te={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Tn(t,e){if(Te.arr(t)){if(!Te.arr(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return t===e}var Bt=(t,e)=>t.forEach(e);function Xi(t,e,r){if(Te.arr(t)){for(let n=0;n<t.length;n++)e.call(r,t[n],`${n}`);return}for(let n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n)}var hi=t=>Te.und(t)?[]:Te.arr(t)?t:[t];function mp(t,e){if(t.size){let r=Array.from(t);t.clear(),Bt(r,e)}}var Ap=(t,...e)=>mp(t,r=>r(...e)),e0=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),t0,AE,Ca=null,yE=!1,r0=Qu,TT=t=>{t.to&&(AE=t.to),t.now&&(Xe.now=t.now),t.colors!==void 0&&(Ca=t.colors),t.skipAnimation!=null&&(yE=t.skipAnimation),t.createStringInterpolator&&(t0=t.createStringInterpolator),t.requestAnimationFrame&&Xe.use(t.requestAnimationFrame),t.batchedUpdates&&(Xe.batchedUpdates=t.batchedUpdates),t.willAdvance&&(r0=t.willAdvance),t.frameLoop&&(Xe.frameLoop=t.frameLoop)},mi=Object.freeze({__proto__:null,get createStringInterpolator(){return t0},get to(){return AE},get colors(){return Ca},get skipAnimation(){return yE},get willAdvance(){return r0},assign:TT}),lc=new Set,wi=[],Km=[],zu=0,yp={get idle(){return!lc.size&&!wi.length},start(t){zu>t.priority?(lc.add(t),Xe.onStart(ST)):(vE(t),Xe(qm))},advance:qm,sort(t){if(zu)Xe.onFrame(()=>yp.sort(t));else{let e=wi.indexOf(t);~e&&(wi.splice(e,1),EE(t))}},clear(){wi=[],lc.clear()}};function ST(){lc.forEach(vE),lc.clear(),Xe(qm)}function vE(t){wi.includes(t)||EE(t)}function EE(t){wi.splice(IT(wi,e=>e.priority>t.priority),0,t)}function qm(t){let e=Km;for(let r=0;r<wi.length;r++){let n=wi[r];zu=n.priority,n.idle||(r0(n),n.advance(t),n.idle||e.push(n))}return zu=0,Km=wi,Km.length=0,wi=e,wi.length>0}function IT(t,e){let r=t.findIndex(e);return r<0?t.length:r}var FT=(t,e,r)=>Math.min(Math.max(r,t),e),bE={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ki="[-+]?\\d*\\.?\\d+",Nu=Ki+"%";function Wu(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var OT=new RegExp("rgb"+Wu(Ki,Ki,Ki)),DT=new RegExp("rgba"+Wu(Ki,Ki,Ki,Ki)),kT=new RegExp("hsl"+Wu(Ki,Nu,Nu)),LT=new RegExp("hsla"+Wu(Ki,Nu,Nu,Ki)),PT=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,GT=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,zT=/^#([0-9a-fA-F]{6})$/,NT=/^#([0-9a-fA-F]{8})$/;function UT(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=zT.exec(t))?parseInt(e[1]+"ff",16)>>>0:Ca&&Ca[t]!==void 0?Ca[t]:(e=OT.exec(t))?(gp(e[1])<<24|gp(e[2])<<16|gp(e[3])<<8|255)>>>0:(e=DT.exec(t))?(gp(e[1])<<24|gp(e[2])<<16|gp(e[3])<<8|lE(e[4]))>>>0:(e=PT.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=NT.exec(t))?parseInt(e[1],16)>>>0:(e=GT.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=kT.exec(t))?(sE(pE(e[1]),ku(e[2]),ku(e[3]))|255)>>>0:(e=LT.exec(t))?(sE(pE(e[1]),ku(e[2]),ku(e[3]))|lE(e[4]))>>>0:null}function Xm(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function sE(t,e,r){let n=r<.5?r*(1+e):r+e-r*e,i=2*r-n,o=Xm(i,n,t+1/3),s=Xm(i,n,t),p=Xm(i,n,t-1/3);return Math.round(o*255)<<24|Math.round(s*255)<<16|Math.round(p*255)<<8}function gp(t){let e=parseInt(t,10);return e<0?0:e>255?255:e}function pE(t){return(parseFloat(t)%360+360)%360/360}function lE(t){let e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function ku(t){let e=parseFloat(t);return e<0?0:e>100?1:e/100}function cE(t){let e=UT(t);if(e===null)return t;e=e||0;let r=(e&4278190080)>>>24,n=(e&16711680)>>>16,i=(e&65280)>>>8,o=(e&255)/255;return`rgba(${r}, ${n}, ${i}, ${o})`}var Ra=(t,e,r)=>{if(Te.fun(t))return t;if(Te.arr(t))return Ra({range:t,output:e,extrapolate:r});if(Te.str(t.output[0]))return t0(t);let n=t,i=n.output,o=n.range||[0,1],s=n.extrapolateLeft||n.extrapolate||"extend",p=n.extrapolateRight||n.extrapolate||"extend",l=n.easing||(c=>c);return c=>{let u=HT(c,o);return jT(c,o[u],o[u+1],i[u],i[u+1],l,s,p,n.map)}};function jT(t,e,r,n,i,o,s,p,l){let c=l?l(t):t;if(c<e){if(s==="identity")return c;s==="clamp"&&(c=e)}if(c>r){if(p==="identity")return c;p==="clamp"&&(c=r)}return n===i?n:e===r?t<=e?n:i:(e===-1/0?c=-c:r===1/0?c=c-e:c=(c-e)/(r-e),c=o(c),n===-1/0?c=-c:i===1/0?c=c+n:c=c*(i-n)+n,c)}function HT(t,e){for(var r=1;r<e.length-1&&!(e[r]>=t);++r);return r-1}var QT=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);let n=r*t,i=e==="end"?Math.floor(n):Math.ceil(n);return FT(0,1,i/t)},Uu=1.70158,Lu=Uu*1.525,dE=Uu+1,uE=2*Math.PI/3,fE=2*Math.PI/4.5,Pu=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,o0={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>dE*t*t*t-Uu*t*t,easeOutBack:t=>1+dE*Math.pow(t-1,3)+Uu*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Lu+1)*2*t-Lu)/2:(Math.pow(2*t-2,2)*((Lu+1)*(t*2-2)+Lu)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*uE),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*uE)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*fE))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*fE)/2+1,easeInBounce:t=>1-Pu(1-t),easeOutBounce:Pu,easeInOutBounce:t=>t<.5?(1-Pu(1-2*t))/2:(1+Pu(2*t-1))/2,steps:QT};function Zm(){return Zm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zm.apply(this,arguments)}var hp=Symbol.for("FluidValue.get"),ds=Symbol.for("FluidValue.observers"),Ti=t=>!!(t&&t[hp]),qo=t=>t&&t[hp]?t[hp]():t,i0=t=>t[ds]||null;function WT(t,e){t.eventObserved?t.eventObserved(e):t(e)}function cc(t,e){let r=t[ds];r&&r.forEach(n=>{WT(n,e)})}var ju=class{constructor(e){if(this[hp]=void 0,this[ds]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");VT(this,e)}},VT=(t,e)=>_E(t,hp,e);function us(t,e){if(t[hp]){let r=t[ds];r||_E(t,ds,r=new Set),r.has(e)||(r.add(e),t.observerAdded&&t.observerAdded(r.size,e))}return e}function vp(t,e){let r=t[ds];if(r&&r.has(e)){let n=r.size-1;n?r.delete(e):t[ds]=null,t.observerRemoved&&t.observerRemoved(n,e)}}var _E=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0}),Gu=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,YT=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,gE=new RegExp(`(${Gu.source})(%|[a-z]+)`,"i"),KT=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Vu=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,CE=t=>{let[e,r]=XT(t);if(!e||e0())return t;let n=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(n)return n.trim();if(r&&r.startsWith("--")){let i=window.getComputedStyle(document.documentElement).getPropertyValue(r);return i||t}else{if(r&&Vu.test(r))return CE(r);if(r)return r}return t},XT=t=>{let e=Vu.exec(t);if(!e)return[,];let[,r,n]=e;return[r,n]},Jm,JT=(t,e,r,n,i)=>`rgba(${Math.round(e)}, ${Math.round(r)}, ${Math.round(n)}, ${i})`,Yu=t=>{Jm||(Jm=Ca?new RegExp(`(${Object.keys(Ca).join("|")})(?!\\w)`,"g"):/^\b$/);let e=t.output.map(o=>qo(o).replace(Vu,CE).replace(YT,cE).replace(Jm,cE)),r=e.map(o=>o.match(Gu).map(Number)),i=r[0].map((o,s)=>r.map(p=>{if(!(s in p))throw Error('The arity of each "output" value must be equal');return p[s]})).map(o=>Ra(Zm({},t,{output:o})));return o=>{var s;let p=!gE.test(e[0])&&((s=e.find(c=>gE.test(c)))==null?void 0:s.replace(Gu,"")),l=0;return e[0].replace(Gu,()=>`${i[l++](o)}${p||""}`).replace(KT,JT)}},n0="react-spring: ",RE=t=>{let e=t,r=!1;if(typeof e!="function")throw new TypeError(`${n0}once requires a function parameter`);return(...n)=>{r||(e(...n),r=!0)}},qT=RE(console.warn);function BE(){qT(`${n0}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var ZT=RE(console.warn);function xE(){ZT(`${n0}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Ep(t){return Te.str(t)&&(t[0]=="#"||/\d/.test(t)||!e0()&&Vu.test(t)||t in(Ca||{}))}var bp=e0()?Hu:wT,$T=()=>{let t=$m(!1);return bp(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Ku(){let t=hE()[1],e=$T();return()=>{e.current&&t(Math.random())}}function ME(t,e){let[r]=hE(()=>({inputs:e,result:t()})),n=$m(),i=n.current,o=i;return o?e&&o.inputs&&eS(e,o.inputs)||(o={inputs:e,result:t()}):o=r,Hu(()=>{n.current=o,i==r&&(r.inputs=r.result=void 0)},[o]),o.result}function eS(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}var Xu=t=>Hu(t,tS),tS=[];function a0(t){let e=$m();return Hu(()=>{e.current=t}),e.current}import*as _c from"react";import{useContext as QE,useMemo as tf,useRef as DE,useState as AJ}from"react";import*as FE from"react";import{forwardRef as rS,useRef as wE,useCallback as oS,useEffect as iS}from"react";var dc=Symbol.for("Animated:node"),nS=t=>!!t&&t[dc]===t,Ji=t=>t&&t[dc],$u=(t,e)=>mE(t,dc,e),fc=t=>t&&t[dc]&&t[dc].getPayload(),Ju=class{constructor(){this.payload=void 0,$u(this,this)}getPayload(){return this.payload||[]}},fs=class t extends Ju{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,Te.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new t(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,r){return Te.num(e)&&(this.lastPosition=e,r&&(e=Math.round(e/r)*r,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){let{done:e}=this;this.done=!1,Te.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},gs=class t extends fs{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=Ra({output:[e,e]})}static create(e){return new t(e)}getValue(){let e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Te.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Ra({output:[this.getValue(),e]})),this._value=0,super.reset()}},qu={dependencies:null},uc=class extends Ju{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){let r={};return Xi(this.source,(n,i)=>{nS(n)?r[i]=n.getValue(e):Ti(n)?r[i]=qo(n):e||(r[i]=n)}),r}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&Bt(this.payload,e=>e.reset())}_makePayload(e){if(e){let r=new Set;return Xi(e,this._addToPayload,r),Array.from(r)}}_addToPayload(e){qu.dependencies&&Ti(e)&&qu.dependencies.add(e);let r=fc(e);r&&Bt(r,n=>this.add(n))}},s0=class t extends uc{constructor(e){super(e)}static create(e){return new t(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){let r=this.getPayload();return e.length==r.length?r.map((n,i)=>n.setValue(e[i])).some(Boolean):(super.setValue(e.map(aS)),!0)}};function aS(t){return(Ep(t)?gs:fs).create(t)}function ef(t){let e=Ji(t);return e?e.constructor:Te.arr(t)?s0:Ep(t)?gs:fs}function Zu(){return Zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zu.apply(this,arguments)}var TE=(t,e)=>{let r=!Te.fun(t)||t.prototype&&t.prototype.isReactComponent;return rS((n,i)=>{let o=wE(null),s=r&&oS(v=>{o.current=pS(i,v)},[i]),[p,l]=sS(n,e),c=Ku(),u=()=>{let v=o.current;if(r&&!v)return;(v?e.applyAnimatedValues(v,p.getValue(!0)):!1)===!1&&c()},d=new p0(u,l),f=wE();bp(()=>(f.current=d,Bt(l,v=>us(v,d)),()=>{f.current&&(Bt(f.current.deps,v=>vp(v,f.current)),Xe.cancel(f.current.update))})),iS(u,[]),Xu(()=>()=>{let v=f.current;Bt(v.deps,A=>vp(A,v))});let g=e.getComponentProps(p.getValue());return FE.createElement(t,Zu({},g,{ref:s}))})},p0=class{constructor(e,r){this.update=e,this.deps=r}eventObserved(e){e.type=="change"&&Xe.write(this.update)}};function sS(t,e){let r=new Set;return qu.dependencies=r,t.style&&(t=Zu({},t,{style:e.createAnimatedStyle(t.style)})),t=new uc(t),qu.dependencies=null,[t,r]}function pS(t,e){return t&&(Te.fun(t)?t(e):t.current=e),e}var SE=Symbol.for("AnimatedComponent"),OE=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:r=i=>new uc(i),getComponentProps:n=i=>i}={})=>{let i={applyAnimatedValues:e,createAnimatedStyle:r,getComponentProps:n},o=s=>{let p=IE(s)||"Anonymous";return Te.str(s)?s=o[s]||(o[s]=TE(s,i)):s=s[SE]||(s[SE]=TE(s,i)),s.displayName=`Animated(${p})`,s};return Xi(t,(s,p)=>{Te.arr(t)&&(p=IE(s)),o[p]=o(s)}),{animated:o}},IE=t=>Te.str(t)?t:t&&Te.str(t.displayName)?t.displayName:Te.fun(t)&&t.name||null;function so(){return so=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},so.apply(this,arguments)}function hs(t,...e){return Te.fun(t)?t(...e):t}var Ac=(t,e)=>t===!0||!!(e&&t&&(Te.fun(t)?t(e):hi(t).includes(e))),WE=(t,e)=>Te.obj(t)?e&&t[e]:t,VE=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,lS=t=>t,_0=(t,e=lS)=>{let r=cS;t.default&&t.default!==!0&&(t=t.default,r=Object.keys(t));let n={};for(let i of r){let o=e(t[i],i);Te.und(o)||(n[i]=o)}return n},cS=["config","onProps","onStart","onChange","onPause","onResume","onRest"],dS={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function uS(t){let e={},r=0;if(Xi(t,(n,i)=>{dS[i]||(e[i]=n,r++)}),r)return e}function YE(t){let e=uS(t);if(e){let r={to:e};return Xi(t,(n,i)=>i in e||(r[i]=n)),r}return so({},t)}function yc(t){return t=qo(t),Te.arr(t)?t.map(yc):Ep(t)?mi.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function fS(t){for(let e in t)return!0;return!1}function d0(t){return Te.fun(t)||Te.arr(t)&&Te.obj(t[0])}function gS(t,e){var r;(r=t.ref)==null||r.delete(t),e?.delete(t)}function hS(t,e){if(e&&t.ref!==e){var r;(r=t.ref)==null||r.delete(t),e.add(t),t.ref=e}}var mS={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},u0=so({},mS.default,{mass:1,damping:1,easing:o0.linear,clamp:!1}),f0=class{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,u0)}};function AS(t,e,r){r&&(r=so({},r),kE(r,e),e=so({},r,e)),kE(t,e),Object.assign(t,e);for(let s in u0)t[s]==null&&(t[s]=u0[s]);let{mass:n,frequency:i,damping:o}=t;return Te.und(i)||(i<.01&&(i=.01),o<0&&(o=0),t.tension=Math.pow(2*Math.PI/i,2)*n,t.friction=4*Math.PI*o*n/i),t}function kE(t,e){if(!Te.und(e.decay))t.duration=void 0;else{let r=!Te.und(e.tension)||!Te.und(e.friction);(r||!Te.und(e.frequency)||!Te.und(e.damping)||!Te.und(e.mass))&&(t.duration=void 0,t.decay=void 0),r&&(t.frequency=void 0)}}var LE=[],g0=class{constructor(){this.changed=!1,this.values=LE,this.toValues=null,this.fromValues=LE,this.to=void 0,this.from=void 0,this.config=new f0,this.immediate=!1}};function KE(t,{key:e,props:r,defaultProps:n,state:i,actions:o}){return new Promise((s,p)=>{var l;let c,u,d=Ac((l=r.cancel)!=null?l:n?.cancel,e);if(d)v();else{Te.und(r.pause)||(i.paused=Ac(r.pause,e));let A=n?.pause;A!==!0&&(A=i.paused||Ac(A,e)),c=hs(r.delay||0,e),A?(i.resumeQueue.add(g),o.pause()):(o.resume(),g())}function f(){i.resumeQueue.add(g),i.timeouts.delete(u),u.cancel(),c=u.time-Xe.now()}function g(){c>0&&!mi.skipAnimation?(i.delayed=!0,u=Xe.setTimeout(v,c),i.pauseQueue.add(f),i.timeouts.add(u)):v()}function v(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(f),i.timeouts.delete(u),t<=(i.cancelId||0)&&(d=!0);try{o.start(so({},r,{callId:t,cancel:d}),s)}catch(A){p(A)}}})}var C0=(t,e)=>e.length==1?e[0]:e.some(r=>r.cancelled)?_p(t.get()):e.every(r=>r.noop)?XE(t.get()):qi(t.get(),e.every(r=>r.finished)),XE=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),qi=(t,e,r=!1)=>({value:t,finished:e,cancelled:r}),_p=t=>({value:t,cancelled:!0,finished:!1});function JE(t,e,r,n){let{callId:i,parentId:o,onRest:s}=e,{asyncTo:p,promise:l}=r;return!o&&t===p&&!e.reset?l:r.promise=(async()=>{r.asyncId=i,r.asyncTo=t;let c=_0(e,(m,h)=>h==="onRest"?void 0:m),u,d,f=new Promise((m,h)=>(u=m,d=h)),g=m=>{let h=i<=(r.cancelId||0)&&_p(n)||i!==r.asyncId&&qi(n,!1);if(h)throw m.result=h,d(m),m},v=(m,h)=>{let y=new rf,E=new of;return(async()=>{if(mi.skipAnimation)throw vc(r),E.result=qi(n,!1),d(E),E;g(y);let b=Te.obj(m)?so({},m):so({},h,{to:m});b.parentId=i,Xi(c,(C,B)=>{Te.und(b[B])&&(b[B]=C)});let _=await n.start(b);return g(y),r.paused&&await new Promise(C=>{r.resumeQueue.add(C)}),_})()},A;if(mi.skipAnimation)return vc(r),qi(n,!1);try{let m;Te.arr(t)?m=(async h=>{for(let y of h)await v(y)})(t):m=Promise.resolve(t(v,n.stop.bind(n))),await Promise.all([m.then(u),f]),A=qi(n.get(),!0,!1)}catch(m){if(m instanceof rf)A=m.result;else if(m instanceof of)A=m.result;else throw m}finally{i==r.asyncId&&(r.asyncId=o,r.asyncTo=o?p:void 0,r.promise=o?l:void 0)}return Te.fun(s)&&Xe.batchedUpdates(()=>{s(A,n,n.item)}),A})()}function vc(t,e){mp(t.timeouts,r=>r.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var rf=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}},of=class extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}},h0=t=>t instanceof Ec,yS=1,Ec=class extends ju{constructor(...e){super(...e),this.id=yS++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){let e=Ji(this);return e&&e.getValue()}to(...e){return mi.to(this,e)}interpolate(...e){return BE(),mi.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,r=!1){cc(this,{type:"change",parent:this,value:e,idle:r})}_onPriorityChange(e){this.idle||yp.sort(this),cc(this,{type:"priority",parent:this,priority:e})}},ms=Symbol.for("SpringPhase"),qE=1,m0=2,A0=4,l0=t=>(t[ms]&qE)>0,Ba=t=>(t[ms]&m0)>0,gc=t=>(t[ms]&A0)>0,PE=(t,e)=>e?t[ms]|=m0|qE:t[ms]&=~m0,GE=(t,e)=>e?t[ms]|=A0:t[ms]&=~A0,y0=class extends Ec{constructor(e,r){if(super(),this.key=void 0,this.animation=new g0,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Te.und(e)||!Te.und(r)){let n=Te.obj(e)?so({},e):so({},r,{from:e});Te.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ba(this)||this._state.asyncTo)||gc(this)}get goal(){return qo(this.animation.to)}get velocity(){let e=Ji(this);return e instanceof fs?e.lastVelocity||0:e.getPayload().map(r=>r.lastVelocity||0)}get hasAnimated(){return l0(this)}get isAnimating(){return Ba(this)}get isPaused(){return gc(this)}get isDelayed(){return this._state.delayed}advance(e){let r=!0,n=!1,i=this.animation,{config:o,toValues:s}=i,p=fc(i.to);!p&&Ti(i.to)&&(s=hi(qo(i.to))),i.values.forEach((u,d)=>{if(u.done)return;let f=u.constructor==gs?1:p?p[d].lastPosition:s[d],g=i.immediate,v=f;if(!g){if(v=u.lastPosition,o.tension<=0){u.done=!0;return}let A=u.elapsedTime+=e,m=i.fromValues[d],h=u.v0!=null?u.v0:u.v0=Te.arr(o.velocity)?o.velocity[d]:o.velocity,y,E=o.precision||(m==f?.005:Math.min(1,Math.abs(f-m)*.001));if(Te.und(o.duration))if(o.decay){let b=o.decay===!0?.998:o.decay,_=Math.exp(-(1-b)*A);v=m+h/(1-b)*(1-_),g=Math.abs(u.lastPosition-v)<=E,y=h*_}else{y=u.lastVelocity==null?h:u.lastVelocity;let b=o.restVelocity||E/10,_=o.clamp?0:o.bounce,C=!Te.und(_),B=m==f?u.v0>0:m<f,R,M=!1,x=1,T=Math.ceil(e/x);for(let w=0;w<T&&(R=Math.abs(y)>b,!(!R&&(g=Math.abs(f-v)<=E,g)));++w){C&&(M=v==f||v>f==B,M&&(y=-y*_,v=f));let S=-o.tension*1e-6*(v-f),I=-o.friction*.001*y,G=(S+I)/o.mass;y=y+G*x,v=v+y*x}}else{let b=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,u.durationProgress>0&&(u.elapsedTime=o.duration*u.durationProgress,A=u.elapsedTime+=e)),b=(o.progress||0)+A/this._memoizedDuration,b=b>1?1:b<0?0:b,u.durationProgress=b),v=m+o.easing(b)*(f-m),y=(v-u.lastPosition)/e,g=b==1}u.lastVelocity=y,Number.isNaN(v)&&(console.warn("Got NaN while animating:",this),g=!0)}p&&!p[d].done&&(g=!1),g?u.done=!0:r=!1,u.setValue(v,o.round)&&(n=!0)});let l=Ji(this),c=l.getValue();if(r){let u=qo(i.to);(c!==u||n)&&!o.decay?(l.setValue(u),this._onChange(u)):n&&o.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return Xe.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ba(this)){let{to:e,config:r}=this.animation;Xe.batchedUpdates(()=>{this._onStart(),r.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,r){let n;return Te.und(e)?(n=this.queue||[],this.queue=[]):n=[Te.obj(e)?e:so({},r,{to:e})],Promise.all(n.map(i=>this._update(i))).then(i=>C0(this,i))}stop(e){let{to:r}=this.animation;return this._focus(this.get()),vc(this._state,e&&this._lastCallId),Xe.batchedUpdates(()=>this._stop(r,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){let r=this.key||"",{to:n,from:i}=e;n=Te.obj(n)?n[r]:n,(n==null||d0(n))&&(n=void 0),i=Te.obj(i)?i[r]:i,i==null&&(i=void 0);let o={to:n,from:i};return l0(this)||(e.reverse&&([n,i]=[i,n]),i=qo(i),Te.und(i)?Ji(this)||this._set(n):this._set(i)),o}_update(e,r){let n=so({},e),{key:i,defaultProps:o}=this;n.default&&Object.assign(o,_0(n,(l,c)=>/^on/.test(c)?WE(l,i):l)),NE(this,n,"onProps"),mc(this,"onProps",n,this);let s=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let p=this._state;return KE(++this._lastCallId,{key:i,props:n,defaultProps:o,state:p,actions:{pause:()=>{gc(this)||(GE(this,!0),Ap(p.pauseQueue),mc(this,"onPause",qi(this,hc(this,this.animation.to)),this))},resume:()=>{gc(this)&&(GE(this,!1),Ba(this)&&this._resume(),Ap(p.resumeQueue),mc(this,"onResume",qi(this,hc(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(l=>{if(n.loop&&l.finished&&!(r&&l.noop)){let c=ZE(n);if(c)return this._update(c,!0)}return l})}_merge(e,r,n){if(r.cancel)return this.stop(!0),n(_p(this));let i=!Te.und(e.to),o=!Te.und(e.from);if(i||o)if(r.callId>this._lastToId)this._lastToId=r.callId;else return n(_p(this));let{key:s,defaultProps:p,animation:l}=this,{to:c,from:u}=l,{to:d=c,from:f=u}=e;o&&!i&&(!r.default||Te.und(d))&&(d=f),r.reverse&&([d,f]=[f,d]);let g=!Tn(f,u);g&&(l.from=f),f=qo(f);let v=!Tn(d,c);v&&this._focus(d);let A=d0(r.to),{config:m}=l,{decay:h,velocity:y}=m;(i||o)&&(m.velocity=0),r.config&&!A&&AS(m,hs(r.config,s),r.config!==p.config?hs(p.config,s):void 0);let E=Ji(this);if(!E||Te.und(d))return n(qi(this,!0));let b=Te.und(r.reset)?o&&!r.default:!Te.und(f)&&Ac(r.reset,s),_=b?f:this.get(),C=yc(d),B=Te.num(C)||Te.arr(C)||Ep(C),R=!A&&(!B||Ac(p.immediate||r.immediate,s));if(v){let w=ef(d);if(w!==E.constructor)if(R)E=this._set(C);else throw Error(`Cannot animate between ${E.constructor.name} and ${w.name}, as the "to" prop suggests`)}let M=E.constructor,x=Ti(d),T=!1;if(!x){let w=b||!l0(this)&&g;(v||w)&&(T=Tn(yc(_),C),x=!T),(!Tn(l.immediate,R)&&!R||!Tn(m.decay,h)||!Tn(m.velocity,y))&&(x=!0)}if(T&&Ba(this)&&(l.changed&&!b?x=!0:x||this._stop(c)),!A&&((x||Ti(c))&&(l.values=E.getPayload(),l.toValues=Ti(d)?null:M==gs?[1]:hi(C)),l.immediate!=R&&(l.immediate=R,!R&&!b&&this._set(c)),x)){let{onRest:w}=l;Bt(ES,I=>NE(this,r,I));let S=qi(this,hc(this,c));Ap(this._pendingCalls,S),this._pendingCalls.add(n),l.changed&&Xe.batchedUpdates(()=>{l.changed=!b,w?.(S,this),b?hs(p.onRest,S):l.onStart==null||l.onStart(S,this)})}b&&this._set(_),A?n(JE(r.to,r,this._state,this)):x?this._start():Ba(this)&&!v?this._pendingCalls.add(n):n(XE(_))}_focus(e){let r=this.animation;e!==r.to&&(i0(this)&&this._detach(),r.to=e,i0(this)&&this._attach())}_attach(){let e=0,{to:r}=this.animation;Ti(r)&&(us(r,this),h0(r)&&(e=r.priority+1)),this.priority=e}_detach(){let{to:e}=this.animation;Ti(e)&&vp(e,this)}_set(e,r=!0){let n=qo(e);if(!Te.und(n)){let i=Ji(this);if(!i||!Tn(n,i.getValue())){let o=ef(n);!i||i.constructor!=o?$u(this,o.create(n)):i.setValue(n),i&&Xe.batchedUpdates(()=>{this._onChange(n,r)})}}return Ji(this)}_onStart(){let e=this.animation;e.changed||(e.changed=!0,mc(this,"onStart",qi(this,hc(this,e.to)),this))}_onChange(e,r){r||(this._onStart(),hs(this.animation.onChange,e,this)),hs(this.defaultProps.onChange,e,this),super._onChange(e,r)}_start(){let e=this.animation;Ji(this).reset(qo(e.to)),e.immediate||(e.fromValues=e.values.map(r=>r.lastPosition)),Ba(this)||(PE(this,!0),gc(this)||this._resume())}_resume(){mi.skipAnimation?this.finish():yp.start(this)}_stop(e,r){if(Ba(this)){PE(this,!1);let n=this.animation;Bt(n.values,o=>{o.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),cc(this,{type:"idle",parent:this});let i=r?_p(this.get()):qi(this.get(),hc(this,e??n.to));Ap(this._pendingCalls,i),n.changed&&(n.changed=!1,mc(this,"onRest",i,this))}}};function hc(t,e){let r=yc(e),n=yc(t.get());return Tn(n,r)}function ZE(t,e=t.loop,r=t.to){let n=hs(e);if(n){let i=n!==!0&&YE(n),o=(i||t).reverse,s=!i||i.reset;return bc(so({},t,{loop:e,default:!1,pause:void 0,to:!o||d0(r)?r:void 0,from:s?t.from:void 0,reset:s},i))}}function bc(t){let{to:e,from:r}=t=YE(t),n=new Set;return Te.obj(e)&&zE(e,n),Te.obj(r)&&zE(r,n),t.keys=n.size?Array.from(n):null,t}function vS(t){let e=bc(t);return Te.und(e.default)&&(e.default=_0(e)),e}function zE(t,e){Xi(t,(r,n)=>r!=null&&e.add(n))}var ES=["onStart","onRest","onChange","onPause","onResume"];function NE(t,e,r){t.animation[r]=e[r]!==VE(e,r)?WE(e[r],t.key):void 0}function mc(t,e,...r){var n,i,o,s;(n=(i=t.animation)[e])==null||n.call(i,...r),(o=(s=t.defaultProps)[e])==null||o.call(s,...r)}var bS=["onStart","onChange","onRest"],_S=1,v0=class{constructor(e,r){this.id=_S++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),r&&(this._flush=r),e&&this.start(so({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){let e={};return this.each((r,n)=>e[n]=r.get()),e}set(e){for(let r in e){let n=e[r];Te.und(n)||this.springs[r].set(n)}}update(e){return e&&this.queue.push(bc(e)),this}start(e){let{queue:r}=this;return e?r=hi(e).map(bc):this.queue=[],this._flush?this._flush(this,r):(o4(this,r),E0(this,r))}stop(e,r){if(e!==!!e&&(r=e),r){let n=this.springs;Bt(hi(r),i=>n[i].stop(!!e))}else vc(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(Te.und(e))this.start({pause:!0});else{let r=this.springs;Bt(hi(e),n=>r[n].pause())}return this}resume(e){if(Te.und(e))this.start({pause:!1});else{let r=this.springs;Bt(hi(e),n=>r[n].resume())}return this}each(e){Xi(this.springs,e)}_onFrame(){let{onStart:e,onChange:r,onRest:n}=this._events,i=this._active.size>0,o=this._changed.size>0;(i&&!this._started||o&&!this._started)&&(this._started=!0,mp(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));let s=!i&&this._started,p=o||s&&n.size?this.get():null;o&&r.size&&mp(r,([l,c])=>{c.value=p,l(c,this,this._item)}),s&&(this._started=!1,mp(n,([l,c])=>{c.value=p,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Xe.onFrame(this._onFrame)}};function E0(t,e){return Promise.all(e.map(r=>$E(t,r))).then(r=>C0(t,r))}async function $E(t,e,r){let{keys:n,to:i,from:o,loop:s,onRest:p,onResolve:l}=e,c=Te.obj(e.default)&&e.default;s&&(e.loop=!1),i===!1&&(e.to=null),o===!1&&(e.from=null);let u=Te.arr(i)||Te.fun(i)?i:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):Bt(bS,A=>{let m=e[A];if(Te.fun(m)){let h=t._events[A];e[A]=({finished:y,cancelled:E})=>{let b=h.get(m);b?(y||(b.finished=!1),E&&(b.cancelled=!0)):h.set(m,{value:null,finished:y||!1,cancelled:E||!1})},c&&(c[A]=e[A])}});let d=t._state;e.pause===!d.paused?(d.paused=e.pause,Ap(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);let f=(n||Object.keys(t.springs)).map(A=>t.springs[A].start(e)),g=e.cancel===!0||VE(e,"cancel")===!0;(u||g&&d.asyncId)&&f.push(KE(++t._lastAsyncId,{props:e,state:d,actions:{pause:Qu,resume:Qu,start(A,m){g?(vc(d,t._lastAsyncId),m(_p(t))):(A.onRest=p,m(JE(u,A,d,t)))}}})),d.paused&&await new Promise(A=>{d.resumeQueue.add(A)});let v=C0(t,await Promise.all(f));if(s&&v.finished&&!(r&&v.noop)){let A=ZE(e,s,i);if(A)return o4(t,[A]),$E(t,A,!0)}return l&&Xe.batchedUpdates(()=>l(v,t,t.item)),v}function UE(t,e){let r=so({},t.springs);return e&&Bt(hi(e),n=>{Te.und(n.keys)&&(n=bc(n)),Te.obj(n.to)||(n=so({},n,{to:void 0})),r4(r,n,i=>t4(i))}),e4(t,r),r}function e4(t,e){Xi(e,(r,n)=>{t.springs[n]||(t.springs[n]=r,us(r,t))})}function t4(t,e){let r=new y0;return r.key=t,e&&us(r,e),r}function r4(t,e,r){e.keys&&Bt(e.keys,n=>{(t[n]||(t[n]=r(n)))._prepareNode(e)})}function o4(t,e){Bt(e,r=>{r4(t.springs,r,n=>t4(n,t))})}function CS(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var RS=["children"],af=t=>{let{children:e}=t,r=CS(t,RS),n=QE(nf),i=r.pause||!!n.pause,o=r.immediate||!!n.immediate;r=ME(()=>({pause:i,immediate:o}),[i,o]);let{Provider:s}=nf;return _c.createElement(s,{value:r},e)},nf=BS(af,{});af.Provider=nf.Provider;af.Consumer=nf.Consumer;function BS(t,e){return Object.assign(t,_c.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var xS=()=>{let t=[],e=function(i){xE();let o=[];return Bt(t,(s,p)=>{if(Te.und(i))o.push(s.start());else{let l=r(i,s,p);l&&o.push(s.start(l))}}),o};e.current=t,e.add=function(n){t.includes(n)||t.push(n)},e.delete=function(n){let i=t.indexOf(n);~i&&t.splice(i,1)},e.pause=function(){return Bt(t,n=>n.pause(...arguments)),this},e.resume=function(){return Bt(t,n=>n.resume(...arguments)),this},e.set=function(n){Bt(t,i=>i.set(n))},e.start=function(n){let i=[];return Bt(t,(o,s)=>{if(Te.und(n))i.push(o.start());else{let p=this._getProps(n,o,s);p&&i.push(o.start(p))}}),i},e.stop=function(){return Bt(t,n=>n.stop(...arguments)),this},e.update=function(n){return Bt(t,(i,o)=>i.update(this._getProps(n,i,o))),this};let r=function(i,o,s){return Te.fun(i)?i(s,o):i};return e._getProps=r,e};function MS(t,e,r){let n=Te.fun(e)&&e;n&&!r&&(r=[]);let i=tf(()=>n||arguments.length==3?xS():void 0,[]),o=DE(0),s=Ku(),p=tf(()=>({ctrls:[],queue:[],flush(h,y){let E=UE(h,y);return o.current>0&&!p.queue.length&&!Object.keys(E).some(_=>!h.springs[_])?E0(h,y):new Promise(_=>{e4(h,E),p.queue.push(()=>{_(E0(h,y))}),s()})}}),[]),l=DE([...p.ctrls]),c=[],u=a0(t)||0;tf(()=>{Bt(l.current.slice(t,u),h=>{gS(h,i),h.stop(!0)}),l.current.length=t,d(u,t)},[t]),tf(()=>{d(0,Math.min(u,t))},r);function d(h,y){for(let E=h;E<y;E++){let b=l.current[E]||(l.current[E]=new v0(null,p.flush)),_=n?n(E,b):e[E];_&&(c[E]=vS(_))}}let f=l.current.map((h,y)=>UE(h,c[y])),g=QE(af),v=a0(g),A=g!==v&&fS(g);bp(()=>{o.current++,p.ctrls=l.current;let{queue:h}=p;h.length&&(p.queue=[],Bt(h,y=>y())),Bt(l.current,(y,E)=>{i?.add(y),A&&y.start({default:g});let b=c[E];b&&(hS(y,b.ref),y.ref?y.queue.push(b):y.start(b))})}),Xu(()=>()=>{Bt(p.ctrls,h=>h.stop(!0))});let m=f.map(h=>so({},h));return i?[m,i]:m}function i4(t,e){let r=Te.fun(t),[[n],i]=MS(1,r?t:[t],r?e||[]:e);return r||arguments.length==2?[n,i]:n}var jE;(function(t){t.MOUNT="mount",t.ENTER="enter",t.UPDATE="update",t.LEAVE="leave"})(jE||(jE={}));var b0=class extends Ec{constructor(e,r){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=Ra(...r);let n=this._get(),i=ef(n);$u(this,i.create(n))}advance(e){let r=this._get(),n=this.get();Tn(r,n)||(Ji(this).setValue(r),this._onChange(r,this.idle)),!this.idle&&HE(this._active)&&c0(this)}_get(){let e=Te.arr(this.source)?this.source.map(qo):hi(qo(this.source));return this.calc(...e)}_start(){this.idle&&!HE(this._active)&&(this.idle=!1,Bt(fc(this),e=>{e.done=!1}),mi.skipAnimation?(Xe.batchedUpdates(()=>this.advance()),c0(this)):yp.start(this))}_attach(){let e=1;Bt(hi(this.source),r=>{Ti(r)&&us(r,this),h0(r)&&(r.idle||this._active.add(r),e=Math.max(e,r.priority+1))}),this.priority=e,this._start()}_detach(){Bt(hi(this.source),e=>{Ti(e)&&vp(e,this)}),this._active.clear(),c0(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=hi(this.source).reduce((r,n)=>Math.max(r,(h0(n)?n.priority:0)+1),0))}};function wS(t){return t.idle!==!1}function HE(t){return!t.size||Array.from(t).every(wS)}function c0(t){t.idle||(t.idle=!0,Bt(fc(t),e=>{e.done=!0}),cc(t,{type:"idle",parent:t}))}mi.assign({createStringInterpolator:Yu,to:(t,e)=>new b0(t,e)});var vJ=yp.advance;import*as IS from"three";var FS=["primitive"].concat(Object.keys(IS).filter(t=>/^[A-Z]/.test(t)).map(t=>t[0].toLowerCase()+t.slice(1)));mi.assign({createStringInterpolator:Yu,colors:bE,frameLoop:"demand"});TS(()=>{Xe.advance()});var OS=OE(FS,{applyAnimatedValues:SS}),n4=OS.animated;function DS(t,e,r){return Math.max(e,Math.min(t,r))}var ar={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function a4(t,e,r){return e===0||Math.abs(e)===1/0?Math.pow(t,r*5):t*e*r/(e+r*t)}function s4(t,e,r,n=.15){return n===0?DS(t,e,r):t<e?-a4(e-t,r-e,n)+e:t>r?+a4(t-r,r-e,n)+r:t}function p4(t,[e,r],[n,i]){let[[o,s],[p,l]]=t;return[s4(e,o,s,n),s4(r,p,l,i)]}function kS(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LS(t){var e=kS(t,"string");return typeof e=="symbol"?e:String(e)}function Lr(t,e,r){return e=LS(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?l4(Object(r),!0).forEach(function(n){Lr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var y4={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function c4(t){return t?t[0].toUpperCase()+t.slice(1):""}var PS=["enter","leave"];function GS(t=!1,e){return t&&!PS.includes(e)}function v4(t,e="",r=!1){let n=y4[t],i=n&&n[e]||e;return"on"+c4(t)+c4(i)+(GS(r,i)?"Capture":"")}var zS=["gotpointercapture","lostpointercapture"];function E4(t){let e=t.substring(2).toLowerCase(),r=!!~e.indexOf("passive");r&&(e=e.replace("passive",""));let n=zS.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(n);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:r}}function b4(t,e=""){let r=y4[t],n=r&&r[e]||e;return t+n}function Cc(t){return"touches"in t}function _4(t){return Cc(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function NS(t){return Array.from(t.touches).filter(e=>{var r,n;return e.target===t.currentTarget||((r=t.currentTarget)===null||r===void 0||(n=r.contains)===null||n===void 0?void 0:n.call(r,e.target))})}function US(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function C4(t){return Cc(t)?US(t)[0]:t}function B0(t,e){try{let r=e.clientX-t.clientX,n=e.clientY-t.clientY,i=(e.clientX+t.clientX)/2,o=(e.clientY+t.clientY)/2,s=Math.hypot(r,n);return{angle:-(Math.atan2(r,n)*180)/Math.PI,distance:s,origin:[i,o]}}catch{}return null}function R4(t){return NS(t).map(e=>e.identifier)}function d4(t,e){let[r,n]=Array.from(t.touches).filter(i=>e.includes(i.identifier));return B0(r,n)}function R0(t){let e=C4(t);return Cc(t)?e.identifier:e.pointerId}function Cp(t){let e=C4(t);return[e.clientX,e.clientY]}var u4=40,f4=800;function B4(t){let{deltaX:e,deltaY:r,deltaMode:n}=t;return n===1?(e*=u4,r*=u4):n===2&&(e*=f4,r*=f4),[e,r]}function jS(t){var e,r;let{scrollX:n,scrollY:i,scrollLeft:o,scrollTop:s}=t.currentTarget;return[(e=n??o)!==null&&e!==void 0?e:0,(r=i??s)!==null&&r!==void 0?r:0]}function HS(t){let e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){let{shiftKey:r,altKey:n,metaKey:i,ctrlKey:o}=t;Object.assign(e,{shiftKey:r,altKey:n,metaKey:i,ctrlKey:o})}return e}function sf(t,...e){return typeof t=="function"?t(...e):t}function QS(){}function x4(...t){return t.length===0?QS:t.length===1?t[0]:function(){let e;for(let r of t)e=r.apply(this,arguments)||e;return e}}function g4(t,e){return Object.assign({},e,t||{})}var WS=32,pf=class{constructor(e,r,n){this.ctrl=e,this.args=r,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:e,shared:r,ingKey:n,args:i}=this;r[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){let r=this.state,n=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=e.target,r.currentTarget=e.currentTarget,r.lastOffset=n.from?sf(n.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=e.timeStamp)}computeValues(e){let r=this.state;r._values=e,r.values=this.config.transform(e)}computeInitial(){let e=this.state;e._initial=e._values,e.initial=e.values}compute(e){let{state:r,config:n,shared:i}=this;r.args=this.args;let o=0;if(e&&(r.event=e,n.preventDefault&&e.cancelable&&r.event.preventDefault(),r.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,HS(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,o=e.timeStamp-r.timeStamp,r.timeStamp=e.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){let C=r._delta.map(Math.abs);ar.addTo(r._distance,C)}this.axisIntent&&this.axisIntent(e);let[s,p]=r._movement,[l,c]=n.threshold,{_step:u,values:d}=r;if(n.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(s)>=l&&d[0]),u[1]===!1&&(u[1]=Math.abs(p)>=c&&d[1])):(u[0]===!1&&(u[0]=Math.abs(s)>=l&&Math.sign(s)*l),u[1]===!1&&(u[1]=Math.abs(p)>=c&&Math.sign(p)*c)),r.intentional=u[0]!==!1||u[1]!==!1,!r.intentional)return;let f=[0,0];if(n.hasCustomTransform){let[C,B]=d;f[0]=u[0]!==!1?C-u[0]:0,f[1]=u[1]!==!1?B-u[1]:0}else f[0]=u[0]!==!1?s-u[0]:0,f[1]=u[1]!==!1?p-u[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(f);let g=r.offset,v=r._active&&!r._blocked||r.active;v&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=i[this.ingKey]=r._active,e&&(r.first&&("bounds"in n&&(r._bounds=sf(n.bounds,r)),this.setup&&this.setup()),r.movement=f,this.computeOffset()));let[A,m]=r.offset,[[h,y],[E,b]]=r._bounds;r.overflow=[A<h?-1:A>y?1:0,m<E?-1:m>b?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;let _=r._active?n.rubberband||[0,0]:[0,0];if(r.offset=p4(r._bounds,r.offset,_),r.delta=ar.sub(r.offset,g),this.computeMovement(),v&&(!r.last||o>WS)){r.delta=ar.sub(r.offset,g);let C=r.delta.map(Math.abs);ar.addTo(r.distance,C),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&o>0&&(r.velocity=[C[0]/o,C[1]/o],r.timeDelta=o)}}emit(){let e=this.state,r=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;let i=this.handler(mr(mr(mr({},r),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}};function VS([t,e],r){let n=Math.abs(t),i=Math.abs(e);if(n>i&&n>r)return"x";if(i>n&&i>r)return"y"}var As=class extends pf{constructor(...e){super(...e),Lr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=ar.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=ar.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){let r=this.state,n=this.config;if(!r.axis&&e){let i=typeof n.axisThreshold=="object"?n.axisThreshold[_4(e)]:n.axisThreshold;r.axis=VS(r._movement,i)}r._blocked=(n.lockDirection||!!n.axis)&&!r.axis||!!n.axis&&n.axis!==r.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}},YS=t=>t,h4=.15,M4={enabled(t=!0){return t},eventOptions(t,e,r){return mr(mr({},r.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[h4,h4];case!1:return[0,0];default:return ar.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return ar.toVector(t)},transform(t,e,r){let n=t||r.shared.transform;return this.hasCustomTransform=!!n,n||YS},threshold(t){return ar.toVector(t,0)}},KS=0,ys=mr(mr({},M4),{},{axis(t,e,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(t=KS){return t},bounds(t={}){if(typeof t=="function")return o=>ys.bounds(t(o));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;let{left:e=-1/0,right:r=1/0,top:n=-1/0,bottom:i=1/0}=t;return[[e,r],[n,i]]}}),m4={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]},x0=class extends As{constructor(...e){super(...e),Lr(this,"ingKey","dragging")}reset(){super.reset();let e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){let e=this.state;if(e._bounds instanceof HTMLElement){let r=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),i={left:r.left-n.left+e.offset[0],right:r.right-n.right+e.offset[0],top:r.top-n.top+e.offset[1],bottom:r.bottom-n.bottom+e.offset[1]};e._bounds=ys.bounds(i)}}cancel(){let e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){let r=this.config,n=this.state;if(e.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(e.buttons):r.pointerButtons!==-1&&r.pointerButtons!==e.buttons))return;let i=this.ctrl.setEventIds(e);r.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&n._pointerActive)&&(this.start(e),this.setupPointer(e),n._pointerId=R0(e),n._pointerActive=!0,this.computeValues(Cp(e)),this.computeInitial(),r.preventScrollAxis&&_4(e)!=="mouse"?(n._active=!1,this.setupScrollPrevention(e)):r.delay>0?(this.setupDelayTrigger(e),r.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){let r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(e),this.emit()}pointerMove(e){let r=this.state,n=this.config;if(!r._pointerActive)return;let i=R0(e);if(r._pointerId!==void 0&&i!==r._pointerId)return;let o=Cp(e);if(document.pointerLockElement===e.target?r._delta=[e.movementX,e.movementY]:(r._delta=ar.sub(o,r._values),this.computeValues(o)),ar.addTo(r._movement,r._delta),this.compute(e),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===n.preventScrollAxis||n.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}let r=this.state,n=this.config;if(!r._active||!r._pointerActive)return;let i=R0(e);if(r._pointerId!==void 0&&i!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);let[o,s]=r._distance;if(r.tap=o<=n.tapsThreshold&&s<=n.tapsThreshold,r.tap&&n.filterTaps)r._force=!0;else{let[p,l]=r._delta,[c,u]=r._movement,[d,f]=n.swipe.velocity,[g,v]=n.swipe.distance,A=n.swipe.duration;if(r.elapsedTime<A){let m=Math.abs(p/r.timeDelta),h=Math.abs(l/r.timeDelta);m>d&&Math.abs(c)>g&&(r.swipe[0]=Math.sign(p)),h>f&&Math.abs(u)>v&&(r.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){let r=this.config,n=r.device;r.pointerLock&&e.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,XS(e);let r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){let r=m4[e.key];if(r){let n=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=r(this.config.keyboardDisplacement,i),n._keyboardActive=!0,ar.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in m4&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){let r=this.config.device;e(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(r,"change",this.pointerMove.bind(this)),e(r,"end",this.pointerUp.bind(this)),e(r,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}};function XS(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}var Rc=typeof window<"u"&&window.document&&window.document.createElement;function w4(){return Rc&&"ontouchstart"in window}function JS(){return w4()||Rc&&window.navigator.maxTouchPoints>1}function qS(){return Rc&&"onpointerdown"in window}function ZS(){return Rc&&"exitPointerLock"in window.document}function $S(){try{return"constructor"in GestureEvent}catch{return!1}}var Ai={isBrowser:Rc,gesture:$S(),touch:w4(),touchscreen:JS(),pointer:qS(),pointerLock:ZS()},eI=250,tI=180,rI=.5,oI=50,iI=250,nI=10,A4={mouse:0,touch:0,pen:8},aI=mr(mr({},ys),{},{device(t,e,{pointer:{touch:r=!1,lock:n=!1,mouse:i=!1}={}}){return this.pointerLock=n&&Ai.pointerLock,Ai.touch&&r?"touch":this.pointerLock?"mouse":Ai.pointer&&!i?"pointer":Ai.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&t?eI:void 0,!(!Ai.touchscreen||r===!1))return t||(r!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:r=!0,buttons:n=1,keys:i=!0}={}}){return this.pointerButtons=n,this.keys=i,!this.pointerLock&&this.device==="pointer"&&r},threshold(t,e,{filterTaps:r=!1,tapsThreshold:n=3,axis:i=void 0}){let o=ar.toVector(t,r?n:i?1:0);return this.filterTaps=r,this.tapsThreshold=n,o},swipe({velocity:t=rI,distance:e=oI,duration:r=iI}={}){return{velocity:this.transform(ar.toVector(t)),distance:this.transform(ar.toVector(e)),duration:r}},delay(t=0){switch(t){case!0:return tI;case!1:return 0;default:return t}},axisThreshold(t){return t?mr(mr({},A4),t):A4},keyboardDisplacement(t=nI){return t}});function T4(t){let[e,r]=t.overflow,[n,i]=t._delta,[o,s]=t._direction;(e<0&&n>0&&o<0||e>0&&n<0&&o>0)&&(t._movement[0]=t._movementBound[0]),(r<0&&i>0&&s<0||r>0&&i<0&&s>0)&&(t._movement[1]=t._movementBound[1])}var sI=30,pI=100,M0=class extends pf{constructor(...e){super(...e),Lr(this,"ingKey","pinching"),Lr(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();let e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){let{type:e,movement:r,lastOffset:n}=this.state;e==="wheel"?this.state.offset=ar.add(r,n):this.state.offset=[(1+r[0])*n[0],r[1]+n[1]]}computeMovement(){let{offset:e,lastOffset:r}=this.state;this.state.movement=[e[0]/r[0],e[1]-r[1]]}axisIntent(){let e=this.state,[r,n]=e._movement;if(!e.axis){let i=Math.abs(r)*sI-Math.abs(n);i<0?e.axis="angle":i>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){let e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);let r=this.state,n=this.ctrl.touchIds;if(r._active&&r._touchIds.every(o=>n.has(o))||n.size<2)return;this.start(e),r._touchIds=Array.from(n).slice(0,2);let i=d4(e,r._touchIds);i&&this.pinchStart(e,i)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);let r=this.state,n=r._pointerEvents,i=this.ctrl.pointerIds;if(r._active&&Array.from(n.keys()).every(s=>i.has(s))||(n.size<2&&n.set(e.pointerId,e),r._pointerEvents.size<2))return;this.start(e);let o=B0(...Array.from(n.values()));o&&this.pinchStart(e,o)}pinchStart(e,r){let n=this.state;n.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;let r=d4(e,this.state._touchIds);r&&this.pinchMove(e,r)}pointerMove(e){let r=this.state._pointerEvents;if(r.has(e.pointerId)&&r.set(e.pointerId,e),!this.state._active)return;let n=B0(...Array.from(r.values()));n&&this.pinchMove(e,n)}pinchMove(e,r){let n=this.state,i=n._values[1],o=r.angle-i,s=0;Math.abs(o)>270&&(s+=Math.sign(o)),this.computeValues([r.distance,r.angle-360*s]),n.origin=r.origin,n.turns=s,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){let r=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}r._pointerEvents.has(e.pointerId)&&r._pointerEvents.delete(e.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();let r=this.state;r._active||(this.start(e),this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;let r=this.state;this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY];let n=r._movement;r._movement=[e.scale-1,e.rotation],r._delta=ar.sub(r._movement,n),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){let r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(n=>e[n]):!e[r])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();let n=this.state;n._delta=[-B4(e)[1]/pI*n.offset[0],0],ar.addTo(n._movement,n._delta),T4(n),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){let r=this.config.device;r&&(e(r,"start",this[r+"Start"].bind(this)),e(r,"change",this[r+"Move"].bind(this)),e(r,"end",this[r+"End"].bind(this)),e(r,"cancel",this[r+"End"].bind(this)),e("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}},lI=mr(mr({},M4),{},{device(t,e,{shared:r,pointer:{touch:n=!1}={}}){if(r.target&&!Ai.touch&&Ai.gesture)return"gesture";if(Ai.touch&&n)return"touch";if(Ai.touchscreen){if(Ai.pointer)return"pointer";if(Ai.touch)return"touch"}},bounds(t,e,{scaleBounds:r={},angleBounds:n={}}){let i=s=>{let p=g4(sf(r,s),{min:-1/0,max:1/0});return[p.min,p.max]},o=s=>{let p=g4(sf(n,s),{min:-1/0,max:1/0});return[p.min,p.max]};return typeof r!="function"&&typeof n!="function"?[i(),o()]:s=>[i(s),o(s)]},threshold(t,e,r){return this.lockDirection=r.axis==="lock",ar.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}}),w0=class extends As{constructor(...e){super(...e),Lr(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Cp(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;let r=Cp(e),n=this.state;n._delta=ar.sub(r,n._values),ar.addTo(n._movement,n._delta),this.computeValues(r),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}},cI=mr(mr({},ys),{},{mouseOnly:(t=!0)=>t}),T0=class extends As{constructor(...e){super(...e),Lr(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();let r=this.state,n=jS(e);r._delta=ar.sub(n,r._values),ar.addTo(r._movement,r._delta),this.computeValues(n),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}},dI=ys,S0=class extends As{constructor(...e){super(...e),Lr(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){let r=this.state;r._delta=B4(e),ar.addTo(r._movement,r._delta),T4(r),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},uI=ys,I0=class extends As{constructor(...e){super(...e),Lr(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Cp(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;let r=this.state;if(!r._active)return;r._active=!1;let n=Cp(e);r._movement=r._delta=ar.sub(n,r._values),this.computeValues(n),this.compute(e),r.delta=r.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}},fI=mr(mr({},ys),{},{mouseOnly:(t=!0)=>t}),Bc=new Map,xc=new Map;function F0(t){Bc.set(t.key,t.engine),xc.set(t.key,t.resolver)}var O0={key:"drag",engine:x0,resolver:aI},D0={key:"hover",engine:I0,resolver:fI},k0={key:"move",engine:w0,resolver:cI},L0={key:"pinch",engine:M0,resolver:lI},P0={key:"scroll",engine:T0,resolver:dI},G0={key:"wheel",engine:S0,resolver:uI};import N0 from"react";function gI(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function hI(t,e){if(t==null)return{};var r=gI(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var mI={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=Ai.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},AI=["target","eventOptions","window","enabled","transform"];function lf(t={},e){let r={};for(let[n,i]of Object.entries(e))switch(typeof i){case"function":r[n]=i.call(r,t[n],n,t);break;case"object":r[n]=lf(t[n],i);break;case"boolean":i&&(r[n]=t[n]);break}return r}function yI(t,e,r={}){let n=t,{target:i,eventOptions:o,window:s,enabled:p,transform:l}=n,c=hI(n,AI);if(r.shared=lf({target:i,eventOptions:o,window:s,enabled:p,transform:l},mI),e){let u=xc.get(e);r[e]=lf(mr({shared:r.shared},c),u)}else for(let u in c){let d=xc.get(u);d&&(r[u]=lf(mr({shared:r.shared},c[u]),d))}return r}var cf=class{constructor(e,r){Lr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=r}add(e,r,n,i,o){let s=this._listeners,p=b4(r,n),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=mr(mr({},l),o);e.addEventListener(p,i,c);let u=()=>{e.removeEventListener(p,i,c),s.delete(u)};return s.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}},z0=class{constructor(){Lr(this,"_timeouts",new Map)}add(e,r,n=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(r,n,...i))}remove(e){let r=this._timeouts.get(e);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}},df=class{constructor(e){Lr(this,"gestures",new Set),Lr(this,"_targetEventStore",new cf(this)),Lr(this,"gestureEventStores",{}),Lr(this,"gestureTimeoutStores",{}),Lr(this,"handlers",{}),Lr(this,"config",{}),Lr(this,"pointerIds",new Set),Lr(this,"touchIds",new Set),Lr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),vI(this,e)}setEventIds(e){if(Cc(e))return this.touchIds=new Set(R4(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,r){this.handlers=e,this.nativeHandlers=r}applyConfig(e,r){this.config=yI(e,r,this.config)}clean(){this._targetEventStore.clean();for(let e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){let r=this.config.shared,n={},i;if(!(r.target&&(i=r.target(),!i))){if(r.enabled){for(let s of this.gestures){let p=this.config[s],l=S4(n,p.eventOptions,!!i);if(p.enabled){let c=Bc.get(s);new c(this,e,s).bind(l)}}let o=S4(n,r.eventOptions,!!i);for(let s in this.nativeHandlers)o(s,"",p=>this.nativeHandlers[s](mr(mr({},this.state.shared),{},{event:p,args:e})),void 0,!0)}for(let o in n)n[o]=x4(...n[o]);if(!i)return n;for(let o in n){let{device:s,capture:p,passive:l}=E4(o);this._targetEventStore.add(i,s,"",n[o],{capture:p,passive:l})}}}};function Rp(t,e){t.gestures.add(e),t.gestureEventStores[e]=new cf(t,e),t.gestureTimeoutStores[e]=new z0}function vI(t,e){e.drag&&Rp(t,"drag"),e.wheel&&Rp(t,"wheel"),e.scroll&&Rp(t,"scroll"),e.move&&Rp(t,"move"),e.pinch&&Rp(t,"pinch"),e.hover&&Rp(t,"hover")}var S4=(t,e,r)=>(n,i,o,s={},p=!1)=>{var l,c;let u=(l=s.capture)!==null&&l!==void 0?l:e.capture,d=(c=s.passive)!==null&&c!==void 0?c:e.passive,f=p?n:v4(n,i,u);r&&d&&(f+="Passive"),t[f]=t[f]||[],t[f].push(o)},EI=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function bI(t){let e={},r={},n=new Set;for(let i in t)EI.test(i)?(n.add(RegExp.lastMatch),r[i]=t[i]):e[i]=t[i];return[r,e,n]}function Bp(t,e,r,n,i,o){if(!t.has(r)||!Bc.has(n))return;let s=r+"Start",p=r+"End",l=c=>{let u;return c.first&&s in e&&e[s](c),r in e&&(u=e[r](c)),c.last&&p in e&&e[p](c),u};i[n]=l,o[n]=o[n]||{}}function I4(t,e){let[r,n,i]=bI(t),o={};return Bp(i,r,"onDrag","drag",o,e),Bp(i,r,"onWheel","wheel",o,e),Bp(i,r,"onScroll","scroll",o,e),Bp(i,r,"onPinch","pinch",o,e),Bp(i,r,"onMove","move",o,e),Bp(i,r,"onHover","hover",o,e),{handlers:o,config:e,nativeHandlers:n}}function _I(t,e={},r,n){let i=N0.useMemo(()=>new df(t),[]);if(i.applyHandlers(t,n),i.applyConfig(e,r),N0.useEffect(i.effect.bind(i)),N0.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function CI(t){return t.forEach(F0),function(r,n){let{handlers:i,nativeHandlers:o,config:s}=I4(r,n||{});return _I(i,s,void 0,o)}}function F4(t,e){return CI([O0,L0,P0,G0,k0,D0])(t,e||{})}function RI({enabled:t=!0,snap:e,global:r,domElement:n,cursor:i=!0,children:o,speed:s=1,rotation:p=[0,0,0],zoom:l=1,polar:c=[0,Math.PI/2],azimuth:u=[-1/0,1/0],config:d={mass:1,tension:170,friction:26}}){let f=U0(C=>C.events),g=U0(C=>C.gl),v=n||f.connected||g.domElement,{size:A}=U0(),m=ea.useMemo(()=>[p[0]+c[0],p[0]+c[1]],[p[0],c[0],c[1]]),h=ea.useMemo(()=>[p[1]+u[0],p[1]+u[1]],[p[1],u[0],u[1]]),y=ea.useMemo(()=>[uf.clamp(p[0],...m),uf.clamp(p[1],...h),p[2]],[p[0],p[1],p[2],m,h]),[E,b]=i4(()=>({scale:1,rotation:y,config:d}));ea.useEffect(()=>void b.start({scale:1,rotation:y,config:d}),[y]),ea.useEffect(()=>{if(r&&i&&t)return v.style.cursor="grab",g.domElement.style.cursor="",()=>{v.style.cursor="default",g.domElement.style.cursor="default"}},[r,i,v,t]);let _=F4({onHover:({last:C})=>{i&&!r&&t&&(v.style.cursor=C?"auto":"grab")},onDrag:({down:C,delta:[B,R],memo:[M,x]=E.rotation.animation.to||y})=>{if(!t)return[R,B];i&&(v.style.cursor=C?"grabbing":"grab"),B=uf.clamp(x+B/A.width*Math.PI*s,...h),R=uf.clamp(M+R/A.height*Math.PI*s,...m);let T=e&&!C&&typeof e!="boolean"?e:d;return b.start({scale:C&&R>m[1]/2?l:1,rotation:e&&!C?y:[R,B,0],config:w=>w==="scale"?{...T,friction:T.friction*3}:T}),[R,B]}},{target:r?v:void 0});return ea.createElement(n4.group,te({},_?.(),E),o)}import*as Zi from"react";var O4=t=>(e,r,n)=>{let i=n.subscribe;return n.subscribe=(s,p,l)=>{let c=s;if(p){let u=l?.equalityFn||Object.is,d=s(n.getState());c=f=>{let g=s(f);if(!u(d,g)){let v=d;p(d=g,v)}},l?.fireImmediately&&p(d,d)}return i(c)},t(e,r,n)};var D4=Zi.createContext(null);function BI({map:t,children:e,onChange:r,domElement:n}){let i=t.map(l=>l.name+l.keys).join("-"),o=Zi.useMemo(()=>xu(O4(()=>t.reduce((l,c)=>({...l,[c.name]:!1}),{}))),[i]),s=Zi.useMemo(()=>[o.subscribe,o.getState,o],[i]),p=o.setState;return Zi.useEffect(()=>{let c=t.map(({name:g,keys:v,up:A})=>({keys:v,up:A,fn:m=>{p({[g]:m}),r&&r(g,m,s[1]())}})).reduce((g,{keys:v,fn:A,up:m=!0})=>(v.forEach(h=>g[h]={fn:A,pressed:!1,up:m}),g),{}),u=({key:g,code:v})=>{let A=c[g]||c[v];if(!A)return;let{fn:m,pressed:h,up:y}=A;A.pressed=!0,(y||!h)&&m(!0)},d=({key:g,code:v})=>{let A=c[g]||c[v];if(!A)return;let{fn:m,up:h}=A;A.pressed=!1,h&&m(!1)},f=n||window;return f.addEventListener("keydown",u,{passive:!0}),f.addEventListener("keyup",d,{passive:!0}),()=>{f.removeEventListener("keydown",u),f.removeEventListener("keyup",d)}},[n,i]),Zi.createElement(D4.Provider,{value:s,children:e})}function xI(t){let[e,r,n]=Zi.useContext(D4);return t?n(t):[e,r]}import*as jr from"react";import*as tg from"three";import{REVISION as MI}from"three";var Si=parseInt(MI.replace(/\D+/g,""));var Mc=Si>=125?"uv1":"uv2";import{DataTexture as SI,RGBAFormat as II,FloatType as FI,RepeatWrapping as k4,NearestFilter as OI,Mesh as DI,InstancedMesh as kI,DynamicDrawUsage as aq,Matrix4 as sq}from"three";var wI=Object.defineProperty,TI=(t,e,r)=>e in t?wI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wc=(t,e,r)=>(TI(t,typeof e!="symbol"?e+"":e,r),r),xp=4,Mp=1024,Sn=4,L4=(t=1)=>{let e=new Float32Array(Mp*Sn*t*xp),r=new SI(e,Mp,Sn*t,II,FI);return r.wrapS=k4,r.wrapT=k4,r.magFilter=OI,r.needsUpdate=!0,r},P4=(t,e,r=0)=>{let n=Math.floor(Mp*(Sn/4));e.arcLengthDivisions=n/2,e.updateArcLengths();let i=e.getSpacedPoints(n),o=e.computeFrenetFrames(n,!0);for(let s=0;s<n;s++){let p=Math.floor(s/Mp),l=s%Mp,c=i[s];ff(t,l,c.x,c.y,c.z,0+p+Sn*r),c=o.tangents[s],ff(t,l,c.x,c.y,c.z,1+p+Sn*r),c=o.normals[s],ff(t,l,c.x,c.y,c.z,2+p+Sn*r),c=o.binormals[s],ff(t,l,c.x,c.y,c.z,3+p+Sn*r)}t.needsUpdate=!0},ff=(t,e,r,n,i,o)=>{let s=t.image,{data:p}=s,l=xp*Mp*o;p[e*xp+l+0]=r,p[e*xp+l+1]=n,p[e*xp+l+2]=i,p[e*xp+l+3]=1},G4=t=>({spineTexture:{value:t},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}});function z4(t,e,r=1){t.__ok||(t.__ok=!0,t.onBeforeCompile=n=>{if(n.__modified)return;n.__modified=!0,Object.assign(n.uniforms,e);let i=`
		uniform sampler2D spineTexture;
		uniform float pathOffset;
		uniform float pathSegment;
		uniform float spineOffset;
		uniform float spineLength;
		uniform int flow;

		float textureLayers = ${Sn*r}.;
		float textureStacks = ${Sn/4}.;

		${n.vertexShader}
		`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,`
        void main() {
        #include <beginnormal_vertex>

        vec4 worldPos = modelMatrix * vec4(position, 1.);

        bool bend = flow > 0;
        float xWeight = bend ? 0. : 1.;

        #ifdef USE_INSTANCING
        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];
        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;
        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;
        #else
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;
        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;
        #endif

        mt = mod(mt, textureStacks);
        float rowOffset = floor(mt);

        #ifdef USE_INSTANCING
        rowOffset += instanceMatrix[3][1] * ${Sn}.;
        #endif

        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;
        mat3 basis = mat3(a, b, c);

        vec3 transformed = basis
          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)
          + spinePos;

        vec3 transformedNormal = normalMatrix * (basis * objectNormal);
			`).replace("#include <project_vertex>",`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
				gl_Position = projectionMatrix * mvPosition;`);n.vertexShader=i})}var Tc=class{constructor(e,r=1){wc(this,"curveArray"),wc(this,"curveLengthArray"),wc(this,"object3D"),wc(this,"splineTexure"),wc(this,"uniforms");let n=e.clone(),i=L4(r),o=G4(i);n.traverse(s=>{(s instanceof DI||s instanceof kI)&&(s.material=s.material.clone(),z4(s.material,o,r))}),this.curveArray=new Array(r),this.curveLengthArray=new Array(r),this.object3D=n,this.splineTexure=i,this.uniforms=o}updateCurve(e,r){if(e>=this.curveArray.length)throw Error("Index out of range for Flow");let n=r.getLength();this.uniforms.spineLength.value=n,this.curveLengthArray[e]=n,this.curveArray[e]=r,P4(this.splineTexure,r,e)}moveAlongCurve(e){this.uniforms.pathOffset.value+=e}};import{BufferGeometry as cq,BufferAttribute as j0,InterleavedBuffer as dq,InterleavedBufferAttribute as uq,TrianglesDrawMode as LI,TriangleFanDrawMode as N4,TriangleStripDrawMode as PI,Vector3 as xa,Float32BufferAttribute as fq}from"three";function H0(t,e=1e-4){e=Math.max(e,Number.EPSILON);let r={},n=t.getIndex(),i=t.getAttribute("position"),o=n?n.count:i.count,s=0,p=Object.keys(t.attributes),l={},c={},u=[],d=["getX","getY","getZ","getW"];for(let A=0,m=p.length;A<m;A++){let h=p[A];l[h]=[];let y=t.morphAttributes[h];y&&(c[h]=new Array(y.length).fill(0).map(()=>[]))}let f=Math.log10(1/e),g=Math.pow(10,f);for(let A=0;A<o;A++){let m=n?n.getX(A):A,h="";for(let y=0,E=p.length;y<E;y++){let b=p[y],_=t.getAttribute(b),C=_.itemSize;for(let B=0;B<C;B++)h+=`${~~(_[d[B]](m)*g)},`}if(h in r)u.push(r[h]);else{for(let y=0,E=p.length;y<E;y++){let b=p[y],_=t.getAttribute(b),C=t.morphAttributes[b],B=_.itemSize,R=l[b],M=c[b];for(let x=0;x<B;x++){let T=d[x];if(R.push(_[T](m)),C)for(let w=0,S=C.length;w<S;w++)M[w].push(C[w][T](m))}}r[h]=s,u.push(s),s++}}let v=t.clone();for(let A=0,m=p.length;A<m;A++){let h=p[A],y=t.getAttribute(h),E=new y.array.constructor(l[h]),b=new j0(E,y.itemSize,y.normalized);if(v.setAttribute(h,b),h in c)for(let _=0;_<c[h].length;_++){let C=t.morphAttributes[h][_],B=new C.array.constructor(c[h][_]),R=new j0(B,C.itemSize,C.normalized);v.morphAttributes[h][_]=R}}return v.setIndex(u),v}function gf(t,e){if(e===LI)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===N4||e===PI){let r=t.getIndex();if(r===null){let s=[],p=t.getAttribute("position");if(p!==void 0){for(let l=0;l<p.count;l++)s.push(l);t.setIndex(s),r=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}let n=r.count-2,i=[];if(r)if(e===N4)for(let s=1;s<=n;s++)i.push(r.getX(0)),i.push(r.getX(s)),i.push(r.getX(s+1));else for(let s=0;s<n;s++)s%2===0?(i.push(r.getX(s)),i.push(r.getX(s+1)),i.push(r.getX(s+2))):(i.push(r.getX(s+2)),i.push(r.getX(s+1)),i.push(r.getX(s)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=t.clone();return o.setIndex(i),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}function Sc(t,e=Math.PI/3){let r=Math.cos(e),n=(1+1e-10)*100,i=[new xa,new xa,new xa],o=new xa,s=new xa,p=new xa,l=new xa;function c(A){let m=~~(A.x*n),h=~~(A.y*n),y=~~(A.z*n);return`${m},${h},${y}`}let u=t.index?t.toNonIndexed():t,d=u.attributes.position,f={};for(let A=0,m=d.count/3;A<m;A++){let h=3*A,y=i[0].fromBufferAttribute(d,h+0),E=i[1].fromBufferAttribute(d,h+1),b=i[2].fromBufferAttribute(d,h+2);o.subVectors(b,E),s.subVectors(y,E);let _=new xa().crossVectors(o,s).normalize();for(let C=0;C<3;C++){let B=i[C],R=c(B);R in f||(f[R]=[]),f[R].push(_)}}let g=new Float32Array(d.count*3),v=new j0(g,3,!1);for(let A=0,m=d.count/3;A<m;A++){let h=3*A,y=i[0].fromBufferAttribute(d,h+0),E=i[1].fromBufferAttribute(d,h+1),b=i[2].fromBufferAttribute(d,h+2);o.subVectors(b,E),s.subVectors(y,E),p.crossVectors(o,s).normalize();for(let _=0;_<3;_++){let C=i[_],B=c(C),R=f[B];l.set(0,0,0);for(let M=0,x=R.length;M<x;M++){let T=R[M];p.dot(T)>r&&l.add(T)}l.normalize(),v.setXYZ(h+_,l.x,l.y,l.z)}}return u.setAttribute("normal",v),u}var Ii=Uint8Array,Ma=Uint16Array,V0=Uint32Array,U4=new Ii([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),j4=new Ii([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),GI=new Ii([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),H4=function(t,e){for(var r=new Ma(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new V0(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return[r,i]},Q4=H4(U4,2),W4=Q4[0],zI=Q4[1];W4[28]=258,zI[258]=28;var V4=H4(j4,0),NI=V4[0],hq=V4[1],Y0=new Ma(32768);for(Ft=0;Ft<32768;++Ft)ta=(Ft&43690)>>>1|(Ft&21845)<<1,ta=(ta&52428)>>>2|(ta&13107)<<2,ta=(ta&61680)>>>4|(ta&3855)<<4,Y0[Ft]=((ta&65280)>>>8|(ta&255)<<8)>>>1;var ta,Ft,Ic=(function(t,e,r){for(var n=t.length,i=0,o=new Ma(e);i<n;++i)++o[t[i]-1];var s=new Ma(e);for(i=0;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var p;if(r){p=new Ma(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],d=s[t[i]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)p[Y0[d]>>>l]=c}else for(p=new Ma(n),i=0;i<n;++i)t[i]&&(p[i]=Y0[s[t[i]-1]++]>>>15-t[i]);return p}),Fc=new Ii(288);for(Ft=0;Ft<144;++Ft)Fc[Ft]=8;var Ft;for(Ft=144;Ft<256;++Ft)Fc[Ft]=9;var Ft;for(Ft=256;Ft<280;++Ft)Fc[Ft]=7;var Ft;for(Ft=280;Ft<288;++Ft)Fc[Ft]=8;var Ft,Y4=new Ii(32);for(Ft=0;Ft<32;++Ft)Y4[Ft]=5;var Ft;var UI=Ic(Fc,9,1);var jI=Ic(Y4,5,1),Q0=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},$i=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},W0=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},HI=function(t){return(t/8|0)+(t&7&&1)},QI=function(t,e,r){(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length);var n=new(t instanceof Ma?Ma:t instanceof V0?V0:Ii)(r-e);return n.set(t.subarray(e,r)),n},WI=function(t,e,r){var n=t.length;if(!n||r&&!r.l&&n<5)return e||new Ii(0);var i=!e||r,o=!r||r.i;r||(r={}),e||(e=new Ii(n*3));var s=function(k){var O=e.length;if(k>O){var D=new Ii(Math.max(O*2,k));D.set(e),e=D}},p=r.f||0,l=r.p||0,c=r.b||0,u=r.l,d=r.d,f=r.m,g=r.n,v=n*8;do{if(!u){r.f=p=$i(t,l,1);var A=$i(t,l+1,3);if(l+=3,A)if(A==1)u=UI,d=jI,f=9,g=5;else if(A==2){var E=$i(t,l,31)+257,b=$i(t,l+10,15)+4,_=E+$i(t,l+5,31)+1;l+=14;for(var C=new Ii(_),B=new Ii(19),R=0;R<b;++R)B[GI[R]]=$i(t,l+R*3,7);l+=b*3;for(var M=Q0(B),x=(1<<M)-1,T=Ic(B,M,1),R=0;R<_;){var w=T[$i(t,l,x)];l+=w&15;var m=w>>>4;if(m<16)C[R++]=m;else{var S=0,I=0;for(m==16?(I=3+$i(t,l,3),l+=2,S=C[R-1]):m==17?(I=3+$i(t,l,7),l+=3):m==18&&(I=11+$i(t,l,127),l+=7);I--;)C[R++]=S}}var G=C.subarray(0,E),H=C.subarray(E);f=Q0(G),g=Q0(H),u=Ic(G,f,1),d=Ic(H,g,1)}else throw"invalid block type";else{var m=HI(l)+4,h=t[m-4]|t[m-3]<<8,y=m+h;if(y>n){if(o)throw"unexpected EOF";break}i&&s(c+h),e.set(t.subarray(m,y),c),r.b=c+=h,r.p=l=y*8;continue}if(l>v){if(o)throw"unexpected EOF";break}}i&&s(c+131072);for(var X=(1<<f)-1,Z=(1<<g)-1,z=l;;z=l){var S=u[W0(t,l)&X],Y=S>>>4;if(l+=S&15,l>v){if(o)throw"unexpected EOF";break}if(!S)throw"invalid length/literal";if(Y<256)e[c++]=Y;else if(Y==256){z=l,u=null;break}else{var L=Y-254;if(Y>264){var R=Y-257,Q=U4[R];L=$i(t,l,(1<<Q)-1)+W4[R],l+=Q}var V=d[W0(t,l)&Z],N=V>>>4;if(!V)throw"invalid distance";l+=V&15;var H=NI[N];if(N>3){var Q=j4[N];H+=W0(t,l)&(1<<Q)-1,l+=Q}if(l>v){if(o)throw"unexpected EOF";break}i&&s(c+131072);for(var P=c+L;c<P;c+=4)e[c]=e[c-H],e[c+1]=e[c+1-H],e[c+2]=e[c+2-H],e[c+3]=e[c+3-H];c=P}}r.l=u,r.p=z,r.b=c,u&&(p=1,r.m=f,r.d=d,r.n=g)}while(!p);return c==e.length?e:QI(e,0,c)};var VI=new Ii(0);var YI=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function vs(t,e){return WI((YI(t),t.subarray(2,-4)),e)}var KI=typeof TextDecoder<"u"&&new TextDecoder,XI=0;try{KI.decode(VI,{stream:!0}),XI=1}catch{}import{Mesh as JI,BufferGeometry as qI,BufferAttribute as hf,DynamicDrawUsage as mf,Sphere as ZI,Vector3 as $I,Color as Oc}from"three";var kc=class extends JI{constructor(e,r,n=!1,i=!1,o=1e4){let s=new qI;super(s,r),this.isMarchingCubes=!0;let p=this,l=new Float32Array(36),c=new Float32Array(36),u=new Float32Array(36);this.enableUvs=n,this.enableColors=i,this.init=function(y){this.resolution=y,this.isolation=80,this.size=y,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;let E=o*3;this.positionArray=new Float32Array(E*3);let b=new hf(this.positionArray,3);b.setUsage(mf),s.setAttribute("position",b),this.normalArray=new Float32Array(E*3);let _=new hf(this.normalArray,3);if(_.setUsage(mf),s.setAttribute("normal",_),this.enableUvs){this.uvArray=new Float32Array(E*2);let C=new hf(this.uvArray,2);C.setUsage(mf),s.setAttribute("uv",C)}if(this.enableColors){this.colorArray=new Float32Array(E*3);let C=new hf(this.colorArray,3);C.setUsage(mf),s.setAttribute("color",C)}s.boundingSphere=new ZI(new $I,1)};function d(y,E,b){return y+(E-y)*b}function f(y,E,b,_,C,B,R,M,x,T){let w=(b-R)/(M-R),S=p.normal_cache;l[E+0]=_+w*p.delta,l[E+1]=C,l[E+2]=B,c[E+0]=d(S[y+0],S[y+3],w),c[E+1]=d(S[y+1],S[y+4],w),c[E+2]=d(S[y+2],S[y+5],w),u[E+0]=d(p.palette[x*3+0],p.palette[T*3+0],w),u[E+1]=d(p.palette[x*3+1],p.palette[T*3+1],w),u[E+2]=d(p.palette[x*3+2],p.palette[T*3+2],w)}function g(y,E,b,_,C,B,R,M,x,T){let w=(b-R)/(M-R),S=p.normal_cache;l[E+0]=_,l[E+1]=C+w*p.delta,l[E+2]=B;let I=y+p.yd*3;c[E+0]=d(S[y+0],S[I+0],w),c[E+1]=d(S[y+1],S[I+1],w),c[E+2]=d(S[y+2],S[I+2],w),u[E+0]=d(p.palette[x*3+0],p.palette[T*3+0],w),u[E+1]=d(p.palette[x*3+1],p.palette[T*3+1],w),u[E+2]=d(p.palette[x*3+2],p.palette[T*3+2],w)}function v(y,E,b,_,C,B,R,M,x,T){let w=(b-R)/(M-R),S=p.normal_cache;l[E+0]=_,l[E+1]=C,l[E+2]=B+w*p.delta;let I=y+p.zd*3;c[E+0]=d(S[y+0],S[I+0],w),c[E+1]=d(S[y+1],S[I+1],w),c[E+2]=d(S[y+2],S[I+2],w),u[E+0]=d(p.palette[x*3+0],p.palette[T*3+0],w),u[E+1]=d(p.palette[x*3+1],p.palette[T*3+1],w),u[E+2]=d(p.palette[x*3+2],p.palette[T*3+2],w)}function A(y){let E=y*3;p.normal_cache[E]===0&&(p.normal_cache[E+0]=p.field[y-1]-p.field[y+1],p.normal_cache[E+1]=p.field[y-p.yd]-p.field[y+p.yd],p.normal_cache[E+2]=p.field[y-p.zd]-p.field[y+p.zd])}function m(y,E,b,_,C){let B=_+1,R=_+p.yd,M=_+p.zd,x=B+p.yd,T=B+p.zd,w=_+p.yd+p.zd,S=B+p.yd+p.zd,I=0,G=p.field[_],H=p.field[B],X=p.field[R],Z=p.field[x],z=p.field[M],Y=p.field[T],L=p.field[w],Q=p.field[S];G<C&&(I|=1),H<C&&(I|=2),X<C&&(I|=8),Z<C&&(I|=4),z<C&&(I|=16),Y<C&&(I|=32),L<C&&(I|=128),Q<C&&(I|=64);let V=K4[I];if(V===0)return 0;let N=p.delta,P=y+N,k=E+N,O=b+N;V&1&&(A(_),A(B),f(_*3,0,C,y,E,b,G,H,_,B)),V&2&&(A(B),A(x),g(B*3,3,C,P,E,b,H,Z,B,x)),V&4&&(A(R),A(x),f(R*3,6,C,y,k,b,X,Z,R,x)),V&8&&(A(_),A(R),g(_*3,9,C,y,E,b,G,X,_,R)),V&16&&(A(M),A(T),f(M*3,12,C,y,E,O,z,Y,M,T)),V&32&&(A(T),A(S),g(T*3,15,C,P,E,O,Y,Q,T,S)),V&64&&(A(w),A(S),f(w*3,18,C,y,k,O,L,Q,w,S)),V&128&&(A(M),A(w),g(M*3,21,C,y,E,O,z,L,M,w)),V&256&&(A(_),A(M),v(_*3,24,C,y,E,b,G,z,_,M)),V&512&&(A(B),A(T),v(B*3,27,C,P,E,b,H,Y,B,T)),V&1024&&(A(x),A(S),v(x*3,30,C,P,k,b,Z,Q,x,S)),V&2048&&(A(R),A(w),v(R*3,33,C,y,k,b,X,L,R,w)),I<<=4;let D,q,ae,K=0,re=0;for(;Dc[I+re]!=-1;)D=I+re,q=D+1,ae=D+2,h(l,c,u,3*Dc[D],3*Dc[q],3*Dc[ae]),re+=3,K++;return K}function h(y,E,b,_,C,B){let R=p.count*3;if(p.positionArray[R+0]=y[_],p.positionArray[R+1]=y[_+1],p.positionArray[R+2]=y[_+2],p.positionArray[R+3]=y[C],p.positionArray[R+4]=y[C+1],p.positionArray[R+5]=y[C+2],p.positionArray[R+6]=y[B],p.positionArray[R+7]=y[B+1],p.positionArray[R+8]=y[B+2],p.material.flatShading===!0){let M=(E[_+0]+E[C+0]+E[B+0])/3,x=(E[_+1]+E[C+1]+E[B+1])/3,T=(E[_+2]+E[C+2]+E[B+2])/3;p.normalArray[R+0]=M,p.normalArray[R+1]=x,p.normalArray[R+2]=T,p.normalArray[R+3]=M,p.normalArray[R+4]=x,p.normalArray[R+5]=T,p.normalArray[R+6]=M,p.normalArray[R+7]=x,p.normalArray[R+8]=T}else p.normalArray[R+0]=E[_+0],p.normalArray[R+1]=E[_+1],p.normalArray[R+2]=E[_+2],p.normalArray[R+3]=E[C+0],p.normalArray[R+4]=E[C+1],p.normalArray[R+5]=E[C+2],p.normalArray[R+6]=E[B+0],p.normalArray[R+7]=E[B+1],p.normalArray[R+8]=E[B+2];if(p.enableUvs){let M=p.count*2;p.uvArray[M+0]=y[_+0],p.uvArray[M+1]=y[_+2],p.uvArray[M+2]=y[C+0],p.uvArray[M+3]=y[C+2],p.uvArray[M+4]=y[B+0],p.uvArray[M+5]=y[B+2]}p.enableColors&&(p.colorArray[R+0]=b[_+0],p.colorArray[R+1]=b[_+1],p.colorArray[R+2]=b[_+2],p.colorArray[R+3]=b[C+0],p.colorArray[R+4]=b[C+1],p.colorArray[R+5]=b[C+2],p.colorArray[R+6]=b[B+0],p.colorArray[R+7]=b[B+1],p.colorArray[R+8]=b[B+2]),p.count+=3}this.addBall=function(y,E,b,_,C,B){let R=Math.sign(_);_=Math.abs(_);let M=B!=null,x=new Oc(y,E,b);if(M)try{x=B instanceof Oc?B:Array.isArray(B)?new Oc(Math.min(Math.abs(B[0]),1),Math.min(Math.abs(B[1]),1),Math.min(Math.abs(B[2]),1)):new Oc(B)}catch{x=new Oc(y,E,b)}let T=this.size*Math.sqrt(_/C),w=b*this.size,S=E*this.size,I=y*this.size,G=Math.floor(w-T);G<1&&(G=1);let H=Math.floor(w+T);H>this.size-1&&(H=this.size-1);let X=Math.floor(S-T);X<1&&(X=1);let Z=Math.floor(S+T);Z>this.size-1&&(Z=this.size-1);let z=Math.floor(I-T);z<1&&(z=1);let Y=Math.floor(I+T);Y>this.size-1&&(Y=this.size-1);let L,Q,V,N,P,k,O,D,q,ae,K;for(V=G;V<H;V++)for(P=this.size2*V,D=V/this.size-b,q=D*D,Q=X;Q<Z;Q++)for(N=P+this.size*Q,O=Q/this.size-E,ae=O*O,L=z;L<Y;L++)if(k=L/this.size-y,K=_/(1e-6+k*k+ae+q)-C,K>0){this.field[N+L]+=K*R;let re=Math.sqrt((L-I)*(L-I)+(Q-S)*(Q-S)+(V-w)*(V-w))/T,he=1-re*re*re*(re*(re*6-15)+10);this.palette[(N+L)*3+0]+=x.r*he,this.palette[(N+L)*3+1]+=x.g*he,this.palette[(N+L)*3+2]+=x.b*he}},this.addPlaneX=function(y,E){let b=this.size,_=this.yd,C=this.zd,B=this.field,R,M,x,T,w,S,I,G=b*Math.sqrt(y/E);for(G>b&&(G=b),R=0;R<G;R++)if(S=R/b,T=S*S,w=y/(1e-4+T)-E,w>0)for(M=0;M<b;M++)for(I=R+M*_,x=0;x<b;x++)B[C*x+I]+=w},this.addPlaneY=function(y,E){let b=this.size,_=this.yd,C=this.zd,B=this.field,R,M,x,T,w,S,I,G,H=b*Math.sqrt(y/E);for(H>b&&(H=b),M=0;M<H;M++)if(S=M/b,T=S*S,w=y/(1e-4+T)-E,w>0)for(I=M*_,R=0;R<b;R++)for(G=I+R,x=0;x<b;x++)B[C*x+G]+=w},this.addPlaneZ=function(y,E){let b=this.size,_=this.yd,C=this.zd,B=this.field,R,M,x,T,w,S,I,G,H=b*Math.sqrt(y/E);for(H>b&&(H=b),x=0;x<H;x++)if(S=x/b,T=S*S,w=y/(1e-4+T)-E,w>0)for(I=C*x,M=0;M<b;M++)for(G=I+M*_,R=0;R<b;R++)B[G+R]+=w},this.setCell=function(y,E,b,_){let C=this.size2*b+this.size*E+y;this.field[C]=_},this.getCell=function(y,E,b){let _=this.size2*b+this.size*E+y;return this.field[_]},this.blur=function(y=1){let E=this.field,b=E.slice(),_=this.size,C=this.size2;for(let B=0;B<_;B++)for(let R=0;R<_;R++)for(let M=0;M<_;M++){let x=C*M+_*R+B,T=b[x],w=1;for(let S=-1;S<=1;S+=2){let I=S+B;if(!(I<0||I>=_))for(let G=-1;G<=1;G+=2){let H=G+R;if(!(H<0||H>=_))for(let X=-1;X<=1;X+=2){let Z=X+M;if(Z<0||Z>=_)continue;let z=C*Z+_*H+I,Y=b[z];w++,T+=y*(Y-T)/w}}}E[x]=T}},this.reset=function(){for(let y=0;y<this.size3;y++)this.normal_cache[y*3]=0,this.field[y]=0,this.palette[y*3]=this.palette[y*3+1]=this.palette[y*3+2]=0},this.update=function(){this.count=0;let y=this.size-2;for(let E=1;E<y;E++){let b=this.size2*E,_=(E-this.halfsize)/this.halfsize;for(let C=1;C<y;C++){let B=b+this.size*C,R=(C-this.halfsize)/this.halfsize;for(let M=1;M<y;M++){let x=(M-this.halfsize)/this.halfsize,T=B+M;m(x,R,_,T,this.isolation)}}}this.geometry.setDrawRange(0,this.count),s.getAttribute("position").needsUpdate=!0,s.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(s.getAttribute("uv").needsUpdate=!0),this.enableColors&&(s.getAttribute("color").needsUpdate=!0),this.count/3>o&&console.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(e)}},K4=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),Dc=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);var e8=Object.defineProperty,t8=(t,e,r)=>e in t?e8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,en=(t,e,r)=>(t8(t,typeof e!="symbol"?e+"":e,r),r),Es=class{constructor(e=Math){en(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),en(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),en(this,"p",[]),en(this,"perm",[]),en(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),en(this,"dot",(r,n,i)=>r[0]*n+r[1]*i),en(this,"dot3",(r,n,i,o)=>r[0]*n+r[1]*i+r[2]*o),en(this,"dot4",(r,n,i,o,s)=>r[0]*n+r[1]*i+r[2]*o+r[3]*s),en(this,"noise",(r,n)=>{let i,o,s,p=.5*(Math.sqrt(3)-1),l=(r+n)*p,c=Math.floor(r+l),u=Math.floor(n+l),d=(3-Math.sqrt(3))/6,f=(c+u)*d,g=c-f,v=u-f,A=r-g,m=n-v,h=0,y=1;A>m&&(h=1,y=0);let E=A-h+d,b=m-y+d,_=A-1+2*d,C=m-1+2*d,B=c&255,R=u&255,M=this.perm[B+this.perm[R]]%12,x=this.perm[B+h+this.perm[R+y]]%12,T=this.perm[B+1+this.perm[R+1]]%12,w=.5-A*A-m*m;w<0?i=0:(w*=w,i=w*w*this.dot(this.grad3[M],A,m));let S=.5-E*E-b*b;S<0?o=0:(S*=S,o=S*S*this.dot(this.grad3[x],E,b));let I=.5-_*_-C*C;return I<0?s=0:(I*=I,s=I*I*this.dot(this.grad3[T],_,C)),70*(i+o+s)}),en(this,"noise3d",(r,n,i)=>{let o,s,p,l,u=(r+n+i)*.3333333333333333,d=Math.floor(r+u),f=Math.floor(n+u),g=Math.floor(i+u),v=1/6,A=(d+f+g)*v,m=d-A,h=f-A,y=g-A,E=r-m,b=n-h,_=i-y,C,B,R,M,x,T;E>=b?b>=_?(C=1,B=0,R=0,M=1,x=1,T=0):E>=_?(C=1,B=0,R=0,M=1,x=0,T=1):(C=0,B=0,R=1,M=1,x=0,T=1):b<_?(C=0,B=0,R=1,M=0,x=1,T=1):E<_?(C=0,B=1,R=0,M=0,x=1,T=1):(C=0,B=1,R=0,M=1,x=1,T=0);let w=E-C+v,S=b-B+v,I=_-R+v,G=E-M+2*v,H=b-x+2*v,X=_-T+2*v,Z=E-1+3*v,z=b-1+3*v,Y=_-1+3*v,L=d&255,Q=f&255,V=g&255,N=this.perm[L+this.perm[Q+this.perm[V]]]%12,P=this.perm[L+C+this.perm[Q+B+this.perm[V+R]]]%12,k=this.perm[L+M+this.perm[Q+x+this.perm[V+T]]]%12,O=this.perm[L+1+this.perm[Q+1+this.perm[V+1]]]%12,D=.6-E*E-b*b-_*_;D<0?o=0:(D*=D,o=D*D*this.dot3(this.grad3[N],E,b,_));let q=.6-w*w-S*S-I*I;q<0?s=0:(q*=q,s=q*q*this.dot3(this.grad3[P],w,S,I));let ae=.6-G*G-H*H-X*X;ae<0?p=0:(ae*=ae,p=ae*ae*this.dot3(this.grad3[k],G,H,X));let K=.6-Z*Z-z*z-Y*Y;return K<0?l=0:(K*=K,l=K*K*this.dot3(this.grad3[O],Z,z,Y)),32*(o+s+p+l)}),en(this,"noise4d",(r,n,i,o)=>{let s=this.grad4,p=this.simplex,l=this.perm,c=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20,d,f,g,v,A,m=(r+n+i+o)*c,h=Math.floor(r+m),y=Math.floor(n+m),E=Math.floor(i+m),b=Math.floor(o+m),_=(h+y+E+b)*u,C=h-_,B=y-_,R=E-_,M=b-_,x=r-C,T=n-B,w=i-R,S=o-M,I=x>T?32:0,G=x>w?16:0,H=T>w?8:0,X=x>S?4:0,Z=T>S?2:0,z=w>S?1:0,Y=I+G+H+X+Z+z,L,Q,V,N,P,k,O,D,q,ae,K,re;L=p[Y][0]>=3?1:0,Q=p[Y][1]>=3?1:0,V=p[Y][2]>=3?1:0,N=p[Y][3]>=3?1:0,P=p[Y][0]>=2?1:0,k=p[Y][1]>=2?1:0,O=p[Y][2]>=2?1:0,D=p[Y][3]>=2?1:0,q=p[Y][0]>=1?1:0,ae=p[Y][1]>=1?1:0,K=p[Y][2]>=1?1:0,re=p[Y][3]>=1?1:0;let he=x-L+u,me=T-Q+u,J=w-V+u,oe=S-N+u,ce=x-P+2*u,ie=T-k+2*u,W=w-O+2*u,j=S-D+2*u,ne=x-q+3*u,ve=T-ae+3*u,Ce=w-K+3*u,we=S-re+3*u,be=x-1+4*u,Qe=T-1+4*u,Le=w-1+4*u,Fe=S-1+4*u,Ge=h&255,et=y&255,gt=E&255,je=b&255,pt=l[Ge+l[et+l[gt+l[je]]]]%32,De=l[Ge+L+l[et+Q+l[gt+V+l[je+N]]]]%32,ze=l[Ge+P+l[et+k+l[gt+O+l[je+D]]]]%32,ee=l[Ge+q+l[et+ae+l[gt+K+l[je+re]]]]%32,Ae=l[Ge+1+l[et+1+l[gt+1+l[je+1]]]]%32,_e=.6-x*x-T*T-w*w-S*S;_e<0?d=0:(_e*=_e,d=_e*_e*this.dot4(s[pt],x,T,w,S));let Ie=.6-he*he-me*me-J*J-oe*oe;Ie<0?f=0:(Ie*=Ie,f=Ie*Ie*this.dot4(s[De],he,me,J,oe));let ye=.6-ce*ce-ie*ie-W*W-j*j;ye<0?g=0:(ye*=ye,g=ye*ye*this.dot4(s[ze],ce,ie,W,j));let dt=.6-ne*ne-ve*ve-Ce*Ce-we*we;dt<0?v=0:(dt*=dt,v=dt*dt*this.dot4(s[ee],ne,ve,Ce,we));let nr=.6-be*be-Qe*Qe-Le*Le-Fe*Fe;return nr<0?A=0:(nr*=nr,A=nr*nr*this.dot4(s[Ae],be,Qe,Le,Fe)),27*(d+f+g+v+A)});for(let r=0;r<256;r++)this.p[r]=Math.floor(e.random()*256);for(let r=0;r<512;r++)this.perm[r]=this.p[r&255]}};import{Vector3 as J4,ShaderMaterial as i8,UniformsUtils as n8,BackSide as a8,Mesh as s8,BoxGeometry as p8}from"three";var r8=Object.defineProperty,o8=(t,e,r)=>e in t?r8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,X4=(t,e,r)=>(o8(t,typeof e!="symbol"?e+"":e,r),r),K0=(()=>{let t={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new J4},up:{value:new J4(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${Si>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},e=new i8({name:"SkyShader",fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:n8.clone(t.uniforms),side:a8,depthWrite:!1});class r extends s8{constructor(){super(new p8(1,1,1),e)}}return X4(r,"SkyShader",t),X4(r,"material",e),r})();import{Mesh as l8,IcosahedronGeometry as c8,ShaderMaterial as d8,DoubleSide as u8}from"three";var f8=t=>t&&t.isCubeTexture,Lc=class extends l8{constructor(e,r){var n,i;let o=f8(e),p=((i=o?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(p)),c=Math.pow(2,l),u=3*Math.max(c,112),d=4*c,f=[o?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/u}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${l}.0`],g=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Si>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,A={map:{value:e},height:{value:r?.height||15},radius:{value:r?.radius||100}},m=new c8(1,16),h=new d8({uniforms:A,fragmentShader:v,vertexShader:g,side:u8});super(m,h)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}};import{Vector3 as q4,Quaternion as g8,Matrix4 as X0,AnimationMixer as h8,VectorKeyframeTrack as m8,QuaternionKeyframeTrack as A8,AnimationClip as y8,SkeletonHelper as v8}from"three";function Z4(t,e,r={}){let n=new q4,i=new g8,o=new q4,s=new X0,p=new X0,l=new X0;r.preserveMatrix=r.preserveMatrix!==void 0?r.preserveMatrix:!0,r.preservePosition=r.preservePosition!==void 0?r.preservePosition:!0,r.preserveHipPosition=r.preserveHipPosition!==void 0?r.preserveHipPosition:!1,r.useTargetMatrix=r.useTargetMatrix!==void 0?r.useTargetMatrix:!1,r.hip=r.hip!==void 0?r.hip:"hip",r.names=r.names||{};let c=e.isObject3D?e.skeleton.bones:Af(e),u=t.isObject3D?t.skeleton.bones:Af(t),d,f,g,v,A;if(t.isObject3D?t.skeleton.pose():(r.useTargetMatrix=!0,r.preserveMatrix=!1),r.preservePosition){A=[];for(let m=0;m<u.length;m++)A.push(u[m].position.clone())}if(r.preserveMatrix){t.updateMatrixWorld(),t.matrixWorld.identity();for(let m=0;m<t.children.length;++m)t.children[m].updateMatrixWorld(!0)}if(r.offsets){d=[];for(let m=0;m<u.length;++m)f=u[m],g=r.names[f.name]||f.name,r.offsets[g]&&(f.matrix.multiply(r.offsets[g]),f.matrix.decompose(f.position,f.quaternion,f.scale),f.updateMatrixWorld()),d.push(f.matrixWorld.clone())}for(let m=0;m<u.length;++m){if(f=u[m],g=r.names[f.name]||f.name,v=$4(g,c),l.copy(f.matrixWorld),v){if(v.updateMatrixWorld(),r.useTargetMatrix?p.copy(v.matrixWorld):(p.copy(t.matrixWorld).invert(),p.multiply(v.matrixWorld)),o.setFromMatrixScale(p),p.scale(o.set(1/o.x,1/o.y,1/o.z)),l.makeRotationFromQuaternion(i.setFromRotationMatrix(p)),t.isObject3D){let h=u.indexOf(f),y=d?d[h]:s.copy(t.skeleton.boneInverses[h]).invert();l.multiply(y)}l.copyPosition(p)}f.parent&&f.parent.isBone?(f.matrix.copy(f.parent.matrixWorld).invert(),f.matrix.multiply(l)):f.matrix.copy(l),r.preserveHipPosition&&g===r.hip&&f.matrix.setPosition(n.set(0,f.position.y,0)),f.matrix.decompose(f.position,f.quaternion,f.scale),f.updateMatrixWorld()}if(r.preservePosition)for(let m=0;m<u.length;++m)f=u[m],g=r.names[f.name]||f.name,g!==r.hip&&f.position.copy(A[m]);r.preserveMatrix&&t.updateMatrixWorld(!0)}function E8(t,e,r,n={}){n.useFirstFramePosition=n.useFirstFramePosition!==void 0?n.useFirstFramePosition:!1,n.fps=n.fps!==void 0?n.fps:30,n.names=n.names||[],e.isObject3D||(e=_8(e));let i=Math.round(r.duration*(n.fps/1e3)*1e3),o=1/n.fps,s=[],p=new h8(e),l=Af(t.skeleton),c=[],u,d,f,g,v;p.clipAction(r).play(),p.update(0),e.updateMatrixWorld();for(let A=0;A<i;++A){let m=A*o;Z4(t,e,n);for(let h=0;h<l.length;++h)v=n.names[l[h].name]||l[h].name,f=$4(v,e.skeleton),f&&(d=l[h],g=c[h]=c[h]||{bone:d},n.hip===v&&(g.pos||(g.pos={times:new Float32Array(i),values:new Float32Array(i*3)}),n.useFirstFramePosition&&(A===0&&(u=d.position.clone()),d.position.sub(u)),g.pos.times[A]=m,d.position.toArray(g.pos.values,A*3)),g.quat||(g.quat={times:new Float32Array(i),values:new Float32Array(i*4)}),g.quat.times[A]=m,d.quaternion.toArray(g.quat.values,A*4));p.update(o),e.updateMatrixWorld()}for(let A=0;A<c.length;++A)g=c[A],g&&(g.pos&&s.push(new m8(".bones["+g.bone.name+"].position",g.pos.times,g.pos.values)),s.push(new A8(".bones["+g.bone.name+"].quaternion",g.quat.times,g.quat.values)));return p.uncacheAction(r),new y8(r.name,-1,s)}function b8(t){let e=new Map,r=new Map,n=t.clone();return eb(t,n,function(i,o){e.set(o,i),r.set(i,o)}),n.traverse(function(i){if(!i.isSkinnedMesh)return;let o=i,s=e.get(i),p=s.skeleton.bones;o.skeleton=s.skeleton.clone(),o.bindMatrix.copy(s.bindMatrix),o.skeleton.bones=p.map(function(l){return r.get(l)}),o.bind(o.skeleton,o.bindMatrix)}),n}function $4(t,e){for(let r=0,n=Af(e);r<n.length;r++)if(t===n[r].name)return n[r]}function Af(t){return Array.isArray(t)?t:t.bones}function _8(t){let e=new v8(t.bones[0]);return e.skeleton=t,e}function eb(t,e,r){r(t,e);for(let n=0;n<t.children.length;n++)eb(t.children[n],e.children[n],r)}var J0={retarget:Z4,retargetClip:E8,clone:b8};import{Triangle as C8,Vector3 as R8}from"three";var ho=new C8,yf=new R8,Pc=class{constructor(e){let r=e.geometry;r.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),r=r.toNonIndexed()),this.geometry=r,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,r=this.weightAttribute,n=new Float32Array(e.count/3);for(let o=0;o<e.count;o+=3){let s=1;r&&(s=r.getX(o)+r.getX(o+1)+r.getX(o+2)),ho.a.fromBufferAttribute(e,o),ho.b.fromBufferAttribute(e,o+1),ho.c.fromBufferAttribute(e,o+2),s*=ho.getArea(),n[o/3]=s}this.distribution=new Float32Array(e.count/3);let i=0;for(let o=0;o<n.length;o++)i+=n[o],this.distribution[o]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,r,n){let i=this.sampleFaceIndex();return this.sampleFace(i,e,r,n)}sampleFaceIndex(){let e=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*e)}binarySearch(e){let r=this.distribution,n=0,i=r.length-1,o=-1;for(;n<=i;){let s=Math.ceil((n+i)/2);if(s===0||r[s-1]<=e&&r[s]>e){o=s;break}else e<r[s]?i=s-1:n=s+1}return o}sampleFace(e,r,n,i){let o=this.randomFunction(),s=this.randomFunction();return o+s>1&&(o=1-o,s=1-s),ho.a.fromBufferAttribute(this.positionAttribute,e*3),ho.b.fromBufferAttribute(this.positionAttribute,e*3+1),ho.c.fromBufferAttribute(this.positionAttribute,e*3+2),r.set(0,0,0).addScaledVector(ho.a,o).addScaledVector(ho.b,s).addScaledVector(ho.c,1-(o+s)),n!==void 0&&ho.getNormal(n),i!==void 0&&this.colorAttribute!==void 0&&(ho.a.fromBufferAttribute(this.colorAttribute,e*3),ho.b.fromBufferAttribute(this.colorAttribute,e*3+1),ho.c.fromBufferAttribute(this.colorAttribute,e*3+2),yf.set(0,0,0).addScaledVector(ho.a,o).addScaledVector(ho.b,s).addScaledVector(ho.c,1-(o+s)),i.r=yf.x,i.g=yf.y,i.b=yf.z),this}};var B8=Object.defineProperty,x8=(t,e,r)=>e in t?B8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,M8=(t,e,r)=>(x8(t,typeof e!="symbol"?e+"":e,r),r),wo=class{constructor(){M8(this,"_listeners")}addEventListener(e,r){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(r)===-1&&n[e].push(r)}hasEventListener(e,r){if(this._listeners===void 0)return!1;let n=this._listeners;return n[e]!==void 0&&n[e].indexOf(r)!==-1}removeEventListener(e,r){if(this._listeners===void 0)return;let i=this._listeners[e];if(i!==void 0){let o=i.indexOf(r);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let n=this._listeners[e.type];if(n!==void 0){e.target=this;let i=n.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}};import{Vector3 as vf,Spherical as S8,MathUtils as wp}from"three";var w8=Object.defineProperty,T8=(t,e,r)=>e in t?w8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,rt=(t,e,r)=>(T8(t,typeof e!="symbol"?e+"":e,r),r),tb=new vf,Gc=class extends wo{constructor(e,r){super(),rt(this,"object"),rt(this,"domElement"),rt(this,"enabled",!0),rt(this,"movementSpeed",1),rt(this,"lookSpeed",.005),rt(this,"lookVertical",!0),rt(this,"autoForward",!1),rt(this,"activeLook",!0),rt(this,"heightSpeed",!1),rt(this,"heightCoef",1),rt(this,"heightMin",0),rt(this,"heightMax",1),rt(this,"constrainVertical",!1),rt(this,"verticalMin",0),rt(this,"verticalMax",Math.PI),rt(this,"mouseDragOn",!1),rt(this,"autoSpeedFactor",0),rt(this,"mouseX",0),rt(this,"mouseY",0),rt(this,"moveForward",!1),rt(this,"moveBackward",!1),rt(this,"moveLeft",!1),rt(this,"moveRight",!1),rt(this,"moveUp",!1),rt(this,"moveDown",!1),rt(this,"viewHalfX",0),rt(this,"viewHalfY",0),rt(this,"lat",0),rt(this,"lon",0),rt(this,"lookDirection",new vf),rt(this,"spherical",new S8),rt(this,"target",new vf),rt(this,"connect",n=>{n.setAttribute("tabindex","-1"),n.style.touchAction="none",n.addEventListener("contextmenu",this.contextmenu),n.addEventListener("mousemove",this.onMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),this.domElement=n,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()}),rt(this,"dispose",()=>{var n,i,o,s;(n=this.domElement)==null||n.removeEventListener("contextmenu",this.contextmenu),(i=this.domElement)==null||i.removeEventListener("mousedown",this.onMouseDown),(o=this.domElement)==null||o.removeEventListener("mousemove",this.onMouseMove),(s=this.domElement)==null||s.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}),rt(this,"handleResize",()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)}),rt(this,"onMouseDown",n=>{var i;if((i=this.domElement)==null||i.focus(),this.activeLook)switch(n.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0}),rt(this,"onMouseUp",n=>{if(this.activeLook)switch(n.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1}),rt(this,"onMouseMove",n=>{this.domElement&&(this.mouseX=n.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=n.pageY-this.domElement.offsetTop-this.viewHalfY)}),rt(this,"onKeyDown",n=>{switch(n.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}),rt(this,"onKeyUp",n=>{switch(n.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}),rt(this,"lookAt",(n,i,o)=>(n instanceof vf?this.target.copy(n):i&&o&&this.target.set(n,i,o),this.object.lookAt(this.target),this.setOrientation(),this)),rt(this,"update",n=>{if(!this.enabled)return;if(this.heightSpeed){let d=wp.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=n*(d*this.heightCoef)}else this.autoSpeedFactor=0;let i=n*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(i+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(i),this.moveLeft&&this.object.translateX(-i),this.moveRight&&this.object.translateX(i),this.moveUp&&this.object.translateY(i),this.moveDown&&this.object.translateY(-i);let o=n*this.lookSpeed;this.activeLook||(o=0);let s=1;this.constrainVertical&&(s=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*o,this.lookVertical&&(this.lat-=this.mouseY*o*s),this.lat=Math.max(-85,Math.min(85,this.lat));let p=wp.degToRad(90-this.lat),l=wp.degToRad(this.lon);this.constrainVertical&&(p=wp.mapLinear(p,0,Math.PI,this.verticalMin,this.verticalMax));let c=this.object.position;tb.setFromSphericalCoords(1,p,l).add(c),this.object.lookAt(tb)}),rt(this,"contextmenu",n=>n.preventDefault()),rt(this,"setOrientation",()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-wp.radToDeg(this.spherical.phi),this.lon=wp.radToDeg(this.spherical.theta)}),this.object=e,this.domElement=r,this.setOrientation(),r&&this.connect(r)}};import{Object3D as $0,Raycaster as O8,Vector3 as nt,Quaternion as To,Euler as D8,Matrix4 as rb,MeshBasicMaterial as ob,DoubleSide as ib,LineBasicMaterial as k8,CylinderGeometry as tn,BoxGeometry as bs,BufferGeometry as q0,Float32BufferAttribute as Z0,Mesh as Ke,Line as Ot,OctahedronGeometry as _s,PlaneGeometry as Cs,TorusGeometry as Ef,SphereGeometry as L8,Color as bf}from"three";var I8=Object.defineProperty,F8=(t,e,r)=>e in t?I8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ge=(t,e,r)=>(F8(t,typeof e!="symbol"?e+"":e,r),r),zc=class extends $0{constructor(e,r){super(),ge(this,"isTransformControls",!0),ge(this,"visible",!1),ge(this,"domElement"),ge(this,"raycaster",new O8),ge(this,"gizmo"),ge(this,"plane"),ge(this,"tempVector",new nt),ge(this,"tempVector2",new nt),ge(this,"tempQuaternion",new To),ge(this,"unit",{X:new nt(1,0,0),Y:new nt(0,1,0),Z:new nt(0,0,1)}),ge(this,"pointStart",new nt),ge(this,"pointEnd",new nt),ge(this,"offset",new nt),ge(this,"rotationAxis",new nt),ge(this,"startNorm",new nt),ge(this,"endNorm",new nt),ge(this,"rotationAngle",0),ge(this,"cameraPosition",new nt),ge(this,"cameraQuaternion",new To),ge(this,"cameraScale",new nt),ge(this,"parentPosition",new nt),ge(this,"parentQuaternion",new To),ge(this,"parentQuaternionInv",new To),ge(this,"parentScale",new nt),ge(this,"worldPositionStart",new nt),ge(this,"worldQuaternionStart",new To),ge(this,"worldScaleStart",new nt),ge(this,"worldPosition",new nt),ge(this,"worldQuaternion",new To),ge(this,"worldQuaternionInv",new To),ge(this,"worldScale",new nt),ge(this,"eye",new nt),ge(this,"positionStart",new nt),ge(this,"quaternionStart",new To),ge(this,"scaleStart",new nt),ge(this,"camera"),ge(this,"object"),ge(this,"enabled",!0),ge(this,"axis",null),ge(this,"mode","translate"),ge(this,"translationSnap",null),ge(this,"rotationSnap",null),ge(this,"scaleSnap",null),ge(this,"space","world"),ge(this,"size",1),ge(this,"dragging",!1),ge(this,"showX",!0),ge(this,"showY",!0),ge(this,"showZ",!0),ge(this,"changeEvent",{type:"change"}),ge(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),ge(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),ge(this,"objectChangeEvent",{type:"objectChange"}),ge(this,"intersectObjectWithRay",(i,o,s)=>{let p=o.intersectObject(i,!0);for(let l=0;l<p.length;l++)if(p[l].object.visible||s)return p[l];return!1}),ge(this,"attach",i=>(this.object=i,this.visible=!0,this)),ge(this,"detach",()=>(this.object=void 0,this.visible=!1,this.axis=null,this)),ge(this,"reset",()=>this.enabled?(this.dragging&&this.object!==void 0&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this),ge(this,"updateMatrixWorld",()=>{this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()}),ge(this,"pointerHover",i=>{if(this.object===void 0||this.dragging===!0)return;this.raycaster.setFromCamera(i,this.camera);let o=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);o?this.axis=o.object.name:this.axis=null}),ge(this,"pointerDown",i=>{if(!(this.object===void 0||this.dragging===!0||i.button!==0)&&this.axis!==null){this.raycaster.setFromCamera(i,this.camera);let o=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(o){let s=this.space;if(this.mode==="scale"?s="local":(this.axis==="E"||this.axis==="XYZE"||this.axis==="XYZ")&&(s="world"),s==="local"&&this.mode==="rotate"){let p=this.rotationSnap;this.axis==="X"&&p&&(this.object.rotation.x=Math.round(this.object.rotation.x/p)*p),this.axis==="Y"&&p&&(this.object.rotation.y=Math.round(this.object.rotation.y/p)*p),this.axis==="Z"&&p&&(this.object.rotation.z=Math.round(this.object.rotation.z/p)*p)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(o.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}}),ge(this,"pointerMove",i=>{let o=this.axis,s=this.mode,p=this.object,l=this.space;if(s==="scale"?l="local":(o==="E"||o==="XYZE"||o==="XYZ")&&(l="world"),p===void 0||o===null||this.dragging===!1||i.button!==-1)return;this.raycaster.setFromCamera(i,this.camera);let c=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(c){if(this.pointEnd.copy(c.point).sub(this.worldPositionStart),s==="translate")this.offset.copy(this.pointEnd).sub(this.pointStart),l==="local"&&o!=="XYZ"&&this.offset.applyQuaternion(this.worldQuaternionInv),o.indexOf("X")===-1&&(this.offset.x=0),o.indexOf("Y")===-1&&(this.offset.y=0),o.indexOf("Z")===-1&&(this.offset.z=0),l==="local"&&o!=="XYZ"?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),p.position.copy(this.offset).add(this.positionStart),this.translationSnap&&(l==="local"&&(p.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),o.search("X")!==-1&&(p.position.x=Math.round(p.position.x/this.translationSnap)*this.translationSnap),o.search("Y")!==-1&&(p.position.y=Math.round(p.position.y/this.translationSnap)*this.translationSnap),o.search("Z")!==-1&&(p.position.z=Math.round(p.position.z/this.translationSnap)*this.translationSnap),p.position.applyQuaternion(this.quaternionStart)),l==="world"&&(p.parent&&p.position.add(this.tempVector.setFromMatrixPosition(p.parent.matrixWorld)),o.search("X")!==-1&&(p.position.x=Math.round(p.position.x/this.translationSnap)*this.translationSnap),o.search("Y")!==-1&&(p.position.y=Math.round(p.position.y/this.translationSnap)*this.translationSnap),o.search("Z")!==-1&&(p.position.z=Math.round(p.position.z/this.translationSnap)*this.translationSnap),p.parent&&p.position.sub(this.tempVector.setFromMatrixPosition(p.parent.matrixWorld))));else if(s==="scale"){if(o.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),this.tempVector2.set(u,u,u)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),o.search("X")===-1&&(this.tempVector2.x=1),o.search("Y")===-1&&(this.tempVector2.y=1),o.search("Z")===-1&&(this.tempVector2.z=1);p.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(o.search("X")!==-1&&(this.object.scale.x=Math.round(p.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),o.search("Y")!==-1&&(p.scale.y=Math.round(p.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),o.search("Z")!==-1&&(p.scale.z=Math.round(p.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(s==="rotate"){this.offset.copy(this.pointEnd).sub(this.pointStart);let u=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));o==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):o==="XYZE"?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*u):(o==="X"||o==="Y"||o==="Z")&&(this.rotationAxis.copy(this.unit[o]),this.tempVector.copy(this.unit[o]),l==="local"&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),l==="local"&&o!=="E"&&o!=="XYZE"?(p.quaternion.copy(this.quaternionStart),p.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),p.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),p.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}}),ge(this,"pointerUp",i=>{i.button===0&&(this.dragging&&this.axis!==null&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)}),ge(this,"getPointer",i=>{var o;if(this.domElement&&((o=this.domElement.ownerDocument)!=null&&o.pointerLockElement))return{x:0,y:0,button:i.button};{let s=i.changedTouches?i.changedTouches[0]:i,p=this.domElement.getBoundingClientRect();return{x:(s.clientX-p.left)/p.width*2-1,y:-(s.clientY-p.top)/p.height*2+1,button:i.button}}}),ge(this,"onPointerHover",i=>{if(this.enabled)switch(i.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(i));break}}),ge(this,"onPointerDown",i=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(i)),this.pointerDown(this.getPointer(i)))}),ge(this,"onPointerMove",i=>{this.enabled&&this.pointerMove(this.getPointer(i))}),ge(this,"onPointerUp",i=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(i)))}),ge(this,"getMode",()=>this.mode),ge(this,"setMode",i=>{this.mode=i}),ge(this,"setTranslationSnap",i=>{this.translationSnap=i}),ge(this,"setRotationSnap",i=>{this.rotationSnap=i}),ge(this,"setScaleSnap",i=>{this.scaleSnap=i}),ge(this,"setSize",i=>{this.size=i}),ge(this,"setSpace",i=>{this.space=i}),ge(this,"update",()=>{console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}),ge(this,"connect",i=>{i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=i,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)}),ge(this,"dispose",()=>{var i,o,s,p,l,c;(i=this.domElement)==null||i.removeEventListener("pointerdown",this.onPointerDown),(o=this.domElement)==null||o.removeEventListener("pointermove",this.onPointerHover),(p=(s=this.domElement)==null?void 0:s.ownerDocument)==null||p.removeEventListener("pointermove",this.onPointerMove),(c=(l=this.domElement)==null?void 0:l.ownerDocument)==null||c.removeEventListener("pointerup",this.onPointerUp),this.traverse(u=>{let d=u;d.geometry&&d.geometry.dispose(),d.material&&d.material.dispose()})}),this.domElement=r,this.camera=e,this.gizmo=new _f,this.add(this.gizmo),this.plane=new Cf,this.add(this.plane);let n=(i,o)=>{let s=o;Object.defineProperty(this,i,{get:function(){return s!==void 0?s:o},set:function(p){s!==p&&(s=p,this.plane[i]=p,this.gizmo[i]=p,this.dispatchEvent({type:i+"-changed",value:p}),this.dispatchEvent(this.changeEvent))}}),this[i]=o,this.plane[i]=o,this.gizmo[i]=o};n("camera",this.camera),n("object",this.object),n("enabled",this.enabled),n("axis",this.axis),n("mode",this.mode),n("translationSnap",this.translationSnap),n("rotationSnap",this.rotationSnap),n("scaleSnap",this.scaleSnap),n("space",this.space),n("size",this.size),n("dragging",this.dragging),n("showX",this.showX),n("showY",this.showY),n("showZ",this.showZ),n("worldPosition",this.worldPosition),n("worldPositionStart",this.worldPositionStart),n("worldQuaternion",this.worldQuaternion),n("worldQuaternionStart",this.worldQuaternionStart),n("cameraPosition",this.cameraPosition),n("cameraQuaternion",this.cameraQuaternion),n("pointStart",this.pointStart),n("pointEnd",this.pointEnd),n("rotationAxis",this.rotationAxis),n("rotationAngle",this.rotationAngle),n("eye",this.eye),r!==void 0&&this.connect(r)}},_f=class extends $0{constructor(){super(),ge(this,"isTransformControlsGizmo",!0),ge(this,"type","TransformControlsGizmo"),ge(this,"tempVector",new nt(0,0,0)),ge(this,"tempEuler",new D8),ge(this,"alignVector",new nt(0,1,0)),ge(this,"zeroVector",new nt(0,0,0)),ge(this,"lookAtMatrix",new rb),ge(this,"tempQuaternion",new To),ge(this,"tempQuaternion2",new To),ge(this,"identityQuaternion",new To),ge(this,"unitX",new nt(1,0,0)),ge(this,"unitY",new nt(0,1,0)),ge(this,"unitZ",new nt(0,0,1)),ge(this,"gizmo"),ge(this,"picker"),ge(this,"helper"),ge(this,"rotationAxis",new nt),ge(this,"cameraPosition",new nt),ge(this,"worldPositionStart",new nt),ge(this,"worldQuaternionStart",new To),ge(this,"worldPosition",new nt),ge(this,"worldQuaternion",new To),ge(this,"eye",new nt),ge(this,"camera",null),ge(this,"enabled",!0),ge(this,"axis",null),ge(this,"mode","translate"),ge(this,"space","world"),ge(this,"size",1),ge(this,"dragging",!1),ge(this,"showX",!0),ge(this,"showY",!0),ge(this,"showZ",!0),ge(this,"updateMatrixWorld",()=>{let Y=this.space;this.mode==="scale"&&(Y="local");let L=Y==="local"?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let Q=[];Q=Q.concat(this.picker[this.mode].children),Q=Q.concat(this.gizmo[this.mode].children),Q=Q.concat(this.helper[this.mode].children);for(let V=0;V<Q.length;V++){let N=Q[V];N.visible=!0,N.rotation.set(0,0,0),N.position.copy(this.worldPosition);let P;if(this.camera.isOrthographicCamera?P=(this.camera.top-this.camera.bottom)/this.camera.zoom:P=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),N.scale.set(1,1,1).multiplyScalar(P*this.size/7),N.tag==="helper"){N.visible=!1,N.name==="AXIS"?(N.position.copy(this.worldPositionStart),N.visible=!!this.axis,this.axis==="X"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),N.quaternion.copy(L).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(L).dot(this.eye))>.9&&(N.visible=!1)),this.axis==="Y"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),N.quaternion.copy(L).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(L).dot(this.eye))>.9&&(N.visible=!1)),this.axis==="Z"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),N.quaternion.copy(L).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(L).dot(this.eye))>.9&&(N.visible=!1)),this.axis==="XYZE"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),N.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),N.quaternion.multiply(this.tempQuaternion),N.visible=this.dragging),this.axis==="E"&&(N.visible=!1)):N.name==="START"?(N.position.copy(this.worldPositionStart),N.visible=this.dragging):N.name==="END"?(N.position.copy(this.worldPosition),N.visible=this.dragging):N.name==="DELTA"?(N.position.copy(this.worldPositionStart),N.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),N.scale.copy(this.tempVector),N.visible=this.dragging):(N.quaternion.copy(L),this.dragging?N.position.copy(this.worldPositionStart):N.position.copy(this.worldPosition),this.axis&&(N.visible=this.axis.search(N.name)!==-1));continue}N.quaternion.copy(L),this.mode==="translate"||this.mode==="scale"?((N.name==="X"||N.name==="XYZX")&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(L).dot(this.eye))>.99&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),(N.name==="Y"||N.name==="XYZY")&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(L).dot(this.eye))>.99&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),(N.name==="Z"||N.name==="XYZZ")&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(L).dot(this.eye))>.99&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),N.name==="XY"&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(L).dot(this.eye))<.2&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),N.name==="YZ"&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(L).dot(this.eye))<.2&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),N.name==="XZ"&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(L).dot(this.eye))<.2&&(N.scale.set(1e-10,1e-10,1e-10),N.visible=!1),N.name.search("X")!==-1&&(this.alignVector.copy(this.unitX).applyQuaternion(L).dot(this.eye)<0?N.tag==="fwd"?N.visible=!1:N.scale.x*=-1:N.tag==="bwd"&&(N.visible=!1)),N.name.search("Y")!==-1&&(this.alignVector.copy(this.unitY).applyQuaternion(L).dot(this.eye)<0?N.tag==="fwd"?N.visible=!1:N.scale.y*=-1:N.tag==="bwd"&&(N.visible=!1)),N.name.search("Z")!==-1&&(this.alignVector.copy(this.unitZ).applyQuaternion(L).dot(this.eye)<0?N.tag==="fwd"?N.visible=!1:N.scale.z*=-1:N.tag==="bwd"&&(N.visible=!1))):this.mode==="rotate"&&(this.tempQuaternion2.copy(L),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(L).invert()),N.name.search("E")!==-1&&N.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),N.name==="X"&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),N.quaternion.copy(this.tempQuaternion)),N.name==="Y"&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),N.quaternion.copy(this.tempQuaternion)),N.name==="Z"&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),N.quaternion.copy(this.tempQuaternion))),N.visible=N.visible&&(N.name.indexOf("X")===-1||this.showX),N.visible=N.visible&&(N.name.indexOf("Y")===-1||this.showY),N.visible=N.visible&&(N.name.indexOf("Z")===-1||this.showZ),N.visible=N.visible&&(N.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),N.material.tempOpacity=N.material.tempOpacity||N.material.opacity,N.material.tempColor=N.material.tempColor||N.material.color.clone(),N.material.color.copy(N.material.tempColor),N.material.opacity=N.material.tempOpacity,this.enabled?this.axis&&(N.name===this.axis?(N.material.opacity=1,N.material.color.lerp(new bf(1,1,1),.5)):this.axis.split("").some(function(k){return N.name===k})?(N.material.opacity=1,N.material.color.lerp(new bf(1,1,1),.5)):(N.material.opacity*=.25,N.material.color.lerp(new bf(1,1,1),.5))):(N.material.opacity*=.5,N.material.color.lerp(new bf(1,1,1),.5))}super.updateMatrixWorld()});let e=new ob({depthTest:!1,depthWrite:!1,transparent:!0,side:ib,fog:!1,toneMapped:!1}),r=new k8({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),n=e.clone();n.opacity=.15;let i=e.clone();i.opacity=.33;let o=e.clone();o.color.set(16711680);let s=e.clone();s.color.set(65280);let p=e.clone();p.color.set(255);let l=e.clone();l.opacity=.25;let c=l.clone();c.color.set(16776960);let u=l.clone();u.color.set(65535);let d=l.clone();d.color.set(16711935),e.clone().color.set(16776960);let g=r.clone();g.color.set(16711680);let v=r.clone();v.color.set(65280);let A=r.clone();A.color.set(255);let m=r.clone();m.color.set(65535);let h=r.clone();h.color.set(16711935);let y=r.clone();y.color.set(16776960);let E=r.clone();E.color.set(7895160);let b=y.clone();b.opacity=.25;let _=new tn(0,.05,.2,12,1,!1),C=new bs(.125,.125,.125),B=new q0;B.setAttribute("position",new Z0([0,0,0,1,0,0],3));let R=(Y,L)=>{let Q=new q0,V=[];for(let N=0;N<=64*L;++N)V.push(0,Math.cos(N/32*Math.PI)*Y,Math.sin(N/32*Math.PI)*Y);return Q.setAttribute("position",new Z0(V,3)),Q},M=()=>{let Y=new q0;return Y.setAttribute("position",new Z0([0,0,0,1,1,1],3)),Y},x={X:[[new Ke(_,o),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new Ke(_,o),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new Ot(B,g)]],Y:[[new Ke(_,s),[0,1,0],null,null,"fwd"],[new Ke(_,s),[0,1,0],[Math.PI,0,0],null,"bwd"],[new Ot(B,v),null,[0,0,Math.PI/2]]],Z:[[new Ke(_,p),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new Ke(_,p),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new Ot(B,A),null,[0,-Math.PI/2,0]]],XYZ:[[new Ke(new _s(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new Ke(new Cs(.295,.295),c.clone()),[.15,.15,0]],[new Ot(B,y),[.18,.3,0],null,[.125,1,1]],[new Ot(B,y),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new Ke(new Cs(.295,.295),u.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new Ot(B,m),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new Ot(B,m),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new Ke(new Cs(.295,.295),d.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new Ot(B,h),[.18,0,.3],null,[.125,1,1]],[new Ot(B,h),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},T={X:[[new Ke(new tn(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new Ke(new tn(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new Ke(new tn(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new Ke(new _s(.2,0),n)]],XY:[[new Ke(new Cs(.4,.4),n),[.2,.2,0]]],YZ:[[new Ke(new Cs(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new Ke(new Cs(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},w={START:[[new Ke(new _s(.01,2),i),null,null,null,"helper"]],END:[[new Ke(new _s(.01,2),i),null,null,null,"helper"]],DELTA:[[new Ot(M(),i),null,null,null,"helper"]],X:[[new Ot(B,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Ot(B,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Ot(B,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},S={X:[[new Ot(R(1,.5),g)],[new Ke(new _s(.04,0),o),[0,0,.99],null,[1,3,1]]],Y:[[new Ot(R(1,.5),v),null,[0,0,-Math.PI/2]],[new Ke(new _s(.04,0),s),[0,0,.99],null,[3,1,1]]],Z:[[new Ot(R(1,.5),A),null,[0,Math.PI/2,0]],[new Ke(new _s(.04,0),p),[.99,0,0],null,[1,3,1]]],E:[[new Ot(R(1.25,1),b),null,[0,Math.PI/2,0]],[new Ke(new tn(.03,0,.15,4,1,!1),b),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new Ke(new tn(.03,0,.15,4,1,!1),b),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new Ke(new tn(.03,0,.15,4,1,!1),b),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new Ke(new tn(.03,0,.15,4,1,!1),b),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new Ot(R(1,1),E),null,[0,Math.PI/2,0]]]},I={AXIS:[[new Ot(B,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},G={X:[[new Ke(new Ef(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Ke(new Ef(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Ke(new Ef(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Ke(new Ef(1.25,.1,2,24),n)]],XYZE:[[new Ke(new L8(.7,10,8),n)]]},H={X:[[new Ke(C,o),[.8,0,0],[0,0,-Math.PI/2]],[new Ot(B,g),null,null,[.8,1,1]]],Y:[[new Ke(C,s),[0,.8,0]],[new Ot(B,v),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new Ke(C,p),[0,0,.8],[Math.PI/2,0,0]],[new Ot(B,A),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new Ke(C,c),[.85,.85,0],null,[2,2,.2]],[new Ot(B,y),[.855,.98,0],null,[.125,1,1]],[new Ot(B,y),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new Ke(C,u),[0,.85,.85],null,[.2,2,2]],[new Ot(B,m),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new Ot(B,m),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new Ke(C,d),[.85,0,.85],null,[2,.2,2]],[new Ot(B,h),[.855,0,.98],null,[.125,1,1]],[new Ot(B,h),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new Ke(new bs(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new Ke(new bs(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new Ke(new bs(.125,.125,.125),l.clone()),[0,0,1.1]]]},X={X:[[new Ke(new tn(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new Ke(new tn(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new Ke(new tn(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new Ke(C,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new Ke(C,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new Ke(C,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new Ke(new bs(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new Ke(new bs(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new Ke(new bs(.2,.2,.2),n),[0,0,1.1]]]},Z={X:[[new Ot(B,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Ot(B,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Ot(B,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},z=Y=>{let L=new $0;for(let Q in Y)for(let V=Y[Q].length;V--;){let N=Y[Q][V][0].clone(),P=Y[Q][V][1],k=Y[Q][V][2],O=Y[Q][V][3],D=Y[Q][V][4];N.name=Q,N.tag=D,P&&N.position.set(P[0],P[1],P[2]),k&&N.rotation.set(k[0],k[1],k[2]),O&&N.scale.set(O[0],O[1],O[2]),N.updateMatrix();let q=N.geometry.clone();q.applyMatrix4(N.matrix),N.geometry=q,N.renderOrder=1/0,N.position.set(0,0,0),N.rotation.set(0,0,0),N.scale.set(1,1,1),L.add(N)}return L};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=z(x)),this.add(this.gizmo.rotate=z(S)),this.add(this.gizmo.scale=z(H)),this.add(this.picker.translate=z(T)),this.add(this.picker.rotate=z(G)),this.add(this.picker.scale=z(X)),this.add(this.helper.translate=z(w)),this.add(this.helper.rotate=z(I)),this.add(this.helper.scale=z(Z)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}},Cf=class extends Ke{constructor(){super(new Cs(1e5,1e5,2,2),new ob({visible:!1,wireframe:!0,side:ib,transparent:!0,opacity:.1,toneMapped:!1})),ge(this,"isTransformControlsPlane",!0),ge(this,"type","TransformControlsPlane"),ge(this,"unitX",new nt(1,0,0)),ge(this,"unitY",new nt(0,1,0)),ge(this,"unitZ",new nt(0,0,1)),ge(this,"tempVector",new nt),ge(this,"dirVector",new nt),ge(this,"alignVector",new nt),ge(this,"tempMatrix",new rb),ge(this,"identityQuaternion",new To),ge(this,"cameraQuaternion",new To),ge(this,"worldPosition",new nt),ge(this,"worldQuaternion",new To),ge(this,"eye",new nt),ge(this,"axis",null),ge(this,"mode","translate"),ge(this,"space","world"),ge(this,"updateMatrixWorld",()=>{let e=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(e="local"),this.unitX.set(1,0,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion(e==="local"?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0);break}break;case"rotate":default:this.dirVector.set(0,0,0)}this.dirVector.length()===0?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()})}};import{Vector3 as sb,Euler as z8}from"three";var P8=Object.defineProperty,G8=(t,e,r)=>e in t?P8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$r=(t,e,r)=>(G8(t,typeof e!="symbol"?e+"":e,r),r),Tp=new z8(0,0,0,"YXZ"),Sp=new sb,N8={type:"change"},U8={type:"lock"},j8={type:"unlock"},nb=.002,ab=Math.PI/2,Nc=class extends wo{constructor(e,r){super(),$r(this,"camera"),$r(this,"domElement"),$r(this,"isLocked"),$r(this,"minPolarAngle"),$r(this,"maxPolarAngle"),$r(this,"pointerSpeed"),$r(this,"onMouseMove",n=>{!this.domElement||this.isLocked===!1||(Tp.setFromQuaternion(this.camera.quaternion),Tp.y-=n.movementX*nb*this.pointerSpeed,Tp.x-=n.movementY*nb*this.pointerSpeed,Tp.x=Math.max(ab-this.maxPolarAngle,Math.min(ab-this.minPolarAngle,Tp.x)),this.camera.quaternion.setFromEuler(Tp),this.dispatchEvent(N8))}),$r(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(U8),this.isLocked=!0):(this.dispatchEvent(j8),this.isLocked=!1))}),$r(this,"onPointerlockError",()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),$r(this,"connect",n=>{this.domElement=n||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),$r(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),$r(this,"dispose",()=>{this.disconnect()}),$r(this,"getObject",()=>this.camera),$r(this,"direction",new sb(0,0,-1)),$r(this,"getDirection",n=>n.copy(this.direction).applyQuaternion(this.camera.quaternion)),$r(this,"moveForward",n=>{Sp.setFromMatrixColumn(this.camera.matrix,0),Sp.crossVectors(this.camera.up,Sp),this.camera.position.addScaledVector(Sp,n)}),$r(this,"moveRight",n=>{Sp.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(Sp,n)}),$r(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),$r(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=e,this.domElement=r,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,r&&this.connect(r)}};import{Vector3 as W8,Euler as V8,Quaternion as e1,MathUtils as Rf}from"three";var H8=Object.defineProperty,Q8=(t,e,r)=>e in t?H8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eo=(t,e,r)=>(Q8(t,typeof e!="symbol"?e+"":e,r),r),Uc=class extends wo{constructor(e){super(),eo(this,"object"),eo(this,"changeEvent",{type:"change"}),eo(this,"EPS",1e-6),eo(this,"enabled",!0),eo(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),eo(this,"screenOrientation",0),eo(this,"alphaOffset",0),eo(this,"onDeviceOrientationChangeEvent",r=>{this.deviceOrientation=r}),eo(this,"onScreenOrientationChangeEvent",()=>{this.screenOrientation=window.orientation||0}),eo(this,"zee",new W8(0,0,1)),eo(this,"euler",new V8),eo(this,"q0",new e1),eo(this,"q1",new e1(-Math.sqrt(.5),0,0,Math.sqrt(.5))),eo(this,"setObjectQuaternion",(r,n,i,o,s)=>{this.euler.set(i,n,-o,"YXZ"),r.setFromEuler(this.euler),r.multiply(this.q1),r.multiply(this.q0.setFromAxisAngle(this.zee,-s))}),eo(this,"connect",()=>{this.onScreenOrientationChangeEvent(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(r=>{r=="granted"&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))}).catch(r=>{console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",r)}):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0}),eo(this,"disconnect",()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1}),eo(this,"lastQuaternion",new e1),eo(this,"update",()=>{if(this.enabled===!1)return;let r=this.deviceOrientation;if(r){let n=r.alpha?Rf.degToRad(r.alpha)+this.alphaOffset:0,i=r.beta?Rf.degToRad(r.beta):0,o=r.gamma?Rf.degToRad(r.gamma):0,s=this.screenOrientation?Rf.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,n,i,o,s),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}}),eo(this,"dispose",()=>this.disconnect()),this.object=e,this.object.rotation.reorder("YXZ"),this.connect()}};import{MOUSE as t1,Vector3 as yi,Vector2 as In,Quaternion as X8}from"three";var Y8=Object.defineProperty,K8=(t,e,r)=>e in t?Y8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Se=(t,e,r)=>(K8(t,typeof e!="symbol"?e+"":e,r),r),jc=class extends wo{constructor(e,r){super(),Se(this,"enabled",!0),Se(this,"screen",{left:0,top:0,width:0,height:0}),Se(this,"rotateSpeed",1),Se(this,"zoomSpeed",1.2),Se(this,"panSpeed",.3),Se(this,"noRotate",!1),Se(this,"noZoom",!1),Se(this,"noPan",!1),Se(this,"staticMoving",!1),Se(this,"dynamicDampingFactor",.2),Se(this,"minDistance",0),Se(this,"maxDistance",1/0),Se(this,"keys",["KeyA","KeyS","KeyD"]),Se(this,"mouseButtons",{LEFT:t1.ROTATE,MIDDLE:t1.DOLLY,RIGHT:t1.PAN}),Se(this,"object"),Se(this,"domElement"),Se(this,"cursorZoom",!1),Se(this,"target",new yi),Se(this,"mousePosition",new In),Se(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),Se(this,"EPS",1e-6),Se(this,"lastZoom",1),Se(this,"lastPosition",new yi),Se(this,"cursorVector",new yi),Se(this,"targetVector",new yi),Se(this,"_state",this.STATE.NONE),Se(this,"_keyState",this.STATE.NONE),Se(this,"_eye",new yi),Se(this,"_movePrev",new In),Se(this,"_moveCurr",new In),Se(this,"_lastAxis",new yi),Se(this,"_lastAngle",0),Se(this,"_zoomStart",new In),Se(this,"_zoomEnd",new In),Se(this,"_touchZoomDistanceStart",0),Se(this,"_touchZoomDistanceEnd",0),Se(this,"_panStart",new In),Se(this,"_panEnd",new In),Se(this,"target0"),Se(this,"position0"),Se(this,"up0"),Se(this,"zoom0"),Se(this,"changeEvent",{type:"change"}),Se(this,"startEvent",{type:"start"}),Se(this,"endEvent",{type:"end"}),Se(this,"onScreenVector",new In),Se(this,"getMouseOnScreen",(n,i)=>(this.onScreenVector.set((n-this.screen.left)/this.screen.width,(i-this.screen.top)/this.screen.height),this.onScreenVector)),Se(this,"onCircleVector",new In),Se(this,"getMouseOnCircle",(n,i)=>(this.onCircleVector.set((n-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-i))/this.screen.width),this.onCircleVector)),Se(this,"axis",new yi),Se(this,"quaternion",new X8),Se(this,"eyeDirection",new yi),Se(this,"objectUpDirection",new yi),Se(this,"objectSidewaysDirection",new yi),Se(this,"moveDirection",new yi),Se(this,"angle",0),Se(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),Se(this,"zoomCamera",()=>{let n;if(this._state===this.STATE.TOUCH_ZOOM_PAN)n=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(n):this.object.isOrthographicCamera?(this.object.zoom/=n,this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type");else{if(n=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(n-1)>this.EPS&&n>0&&(this.object.isPerspectiveCamera?(n>1&&this._eye.length()>=this.maxDistance-this.EPS&&(n=1),this._eye.multiplyScalar(n)):this.object.isOrthographicCamera?(n>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(n=1),this.object.zoom/=n):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let i=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(i,this.target,n)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),Se(this,"mouseChange",new In),Se(this,"objectUp",new yi),Se(this,"pan",new yi),Se(this,"panCamera",()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){let n=this.object,i=(n.right-n.left)/this.object.zoom,o=(n.top-n.bottom)/this.object.zoom;this.mouseChange.x*=i,this.mouseChange.y*=o}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),Se(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),Se(this,"handleResize",()=>{if(!this.domElement)return;let n=this.domElement.getBoundingClientRect(),i=this.domElement.ownerDocument.documentElement;this.screen.left=n.left+window.pageXOffset-i.clientLeft,this.screen.top=n.top+window.pageYOffset-i.clientTop,this.screen.width=n.width,this.screen.height=n.height}),Se(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")}),Se(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),Se(this,"keydown",n=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(n.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:n.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:n.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),Se(this,"onPointerDown",n=>{if(this.enabled!==!1)switch(n.pointerType){case"mouse":case"pen":this.onMouseDown(n);break}}),Se(this,"onPointerMove",n=>{if(this.enabled!==!1)switch(n.pointerType){case"mouse":case"pen":this.onMouseMove(n);break}}),Se(this,"onPointerUp",n=>{if(this.enabled!==!1)switch(n.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),Se(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),Se(this,"onMouseDown",n=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(n.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break}let i=this._keyState!==this.STATE.NONE?this._keyState:this._state;i===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr)):i===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(n.pageX,n.pageY)),this._zoomEnd.copy(this._zoomStart)):i===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(n.pageX,n.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),Se(this,"onMouseMove",n=>{if(this.enabled===!1)return;let i=this._keyState!==this.STATE.NONE?this._keyState:this._state;i===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(n.pageX,n.pageY))):i===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(n.pageX,n.pageY)):i===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(n.pageX,n.pageY))}),Se(this,"onMouseUp",()=>{this.domElement&&this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),Se(this,"mousewheel",n=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(n.preventDefault(),n.deltaMode){case 2:this._zoomStart.y-=n.deltaY*.025;break;case 1:this._zoomStart.y-=n.deltaY*.01;break;default:this._zoomStart.y-=n.deltaY*25e-5;break}this.mousePosition.x=n.offsetX/this.screen.width*2-1,this.mousePosition.y=-(n.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),Se(this,"touchstart",n=>{if(this.enabled!==!1){switch(n.preventDefault(),n.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(n.touches[0].pageX,n.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;let i=n.touches[0].pageX-n.touches[1].pageX,o=n.touches[0].pageY-n.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(i*i+o*o);let s=(n.touches[0].pageX+n.touches[1].pageX)/2,p=(n.touches[0].pageY+n.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(s,p)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),Se(this,"touchmove",n=>{if(this.enabled!==!1)switch(n.preventDefault(),n.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(n.touches[0].pageX,n.touches[0].pageY));break;default:let i=n.touches[0].pageX-n.touches[1].pageX,o=n.touches[0].pageY-n.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(i*i+o*o);let s=(n.touches[0].pageX+n.touches[1].pageX)/2,p=(n.touches[0].pageY+n.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(s,p));break}}),Se(this,"touchend",n=>{if(this.enabled!==!1){switch(n.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(n.touches[0].pageX,n.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),Se(this,"contextmenu",n=>{this.enabled!==!1&&n.preventDefault()}),Se(this,"connect",n=>{n===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=n,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),Se(this,"dispose",()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,r!==void 0&&this.connect(r),this.update()}};import{Vector3 as rn,MOUSE as wa,TOUCH as Ta,Quaternion as pb,PerspectiveCamera as r1,OrthographicCamera as o1,Spherical as lb,Vector2 as on,Ray as Z8,Plane as $8}from"three";var J8=Object.defineProperty,q8=(t,e,r)=>e in t?J8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,We=(t,e,r)=>(q8(t,typeof e!="symbol"?e+"":e,r),r),Bf=new Z8,cb=new $8,eF=Math.cos(70*(Math.PI/180)),db=(t,e)=>(t%e+e)%e,Ip=class extends wo{constructor(e,r){super(),We(this,"object"),We(this,"domElement"),We(this,"enabled",!0),We(this,"target",new rn),We(this,"minDistance",0),We(this,"maxDistance",1/0),We(this,"minZoom",0),We(this,"maxZoom",1/0),We(this,"minPolarAngle",0),We(this,"maxPolarAngle",Math.PI),We(this,"minAzimuthAngle",-1/0),We(this,"maxAzimuthAngle",1/0),We(this,"enableDamping",!1),We(this,"dampingFactor",.05),We(this,"enableZoom",!0),We(this,"zoomSpeed",1),We(this,"enableRotate",!0),We(this,"rotateSpeed",1),We(this,"enablePan",!0),We(this,"panSpeed",1),We(this,"screenSpacePanning",!0),We(this,"keyPanSpeed",7),We(this,"zoomToCursor",!1),We(this,"autoRotate",!1),We(this,"autoRotateSpeed",2),We(this,"reverseOrbit",!1),We(this,"reverseHorizontalOrbit",!1),We(this,"reverseVerticalOrbit",!1),We(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),We(this,"mouseButtons",{LEFT:wa.ROTATE,MIDDLE:wa.DOLLY,RIGHT:wa.PAN}),We(this,"touches",{ONE:Ta.ROTATE,TWO:Ta.DOLLY_PAN}),We(this,"target0"),We(this,"position0"),We(this,"zoom0"),We(this,"_domElementKeyEvents",null),We(this,"getPolarAngle"),We(this,"getAzimuthalAngle"),We(this,"setPolarAngle"),We(this,"setAzimuthalAngle"),We(this,"getDistance"),We(this,"getZoomScale"),We(this,"listenToKeyEvents"),We(this,"stopListenToKeyEvents"),We(this,"saveState"),We(this,"reset"),We(this,"update"),We(this,"connect"),We(this,"dispose"),We(this,"dollyIn"),We(this,"dollyOut"),We(this,"getScale"),We(this,"setScale"),this.object=e,this.domElement=r,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=ee=>{let Ae=db(ee,2*Math.PI),_e=u.phi;_e<0&&(_e+=2*Math.PI),Ae<0&&(Ae+=2*Math.PI);let Ie=Math.abs(Ae-_e);2*Math.PI-Ie<Ie&&(Ae<_e?Ae+=2*Math.PI:_e+=2*Math.PI),d.phi=Ae-_e,n.update()},this.setAzimuthalAngle=ee=>{let Ae=db(ee,2*Math.PI),_e=u.theta;_e<0&&(_e+=2*Math.PI),Ae<0&&(Ae+=2*Math.PI);let Ie=Math.abs(Ae-_e);2*Math.PI-Ie<Ie&&(Ae<_e?Ae+=2*Math.PI:_e+=2*Math.PI),d.theta=Ae-_e,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ee=>{ee.addEventListener("keydown",Fe),this._domElementKeyEvents=ee},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Fe),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),l=p.NONE},this.update=(()=>{let ee=new rn,Ae=new rn(0,1,0),_e=new pb().setFromUnitVectors(e.up,Ae),Ie=_e.clone().invert(),ye=new rn,dt=new pb,nr=2*Math.PI;return function(){let ci=n.object.position;_e.setFromUnitVectors(e.up,Ae),Ie.copy(_e).invert(),ee.copy(ci).sub(n.target),ee.applyQuaternion(_e),u.setFromVector3(ee),n.autoRotate&&l===p.NONE&&I(w()),n.enableDamping?(u.theta+=d.theta*n.dampingFactor,u.phi+=d.phi*n.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let gr=n.minAzimuthAngle,dr=n.maxAzimuthAngle;isFinite(gr)&&isFinite(dr)&&(gr<-Math.PI?gr+=nr:gr>Math.PI&&(gr-=nr),dr<-Math.PI?dr+=nr:dr>Math.PI&&(dr-=nr),gr<=dr?u.theta=Math.max(gr,Math.min(dr,u.theta)):u.theta=u.theta>(gr+dr)/2?Math.max(gr,u.theta):Math.min(dr,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(g,n.dampingFactor):n.target.add(g),n.zoomToCursor&&M||n.object.isOrthographicCamera?u.radius=V(u.radius):u.radius=V(u.radius*f),ee.setFromSpherical(u),ee.applyQuaternion(Ie),ci.copy(n.target).add(ee),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,g.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),g.set(0,0,0));let Lt=!1;if(n.zoomToCursor&&M){let di=null;if(n.object instanceof r1&&n.object.isPerspectiveCamera){let Nt=ee.length();di=V(Nt*f);let Ut=Nt-di;n.object.position.addScaledVector(B,Ut),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){let Nt=new rn(R.x,R.y,0);Nt.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/f)),n.object.updateProjectionMatrix(),Lt=!0;let Ut=new rn(R.x,R.y,0);Ut.unproject(n.object),n.object.position.sub(Ut).add(Nt),n.object.updateMatrixWorld(),di=ee.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;di!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(di).add(n.object.position):(Bf.origin.copy(n.object.position),Bf.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Bf.direction))<eF?e.lookAt(n.target):(cb.setFromNormalAndCoplanarPoint(n.object.up,n.target),Bf.intersectPlane(cb,n.target))))}else n.object instanceof o1&&n.object.isOrthographicCamera&&(Lt=f!==1,Lt&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/f)),n.object.updateProjectionMatrix()));return f=1,M=!1,Lt||ye.distanceToSquared(n.object.position)>c||8*(1-dt.dot(n.object.quaternion))>c?(n.dispatchEvent(i),ye.copy(n.object.position),dt.copy(n.object.quaternion),Lt=!1,!0):!1}})(),this.connect=ee=>{n.domElement=ee,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",gt),n.domElement.addEventListener("pointerdown",ve),n.domElement.addEventListener("pointercancel",we),n.domElement.addEventListener("wheel",Le)},this.dispose=()=>{var ee,Ae,_e,Ie,ye,dt;n.domElement&&(n.domElement.style.touchAction="auto"),(ee=n.domElement)==null||ee.removeEventListener("contextmenu",gt),(Ae=n.domElement)==null||Ae.removeEventListener("pointerdown",ve),(_e=n.domElement)==null||_e.removeEventListener("pointercancel",we),(Ie=n.domElement)==null||Ie.removeEventListener("wheel",Le),(ye=n.domElement)==null||ye.ownerDocument.removeEventListener("pointermove",Ce),(dt=n.domElement)==null||dt.ownerDocument.removeEventListener("pointerup",we),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Fe)};let n=this,i={type:"change"},o={type:"start"},s={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},l=p.NONE,c=1e-6,u=new lb,d=new lb,f=1,g=new rn,v=new on,A=new on,m=new on,h=new on,y=new on,E=new on,b=new on,_=new on,C=new on,B=new rn,R=new on,M=!1,x=[],T={};function w(){return 2*Math.PI/60/60*n.autoRotateSpeed}function S(){return Math.pow(.95,n.zoomSpeed)}function I(ee){n.reverseOrbit||n.reverseHorizontalOrbit?d.theta+=ee:d.theta-=ee}function G(ee){n.reverseOrbit||n.reverseVerticalOrbit?d.phi+=ee:d.phi-=ee}let H=(()=>{let ee=new rn;return function(_e,Ie){ee.setFromMatrixColumn(Ie,0),ee.multiplyScalar(-_e),g.add(ee)}})(),X=(()=>{let ee=new rn;return function(_e,Ie){n.screenSpacePanning===!0?ee.setFromMatrixColumn(Ie,1):(ee.setFromMatrixColumn(Ie,0),ee.crossVectors(n.object.up,ee)),ee.multiplyScalar(_e),g.add(ee)}})(),Z=(()=>{let ee=new rn;return function(_e,Ie){let ye=n.domElement;if(ye&&n.object instanceof r1&&n.object.isPerspectiveCamera){let dt=n.object.position;ee.copy(dt).sub(n.target);let nr=ee.length();nr*=Math.tan(n.object.fov/2*Math.PI/180),H(2*_e*nr/ye.clientHeight,n.object.matrix),X(2*Ie*nr/ye.clientHeight,n.object.matrix)}else ye&&n.object instanceof o1&&n.object.isOrthographicCamera?(H(_e*(n.object.right-n.object.left)/n.object.zoom/ye.clientWidth,n.object.matrix),X(Ie*(n.object.top-n.object.bottom)/n.object.zoom/ye.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function z(ee){n.object instanceof r1&&n.object.isPerspectiveCamera||n.object instanceof o1&&n.object.isOrthographicCamera?f=ee:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Y(ee){z(f/ee)}function L(ee){z(f*ee)}function Q(ee){if(!n.zoomToCursor||!n.domElement)return;M=!0;let Ae=n.domElement.getBoundingClientRect(),_e=ee.clientX-Ae.left,Ie=ee.clientY-Ae.top,ye=Ae.width,dt=Ae.height;R.x=_e/ye*2-1,R.y=-(Ie/dt)*2+1,B.set(R.x,R.y,1).unproject(n.object).sub(n.object.position).normalize()}function V(ee){return Math.max(n.minDistance,Math.min(n.maxDistance,ee))}function N(ee){v.set(ee.clientX,ee.clientY)}function P(ee){Q(ee),b.set(ee.clientX,ee.clientY)}function k(ee){h.set(ee.clientX,ee.clientY)}function O(ee){A.set(ee.clientX,ee.clientY),m.subVectors(A,v).multiplyScalar(n.rotateSpeed);let Ae=n.domElement;Ae&&(I(2*Math.PI*m.x/Ae.clientHeight),G(2*Math.PI*m.y/Ae.clientHeight)),v.copy(A),n.update()}function D(ee){_.set(ee.clientX,ee.clientY),C.subVectors(_,b),C.y>0?Y(S()):C.y<0&&L(S()),b.copy(_),n.update()}function q(ee){y.set(ee.clientX,ee.clientY),E.subVectors(y,h).multiplyScalar(n.panSpeed),Z(E.x,E.y),h.copy(y),n.update()}function ae(ee){Q(ee),ee.deltaY<0?L(S()):ee.deltaY>0&&Y(S()),n.update()}function K(ee){let Ae=!1;switch(ee.code){case n.keys.UP:Z(0,n.keyPanSpeed),Ae=!0;break;case n.keys.BOTTOM:Z(0,-n.keyPanSpeed),Ae=!0;break;case n.keys.LEFT:Z(n.keyPanSpeed,0),Ae=!0;break;case n.keys.RIGHT:Z(-n.keyPanSpeed,0),Ae=!0;break}Ae&&(ee.preventDefault(),n.update())}function re(){if(x.length==1)v.set(x[0].pageX,x[0].pageY);else{let ee=.5*(x[0].pageX+x[1].pageX),Ae=.5*(x[0].pageY+x[1].pageY);v.set(ee,Ae)}}function he(){if(x.length==1)h.set(x[0].pageX,x[0].pageY);else{let ee=.5*(x[0].pageX+x[1].pageX),Ae=.5*(x[0].pageY+x[1].pageY);h.set(ee,Ae)}}function me(){let ee=x[0].pageX-x[1].pageX,Ae=x[0].pageY-x[1].pageY,_e=Math.sqrt(ee*ee+Ae*Ae);b.set(0,_e)}function J(){n.enableZoom&&me(),n.enablePan&&he()}function oe(){n.enableZoom&&me(),n.enableRotate&&re()}function ce(ee){if(x.length==1)A.set(ee.pageX,ee.pageY);else{let _e=ze(ee),Ie=.5*(ee.pageX+_e.x),ye=.5*(ee.pageY+_e.y);A.set(Ie,ye)}m.subVectors(A,v).multiplyScalar(n.rotateSpeed);let Ae=n.domElement;Ae&&(I(2*Math.PI*m.x/Ae.clientHeight),G(2*Math.PI*m.y/Ae.clientHeight)),v.copy(A)}function ie(ee){if(x.length==1)y.set(ee.pageX,ee.pageY);else{let Ae=ze(ee),_e=.5*(ee.pageX+Ae.x),Ie=.5*(ee.pageY+Ae.y);y.set(_e,Ie)}E.subVectors(y,h).multiplyScalar(n.panSpeed),Z(E.x,E.y),h.copy(y)}function W(ee){let Ae=ze(ee),_e=ee.pageX-Ae.x,Ie=ee.pageY-Ae.y,ye=Math.sqrt(_e*_e+Ie*Ie);_.set(0,ye),C.set(0,Math.pow(_.y/b.y,n.zoomSpeed)),Y(C.y),b.copy(_)}function j(ee){n.enableZoom&&W(ee),n.enablePan&&ie(ee)}function ne(ee){n.enableZoom&&W(ee),n.enableRotate&&ce(ee)}function ve(ee){var Ae,_e;n.enabled!==!1&&(x.length===0&&((Ae=n.domElement)==null||Ae.ownerDocument.addEventListener("pointermove",Ce),(_e=n.domElement)==null||_e.ownerDocument.addEventListener("pointerup",we)),je(ee),ee.pointerType==="touch"?Ge(ee):be(ee))}function Ce(ee){n.enabled!==!1&&(ee.pointerType==="touch"?et(ee):Qe(ee))}function we(ee){var Ae,_e,Ie;pt(ee),x.length===0&&((Ae=n.domElement)==null||Ae.releasePointerCapture(ee.pointerId),(_e=n.domElement)==null||_e.ownerDocument.removeEventListener("pointermove",Ce),(Ie=n.domElement)==null||Ie.ownerDocument.removeEventListener("pointerup",we)),n.dispatchEvent(s),l=p.NONE}function be(ee){let Ae;switch(ee.button){case 0:Ae=n.mouseButtons.LEFT;break;case 1:Ae=n.mouseButtons.MIDDLE;break;case 2:Ae=n.mouseButtons.RIGHT;break;default:Ae=-1}switch(Ae){case wa.DOLLY:if(n.enableZoom===!1)return;P(ee),l=p.DOLLY;break;case wa.ROTATE:if(ee.ctrlKey||ee.metaKey||ee.shiftKey){if(n.enablePan===!1)return;k(ee),l=p.PAN}else{if(n.enableRotate===!1)return;N(ee),l=p.ROTATE}break;case wa.PAN:if(ee.ctrlKey||ee.metaKey||ee.shiftKey){if(n.enableRotate===!1)return;N(ee),l=p.ROTATE}else{if(n.enablePan===!1)return;k(ee),l=p.PAN}break;default:l=p.NONE}l!==p.NONE&&n.dispatchEvent(o)}function Qe(ee){if(n.enabled!==!1)switch(l){case p.ROTATE:if(n.enableRotate===!1)return;O(ee);break;case p.DOLLY:if(n.enableZoom===!1)return;D(ee);break;case p.PAN:if(n.enablePan===!1)return;q(ee);break}}function Le(ee){n.enabled===!1||n.enableZoom===!1||l!==p.NONE&&l!==p.ROTATE||(ee.preventDefault(),n.dispatchEvent(o),ae(ee),n.dispatchEvent(s))}function Fe(ee){n.enabled===!1||n.enablePan===!1||K(ee)}function Ge(ee){switch(De(ee),x.length){case 1:switch(n.touches.ONE){case Ta.ROTATE:if(n.enableRotate===!1)return;re(),l=p.TOUCH_ROTATE;break;case Ta.PAN:if(n.enablePan===!1)return;he(),l=p.TOUCH_PAN;break;default:l=p.NONE}break;case 2:switch(n.touches.TWO){case Ta.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;J(),l=p.TOUCH_DOLLY_PAN;break;case Ta.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;oe(),l=p.TOUCH_DOLLY_ROTATE;break;default:l=p.NONE}break;default:l=p.NONE}l!==p.NONE&&n.dispatchEvent(o)}function et(ee){switch(De(ee),l){case p.TOUCH_ROTATE:if(n.enableRotate===!1)return;ce(ee),n.update();break;case p.TOUCH_PAN:if(n.enablePan===!1)return;ie(ee),n.update();break;case p.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;j(ee),n.update();break;case p.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ne(ee),n.update();break;default:l=p.NONE}}function gt(ee){n.enabled!==!1&&ee.preventDefault()}function je(ee){x.push(ee)}function pt(ee){delete T[ee.pointerId];for(let Ae=0;Ae<x.length;Ae++)if(x[Ae].pointerId==ee.pointerId){x.splice(Ae,1);return}}function De(ee){let Ae=T[ee.pointerId];Ae===void 0&&(Ae=new on,T[ee.pointerId]=Ae),Ae.set(ee.pageX,ee.pageY)}function ze(ee){let Ae=ee.pointerId===x[0].pointerId?x[1]:x[0];return T[Ae.pointerId]}this.dollyIn=(ee=S())=>{L(ee),n.update()},this.dollyOut=(ee=S())=>{Y(ee),n.update()},this.getScale=()=>f,this.setScale=ee=>{z(ee),n.update()},this.getZoomScale=()=>S(),r!==void 0&&this.connect(r),this.update()}},Hc=class extends Ip{constructor(e,r){super(e,r),this.screenSpacePanning=!1,this.mouseButtons.LEFT=wa.PAN,this.mouseButtons.RIGHT=wa.ROTATE,this.touches.ONE=Ta.PAN,this.touches.TWO=Ta.DOLLY_ROTATE}};import{Vector2 as oF,Vector3 as vi,Matrix4 as bi,Quaternion as iF,Group as nF,EllipseCurve as i1,BufferGeometry as n1,PerspectiveCamera as po,MathUtils as xr,OrthographicCamera as Fi,Box3 as aF,Sphere as sF,GridHelper as pF,LineBasicMaterial as a1,Line as s1,Raycaster as lF}from"three";var tF=Object.defineProperty,rF=(t,e,r)=>e in t?tF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,se=(t,e,r)=>(rF(t,typeof e!="symbol"?e+"":e,r),r),Ne={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},Qt={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},ot={x:0,y:0},Ei={camera:new bi,gizmos:new bi},ur={type:"change"},nn={type:"start"},Oi={type:"end"},Qc=class extends wo{constructor(e,r=null,n=null){super(),se(this,"camera"),se(this,"domElement"),se(this,"scene"),se(this,"mouseActions"),se(this,"_mouseOp"),se(this,"_v2_1"),se(this,"_v3_1"),se(this,"_v3_2"),se(this,"_m4_1"),se(this,"_m4_2"),se(this,"_quat"),se(this,"_translationMatrix"),se(this,"_rotationMatrix"),se(this,"_scaleMatrix"),se(this,"_rotationAxis"),se(this,"_cameraMatrixState"),se(this,"_cameraProjectionState"),se(this,"_fovState"),se(this,"_upState"),se(this,"_zoomState"),se(this,"_nearPos"),se(this,"_farPos"),se(this,"_gizmoMatrixState"),se(this,"_up0"),se(this,"_zoom0"),se(this,"_fov0"),se(this,"_initialNear"),se(this,"_nearPos0"),se(this,"_initialFar"),se(this,"_farPos0"),se(this,"_cameraMatrixState0"),se(this,"_gizmoMatrixState0"),se(this,"_button"),se(this,"_touchStart"),se(this,"_touchCurrent"),se(this,"_input"),se(this,"_switchSensibility"),se(this,"_startFingerDistance"),se(this,"_currentFingerDistance"),se(this,"_startFingerRotation"),se(this,"_currentFingerRotation"),se(this,"_devPxRatio"),se(this,"_downValid"),se(this,"_nclicks"),se(this,"_downEvents"),se(this,"_clickStart"),se(this,"_maxDownTime"),se(this,"_maxInterval"),se(this,"_posThreshold"),se(this,"_movementThreshold"),se(this,"_currentCursorPosition"),se(this,"_startCursorPosition"),se(this,"_grid"),se(this,"_gridPosition"),se(this,"_gizmos"),se(this,"_curvePts"),se(this,"_timeStart"),se(this,"_animationId"),se(this,"focusAnimationTime"),se(this,"_timePrev"),se(this,"_timeCurrent"),se(this,"_anglePrev"),se(this,"_angleCurrent"),se(this,"_cursorPosPrev"),se(this,"_cursorPosCurr"),se(this,"_wPrev"),se(this,"_wCurr"),se(this,"adjustNearFar"),se(this,"scaleFactor"),se(this,"dampingFactor"),se(this,"wMax"),se(this,"enableAnimations"),se(this,"enableGrid"),se(this,"cursorZoom"),se(this,"minFov"),se(this,"maxFov"),se(this,"enabled"),se(this,"enablePan"),se(this,"enableRotate"),se(this,"enableZoom"),se(this,"minDistance"),se(this,"maxDistance"),se(this,"minZoom"),se(this,"maxZoom"),se(this,"target"),se(this,"_currentTarget"),se(this,"_tbRadius"),se(this,"_state"),se(this,"onWindowResize",()=>{let i=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){let c=this.calculateTbRadius(this.camera);c!==void 0&&(this._tbRadius=c)}let o=this._tbRadius/i,p=new i1(0,0,o,o).getPoints(this._curvePts),l=new n1().setFromPoints(p);for(let c in this._gizmos.children){let u=this._gizmos.children[c];u.geometry=l}this.dispatchEvent(ur)}),se(this,"onContextMenu",i=>{if(this.enabled){for(let o=0;o<this.mouseActions.length;o++)if(this.mouseActions[o].mouse==2){i.preventDefault();break}}}),se(this,"onPointerCancel",()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=Qt.NONE}),se(this,"onPointerDown",i=>{if(i.button==0&&i.isPrimary?(this._downValid=!0,this._downEvents.push(i)):this._downValid=!1,i.pointerType=="touch"&&this._input!=Qt.CURSOR)switch(this._touchStart.push(i),this._touchCurrent.push(i),this._input){case Qt.NONE:this._input=Qt.ONE_FINGER,this.onSinglePanStart(i,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case Qt.ONE_FINGER:case Qt.ONE_FINGER_SWITCHED:this._input=Qt.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case Qt.TWO_FINGER:this._input=Qt.MULT_FINGER,this.onTriplePanStart();break}else if(i.pointerType!="touch"&&this._input==Qt.NONE){let o=null;i.ctrlKey||i.metaKey?o="CTRL":i.shiftKey&&(o="SHIFT"),this._mouseOp=this.getOpFromAction(i.button,o),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=Qt.CURSOR,this._button=i.button,this.onSinglePanStart(i,this._mouseOp))}}),se(this,"onPointerMove",i=>{if(i.pointerType=="touch"&&this._input!=Qt.CURSOR)switch(this._input){case Qt.ONE_FINGER:this.updateTouchEvent(i),this.onSinglePanMove(i,Ne.ROTATE);break;case Qt.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],i)*this._devPxRatio>=this._switchSensibility){this._input=Qt.ONE_FINGER,this.updateTouchEvent(i),this.onSinglePanStart(i,"ROTATE");break}break;case Qt.TWO_FINGER:this.updateTouchEvent(i),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case Qt.MULT_FINGER:this.updateTouchEvent(i),this.onTriplePanMove();break}else if(i.pointerType!="touch"&&this._input==Qt.CURSOR){let o=null;i.ctrlKey||i.metaKey?o="CTRL":i.shiftKey&&(o="SHIFT");let s=this.getOpStateFromAction(this._button,o);s&&this.onSinglePanMove(i,s)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],i)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}),se(this,"onPointerUp",i=>{if(i.pointerType=="touch"&&this._input!=Qt.CURSOR){let o=this._touchCurrent.length;for(let s=0;s<o;s++)if(this._touchCurrent[s].pointerId==i.pointerId){this._touchCurrent.splice(s,1),this._touchStart.splice(s,1);break}switch(this._input){case Qt.ONE_FINGER:case Qt.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=Qt.NONE,this.onSinglePanEnd();break;case Qt.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=Qt.ONE_FINGER_SWITCHED;break;case Qt.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=Qt.NONE,this.onTriplePanEnd());break}}else i.pointerType!="touch"&&this._input==Qt.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=Qt.NONE,this.onSinglePanEnd(),this._button=-1);if(i.isPrimary)if(this._downValid)if(i.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{let s=i.timeStamp-this._clickStart,p=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;s<=this._maxInterval&&p<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(i)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}),se(this,"onWheel",i=>{var o,s;if(this.enabled&&this.enableZoom&&this.domElement){let p=null;i.ctrlKey||i.metaKey?p="CTRL":i.shiftKey&&(p="SHIFT");let l=this.getOpFromAction("WHEEL",p);if(l){i.preventDefault(),this.dispatchEvent(nn);let c=125,u=i.deltaY/c,d=1;switch(u>0?d=1/this.scaleFactor:u<0&&(d=this.scaleFactor),l){case"ZOOM":if(this.updateTbState(Ne.SCALE,!0),u>0?d=1/Math.pow(this.scaleFactor,u):u<0&&(d=Math.pow(this.scaleFactor,-u)),this.cursorZoom&&this.enablePan){let f;this.camera instanceof Fi&&(f=(o=this.unprojectOnTbPlane(this.camera,i.clientX,i.clientY,this.domElement))==null?void 0:o.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)),this.camera instanceof po&&(f=(s=this.unprojectOnTbPlane(this.camera,i.clientX,i.clientY,this.domElement))==null?void 0:s.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),f!==void 0&&this.applyTransformMatrix(this.applyScale(d,f))}else this.applyTransformMatrix(this.applyScale(d,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Ne.IDLE,!1),this.dispatchEvent(ur),this.dispatchEvent(Oi);break;case"FOV":if(this.camera instanceof po){this.updateTbState(Ne.FOV,!0),i.deltaX!=0&&(u=i.deltaX/c,d=1,u>0?d=1/Math.pow(this.scaleFactor,u):u<0&&(d=Math.pow(this.scaleFactor,-u))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let f=this._v3_1.distanceTo(this._gizmos.position),g=f/d;g=xr.clamp(g,this.minDistance,this.maxDistance);let v=f*Math.tan(xr.DEG2RAD*this.camera.fov*.5),A=xr.RAD2DEG*(Math.atan(v/g)*2);A>this.maxFov?A=this.maxFov:A<this.minFov&&(A=this.minFov);let m=v/Math.tan(xr.DEG2RAD*(A/2));d=f/m,this.setFov(A),this.applyTransformMatrix(this.applyScale(d,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Ne.IDLE,!1),this.dispatchEvent(ur),this.dispatchEvent(Oi);break}}}}),se(this,"onSinglePanStart",(i,o)=>{if(this.enabled&&this.domElement)switch(this.dispatchEvent(nn),this.setCenter(i.clientX,i.clientY),o){case"PAN":if(!this.enablePan)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(ur)),this.camera){this.updateTbState(Ne.PAN,!0);let s=this.unprojectOnTbPlane(this.camera,ot.x,ot.y,this.domElement);s!==void 0&&this._startCursorPosition.copy(s),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(ur))}break;case"ROTATE":if(!this.enableRotate)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState(Ne.ROTATE,!0);let s=this.unprojectOnTbSurface(this.camera,ot.x,ot.y,this.domElement,this._tbRadius);s!==void 0&&this._startCursorPosition.copy(s),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(ur);break;case"FOV":if(!this.enableZoom)return;this.camera instanceof po&&(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(ur)),this.updateTbState(Ne.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(ot.x,ot.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(ur)),this.updateTbState(Ne.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(ot.x,ot.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}),se(this,"onSinglePanMove",(i,o)=>{if(this.enabled&&this.domElement){let s=o!=this._state;switch(this.setCenter(i.clientX,i.clientY),o){case Ne.PAN:if(this.enablePan&&this.camera)if(s){this.dispatchEvent(Oi),this.dispatchEvent(nn),this.updateTbState(o,!0);let p=this.unprojectOnTbPlane(this.camera,ot.x,ot.y,this.domElement);p!==void 0&&this._startCursorPosition.copy(p),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{let p=this.unprojectOnTbPlane(this.camera,ot.x,ot.y,this.domElement);p!==void 0&&this._currentCursorPosition.copy(p),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case Ne.ROTATE:if(this.enableRotate&&this.camera)if(s){this.dispatchEvent(Oi),this.dispatchEvent(nn),this.updateTbState(o,!0);let p=this.unprojectOnTbSurface(this.camera,ot.x,ot.y,this.domElement,this._tbRadius);p!==void 0&&this._startCursorPosition.copy(p),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{let p=this.unprojectOnTbSurface(this.camera,ot.x,ot.y,this.domElement,this._tbRadius);p!==void 0&&this._currentCursorPosition.copy(p);let l=this._startCursorPosition.distanceTo(this._currentCursorPosition),c=this._startCursorPosition.angleTo(this._currentCursorPosition),u=Math.max(l/this._tbRadius,c);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),u)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=u,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case Ne.SCALE:if(this.enableZoom)if(s)this.dispatchEvent(Oi),this.dispatchEvent(nn),this.updateTbState(o,!0),this._startCursorPosition.setY(this.getCursorNDC(ot.x,ot.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(ot.x,ot.y,this.domElement).y*.5);let l=this._currentCursorPosition.y-this._startCursorPosition.y,c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*8):l>0&&(c=Math.pow(this.scaleFactor,l*8)),this.applyTransformMatrix(this.applyScale(c,this._gizmos.position))}break;case Ne.FOV:if(this.enableZoom&&this.camera instanceof po)if(s)this.dispatchEvent(Oi),this.dispatchEvent(nn),this.updateTbState(o,!0),this._startCursorPosition.setY(this.getCursorNDC(ot.x,ot.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(ot.x,ot.y,this.domElement).y*.5);let l=this._currentCursorPosition.y-this._startCursorPosition.y,c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*8):l>0&&(c=Math.pow(this.scaleFactor,l*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let u=this._v3_1.distanceTo(this._gizmos.position),d=u/c;d=xr.clamp(d,this.minDistance,this.maxDistance);let f=u*Math.tan(xr.DEG2RAD*this._fovState*.5),g=xr.RAD2DEG*(Math.atan(f/d)*2);g=xr.clamp(g,this.minFov,this.maxFov);let v=f/Math.tan(xr.DEG2RAD*(g/2));c=u/v,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(g),this.applyTransformMatrix(this.applyScale(c,this._v3_2,!1));let A=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(v/u);this._m4_1.makeTranslation(A.x,A.y,A.z)}break}this.dispatchEvent(ur)}}),se(this,"onSinglePanEnd",()=>{if(this._state==Ne.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){let o=Math.abs((this._wPrev+this._wCurr)/2),s=this;this._animationId=window.requestAnimationFrame(function(p){s.updateTbState(Ne.ANIMATION_ROTATE,!0);let l=s.calculateRotationAxis(s._cursorPosPrev,s._cursorPosCurr);s.onRotationAnim(p,l,Math.min(o,s.wMax))})}else this.updateTbState(Ne.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(ur);else this.updateTbState(Ne.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(ur)}else(this._state==Ne.PAN||this._state==Ne.IDLE)&&(this.updateTbState(Ne.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(ur));this.dispatchEvent(Oi)}),se(this,"onDoubleTap",i=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(nn),this.setCenter(i.clientX,i.clientY);let o=this.unprojectOnObj(this.getCursorNDC(ot.x,ot.y,this.domElement),this.camera);if(o&&this.enableAnimations){let s=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(p){s.updateTbState(Ne.ANIMATION_FOCUS,!0),s.onFocusAnim(p,o,s._cameraMatrixState,s._gizmoMatrixState)})}else o&&!this.enableAnimations&&(this.updateTbState(Ne.FOCUS,!0),this.focus(o,this.scaleFactor),this.updateTbState(Ne.IDLE,!1),this.dispatchEvent(ur))}this.dispatchEvent(Oi)}),se(this,"onDoublePanStart",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(nn),this.updateTbState(Ne.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let i=this.unprojectOnTbPlane(this.camera,ot.x,ot.y,this.domElement,!0);i!==void 0&&this._startCursorPosition.copy(i),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}}),se(this,"onDoublePanMove",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=Ne.PAN&&(this.updateTbState(Ne.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));let i=this.unprojectOnTbPlane(this.camera,ot.x,ot.y,this.domElement,!0);i!==void 0&&this._currentCursorPosition.copy(i),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(ur)}}),se(this,"onDoublePanEnd",()=>{this.updateTbState(Ne.IDLE,!1),this.dispatchEvent(Oi)}),se(this,"onRotateStart",()=>{var i;this.enabled&&this.enableRotate&&(this.dispatchEvent(nn),this.updateTbState(Ne.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,(i=this.camera)==null||i.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}),se(this,"onRotateMove",()=>{var i;if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let o;this._state!=Ne.ZROTATE&&(this.updateTbState(Ne.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?this.camera&&(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),o=(i=this.unprojectOnTbPlane(this.camera,ot.x,ot.y,this.domElement))==null?void 0:i.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):o=new vi().setFromMatrixPosition(this._gizmoMatrixState);let s=xr.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);o!==void 0&&this.applyTransformMatrix(this.zRotate(o,s)),this.dispatchEvent(ur)}}),se(this,"onRotateEnd",()=>{this.updateTbState(Ne.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Oi)}),se(this,"onPinchStart",()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(nn),this.updateTbState(Ne.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}),se(this,"onPinchMove",()=>{var i,o;if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let s=12;this._state!=Ne.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(Ne.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),s*this._devPxRatio);let p=this._currentFingerDistance/this._startFingerDistance,l;this.enablePan?this.camera instanceof Fi?l=(i=this.unprojectOnTbPlane(this.camera,ot.x,ot.y,this.domElement))==null?void 0:i.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera instanceof po&&(l=(o=this.unprojectOnTbPlane(this.camera,ot.x,ot.y,this.domElement))==null?void 0:o.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):l=this._gizmos.position,l!==void 0&&this.applyTransformMatrix(this.applyScale(p,l)),this.dispatchEvent(ur)}}),se(this,"onPinchEnd",()=>{this.updateTbState(Ne.IDLE,!1),this.dispatchEvent(Oi)}),se(this,"onTriplePanStart",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(nn),this.updateTbState(Ne.SCALE,!0);let i=0,o=0,s=this._touchCurrent.length;for(let p=0;p<s;p++)i+=this._touchCurrent[p].clientX,o+=this._touchCurrent[p].clientY;this.setCenter(i/s,o/s),this._startCursorPosition.setY(this.getCursorNDC(ot.x,ot.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}),se(this,"onTriplePanMove",()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let i=0,o=0,s=this._touchCurrent.length;for(let m=0;m<s;m++)i+=this._touchCurrent[m].clientX,o+=this._touchCurrent[m].clientY;this.setCenter(i/s,o/s);let p=8;this._currentCursorPosition.setY(this.getCursorNDC(ot.x,ot.y,this.domElement).y*.5);let l=this._currentCursorPosition.y-this._startCursorPosition.y,c=1;l<0?c=1/Math.pow(this.scaleFactor,-l*p):l>0&&(c=Math.pow(this.scaleFactor,l*p)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);let u=this._v3_1.distanceTo(this._gizmos.position),d=u/c;d=xr.clamp(d,this.minDistance,this.maxDistance);let f=u*Math.tan(xr.DEG2RAD*this._fovState*.5),g=xr.RAD2DEG*(Math.atan(f/d)*2);g=xr.clamp(g,this.minFov,this.maxFov);let v=f/Math.tan(xr.DEG2RAD*(g/2));c=u/v,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(g),this.applyTransformMatrix(this.applyScale(c,this._v3_2,!1));let A=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(v/u);this._m4_1.makeTranslation(A.x,A.y,A.z),this.dispatchEvent(ur)}}),se(this,"onTriplePanEnd",()=>{this.updateTbState(Ne.IDLE,!1),this.dispatchEvent(Oi)}),se(this,"setCenter",(i,o)=>{ot.x=i,ot.y=o}),se(this,"initializeMouseActions",()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}),se(this,"setMouseAction",(i,o,s=null)=>{let p=["PAN","ROTATE","ZOOM","FOV"],l=[0,1,2,"WHEEL"],c=["CTRL","SHIFT",null],u;if(!p.includes(i)||!l.includes(o)||!c.includes(s)||o=="WHEEL"&&i!="ZOOM"&&i!="FOV")return!1;switch(i){case"PAN":u=Ne.PAN;break;case"ROTATE":u=Ne.ROTATE;break;case"ZOOM":u=Ne.SCALE;break;case"FOV":u=Ne.FOV;break}let d={operation:i,mouse:o,key:s,state:u};for(let f=0;f<this.mouseActions.length;f++)if(this.mouseActions[f].mouse==d.mouse&&this.mouseActions[f].key==d.key)return this.mouseActions.splice(f,1,d),!0;return this.mouseActions.push(d),!0}),se(this,"getOpFromAction",(i,o)=>{let s;for(let p=0;p<this.mouseActions.length;p++)if(s=this.mouseActions[p],s.mouse==i&&s.key==o)return s.operation;if(o){for(let p=0;p<this.mouseActions.length;p++)if(s=this.mouseActions[p],s.mouse==i&&s.key==null)return s.operation}return null}),se(this,"getOpStateFromAction",(i,o)=>{let s;for(let p=0;p<this.mouseActions.length;p++)if(s=this.mouseActions[p],s.mouse==i&&s.key==o)return s.state;if(o){for(let p=0;p<this.mouseActions.length;p++)if(s=this.mouseActions[p],s.mouse==i&&s.key==null)return s.state}return null}),se(this,"getAngle",(i,o)=>Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX)*180/Math.PI),se(this,"updateTouchEvent",i=>{for(let o=0;o<this._touchCurrent.length;o++)if(this._touchCurrent[o].pointerId==i.pointerId){this._touchCurrent.splice(o,1,i);break}}),se(this,"calculateAngularSpeed",(i,o,s,p)=>{let l=o-i,c=(p-s)/1e3;return c==0?0:l/c}),se(this,"calculatePointersDistance",(i,o)=>Math.sqrt(Math.pow(o.clientX-i.clientX,2)+Math.pow(o.clientY-i.clientY,2))),se(this,"calculateRotationAxis",(i,o)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(i,o).applyQuaternion(this._quat),this._rotationAxis.normalize().clone())),se(this,"calculateTbRadius",i=>{let s=i.position.distanceTo(this._gizmos.position);if(i instanceof po){let p=xr.DEG2RAD*i.fov*.5,l=Math.atan(i.aspect*Math.tan(p));return Math.tan(Math.min(p,l))*s*.67}else if(i instanceof Fi)return Math.min(i.top,i.right)*.67}),se(this,"focus",(i,o,s=1)=>{if(this.camera){let p=i.clone();p.sub(this._gizmos.position).multiplyScalar(s),this._translationMatrix.makeTranslation(p.x,p.y,p.z);let l=this._gizmoMatrixState.clone();this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale);let c=this._cameraMatrixState.clone();this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.applyScale(o,this._gizmos.position)),this._gizmoMatrixState.copy(l),this._cameraMatrixState.copy(c)}}),se(this,"drawGrid",()=>{if(this.scene){let s,p,l,c;if(this.camera instanceof Fi){let u=this.camera.right-this.camera.left,d=this.camera.bottom-this.camera.top;l=Math.max(u,d),c=l/20,s=l/this.camera.zoom*3,p=s/c*this.camera.zoom}else if(this.camera instanceof po){let u=this.camera.position.distanceTo(this._gizmos.position),d=xr.DEG2RAD*this.camera.fov*.5,f=Math.atan(this.camera.aspect*Math.tan(d));l=Math.tan(Math.max(d,f))*u*2,c=l/20,s=l*3,p=s/c}this._grid==null&&this.camera&&(this._grid=new pF(s,p,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}),se(this,"connect",i=>{i===document&&console.error('THREE.ArcballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=i,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)}),se(this,"dispose",()=>{var i,o,s,p,l;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),(i=this.domElement)==null||i.removeEventListener("pointerdown",this.onPointerDown),(o=this.domElement)==null||o.removeEventListener("pointercancel",this.onPointerCancel),(s=this.domElement)==null||s.removeEventListener("wheel",this.onWheel),(p=this.domElement)==null||p.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),(l=this.scene)==null||l.remove(this._gizmos),this.disposeGrid()}),se(this,"disposeGrid",()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)}),se(this,"easeOutCubic",i=>1-Math.pow(1-i,3)),se(this,"activateGizmos",i=>{for(let o of this._gizmos.children)o.material.setValues({opacity:i?1:.6})}),se(this,"getCursorNDC",(i,o,s)=>{let p=s.getBoundingClientRect();return this._v2_1.setX((i-p.left)/p.width*2-1),this._v2_1.setY((p.bottom-o)/p.height*2-1),this._v2_1.clone()}),se(this,"getCursorPosition",(i,o,s)=>(this._v2_1.copy(this.getCursorNDC(i,o,s)),this.camera instanceof Fi&&(this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5),this._v2_1.clone())),se(this,"setCamera",i=>{if(i){i.lookAt(this.target),i.updateMatrix(),i instanceof po&&(this._fov0=i.fov,this._fovState=i.fov),this._cameraMatrixState0.copy(i.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(i.projectionMatrix),this._zoom0=i.zoom,this._zoomState=this._zoom0,this._initialNear=i.near,this._nearPos0=i.position.distanceTo(this.target)-i.near,this._nearPos=this._initialNear,this._initialFar=i.far,this._farPos0=i.position.distanceTo(this.target)-i.far,this._farPos=this._initialFar,this._up0.copy(i.up),this._upState.copy(i.up),this.camera=i,this.camera.updateProjectionMatrix();let o=this.calculateTbRadius(i);o!==void 0&&(this._tbRadius=o),this.makeGizmos(this.target,this._tbRadius)}}),se(this,"makeGizmos",(i,o)=>{let p=new i1(0,0,o,o).getPoints(this._curvePts),l=new n1().setFromPoints(p),c=new a1({color:16744576,fog:!1,transparent:!0,opacity:.6}),u=new a1({color:8454016,fog:!1,transparent:!0,opacity:.6}),d=new a1({color:8421631,fog:!1,transparent:!0,opacity:.6}),f=new s1(l,c),g=new s1(l,u),v=new s1(l,d),A=Math.PI*.5;if(f.rotation.x=A,g.rotation.y=A,this._gizmoMatrixState0.identity().setPosition(i),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&this.camera.zoom!=1){let m=1/this.camera.zoom;this._scaleMatrix.makeScale(m,m,m),this._translationMatrix.makeTranslation(-i.x,-i.y,-i.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(i.x,i.y,i.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(f),this._gizmos.add(g),this._gizmos.add(v)}),se(this,"onFocusAnim",(i,o,s,p)=>{if(this._timeStart==-1&&(this._timeStart=i),this._state==Ne.ANIMATION_FOCUS){let c=(i-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(p),c>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(o,this.scaleFactor),this._timeStart=-1,this.updateTbState(Ne.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(ur);else{let u=this.easeOutCubic(c),d=1-u+this.scaleFactor*u;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(o,d,u),this.dispatchEvent(ur);let f=this;this._animationId=window.requestAnimationFrame(function(g){f.onFocusAnim(g,o,s,p.clone())})}}else this._animationId=-1,this._timeStart=-1}),se(this,"onRotationAnim",(i,o,s)=>{if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=i),this._state==Ne.ANIMATION_ROTATE){let p=(i-this._timeStart)/1e3;if(s+-this.dampingFactor*p>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(p,2)+s*p+0,this.applyTransformMatrix(this.rotate(o,this._angleCurrent)),this.dispatchEvent(ur);let c=this;this._animationId=window.requestAnimationFrame(function(u){c.onRotationAnim(u,o,s)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(Ne.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(ur)}else this._animationId=-1,this._timeStart=-1,this._state!=Ne.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(ur))}),se(this,"pan",(i,o,s=!1)=>{if(this.camera){let p=i.clone().sub(o);if(this.camera instanceof Fi&&p.multiplyScalar(1/this.camera.zoom),this.camera instanceof po&&s){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);let l=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);p.multiplyScalar(1/l)}this._v3_1.set(p.x,p.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1)}return Ei}),se(this,"reset",()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera instanceof po&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();let i=this.calculateTbRadius(this.camera);i!==void 0&&(this._tbRadius=i),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(Ne.IDLE,!1),this.dispatchEvent(ur)}}),se(this,"rotate",(i,o)=>{let s=this._gizmos.position;return this._translationMatrix.makeTranslation(-s.x,-s.y,-s.z),this._rotationMatrix.makeRotationAxis(i,-o),this._m4_1.makeTranslation(s.x,s.y,s.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),Ei}),se(this,"copyState",()=>{if(this.camera){let i=JSON.stringify(this.camera instanceof Fi?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(i)}}),se(this,"pasteState",()=>{let i=this;navigator.clipboard.readText().then(function(s){i.setStateFromJSON(s)})}),se(this,"saveState",()=>{this.camera&&(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera instanceof po&&(this._fov0=this.camera.fov))}),se(this,"applyScale",(i,o,s=!0)=>{if(!this.camera)return;let p=o.clone(),l=1/i;if(this.camera instanceof Fi){this.camera.zoom=this._zoomState,this.camera.zoom*=i,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,l=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,l=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(l,l,l),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),p.sub(this._v3_1);let c=p.clone().multiplyScalar(l);return p.sub(c),this._m4_1.makeTranslation(p.x,p.y,p.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),Ei}if(this.camera instanceof po){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let c=this._v3_1.distanceTo(p),u=c-c*l,d=c-u;d<this.minDistance?(l=this.minDistance/c,u=c-c*l):d>this.maxDistance&&(l=this.maxDistance/c,u=c-c*l);let f=p.clone().sub(this._v3_1).normalize().multiplyScalar(u);if(this._m4_1.makeTranslation(f.x,f.y,f.z),s){let g=this._v3_2;c=g.distanceTo(p),u=c-c*l,f=p.clone().sub(this._v3_2).normalize().multiplyScalar(u),this._translationMatrix.makeTranslation(g.x,g.y,g.z),this._scaleMatrix.makeScale(l,l,l),this._m4_2.makeTranslation(f.x,f.y,f.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-g.x,-g.y,-g.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return Ei}}),se(this,"setFov",i=>{this.camera instanceof po&&(this.camera.fov=xr.clamp(i,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}),se(this,"setTarget",(i,o,s)=>{if(this.camera){this.target.set(i,o,s),this._gizmos.position.set(i,o,s);let p=this.calculateTbRadius(this.camera);p!==void 0&&(this._tbRadius=p),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}}),se(this,"zRotate",(i,o)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,o),this._translationMatrix.makeTranslation(-i.x,-i.y,-i.z),this._m4_1.makeTranslation(i.x,i.y,i.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(i),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,o),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),Ei)),se(this,"unprojectOnObj",(i,o)=>{if(!this.scene)return null;let s=new lF;s.near=o.near,s.far=o.far,s.setFromCamera(i,o);let p=s.intersectObjects(this.scene.children,!0);for(let l=0;l<p.length;l++)if(p[l].object.uuid!=this._gizmos.uuid&&p[l].face)return p[l].point.clone();return null}),se(this,"unprojectOnTbSurface",(i,o,s,p,l)=>{if(i instanceof Fi){this._v2_1.copy(this.getCursorPosition(o,s,p)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);let c=Math.pow(this._v2_1.x,2),u=Math.pow(this._v2_1.y,2),d=Math.pow(this._tbRadius,2);return c+u<=d*.5?this._v3_1.setZ(Math.sqrt(d-(c+u))):this._v3_1.setZ(d*.5/Math.sqrt(c+u)),this._v3_1}if(i instanceof po){this._v2_1.copy(this.getCursorNDC(o,s,p)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(i.projectionMatrixInverse);let c=this._v3_1.clone().normalize(),u=i.position.distanceTo(this._gizmos.position),d=Math.pow(l,2),f=this._v3_1.z,g=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(g==0)return c.set(this._v3_1.x,this._v3_1.y,l),c;let v=f/g,A=u,m=Math.pow(v,2)+1,h=2*v*A,y=Math.pow(A,2)-d,E=Math.pow(h,2)-4*m*y;if(E>=0&&(this._v2_1.setX((-h-Math.sqrt(E))/(2*m)),this._v2_1.setY(v*this._v2_1.x+A),xr.RAD2DEG*this._v2_1.angle()>=45)){let C=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(C),c.z+=u,c}m=v,h=A,y=-d*.5,E=Math.pow(h,2)-4*m*y,this._v2_1.setX((-h-Math.sqrt(E))/(2*m)),this._v2_1.setY(v*this._v2_1.x+A);let b=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(u-this._v2_1.y,2));return c.multiplyScalar(b),c.z+=u,c}}),se(this,"unprojectOnTbPlane",(i,o,s,p,l=!1)=>{if(i instanceof Fi)return this._v2_1.copy(this.getCursorPosition(o,s,p)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(i instanceof po){this._v2_1.copy(this.getCursorNDC(o,s,p)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(i.projectionMatrixInverse);let c=this._v3_1.clone().normalize(),u=this._v3_1.z,d=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2)),f;if(l?f=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):f=i.position.distanceTo(this._gizmos.position),d==0)return c.set(0,0,0),c;let g=u/d,v=f,A=-v/g,m=Math.sqrt(Math.pow(v,2)+Math.pow(A,2));return c.multiplyScalar(m),c.z=0,c}}),se(this,"updateMatrixState",()=>{this.camera&&(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera instanceof Fi&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera instanceof po&&(this._fovState=this.camera.fov))}),se(this,"updateTbState",(i,o)=>{this._state=i,o&&this.updateMatrixState()}),se(this,"update",()=>{if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);let o=this.calculateTbRadius(this.camera);o!==void 0&&(this._tbRadius=o),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(this.camera){if(this.camera instanceof Fi&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){let o=xr.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(o/this.camera.zoom,this._gizmos.position,!0))}if(this.camera instanceof po){let o=this.camera.position.distanceTo(this._gizmos.position);if(o>this.maxDistance+1e-6||o<this.minDistance-1e-6){let l=xr.clamp(o,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(l/o,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=xr.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());let s=this._tbRadius,p=this.calculateTbRadius(this.camera);if(p!==void 0&&(this._tbRadius=p),s<this._tbRadius-1e-6||s>this._tbRadius+1e-6){let l=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,c=this._tbRadius/l,d=new i1(0,0,c,c).getPoints(this._curvePts),f=new n1().setFromPoints(d);for(let g in this._gizmos.children){let v=this._gizmos.children[g];v.geometry=f}}}this.camera.lookAt(this._gizmos.position)}}),se(this,"setStateFromJSON",i=>{let o=JSON.parse(i);if(o.arcballState&&this.camera){this._cameraMatrixState.fromArray(o.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(o.arcballState.cameraUp),this.camera.near=o.arcballState.cameraNear,this.camera.far=o.arcballState.cameraFar,this.camera.zoom=o.arcballState.cameraZoom,this.camera instanceof po&&(this.camera.fov=o.arcballState.cameraFov),this._gizmoMatrixState.fromArray(o.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();let s=this.calculateTbRadius(this.camera);s!==void 0&&(this._tbRadius=s);let p=new bi().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(p),this.camera.lookAt(this._gizmos.position),this.updateTbState(Ne.IDLE,!1),this.dispatchEvent(ur)}}),this.camera=null,this.domElement=r,this.scene=n,this.mouseActions=[],this._mouseOp=null,this._v2_1=new oF,this._v3_1=new vi,this._v3_2=new vi,this._m4_1=new bi,this._m4_2=new bi,this._quat=new iF,this._translationMatrix=new bi,this._rotationMatrix=new bi,this._scaleMatrix=new bi,this._rotationAxis=new vi,this._cameraMatrixState=new bi,this._cameraProjectionState=new bi,this._fovState=1,this._upState=new vi,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new bi,this._up0=new vi,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new bi,this._gizmoMatrixState0=new bi,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=Qt.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new vi,this._startCursorPosition=new vi,this._grid=null,this._gridPosition=new vi,this._gizmos=new nF,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new vi,this._cursorPosCurr=new vi,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new vi(0,0,0),this._currentTarget=new vi(0,0,0),this._tbRadius=1,this._state=Ne.IDLE,this.setCamera(e),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(e){if(e?.camera&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==Ne.ROTATE||this._state==Ne.ZROTATE||this._state==Ne.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),e?.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==Ne.SCALE||this._state==Ne.FOCUS||this._state==Ne.ANIMATION_FOCUS)&&this.camera){let r=this.calculateTbRadius(this.camera);if(r!==void 0&&(this._tbRadius=r),this.adjustNearFar){let n=this.camera.position.distanceTo(this._gizmos.position),i=new aF;i.setFromObject(this._gizmos);let o=new sF;i.getBoundingSphere(o);let s=Math.max(this._nearPos0,o.radius+o.center.length()),p=n-this._initialNear,l=Math.min(s,p);this.camera.near=n-l;let c=Math.min(this._farPos0,-o.radius+o.center.length()),u=n-this._initialFar,d=Math.min(c,u);this.camera.far=n-d,this.camera.updateProjectionMatrix()}else{let n=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,n=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,n=!0),n&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(ur)}setTransformationMatrices(e=null,r=null){e?Ei.camera?Ei.camera.copy(e):Ei.camera=e.clone():Ei.camera=null,r?Ei.gizmos?Ei.gizmos.copy(r):Ei.gizmos=r.clone():Ei.gizmos=null}};import{Quaternion as ub,Vector3 as p1}from"three";var cF=Object.defineProperty,dF=(t,e,r)=>e in t?cF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,qt=(t,e,r)=>(dF(t,typeof e!="symbol"?e+"":e,r),r);function fb(t){t.preventDefault()}var Wc=class extends wo{constructor(e,r){super(),qt(this,"object"),qt(this,"domElement",null),qt(this,"movementSpeed",1),qt(this,"rollSpeed",.005),qt(this,"dragToLook",!1),qt(this,"autoForward",!1),qt(this,"changeEvent",{type:"change"}),qt(this,"EPS",1e-6),qt(this,"tmpQuaternion",new ub),qt(this,"mouseStatus",0),qt(this,"movementSpeedMultiplier",1),qt(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),qt(this,"moveVector",new p1(0,0,0)),qt(this,"rotationVector",new p1(0,0,0)),qt(this,"keydown",n=>{if(!n.altKey){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}}),qt(this,"keyup",n=>{switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}),qt(this,"pointerdown",n=>{if(this.dragToLook)this.mouseStatus++;else{switch(n.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}}),qt(this,"pointermove",n=>{if(!this.dragToLook||this.mouseStatus>0){let i=this.getContainerDimensions(),o=i.size[0]/2,s=i.size[1]/2;this.moveState.yawLeft=-(n.pageX-i.offset[0]-o)/o,this.moveState.pitchDown=(n.pageY-i.offset[1]-s)/s,this.updateRotationVector()}}),qt(this,"pointerup",n=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(n.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}),qt(this,"lastQuaternion",new ub),qt(this,"lastPosition",new p1),qt(this,"update",n=>{let i=n*this.movementSpeed,o=n*this.rollSpeed;this.object.translateX(this.moveVector.x*i),this.object.translateY(this.moveVector.y*i),this.object.translateZ(this.moveVector.z*i),this.tmpQuaternion.set(this.rotationVector.x*o,this.rotationVector.y*o,this.rotationVector.z*o,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))}),qt(this,"updateMovementVector",()=>{let n=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-n+this.moveState.back}),qt(this,"updateRotationVector",()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}),qt(this,"getContainerDimensions",()=>this.domElement!=document&&!(this.domElement instanceof Document)?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}),qt(this,"connect",n=>{this.domElement=n,n instanceof Document||n.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",fb),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}),qt(this,"dispose",()=>{this.domElement.removeEventListener("contextmenu",fb),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}),this.object=e,r!==void 0&&this.connect(r),this.updateMovementVector(),this.updateRotationVector()}};import{ShaderMaterial as gb,UniformsUtils as vF}from"three";import{OrthographicCamera as gF,PlaneGeometry as hF,Mesh as mF}from"three";var uF=Object.defineProperty,fF=(t,e,r)=>e in t?uF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Rs=(t,e,r)=>(fF(t,typeof e!="symbol"?e+"":e,r),r),Fn=class{constructor(){Rs(this,"enabled",!0),Rs(this,"needsSwap",!0),Rs(this,"clear",!1),Rs(this,"renderToScreen",!1)}setSize(e,r){}render(e,r,n,i,o){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}},So=class{constructor(e){Rs(this,"camera",new gF(-1,1,1,-1,0,1)),Rs(this,"geometry",new hF(2,2)),Rs(this,"mesh"),this.mesh=new mF(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}};var AF=Object.defineProperty,yF=(t,e,r)=>e in t?AF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xf=(t,e,r)=>(yF(t,typeof e!="symbol"?e+"":e,r),r),Sa=class extends Fn{constructor(e,r="tDiffuse"){super(),xf(this,"textureID"),xf(this,"uniforms"),xf(this,"material"),xf(this,"fsQuad"),this.textureID=r,e instanceof gb?(this.uniforms=e.uniforms,this.material=e):(this.uniforms=vF.clone(e.uniforms),this.material=new gb({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new So(this.material)}render(e,r,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.fsQuad.dispose(),this.material.dispose()}};var l1={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`
    varying vec2 vUv;

    void main() {

    	vUv = uv;
    	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`
    uniform float opacity;

    uniform sampler2D tDiffuse;

    varying vec2 vUv;

    void main() {

    	vec4 texel = texture2D( tDiffuse, vUv );
    	gl_FragColor = opacity * texel;

    }
  `};var EF=Object.defineProperty,bF=(t,e,r)=>e in t?EF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c1=(t,e,r)=>(bF(t,typeof e!="symbol"?e+"":e,r),r),Vc=class extends Fn{constructor(e,r){super(),c1(this,"scene"),c1(this,"camera"),c1(this,"inverse"),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,n){let i=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let s,p;this.inverse?(s=0,p=1):(s=1,p=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),o.buffers.stencil.setFunc(i.ALWAYS,s,4294967295),o.buffers.stencil.setClear(p),o.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(i.EQUAL,1,4294967295),o.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),o.buffers.stencil.setLocked(!0)}},Mf=class extends Fn{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}};import{Vector2 as hb,WebGLRenderTarget as RF,NoBlending as BF,Clock as xF,LinearFilter as mb,RGBAFormat as MF}from"three";var _F=Object.defineProperty,CF=(t,e,r)=>e in t?_F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Di=(t,e,r)=>(CF(t,typeof e!="symbol"?e+"":e,r),r),Yc=class{constructor(e,r){if(Di(this,"renderer"),Di(this,"_pixelRatio"),Di(this,"_width"),Di(this,"_height"),Di(this,"renderTarget1"),Di(this,"renderTarget2"),Di(this,"writeBuffer"),Di(this,"readBuffer"),Di(this,"renderToScreen"),Di(this,"passes",[]),Di(this,"copyPass"),Di(this,"clock"),this.renderer=e,r===void 0){let n={minFilter:mb,magFilter:mb,format:MF},i=e.getSize(new hb);this._pixelRatio=e.getPixelRatio(),this._width=i.width,this._height=i.height,r=new RF(this._width*this._pixelRatio,this._height*this._pixelRatio,n),r.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,l1===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),Sa===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Sa(l1),this.copyPass.material.blending=BF,this.clock=new xF}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());let r=this.renderer.getRenderTarget(),n=!1,i=this.passes.length;for(let o=0;o<i;o++){let s=this.passes[o];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),s.needsSwap){if(n){let p=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(p.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(p.EQUAL,1,4294967295)}this.swapBuffers()}Vc!==void 0&&(s instanceof Vc?n=!0:s instanceof Mf&&(n=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){let r=this.renderer.getSize(new hb);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;let n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(n,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}};import{Color as SF}from"three";var wF=Object.defineProperty,TF=(t,e,r)=>e in t?wF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bs=(t,e,r)=>(TF(t,typeof e!="symbol"?e+"":e,r),r),Kc=class extends Fn{constructor(e,r,n,i,o=0){super(),Bs(this,"scene"),Bs(this,"camera"),Bs(this,"overrideMaterial"),Bs(this,"clearColor"),Bs(this,"clearAlpha"),Bs(this,"clearDepth",!1),Bs(this,"_oldClearColor",new SF),this.scene=e,this.camera=r,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=o,this.clear=!0,this.needsSwap=!1}render(e,r,n){let i=e.autoClear;e.autoClear=!1;let o,s=null;this.overrideMaterial!==void 0&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,o),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=s),e.autoClear=i}};import{Loader as IF,LoaderUtils as qc,FileLoader as xb,Color as ws,SpotLight as FF,PointLight as OF,DirectionalLight as DF,MeshBasicMaterial as Jc,MeshPhysicalMaterial as On,Vector2 as Mb,Matrix4 as wf,Vector3 as Fp,Quaternion as wb,InstancedMesh as kF,InstancedBufferAttribute as LF,Object3D as Tb,TextureLoader as PF,ImageBitmapLoader as GF,BufferAttribute as d1,InterleavedBuffer as zF,InterleavedBufferAttribute as NF,LinearFilter as Sb,LinearMipmapLinearFilter as Ib,RepeatWrapping as A1,PointsMaterial as UF,Material as u1,LineBasicMaterial as jF,MeshStandardMaterial as Fb,DoubleSide as HF,PropertyBinding as QF,BufferGeometry as WF,SkinnedMesh as VF,Mesh as YF,TriangleStripDrawMode as KF,TriangleFanDrawMode as XF,LineSegments as JF,Line as qF,LineLoop as ZF,Points as $F,Group as f1,PerspectiveCamera as eO,MathUtils as tO,OrthographicCamera as rO,Skeleton as oO,AnimationClip as iO,Bone as nO,InterpolateLinear as Ob,NearestFilter as aO,NearestMipmapNearestFilter as sO,LinearMipmapNearestFilter as pO,NearestMipmapLinearFilter as lO,ClampToEdgeWrapping as cO,MirroredRepeatWrapping as dO,InterpolateDiscrete as uO,FrontSide as fO,Texture as Ab,VectorKeyframeTrack as yb,NumberKeyframeTrack as vb,QuaternionKeyframeTrack as Eb,Box3 as gO,Sphere as hO,Interpolant as mO}from"three";function Ia(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let r=0,n=t.length;r<n;r++)e+=String.fromCharCode(t[r]);try{return decodeURIComponent(escape(e))}catch{return e}}var Ms="srgb",oa="srgb-linear",bb=3001,AO=3e3,Ts=class extends IF{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new b1(r)}),this.register(function(r){return new _1(r)}),this.register(function(r){return new I1(r)}),this.register(function(r){return new F1(r)}),this.register(function(r){return new O1(r)}),this.register(function(r){return new R1(r)}),this.register(function(r){return new B1(r)}),this.register(function(r){return new x1(r)}),this.register(function(r){return new M1(r)}),this.register(function(r){return new E1(r)}),this.register(function(r){return new w1(r)}),this.register(function(r){return new C1(r)}),this.register(function(r){return new S1(r)}),this.register(function(r){return new T1(r)}),this.register(function(r){return new y1(r)}),this.register(function(r){return new D1(r)}),this.register(function(r){return new k1(r)})}load(e,r,n,i){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let c=qc.extractUrlBase(e);s=qc.resolveURL(c,this.path)}else s=qc.extractUrlBase(e);this.manager.itemStart(e);let p=function(c){i?i(c):console.error(c),o.manager.itemError(e),o.manager.itemEnd(e)},l=new xb(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{o.parse(c,s,function(u){r(u),o.manager.itemEnd(e)},p)}catch(u){p(u)}},n,p)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,r,n,i){let o,s={},p={};if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Ia(new Uint8Array(e.slice(0,4)))===Db){try{s[ut.KHR_BINARY_GLTF]=new L1(e)}catch(u){i&&i(u);return}o=JSON.parse(s[ut.KHR_BINARY_GLTF].content)}else o=JSON.parse(Ia(new Uint8Array(e)));else o=e;if(o.asset===void 0||o.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new H1(o,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){let u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),p[u.name]=u,s[u.name]=!0}if(o.extensionsUsed)for(let c=0;c<o.extensionsUsed.length;++c){let u=o.extensionsUsed[c],d=o.extensionsRequired||[];switch(u){case ut.KHR_MATERIALS_UNLIT:s[u]=new v1;break;case ut.KHR_DRACO_MESH_COMPRESSION:s[u]=new P1(o,this.dracoLoader);break;case ut.KHR_TEXTURE_TRANSFORM:s[u]=new G1;break;case ut.KHR_MESH_QUANTIZATION:s[u]=new z1;break;default:d.indexOf(u)>=0&&p[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(s),l.setPlugins(p),l.parse(n,i)}parseAsync(e,r){let n=this;return new Promise(function(i,o){n.parse(e,r,i,o)})}};function yO(){let t={};return{get:function(e){return t[e]},add:function(e,r){t[e]=r},remove:function(e){delete t[e]},removeAll:function(){t={}}}}var ut={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},y1=class{constructor(e){this.parser=e,this.name=ut.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,r=this.parser.json.nodes||[];for(let n=0,i=r.length;n<i;n++){let o=r[n];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){let r=this.parser,n="light:"+e,i=r.cache.get(n);if(i)return i;let o=r.json,l=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],c,u=new ws(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],oa);let d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new DF(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new OF(u),c.distance=d;break;case"spot":c=new FF(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,ra(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=r.createUniqueName(l.name||"light_"+e),i=Promise.resolve(c),r.cache.add(n,i),i}getDependency(e,r){if(e==="light")return this._loadLight(r)}createNodeAttachment(e){let r=this,n=this.parser,o=n.json.nodes[e],p=(o.extensions&&o.extensions[this.name]||{}).light;return p===void 0?null:this._loadLight(p).then(function(l){return n._getNodeRef(r.cache,p,l)})}},v1=class{constructor(){this.name=ut.KHR_MATERIALS_UNLIT}getMaterialType(){return Jc}extendParams(e,r,n){let i=[];e.color=new ws(1,1,1),e.opacity=1;let o=r.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],oa),e.opacity=s[3]}o.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",o.baseColorTexture,Ms))}return Promise.all(i)}},E1=class{constructor(e){this.parser=e,this.name=ut.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,r){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let o=i.extensions[this.name].emissiveStrength;return o!==void 0&&(r.emissiveIntensity=o),Promise.resolve()}},b1=class{constructor(e){this.parser=e,this.name=ut.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:On}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let o=[],s=i.extensions[this.name];if(s.clearcoatFactor!==void 0&&(r.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(n.assignTexture(r,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(r.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(n.assignTexture(r,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(n.assignTexture(r,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let p=s.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new Mb(p,p)}return Promise.all(o)}},_1=class{constructor(e){this.parser=e,this.name=ut.KHR_MATERIALS_DISPERSION}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:On}extendMaterialParams(e,r){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let o=i.extensions[this.name];return r.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},C1=class{constructor(e){this.parser=e,this.name=ut.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:On}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let o=[],s=i.extensions[this.name];return s.iridescenceFactor!==void 0&&(r.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(n.assignTexture(r,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(r.iridescenceIOR=s.iridescenceIor),r.iridescenceThicknessRange===void 0&&(r.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(r.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(r.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(n.assignTexture(r,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},R1=class{constructor(e){this.parser=e,this.name=ut.KHR_MATERIALS_SHEEN}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:On}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let o=[];r.sheenColor=new ws(0,0,0),r.sheenRoughness=0,r.sheen=1;let s=i.extensions[this.name];if(s.sheenColorFactor!==void 0){let p=s.sheenColorFactor;r.sheenColor.setRGB(p[0],p[1],p[2],oa)}return s.sheenRoughnessFactor!==void 0&&(r.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(n.assignTexture(r,"sheenColorMap",s.sheenColorTexture,Ms)),s.sheenRoughnessTexture!==void 0&&o.push(n.assignTexture(r,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},B1=class{constructor(e){this.parser=e,this.name=ut.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:On}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let o=[],s=i.extensions[this.name];return s.transmissionFactor!==void 0&&(r.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(n.assignTexture(r,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},x1=class{constructor(e){this.parser=e,this.name=ut.KHR_MATERIALS_VOLUME}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:On}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let o=[],s=i.extensions[this.name];r.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(n.assignTexture(r,"thicknessMap",s.thicknessTexture)),r.attenuationDistance=s.attenuationDistance||1/0;let p=s.attenuationColor||[1,1,1];return r.attenuationColor=new ws().setRGB(p[0],p[1],p[2],oa),Promise.all(o)}},M1=class{constructor(e){this.parser=e,this.name=ut.KHR_MATERIALS_IOR}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:On}extendMaterialParams(e,r){let i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let o=i.extensions[this.name];return r.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},w1=class{constructor(e){this.parser=e,this.name=ut.KHR_MATERIALS_SPECULAR}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:On}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let o=[],s=i.extensions[this.name];r.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(n.assignTexture(r,"specularIntensityMap",s.specularTexture));let p=s.specularColorFactor||[1,1,1];return r.specularColor=new ws().setRGB(p[0],p[1],p[2],oa),s.specularColorTexture!==void 0&&o.push(n.assignTexture(r,"specularColorMap",s.specularColorTexture,Ms)),Promise.all(o)}},T1=class{constructor(e){this.parser=e,this.name=ut.EXT_MATERIALS_BUMP}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:On}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let o=[],s=i.extensions[this.name];return r.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(n.assignTexture(r,"bumpMap",s.bumpTexture)),Promise.all(o)}},S1=class{constructor(e){this.parser=e,this.name=ut.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:On}extendMaterialParams(e,r){let n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();let o=[],s=i.extensions[this.name];return s.anisotropyStrength!==void 0&&(r.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(r.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(n.assignTexture(r,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},I1=class{constructor(e){this.parser=e,this.name=ut.KHR_TEXTURE_BASISU}loadTexture(e){let r=this.parser,n=r.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;let o=i.extensions[this.name],s=r.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(e,o.source,s)}},F1=class{constructor(e){this.parser=e,this.name=ut.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let r=this.name,n=this.parser,i=n.json,o=i.textures[e];if(!o.extensions||!o.extensions[r])return null;let s=o.extensions[r],p=i.images[s.source],l=n.textureLoader;if(p.uri){let c=n.options.manager.getHandler(p.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,s.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){e(r.height===1)}})),this.isSupported}},O1=class{constructor(e){this.parser=e,this.name=ut.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let r=this.name,n=this.parser,i=n.json,o=i.textures[e];if(!o.extensions||!o.extensions[r])return null;let s=o.extensions[r],p=i.images[s.source],l=n.textureLoader;if(p.uri){let c=n.options.manager.getHandler(p.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(e,s.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){e(r.height===1)}})),this.isSupported}},D1=class{constructor(e){this.name=ut.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let r=this.parser.json,n=r.bufferViews[e];if(n.extensions&&n.extensions[this.name]){let i=n.extensions[this.name],o=this.parser.getDependency("buffer",i.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(p){let l=i.byteOffset||0,c=i.byteLength||0,u=i.count,d=i.byteStride,f=new Uint8Array(p,l,c);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(u,d,f,i.mode,i.filter).then(function(g){return g.buffer}):s.ready.then(function(){let g=new ArrayBuffer(u*d);return s.decodeGltfBuffer(new Uint8Array(g),u,d,f,i.mode,i.filter),g})})}else return null}},k1=class{constructor(e){this.name=ut.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let r=this.parser.json,n=r.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;let i=r.meshes[n.mesh];for(let c of i.primitives)if(c.mode!==ki.TRIANGLES&&c.mode!==ki.TRIANGLE_STRIP&&c.mode!==ki.TRIANGLE_FAN&&c.mode!==void 0)return null;let s=n.extensions[this.name].attributes,p=[],l={};for(let c in s)p.push(this.parser.getDependency("accessor",s[c]).then(u=>(l[c]=u,l[c])));return p.length<1?null:(p.push(this.parser.createNodeMesh(e)),Promise.all(p).then(c=>{let u=c.pop(),d=u.isGroup?u.children:[u],f=c[0].count,g=[];for(let v of d){let A=new wf,m=new Fp,h=new wb,y=new Fp(1,1,1),E=new kF(v.geometry,v.material,f);for(let b=0;b<f;b++)l.TRANSLATION&&m.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&h.fromBufferAttribute(l.ROTATION,b),l.SCALE&&y.fromBufferAttribute(l.SCALE,b),E.setMatrixAt(b,A.compose(m,h,y));for(let b in l)if(b==="_COLOR_0"){let _=l[b];E.instanceColor=new LF(_.array,_.itemSize,_.normalized)}else b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&v.geometry.setAttribute(b,l[b]);Tb.prototype.copy.call(E,v),this.parser.assignFinalMaterial(E),g.push(E)}return u.isGroup?(u.clear(),u.add(...g),u):g[0]}))}},Db="glTF",Xc=12,_b={JSON:1313821514,BIN:5130562},L1=class{constructor(e){this.name=ut.KHR_BINARY_GLTF,this.content=null,this.body=null;let r=new DataView(e,0,Xc);if(this.header={magic:Ia(new Uint8Array(e.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==Db)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let n=this.header.length-Xc,i=new DataView(e,Xc),o=0;for(;o<n;){let s=i.getUint32(o,!0);o+=4;let p=i.getUint32(o,!0);if(o+=4,p===_b.JSON){let l=new Uint8Array(e,Xc+o,s);this.content=Ia(l)}else if(p===_b.BIN){let l=Xc+o;this.body=e.slice(l,l+s)}o+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},P1=class{constructor(e,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ut.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(e,r){let n=this.json,i=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,p={},l={},c={};for(let u in s){let d=U1[u]||u.toLowerCase();p[d]=s[u]}for(let u in e.attributes){let d=U1[u]||u.toLowerCase();if(s[u]!==void 0){let f=n.accessors[e.attributes[u]],g=Op[f.componentType];c[d]=g.name,l[d]=f.normalized===!0}}return r.getDependency("bufferView",o).then(function(u){return new Promise(function(d,f){i.decodeDracoFile(u,function(g){for(let v in g.attributes){let A=g.attributes[v],m=l[v];m!==void 0&&(A.normalized=m)}d(g)},p,c,oa,f)})})}},G1=class{constructor(){this.name=ut.KHR_TEXTURE_TRANSFORM}extendTexture(e,r){return(r.texCoord===void 0||r.texCoord===e.channel)&&r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(e=e.clone(),r.texCoord!==void 0&&(e.channel=r.texCoord),r.offset!==void 0&&e.offset.fromArray(r.offset),r.rotation!==void 0&&(e.rotation=r.rotation),r.scale!==void 0&&e.repeat.fromArray(r.scale),e.needsUpdate=!0),e}},z1=class{constructor(){this.name=ut.KHR_MESH_QUANTIZATION}},Tf=class extends mO{constructor(e,r,n,i){super(e,r,n,i)}copySampleValue_(e){let r=this.resultBuffer,n=this.sampleValues,i=this.valueSize,o=e*i*3+i;for(let s=0;s!==i;s++)r[s]=n[o+s];return r}interpolate_(e,r,n,i){let o=this.resultBuffer,s=this.sampleValues,p=this.valueSize,l=p*2,c=p*3,u=i-r,d=(n-r)/u,f=d*d,g=f*d,v=e*c,A=v-c,m=-2*g+3*f,h=g-f,y=1-m,E=h-f+d;for(let b=0;b!==p;b++){let _=s[A+b+p],C=s[A+b+l]*u,B=s[v+b+p],R=s[v+b]*u;o[b]=y*_+E*C+m*B+h*R}return o}},vO=new wb,N1=class extends Tf{interpolate_(e,r,n,i){let o=super.interpolate_(e,r,n,i);return vO.fromArray(o).normalize().toArray(o),o}},ki={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Op={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Cb={9728:aO,9729:Sb,9984:sO,9985:pO,9986:lO,9987:Ib},Rb={33071:cO,33648:dO,10497:A1},g1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},U1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Si>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Fa={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},EO={CUBICSPLINE:void 0,LINEAR:Ob,STEP:uO},h1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function bO(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Fb({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:fO})),t.DefaultMaterial}function xs(t,e,r){for(let n in r.extensions)t[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=r.extensions[n])}function ra(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function _O(t,e,r){let n=!1,i=!1,o=!1;for(let c=0,u=e.length;c<u;c++){let d=e[c];if(d.POSITION!==void 0&&(n=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(o=!0),n&&i&&o)break}if(!n&&!i&&!o)return Promise.resolve(t);let s=[],p=[],l=[];for(let c=0,u=e.length;c<u;c++){let d=e[c];if(n){let f=d.POSITION!==void 0?r.getDependency("accessor",d.POSITION):t.attributes.position;s.push(f)}if(i){let f=d.NORMAL!==void 0?r.getDependency("accessor",d.NORMAL):t.attributes.normal;p.push(f)}if(o){let f=d.COLOR_0!==void 0?r.getDependency("accessor",d.COLOR_0):t.attributes.color;l.push(f)}}return Promise.all([Promise.all(s),Promise.all(p),Promise.all(l)]).then(function(c){let u=c[0],d=c[1],f=c[2];return n&&(t.morphAttributes.position=u),i&&(t.morphAttributes.normal=d),o&&(t.morphAttributes.color=f),t.morphTargetsRelative=!0,t})}function CO(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let r=0,n=e.weights.length;r<n;r++)t.morphTargetInfluences[r]=e.weights[r];if(e.extras&&Array.isArray(e.extras.targetNames)){let r=e.extras.targetNames;if(t.morphTargetInfluences.length===r.length){t.morphTargetDictionary={};for(let n=0,i=r.length;n<i;n++)t.morphTargetDictionary[r[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function RO(t){let e,r=t.extensions&&t.extensions[ut.KHR_DRACO_MESH_COMPRESSION];if(r?e="draco:"+r.bufferView+":"+r.indices+":"+m1(r.attributes):e=t.indices+":"+m1(t.attributes)+":"+t.mode,t.targets!==void 0)for(let n=0,i=t.targets.length;n<i;n++)e+=":"+m1(t.targets[n]);return e}function m1(t){let e="",r=Object.keys(t).sort();for(let n=0,i=r.length;n<i;n++)e+=r[n]+":"+t[r[n]]+";";return e}function j1(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function BO(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}var xO=new wf,H1=class{constructor(e={},r={}){this.json=e,this.extensions={},this.plugins={},this.options=r,this.cache=new yO,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,o=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||i&&o<98?this.textureLoader=new PF(this.options.manager):this.textureLoader=new GF(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new xb(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,r){let n=this,i=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(s){let p={scene:s[0][i.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:i.asset,parser:n,userData:{}};return xs(o,p,i),ra(p,i),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(p)})).then(function(){for(let l of p.scenes)l.updateMatrixWorld();e(p)})}).catch(r)}_markDefs(){let e=this.json.nodes||[],r=this.json.skins||[],n=this.json.meshes||[];for(let i=0,o=r.length;i<o;i++){let s=r[i].joints;for(let p=0,l=s.length;p<l;p++)e[s[p]].isBone=!0}for(let i=0,o=e.length;i<o;i++){let s=e[i];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(n[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,r){r!==void 0&&(e.refs[r]===void 0&&(e.refs[r]=e.uses[r]=0),e.refs[r]++)}_getNodeRef(e,r,n){if(e.refs[r]<=1)return n;let i=n.clone(),o=(s,p)=>{let l=this.associations.get(s);l!=null&&this.associations.set(p,l);for(let[c,u]of s.children.entries())o(u,p.children[c])};return o(n,i),i.name+="_instance_"+e.uses[r]++,i}_invokeOne(e){let r=Object.values(this.plugins);r.push(this);for(let n=0;n<r.length;n++){let i=e(r[n]);if(i)return i}return null}_invokeAll(e){let r=Object.values(this.plugins);r.unshift(this);let n=[];for(let i=0;i<r.length;i++){let o=e(r[i]);o&&n.push(o)}return n}getDependency(e,r){let n=e+":"+r,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(r);break;case"node":i=this._invokeOne(function(o){return o.loadNode&&o.loadNode(r)});break;case"mesh":i=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(r)});break;case"accessor":i=this.loadAccessor(r);break;case"bufferView":i=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(r)});break;case"buffer":i=this.loadBuffer(r);break;case"material":i=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(r)});break;case"texture":i=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(r)});break;case"skin":i=this.loadSkin(r);break;case"animation":i=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(r)});break;case"camera":i=this.loadCamera(r);break;default:if(i=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,r)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let r=this.cache.get(e);if(!r){let n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];r=Promise.all(i.map(function(o,s){return n.getDependency(e,s)})),this.cache.add(e,r)}return r}loadBuffer(e){let r=this.json.buffers[e],n=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&e===0)return Promise.resolve(this.extensions[ut.KHR_BINARY_GLTF].body);let i=this.options;return new Promise(function(o,s){n.load(qc.resolveURL(r.uri,i.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(e){let r=this.json.bufferViews[e];return this.getDependency("buffer",r.buffer).then(function(n){let i=r.byteLength||0,o=r.byteOffset||0;return n.slice(o,o+i)})}loadAccessor(e){let r=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){let s=g1[i.type],p=Op[i.componentType],l=i.normalized===!0,c=new p(i.count*s);return Promise.resolve(new d1(c,s,l))}let o=[];return i.bufferView!==void 0?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),i.sparse!==void 0&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then(function(s){let p=s[0],l=g1[i.type],c=Op[i.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,f=i.byteOffset||0,g=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0,A,m;if(g&&g!==d){let h=Math.floor(f/g),y="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+h+":"+i.count,E=r.cache.get(y);E||(A=new c(p,h*g,i.count*g/u),E=new zF(A,g/u),r.cache.add(y,E)),m=new NF(E,l,f%g/u,v)}else p===null?A=new c(i.count*l):A=new c(p,f,i.count*l),m=new d1(A,l,v);if(i.sparse!==void 0){let h=g1.SCALAR,y=Op[i.sparse.indices.componentType],E=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,_=new y(s[1],E,i.sparse.count*h),C=new c(s[2],b,i.sparse.count*l);p!==null&&(m=new d1(m.array.slice(),m.itemSize,m.normalized));for(let B=0,R=_.length;B<R;B++){let M=_[B];if(m.setX(M,C[B*l]),l>=2&&m.setY(M,C[B*l+1]),l>=3&&m.setZ(M,C[B*l+2]),l>=4&&m.setW(M,C[B*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){let r=this.json,n=this.options,o=r.textures[e].source,s=r.images[o],p=this.textureLoader;if(s.uri){let l=n.manager.getHandler(s.uri);l!==null&&(p=l)}return this.loadTextureImage(e,o,p)}loadTextureImage(e,r,n){let i=this,o=this.json,s=o.textures[e],p=o.images[r],l=(p.uri||p.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];let c=this.loadImageSource(r,n).then(function(u){u.flipY=!1,u.name=s.name||p.name||"",u.name===""&&typeof p.uri=="string"&&p.uri.startsWith("data:image/")===!1&&(u.name=p.uri);let f=(o.samplers||{})[s.sampler]||{};return u.magFilter=Cb[f.magFilter]||Sb,u.minFilter=Cb[f.minFilter]||Ib,u.wrapS=Rb[f.wrapS]||A1,u.wrapT=Rb[f.wrapT]||A1,i.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,r){let n=this,i=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());let s=i.images[e],p=self.URL||self.webkitURL,l=s.uri||"",c=!1;if(s.bufferView!==void 0)l=n.getDependency("bufferView",s.bufferView).then(function(d){c=!0;let f=new Blob([d],{type:s.mimeType});return l=p.createObjectURL(f),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let u=Promise.resolve(l).then(function(d){return new Promise(function(f,g){let v=f;r.isImageBitmapLoader===!0&&(v=function(A){let m=new Ab(A);m.needsUpdate=!0,f(m)}),r.load(qc.resolveURL(d,o.path),v,void 0,g)})}).then(function(d){return c===!0&&p.revokeObjectURL(l),ra(d,s),d.userData.mimeType=s.mimeType||BO(s.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,r,n,i){let o=this;return this.getDependency("texture",n.index).then(function(s){if(!s)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(s=s.clone(),s.channel=n.texCoord),o.extensions[ut.KHR_TEXTURE_TRANSFORM]){let p=n.extensions!==void 0?n.extensions[ut.KHR_TEXTURE_TRANSFORM]:void 0;if(p){let l=o.associations.get(s);s=o.extensions[ut.KHR_TEXTURE_TRANSFORM].extendTexture(s,p),o.associations.set(s,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===bb?Ms:oa),"colorSpace"in s?s.colorSpace=i:s.encoding=i===Ms?bb:AO),e[r]=s,s})}assignFinalMaterial(e){let r=e.geometry,n=e.material,i=r.attributes.tangent===void 0,o=r.attributes.color!==void 0,s=r.attributes.normal===void 0;if(e.isPoints){let p="PointsMaterial:"+n.uuid,l=this.cache.get(p);l||(l=new UF,u1.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(p,l)),n=l}else if(e.isLine){let p="LineBasicMaterial:"+n.uuid,l=this.cache.get(p);l||(l=new jF,u1.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(p,l)),n=l}if(i||o||s){let p="ClonedMaterial:"+n.uuid+":";i&&(p+="derivative-tangents:"),o&&(p+="vertex-colors:"),s&&(p+="flat-shading:");let l=this.cache.get(p);l||(l=n.clone(),o&&(l.vertexColors=!0),s&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(p,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return Fb}loadMaterial(e){let r=this,n=this.json,i=this.extensions,o=n.materials[e],s,p={},l=o.extensions||{},c=[];if(l[ut.KHR_MATERIALS_UNLIT]){let d=i[ut.KHR_MATERIALS_UNLIT];s=d.getMaterialType(),c.push(d.extendParams(p,o,r))}else{let d=o.pbrMetallicRoughness||{};if(p.color=new ws(1,1,1),p.opacity=1,Array.isArray(d.baseColorFactor)){let f=d.baseColorFactor;p.color.setRGB(f[0],f[1],f[2],oa),p.opacity=f[3]}d.baseColorTexture!==void 0&&c.push(r.assignTexture(p,"map",d.baseColorTexture,Ms)),p.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,p.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(r.assignTexture(p,"metalnessMap",d.metallicRoughnessTexture)),c.push(r.assignTexture(p,"roughnessMap",d.metallicRoughnessTexture))),s=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,p)})))}o.doubleSided===!0&&(p.side=HF);let u=o.alphaMode||h1.OPAQUE;if(u===h1.BLEND?(p.transparent=!0,p.depthWrite=!1):(p.transparent=!1,u===h1.MASK&&(p.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==Jc&&(c.push(r.assignTexture(p,"normalMap",o.normalTexture)),p.normalScale=new Mb(1,1),o.normalTexture.scale!==void 0)){let d=o.normalTexture.scale;p.normalScale.set(d,d)}if(o.occlusionTexture!==void 0&&s!==Jc&&(c.push(r.assignTexture(p,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(p.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==Jc){let d=o.emissiveFactor;p.emissive=new ws().setRGB(d[0],d[1],d[2],oa)}return o.emissiveTexture!==void 0&&s!==Jc&&c.push(r.assignTexture(p,"emissiveMap",o.emissiveTexture,Ms)),Promise.all(c).then(function(){let d=new s(p);return o.name&&(d.name=o.name),ra(d,o),r.associations.set(d,{materials:e}),o.extensions&&xs(i,d,o),d})}createUniqueName(e){let r=QF.sanitizeNodeName(e||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(e){let r=this,n=this.extensions,i=this.primitiveCache;function o(p){return n[ut.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(p,r).then(function(l){return Bb(l,p,r)})}let s=[];for(let p=0,l=e.length;p<l;p++){let c=e[p],u=RO(c),d=i[u];if(d)s.push(d.promise);else{let f;c.extensions&&c.extensions[ut.KHR_DRACO_MESH_COMPRESSION]?f=o(c):f=Bb(new WF,c,r),i[u]={primitive:c,promise:f},s.push(f)}}return Promise.all(s)}loadMesh(e){let r=this,n=this.json,i=this.extensions,o=n.meshes[e],s=o.primitives,p=[];for(let l=0,c=s.length;l<c;l++){let u=s[l].material===void 0?bO(this.cache):this.getDependency("material",s[l].material);p.push(u)}return p.push(r.loadGeometries(s)),Promise.all(p).then(function(l){let c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let g=0,v=u.length;g<v;g++){let A=u[g],m=s[g],h,y=c[g];if(m.mode===ki.TRIANGLES||m.mode===ki.TRIANGLE_STRIP||m.mode===ki.TRIANGLE_FAN||m.mode===void 0)h=o.isSkinnedMesh===!0?new VF(A,y):new YF(A,y),h.isSkinnedMesh===!0&&h.normalizeSkinWeights(),m.mode===ki.TRIANGLE_STRIP?h.geometry=gf(h.geometry,KF):m.mode===ki.TRIANGLE_FAN&&(h.geometry=gf(h.geometry,XF));else if(m.mode===ki.LINES)h=new JF(A,y);else if(m.mode===ki.LINE_STRIP)h=new qF(A,y);else if(m.mode===ki.LINE_LOOP)h=new ZF(A,y);else if(m.mode===ki.POINTS)h=new $F(A,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(h.geometry.morphAttributes).length>0&&CO(h,o),h.name=r.createUniqueName(o.name||"mesh_"+e),ra(h,o),m.extensions&&xs(i,h,m),r.assignFinalMaterial(h),d.push(h)}for(let g=0,v=d.length;g<v;g++)r.associations.set(d[g],{meshes:e,primitives:g});if(d.length===1)return o.extensions&&xs(i,d[0],o),d[0];let f=new f1;o.extensions&&xs(i,f,o),r.associations.set(f,{meshes:e});for(let g=0,v=d.length;g<v;g++)f.add(d[g]);return f})}loadCamera(e){let r,n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?r=new eO(tO.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(r=new rO(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(r.name=this.createUniqueName(n.name)),ra(r,n),Promise.resolve(r)}loadSkin(e){let r=this.json.skins[e],n=[];for(let i=0,o=r.joints.length;i<o;i++)n.push(this._loadNodeShallow(r.joints[i]));return r.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",r.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){let o=i.pop(),s=i,p=[],l=[];for(let c=0,u=s.length;c<u;c++){let d=s[c];if(d){p.push(d);let f=new wf;o!==null&&f.fromArray(o.array,c*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[c])}return new oO(p,l)})}loadAnimation(e){let r=this.json,n=this,i=r.animations[e],o=i.name?i.name:"animation_"+e,s=[],p=[],l=[],c=[],u=[];for(let d=0,f=i.channels.length;d<f;d++){let g=i.channels[d],v=i.samplers[g.sampler],A=g.target,m=A.node,h=i.parameters!==void 0?i.parameters[v.input]:v.input,y=i.parameters!==void 0?i.parameters[v.output]:v.output;A.node!==void 0&&(s.push(this.getDependency("node",m)),p.push(this.getDependency("accessor",h)),l.push(this.getDependency("accessor",y)),c.push(v),u.push(A))}return Promise.all([Promise.all(s),Promise.all(p),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){let f=d[0],g=d[1],v=d[2],A=d[3],m=d[4],h=[];for(let y=0,E=f.length;y<E;y++){let b=f[y],_=g[y],C=v[y],B=A[y],R=m[y];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();let M=n._createAnimationTracks(b,_,C,B,R);if(M)for(let x=0;x<M.length;x++)h.push(M[x])}return new iO(o,void 0,h)})}createNodeMesh(e){let r=this.json,n=this,i=r.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(o){let s=n._getNodeRef(n.meshCache,i.mesh,o);return i.weights!==void 0&&s.traverse(function(p){if(p.isMesh)for(let l=0,c=i.weights.length;l<c;l++)p.morphTargetInfluences[l]=i.weights[l]}),s})}loadNode(e){let r=this.json,n=this,i=r.nodes[e],o=n._loadNodeShallow(e),s=[],p=i.children||[];for(let c=0,u=p.length;c<u;c++)s.push(n.getDependency("node",p[c]));let l=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([o,Promise.all(s),l]).then(function(c){let u=c[0],d=c[1],f=c[2];f!==null&&u.traverse(function(g){g.isSkinnedMesh&&g.bind(f,xO)});for(let g=0,v=d.length;g<v;g++)u.add(d[g]);return u})}_loadNodeShallow(e){let r=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let o=r.nodes[e],s=o.name?i.createUniqueName(o.name):"",p=[],l=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&p.push(l),o.camera!==void 0&&p.push(i.getDependency("camera",o.camera).then(function(c){return i._getNodeRef(i.cameraCache,o.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){p.push(c)}),this.nodeCache[e]=Promise.all(p).then(function(c){let u;if(o.isBone===!0?u=new nO:c.length>1?u=new f1:c.length===1?u=c[0]:u=new Tb,u!==c[0])for(let d=0,f=c.length;d<f;d++)u.add(c[d]);if(o.name&&(u.userData.name=o.name,u.name=s),ra(u,o),o.extensions&&xs(n,u,o),o.matrix!==void 0){let d=new wf;d.fromArray(o.matrix),u.applyMatrix4(d)}else o.translation!==void 0&&u.position.fromArray(o.translation),o.rotation!==void 0&&u.quaternion.fromArray(o.rotation),o.scale!==void 0&&u.scale.fromArray(o.scale);return i.associations.has(u)||i.associations.set(u,{}),i.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){let r=this.extensions,n=this.json.scenes[e],i=this,o=new f1;n.name&&(o.name=i.createUniqueName(n.name)),ra(o,n),n.extensions&&xs(r,o,n);let s=n.nodes||[],p=[];for(let l=0,c=s.length;l<c;l++)p.push(i.getDependency("node",s[l]));return Promise.all(p).then(function(l){for(let u=0,d=l.length;u<d;u++)o.add(l[u]);let c=u=>{let d=new Map;for(let[f,g]of i.associations)(f instanceof u1||f instanceof Ab)&&d.set(f,g);return u.traverse(f=>{let g=i.associations.get(f);g!=null&&d.set(f,g)}),d};return i.associations=c(o),o})}_createAnimationTracks(e,r,n,i,o){let s=[],p=e.name?e.name:e.uuid,l=[];Fa[o.path]===Fa.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(p);let c;switch(Fa[o.path]){case Fa.weights:c=vb;break;case Fa.rotation:c=Eb;break;case Fa.position:case Fa.scale:c=yb;break;default:switch(n.itemSize){case 1:c=vb;break;case 2:case 3:default:c=yb;break}break}let u=i.interpolation!==void 0?EO[i.interpolation]:Ob,d=this._getArrayFromAccessor(n);for(let f=0,g=l.length;f<g;f++){let v=new c(l[f]+"."+Fa[o.path],r.array,d,u);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),s.push(v)}return s}_getArrayFromAccessor(e){let r=e.array;if(e.normalized){let n=j1(r.constructor),i=new Float32Array(r.length);for(let o=0,s=r.length;o<s;o++)i[o]=r[o]*n;r=i}return r}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){let i=this instanceof Eb?N1:Tf;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function MO(t,e,r){let n=e.attributes,i=new gO;if(n.POSITION!==void 0){let p=r.json.accessors[n.POSITION],l=p.min,c=p.max;if(l!==void 0&&c!==void 0){if(i.set(new Fp(l[0],l[1],l[2]),new Fp(c[0],c[1],c[2])),p.normalized){let u=j1(Op[p.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=e.targets;if(o!==void 0){let p=new Fp,l=new Fp;for(let c=0,u=o.length;c<u;c++){let d=o[c];if(d.POSITION!==void 0){let f=r.json.accessors[d.POSITION],g=f.min,v=f.max;if(g!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(g[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(g[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(g[2]),Math.abs(v[2]))),f.normalized){let A=j1(Op[f.componentType]);l.multiplyScalar(A)}p.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(p)}t.boundingBox=i;let s=new hO;i.getCenter(s.center),s.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=s}function Bb(t,e,r){let n=e.attributes,i=[];function o(s,p){return r.getDependency("accessor",s).then(function(l){t.setAttribute(p,l)})}for(let s in n){let p=U1[s]||s.toLowerCase();p in t.attributes||i.push(o(n[s],p))}if(e.indices!==void 0&&!t.index){let s=r.getDependency("accessor",e.indices).then(function(p){t.setIndex(p)});i.push(s)}return ra(t,e),MO(t,e,r),Promise.all(i).then(function(){return e.targets!==void 0?_O(t,e.targets,r):t})}import{BufferGeometry as wO,Vector3 as Zc,Matrix4 as kb,Float32BufferAttribute as Q1}from"three";var $c=class extends wO{constructor(e,r,n,i){super();let o=[],s=[],p=[],l=new Zc,c=new kb;c.makeRotationFromEuler(n),c.setPosition(r);let u=new kb;u.copy(c).invert(),d(),this.setAttribute("position",new Q1(o,3)),this.setAttribute("normal",new Q1(s,3)),this.setAttribute("uv",new Q1(p,2));function d(){let A,m=[],h=new Zc,y=new Zc;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}let E=e.geometry,b=E.attributes.position,_=E.attributes.normal;if(E.index!==null){let C=E.index;for(A=0;A<C.count;A++)h.fromBufferAttribute(b,C.getX(A)),y.fromBufferAttribute(_,C.getX(A)),f(m,h,y)}else for(A=0;A<b.count;A++)h.fromBufferAttribute(b,A),y.fromBufferAttribute(_,A),f(m,h,y);for(m=g(m,l.set(1,0,0)),m=g(m,l.set(-1,0,0)),m=g(m,l.set(0,1,0)),m=g(m,l.set(0,-1,0)),m=g(m,l.set(0,0,1)),m=g(m,l.set(0,0,-1)),A=0;A<m.length;A++){let C=m[A];p.push(.5+C.position.x/i.x,.5+C.position.y/i.y),C.position.applyMatrix4(c),o.push(C.position.x,C.position.y,C.position.z),s.push(C.normal.x,C.normal.y,C.normal.z)}}function f(A,m,h){m.applyMatrix4(e.matrixWorld),m.applyMatrix4(u),h.transformDirection(e.matrixWorld),A.push(new ed(m.clone(),h.clone()))}function g(A,m){let h=[],y=.5*Math.abs(i.dot(m));for(let E=0;E<A.length;E+=3){let b,_,C,B=0,R,M,x,T,w=A[E+0].position.dot(m)-y,S=A[E+1].position.dot(m)-y,I=A[E+2].position.dot(m)-y;switch(b=w>0,_=S>0,C=I>0,B=(b?1:0)+(_?1:0)+(C?1:0),B){case 0:{h.push(A[E]),h.push(A[E+1]),h.push(A[E+2]);break}case 1:{if(b&&(R=A[E+1],M=A[E+2],x=v(A[E],R,m,y),T=v(A[E],M,m,y)),_){R=A[E],M=A[E+2],x=v(A[E+1],R,m,y),T=v(A[E+1],M,m,y),h.push(x),h.push(M.clone()),h.push(R.clone()),h.push(M.clone()),h.push(x.clone()),h.push(T);break}C&&(R=A[E],M=A[E+1],x=v(A[E+2],R,m,y),T=v(A[E+2],M,m,y)),h.push(R.clone()),h.push(M.clone()),h.push(x),h.push(T),h.push(x.clone()),h.push(M.clone());break}case 2:{b||(R=A[E].clone(),M=v(R,A[E+1],m,y),x=v(R,A[E+2],m,y),h.push(R),h.push(M),h.push(x)),_||(R=A[E+1].clone(),M=v(R,A[E+2],m,y),x=v(R,A[E],m,y),h.push(R),h.push(M),h.push(x)),C||(R=A[E+2].clone(),M=v(R,A[E],m,y),x=v(R,A[E+1],m,y),h.push(R),h.push(M),h.push(x));break}}}return h}function v(A,m,h,y){let E=A.position.dot(h)-y,b=m.position.dot(h)-y,_=E/(E-b);return new ed(new Zc(A.position.x+_*(m.position.x-A.position.x),A.position.y+_*(m.position.y-A.position.y),A.position.z+_*(m.position.z-A.position.z)),new Zc(A.normal.x+_*(m.normal.x-A.normal.x),A.normal.y+_*(m.normal.y-A.normal.y),A.normal.z+_*(m.normal.z-A.normal.z)))}}},ed=class{constructor(e,r){this.position=e,this.normal=r}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}};import{ExtrudeGeometry as TO}from"three";var Dp=class extends TO{constructor(e,r={}){let{bevelEnabled:n=!1,bevelSize:i=8,bevelThickness:o=10,font:s,height:p=50,size:l=100,lineHeight:c=1,letterSpacing:u=0,...d}=r;if(s===void 0)super();else{let f=s.generateShapes(e,l,{lineHeight:c,letterSpacing:u});super(f,{...d,bevelEnabled:n,bevelSize:i,bevelThickness:o,depth:p})}this.type="TextGeometry"}};var W1={uniforms:{tDiffuse:{value:null}},vertexShader:`
    varying vec2 vUv;

    void main() {

    	vUv = uv;
    	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;

    varying vec2 vUv;

    void main() {

    	vec4 tex = texture2D( tDiffuse, vUv );

    	#ifdef LinearTosRGB
    		gl_FragColor = LinearTosRGB( tex );
    	#else
    		gl_FragColor = sRGBTransferOETF( tex );
    	#endif

    }
  `};var V1={uniforms:{tDiffuse:{value:null},h:{value:.001953125}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `};var Y1={uniforms:{tDiffuse:{value:null},v:{value:.001953125}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};import{Vector3 as Io,Frustum as SO}from"three";var K1=new SO,X1=new Io,kp=new Io,an=new Io,ia=new Io,Dn=new Io,na=new Io,aa=new Io,td=new Io,rd=new Io,od=new Io,Sf=new Io,id=new Io,nd=new Io,ad=new Io,sd=class{constructor(e,r,n){this.camera=e,this.scene=r,this.startPoint=new Io,this.endPoint=new Io,this.collection=[],this.deep=n||Number.MAX_VALUE}select(e,r){return this.startPoint=e||this.startPoint,this.endPoint=r||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(K1,this.scene),this.collection}updateFrustum(e,r){if(e=e||this.startPoint,r=r||this.endPoint,e.x===r.x&&(r.x+=Number.EPSILON),e.y===r.y&&(r.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){kp.copy(e),kp.x=Math.min(e.x,r.x),kp.y=Math.max(e.y,r.y),r.x=Math.max(e.x,r.x),r.y=Math.min(e.y,r.y),an.setFromMatrixPosition(this.camera.matrixWorld),ia.copy(kp),Dn.set(r.x,kp.y,0),na.copy(r),aa.set(kp.x,r.y,0),ia.unproject(this.camera),Dn.unproject(this.camera),na.unproject(this.camera),aa.unproject(this.camera),id.copy(ia).sub(an),nd.copy(Dn).sub(an),ad.copy(na).sub(an),id.normalize(),nd.normalize(),ad.normalize(),id.multiplyScalar(this.deep),nd.multiplyScalar(this.deep),ad.multiplyScalar(this.deep),id.add(an),nd.add(an),ad.add(an);var n=K1.planes;n[0].setFromCoplanarPoints(an,ia,Dn),n[1].setFromCoplanarPoints(an,Dn,na),n[2].setFromCoplanarPoints(na,aa,an),n[3].setFromCoplanarPoints(aa,ia,an),n[4].setFromCoplanarPoints(Dn,na,aa),n[5].setFromCoplanarPoints(ad,nd,id),n[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){let i=Math.min(e.x,r.x),o=Math.max(e.y,r.y),s=Math.max(e.x,r.x),p=Math.min(e.y,r.y);ia.set(i,o,-1),Dn.set(s,o,-1),na.set(s,p,-1),aa.set(i,p,-1),td.set(i,o,1),rd.set(s,o,1),od.set(s,p,1),Sf.set(i,p,1),ia.unproject(this.camera),Dn.unproject(this.camera),na.unproject(this.camera),aa.unproject(this.camera),td.unproject(this.camera),rd.unproject(this.camera),od.unproject(this.camera),Sf.unproject(this.camera);var n=K1.planes;n[0].setFromCoplanarPoints(ia,td,rd),n[1].setFromCoplanarPoints(Dn,rd,od),n[2].setFromCoplanarPoints(od,Sf,aa),n[3].setFromCoplanarPoints(Sf,td,ia),n[4].setFromCoplanarPoints(Dn,na,aa),n[5].setFromCoplanarPoints(od,rd,td),n[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,r){if((r.isMesh||r.isLine||r.isPoints)&&r.material!==void 0&&(r.geometry.boundingSphere===null&&r.geometry.computeBoundingSphere(),X1.copy(r.geometry.boundingSphere.center),X1.applyMatrix4(r.matrixWorld),e.containsPoint(X1)&&this.collection.push(r)),r.children.length>0)for(let n=0;n<r.children.length;n++)this.searchChildInFrustum(e,r.children[n])}};var pd=class{constructor(e,r=" .:-=+*#%@",n={}){let i=n.resolution||.15,o=n.scale||1,s=n.color||!1,p=n.alpha||!1,l=n.block||!1,c=n.invert||!1,u=n.strResolution||"low",d,f,g=document.createElement("div");g.style.cursor="default";let v=document.createElement("table");g.appendChild(v);let A,m,h;this.setSize=function(I,G){d=I,f=G,e.setSize(I,G),y()},this.render=function(I,G){e.render(I,G),S(v)},this.domElement=g;function y(){A=Math.floor(d*i),m=Math.floor(f*i),B.width=A,B.height=m,h=e.domElement,h.style.backgroundColor&&(v.rows[0].cells[0].style.backgroundColor=h.style.backgroundColor,v.rows[0].cells[0].style.color=h.style.color),v.cellSpacing=0,v.cellPadding=0;let I=v.style;I.whiteSpace="pre",I.margin="0px",I.padding="0px",I.letterSpacing=w+"px",I.fontFamily=_,I.fontSize=x+"px",I.lineHeight=T+"px",I.textAlign="left",I.textDecoration="none"}let E=" .,:;i1tfLCG08@".split(""),b=" CGO08@".split(""),_="courier new, monospace",C=e.domElement,B=document.createElement("canvas");if(!B.getContext)return;let R=B.getContext("2d");if(!R.getImageData)return;let M=s?b:E;r&&(M=r);let x=2/i*o,T=2/i*o,w=0;if(u=="low")switch(o){case 1:w=-1;break;case 2:case 3:w=-2.1;break;case 4:w=-3.1;break;case 5:w=-4.15;break}if(u=="medium")switch(o){case 1:w=0;break;case 2:w=-1;break;case 3:w=-1.04;break;case 4:case 5:w=-2.1;break}if(u=="high")switch(o){case 1:case 2:w=0;break;case 3:case 4:case 5:w=-1;break}function S(I){R.clearRect(0,0,A,m),R.drawImage(C,0,0,A,m);let G=R.getImageData(0,0,A,m).data,H="";for(let X=0;X<m;X+=2){for(let Z=0;Z<A;Z++){let z=(X*A+Z)*4,Y=G[z],L=G[z+1],Q=G[z+2],V=G[z+3],N,P;P=(.3*Y+.59*L+.11*Q)/255,V==0&&(P=1),N=Math.floor((1-P)*(M.length-1)),c&&(N=M.length-N-1);let k=M[N];(k===void 0||k==" ")&&(k="&nbsp;"),s?H+="<span style='color:rgb("+Y+","+L+","+Q+");"+(l?"background-color:rgb("+Y+","+L+","+Q+");":"")+(p?"opacity:"+V/255+";":"")+"'>"+k+"</span>":H+=k}H+="<br/>"}I.innerHTML=`<tr><td style="display:block;width:${d}px;height:${f}px;overflow:hidden">${H}</td></tr>`}}};import{Loader as zO,LoaderUtils as NO,FileLoader as UO,TextureLoader as jO,RepeatWrapping as Ub,ClampToEdgeWrapping as jb,Texture as Hb,MeshPhongMaterial as J1,MeshLambertMaterial as HO,Color as Oa,EquirectangularReflectionMapping as QO,Matrix4 as Pr,Group as Qb,Bone as Wb,PropertyBinding as Df,Object3D as q1,OrthographicCamera as WO,PerspectiveCamera as VO,PointLight as Vb,MathUtils as kn,SpotLight as YO,DirectionalLight as KO,SkinnedMesh as XO,Mesh as JO,LineBasicMaterial as qO,Line as ZO,Vector3 as dd,Skeleton as $O,AmbientLight as e9,BufferGeometry as If,Float32BufferAttribute as Lp,Uint16BufferAttribute as t9,Matrix3 as r9,Vector4 as o9,AnimationClip as i9,Quaternion as Ff,Euler as cd,VectorKeyframeTrack as n9,QuaternionKeyframeTrack as a9,NumberKeyframeTrack as s9}from"three";import{Curve as PO,Vector4 as GO,Vector3 as Nb}from"three";import{Vector4 as Lb,Vector3 as IO}from"three";function Pb(t,e,r){let n=r.length-t-1;if(e>=r[n])return n-1;if(e<=r[t])return t;let i=t,o=n,s=Math.floor((i+o)/2);for(;e<r[s]||e>=r[s+1];)e<r[s]?o=s:i=s,s=Math.floor((i+o)/2);return s}function FO(t,e,r,n){let i=[],o=[],s=[];i[0]=1;for(let p=1;p<=r;++p){o[p]=e-n[t+1-p],s[p]=n[t+p]-e;let l=0;for(let c=0;c<p;++c){let u=s[c+1],d=o[p-c],f=i[c]/(u+d);i[c]=l+u*f,l=d*f}i[p]=l}return i}function Gb(t,e,r,n){let i=Pb(t,n,e),o=FO(i,n,t,e),s=new Lb(0,0,0,0);for(let p=0;p<=t;++p){let l=r[i-t+p],c=o[p],u=l.w*c;s.x+=l.x*u,s.y+=l.y*u,s.z+=l.z*u,s.w+=l.w*c}return s}function OO(t,e,r,n,i){let o=[];for(let d=0;d<=r;++d)o[d]=0;let s=[];for(let d=0;d<=n;++d)s[d]=o.slice(0);let p=[];for(let d=0;d<=r;++d)p[d]=o.slice(0);p[0][0]=1;let l=o.slice(0),c=o.slice(0);for(let d=1;d<=r;++d){l[d]=e-i[t+1-d],c[d]=i[t+d]-e;let f=0;for(let g=0;g<d;++g){let v=c[g+1],A=l[d-g];p[d][g]=v+A;let m=p[g][d-1]/p[d][g];p[g][d]=f+v*m,f=A*m}p[d][d]=f}for(let d=0;d<=r;++d)s[0][d]=p[d][r];for(let d=0;d<=r;++d){let f=0,g=1,v=[];for(let A=0;A<=r;++A)v[A]=o.slice(0);v[0][0]=1;for(let A=1;A<=n;++A){let m=0,h=d-A,y=r-A;d>=A&&(v[g][0]=v[f][0]/p[y+1][h],m=v[g][0]*p[h][y]);let E=h>=-1?1:-h,b=d-1<=y?A-1:r-d;for(let C=E;C<=b;++C)v[g][C]=(v[f][C]-v[f][C-1])/p[y+1][h+C],m+=v[g][C]*p[h+C][y];d<=y&&(v[g][A]=-v[f][A-1]/p[y+1][d],m+=v[g][A]*p[d][y]),s[A][d]=m;let _=f;f=g,g=_}}let u=r;for(let d=1;d<=n;++d){for(let f=0;f<=r;++f)s[d][f]*=u;u*=r-d}return s}function DO(t,e,r,n,i){let o=i<t?i:t,s=[],p=Pb(t,n,e),l=OO(p,n,t,o,e),c=[];for(let u=0;u<r.length;++u){let d=r[u].clone(),f=d.w;d.x*=f,d.y*=f,d.z*=f,c[u]=d}for(let u=0;u<=o;++u){let d=c[p-t].clone().multiplyScalar(l[u][0]);for(let f=1;f<=t;++f)d.add(c[p-t+f].clone().multiplyScalar(l[u][f]));s[u]=d}for(let u=o+1;u<=i+1;++u)s[u]=new Lb(0,0,0);return s}function kO(t,e){let r=1;for(let i=2;i<=t;++i)r*=i;let n=1;for(let i=2;i<=e;++i)n*=i;for(let i=2;i<=t-e;++i)n*=i;return r/n}function LO(t){let e=t.length,r=[],n=[];for(let o=0;o<e;++o){let s=t[o];r[o]=new IO(s.x,s.y,s.z),n[o]=s.w}let i=[];for(let o=0;o<e;++o){let s=r[o].clone();for(let p=1;p<=o;++p)s.sub(i[o-p].clone().multiplyScalar(kO(o,p)*n[p]));i[o]=s.divideScalar(n[0])}return i}function zb(t,e,r,n,i){let o=DO(t,e,r,n,i);return LO(o)}var ld=class extends PO{constructor(e,r,n,i,o){super(),this.degree=e,this.knots=r,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(let s=0;s<n.length;++s){let p=n[s];this.controlPoints[s]=new GO(p.x,p.y,p.z,p.w)}}getPoint(e,r){let n=r||new Nb,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=Gb(this.degree,this.knots,this.controlPoints,i);return o.w!=1&&o.divideScalar(o.w),n.set(o.x,o.y,o.z)}getTangent(e,r){let n=r||new Nb,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=zb(this.degree,this.knots,this.controlPoints,i,1);return n.copy(o[1]).normalize(),n}};var ft,Gr,Zo,Ss=class extends zO{constructor(e){super(e)}load(e,r,n,i){let o=this,s=o.path===""?NO.extractUrlBase(e):o.path,p=new UO(this.manager);p.setPath(o.path),p.setResponseType("arraybuffer"),p.setRequestHeader(o.requestHeader),p.setWithCredentials(o.withCredentials),p.load(e,function(l){try{r(o.parse(l,s))}catch(c){i?i(c):console.error(c),o.manager.itemError(e)}},n,i)}parse(e,r){if(p9(e))ft=new iA().parse(e);else{let i=qb(e);if(!l9(i))throw new Error("THREE.FBXLoader: Unknown format.");if(Yb(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Yb(i));ft=new oA().parse(i)}let n=new jO(this.manager).setPath(this.resourcePath||r).setCrossOrigin(this.crossOrigin);return new eA(n,this.manager).parse(ft)}},eA=class{constructor(e,r){this.textureLoader=e,this.manager=r}parse(){Gr=this.parseConnections();let e=this.parseImages(),r=this.parseTextures(e),n=this.parseMaterials(r),i=this.parseDeformers(),o=new tA().parse(i);return this.parseScene(i,o,n),Zo}parseConnections(){let e=new Map;return"Connections"in ft&&ft.Connections.connections.forEach(function(n){let i=n[0],o=n[1],s=n[2];e.has(i)||e.set(i,{parents:[],children:[]});let p={ID:o,relationship:s};e.get(i).parents.push(p),e.has(o)||e.set(o,{parents:[],children:[]});let l={ID:i,relationship:s};e.get(o).children.push(l)}),e}parseImages(){let e={},r={};if("Video"in ft.Objects){let n=ft.Objects.Video;for(let i in n){let o=n[i],s=parseInt(i);if(e[s]=o.RelativeFilename||o.Filename,"Content"in o){let p=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,l=typeof o.Content=="string"&&o.Content!=="";if(p||l){let c=this.parseImage(n[i]);r[o.RelativeFilename||o.Filename]=c}}}}for(let n in e){let i=e[n];r[i]!==void 0?e[n]=r[i]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){let r=e.Content,n=e.RelativeFilename||e.Filename,i=n.slice(n.lastIndexOf(".")+1).toLowerCase(),o;switch(i){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof r=="string")return"data:"+o+";base64,"+r;{let s=new Uint8Array(r);return window.URL.createObjectURL(new Blob([s],{type:o}))}}parseTextures(e){let r=new Map;if("Texture"in ft.Objects){let n=ft.Objects.Texture;for(let i in n){let o=this.parseTexture(n[i],e);r.set(parseInt(i),o)}}return r}parseTexture(e,r){let n=this.loadTexture(e,r);n.ID=e.id,n.name=e.attrName;let i=e.WrapModeU,o=e.WrapModeV,s=i!==void 0?i.value:0,p=o!==void 0?o.value:0;if(n.wrapS=s===0?Ub:jb,n.wrapT=p===0?Ub:jb,"Scaling"in e){let l=e.Scaling.value;n.repeat.x=l[0],n.repeat.y=l[1]}return n}loadTexture(e,r){let n,i=this.textureLoader.path,o=Gr.get(e.id).children;o!==void 0&&o.length>0&&r[o[0].ID]!==void 0&&(n=r[o[0].ID],(n.indexOf("blob:")===0||n.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let s,p=e.FileName.slice(-3).toLowerCase();if(p==="tga"){let l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),s=new Hb):(l.setPath(this.textureLoader.path),s=l.load(n))}else p==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),s=new Hb):s=this.textureLoader.load(n);return this.textureLoader.setPath(i),s}parseMaterials(e){let r=new Map;if("Material"in ft.Objects){let n=ft.Objects.Material;for(let i in n){let o=this.parseMaterial(n[i],e);o!==null&&r.set(parseInt(i),o)}}return r}parseMaterial(e,r){let n=e.id,i=e.attrName,o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!Gr.has(n))return null;let s=this.parseParameters(e,r,n),p;switch(o.toLowerCase()){case"phong":p=new J1;break;case"lambert":p=new HO;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),p=new J1;break}return p.setValues(s),p.name=i,p}parseParameters(e,r,n){let i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new Oa().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new Oa().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new Oa().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new Oa().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new Oa().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new Oa().fromArray(e.SpecularColor.value));let o=this;return Gr.get(n).children.forEach(function(s){let p=s.relationship;switch(p){case"Bump":i.bumpMap=o.getTexture(r,s.ID);break;case"Maya|TEX_ao_map":i.aoMap=o.getTexture(r,s.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=o.getTexture(r,s.ID),i.map!==void 0&&("colorSpace"in i.map?i.map.colorSpace="srgb":i.map.encoding=3001);break;case"DisplacementColor":i.displacementMap=o.getTexture(r,s.ID);break;case"EmissiveColor":i.emissiveMap=o.getTexture(r,s.ID),i.emissiveMap!==void 0&&("colorSpace"in i.emissiveMap?i.emissiveMap.colorSpace="srgb":i.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=o.getTexture(r,s.ID);break;case"ReflectionColor":i.envMap=o.getTexture(r,s.ID),i.envMap!==void 0&&(i.envMap.mapping=QO,"colorSpace"in i.envMap?i.envMap.colorSpace="srgb":i.envMap.encoding=3001);break;case"SpecularColor":i.specularMap=o.getTexture(r,s.ID),i.specularMap!==void 0&&("colorSpace"in i.specularMap?i.specularMap.colorSpace="srgb":i.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=o.getTexture(r,s.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",p);break}}),i}getTexture(e,r){return"LayeredTexture"in ft.Objects&&r in ft.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=Gr.get(r).children[0].ID),e.get(r)}parseDeformers(){let e={},r={};if("Deformer"in ft.Objects){let n=ft.Objects.Deformer;for(let i in n){let o=n[i],s=Gr.get(parseInt(i));if(o.attrType==="Skin"){let p=this.parseSkeleton(s,n);p.ID=i,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),p.geometryID=s.parents[0].ID,e[i]=p}else if(o.attrType==="BlendShape"){let p={id:i};p.rawTargets=this.parseMorphTargets(s,n),p.id=i,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[i]=p}}}return{skeletons:e,morphTargets:r}}parseSkeleton(e,r){let n=[];return e.children.forEach(function(i){let o=r[i.ID];if(o.attrType!=="Cluster")return;let s={ID:i.ID,indices:[],weights:[],transformLink:new Pr().fromArray(o.TransformLink.a)};"Indexes"in o&&(s.indices=o.Indexes.a,s.weights=o.Weights.a),n.push(s)}),{rawBones:n,bones:[]}}parseMorphTargets(e,r){let n=[];for(let i=0;i<e.children.length;i++){let o=e.children[i],s=r[o.ID],p={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if(s.attrType!=="BlendShapeChannel")return;p.geoID=Gr.get(parseInt(o.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,n.push(p)}return n}parseScene(e,r,n){Zo=new Qb;let i=this.parseModels(e.skeletons,r,n),o=ft.Objects.Model,s=this;i.forEach(function(l){let c=o[l.ID];s.setLookAtProperties(l,c),Gr.get(l.ID).parents.forEach(function(d){let f=i.get(d.ID);f!==void 0&&f.add(l)}),l.parent===null&&Zo.add(l)}),this.bindSkeleton(e.skeletons,r,i),this.createAmbientLight(),Zo.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);let c=Xb(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});let p=new rA().parse();Zo.children.length===1&&Zo.children[0].isGroup&&(Zo.children[0].animations=p,Zo=Zo.children[0]),Zo.animations=p}parseModels(e,r,n){let i=new Map,o=ft.Objects.Model;for(let s in o){let p=parseInt(s),l=o[s],c=Gr.get(p),u=this.buildSkeleton(c,e,p,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,r,n);break;case"NurbsCurve":u=this.createCurve(c,r);break;case"LimbNode":case"Root":u=new Wb;break;case"Null":default:u=new Qb;break}u.name=l.attrName?Df.sanitizeNodeName(l.attrName):"",u.ID=p}this.getTransformData(u,l),i.set(p,u)}return i}buildSkeleton(e,r,n,i){let o=null;return e.parents.forEach(function(s){for(let p in r){let l=r[p];l.rawBones.forEach(function(c,u){if(c.ID===s.ID){let d=o;o=new Wb,o.matrixWorld.copy(c.transformLink),o.name=i?Df.sanitizeNodeName(i):"",o.ID=n,l.bones[u]=o,d!==null&&o.add(d)}})}}),o}createCamera(e){let r,n;if(e.children.forEach(function(i){let o=ft.Objects.NodeAttribute[i.ID];o!==void 0&&(n=o)}),n===void 0)r=new q1;else{let i=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(i=1);let o=1;n.NearPlane!==void 0&&(o=n.NearPlane.value/1e3);let s=1e3;n.FarPlane!==void 0&&(s=n.FarPlane.value/1e3);let p=window.innerWidth,l=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(p=n.AspectWidth.value,l=n.AspectHeight.value);let c=p/l,u=45;n.FieldOfView!==void 0&&(u=n.FieldOfView.value);let d=n.FocalLength?n.FocalLength.value:null;switch(i){case 0:r=new VO(u,c,o,s),d!==null&&r.setFocalLength(d);break;case 1:r=new WO(-p/2,p/2,l/2,-l/2,o,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),r=new q1;break}}return r}createLight(e){let r,n;if(e.children.forEach(function(i){let o=ft.Objects.NodeAttribute[i.ID];o!==void 0&&(n=o)}),n===void 0)r=new q1;else{let i;n.LightType===void 0?i=0:i=n.LightType.value;let o=16777215;n.Color!==void 0&&(o=new Oa().fromArray(n.Color.value));let s=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(s=0);let p=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?p=0:p=n.FarAttenuationEnd.value);let l=1;switch(i){case 0:r=new Vb(o,s,p,l);break;case 1:r=new KO(o,s);break;case 2:let c=Math.PI/3;n.InnerAngle!==void 0&&(c=kn.degToRad(n.InnerAngle.value));let u=0;n.OuterAngle!==void 0&&(u=kn.degToRad(n.OuterAngle.value),u=Math.max(u,1)),r=new YO(o,s,p,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),r=new Vb(o,s);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(r.castShadow=!0)}return r}createMesh(e,r,n){let i,o=null,s=null,p=[];return e.children.forEach(function(l){r.has(l.ID)&&(o=r.get(l.ID)),n.has(l.ID)&&p.push(n.get(l.ID))}),p.length>1?s=p:p.length>0?s=p[0]:(s=new J1({color:13421772}),p.push(s)),"color"in o.attributes&&p.forEach(function(l){l.vertexColors=!0}),o.FBX_Deformer?(i=new XO(o,s),i.normalizeSkinWeights()):i=new JO(o,s),i}createCurve(e,r){let n=e.children.reduce(function(o,s){return r.has(s.ID)&&(o=r.get(s.ID)),o},null),i=new qO({color:3342591,linewidth:1});return new ZO(n,i)}getTransformData(e,r){let n={};"InheritType"in r&&(n.inheritType=parseInt(r.InheritType.value)),"RotationOrder"in r?n.eulerOrder=Jb(r.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in r&&(n.translation=r.Lcl_Translation.value),"PreRotation"in r&&(n.preRotation=r.PreRotation.value),"Lcl_Rotation"in r&&(n.rotation=r.Lcl_Rotation.value),"PostRotation"in r&&(n.postRotation=r.PostRotation.value),"Lcl_Scaling"in r&&(n.scale=r.Lcl_Scaling.value),"ScalingOffset"in r&&(n.scalingOffset=r.ScalingOffset.value),"ScalingPivot"in r&&(n.scalingPivot=r.ScalingPivot.value),"RotationOffset"in r&&(n.rotationOffset=r.RotationOffset.value),"RotationPivot"in r&&(n.rotationPivot=r.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,r){"LookAtProperty"in r&&Gr.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){let o=ft.Objects.Model[i.ID];if("Lcl_Translation"in o){let s=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),Zo.add(e.target)):e.lookAt(new dd().fromArray(s))}}})}bindSkeleton(e,r,n){let i=this.parsePoseNodes();for(let o in e){let s=e[o];Gr.get(parseInt(s.ID)).parents.forEach(function(l){if(r.has(l.ID)){let c=l.ID;Gr.get(c).parents.forEach(function(d){n.has(d.ID)&&n.get(d.ID).bind(new $O(s.bones),i[d.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in ft.Objects){let r=ft.Objects.Pose;for(let n in r)if(r[n].attrType==="BindPose"&&r[n].NbPoseNodes>0){let i=r[n].PoseNode;Array.isArray(i)?i.forEach(function(o){e[o.Node]=new Pr().fromArray(o.Matrix.a)}):e[i.Node]=new Pr().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in ft&&"AmbientColor"in ft.GlobalSettings){let e=ft.GlobalSettings.AmbientColor.value,r=e[0],n=e[1],i=e[2];if(r!==0||n!==0||i!==0){let o=new Oa(r,n,i);Zo.add(new e9(o,1))}}}},tA=class{parse(e){let r=new Map;if("Geometry"in ft.Objects){let n=ft.Objects.Geometry;for(let i in n){let o=Gr.get(parseInt(i)),s=this.parseGeometry(o,n[i],e);r.set(parseInt(i),s)}}return r}parseGeometry(e,r,n){switch(r.attrType){case"Mesh":return this.parseMeshGeometry(e,r,n);case"NurbsCurve":return this.parseNurbsGeometry(r)}}parseMeshGeometry(e,r,n){let i=n.skeletons,o=[],s=e.parents.map(function(d){return ft.Objects.Model[d.ID]});if(s.length===0)return;let p=e.children.reduce(function(d,f){return i[f.ID]!==void 0&&(d=i[f.ID]),d},null);e.children.forEach(function(d){n.morphTargets[d.ID]!==void 0&&o.push(n.morphTargets[d.ID])});let l=s[0],c={};"RotationOrder"in l&&(c.eulerOrder=Jb(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);let u=Xb(c);return this.genGeometry(r,p,o,u)}genGeometry(e,r,n,i){let o=new If;e.attrName&&(o.name=e.attrName);let s=this.parseGeoNode(e,r),p=this.genBuffers(s),l=new Lp(p.vertex,3);if(l.applyMatrix4(i),o.setAttribute("position",l),p.colors.length>0&&o.setAttribute("color",new Lp(p.colors,3)),r&&(o.setAttribute("skinIndex",new t9(p.weightsIndices,4)),o.setAttribute("skinWeight",new Lp(p.vertexWeights,4)),o.FBX_Deformer=r),p.normal.length>0){let c=new r9().getNormalMatrix(i),u=new Lp(p.normal,3);u.applyNormalMatrix(c),o.setAttribute("normal",u)}if(p.uvs.forEach(function(c,u){Mc==="uv2"&&u++;let d=u===0?"uv":`uv${u}`;o.setAttribute(d,new Lp(p.uvs[u],2))}),s.material&&s.material.mappingType!=="AllSame"){let c=p.materialIndex[0],u=0;if(p.materialIndex.forEach(function(d,f){d!==c&&(o.addGroup(u,f-u,c),c=d,u=f)}),o.groups.length>0){let d=o.groups[o.groups.length-1],f=d.start+d.count;f!==p.materialIndex.length&&o.addGroup(f,p.materialIndex.length-f,c)}o.groups.length===0&&o.addGroup(0,p.materialIndex.length,p.materialIndex[0])}return this.addMorphTargets(o,e,n,i),o}parseGeoNode(e,r){let n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return n.weightTable={},r!==null&&(n.skeleton=r,r.rawBones.forEach(function(i,o){i.indices.forEach(function(s,p){n.weightTable[s]===void 0&&(n.weightTable[s]=[]),n.weightTable[s].push({id:o,weight:i.weights[p]})})})),n}genBuffers(e){let r={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,i=0,o=!1,s=[],p=[],l=[],c=[],u=[],d=[],f=this;return e.vertexIndices.forEach(function(g,v){let A,m=!1;g<0&&(g=g^-1,m=!0);let h=[],y=[];if(s.push(g*3,g*3+1,g*3+2),e.color){let E=Of(v,n,g,e.color);l.push(E[0],E[1],E[2])}if(e.skeleton){if(e.weightTable[g]!==void 0&&e.weightTable[g].forEach(function(E){y.push(E.weight),h.push(E.id)}),y.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);let E=[0,0,0,0],b=[0,0,0,0];y.forEach(function(_,C){let B=_,R=h[C];b.forEach(function(M,x,T){if(B>M){T[x]=B,B=M;let w=E[x];E[x]=R,R=w}})}),h=E,y=b}for(;y.length<4;)y.push(0),h.push(0);for(let E=0;E<4;++E)u.push(y[E]),d.push(h[E])}if(e.normal){let E=Of(v,n,g,e.normal);p.push(E[0],E[1],E[2])}e.material&&e.material.mappingType!=="AllSame"&&(A=Of(v,n,g,e.material)[0]),e.uv&&e.uv.forEach(function(E,b){let _=Of(v,n,g,E);c[b]===void 0&&(c[b]=[]),c[b].push(_[0]),c[b].push(_[1])}),i++,m&&(f.genFace(r,e,s,A,p,l,c,u,d,i),n++,i=0,s=[],p=[],l=[],c=[],u=[],d=[])}),r}genFace(e,r,n,i,o,s,p,l,c,u){for(let d=2;d<u;d++)e.vertex.push(r.vertexPositions[n[0]]),e.vertex.push(r.vertexPositions[n[1]]),e.vertex.push(r.vertexPositions[n[2]]),e.vertex.push(r.vertexPositions[n[(d-1)*3]]),e.vertex.push(r.vertexPositions[n[(d-1)*3+1]]),e.vertex.push(r.vertexPositions[n[(d-1)*3+2]]),e.vertex.push(r.vertexPositions[n[d*3]]),e.vertex.push(r.vertexPositions[n[d*3+1]]),e.vertex.push(r.vertexPositions[n[d*3+2]]),r.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(d-1)*4]),e.vertexWeights.push(l[(d-1)*4+1]),e.vertexWeights.push(l[(d-1)*4+2]),e.vertexWeights.push(l[(d-1)*4+3]),e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(d-1)*4]),e.weightsIndices.push(c[(d-1)*4+1]),e.weightsIndices.push(c[(d-1)*4+2]),e.weightsIndices.push(c[(d-1)*4+3]),e.weightsIndices.push(c[d*4]),e.weightsIndices.push(c[d*4+1]),e.weightsIndices.push(c[d*4+2]),e.weightsIndices.push(c[d*4+3])),r.color&&(e.colors.push(s[0]),e.colors.push(s[1]),e.colors.push(s[2]),e.colors.push(s[(d-1)*3]),e.colors.push(s[(d-1)*3+1]),e.colors.push(s[(d-1)*3+2]),e.colors.push(s[d*3]),e.colors.push(s[d*3+1]),e.colors.push(s[d*3+2])),r.material&&r.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),r.normal&&(e.normal.push(o[0]),e.normal.push(o[1]),e.normal.push(o[2]),e.normal.push(o[(d-1)*3]),e.normal.push(o[(d-1)*3+1]),e.normal.push(o[(d-1)*3+2]),e.normal.push(o[d*3]),e.normal.push(o[d*3+1]),e.normal.push(o[d*3+2])),r.uv&&r.uv.forEach(function(f,g){e.uvs[g]===void 0&&(e.uvs[g]=[]),e.uvs[g].push(p[g][0]),e.uvs[g].push(p[g][1]),e.uvs[g].push(p[g][(d-1)*2]),e.uvs[g].push(p[g][(d-1)*2+1]),e.uvs[g].push(p[g][d*2]),e.uvs[g].push(p[g][d*2+1])})}addMorphTargets(e,r,n,i){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let o=this;n.forEach(function(s){s.rawTargets.forEach(function(p){let l=ft.Objects.Geometry[p.geoID];l!==void 0&&o.genMorphGeometry(e,r,l,i,p.name)})})}genMorphGeometry(e,r,n,i,o){let s=r.PolygonVertexIndex!==void 0?r.PolygonVertexIndex.a:[],p=n.Vertices!==void 0?n.Vertices.a:[],l=n.Indexes!==void 0?n.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let v=0;v<l.length;v++){let A=l[v]*3;u[A]=p[v*3],u[A+1]=p[v*3+1],u[A+2]=p[v*3+2]}let d={vertexIndices:s,vertexPositions:u},f=this.genBuffers(d),g=new Lp(f.vertex,3);g.name=o||n.attrName,g.applyMatrix4(i),e.morphAttributes.position.push(g)}parseNormals(e){let r=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Normals.a,o=[];return n==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:o,mappingType:r,referenceType:n}}parseUVs(e){let r=e.MappingInformationType,n=e.ReferenceInformationType,i=e.UV.a,o=[];return n==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:i,indices:o,mappingType:r,referenceType:n}}parseVertexColors(e){let r=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Colors.a,o=[];return n==="IndexToDirect"&&(o=e.ColorIndex.a),{dataSize:4,buffer:i,indices:o,mappingType:r,referenceType:n}}parseMaterialIndices(e){let r=e.MappingInformationType,n=e.ReferenceInformationType;if(r==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};let i=e.Materials.a,o=[];for(let s=0;s<i.length;++s)o.push(s);return{dataSize:1,buffer:i,indices:o,mappingType:r,referenceType:n}}parseNurbsGeometry(e){if(ld===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new If;let r=parseInt(e.Order);if(isNaN(r))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new If;let n=r-1,i=e.KnotVector.a,o=[],s=e.Points.a;for(let d=0,f=s.length;d<f;d+=4)o.push(new o9().fromArray(s,d));let p,l;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){p=n,l=i.length-1-p;for(let d=0;d<n;++d)o.push(o[d])}let u=new ld(n,i,o,p,l).getPoints(o.length*12);return new If().setFromPoints(u)}},rA=class{parse(){let e=[],r=this.parseClips();if(r!==void 0)for(let n in r){let i=r[n],o=this.addClip(i);e.push(o)}return e}parseClips(){if(ft.Objects.AnimationCurve===void 0)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let r=this.parseAnimationLayers(e);return this.parseAnimStacks(r)}parseAnimationCurveNodes(){let e=ft.Objects.AnimationCurveNode,r=new Map;for(let n in e){let i=e[n];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){let o={id:i.id,attr:i.attrName,curves:{}};r.set(o.id,o)}}return r}parseAnimationCurves(e){let r=ft.Objects.AnimationCurve;for(let n in r){let i={id:r[n].id,times:r[n].KeyTime.a.map(c9),values:r[n].KeyValueFloat.a},o=Gr.get(i.id);if(o!==void 0){let s=o.parents[0].ID,p=o.parents[0].relationship;p.match(/X/)?e.get(s).curves.x=i:p.match(/Y/)?e.get(s).curves.y=i:p.match(/Z/)?e.get(s).curves.z=i:p.match(/d|DeformPercent/)&&e.has(s)&&(e.get(s).curves.morph=i)}}}parseAnimationLayers(e){let r=ft.Objects.AnimationLayer,n=new Map;for(let i in r){let o=[],s=Gr.get(parseInt(i));s!==void 0&&(s.children.forEach(function(l,c){if(e.has(l.ID)){let u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(o[c]===void 0){let d=Gr.get(l.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(d!==void 0){let f=ft.Objects.Model[d.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}let g={modelName:f.attrName?Df.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Zo.traverse(function(v){v.ID===f.id&&(g.transform=v.matrix,v.userData.transformData&&(g.eulerOrder=v.userData.transformData.eulerOrder))}),g.transform||(g.transform=new Pr),"PreRotation"in f&&(g.preRotation=f.PreRotation.value),"PostRotation"in f&&(g.postRotation=f.PostRotation.value),o[c]=g}}o[c]&&(o[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(o[c]===void 0){let d=Gr.get(l.ID).parents.filter(function(h){return h.relationship!==void 0})[0].ID,f=Gr.get(d).parents[0].ID,g=Gr.get(f).parents[0].ID,v=Gr.get(g).parents[0].ID,A=ft.Objects.Model[v],m={modelName:A.attrName?Df.sanitizeNodeName(A.attrName):"",morphName:ft.Objects.Deformer[d].attrName};o[c]=m}o[c][u.attr]=u}}}),n.set(parseInt(i),o))}return n}parseAnimStacks(e){let r=ft.Objects.AnimationStack,n={};for(let i in r){let o=Gr.get(parseInt(i)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let s=e.get(o[0].ID);n[i]={name:r[i].attrName,layer:s}}return n}addClip(e){let r=[],n=this;return e.layer.forEach(function(i){r=r.concat(n.generateTracks(i))}),new i9(e.name,-1,r)}generateTracks(e){let r=[],n=new dd,i=new Ff,o=new dd;if(e.transform&&e.transform.decompose(n,i,o),n=n.toArray(),i=new cd().setFromQuaternion(i,e.eulerOrder).toArray(),o=o.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){let s=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");s!==void 0&&r.push(s)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){let s=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);s!==void 0&&r.push(s)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){let s=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");s!==void 0&&r.push(s)}if(e.DeformPercent!==void 0){let s=this.generateMorphTrack(e);s!==void 0&&r.push(s)}return r}generateVectorTrack(e,r,n,i){let o=this.getTimesForAllAxes(r),s=this.getKeyframeTrackValues(o,r,n);return new n9(e+"."+i,o,s)}generateRotationTrack(e,r,n,i,o,s){r.x!==void 0&&(this.interpolateRotations(r.x),r.x.values=r.x.values.map(kn.degToRad)),r.y!==void 0&&(this.interpolateRotations(r.y),r.y.values=r.y.values.map(kn.degToRad)),r.z!==void 0&&(this.interpolateRotations(r.z),r.z.values=r.z.values.map(kn.degToRad));let p=this.getTimesForAllAxes(r),l=this.getKeyframeTrackValues(p,r,n);i!==void 0&&(i=i.map(kn.degToRad),i.push(s),i=new cd().fromArray(i),i=new Ff().setFromEuler(i)),o!==void 0&&(o=o.map(kn.degToRad),o.push(s),o=new cd().fromArray(o),o=new Ff().setFromEuler(o).invert());let c=new Ff,u=new cd,d=[];for(let f=0;f<l.length;f+=3)u.set(l[f],l[f+1],l[f+2],s),c.setFromEuler(u),i!==void 0&&c.premultiply(i),o!==void 0&&c.multiply(o),c.toArray(d,f/3*4);return new a9(e+".quaternion",p,d)}generateMorphTrack(e){let r=e.DeformPercent.curves.morph,n=r.values.map(function(o){return o/100}),i=Zo.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new s9(e.modelName+".morphTargetInfluences["+i+"]",r.times,n)}getTimesForAllAxes(e){let r=[];if(e.x!==void 0&&(r=r.concat(e.x.times)),e.y!==void 0&&(r=r.concat(e.y.times)),e.z!==void 0&&(r=r.concat(e.z.times)),r=r.sort(function(n,i){return n-i}),r.length>1){let n=1,i=r[0];for(let o=1;o<r.length;o++){let s=r[o];s!==i&&(r[n]=s,i=s,n++)}r=r.slice(0,n)}return r}getKeyframeTrackValues(e,r,n){let i=n,o=[],s=-1,p=-1,l=-1;return e.forEach(function(c){if(r.x&&(s=r.x.times.indexOf(c)),r.y&&(p=r.y.times.indexOf(c)),r.z&&(l=r.z.times.indexOf(c)),s!==-1){let u=r.x.values[s];o.push(u),i[0]=u}else o.push(i[0]);if(p!==-1){let u=r.y.values[p];o.push(u),i[1]=u}else o.push(i[1]);if(l!==-1){let u=r.z.values[l];o.push(u),i[2]=u}else o.push(i[2])}),o}interpolateRotations(e){for(let r=1;r<e.values.length;r++){let n=e.values[r-1],i=e.values[r]-n,o=Math.abs(i);if(o>=180){let s=o/180,p=i/s,l=n+p,c=e.times[r-1],d=(e.times[r]-c)/s,f=c+d,g=[],v=[];for(;f<e.times[r];)g.push(f),f+=d,v.push(l),l+=p;e.times=Kb(e.times,r,g),e.values=Kb(e.values,r,v)}}}},oA=class{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,r){this.currentProp=e,this.currentPropName=r}parse(e){this.currentIndent=0,this.allNodes=new Lf,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let r=this,n=e.split(/[\r\n]+/);return n.forEach(function(i,o){let s=i.match(/^[\s\t]*;/),p=i.match(/^[\s\t]*$/);if(s||p)return;let l=i.match("^\\t{"+r.currentIndent+"}(\\w+):(.*){",""),c=i.match("^\\t{"+r.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=i.match("^\\t{"+(r.currentIndent-1)+"}}");l?r.parseNodeBegin(i,l):c?r.parseNodeProperty(i,c,n[++o]):u?r.popStack():i.match(/^[^\s\t}]/)&&r.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,r){let n=r[1].trim().replace(/^"/,"").replace(/"$/,""),i=r[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:n},s=this.parseNodeAttr(i),p=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,o):n in p?(n==="PoseNode"?p.PoseNode.push(o):p[n].id!==void 0&&(p[n]={},p[n][p[n].id]=p[n]),s.id!==""&&(p[n][s.id]=o)):typeof s.id=="number"?(p[n]={},p[n][s.id]=o):n!=="Properties70"&&(n==="PoseNode"?p[n]=[o]:p[n]=o),typeof s.id=="number"&&(o.id=s.id),s.name!==""&&(o.attrName=s.name),s.type!==""&&(o.attrType=s.type),this.pushStack(o)}parseNodeAttr(e){let r=e[0];e[0]!==""&&(r=parseInt(e[0]),isNaN(r)&&(r=e[0]));let n="",i="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:r,name:n,type:i}}parseNodeProperty(e,r,n){let i=r[1].replace(/^"/,"").replace(/"$/,"").trim(),o=r[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&o===","&&(o=n.replace(/"/g,"").replace(/,$/,"").trim());let s=this.getCurrentNode();if(s.name==="Properties70"){this.parseNodeSpecialProperty(e,i,o);return}if(i==="C"){let l=o.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]),d=o.split(",").slice(3);d=d.map(function(f){return f.trim().replace(/^"/,"")}),i="connections",o=[c,u],u9(o,d),s[i]===void 0&&(s[i]=[])}i==="Node"&&(s.id=o),i in s&&Array.isArray(s[i])?s[i].push(o):i!=="a"?s[i]=o:s.a=o,this.setCurrentProp(s,i),i==="a"&&o.slice(-1)!==","&&(s.a=$1(o))}parseNodePropertyContinued(e){let r=this.getCurrentNode();r.a+=e,e.slice(-1)!==","&&(r.a=$1(r.a))}parseNodeSpecialProperty(e,r,n){let i=n.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=i[0],s=i[1],p=i[2],l=i[3],c=i[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=$1(c);break}this.getPrevNode()[o]={type:s,type2:p,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),o)}},iA=class{parse(e){let r=new kf(e);r.skip(23);let n=r.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);let i=new Lf;for(;!this.endOfContent(r);){let o=this.parseNode(r,n);o!==null&&i.add(o.name,o)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,r){let n={},i=r>=7500?e.getUint64():e.getUint32(),o=r>=7500?e.getUint64():e.getUint32();r>=7500?e.getUint64():e.getUint32();let s=e.getUint8(),p=e.getString(s);if(i===0)return null;let l=[];for(let f=0;f<o;f++)l.push(this.parseProperty(e));let c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",d=l.length>2?l[2]:"";for(n.singleProperty=o===1&&e.getOffset()===i;i>e.getOffset();){let f=this.parseNode(e,r);f!==null&&this.parseSubNode(p,n,f)}return n.propertyList=l,typeof c=="number"&&(n.id=c),u!==""&&(n.attrName=u),d!==""&&(n.attrType=d),p!==""&&(n.name=p),n}parseSubNode(e,r,n){if(n.singleProperty===!0){let i=n.propertyList[0];Array.isArray(i)?(r[n.name]=n,n.a=i):r[n.name]=i}else if(e==="Connections"&&n.name==="C"){let i=[];n.propertyList.forEach(function(o,s){s!==0&&i.push(o)}),r.connections===void 0&&(r.connections=[]),r.connections.push(i)}else if(n.name==="Properties70")Object.keys(n).forEach(function(o){r[o]=n[o]});else if(e==="Properties70"&&n.name==="P"){let i=n.propertyList[0],o=n.propertyList[1],s=n.propertyList[2],p=n.propertyList[3],l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?l=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:l=n.propertyList[4],r[i]={type:o,type2:s,flag:p,value:l}}else r[n.name]===void 0?typeof n.id=="number"?(r[n.name]={},r[n.name][n.id]=n):r[n.name]=n:n.name==="PoseNode"?(Array.isArray(r[n.name])||(r[n.name]=[r[n.name]]),r[n.name].push(n)):r[n.name][n.id]===void 0&&(r[n.name][n.id]=n)}parseProperty(e){let r=e.getString(1),n;switch(r){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":let i=e.getUint32(),o=e.getUint32(),s=e.getUint32();if(o===0)switch(r){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}let p=vs(new Uint8Array(e.getArrayBuffer(s))),l=new kf(p.buffer);switch(r){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}default:throw new Error("THREE.FBXLoader: Unknown property type "+r)}}},kf=class{constructor(e,r){this.dv=new DataView(e),this.offset=0,this.littleEndian=r!==void 0?r:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){let r=[];for(let n=0;n<e;n++)r.push(this.getBoolean());return r}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let r=[];for(let n=0;n<e;n++)r.push(this.getInt32());return r}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,r;return this.littleEndian?(e=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),e=this.getUint32()),r&2147483648?(r=~r&4294967295,e=~e&4294967295,e===4294967295&&(r=r+1&4294967295),e=e+1&4294967295,-(r*4294967296+e)):r*4294967296+e}getInt64Array(e){let r=[];for(let n=0;n<e;n++)r.push(this.getInt64());return r}getUint64(){let e,r;return this.littleEndian?(e=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),e=this.getUint32()),r*4294967296+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let r=[];for(let n=0;n<e;n++)r.push(this.getFloat32());return r}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let r=[];for(let n=0;n<e;n++)r.push(this.getFloat64());return r}getArrayBuffer(e){let r=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}getString(e){let r=[];for(let i=0;i<e;i++)r[i]=this.getUint8();let n=r.indexOf(0);return n>=0&&(r=r.slice(0,n)),Ia(new Uint8Array(r))}},Lf=class{add(e,r){this[e]=r}};function p9(t){let e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===qb(t,0,e.length)}function l9(t){let e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0;function n(i){let o=t[i-1];return t=t.slice(r+i),r++,o}for(let i=0;i<e.length;++i)if(n(1)===e[i])return!1;return!0}function Yb(t){let e=/FBXVersion: (\d+)/,r=t.match(e);if(r)return parseInt(r[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function c9(t){return t/46186158e3}var d9=[];function Of(t,e,r,n){let i;switch(n.mappingType){case"ByPolygonVertex":i=t;break;case"ByPolygon":i=e;break;case"ByVertice":i=r;break;case"AllSame":i=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(i=n.indices[i]);let o=i*n.dataSize,s=o+n.dataSize;return f9(d9,n.buffer,o,s)}var Z1=new cd,Pp=new dd;function Xb(t){let e=new Pr,r=new Pr,n=new Pr,i=new Pr,o=new Pr,s=new Pr,p=new Pr,l=new Pr,c=new Pr,u=new Pr,d=new Pr,f=new Pr,g=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(Pp.fromArray(t.translation)),t.preRotation){let x=t.preRotation.map(kn.degToRad);x.push(t.eulerOrder),r.makeRotationFromEuler(Z1.fromArray(x))}if(t.rotation){let x=t.rotation.map(kn.degToRad);x.push(t.eulerOrder),n.makeRotationFromEuler(Z1.fromArray(x))}if(t.postRotation){let x=t.postRotation.map(kn.degToRad);x.push(t.eulerOrder),i.makeRotationFromEuler(Z1.fromArray(x)),i.invert()}t.scale&&o.scale(Pp.fromArray(t.scale)),t.scalingOffset&&p.setPosition(Pp.fromArray(t.scalingOffset)),t.scalingPivot&&s.setPosition(Pp.fromArray(t.scalingPivot)),t.rotationOffset&&l.setPosition(Pp.fromArray(t.rotationOffset)),t.rotationPivot&&c.setPosition(Pp.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(d.copy(t.parentMatrix),u.copy(t.parentMatrixWorld));let v=r.clone().multiply(n).multiply(i),A=new Pr;A.extractRotation(u);let m=new Pr;m.copyPosition(u);let h=m.clone().invert().multiply(u),y=A.clone().invert().multiply(h),E=o,b=new Pr;if(g===0)b.copy(A).multiply(v).multiply(y).multiply(E);else if(g===1)b.copy(A).multiply(y).multiply(v).multiply(E);else{let T=new Pr().scale(new dd().setFromMatrixScale(d)).clone().invert(),w=y.clone().multiply(T);b.copy(A).multiply(v).multiply(w).multiply(E)}let _=c.clone().invert(),C=s.clone().invert(),B=e.clone().multiply(l).multiply(c).multiply(r).multiply(n).multiply(i).multiply(_).multiply(p).multiply(s).multiply(o).multiply(C),R=new Pr().copyPosition(B),M=u.clone().multiply(R);return f.copyPosition(M),B=f.clone().multiply(b),B.premultiply(u.invert()),B}function Jb(t){t=t||0;let e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return t===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function $1(t){return t.split(",").map(function(r){return parseFloat(r)})}function qb(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=t.byteLength),Ia(new Uint8Array(t,e,r))}function u9(t,e){for(let r=0,n=t.length,i=e.length;r<i;r++,n++)t[n]=e[r]}function f9(t,e,r,n){for(let i=r,o=0;i<n;i++,o++)t[o]=e[i];return t}function Kb(t,e,r){return t.slice(0,e).concat(r).concat(t.slice(e))}import{Loader as m9,FileLoader as A9,ShapePath as y9}from"three";var g9=Object.defineProperty,h9=(t,e,r)=>e in t?g9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nA=(t,e,r)=>(h9(t,typeof e!="symbol"?e+"":e,r),r),ud=class extends m9{constructor(e){super(e)}load(e,r,n,i){let o=new A9(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,s=>{if(typeof s!="string")throw new Error("unsupported data type");let p=JSON.parse(s),l=this.parse(p);r&&r(l)},n,i)}loadAsync(e,r){return super.loadAsync(e,r)}parse(e){return new Pf(e)}},Pf=class{constructor(e){nA(this,"data"),nA(this,"isFont",!0),nA(this,"type","Font"),this.data=e}generateShapes(e,r=100,n){let i=[],o={letterSpacing:0,lineHeight:1,...n},s=v9(e,r,this.data,o);for(let p=0,l=s.length;p<l;p++)Array.prototype.push.apply(i,s[p].toShapes(!1));return i}};function v9(t,e,r,n){let i=Array.from(t),o=e/r.resolution,s=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*o,p=[],l=0,c=0;for(let u=0;u<i.length;u++){let d=i[u];if(d===`
`)l=0,c-=s*n.lineHeight;else{let f=E9(d,o,l,c,r);f&&(l+=f.offsetX+n.letterSpacing,p.push(f.path))}}return p}function E9(t,e,r,n,i){let o=i.glyphs[t]||i.glyphs["?"];if(!o){console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".");return}let s=new y9,p,l,c,u,d,f,g,v;if(o.o){let A=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let m=0,h=A.length;m<h;)switch(A[m++]){case"m":p=parseInt(A[m++])*e+r,l=parseInt(A[m++])*e+n,s.moveTo(p,l);break;case"l":p=parseInt(A[m++])*e+r,l=parseInt(A[m++])*e+n,s.lineTo(p,l);break;case"q":c=parseInt(A[m++])*e+r,u=parseInt(A[m++])*e+n,d=parseInt(A[m++])*e+r,f=parseInt(A[m++])*e+n,s.quadraticCurveTo(d,f,c,u);break;case"b":c=parseInt(A[m++])*e+r,u=parseInt(A[m++])*e+n,d=parseInt(A[m++])*e+r,f=parseInt(A[m++])*e+n,g=parseInt(A[m++])*e+r,v=parseInt(A[m++])*e+n,s.bezierCurveTo(d,f,g,v,c,u);break}}return{offsetX:o.ha*e,path:s}}import{Texture as b9,NearestFilter as Zb,ClampToEdgeWrapping as _9}from"three";var Gf=class extends b9{constructor(e=null,r=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:r,height:n,depth:i},this.magFilter=Zb,this.minFilter=Zb,this.wrapR=_9,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};import{Loader as k9,RGBAFormat as Gp,RGBA_ASTC_4x4_Format as L9,RGBA_BPTC_Format as P9,RGBA_ETC2_EAC_Format as G9,RGBA_PVRTC_4BPPV1_Format as z9,RGBA_S3TC_DXT5_Format as N9,RGB_ETC1_Format as U9,RGB_ETC2_Format as j9,RGB_PVRTC_4BPPV1_Format as H9,RGB_S3TC_DXT1_Format as Q9,FileLoader as lA,UnsignedByteType as sn,CompressedTexture as b_,LinearFilter as i_,LinearMipmapLinearFilter as W9,FloatType as Qf,HalfFloatType as Wf,DataTexture as V9,RGFormat as gd,RedFormat as hd,RGBA_ASTC_6x6_Format as n_}from"three";var zf=class{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){let r=this.workerCreator();r.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=r}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,r){let n=this.workersResolve[e];if(n&&n(r),this.queue.length){let{resolve:i,msg:o,transfer:s}=this.queue.shift();this.workersResolve[e]=i,this.workers[e].postMessage(o,s)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,r){return new Promise(n=>{let i=this._getIdleWorker();i!==-1?(this._initWorker(i),this.workerStatus|=1<<i,this.workersResolve[i]=n,this.workers[i].postMessage(e,r)):this.queue.push({resolve:n,msg:e,transfer:r})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}};var aA=class{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}},Is=class{constructor(e,r,n,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+r,n),this._littleEndian=i,this._offset=0}_nextUint8(){let e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){let e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){let e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){let e=this._dataView.getUint32(this._offset,this._littleEndian),r=this._dataView.getUint32(this._offset+4,this._littleEndian),n=e+2**32*r;return this._offset+=8,n}_nextInt32(){let e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){let r=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,r}_skip(e){return this._offset+=e,this}_scan(e,r){r===void 0&&(r=0);let n=this._offset,i=0;for(;this._dataView.getUint8(this._offset)!==r&&i<e;)i++,this._offset++;return i<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}},zo=[171,75,84,88,32,50,48,187,13,10,26,10];function $b(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Buffer.from(t).toString("utf8")}function e_(t){let e=new Uint8Array(t.buffer,t.byteOffset,zo.length);if(e[0]!==zo[0]||e[1]!==zo[1]||e[2]!==zo[2]||e[3]!==zo[3]||e[4]!==zo[4]||e[5]!==zo[5]||e[6]!==zo[6]||e[7]!==zo[7]||e[8]!==zo[8]||e[9]!==zo[9]||e[10]!==zo[10]||e[11]!==zo[11])throw new Error("Missing KTX 2.0 identifier.");let r=new aA,n=17*Uint32Array.BYTES_PER_ELEMENT,i=new Is(t,zo.length,n,!0);r.vkFormat=i._nextUint32(),r.typeSize=i._nextUint32(),r.pixelWidth=i._nextUint32(),r.pixelHeight=i._nextUint32(),r.pixelDepth=i._nextUint32(),r.layerCount=i._nextUint32(),r.faceCount=i._nextUint32();let o=i._nextUint32();r.supercompressionScheme=i._nextUint32();let s=i._nextUint32(),p=i._nextUint32(),l=i._nextUint32(),c=i._nextUint32(),u=i._nextUint64(),d=i._nextUint64(),f=o*3*8,g=new Is(t,zo.length+n,f,!0);for(let Y=0;Y<o;Y++)r.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+g._nextUint64(),g._nextUint64()),uncompressedByteLength:g._nextUint64()});let v=new Is(t,s,p,!0),A={vendorId:v._skip(4)._nextUint16(),descriptorType:v._nextUint16(),versionNumber:v._nextUint16(),descriptorBlockSize:v._nextUint16(),colorModel:v._nextUint8(),colorPrimaries:v._nextUint8(),transferFunction:v._nextUint8(),flags:v._nextUint8(),texelBlockDimension:[v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8()],bytesPlane:[v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8()],samples:[]},y=(A.descriptorBlockSize/4-6)/4;for(let Y=0;Y<y;Y++){let L={bitOffset:v._nextUint16(),bitLength:v._nextUint8(),channelType:v._nextUint8(),samplePosition:[v._nextUint8(),v._nextUint8(),v._nextUint8(),v._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};L.channelType&64?(L.sampleLower=v._nextInt32(),L.sampleUpper=v._nextInt32()):(L.sampleLower=v._nextUint32(),L.sampleUpper=v._nextUint32()),A.samples[Y]=L}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(A);let E=new Is(t,l,c,!0);for(;E._offset<c;){let Y=E._nextUint32(),L=E._scan(Y),Q=$b(L);if(r.keyValue[Q]=E._nextUint8Array(Y-L.byteLength-1),Q.match(/^ktx/i)){let N=$b(r.keyValue[Q]);r.keyValue[Q]=N.substring(0,N.lastIndexOf("\0"))}let V=Y%4?4-Y%4:0;E._skip(V)}if(d<=0)return r;let b=new Is(t,u,d,!0),_=b._nextUint16(),C=b._nextUint16(),B=b._nextUint32(),R=b._nextUint32(),M=b._nextUint32(),x=b._nextUint32(),T=[];for(let Y=0;Y<o;Y++)T.push({imageFlags:b._nextUint32(),rgbSliceByteOffset:b._nextUint32(),rgbSliceByteLength:b._nextUint32(),alphaSliceByteOffset:b._nextUint32(),alphaSliceByteLength:b._nextUint32()});let w=u+b._offset,S=w+B,I=S+R,G=I+M,H=new Uint8Array(t.buffer,t.byteOffset+w,B),X=new Uint8Array(t.buffer,t.byteOffset+S,R),Z=new Uint8Array(t.buffer,t.byteOffset+I,M),z=new Uint8Array(t.buffer,t.byteOffset+G,x);return r.globalData={endpointCount:_,selectorCount:C,imageDescs:T,endpointsData:H,selectorsData:X,tablesData:Z,extendedData:z},r}var fd,sa,pA,sA={env:{emscripten_notify_memory_growth:function(t){pA=new Uint8Array(sa.exports.memory.buffer)}}},Nf=class{init(){return fd||(typeof fetch<"u"?fd=fetch("data:application/wasm;base64,"+t_).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,sA)).then(this._init):fd=WebAssembly.instantiate(Buffer.from(t_,"base64"),sA).then(this._init),fd)}_init(e){sa=e.instance,sA.env.emscripten_notify_memory_growth(0)}decode(e,r=0){if(!sa)throw new Error("ZSTDDecoder: Await .init() before decoding.");let n=e.byteLength,i=sa.exports.malloc(n);pA.set(e,i),r=r||Number(sa.exports.ZSTD_findDecompressedSize(i,n));let o=sa.exports.malloc(r),s=sa.exports.ZSTD_decompress(o,r,i,n),p=pA.slice(o,o+s);return sa.exports.free(i),sa.exports.free(o),p}},t_="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";import{CompressedTexture as C9,CubeReflectionMapping as R9}from"three";var Uf=class extends C9{constructor(e,r,n){super(void 0,e[0].width,e[0].height,r,n,R9),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}};import{CompressedTexture as B9,ClampToEdgeWrapping as x9}from"three";var jf=class extends B9{constructor(e,r,n,i,o,s){super(e,r,n,o,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=x9}};var O9=Object.defineProperty,D9=(t,e,r)=>e in t?O9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hf=(t,e,r)=>(D9(t,typeof e!="symbol"?e+"":e,r),r),__=3e3,C_=3001,a_="",Y9="display-p3",K9="display-p3-linear",X9="srgb-linear",hA="srgb",cA=new WeakMap,dA=0,uA,md=(()=>{let t=class extends k9{constructor(r){super(r),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new zf,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(r){return this.transcoderPath=r,this}setWorkerLimit(r){return this.workerPool.setWorkerLimit(r),this}detectSupport(r){return this.workerConfig={astcSupported:r.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:r.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:r.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:r.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:r.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:r.extensions.has("WEBGL_compressed_texture_pvrtc")||r.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},r.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){let r=new lA(this.manager);r.setPath(this.transcoderPath),r.setWithCredentials(this.withCredentials);let n=r.loadAsync("basis_transcoder.js"),i=new lA(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);let o=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([n,o]).then(([s,p])=>{let l=t.BasisWorker.toString(),c=["/* constants */","let _EngineFormat = "+JSON.stringify(t.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(t.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(t.BasisFormat),"/* basis_transcoder.js */",s,"/* worker */",l.substring(l.indexOf("{")+1,l.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([c])),this.transcoderBinary=p,this.workerPool.setWorkerCreator(()=>{let u=new Worker(this.workerSourceURL),d=this.transcoderBinary.slice(0);return u.postMessage({type:"init",config:this.workerConfig,transcoderBinary:d},[d]),u})}),dA>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),dA++}return this.transcoderPending}load(r,n,i,o){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");let s=new lA(this.manager);s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials),s.load(r,p=>{if(cA.has(p))return cA.get(p).promise.then(n).catch(o);this._createTexture(p).then(l=>n?n(l):null).catch(o)},i,o)}_createTextureFrom(r,n){let{faces:i,width:o,height:s,format:p,type:l,error:c,dfdFlags:u}=r;if(l==="error")return Promise.reject(c);let d;if(n.faceCount===6)d=new Uf(i,p,sn);else{let g=i[0].mipmaps;d=n.layerCount>1?new jf(g,o,s,n.layerCount,p,sn):new b_(g,o,s,p,sn)}d.minFilter=i[0].mipmaps.length===1?i_:W9,d.magFilter=i_,d.generateMipmaps=!1,d.needsUpdate=!0;let f=R_(n);return"colorSpace"in d?d.colorSpace=f:d.encoding=f===hA?C_:__,d.premultiplyAlpha=!!(u&1),d}async _createTexture(r,n={}){let i=e_(new Uint8Array(r));if(i.vkFormat!==0)return q9(i);let o=n,s=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:r,taskConfig:o},[r])).then(p=>this._createTextureFrom(p.data,i));return cA.set(r,{promise:s}),s}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),dA--,this}},e=t;return Hf(e,"BasisFormat",{ETC1S:0,UASTC_4x4:1}),Hf(e,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16}),Hf(e,"EngineFormat",{RGBAFormat:Gp,RGBA_ASTC_4x4_Format:L9,RGBA_BPTC_Format:P9,RGBA_ETC2_EAC_Format:G9,RGBA_PVRTC_4BPPV1_Format:z9,RGBA_S3TC_DXT5_Format:N9,RGB_ETC1_Format:U9,RGB_ETC2_Format:j9,RGB_PVRTC_4BPPV1_Format:H9,RGB_S3TC_DXT1_Format:Q9}),Hf(e,"BasisWorker",function(){let r,n,i,o=_EngineFormat,s=_TranscoderFormat,p=_BasisFormat;self.addEventListener("message",function(m){let h=m.data;switch(h.type){case"init":r=h.config,l(h.transcoderBinary);break;case"transcode":n.then(()=>{try{let{faces:y,buffers:E,width:b,height:_,hasAlpha:C,format:B,dfdFlags:R}=c(h.buffer);self.postMessage({type:"transcode",id:h.id,faces:y,width:b,height:_,hasAlpha:C,format:B,dfdFlags:R},E)}catch(y){console.error(y),self.postMessage({type:"error",id:h.id,error:y.message})}});break}});function l(m){n=new Promise(h=>{i={wasmBinary:m,onRuntimeInitialized:h},BASIS(i)}).then(()=>{i.initializeBasis(),i.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function c(m){let h=new i.KTX2File(new Uint8Array(m));function y(){h.close(),h.delete()}if(!h.isValid())throw y(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let E=h.isUASTC()?p.UASTC_4x4:p.ETC1S,b=h.getWidth(),_=h.getHeight(),C=h.getLayers()||1,B=h.getLevels(),R=h.getFaces(),M=h.getHasAlpha(),x=h.getDFDFlags(),{transcoderFormat:T,engineFormat:w}=g(E,b,_,M);if(!b||!_||!B)throw y(),new Error("THREE.KTX2Loader:	Invalid texture");if(!h.startTranscoding())throw y(),new Error("THREE.KTX2Loader: .startTranscoding failed");let S=[],I=[];for(let G=0;G<R;G++){let H=[];for(let X=0;X<B;X++){let Z=[],z,Y;for(let Q=0;Q<C;Q++){let V=h.getImageLevelInfo(X,Q,G);G===0&&X===0&&Q===0&&(V.origWidth%4!==0||V.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),B>1?(z=V.origWidth,Y=V.origHeight):(z=V.width,Y=V.height);let N=new Uint8Array(h.getImageTranscodedSizeInBytes(X,Q,0,T));if(!h.transcodeImage(N,X,Q,G,T,0,-1,-1))throw y(),new Error("THREE.KTX2Loader: .transcodeImage failed.");Z.push(N)}let L=A(Z);H.push({data:L,width:z,height:Y}),I.push(L.buffer)}S.push({mipmaps:H,width:b,height:_,format:w})}return y(),{faces:S,buffers:I,width:b,height:_,hasAlpha:M,format:w,dfdFlags:x}}let u=[{if:"astcSupported",basisFormat:[p.UASTC_4x4],transcoderFormat:[s.ASTC_4x4,s.ASTC_4x4],engineFormat:[o.RGBA_ASTC_4x4_Format,o.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[s.BC7_M5,s.BC7_M5],engineFormat:[o.RGBA_BPTC_Format,o.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[s.BC1,s.BC3],engineFormat:[o.RGB_S3TC_DXT1_Format,o.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[s.ETC1,s.ETC2],engineFormat:[o.RGB_ETC2_Format,o.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[s.ETC1],engineFormat:[o.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[s.PVRTC1_4_RGB,s.PVRTC1_4_RGBA],engineFormat:[o.RGB_PVRTC_4BPPV1_Format,o.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],d=u.sort(function(m,h){return m.priorityETC1S-h.priorityETC1S}),f=u.sort(function(m,h){return m.priorityUASTC-h.priorityUASTC});function g(m,h,y,E){let b,_,C=m===p.ETC1S?d:f;for(let B=0;B<C.length;B++){let R=C[B];if(r[R.if]&&R.basisFormat.includes(m)&&!(E&&R.transcoderFormat.length<2)&&!(R.needsPowerOfTwo&&!(v(h)&&v(y))))return b=R.transcoderFormat[E?1:0],_=R.engineFormat[E?1:0],{transcoderFormat:b,engineFormat:_}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),b=s.RGBA32,_=o.RGBAFormat,{transcoderFormat:b,engineFormat:_}}function v(m){return m<=2?!0:(m&m-1)===0&&m!==0}function A(m){if(m.length===1)return m[0];let h=0;for(let b=0;b<m.length;b++){let _=m[b];h+=_.byteLength}let y=new Uint8Array(h),E=0;for(let b=0;b<m.length;b++){let _=m[b];y.set(_,E),E+=_.byteLength}return y}}),e})(),J9=new Set([Gp,gd,hd]),fA={109:Gp,97:Gp,37:Gp,43:Gp,103:gd,83:gd,16:gd,22:gd,100:hd,76:hd,15:hd,9:hd,166:n_,165:n_},gA={109:Qf,97:Wf,37:sn,43:sn,103:Qf,83:Wf,16:sn,22:sn,100:Qf,76:Wf,15:sn,9:sn,166:sn,165:sn};async function q9(t){let{vkFormat:e}=t;if(fA[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let r;t.supercompressionScheme===2&&(uA||(uA=new Promise(async s=>{let p=new Nf;await p.init(),s(p)})),r=await uA);let n=[];for(let s=0;s<t.levels.length;s++){let p=Math.max(1,t.pixelWidth>>s),l=Math.max(1,t.pixelHeight>>s),c=t.pixelDepth?Math.max(1,t.pixelDepth>>s):0,u=t.levels[s],d;if(t.supercompressionScheme===0)d=u.levelData;else if(t.supercompressionScheme===2)d=r.decode(u.levelData,u.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let f;gA[e]===Qf?f=new Float32Array(d.buffer,d.byteOffset,d.byteLength/Float32Array.BYTES_PER_ELEMENT):gA[e]===Wf?f=new Uint16Array(d.buffer,d.byteOffset,d.byteLength/Uint16Array.BYTES_PER_ELEMENT):f=d,n.push({data:f,width:p,height:l,depth:c})}let i;if(J9.has(fA[e]))i=t.pixelDepth===0?new V9(n[0].data,t.pixelWidth,t.pixelHeight):new Gf(n[0].data,t.pixelWidth,t.pixelHeight,t.pixelDepth);else{if(t.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");i=new b_(n,t.pixelWidth,t.pixelHeight)}i.mipmaps=n,i.type=gA[e],i.format=fA[e],i.needsUpdate=!0;let o=R_(t);return"colorSpace"in i?i.colorSpace=o:i.encoding=o===hA?C_:__,Promise.resolve(i)}function R_(t){let e=t.dataFormatDescriptor[0];return e.colorPrimaries===1?e.transferFunction===2?hA:X9:e.colorPrimaries===10?e.transferFunction===2?Y9:K9:(e.colorPrimaries===0||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),a_)}import{DataTextureLoader as Z9,HalfFloatType as Vf,FloatType as mA,DataUtils as Yf,LinearFilter as B_}from"three";var Ad=class extends Z9{constructor(e){super(e),this.type=Vf}parse(e){let s=function(R,M){switch(R){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(M||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(M||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(M||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(M||""))}},d=function(R,M,x){M=M||1024;let w=R.pos,S=-1,I=0,G="",H=String.fromCharCode.apply(null,new Uint16Array(R.subarray(w,w+128)));for(;0>(S=H.indexOf(`
`))&&I<M&&w<R.byteLength;)G+=H,I+=H.length,w+=128,H+=String.fromCharCode.apply(null,new Uint16Array(R.subarray(w,w+128)));return-1<S?(x!==!1&&(R.pos+=I+S+1),G+H.slice(0,S)):!1},f=function(R){let M=/^#\?(\S+)/,x=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,T=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,w=/^\s*FORMAT=(\S+)\s*$/,S=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,I={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0},G,H;for((R.pos>=R.byteLength||!(G=d(R)))&&s(1,"no header found"),(H=G.match(M))||s(3,"bad initial token"),I.valid|=1,I.programtype=H[1],I.string+=G+`
`;G=d(R),G!==!1;){if(I.string+=G+`
`,G.charAt(0)==="#"){I.comments+=G+`
`;continue}if((H=G.match(x))&&(I.gamma=parseFloat(H[1])),(H=G.match(T))&&(I.exposure=parseFloat(H[1])),(H=G.match(w))&&(I.valid|=2,I.format=H[1]),(H=G.match(S))&&(I.valid|=4,I.height=parseInt(H[1],10),I.width=parseInt(H[2],10)),I.valid&2&&I.valid&4)break}return I.valid&2||s(3,"missing format specifier"),I.valid&4||s(3,"missing image size specifier"),I},g=function(R,M,x){let T=M;if(T<8||T>32767||R[0]!==2||R[1]!==2||R[2]&128)return new Uint8Array(R);T!==(R[2]<<8|R[3])&&s(3,"wrong scanline width");let w=new Uint8Array(4*M*x);w.length||s(4,"unable to allocate buffer space");let S=0,I=0,G=4*T,H=new Uint8Array(4),X=new Uint8Array(G),Z=x;for(;Z>0&&I<R.byteLength;){I+4>R.byteLength&&s(1),H[0]=R[I++],H[1]=R[I++],H[2]=R[I++],H[3]=R[I++],(H[0]!=2||H[1]!=2||(H[2]<<8|H[3])!=T)&&s(3,"bad rgbe scanline format");let z=0,Y;for(;z<G&&I<R.byteLength;){Y=R[I++];let Q=Y>128;if(Q&&(Y-=128),(Y===0||z+Y>G)&&s(3,"bad scanline data"),Q){let V=R[I++];for(let N=0;N<Y;N++)X[z++]=V}else X.set(R.subarray(I,I+Y),z),z+=Y,I+=Y}let L=T;for(let Q=0;Q<L;Q++){let V=0;w[S]=X[Q+V],V+=T,w[S+1]=X[Q+V],V+=T,w[S+2]=X[Q+V],V+=T,w[S+3]=X[Q+V],S+=4}Z--}return w},v=function(R,M,x,T){let w=R[M+3],S=Math.pow(2,w-128)/255;x[T+0]=R[M+0]*S,x[T+1]=R[M+1]*S,x[T+2]=R[M+2]*S,x[T+3]=1},A=function(R,M,x,T){let w=R[M+3],S=Math.pow(2,w-128)/255;x[T+0]=Yf.toHalfFloat(Math.min(R[M+0]*S,65504)),x[T+1]=Yf.toHalfFloat(Math.min(R[M+1]*S,65504)),x[T+2]=Yf.toHalfFloat(Math.min(R[M+2]*S,65504)),x[T+3]=Yf.toHalfFloat(1)},m=new Uint8Array(e);m.pos=0;let h=f(m),y=h.width,E=h.height,b=g(m.subarray(m.pos),y,E),_,C,B;switch(this.type){case mA:B=b.length/4;let R=new Float32Array(B*4);for(let x=0;x<B;x++)v(b,x*4,R,x*4);_=R,C=mA;break;case Vf:B=b.length/4;let M=new Uint16Array(B*4);for(let x=0;x<B;x++)A(b,x*4,M,x*4);_=M,C=Vf;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:y,height:E,data:_,header:h.string,gamma:h.gamma,exposure:h.exposure,type:C}}setDataType(e){return this.type=e,this}load(e,r,n,i){function o(s,p){switch(s.type){case mA:case Vf:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=B_,s.magFilter=B_,s.generateMipmaps=!1,s.flipY=!0;break}r&&r(s,p)}return super.load(e,o,n,i)}};import{DataTextureLoader as $9,HalfFloatType as Kf,FloatType as AA,RGBAFormat as e7,RedFormat as t7,LinearFilter as x_,DataUtils as M_}from"three";var yd=Si>=152,vd=class extends $9{constructor(e){super(e),this.type=Kf}parse(e){let M=Math.pow(2.7182818,2.2);function x(F,U){for(var $=0,le=0;le<65536;++le)(le==0||F[le>>3]&1<<(le&7))&&(U[$++]=le);for(var ue=$-1;$<65536;)U[$++]=0;return ue}function T(F){for(var U=0;U<16384;U++)F[U]={},F[U].len=0,F[U].lit=0,F[U].p=null}let w={l:0,c:0,lc:0};function S(F,U,$,le,ue){for(;$<F;)U=U<<8|ze(le,ue),$+=8;$-=F,w.l=U>>$&(1<<F)-1,w.c=U,w.lc=$}let I=new Array(59);function G(F){for(var U=0;U<=58;++U)I[U]=0;for(var U=0;U<65537;++U)I[F[U]]+=1;for(var $=0,U=58;U>0;--U){var le=$+I[U]>>1;I[U]=$,$=le}for(var U=0;U<65537;++U){var ue=F[U];ue>0&&(F[U]=ue|I[ue]++<<6)}}function H(F,U,$,le,ue,fe,Re){for(var Ee=$,Be=0,xe=0;ue<=fe;ue++){if(Ee.value-$.value>le)return!1;S(6,Be,xe,F,Ee);var Me=w.l;if(Be=w.c,xe=w.lc,Re[ue]=Me,Me==63){if(Ee.value-$.value>le)throw"Something wrong with hufUnpackEncTable";S(8,Be,xe,F,Ee);var de=w.l+6;if(Be=w.c,xe=w.lc,ue+de>fe+1)throw"Something wrong with hufUnpackEncTable";for(;de--;)Re[ue++]=0;ue--}else if(Me>=59){var de=Me-59+2;if(ue+de>fe+1)throw"Something wrong with hufUnpackEncTable";for(;de--;)Re[ue++]=0;ue--}}G(Re)}function X(F){return F&63}function Z(F){return F>>6}function z(F,U,$,le){for(;U<=$;U++){var ue=Z(F[U]),fe=X(F[U]);if(ue>>fe)throw"Invalid table entry";if(fe>14){var Re=le[ue>>fe-14];if(Re.len)throw"Invalid table entry";if(Re.lit++,Re.p){var Ee=Re.p;Re.p=new Array(Re.lit);for(var Be=0;Be<Re.lit-1;++Be)Re.p[Be]=Ee[Be]}else Re.p=new Array(1);Re.p[Re.lit-1]=U}else if(fe)for(var xe=0,Be=1<<14-fe;Be>0;Be--){var Re=le[(ue<<14-fe)+xe];if(Re.len||Re.p)throw"Invalid table entry";Re.len=fe,Re.lit=U,xe++}}return!0}let Y={c:0,lc:0};function L(F,U,$,le){F=F<<8|ze($,le),U+=8,Y.c=F,Y.lc=U}let Q={c:0,lc:0};function V(F,U,$,le,ue,fe,Re,Ee,Be,xe){if(F==U){le<8&&(L($,le,ue,Re),$=Y.c,le=Y.lc),le-=8;var Me=$>>le,Me=new Uint8Array([Me])[0];if(Be.value+Me>xe)return!1;for(var de=Ee[Be.value-1];Me-- >0;)Ee[Be.value++]=de}else if(Be.value<xe)Ee[Be.value++]=F;else return!1;Q.c=$,Q.lc=le}function N(F){return F&65535}function P(F){var U=N(F);return U>32767?U-65536:U}let k={a:0,b:0};function O(F,U){var $=P(F),le=P(U),ue=le,fe=$+(ue&1)+(ue>>1),Re=fe,Ee=fe-ue;k.a=Re,k.b=Ee}function D(F,U){var $=N(F),le=N(U),ue=$-(le>>1)&65535,fe=le+ue-32768&65535;k.a=fe,k.b=ue}function q(F,U,$,le,ue,fe,Re){for(var Ee=Re<16384,Be=$>ue?ue:$,xe=1,Me;xe<=Be;)xe<<=1;for(xe>>=1,Me=xe,xe>>=1;xe>=1;){for(var de=0,jt=de+fe*(ue-Me),Pe=fe*xe,Oe=fe*Me,qe=le*xe,it=le*Me,wt,Tt,hr,ao;de<=jt;de+=Oe){for(var St=de,fi=de+le*($-Me);St<=fi;St+=it){var Ht=St+qe,kr=St+Pe,Go=kr+qe;Ee?(O(F[St+U],F[kr+U]),wt=k.a,hr=k.b,O(F[Ht+U],F[Go+U]),Tt=k.a,ao=k.b,O(wt,Tt),F[St+U]=k.a,F[Ht+U]=k.b,O(hr,ao),F[kr+U]=k.a,F[Go+U]=k.b):(D(F[St+U],F[kr+U]),wt=k.a,hr=k.b,D(F[Ht+U],F[Go+U]),Tt=k.a,ao=k.b,D(wt,Tt),F[St+U]=k.a,F[Ht+U]=k.b,D(hr,ao),F[kr+U]=k.a,F[Go+U]=k.b)}if($&xe){var kr=St+Pe;Ee?O(F[St+U],F[kr+U]):D(F[St+U],F[kr+U]),wt=k.a,F[kr+U]=k.b,F[St+U]=wt}}if(ue&xe)for(var St=de,fi=de+le*($-Me);St<=fi;St+=it){var Ht=St+qe;Ee?O(F[St+U],F[Ht+U]):D(F[St+U],F[Ht+U]),wt=k.a,F[Ht+U]=k.b,F[St+U]=wt}Me=xe,xe>>=1}return de}function ae(F,U,$,le,ue,fe,Re,Ee,Be,xe){for(var Me=0,de=0,jt=Ee,Pe=Math.trunc(ue.value+(fe+7)/8);ue.value<Pe;)for(L(Me,de,$,ue),Me=Y.c,de=Y.lc;de>=14;){var Oe=Me>>de-14&16383,qe=U[Oe];if(qe.len)de-=qe.len,V(qe.lit,Re,Me,de,$,le,ue,Be,xe,jt),Me=Q.c,de=Q.lc;else{if(!qe.p)throw"hufDecode issues";var it;for(it=0;it<qe.lit;it++){for(var wt=X(F[qe.p[it]]);de<wt&&ue.value<Pe;)L(Me,de,$,ue),Me=Y.c,de=Y.lc;if(de>=wt&&Z(F[qe.p[it]])==(Me>>de-wt&(1<<wt)-1)){de-=wt,V(qe.p[it],Re,Me,de,$,le,ue,Be,xe,jt),Me=Q.c,de=Q.lc;break}}if(it==qe.lit)throw"hufDecode issues"}}var Tt=8-fe&7;for(Me>>=Tt,de-=Tt;de>0;){var qe=U[Me<<14-de&16383];if(qe.len)de-=qe.len,V(qe.lit,Re,Me,de,$,le,ue,Be,xe,jt),Me=Q.c,de=Q.lc;else throw"hufDecode issues"}return!0}function K(F,U,$,le,ue,fe){var Re={value:0},Ee=$.value,Be=De(U,$),xe=De(U,$);$.value+=4;var Me=De(U,$);if($.value+=4,Be<0||Be>=65537||xe<0||xe>=65537)throw"Something wrong with HUF_ENCSIZE";var de=new Array(65537),jt=new Array(16384);T(jt);var Pe=le-($.value-Ee);if(H(F,U,$,Pe,Be,xe,de),Me>8*(le-($.value-Ee)))throw"Something wrong with hufUncompress";z(de,Be,xe,jt),ae(de,jt,F,U,$,Me,xe,fe,ue,Re)}function re(F,U,$){for(var le=0;le<$;++le)U[le]=F[U[le]]}function he(F){for(var U=1;U<F.length;U++){var $=F[U-1]+F[U]-128;F[U]=$}}function me(F,U){for(var $=0,le=Math.floor((F.length+1)/2),ue=0,fe=F.length-1;!(ue>fe||(U[ue++]=F[$++],ue>fe));)U[ue++]=F[le++]}function J(F){for(var U=F.byteLength,$=new Array,le=0,ue=new DataView(F);U>0;){var fe=ue.getInt8(le++);if(fe<0){var Re=-fe;U-=Re+1;for(var Ee=0;Ee<Re;Ee++)$.push(ue.getUint8(le++))}else{var Re=fe;U-=2;for(var Be=ue.getUint8(le++),Ee=0;Ee<Re+1;Ee++)$.push(Be)}}return $}function oe(F,U,$,le,ue,fe){var Ht=new DataView(fe.buffer),Re=$[F.idx[0]].width,Ee=$[F.idx[0]].height,Be=3,xe=Math.floor(Re/8),Me=Math.ceil(Re/8),de=Math.ceil(Ee/8),jt=Re-(Me-1)*8,Pe=Ee-(de-1)*8,Oe={value:0},qe=new Array(Be),it=new Array(Be),wt=new Array(Be),Tt=new Array(Be),hr=new Array(Be);for(let It=0;It<Be;++It)hr[It]=U[F.idx[It]],qe[It]=It<1?0:qe[It-1]+Me*de,it[It]=new Float32Array(64),wt[It]=new Uint16Array(64),Tt[It]=new Uint16Array(Me*64);for(let It=0;It<de;++It){var ao=8;It==de-1&&(ao=Pe);var St=8;for(let Yt=0;Yt<Me;++Yt){Yt==Me-1&&(St=jt);for(let st=0;st<Be;++st)wt[st].fill(0),wt[st][0]=ue[qe[st]++],ce(Oe,le,wt[st]),ie(wt[st],it[st]),W(it[st]);j(it);for(let st=0;st<Be;++st)ne(it[st],Tt[st],Yt*64)}let Ur=0;for(let Yt=0;Yt<Be;++Yt){let st=$[F.idx[Yt]].type;for(let Ko=8*It;Ko<8*It+ao;++Ko){Ur=hr[Yt][Ko];for(let Bi=0;Bi<xe;++Bi){let qr=Bi*64+(Ko&7)*8;Ht.setUint16(Ur+0*st,Tt[Yt][qr+0],!0),Ht.setUint16(Ur+2*st,Tt[Yt][qr+1],!0),Ht.setUint16(Ur+4*st,Tt[Yt][qr+2],!0),Ht.setUint16(Ur+6*st,Tt[Yt][qr+3],!0),Ht.setUint16(Ur+8*st,Tt[Yt][qr+4],!0),Ht.setUint16(Ur+10*st,Tt[Yt][qr+5],!0),Ht.setUint16(Ur+12*st,Tt[Yt][qr+6],!0),Ht.setUint16(Ur+14*st,Tt[Yt][qr+7],!0),Ur+=16*st}}if(xe!=Me)for(let Ko=8*It;Ko<8*It+ao;++Ko){let Bi=hr[Yt][Ko]+8*xe*2*st,qr=xe*64+(Ko&7)*8;for(let Qi=0;Qi<St;++Qi)Ht.setUint16(Bi+Qi*2*st,Tt[Yt][qr+Qi],!0)}}}for(var fi=new Uint16Array(Re),Ht=new DataView(fe.buffer),kr=0;kr<Be;++kr){$[F.idx[kr]].decoded=!0;var Go=$[F.idx[kr]].type;if($[kr].type==2)for(var qn=0;qn<Ee;++qn){let It=hr[kr][qn];for(var Jr=0;Jr<Re;++Jr)fi[Jr]=Ht.getUint16(It+Jr*2*Go,!0);for(var Jr=0;Jr<Re;++Jr)Ht.setFloat32(It+Jr*2*Go,ye(fi[Jr]),!0)}}}function ce(F,U,$){for(var le,ue=1;ue<64;)le=U[F.value],le==65280?ue=64:le>>8==255?ue+=le&255:($[ue]=le,ue++),F.value++}function ie(F,U){U[0]=ye(F[0]),U[1]=ye(F[1]),U[2]=ye(F[5]),U[3]=ye(F[6]),U[4]=ye(F[14]),U[5]=ye(F[15]),U[6]=ye(F[27]),U[7]=ye(F[28]),U[8]=ye(F[2]),U[9]=ye(F[4]),U[10]=ye(F[7]),U[11]=ye(F[13]),U[12]=ye(F[16]),U[13]=ye(F[26]),U[14]=ye(F[29]),U[15]=ye(F[42]),U[16]=ye(F[3]),U[17]=ye(F[8]),U[18]=ye(F[12]),U[19]=ye(F[17]),U[20]=ye(F[25]),U[21]=ye(F[30]),U[22]=ye(F[41]),U[23]=ye(F[43]),U[24]=ye(F[9]),U[25]=ye(F[11]),U[26]=ye(F[18]),U[27]=ye(F[24]),U[28]=ye(F[31]),U[29]=ye(F[40]),U[30]=ye(F[44]),U[31]=ye(F[53]),U[32]=ye(F[10]),U[33]=ye(F[19]),U[34]=ye(F[23]),U[35]=ye(F[32]),U[36]=ye(F[39]),U[37]=ye(F[45]),U[38]=ye(F[52]),U[39]=ye(F[54]),U[40]=ye(F[20]),U[41]=ye(F[22]),U[42]=ye(F[33]),U[43]=ye(F[38]),U[44]=ye(F[46]),U[45]=ye(F[51]),U[46]=ye(F[55]),U[47]=ye(F[60]),U[48]=ye(F[21]),U[49]=ye(F[34]),U[50]=ye(F[37]),U[51]=ye(F[47]),U[52]=ye(F[50]),U[53]=ye(F[56]),U[54]=ye(F[59]),U[55]=ye(F[61]),U[56]=ye(F[35]),U[57]=ye(F[36]),U[58]=ye(F[48]),U[59]=ye(F[49]),U[60]=ye(F[57]),U[61]=ye(F[58]),U[62]=ye(F[62]),U[63]=ye(F[63])}function W(F){let U=.5*Math.cos(.7853975),$=.5*Math.cos(3.14159/16),le=.5*Math.cos(3.14159/8),ue=.5*Math.cos(3*3.14159/16),fe=.5*Math.cos(5*3.14159/16),Re=.5*Math.cos(3*3.14159/8),Ee=.5*Math.cos(7*3.14159/16);for(var Be=new Array(4),xe=new Array(4),Me=new Array(4),de=new Array(4),jt=0;jt<8;++jt){var Pe=jt*8;Be[0]=le*F[Pe+2],Be[1]=Re*F[Pe+2],Be[2]=le*F[Pe+6],Be[3]=Re*F[Pe+6],xe[0]=$*F[Pe+1]+ue*F[Pe+3]+fe*F[Pe+5]+Ee*F[Pe+7],xe[1]=ue*F[Pe+1]-Ee*F[Pe+3]-$*F[Pe+5]-fe*F[Pe+7],xe[2]=fe*F[Pe+1]-$*F[Pe+3]+Ee*F[Pe+5]+ue*F[Pe+7],xe[3]=Ee*F[Pe+1]-fe*F[Pe+3]+ue*F[Pe+5]-$*F[Pe+7],Me[0]=U*(F[Pe+0]+F[Pe+4]),Me[3]=U*(F[Pe+0]-F[Pe+4]),Me[1]=Be[0]+Be[3],Me[2]=Be[1]-Be[2],de[0]=Me[0]+Me[1],de[1]=Me[3]+Me[2],de[2]=Me[3]-Me[2],de[3]=Me[0]-Me[1],F[Pe+0]=de[0]+xe[0],F[Pe+1]=de[1]+xe[1],F[Pe+2]=de[2]+xe[2],F[Pe+3]=de[3]+xe[3],F[Pe+4]=de[3]-xe[3],F[Pe+5]=de[2]-xe[2],F[Pe+6]=de[1]-xe[1],F[Pe+7]=de[0]-xe[0]}for(var Oe=0;Oe<8;++Oe)Be[0]=le*F[16+Oe],Be[1]=Re*F[16+Oe],Be[2]=le*F[48+Oe],Be[3]=Re*F[48+Oe],xe[0]=$*F[8+Oe]+ue*F[24+Oe]+fe*F[40+Oe]+Ee*F[56+Oe],xe[1]=ue*F[8+Oe]-Ee*F[24+Oe]-$*F[40+Oe]-fe*F[56+Oe],xe[2]=fe*F[8+Oe]-$*F[24+Oe]+Ee*F[40+Oe]+ue*F[56+Oe],xe[3]=Ee*F[8+Oe]-fe*F[24+Oe]+ue*F[40+Oe]-$*F[56+Oe],Me[0]=U*(F[Oe]+F[32+Oe]),Me[3]=U*(F[Oe]-F[32+Oe]),Me[1]=Be[0]+Be[3],Me[2]=Be[1]-Be[2],de[0]=Me[0]+Me[1],de[1]=Me[3]+Me[2],de[2]=Me[3]-Me[2],de[3]=Me[0]-Me[1],F[0+Oe]=de[0]+xe[0],F[8+Oe]=de[1]+xe[1],F[16+Oe]=de[2]+xe[2],F[24+Oe]=de[3]+xe[3],F[32+Oe]=de[3]-xe[3],F[40+Oe]=de[2]-xe[2],F[48+Oe]=de[1]-xe[1],F[56+Oe]=de[0]-xe[0]}function j(F){for(var U=0;U<64;++U){var $=F[0][U],le=F[1][U],ue=F[2][U];F[0][U]=$+1.5747*ue,F[1][U]=$-.1873*le-.4682*ue,F[2][U]=$+1.8556*le}}function ne(F,U,$){for(var le=0;le<64;++le)U[$+le]=M_.toHalfFloat(ve(F[le]))}function ve(F){return F<=1?Math.sign(F)*Math.pow(Math.abs(F),2.2):Math.sign(F)*Math.pow(M,Math.abs(F)-1)}function Ce(F){return new DataView(F.array.buffer,F.offset.value,F.size)}function we(F){var U=F.viewer.buffer.slice(F.offset.value,F.offset.value+F.size),$=new Uint8Array(J(U)),le=new Uint8Array($.length);return he($),me($,le),new DataView(le.buffer)}function be(F){var U=F.array.slice(F.offset.value,F.offset.value+F.size),$=vs(U),le=new Uint8Array($.length);return he($),me($,le),new DataView(le.buffer)}function Qe(F){for(var U=F.viewer,$={value:F.offset.value},le=new Uint16Array(F.width*F.scanlineBlockSize*(F.channels*F.type)),ue=new Uint8Array(8192),fe=0,Re=new Array(F.channels),Ee=0;Ee<F.channels;Ee++)Re[Ee]={},Re[Ee].start=fe,Re[Ee].end=Re[Ee].start,Re[Ee].nx=F.width,Re[Ee].ny=F.lines,Re[Ee].size=F.type,fe+=Re[Ee].nx*Re[Ee].ny*Re[Ee].size;var Be=dt(U,$),xe=dt(U,$);if(xe>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Be<=xe)for(var Ee=0;Ee<xe-Be+1;Ee++)ue[Ee+Be]=ee(U,$);var Me=new Uint16Array(65536),de=x(ue,Me),jt=De(U,$);K(F.array,U,$,jt,le,fe);for(var Ee=0;Ee<F.channels;++Ee)for(var Pe=Re[Ee],Oe=0;Oe<Re[Ee].size;++Oe)q(le,Pe.start+Oe,Pe.nx,Pe.size,Pe.ny,Pe.nx*Pe.size,de);re(Me,le,fe);for(var qe=0,it=new Uint8Array(le.buffer.byteLength),wt=0;wt<F.lines;wt++)for(var Tt=0;Tt<F.channels;Tt++){var Pe=Re[Tt],hr=Pe.nx*Pe.size,ao=new Uint8Array(le.buffer,Pe.end*2,hr*2);it.set(ao,qe),qe+=hr*2,Pe.end+=hr}return new DataView(it.buffer)}function Le(F){var U=F.array.slice(F.offset.value,F.offset.value+F.size),$=vs(U);let le=F.lines*F.channels*F.width,ue=F.type==1?new Uint16Array(le):new Uint32Array(le),fe=0,Re=0,Ee=new Array(4);for(let Be=0;Be<F.lines;Be++)for(let xe=0;xe<F.channels;xe++){let Me=0;switch(F.type){case 1:Ee[0]=fe,Ee[1]=Ee[0]+F.width,fe=Ee[1]+F.width;for(let de=0;de<F.width;++de){let jt=$[Ee[0]++]<<8|$[Ee[1]++];Me+=jt,ue[Re]=Me,Re++}break;case 2:Ee[0]=fe,Ee[1]=Ee[0]+F.width,Ee[2]=Ee[1]+F.width,fe=Ee[2]+F.width;for(let de=0;de<F.width;++de){let jt=$[Ee[0]++]<<24|$[Ee[1]++]<<16|$[Ee[2]++]<<8;Me+=jt,ue[Re]=Me,Re++}break}}return new DataView(ue.buffer)}function Fe(F){var U=F.viewer,$={value:F.offset.value},le=new Uint8Array(F.width*F.lines*(F.channels*F.type*2)),ue={version:Ae(U,$),unknownUncompressedSize:Ae(U,$),unknownCompressedSize:Ae(U,$),acCompressedSize:Ae(U,$),dcCompressedSize:Ae(U,$),rleCompressedSize:Ae(U,$),rleUncompressedSize:Ae(U,$),rleRawSize:Ae(U,$),totalAcUncompressedCount:Ae(U,$),totalDcUncompressedCount:Ae(U,$),acCompression:Ae(U,$)};if(ue.version<2)throw"EXRLoader.parse: "+Br.compression+" version "+ue.version+" is unsupported";for(var fe=new Array,Re=dt(U,$)-2;Re>0;){var Ee=Ge(U.buffer,$),Be=ee(U,$),xe=Be>>2&3,Me=(Be>>4)-1,de=new Int8Array([Me])[0],jt=ee(U,$);fe.push({name:Ee,index:de,type:jt,compression:xe}),Re-=Ee.length+3}for(var Pe=Br.channels,Oe=new Array(F.channels),qe=0;qe<F.channels;++qe){var it=Oe[qe]={},wt=Pe[qe];it.name=wt.name,it.compression=0,it.decoded=!1,it.type=wt.pixelType,it.pLinear=wt.pLinear,it.width=F.width,it.height=F.lines}for(var Tt={idx:new Array(3)},hr=0;hr<F.channels;++hr)for(var it=Oe[hr],qe=0;qe<fe.length;++qe){var ao=fe[qe];it.name==ao.name&&(it.compression=ao.compression,ao.index>=0&&(Tt.idx[ao.index]=hr),it.offset=hr)}if(ue.acCompressedSize>0)switch(ue.acCompression){case 0:var Ht=new Uint16Array(ue.totalAcUncompressedCount);K(F.array,U,$,ue.acCompressedSize,Ht,ue.totalAcUncompressedCount);break;case 1:var St=F.array.slice($.value,$.value+ue.totalAcUncompressedCount),fi=vs(St),Ht=new Uint16Array(fi.buffer);$.value+=ue.totalAcUncompressedCount;break}if(ue.dcCompressedSize>0){var kr={array:F.array,offset:$,size:ue.dcCompressedSize},Go=new Uint16Array(be(kr).buffer);$.value+=ue.dcCompressedSize}if(ue.rleRawSize>0){var St=F.array.slice($.value,$.value+ue.rleCompressedSize),fi=vs(St),qn=J(fi.buffer);$.value+=ue.rleCompressedSize}for(var Jr=0,It=new Array(Oe.length),qe=0;qe<It.length;++qe)It[qe]=new Array;for(var Ur=0;Ur<F.lines;++Ur)for(var Yt=0;Yt<Oe.length;++Yt)It[Yt].push(Jr),Jr+=Oe[Yt].width*F.type*2;oe(Tt,It,Oe,Ht,Go,le);for(var qe=0;qe<Oe.length;++qe){var it=Oe[qe];if(!it.decoded)switch(it.compression){case 2:for(var st=0,Ko=0,Ur=0;Ur<F.lines;++Ur){for(var Bi=It[qe][st],qr=0;qr<it.width;++qr){for(var Qi=0;Qi<2*it.type;++Qi)le[Bi++]=qn[Ko+Qi*it.width*it.height];Ko++}st++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(le.buffer)}function Ge(F,U){for(var $=new Uint8Array(F),le=0;$[U.value+le]!=0;)le+=1;var ue=new TextDecoder().decode($.slice(U.value,U.value+le));return U.value=U.value+le+1,ue}function et(F,U,$){var le=new TextDecoder().decode(new Uint8Array(F).slice(U.value,U.value+$));return U.value=U.value+$,le}function gt(F,U){var $=pt(F,U),le=De(F,U);return[$,le]}function je(F,U){var $=De(F,U),le=De(F,U);return[$,le]}function pt(F,U){var $=F.getInt32(U.value,!0);return U.value=U.value+4,$}function De(F,U){var $=F.getUint32(U.value,!0);return U.value=U.value+4,$}function ze(F,U){var $=F[U.value];return U.value=U.value+1,$}function ee(F,U){var $=F.getUint8(U.value);return U.value=U.value+1,$}let Ae=function(F,U){let $;return"getBigInt64"in DataView.prototype?$=Number(F.getBigInt64(U.value,!0)):$=F.getUint32(U.value+4,!0)+Number(F.getUint32(U.value,!0)<<32),U.value+=8,$};function _e(F,U){var $=F.getFloat32(U.value,!0);return U.value+=4,$}function Ie(F,U){return M_.toHalfFloat(_e(F,U))}function ye(F){var U=(F&31744)>>10,$=F&1023;return(F>>15?-1:1)*(U?U===31?$?NaN:1/0:Math.pow(2,U-15)*(1+$/1024):6103515625e-14*($/1024))}function dt(F,U){var $=F.getUint16(U.value,!0);return U.value+=2,$}function nr(F,U){return ye(dt(F,U))}function Bn(F,U,$,le){for(var ue=$.value,fe=[];$.value<ue+le-1;){var Re=Ge(U,$),Ee=pt(F,$),Be=ee(F,$);$.value+=3;var xe=pt(F,$),Me=pt(F,$);fe.push({name:Re,pixelType:Ee,pLinear:Be,xSampling:xe,ySampling:Me})}return $.value+=1,fe}function ci(F,U){var $=_e(F,U),le=_e(F,U),ue=_e(F,U),fe=_e(F,U),Re=_e(F,U),Ee=_e(F,U),Be=_e(F,U),xe=_e(F,U);return{redX:$,redY:le,greenX:ue,greenY:fe,blueX:Re,blueY:Ee,whiteX:Be,whiteY:xe}}function gr(F,U){var $=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],le=ee(F,U);return $[le]}function dr(F,U){var $=De(F,U),le=De(F,U),ue=De(F,U),fe=De(F,U);return{xMin:$,yMin:le,xMax:ue,yMax:fe}}function Lt(F,U){var $=["INCREASING_Y"],le=ee(F,U);return $[le]}function di(F,U){var $=_e(F,U),le=_e(F,U);return[$,le]}function Nt(F,U){var $=_e(F,U),le=_e(F,U),ue=_e(F,U);return[$,le,ue]}function Ut(F,U,$,le,ue){if(le==="string"||le==="stringvector"||le==="iccProfile")return et(U,$,ue);if(le==="chlist")return Bn(F,U,$,ue);if(le==="chromaticities")return ci(F,$);if(le==="compression")return gr(F,$);if(le==="box2i")return dr(F,$);if(le==="lineOrder")return Lt(F,$);if(le==="float")return _e(F,$);if(le==="v2f")return di(F,$);if(le==="v3f")return Nt(F,$);if(le==="int")return pt(F,$);if(le==="rational")return gt(F,$);if(le==="timecode")return je(F,$);if(le==="preview")return $.value+=ue,"skipped";$.value+=ue}function ui(F,U,$){let le={};if(F.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";le.version=F.getUint8(4);let ue=F.getUint8(5);le.spec={singleTile:!!(ue&2),longName:!!(ue&4),deepFormat:!!(ue&8),multiPart:!!(ue&16)},$.value=8;for(var fe=!0;fe;){var Re=Ge(U,$);if(Re==0)fe=!1;else{var Ee=Ge(U,$),Be=De(F,$),xe=Ut(F,U,$,Ee,Be);xe===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Ee}'.`):le[Re]=xe}}if((ue&-5)!=0)throw console.error("EXRHeader:",le),"THREE.EXRLoader: provided file is currently unsupported.";return le}function Po(F,U,$,le,ue){let fe={size:0,viewer:U,array:$,offset:le,width:F.dataWindow.xMax-F.dataWindow.xMin+1,height:F.dataWindow.yMax-F.dataWindow.yMin+1,channels:F.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:F.channels[0].pixelType,uncompress:null,getter:null,format:null,[yd?"colorSpace":"encoding"]:null};switch(F.compression){case"NO_COMPRESSION":fe.lines=1,fe.uncompress=Ce;break;case"RLE_COMPRESSION":fe.lines=1,fe.uncompress=we;break;case"ZIPS_COMPRESSION":fe.lines=1,fe.uncompress=be;break;case"ZIP_COMPRESSION":fe.lines=16,fe.uncompress=be;break;case"PIZ_COMPRESSION":fe.lines=32,fe.uncompress=Qe;break;case"PXR24_COMPRESSION":fe.lines=16,fe.uncompress=Le;break;case"DWAA_COMPRESSION":fe.lines=32,fe.uncompress=Fe;break;case"DWAB_COMPRESSION":fe.lines=256,fe.uncompress=Fe;break;default:throw"EXRLoader.parse: "+F.compression+" is unsupported"}if(fe.scanlineBlockSize=fe.lines,fe.type==1)switch(ue){case AA:fe.getter=nr,fe.inputSize=2;break;case Kf:fe.getter=dt,fe.inputSize=2;break}else if(fe.type==2)switch(ue){case AA:fe.getter=_e,fe.inputSize=4;break;case Kf:fe.getter=Ie,fe.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+fe.type+" for "+F.compression+".";fe.blockCount=(F.dataWindow.yMax+1)/fe.scanlineBlockSize;for(var Re=0;Re<fe.blockCount;Re++)Ae(U,le);fe.outputChannels=fe.channels==3?4:fe.channels;let Ee=fe.width*fe.height*fe.outputChannels;switch(ue){case AA:fe.byteArray=new Float32Array(Ee),fe.channels<fe.outputChannels&&fe.byteArray.fill(1,0,Ee);break;case Kf:fe.byteArray=new Uint16Array(Ee),fe.channels<fe.outputChannels&&fe.byteArray.fill(15360,0,Ee);break;default:console.error("THREE.EXRLoader: unsupported type: ",ue);break}return fe.bytesPerLine=fe.width*fe.inputSize*fe.channels,fe.outputChannels==4?fe.format=e7:fe.format=t7,yd?fe.colorSpace="srgb-linear":fe.encoding=3e3,fe}let Rt=new DataView(e),Xr=new Uint8Array(e),io={value:0},Br=ui(Rt,e,io),Ue=Po(Br,Rt,Xr,io,this.type),no={value:0},xn={R:0,G:1,B:2,A:3,Y:0};for(let F=0;F<Ue.height/Ue.scanlineBlockSize;F++){let U=De(Rt,io);Ue.size=De(Rt,io),Ue.lines=U+Ue.scanlineBlockSize>Ue.height?Ue.height-U:Ue.scanlineBlockSize;let le=Ue.size<Ue.lines*Ue.bytesPerLine?Ue.uncompress(Ue):Ce(Ue);io.value+=Ue.size;for(let ue=0;ue<Ue.scanlineBlockSize;ue++){let fe=ue+F*Ue.scanlineBlockSize;if(fe>=Ue.height)break;for(let Re=0;Re<Ue.channels;Re++){let Ee=xn[Br.channels[Re].name];for(let Be=0;Be<Ue.width;Be++){no.value=(ue*(Ue.channels*Ue.width)+Re*Ue.width+Be)*Ue.inputSize;let xe=(Ue.height-1-fe)*(Ue.width*Ue.outputChannels)+Be*Ue.outputChannels+Ee;Ue.byteArray[xe]=Ue.getter(le,no)}}}}return{header:Br,width:Ue.width,height:Ue.height,data:Ue.byteArray,format:Ue.format,[yd?"colorSpace":"encoding"]:Ue[yd?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,r,n,i){function o(s,p){yd?s.colorSpace=p.colorSpace:s.encoding=p.encoding,s.minFilter=x_,s.magFilter=x_,s.generateMipmaps=!1,s.flipY=!1,r&&r(s,p)}return super.load(e,o,n,i)}};import{Loader as r7,FileLoader as o7,Matrix3 as zp,Vector2 as Kt,Vector3 as Xf,ShapeUtils as i7,Box2 as n7,Shape as a7,Path as yA,BufferGeometry as s7,Float32BufferAttribute as vA,ShapePath as Fs}from"three";var p7="srgb",Ed=(()=>{class t extends r7{constructor(r){super(r),this.defaultDPI=90,this.defaultUnit="px"}load(r,n,i,o){let s=this,p=new o7(s.manager);p.setPath(s.path),p.setRequestHeader(s.requestHeader),p.setWithCredentials(s.withCredentials),p.load(r,function(l){try{n(s.parse(l))}catch(c){o?o(c):console.error(c),s.manager.itemError(r)}},i,o)}parse(r){let n=this;function i(P,k){if(P.nodeType!==1)return;let O=_(P),D=!1,q=null;switch(P.nodeName){case"svg":k=A(P,k);break;case"style":s(P);break;case"g":k=A(P,k);break;case"path":k=A(P,k),P.hasAttribute("d")&&(q=o(P));break;case"rect":k=A(P,k),q=c(P);break;case"polygon":k=A(P,k),q=u(P);break;case"polyline":k=A(P,k),q=d(P);break;case"circle":k=A(P,k),q=f(P);break;case"ellipse":k=A(P,k),q=g(P);break;case"line":k=A(P,k),q=v(P);break;case"defs":D=!0;break;case"use":k=A(P,k);let re=(P.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),he=P.viewportElement.getElementById(re);he?i(he,k):console.warn("SVGLoader: 'use node' references non-existent node id: "+re);break}q&&(k.fill!==void 0&&k.fill!=="none"&&q.color.setStyle(k.fill,p7),B(q,Q),S.push(q),q.userData={node:P,style:k});let ae=P.childNodes;for(let K=0;K<ae.length;K++){let re=ae[K];D&&re.nodeName!=="style"&&re.nodeName!=="defs"||i(re,k)}O&&(G.pop(),G.length>0?Q.copy(G[G.length-1]):Q.identity())}function o(P){let k=new Fs,O=new Kt,D=new Kt,q=new Kt,ae=!0,K=!1,re=P.getAttribute("d");if(re===""||re==="none")return null;let he=re.match(/[a-df-z][^a-df-z]*/gi);for(let me=0,J=he.length;me<J;me++){let oe=he[me],ce=oe.charAt(0),ie=oe.slice(1).trim();ae===!0&&(K=!0,ae=!1);let W;switch(ce){case"M":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=2)O.x=W[j+0],O.y=W[j+1],D.x=O.x,D.y=O.y,j===0?k.moveTo(O.x,O.y):k.lineTo(O.x,O.y),j===0&&q.copy(O);break;case"H":W=h(ie);for(let j=0,ne=W.length;j<ne;j++)O.x=W[j],D.x=O.x,D.y=O.y,k.lineTo(O.x,O.y),j===0&&K===!0&&q.copy(O);break;case"V":W=h(ie);for(let j=0,ne=W.length;j<ne;j++)O.y=W[j],D.x=O.x,D.y=O.y,k.lineTo(O.x,O.y),j===0&&K===!0&&q.copy(O);break;case"L":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=2)O.x=W[j+0],O.y=W[j+1],D.x=O.x,D.y=O.y,k.lineTo(O.x,O.y),j===0&&K===!0&&q.copy(O);break;case"C":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=6)k.bezierCurveTo(W[j+0],W[j+1],W[j+2],W[j+3],W[j+4],W[j+5]),D.x=W[j+2],D.y=W[j+3],O.x=W[j+4],O.y=W[j+5],j===0&&K===!0&&q.copy(O);break;case"S":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=4)k.bezierCurveTo(m(O.x,D.x),m(O.y,D.y),W[j+0],W[j+1],W[j+2],W[j+3]),D.x=W[j+0],D.y=W[j+1],O.x=W[j+2],O.y=W[j+3],j===0&&K===!0&&q.copy(O);break;case"Q":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=4)k.quadraticCurveTo(W[j+0],W[j+1],W[j+2],W[j+3]),D.x=W[j+0],D.y=W[j+1],O.x=W[j+2],O.y=W[j+3],j===0&&K===!0&&q.copy(O);break;case"T":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=2){let ve=m(O.x,D.x),Ce=m(O.y,D.y);k.quadraticCurveTo(ve,Ce,W[j+0],W[j+1]),D.x=ve,D.y=Ce,O.x=W[j+0],O.y=W[j+1],j===0&&K===!0&&q.copy(O)}break;case"A":W=h(ie,[3,4],7);for(let j=0,ne=W.length;j<ne;j+=7){if(W[j+5]==O.x&&W[j+6]==O.y)continue;let ve=O.clone();O.x=W[j+5],O.y=W[j+6],D.x=O.x,D.y=O.y,p(k,W[j],W[j+1],W[j+2],W[j+3],W[j+4],ve,O),j===0&&K===!0&&q.copy(O)}break;case"m":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=2)O.x+=W[j+0],O.y+=W[j+1],D.x=O.x,D.y=O.y,j===0?k.moveTo(O.x,O.y):k.lineTo(O.x,O.y),j===0&&q.copy(O);break;case"h":W=h(ie);for(let j=0,ne=W.length;j<ne;j++)O.x+=W[j],D.x=O.x,D.y=O.y,k.lineTo(O.x,O.y),j===0&&K===!0&&q.copy(O);break;case"v":W=h(ie);for(let j=0,ne=W.length;j<ne;j++)O.y+=W[j],D.x=O.x,D.y=O.y,k.lineTo(O.x,O.y),j===0&&K===!0&&q.copy(O);break;case"l":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=2)O.x+=W[j+0],O.y+=W[j+1],D.x=O.x,D.y=O.y,k.lineTo(O.x,O.y),j===0&&K===!0&&q.copy(O);break;case"c":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=6)k.bezierCurveTo(O.x+W[j+0],O.y+W[j+1],O.x+W[j+2],O.y+W[j+3],O.x+W[j+4],O.y+W[j+5]),D.x=O.x+W[j+2],D.y=O.y+W[j+3],O.x+=W[j+4],O.y+=W[j+5],j===0&&K===!0&&q.copy(O);break;case"s":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=4)k.bezierCurveTo(m(O.x,D.x),m(O.y,D.y),O.x+W[j+0],O.y+W[j+1],O.x+W[j+2],O.y+W[j+3]),D.x=O.x+W[j+0],D.y=O.y+W[j+1],O.x+=W[j+2],O.y+=W[j+3],j===0&&K===!0&&q.copy(O);break;case"q":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=4)k.quadraticCurveTo(O.x+W[j+0],O.y+W[j+1],O.x+W[j+2],O.y+W[j+3]),D.x=O.x+W[j+0],D.y=O.y+W[j+1],O.x+=W[j+2],O.y+=W[j+3],j===0&&K===!0&&q.copy(O);break;case"t":W=h(ie);for(let j=0,ne=W.length;j<ne;j+=2){let ve=m(O.x,D.x),Ce=m(O.y,D.y);k.quadraticCurveTo(ve,Ce,O.x+W[j+0],O.y+W[j+1]),D.x=ve,D.y=Ce,O.x=O.x+W[j+0],O.y=O.y+W[j+1],j===0&&K===!0&&q.copy(O)}break;case"a":W=h(ie,[3,4],7);for(let j=0,ne=W.length;j<ne;j+=7){if(W[j+5]==0&&W[j+6]==0)continue;let ve=O.clone();O.x+=W[j+5],O.y+=W[j+6],D.x=O.x,D.y=O.y,p(k,W[j],W[j+1],W[j+2],W[j+3],W[j+4],ve,O),j===0&&K===!0&&q.copy(O)}break;case"Z":case"z":k.currentPath.autoClose=!0,k.currentPath.curves.length>0&&(O.copy(q),k.currentPath.currentPoint.copy(O),ae=!0);break;default:console.warn(oe)}K=!1}return k}function s(P){if(!(!P.sheet||!P.sheet.cssRules||!P.sheet.cssRules.length))for(let k=0;k<P.sheet.cssRules.length;k++){let O=P.sheet.cssRules[k];if(O.type!==1)continue;let D=O.selectorText.split(/,/gm).filter(Boolean).map(q=>q.trim());for(let q=0;q<D.length;q++){let ae=Object.fromEntries(Object.entries(O.style).filter(([,K])=>K!==""));I[D[q]]=Object.assign(I[D[q]]||{},ae)}}}function p(P,k,O,D,q,ae,K,re){if(k==0||O==0){P.lineTo(re.x,re.y);return}D=D*Math.PI/180,k=Math.abs(k),O=Math.abs(O);let he=(K.x-re.x)/2,me=(K.y-re.y)/2,J=Math.cos(D)*he+Math.sin(D)*me,oe=-Math.sin(D)*he+Math.cos(D)*me,ce=k*k,ie=O*O,W=J*J,j=oe*oe,ne=W/ce+j/ie;if(ne>1){let gt=Math.sqrt(ne);k=gt*k,O=gt*O,ce=k*k,ie=O*O}let ve=ce*j+ie*W,Ce=(ce*ie-ve)/ve,we=Math.sqrt(Math.max(0,Ce));q===ae&&(we=-we);let be=we*k*oe/O,Qe=-we*O*J/k,Le=Math.cos(D)*be-Math.sin(D)*Qe+(K.x+re.x)/2,Fe=Math.sin(D)*be+Math.cos(D)*Qe+(K.y+re.y)/2,Ge=l(1,0,(J-be)/k,(oe-Qe)/O),et=l((J-be)/k,(oe-Qe)/O,(-J-be)/k,(-oe-Qe)/O)%(Math.PI*2);P.currentPath.absellipse(Le,Fe,k,O,Ge,Ge+et,ae===0,D)}function l(P,k,O,D){let q=P*O+k*D,ae=Math.sqrt(P*P+k*k)*Math.sqrt(O*O+D*D),K=Math.acos(Math.max(-1,Math.min(1,q/ae)));return P*D-k*O<0&&(K=-K),K}function c(P){let k=b(P.getAttribute("x")||0),O=b(P.getAttribute("y")||0),D=b(P.getAttribute("rx")||P.getAttribute("ry")||0),q=b(P.getAttribute("ry")||P.getAttribute("rx")||0),ae=b(P.getAttribute("width")),K=b(P.getAttribute("height")),re=1-.551915024494,he=new Fs;return he.moveTo(k+D,O),he.lineTo(k+ae-D,O),(D!==0||q!==0)&&he.bezierCurveTo(k+ae-D*re,O,k+ae,O+q*re,k+ae,O+q),he.lineTo(k+ae,O+K-q),(D!==0||q!==0)&&he.bezierCurveTo(k+ae,O+K-q*re,k+ae-D*re,O+K,k+ae-D,O+K),he.lineTo(k+D,O+K),(D!==0||q!==0)&&he.bezierCurveTo(k+D*re,O+K,k,O+K-q*re,k,O+K-q),he.lineTo(k,O+q),(D!==0||q!==0)&&he.bezierCurveTo(k,O+q*re,k+D*re,O,k+D,O),he}function u(P){function k(ae,K,re){let he=b(K),me=b(re);q===0?D.moveTo(he,me):D.lineTo(he,me),q++}let O=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,D=new Fs,q=0;return P.getAttribute("points").replace(O,k),D.currentPath.autoClose=!0,D}function d(P){function k(ae,K,re){let he=b(K),me=b(re);q===0?D.moveTo(he,me):D.lineTo(he,me),q++}let O=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,D=new Fs,q=0;return P.getAttribute("points").replace(O,k),D.currentPath.autoClose=!1,D}function f(P){let k=b(P.getAttribute("cx")||0),O=b(P.getAttribute("cy")||0),D=b(P.getAttribute("r")||0),q=new yA;q.absarc(k,O,D,0,Math.PI*2);let ae=new Fs;return ae.subPaths.push(q),ae}function g(P){let k=b(P.getAttribute("cx")||0),O=b(P.getAttribute("cy")||0),D=b(P.getAttribute("rx")||0),q=b(P.getAttribute("ry")||0),ae=new yA;ae.absellipse(k,O,D,q,0,Math.PI*2);let K=new Fs;return K.subPaths.push(ae),K}function v(P){let k=b(P.getAttribute("x1")||0),O=b(P.getAttribute("y1")||0),D=b(P.getAttribute("x2")||0),q=b(P.getAttribute("y2")||0),ae=new Fs;return ae.moveTo(k,O),ae.lineTo(D,q),ae.currentPath.autoClose=!1,ae}function A(P,k){k=Object.assign({},k);let O={};if(P.hasAttribute("class")){let K=P.getAttribute("class").split(/\s/).filter(Boolean).map(re=>re.trim());for(let re=0;re<K.length;re++)O=Object.assign(O,I["."+K[re]])}P.hasAttribute("id")&&(O=Object.assign(O,I["#"+P.getAttribute("id")]));function D(K,re,he){he===void 0&&(he=function(J){return J.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),J}),P.hasAttribute(K)&&(k[re]=he(P.getAttribute(K))),O[K]&&(k[re]=he(O[K])),P.style&&P.style[K]!==""&&(k[re]=he(P.style[K]))}function q(K){return Math.max(0,Math.min(1,b(K)))}function ae(K){return Math.max(0,b(K))}return D("fill","fill"),D("fill-opacity","fillOpacity",q),D("fill-rule","fillRule"),D("opacity","opacity",q),D("stroke","stroke"),D("stroke-opacity","strokeOpacity",q),D("stroke-width","strokeWidth",ae),D("stroke-linejoin","strokeLineJoin"),D("stroke-linecap","strokeLineCap"),D("stroke-miterlimit","strokeMiterLimit",ae),D("visibility","visibility"),k}function m(P,k){return P-(k-P)}function h(P,k,O){if(typeof P!="string")throw new TypeError("Invalid input: "+typeof P);let D={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},q=0,ae=1,K=2,re=3,he=q,me=!0,J="",oe="",ce=[];function ie(ve,Ce,we){let be=new SyntaxError('Unexpected character "'+ve+'" at index '+Ce+".");throw be.partial=we,be}function W(){J!==""&&(oe===""?ce.push(Number(J)):ce.push(Number(J)*Math.pow(10,Number(oe)))),J="",oe=""}let j,ne=P.length;for(let ve=0;ve<ne;ve++){if(j=P[ve],Array.isArray(k)&&k.includes(ce.length%O)&&D.FLAGS.test(j)){he=ae,J=j,W();continue}if(he===q){if(D.WHITESPACE.test(j))continue;if(D.DIGIT.test(j)||D.SIGN.test(j)){he=ae,J=j;continue}if(D.POINT.test(j)){he=K,J=j;continue}D.COMMA.test(j)&&(me&&ie(j,ve,ce),me=!0)}if(he===ae){if(D.DIGIT.test(j)){J+=j;continue}if(D.POINT.test(j)){J+=j,he=K;continue}if(D.EXP.test(j)){he=re;continue}D.SIGN.test(j)&&J.length===1&&D.SIGN.test(J[0])&&ie(j,ve,ce)}if(he===K){if(D.DIGIT.test(j)){J+=j;continue}if(D.EXP.test(j)){he=re;continue}D.POINT.test(j)&&J[J.length-1]==="."&&ie(j,ve,ce)}if(he===re){if(D.DIGIT.test(j)){oe+=j;continue}if(D.SIGN.test(j)){if(oe===""){oe+=j;continue}oe.length===1&&D.SIGN.test(oe)&&ie(j,ve,ce)}}D.WHITESPACE.test(j)?(W(),he=q,me=!1):D.COMMA.test(j)?(W(),he=q,me=!0):D.SIGN.test(j)?(W(),he=ae,J=j):D.POINT.test(j)?(W(),he=K,J=j):ie(j,ve,ce)}return W(),ce}let y=["mm","cm","in","pt","pc","px"],E={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function b(P){let k="px";if(typeof P=="string"||P instanceof String)for(let D=0,q=y.length;D<q;D++){let ae=y[D];if(P.endsWith(ae)){k=ae,P=P.substring(0,P.length-ae.length);break}}let O;return k==="px"&&n.defaultUnit!=="px"?O=E.in[n.defaultUnit]/n.defaultDPI:(O=E[k][n.defaultUnit],O<0&&(O=E[k].in*n.defaultDPI)),O*parseFloat(P)}function _(P){if(!(P.hasAttribute("transform")||P.nodeName==="use"&&(P.hasAttribute("x")||P.hasAttribute("y"))))return null;let k=C(P);return G.length>0&&k.premultiply(G[G.length-1]),Q.copy(k),G.push(k),k}function C(P){let k=new zp,O=H;if(P.nodeName==="use"&&(P.hasAttribute("x")||P.hasAttribute("y"))){let D=b(P.getAttribute("x")),q=b(P.getAttribute("y"));k.translate(D,q)}if(P.hasAttribute("transform")){let D=P.getAttribute("transform").split(")");for(let q=D.length-1;q>=0;q--){let ae=D[q].trim();if(ae==="")continue;let K=ae.indexOf("("),re=ae.length;if(K>0&&K<re){let he=ae.slice(0,K),me=h(ae.slice(K+1));switch(O.identity(),he){case"translate":if(me.length>=1){let J=me[0],oe=0;me.length>=2&&(oe=me[1]),O.translate(J,oe)}break;case"rotate":if(me.length>=1){let J=0,oe=0,ce=0;J=me[0]*Math.PI/180,me.length>=3&&(oe=me[1],ce=me[2]),X.makeTranslation(-oe,-ce),Z.makeRotation(J),z.multiplyMatrices(Z,X),X.makeTranslation(oe,ce),O.multiplyMatrices(X,z)}break;case"scale":if(me.length>=1){let J=me[0],oe=J;me.length>=2&&(oe=me[1]),O.scale(J,oe)}break;case"skewX":me.length===1&&O.set(1,Math.tan(me[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":me.length===1&&O.set(1,0,0,Math.tan(me[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":me.length===6&&O.set(me[0],me[2],me[4],me[1],me[3],me[5],0,0,1);break}}k.premultiply(O)}}return k}function B(P,k){function O(K){L.set(K.x,K.y,1).applyMatrix3(k),K.set(L.x,L.y)}function D(K){let re=K.xRadius,he=K.yRadius,me=Math.cos(K.aRotation),J=Math.sin(K.aRotation),oe=new Xf(re*me,re*J,0),ce=new Xf(-he*J,he*me,0),ie=oe.applyMatrix3(k),W=ce.applyMatrix3(k),j=H.set(ie.x,W.x,0,ie.y,W.y,0,0,0,1),ne=X.copy(j).invert(),we=Z.copy(ne).transpose().multiply(ne).elements,be=w(we[0],we[1],we[4]),Qe=Math.sqrt(be.rt1),Le=Math.sqrt(be.rt2);if(K.xRadius=1/Qe,K.yRadius=1/Le,K.aRotation=Math.atan2(be.sn,be.cs),!((K.aEndAngle-K.aStartAngle)%(2*Math.PI)<Number.EPSILON)){let Ge=X.set(Qe,0,0,0,Le,0,0,0,1),et=Z.set(be.cs,be.sn,0,-be.sn,be.cs,0,0,0,1),gt=Ge.multiply(et).multiply(j),je=pt=>{let{x:De,y:ze}=new Xf(Math.cos(pt),Math.sin(pt),0).applyMatrix3(gt);return Math.atan2(ze,De)};K.aStartAngle=je(K.aStartAngle),K.aEndAngle=je(K.aEndAngle),R(k)&&(K.aClockwise=!K.aClockwise)}}function q(K){let re=x(k),he=T(k);K.xRadius*=re,K.yRadius*=he;let me=re>Number.EPSILON?Math.atan2(k.elements[1],k.elements[0]):Math.atan2(-k.elements[3],k.elements[4]);K.aRotation+=me,R(k)&&(K.aStartAngle*=-1,K.aEndAngle*=-1,K.aClockwise=!K.aClockwise)}let ae=P.subPaths;for(let K=0,re=ae.length;K<re;K++){let me=ae[K].curves;for(let J=0;J<me.length;J++){let oe=me[J];oe.isLineCurve?(O(oe.v1),O(oe.v2)):oe.isCubicBezierCurve?(O(oe.v0),O(oe.v1),O(oe.v2),O(oe.v3)):oe.isQuadraticBezierCurve?(O(oe.v0),O(oe.v1),O(oe.v2)):oe.isEllipseCurve&&(Y.set(oe.aX,oe.aY),O(Y),oe.aX=Y.x,oe.aY=Y.y,M(k)?D(oe):q(oe))}}}function R(P){let k=P.elements;return k[0]*k[4]-k[1]*k[3]<0}function M(P){let k=P.elements,O=k[0]*k[3]+k[1]*k[4];if(O===0)return!1;let D=x(P),q=T(P);return Math.abs(O/(D*q))>Number.EPSILON}function x(P){let k=P.elements;return Math.sqrt(k[0]*k[0]+k[1]*k[1])}function T(P){let k=P.elements;return Math.sqrt(k[3]*k[3]+k[4]*k[4])}function w(P,k,O){let D,q,ae,K,re,he=P+O,me=P-O,J=Math.sqrt(me*me+4*k*k);return he>0?(D=.5*(he+J),re=1/D,q=P*re*O-k*re*k):he<0?q=.5*(he-J):(D=.5*J,q=-.5*J),me>0?ae=me+J:ae=me-J,Math.abs(ae)>2*Math.abs(k)?(re=-2*k/ae,K=1/Math.sqrt(1+re*re),ae=re*K):Math.abs(k)===0?(ae=1,K=0):(re=-.5*ae/k,ae=1/Math.sqrt(1+re*re),K=re*ae),me>0&&(re=ae,ae=-K,K=re),{rt1:D,rt2:q,cs:ae,sn:K}}let S=[],I={},G=[],H=new zp,X=new zp,Z=new zp,z=new zp,Y=new Kt,L=new Xf,Q=new zp,V=new DOMParser().parseFromString(r,"image/svg+xml");return i(V.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:S,xml:V.documentElement}}static createShapes(r){let i={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},o={loc:i.ORIGIN,t:0};function s(m,h,y,E){let b=m.x,_=h.x,C=y.x,B=E.x,R=m.y,M=h.y,x=y.y,T=E.y,w=(B-C)*(R-x)-(T-x)*(b-C),S=(_-b)*(R-x)-(M-R)*(b-C),I=(T-x)*(_-b)-(B-C)*(M-R),G=w/I,H=S/I;if(I===0&&w!==0||G<=0||G>=1||H<0||H>1)return null;if(w===0&&I===0){for(let X=0;X<2;X++)if(p(X===0?y:E,m,h),o.loc==i.ORIGIN){let Z=X===0?y:E;return{x:Z.x,y:Z.y,t:o.t}}else if(o.loc==i.BETWEEN){let Z=+(b+o.t*(_-b)).toPrecision(10),z=+(R+o.t*(M-R)).toPrecision(10);return{x:Z,y:z,t:o.t}}return null}else{for(let z=0;z<2;z++)if(p(z===0?y:E,m,h),o.loc==i.ORIGIN){let Y=z===0?y:E;return{x:Y.x,y:Y.y,t:o.t}}let X=+(b+G*(_-b)).toPrecision(10),Z=+(R+G*(M-R)).toPrecision(10);return{x:X,y:Z,t:G}}}function p(m,h,y){let E=y.x-h.x,b=y.y-h.y,_=m.x-h.x,C=m.y-h.y,B=E*C-_*b;if(m.x===h.x&&m.y===h.y){o.loc=i.ORIGIN,o.t=0;return}if(m.x===y.x&&m.y===y.y){o.loc=i.DESTINATION,o.t=1;return}if(B<-Number.EPSILON){o.loc=i.LEFT;return}if(B>Number.EPSILON){o.loc=i.RIGHT;return}if(E*_<0||b*C<0){o.loc=i.BEHIND;return}if(Math.sqrt(E*E+b*b)<Math.sqrt(_*_+C*C)){o.loc=i.BEYOND;return}let R;E!==0?R=_/E:R=C/b,o.loc=i.BETWEEN,o.t=R}function l(m,h){let y=[],E=[];for(let b=1;b<m.length;b++){let _=m[b-1],C=m[b];for(let B=1;B<h.length;B++){let R=h[B-1],M=h[B],x=s(_,C,R,M);x!==null&&y.find(T=>T.t<=x.t+Number.EPSILON&&T.t>=x.t-Number.EPSILON)===void 0&&(y.push(x),E.push(new Kt(x.x,x.y)))}}return E}function c(m,h,y){let E=new Kt;h.getCenter(E);let b=[];return y.forEach(_=>{_.boundingBox.containsPoint(E)&&l(m,_.points).forEach(B=>{b.push({identifier:_.identifier,isCW:_.isCW,point:B})})}),b.sort((_,C)=>_.point.x-C.point.x),b}function u(m,h,y,E,b){(b==null||b==="")&&(b="nonzero");let _=new Kt;m.boundingBox.getCenter(_);let C=[new Kt(y,_.y),new Kt(E,_.y)],B=c(C,m.boundingBox,h);B.sort((S,I)=>S.point.x-I.point.x);let R=[],M=[];B.forEach(S=>{S.identifier===m.identifier?R.push(S):M.push(S)});let x=R[0].point.x,T=[],w=0;for(;w<M.length&&M[w].point.x<x;)T.length>0&&T[T.length-1]===M[w].identifier?T.pop():T.push(M[w].identifier),w++;if(T.push(m.identifier),b==="evenodd"){let S=T.length%2===0,I=T[T.length-2];return{identifier:m.identifier,isHole:S,for:I}}else if(b==="nonzero"){let S=!0,I=null,G=null;for(let H=0;H<T.length;H++){let X=T[H];S?(G=h[X].isCW,S=!1,I=X):G!==h[X].isCW&&(G=h[X].isCW,S=!0)}return{identifier:m.identifier,isHole:S,for:I}}else console.warn('fill-rule: "'+b+'" is currently not implemented.')}let d=999999999,f=-999999999,g=r.subPaths.map(m=>{let h=m.getPoints(),y=-999999999,E=999999999,b=-999999999,_=999999999;for(let C=0;C<h.length;C++){let B=h[C];B.y>y&&(y=B.y),B.y<E&&(E=B.y),B.x>b&&(b=B.x),B.x<_&&(_=B.x)}return f<=b&&(f=b+1),d>=_&&(d=_-1),{curves:m.curves,points:h,isCW:i7.isClockWise(h),identifier:-1,boundingBox:new n7(new Kt(_,E),new Kt(b,y))}});g=g.filter(m=>m.points.length>1);for(let m=0;m<g.length;m++)g[m].identifier=m;let v=g.map(m=>u(m,g,d,f,r.userData?r.userData.style.fillRule:void 0)),A=[];return g.forEach(m=>{if(!v[m.identifier].isHole){let y=new a7;y.curves=m.curves,v.filter(b=>b.isHole&&b.for===m.identifier).forEach(b=>{let _=g[b.identifier],C=new yA;C.curves=_.curves,y.holes.push(C)}),A.push(y)}}),A}static getStrokeStyle(r,n,i,o,s){return r=r!==void 0?r:1,n=n!==void 0?n:"#000",i=i!==void 0?i:"miter",o=o!==void 0?o:"butt",s=s!==void 0?s:4,{strokeColor:n,strokeWidth:r,strokeLineJoin:i,strokeLineCap:o,strokeMiterLimit:s}}static pointsToStroke(r,n,i,o){let s=[],p=[],l=[];if(t.pointsToStrokeWithBuffers(r,n,i,o,s,p,l)===0)return null;let c=new s7;return c.setAttribute("position",new vA(s,3)),c.setAttribute("normal",new vA(p,3)),c.setAttribute("uv",new vA(l,2)),c}static pointsToStrokeWithBuffers(r,n,i,o,s,p,l,c){let u=new Kt,d=new Kt,f=new Kt,g=new Kt,v=new Kt,A=new Kt,m=new Kt,h=new Kt,y=new Kt,E=new Kt,b=new Kt,_=new Kt,C=new Kt,B=new Kt,R=new Kt,M=new Kt,x=new Kt;i=i!==void 0?i:12,o=o!==void 0?o:.001,c=c!==void 0?c:0,r=me(r);let T=r.length;if(T<2)return 0;let w=r[0].equals(r[T-1]),S,I=r[0],G,H=n.strokeWidth/2,X=1/(T-1),Z=0,z,Y,L,Q,V=!1,N=0,P=c*3,k=c*2;O(r[0],r[1],u).multiplyScalar(H),h.copy(r[0]).sub(u),y.copy(r[0]).add(u),E.copy(h),b.copy(y);for(let J=1;J<T;J++){S=r[J],J===T-1?w?G=r[1]:G=void 0:G=r[J+1];let oe=u;if(O(I,S,oe),f.copy(oe).multiplyScalar(H),_.copy(S).sub(f),C.copy(S).add(f),z=Z+X,Y=!1,G!==void 0){O(S,G,d),f.copy(d).multiplyScalar(H),B.copy(S).sub(f),R.copy(S).add(f),L=!0,f.subVectors(G,I),oe.dot(f)<0&&(L=!1),J===1&&(V=L),f.subVectors(G,S),f.normalize();let ce=Math.abs(oe.dot(f));if(ce>Number.EPSILON){let ie=H/ce;f.multiplyScalar(-ie),g.subVectors(S,I),v.copy(g).setLength(ie).add(f),M.copy(v).negate();let W=v.length(),j=g.length();g.divideScalar(j),A.subVectors(G,S);let ne=A.length();switch(A.divideScalar(ne),g.dot(M)<j&&A.dot(M)<ne&&(Y=!0),x.copy(v).add(S),M.add(S),Q=!1,Y?L?(R.copy(M),C.copy(M)):(B.copy(M),_.copy(M)):ae(),n.strokeLineJoin){case"bevel":K(L,Y,z);break;case"round":re(L,Y),L?q(S,_,B,z,0):q(S,R,C,z,1);break;case"miter":case"miter-clip":default:let ve=H*n.strokeMiterLimit/W;if(ve<1)if(n.strokeLineJoin!=="miter-clip"){K(L,Y,z);break}else re(L,Y),L?(A.subVectors(x,_).multiplyScalar(ve).add(_),m.subVectors(x,B).multiplyScalar(ve).add(B),D(_,z,0),D(A,z,0),D(S,z,.5),D(S,z,.5),D(A,z,0),D(m,z,0),D(S,z,.5),D(m,z,0),D(B,z,0)):(A.subVectors(x,C).multiplyScalar(ve).add(C),m.subVectors(x,R).multiplyScalar(ve).add(R),D(C,z,1),D(A,z,1),D(S,z,.5),D(S,z,.5),D(A,z,1),D(m,z,1),D(S,z,.5),D(m,z,1),D(R,z,1));else Y?(L?(D(y,Z,1),D(h,Z,0),D(x,z,0),D(y,Z,1),D(x,z,0),D(M,z,1)):(D(y,Z,1),D(h,Z,0),D(x,z,1),D(h,Z,0),D(M,z,0),D(x,z,1)),L?B.copy(x):R.copy(x)):L?(D(_,z,0),D(x,z,0),D(S,z,.5),D(S,z,.5),D(x,z,0),D(B,z,0)):(D(C,z,1),D(x,z,1),D(S,z,.5),D(S,z,.5),D(x,z,1),D(R,z,1)),Q=!0;break}}else ae()}else ae();!w&&J===T-1&&he(r[0],E,b,L,!0,Z),Z=z,I=S,h.copy(B),y.copy(R)}if(!w)he(S,_,C,L,!1,z);else if(Y&&s){let J=x,oe=M;V!==L&&(J=M,oe=x),L?(Q||V)&&(oe.toArray(s,0),oe.toArray(s,9),Q&&J.toArray(s,3)):(Q||!V)&&(oe.toArray(s,3),oe.toArray(s,9),Q&&J.toArray(s,0))}return N;function O(J,oe,ce){return ce.subVectors(oe,J),ce.set(-ce.y,ce.x).normalize()}function D(J,oe,ce){s&&(s[P]=J.x,s[P+1]=J.y,s[P+2]=0,p&&(p[P]=0,p[P+1]=0,p[P+2]=1),P+=3,l&&(l[k]=oe,l[k+1]=ce,k+=2)),N+=3}function q(J,oe,ce,ie,W){u.copy(oe).sub(J).normalize(),d.copy(ce).sub(J).normalize();let j=Math.PI,ne=u.dot(d);Math.abs(ne)<1&&(j=Math.abs(Math.acos(ne))),j/=i,f.copy(oe);for(let ve=0,Ce=i-1;ve<Ce;ve++)g.copy(f).rotateAround(J,j),D(f,ie,W),D(g,ie,W),D(J,ie,.5),f.copy(g);D(g,ie,W),D(ce,ie,W),D(J,ie,.5)}function ae(){D(y,Z,1),D(h,Z,0),D(_,z,0),D(y,Z,1),D(_,z,0),D(C,z,1)}function K(J,oe,ce){oe?J?(D(y,Z,1),D(h,Z,0),D(_,z,0),D(y,Z,1),D(_,z,0),D(M,z,1),D(_,ce,0),D(B,ce,0),D(M,ce,.5)):(D(y,Z,1),D(h,Z,0),D(C,z,1),D(h,Z,0),D(M,z,0),D(C,z,1),D(C,ce,1),D(M,ce,0),D(R,ce,1)):J?(D(_,ce,0),D(B,ce,0),D(S,ce,.5)):(D(C,ce,1),D(R,ce,0),D(S,ce,.5))}function re(J,oe){oe&&(J?(D(y,Z,1),D(h,Z,0),D(_,z,0),D(y,Z,1),D(_,z,0),D(M,z,1),D(_,Z,0),D(S,z,.5),D(M,z,1),D(S,z,.5),D(B,Z,0),D(M,z,1)):(D(y,Z,1),D(h,Z,0),D(C,z,1),D(h,Z,0),D(M,z,0),D(C,z,1),D(C,Z,1),D(M,z,0),D(S,z,.5),D(S,z,.5),D(M,z,0),D(R,Z,1)))}function he(J,oe,ce,ie,W,j){switch(n.strokeLineCap){case"round":W?q(J,ce,oe,j,.5):q(J,oe,ce,j,.5);break;case"square":if(W)u.subVectors(oe,J),d.set(u.y,-u.x),f.addVectors(u,d).add(J),g.subVectors(d,u).add(J),ie?(f.toArray(s,3),g.toArray(s,0),g.toArray(s,9)):(f.toArray(s,3),l[7]===1?g.toArray(s,9):f.toArray(s,9),g.toArray(s,0));else{u.subVectors(ce,J),d.set(u.y,-u.x),f.addVectors(u,d).add(J),g.subVectors(d,u).add(J);let ne=s.length;ie?(f.toArray(s,ne-3),g.toArray(s,ne-6),g.toArray(s,ne-12)):(g.toArray(s,ne-6),f.toArray(s,ne-3),g.toArray(s,ne-12))}break}}function me(J){let oe=!1;for(let ie=1,W=J.length-1;ie<W;ie++)if(J[ie].distanceTo(J[ie+1])<o){oe=!0;break}if(!oe)return J;let ce=[];ce.push(J[0]);for(let ie=1,W=J.length-1;ie<W;ie++)J[ie].distanceTo(J[ie+1])>=o&&ce.push(J[ie]);return ce.push(J[J.length-1]),ce}}}return t})();import{Loader as l7,FileLoader as w_,BufferGeometry as c7,BufferAttribute as T_}from"three";var EA=new WeakMap,bd=class extends l7{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,r,n,i){let o=new w_(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,s=>{let p={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(s,p).then(r).catch(i)},n,i)}decodeDracoFile(e,r,n,i){let o={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,o).then(r)}decodeGeometry(e,r){for(let l in r.attributeTypes){let c=r.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(r.attributeTypes[l]=c.name)}let n=JSON.stringify(r);if(EA.has(e)){let l=EA.get(e);if(l.key===n)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,o=this.workerNextTaskID++,s=e.byteLength,p=this._getWorker(o,s).then(l=>(i=l,new Promise((c,u)=>{i._callbacks[o]={resolve:c,reject:u},i.postMessage({type:"decode",id:o,taskConfig:r,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return p.catch(()=>!0).then(()=>{i&&o&&this._releaseTask(i,o)}),EA.set(e,{key:n,promise:p}),p}_createGeometry(e){let r=new c7;e.index&&r.setIndex(new T_(e.index.array,1));for(let n=0;n<e.attributes.length;n++){let i=e.attributes[n],o=i.name,s=i.array,p=i.itemSize;r.setAttribute(o,new T_(s,p))}return r}_loadLibrary(e,r){let n=new w_(this.manager);return n.setPath(this.decoderPath),n.setResponseType(r),n.setWithCredentials(this.withCredentials),new Promise((i,o)=>{n.load(e,i,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",r=[];return e?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then(n=>{let i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);let o=d7.toString(),s=["/* draco decoder */",i,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,r){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(o){let s=o.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,o){return i._taskLoad>o._taskLoad?-1:1});let n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=r,n._taskLoad+=r,n})}_releaseTask(e,r){e._taskLoad-=e._taskCosts[r],delete e._callbacks[r],delete e._taskCosts[r]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}};function d7(){let t,e;onmessage=function(s){let p=s.data;switch(p.type){case"init":t=p.decoderConfig,e=new Promise(function(u){t.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(t)});break;case"decode":let l=p.buffer,c=p.taskConfig;e.then(u=>{let d=u.draco,f=new d.Decoder,g=new d.DecoderBuffer;g.Init(new Int8Array(l),l.byteLength);try{let v=r(d,f,g,c),A=v.attributes.map(m=>m.array.buffer);v.index&&A.push(v.index.array.buffer),self.postMessage({type:"decode",id:p.id,geometry:v},A)}catch(v){console.error(v),self.postMessage({type:"error",id:p.id,error:v.message})}finally{d.destroy(g),d.destroy(f)}});break}};function r(s,p,l,c){let u=c.attributeIDs,d=c.attributeTypes,f,g,v=p.GetEncodedGeometryType(l);if(v===s.TRIANGULAR_MESH)f=new s.Mesh,g=p.DecodeBufferToMesh(l,f);else if(v===s.POINT_CLOUD)f=new s.PointCloud,g=p.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!g.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+g.error_msg());let A={index:null,attributes:[]};for(let m in u){let h=self[d[m]],y,E;if(c.useUniqueIDs)E=u[m],y=p.GetAttributeByUniqueId(f,E);else{if(E=p.GetAttributeId(f,s[u[m]]),E===-1)continue;y=p.GetAttribute(f,E)}A.attributes.push(i(s,p,f,m,h,y))}return v===s.TRIANGULAR_MESH&&(A.index=n(s,p,f)),s.destroy(f),A}function n(s,p,l){let u=l.num_faces()*3,d=u*4,f=s._malloc(d);p.GetTrianglesUInt32Array(l,d,f);let g=new Uint32Array(s.HEAPF32.buffer,f,u).slice();return s._free(f),{array:g,itemSize:1}}function i(s,p,l,c,u,d){let f=d.num_components(),v=l.num_points()*f,A=v*u.BYTES_PER_ELEMENT,m=o(s,u),h=s._malloc(A);p.GetAttributeDataArrayForAllPoints(l,d,m,A,h);let y=new u(s.HEAPF32.buffer,h,v).slice();return s._free(h),{name:c,array:y,itemSize:f}}function o(s,p){switch(p){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}import{InstancedBufferGeometry as u7,Float32BufferAttribute as S_,InstancedInterleavedBuffer as I_,InterleavedBufferAttribute as Jf,WireframeGeometry as f7,Box3 as O_,Sphere as g7,Vector3 as h7}from"three";var F_=new O_,qf=new h7,pn=class extends u7{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";let e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],r=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new S_(e,3)),this.setAttribute("uv",new S_(r,2))}applyMatrix4(e){let r=this.attributes.instanceStart,n=this.attributes.instanceEnd;return r!==void 0&&(r.applyMatrix4(e),n.applyMatrix4(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let r;e instanceof Float32Array?r=e:Array.isArray(e)&&(r=new Float32Array(e));let n=new I_(r,6,1);return this.setAttribute("instanceStart",new Jf(n,3,0)),this.setAttribute("instanceEnd",new Jf(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,r=3){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));let i=new I_(n,r*2,1);return this.setAttribute("instanceColorStart",new Jf(i,r,0)),this.setAttribute("instanceColorEnd",new Jf(i,r,r)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new f7(e.geometry)),this}fromLineSegments(e){let r=e.geometry;return this.setPositions(r.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new O_);let e=this.attributes.instanceStart,r=this.attributes.instanceEnd;e!==void 0&&r!==void 0&&(this.boundingBox.setFromBufferAttribute(e),F_.setFromBufferAttribute(r),this.boundingBox.union(F_))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new g7),this.boundingBox===null&&this.computeBoundingBox();let e=this.attributes.instanceStart,r=this.attributes.instanceEnd;if(e!==void 0&&r!==void 0){let n=this.boundingSphere.center;this.boundingBox.getCenter(n);let i=0;for(let o=0,s=e.count;o<s;o++)qf.fromBufferAttribute(e,o),i=Math.max(i,n.distanceToSquared(qf)),qf.fromBufferAttribute(r,o),i=Math.max(i,n.distanceToSquared(qf));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}};var Os=class extends pn{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){let r=e.length-3,n=new Float32Array(2*r);for(let i=0;i<r;i+=3)n[2*i]=e[i],n[2*i+1]=e[i+1],n[2*i+2]=e[i+2],n[2*i+3]=e[i+3],n[2*i+4]=e[i+4],n[2*i+5]=e[i+5];return super.setPositions(n),this}setColors(e,r=3){let n=e.length-r,i=new Float32Array(2*n);if(r===3)for(let o=0;o<n;o+=r)i[2*o]=e[o],i[2*o+1]=e[o+1],i[2*o+2]=e[o+2],i[2*o+3]=e[o+3],i[2*o+4]=e[o+4],i[2*o+5]=e[o+5];else for(let o=0;o<n;o+=r)i[2*o]=e[o],i[2*o+1]=e[o+1],i[2*o+2]=e[o+2],i[2*o+3]=e[o+3],i[2*o+4]=e[o+4],i[2*o+5]=e[o+5],i[2*o+6]=e[o+6],i[2*o+7]=e[o+7];return super.setColors(i,r),this}fromLine(e){let r=e.geometry;return this.setPositions(r.attributes.position.array),this}};import{ShaderMaterial as m7,UniformsUtils as D_,UniformsLib as k_,Vector2 as A7}from"three";var ln=class extends m7{constructor(e){super({type:"LineMaterial",uniforms:D_.clone(D_.merge([k_.common,k_.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new A7(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${Si>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(r){this.uniforms.diffuse.value=r}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(r){r===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(r){this.uniforms.linewidth.value=r}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(r){!!r!="USE_DASH"in this.defines&&(this.needsUpdate=!0),r===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(r){this.uniforms.dashScale.value=r}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(r){this.uniforms.dashSize.value=r}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(r){this.uniforms.dashOffset.value=r}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(r){this.uniforms.gapSize.value=r}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(r){this.uniforms.opacity.value=r}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(r){this.uniforms.resolution.value.copy(r)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(r){!!r!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),r===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}};import{Mesh as y7,InstancedInterleavedBuffer as v7,InterleavedBufferAttribute as L_,Vector4 as _d,Vector3 as Da,Box3 as E7,Sphere as b7,MathUtils as _7,Matrix4 as C7,Line3 as R7}from"three";var bA=new _d,P_=new Da,G_=new Da,mo=new _d,Ao=new _d,Ln=new _d,_A=new Da,CA=new C7,yo=new R7,z_=new Da,Zf=new E7,$f=new b7,Pn=new _d,Gn,Ds;function N_(t,e,r){return Pn.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),Pn.multiplyScalar(1/Pn.w),Pn.x=Ds/r.width,Pn.y=Ds/r.height,Pn.applyMatrix4(t.projectionMatrixInverse),Pn.multiplyScalar(1/Pn.w),Math.abs(Math.max(Pn.x,Pn.y))}function B7(t,e){let r=t.matrixWorld,n=t.geometry,i=n.attributes.instanceStart,o=n.attributes.instanceEnd,s=Math.min(n.instanceCount,i.count);for(let p=0,l=s;p<l;p++){yo.start.fromBufferAttribute(i,p),yo.end.fromBufferAttribute(o,p),yo.applyMatrix4(r);let c=new Da,u=new Da;Gn.distanceSqToSegment(yo.start,yo.end,u,c),u.distanceTo(c)<Ds*.5&&e.push({point:u,pointOnLine:c,distance:Gn.origin.distanceTo(u),object:t,face:null,faceIndex:p,uv:null,[Mc]:null})}}function x7(t,e,r){let n=e.projectionMatrix,o=t.material.resolution,s=t.matrixWorld,p=t.geometry,l=p.attributes.instanceStart,c=p.attributes.instanceEnd,u=Math.min(p.instanceCount,l.count),d=-e.near;Gn.at(1,Ln),Ln.w=1,Ln.applyMatrix4(e.matrixWorldInverse),Ln.applyMatrix4(n),Ln.multiplyScalar(1/Ln.w),Ln.x*=o.x/2,Ln.y*=o.y/2,Ln.z=0,_A.copy(Ln),CA.multiplyMatrices(e.matrixWorldInverse,s);for(let f=0,g=u;f<g;f++){if(mo.fromBufferAttribute(l,f),Ao.fromBufferAttribute(c,f),mo.w=1,Ao.w=1,mo.applyMatrix4(CA),Ao.applyMatrix4(CA),mo.z>d&&Ao.z>d)continue;if(mo.z>d){let E=mo.z-Ao.z,b=(mo.z-d)/E;mo.lerp(Ao,b)}else if(Ao.z>d){let E=Ao.z-mo.z,b=(Ao.z-d)/E;Ao.lerp(mo,b)}mo.applyMatrix4(n),Ao.applyMatrix4(n),mo.multiplyScalar(1/mo.w),Ao.multiplyScalar(1/Ao.w),mo.x*=o.x/2,mo.y*=o.y/2,Ao.x*=o.x/2,Ao.y*=o.y/2,yo.start.copy(mo),yo.start.z=0,yo.end.copy(Ao),yo.end.z=0;let A=yo.closestPointToPointParameter(_A,!0);yo.at(A,z_);let m=_7.lerp(mo.z,Ao.z,A),h=m>=-1&&m<=1,y=_A.distanceTo(z_)<Ds*.5;if(h&&y){yo.start.fromBufferAttribute(l,f),yo.end.fromBufferAttribute(c,f),yo.start.applyMatrix4(s),yo.end.applyMatrix4(s);let E=new Da,b=new Da;Gn.distanceSqToSegment(yo.start,yo.end,b,E),r.push({point:b,pointOnLine:E,distance:Gn.origin.distanceTo(b),object:t,face:null,faceIndex:f,uv:null,[Mc]:null})}}}var ks=class extends y7{constructor(e=new pn,r=new ln({color:Math.random()*16777215})){super(e,r),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){let e=this.geometry,r=e.attributes.instanceStart,n=e.attributes.instanceEnd,i=new Float32Array(2*r.count);for(let s=0,p=0,l=r.count;s<l;s++,p+=2)P_.fromBufferAttribute(r,s),G_.fromBufferAttribute(n,s),i[p]=p===0?0:i[p-1],i[p+1]=i[p]+P_.distanceTo(G_);let o=new v7(i,2,1);return e.setAttribute("instanceDistanceStart",new L_(o,1,0)),e.setAttribute("instanceDistanceEnd",new L_(o,1,1)),this}raycast(e,r){let n=this.material.worldUnits,i=e.camera;i===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');let o=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Gn=e.ray;let s=this.matrixWorld,p=this.geometry,l=this.material;Ds=l.linewidth+o,p.boundingSphere===null&&p.computeBoundingSphere(),$f.copy(p.boundingSphere).applyMatrix4(s);let c;if(n)c=Ds*.5;else{let d=Math.max(i.near,$f.distanceToPoint(Gn.origin));c=N_(i,d,l.resolution)}if($f.radius+=c,Gn.intersectsSphere($f)===!1)return;p.boundingBox===null&&p.computeBoundingBox(),Zf.copy(p.boundingBox).applyMatrix4(s);let u;if(n)u=Ds*.5;else{let d=Math.max(i.near,Zf.distanceToPoint(Gn.origin));u=N_(i,d,l.resolution)}Zf.expandByScalar(u),Gn.intersectsBox(Zf)!==!1&&(n?B7(this,r):x7(this,i,r))}onBeforeRender(e){let r=this.material.uniforms;r&&r.resolution&&(e.getViewport(bA),this.material.uniforms.resolution.value.set(bA.z,bA.w))}};var Ls=class extends ks{constructor(e=new Os,r=new ln({color:Math.random()*16777215})){super(e,r),this.isLine2=!0,this.type="Line2"}};var eg,Cd=()=>{if(eg)return eg;let t="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",r=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=t;WebAssembly.validate(r)&&(i=e);let o,s=WebAssembly.instantiate(p(i),{}).then(d=>{o=d.instance,o.exports.__wasm_call_ctors()});function p(d){let f=new Uint8Array(d.length);for(let v=0;v<d.length;++v){let A=d.charCodeAt(v);f[v]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let g=0;for(let v=0;v<d.length;++v)f[g++]=f[v]<60?n[f[v]]:(f[v]-60)*64+f[++v];return f.buffer.slice(0,g)}function l(d,f,g,v,A,m){let h=o.exports.sbrk,y=g+3&-4,E=h(y*v),b=h(A.length),_=new Uint8Array(o.exports.memory.buffer);_.set(A,b);let C=d(E,g,v,b,A.length);if(C===0&&m&&m(E,y,v),f.set(_.subarray(E,E+g*v)),h(E-h(0)),C!==0)throw new Error(`Malformed buffer data: ${C}`)}let c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return eg={ready:s,supported:!0,decodeVertexBuffer(d,f,g,v,A){l(o.exports.meshopt_decodeVertexBuffer,d,f,g,v,o.exports[c[A]])},decodeIndexBuffer(d,f,g,v){l(o.exports.meshopt_decodeIndexBuffer,d,f,g,v)},decodeIndexSequence(d,f,g,v){l(o.exports.meshopt_decodeIndexSequence,d,f,g,v)},decodeGltfBuffer(d,f,g,v,A,m){l(o.exports[u[A]],d,f,g,v,o.exports[c[m]])}},eg};import{useThree as M7}from"@react-three/fiber";function U_(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;let r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(e,r[n])||!Object.is(t[r[n]],e[r[n]]))return!1;return!0}var j_=jr.createContext([]);function w7({box:t,multiple:e,children:r,onChange:n,onChangePointerUp:i,border:o="1px solid #55aaff",backgroundColor:s="rgba(75, 160, 255, 0.1)",filter:p=c=>c,...l}){let[c,u]=jr.useState(!1),{setEvents:d,camera:f,raycaster:g,gl:v,controls:A,size:m,get:h}=M7(),[y,E]=jr.useState(!1),[b,_]=jr.useReducer((M,{object:x,shift:T})=>x===void 0?[]:Array.isArray(x)?x:T?M.includes(x)?M.filter(w=>w!==x):[x,...M]:M[0]===x?[]:[x],[]);jr.useEffect(()=>{c?n?.(b):i?.(b)},[b,c]);let C=jr.useCallback(M=>{M.stopPropagation(),_({object:p([M.object])[0],shift:e&&M.shiftKey})},[]),B=jr.useCallback(M=>!y&&_({}),[y]),R=jr.useRef(null);return jr.useEffect(()=>{if(!t||!e)return;let M=new sd(f,R.current),x=document.createElement("div");x.style.pointerEvents="none",x.style.border=o,x.style.backgroundColor=s,x.style.position="fixed";let T=new tg.Vector2,w=new tg.Vector2,S=new tg.Vector2,I=h().events.enabled,G=A?.enabled,H=!1;function X(P,k){let{offsetX:O,offsetY:D}=P,{width:q,height:ae}=m;k.set(O/q*2-1,-(D/ae)*2+1)}function Z(P){var k;A&&(A.enabled=!1),d({enabled:!1}),u(H=!0),(k=v.domElement.parentElement)==null||k.appendChild(x),x.style.left=`${P.clientX}px`,x.style.top=`${P.clientY}px`,x.style.width="0px",x.style.height="0px",T.x=P.clientX,T.y=P.clientY}function z(P){S.x=Math.max(T.x,P.clientX),S.y=Math.max(T.y,P.clientY),w.x=Math.min(T.x,P.clientX),w.y=Math.min(T.y,P.clientY),x.style.left=`${w.x}px`,x.style.top=`${w.y}px`,x.style.width=`${S.x-w.x}px`,x.style.height=`${S.y-w.y}px`}function Y(){if(H){var P;A&&(A.enabled=G),d({enabled:I}),u(H=!1),(P=x.parentElement)==null||P.removeChild(x)}}function L(P){P.shiftKey&&(Z(P),X(P,M.startPoint))}let Q=[];function V(P){if(H){z(P),X(P,M.endPoint);let k=M.select().sort(O=>O.uuid).filter(O=>O.isMesh);U_(k,Q)||(Q=k,_({object:p(k)}))}}function N(P){H&&Y()}return document.addEventListener("pointerdown",L,{passive:!0}),document.addEventListener("pointermove",V,{passive:!0,capture:!0}),document.addEventListener("pointerup",N,{passive:!0}),()=>{document.removeEventListener("pointerdown",L),document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",N)}},[m.width,m.height,g,f,A,v]),jr.createElement("group",te({ref:R,onClick:C,onPointerOver:()=>E(!0),onPointerOut:()=>E(!1),onPointerMissed:B},l),jr.createElement(j_.Provider,{value:b},r))}function T7(){return jr.useContext(j_)}import*as Hr from"react";import*as rg from"three";import{useThree as Rd,createPortal as S7,useFrame as I7}from"@react-three/fiber";var F7=t=>t&&t.isOrthographicCamera,H_=new rg.Color;function Q_(t){return"top"in t}function O7(t,e){let{right:r,top:n,left:i,bottom:o,width:s,height:p}=e,l=e.bottom<0||n>t.height||r<0||e.left>t.width;if(Q_(t)){let d=t.top+t.height-o,f=i-t.left;return{position:{width:s,height:p,left:f,top:n,bottom:d,right:r},isOffscreen:l}}let c=t.height-o;return{position:{width:s,height:p,top:n,left:i,bottom:c,right:r},isOffscreen:l}}function D7({canvasSize:t,scene:e,index:r,children:n,frames:i,rect:o,track:s}){let p=Rd(f=>f.get),l=Rd(f=>f.camera),c=Rd(f=>f.scene),u=Rd(f=>f.setEvents),d=0;return I7(f=>{if(i===1/0||d<=i){var g;o.current=(g=s.current)==null?void 0:g.getBoundingClientRect(),d++}if(o.current){let{position:{left:v,bottom:A,width:m,height:h},isOffscreen:y}=O7(t,o.current),E=m/h;F7(l)?(l.left!==m/-2||l.right!==m/2||l.top!==h/2||l.bottom!==h/-2)&&(Object.assign(l,{left:m/-2,right:m/2,top:h/2,bottom:h/-2}),l.updateProjectionMatrix()):l.aspect!==E&&(l.aspect=E,l.updateProjectionMatrix()),f.gl.setViewport(v,A,m,h),f.gl.setScissor(v,A,m,h),f.gl.setScissorTest(!0),y?(f.gl.getClearColor(H_),f.gl.setClearColor(H_,f.gl.getClearAlpha()),f.gl.clear(!0,!0)):f.gl.render(n?c:e,l),f.gl.setScissorTest(!0)}},r),Hr.useEffect(()=>{let f=p().events.connected;return u({connected:s.current}),()=>u({connected:f})},[]),Hr.useEffect(()=>{Q_(t)||console.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),Hr.createElement(Hr.Fragment,null,n)}var k7=({track:t,index:e=1,frames:r=1/0,children:n})=>{var i,o;let s=Hr.useRef(null),{size:p,scene:l}=Rd(),[c]=Hr.useState(()=>new rg.Scene),u=Hr.useCallback((g,v)=>{if(s.current&&t.current&&g.target===t.current){let{width:A,height:m,left:h,top:y}=s.current,E=g.clientX-h,b=g.clientY-y;v.pointer.set(E/A*2-1,-(b/m)*2+1),v.raycaster.setFromCamera(v.pointer,v.camera)}},[s,t]),[d,f]=Hr.useReducer(()=>!0,!1);return Hr.useEffect(()=>{var g;s.current=(g=t.current)==null?void 0:g.getBoundingClientRect(),f()},[t]),Hr.createElement(Hr.Fragment,null,d&&S7(Hr.createElement(D7,{canvasSize:p,frames:r,scene:l,track:t,rect:s,index:e},n,Hr.createElement("group",{onPointerOver:()=>null})),c,{events:{compute:u,priority:e},size:{width:(i=s.current)==null?void 0:i.width,height:(o=s.current)==null?void 0:o.height}}))};import*as sr from"three";import*as Gt from"react";import{useThree as sD,useFrame as pD}from"@react-three/fiber";import*as Zt from"react";import*as cn from"three";import{useThree as N7}from"@react-three/fiber";import*as Fo from"react";import{Vector3 as L7,Vector2 as P7,Color as G7}from"three";import{useThree as z7}from"@react-three/fiber";var vo=Fo.forwardRef(function({points:e,color:r="black",vertexColors:n,linewidth:i,lineWidth:o,segments:s,dashed:p,...l},c){let u=z7(v=>v.size),d=Fo.useMemo(()=>s?new ks:new Ls,[s]),[f]=Fo.useState(()=>new ln),g=Fo.useMemo(()=>{let v=s?new pn:new Os,A=e.map(m=>{let h=Array.isArray(m);return m instanceof L7?[m.x,m.y,m.z]:m instanceof P7?[m.x,m.y,0]:h&&m.length===3?[m[0],m[1],m[2]]:h&&m.length===2?[m[0],m[1],0]:m});if(v.setPositions(A.flat()),n){let m=n.map(h=>h instanceof G7?h.toArray():h);v.setColors(m.flat())}return v},[e,s,n]);return Fo.useLayoutEffect(()=>{d.computeLineDistances()},[e,d]),Fo.useLayoutEffect(()=>{p?f.defines.USE_DASH="":delete f.defines.USE_DASH,f.needsUpdate=!0},[p,f]),Fo.useEffect(()=>()=>g.dispose(),[g]),Fo.createElement("primitive",te({object:d,ref:c},l),Fo.createElement("primitive",{object:g,attach:"geometry"}),Fo.createElement("primitive",te({object:f,attach:"material",color:r,vertexColors:!!n,resolution:[u.width,u.height],linewidth:i??o,dashed:p},l)))});import*as W_ from"react";var ka=W_.createContext(null);var og=new cn.Vector3,V_=new cn.Vector3,U7=(t,e,r,n)=>{let i=e.dot(e),o=e.dot(t)-e.dot(r),s=e.dot(n);return s===0?-o/i:(og.copy(n).multiplyScalar(i/s).sub(e),V_.copy(n).multiplyScalar(o/s).add(r).sub(t),-og.dot(V_)/og.dot(og))},j7=new cn.Vector3(0,1,0),Y_=new cn.Matrix4,ig=({direction:t,axis:e})=>{let{translation:r,translationLimits:n,annotations:i,annotationsClass:o,depthTest:s,scale:p,lineWidth:l,fixed:c,axisColors:u,hoveredColor:d,opacity:f,onDragStart:g,onDrag:v,onDragEnd:A,userData:m}=Zt.useContext(ka),h=N7(X=>X.controls),y=Zt.useRef(null),E=Zt.useRef(null),b=Zt.useRef(null),_=Zt.useRef(0),[C,B]=Zt.useState(!1),R=Zt.useCallback(X=>{i&&(y.current.innerText=`${r.current[e].toFixed(2)}`,y.current.style.display="block"),X.stopPropagation();let Z=new cn.Matrix4().extractRotation(E.current.matrixWorld),z=X.point.clone(),Y=new cn.Vector3().setFromMatrixPosition(E.current.matrixWorld),L=t.clone().applyMatrix4(Z).normalize();b.current={clickPoint:z,dir:L},_.current=r.current[e],g({component:"Arrow",axis:e,origin:Y,directions:[L]}),h&&(h.enabled=!1),X.target.setPointerCapture(X.pointerId)},[i,t,h,g,r,e]),M=Zt.useCallback(X=>{if(X.stopPropagation(),C||B(!0),b.current){let{clickPoint:Z,dir:z}=b.current,[Y,L]=n?.[e]||[void 0,void 0],Q=U7(Z,z,X.ray.origin,X.ray.direction);Y!==void 0&&(Q=Math.max(Q,Y-_.current)),L!==void 0&&(Q=Math.min(Q,L-_.current)),r.current[e]=_.current+Q,i&&(y.current.innerText=`${r.current[e].toFixed(2)}`),Y_.makeTranslation(z.x*Q,z.y*Q,z.z*Q),v(Y_)}},[i,v,C,r,n,e]),x=Zt.useCallback(X=>{i&&(y.current.style.display="none"),X.stopPropagation(),b.current=null,A(),h&&(h.enabled=!0),X.target.releasePointerCapture(X.pointerId)},[i,h,A]),T=Zt.useCallback(X=>{X.stopPropagation(),B(!1)},[]),{cylinderLength:w,coneWidth:S,coneLength:I,matrixL:G}=Zt.useMemo(()=>{let X=c?l/p*1.6:p/20,Z=c?.2:p/5,z=c?1-Z:p-Z,Y=new cn.Quaternion().setFromUnitVectors(j7,t.clone().normalize()),L=new cn.Matrix4().makeRotationFromQuaternion(Y);return{cylinderLength:z,coneWidth:X,coneLength:Z,matrixL:L}},[t,p,l,c]),H=C?d:u[e];return Zt.createElement("group",{ref:E},Zt.createElement("group",{matrix:G,matrixAutoUpdate:!1,onPointerDown:R,onPointerMove:M,onPointerUp:x,onPointerOut:T},i&&Zt.createElement(ps,{position:[0,-I,0]},Zt.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:o,ref:y})),Zt.createElement("mesh",{visible:!1,position:[0,(w+I)/2,0],userData:m},Zt.createElement("cylinderGeometry",{args:[S*1.4,S*1.4,w+I,8,1]})),Zt.createElement(vo,{transparent:!0,raycast:()=>null,depthTest:s,points:[0,0,0,0,w,0],lineWidth:l,color:H,opacity:f,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),Zt.createElement("mesh",{raycast:()=>null,position:[0,w+I/2,0],renderOrder:500},Zt.createElement("coneGeometry",{args:[S,I,24,1]}),Zt.createElement("meshBasicMaterial",{transparent:!0,depthTest:s,color:H,opacity:f,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))};import*as $t from"react";import*as Qr from"three";import{useThree as H7}from"@react-three/fiber";var Q7=(t,e,r)=>{let n=Math.abs(t.x)>=Math.abs(t.y)&&Math.abs(t.x)>=Math.abs(t.z)?0:Math.abs(t.y)>=Math.abs(t.x)&&Math.abs(t.y)>=Math.abs(t.z)?1:2,i=[0,1,2].sort((v,A)=>Math.abs(e.getComponent(A))-Math.abs(e.getComponent(v))),o=n===i[0]?i[1]:i[0],s=t.getComponent(n),p=t.getComponent(o),l=e.getComponent(n),c=e.getComponent(o),u=r.getComponent(n),f=(r.getComponent(o)-u*(p/s))/(c-l*(p/s));return[(u-f*l)/s,f]},ng=new Qr.Ray,ag=new Qr.Vector3,K_=new Qr.Matrix4,sg=({dir1:t,dir2:e,axis:r})=>{let{translation:n,translationLimits:i,annotations:o,annotationsClass:s,depthTest:p,scale:l,lineWidth:c,fixed:u,axisColors:d,hoveredColor:f,opacity:g,onDragStart:v,onDrag:A,onDragEnd:m,userData:h}=$t.useContext(ka),y=H7(z=>z.controls),E=$t.useRef(null),b=$t.useRef(null),_=$t.useRef(null),C=$t.useRef(0),B=$t.useRef(0),[R,M]=$t.useState(!1),x=$t.useCallback(z=>{o&&(E.current.innerText=`${n.current[(r+1)%3].toFixed(2)}, ${n.current[(r+2)%3].toFixed(2)}`,E.current.style.display="block"),z.stopPropagation();let Y=z.point.clone(),L=new Qr.Vector3().setFromMatrixPosition(b.current.matrixWorld),Q=new Qr.Vector3().setFromMatrixColumn(b.current.matrixWorld,0).normalize(),V=new Qr.Vector3().setFromMatrixColumn(b.current.matrixWorld,1).normalize(),N=new Qr.Vector3().setFromMatrixColumn(b.current.matrixWorld,2).normalize(),P=new Qr.Plane().setFromNormalAndCoplanarPoint(N,L);_.current={clickPoint:Y,e1:Q,e2:V,plane:P},C.current=n.current[(r+1)%3],B.current=n.current[(r+2)%3],v({component:"Slider",axis:r,origin:L,directions:[Q,V,N]}),y&&(y.enabled=!1),z.target.setPointerCapture(z.pointerId)},[o,y,v,r]),T=$t.useCallback(z=>{if(z.stopPropagation(),R||M(!0),_.current){let{clickPoint:Y,e1:L,e2:Q,plane:V}=_.current,[N,P]=i?.[(r+1)%3]||[void 0,void 0],[k,O]=i?.[(r+2)%3]||[void 0,void 0];ng.copy(z.ray),ng.intersectPlane(V,ag),ng.direction.negate(),ng.intersectPlane(V,ag),ag.sub(Y);let[D,q]=Q7(L,Q,ag);N!==void 0&&(D=Math.max(D,N-C.current)),P!==void 0&&(D=Math.min(D,P-C.current)),k!==void 0&&(q=Math.max(q,k-B.current)),O!==void 0&&(q=Math.min(q,O-B.current)),n.current[(r+1)%3]=C.current+D,n.current[(r+2)%3]=B.current+q,o&&(E.current.innerText=`${n.current[(r+1)%3].toFixed(2)}, ${n.current[(r+2)%3].toFixed(2)}`),K_.makeTranslation(D*L.x+q*Q.x,D*L.y+q*Q.y,D*L.z+q*Q.z),A(K_)}},[o,A,R,n,i,r]),w=$t.useCallback(z=>{o&&(E.current.style.display="none"),z.stopPropagation(),_.current=null,m(),y&&(y.enabled=!0),z.target.releasePointerCapture(z.pointerId)},[o,y,m]),S=$t.useCallback(z=>{z.stopPropagation(),M(!1)},[]),I=$t.useMemo(()=>{let z=t.clone().normalize(),Y=e.clone().normalize();return new Qr.Matrix4().makeBasis(z,Y,z.clone().cross(Y))},[t,e]),G=u?1/7:l/7,H=u?.225:l*.225,X=R?f:d[r],Z=$t.useMemo(()=>[new Qr.Vector3(0,0,0),new Qr.Vector3(0,H,0),new Qr.Vector3(H,H,0),new Qr.Vector3(H,0,0),new Qr.Vector3(0,0,0)],[H]);return $t.createElement("group",{ref:b,matrix:I,matrixAutoUpdate:!1},o&&$t.createElement(ps,{position:[0,0,0]},$t.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:E})),$t.createElement("group",{position:[G*1.7,G*1.7,0]},$t.createElement("mesh",{visible:!0,onPointerDown:x,onPointerMove:T,onPointerUp:w,onPointerOut:S,scale:H,userData:h},$t.createElement("planeGeometry",null),$t.createElement("meshBasicMaterial",{transparent:!0,depthTest:p,color:X,polygonOffset:!0,polygonOffsetFactor:-10,side:Qr.DoubleSide,fog:!1})),$t.createElement(vo,{position:[-H/2,-H/2,0],transparent:!0,depthTest:p,points:Z,lineWidth:c,color:X,opacity:g,polygonOffset:!0,polygonOffsetFactor:-10,userData:h,fog:!1})))};import*as Ar from"react";import*as Eo from"three";import{useThree as oD}from"@react-three/fiber";var eC=Mn(BA());var xA=new Eo.Vector3,MA=new Eo.Vector3,wA=t=>t*180/Math.PI,iD=t=>t*Math.PI/180,nD=(t,e,r,n,i)=>{xA.copy(t).sub(r),MA.copy(e).sub(r);let o=n.dot(n),s=i.dot(i),p=xA.dot(n)/o,l=xA.dot(i)/s,c=MA.dot(n)/o,u=MA.dot(i)/s,d=Math.atan2(l,p);return Math.atan2(u,c)-d},aD=(t,e)=>{let r=Math.floor(t/e);return r=r<0?r+1:r,t-r*e},Z_=t=>{let e=aD(t,2*Math.PI);return Math.abs(e)<1e-6?0:(e<0&&(e+=2*Math.PI),e)},pg=new Eo.Matrix4,$_=new Eo.Vector3,lg=new Eo.Ray,TA=new Eo.Vector3,cg=({dir1:t,dir2:e,axis:r})=>{let{rotationLimits:n,annotations:i,annotationsClass:o,depthTest:s,scale:p,lineWidth:l,fixed:c,axisColors:u,hoveredColor:d,opacity:f,onDragStart:g,onDrag:v,onDragEnd:A,userData:m}=Ar.useContext(ka),h=oD(H=>H.controls),y=Ar.useRef(null),E=Ar.useRef(null),b=Ar.useRef(0),_=Ar.useRef(0),C=Ar.useRef(null),[B,R]=Ar.useState(!1),M=Ar.useCallback(H=>{i&&(y.current.innerText=`${wA(_.current).toFixed(0)}\xBA`,y.current.style.display="block"),H.stopPropagation();let X=H.point.clone(),Z=new Eo.Vector3().setFromMatrixPosition(E.current.matrixWorld),z=new Eo.Vector3().setFromMatrixColumn(E.current.matrixWorld,0).normalize(),Y=new Eo.Vector3().setFromMatrixColumn(E.current.matrixWorld,1).normalize(),L=new Eo.Vector3().setFromMatrixColumn(E.current.matrixWorld,2).normalize(),Q=new Eo.Plane().setFromNormalAndCoplanarPoint(L,Z);C.current={clickPoint:X,origin:Z,e1:z,e2:Y,normal:L,plane:Q},g({component:"Rotator",axis:r,origin:Z,directions:[z,Y,L]}),h&&(h.enabled=!1),H.target.setPointerCapture(H.pointerId)},[i,h,g,r]),x=Ar.useCallback(H=>{if(H.stopPropagation(),B||R(!0),C.current){let{clickPoint:X,origin:Z,e1:z,e2:Y,normal:L,plane:Q}=C.current,[V,N]=n?.[r]||[void 0,void 0];lg.copy(H.ray),lg.intersectPlane(Q,TA),lg.direction.negate(),lg.intersectPlane(Q,TA);let P=nD(X,TA,Z,z,Y),k=wA(P);H.shiftKey&&(k=Math.round(k/10)*10,P=iD(k)),V!==void 0&&N!==void 0&&N-V<2*Math.PI?(P=Z_(P),P=P>Math.PI?P-2*Math.PI:P,P=(0,eC.default)(P,V-b.current,N-b.current),_.current=b.current+P):(_.current=Z_(b.current+P),_.current=_.current>Math.PI?_.current-2*Math.PI:_.current),i&&(k=wA(_.current),y.current.innerText=`${k.toFixed(0)}\xBA`),pg.makeRotationAxis(L,P),$_.copy(Z).applyMatrix4(pg).sub(Z).negate(),pg.setPosition($_),v(pg)}},[i,v,B,n,r]),T=Ar.useCallback(H=>{i&&(y.current.style.display="none"),H.stopPropagation(),b.current=_.current,C.current=null,A(),h&&(h.enabled=!0),H.target.releasePointerCapture(H.pointerId)},[i,h,A]),w=Ar.useCallback(H=>{H.stopPropagation(),R(!1)},[]),S=Ar.useMemo(()=>{let H=t.clone().normalize(),X=e.clone().normalize();return new Eo.Matrix4().makeBasis(H,X,H.clone().cross(X))},[t,e]),I=c?.65:p*.65,G=Ar.useMemo(()=>{let X=[];for(let Z=0;Z<=32;Z++){let z=Z*(Math.PI/2)/32;X.push(new Eo.Vector3(Math.cos(z)*I,Math.sin(z)*I,0))}return X},[I]);return Ar.createElement("group",{ref:E,onPointerDown:M,onPointerMove:x,onPointerUp:T,onPointerOut:w,matrix:S,matrixAutoUpdate:!1},i&&Ar.createElement(ps,{position:[I,I,0]},Ar.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:o,ref:y})),Ar.createElement(vo,{points:G,lineWidth:l*4,visible:!1,userData:m}),Ar.createElement(vo,{transparent:!0,raycast:()=>null,depthTest:s,points:G,lineWidth:l,color:B?d:u[r],opacity:f,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))};var lD=new sr.Vector3,cD=new sr.Vector3,dD=new sr.Vector3,uD=(t,e,r)=>{let n=r.width/2,i=r.height/2;e.updateMatrixWorld(!1);let o=t.project(e);return o.x=o.x*n+n,o.y=-(o.y*i)+i,o},fD=(t,e,r,n=1)=>{let i=lD.set(t.x/r.width*2-1,-(t.y/r.height)*2+1,n);return i.unproject(e),i},cC=(t,e,r,n)=>{let i=uD(dD.copy(t),r,n),o=0;for(let s=0;s<2;++s){let p=cD.copy(i).setComponent(s,i.getComponent(s)+e),l=fD(p,r,n,p.z);o=Math.max(o,t.distanceTo(l))}return o},tC=new sr.Matrix4,rC=new sr.Matrix4,oC=new sr.Matrix4,dg=new sr.Matrix4,SA=new sr.Matrix4,Np=new sr.Matrix4,iC=new sr.Matrix4,nC=new sr.Matrix4,Up=new sr.Box3,IA=new sr.Box3,aC=new sr.Vector3,sC=new sr.Vector3,pC=new sr.Vector3,lC=new sr.Vector3,Bd=new sr.Vector3(1,0,0),xd=new sr.Vector3(0,1,0),Md=new sr.Vector3(0,0,1),gD=Gt.forwardRef(({matrix:t,onDragStart:e,onDrag:r,onDragEnd:n,autoTransform:i=!0,anchor:o,disableAxes:s=!1,disableSliders:p=!1,disableRotations:l=!1,activeAxes:c=[!0,!0,!0],offset:u=[0,0,0],rotation:d=[0,0,0],scale:f=1,lineWidth:g=4,fixed:v=!1,translationLimits:A,rotationLimits:m,depthTest:h=!0,axisColors:y=["#ff2060","#20df80","#2080ff"],hoveredColor:E="#ffff40",annotations:b=!1,annotationsClass:_,opacity:C=1,visible:B=!0,userData:R,children:M,...x},T)=>{let w=sD(Y=>Y.invalidate),S=Gt.useRef(null),I=Gt.useRef(null),G=Gt.useRef(null),H=Gt.useRef(null),X=Gt.useRef([0,0,0]);Gt.useLayoutEffect(()=>{o&&(H.current.updateWorldMatrix(!0,!0),dg.copy(H.current.matrixWorld).invert(),Up.makeEmpty(),H.current.traverse(Y=>{Y.geometry&&(Y.geometry.boundingBox||Y.geometry.computeBoundingBox(),Np.copy(Y.matrixWorld).premultiply(dg),IA.copy(Y.geometry.boundingBox),IA.applyMatrix4(Np),Up.union(IA))}),aC.copy(Up.max).add(Up.min).multiplyScalar(.5),sC.copy(Up.max).sub(Up.min).multiplyScalar(.5),pC.copy(sC).multiply(new sr.Vector3(...o)).add(aC),lC.set(...u).add(pC),G.current.position.copy(lC),w())});let Z=Gt.useMemo(()=>({onDragStart:Y=>{tC.copy(I.current.matrix),rC.copy(I.current.matrixWorld),e&&e(Y),w()},onDrag:Y=>{oC.copy(S.current.matrixWorld),dg.copy(oC).invert(),SA.copy(rC).premultiply(Y),Np.copy(SA).premultiply(dg),iC.copy(tC).invert(),nC.copy(Np).multiply(iC),i&&I.current.matrix.copy(Np),r&&r(Np,nC,SA,Y),w()},onDragEnd:()=>{n&&n(),w()},translation:X,translationLimits:A,rotationLimits:m,axisColors:y,hoveredColor:E,opacity:C,scale:f,lineWidth:g,fixed:v,depthTest:h,userData:R,annotations:b,annotationsClass:_}),[e,r,n,X,A,m,h,f,g,v,...y,E,C,R,i,b,_]),z=new sr.Vector3;return pD(Y=>{if(v){let N=cC(G.current.getWorldPosition(z),f,Y.camera,Y.size);if(G.current){var L,Q,V;(((L=G.current)==null?void 0:L.scale.x)!==N||((Q=G.current)==null?void 0:Q.scale.y)!==N||((V=G.current)==null?void 0:V.scale.z)!==N)&&(G.current.scale.setScalar(N),Y.invalidate())}}}),Gt.useImperativeHandle(T,()=>I.current,[]),Gt.useLayoutEffect(()=>{t&&t instanceof sr.Matrix4&&(I.current.matrix=t)},[t]),Gt.createElement(ka.Provider,{value:Z},Gt.createElement("group",{ref:S},Gt.createElement("group",te({ref:I,matrix:t,matrixAutoUpdate:!1},x),Gt.createElement("group",{visible:B,ref:G,position:u,rotation:d},!s&&c[0]&&Gt.createElement(ig,{axis:0,direction:Bd}),!s&&c[1]&&Gt.createElement(ig,{axis:1,direction:xd}),!s&&c[2]&&Gt.createElement(ig,{axis:2,direction:Md}),!p&&c[0]&&c[1]&&Gt.createElement(sg,{axis:2,dir1:Bd,dir2:xd}),!p&&c[0]&&c[2]&&Gt.createElement(sg,{axis:1,dir1:Md,dir2:Bd}),!p&&c[2]&&c[1]&&Gt.createElement(sg,{axis:0,dir1:xd,dir2:Md}),!l&&c[0]&&c[1]&&Gt.createElement(cg,{axis:2,dir1:Bd,dir2:xd}),!l&&c[0]&&c[2]&&Gt.createElement(cg,{axis:1,dir1:Md,dir2:Bd}),!l&&c[2]&&c[1]&&Gt.createElement(cg,{axis:0,dir1:xd,dir2:Md})),Gt.createElement("group",{ref:H},M))))});import*as jp from"react";import{useFrame as hD}from"@react-three/fiber";var mD=jp.forwardRef(function({follow:e=!0,lockX:r=!1,lockY:n=!1,lockZ:i=!1,...o},s){let p=jp.useRef();return hD(({camera:l})=>{if(!e||!p.current)return;let c=p.current.rotation.clone();l.getWorldQuaternion(p.current.quaternion),r&&(p.current.rotation.x=c.x),n&&(p.current.rotation.y=c.y),i&&(p.current.rotation.z=c.z)}),jp.createElement("group",te({ref:tt([p,s])},o))});import*as Ps from"react";import{useFrame as AD}from"@react-three/fiber";var yD=Ps.forwardRef(({children:t,depth:e=-1,...r},n)=>{let i=Ps.useRef(null);return AD(({camera:o})=>{i.current.quaternion.copy(o.quaternion),i.current.position.copy(o.position)}),Ps.createElement("group",te({ref:tt([n,i])},r),Ps.createElement("group",{"position-z":-e},t))});import*as $o from"react";import{QuadraticBezierCurve3 as vD,Vector3 as ug}from"three";var ED=new ug,bD=$o.forwardRef(function({start:e=[0,0,0],end:r=[0,0,0],mid:n,segments:i=20,...o},s){let p=$o.useRef(null),[l]=$o.useState(()=>new vD(void 0,void 0,void 0)),c=$o.useCallback((d,f,g,v=20)=>(d instanceof ug?l.v0.copy(d):l.v0.set(...d),f instanceof ug?l.v2.copy(f):l.v2.set(...f),g instanceof ug?l.v1.copy(g):Array.isArray(g)?l.v1.set(...g):l.v1.copy(l.v0.clone().add(l.v2.clone().sub(l.v0)).add(ED.set(0,l.v0.y-l.v2.y,0))),l.getPoints(v)),[]);$o.useLayoutEffect(()=>{p.current.setPoints=(d,f,g)=>{let v=c(d,f,g);p.current.geometry&&p.current.geometry.setPositions(v.map(A=>A.toArray()).flat())}},[]);let u=$o.useMemo(()=>c(e,r,n,i),[e,r,n,i]);return $o.createElement(vo,te({ref:tt([p,s]),points:u},o))});import*as Hp from"react";import{Vector3 as La,CubicBezierCurve3 as _D}from"three";var CD=Hp.forwardRef(function({start:e,end:r,midA:n,midB:i,segments:o=20,...s},p){let l=Hp.useMemo(()=>{let c=e instanceof La?e:new La(...e),u=r instanceof La?r:new La(...r),d=n instanceof La?n:new La(...n),f=i instanceof La?i:new La(...i);return new _D(c,d,f,u).getPoints(o)},[e,r,n,i,o]);return Hp.createElement(vo,te({ref:p,points:l},s))});import*as Pa from"react";import{Vector3 as dC,CatmullRomCurve3 as RD,Color as uC}from"three";var BD=Pa.forwardRef(function({points:e,closed:r=!1,curveType:n="centripetal",tension:i=.5,segments:o=20,vertexColors:s,...p},l){let c=Pa.useMemo(()=>{let f=e.map(g=>g instanceof dC?g:new dC(...g));return new RD(f,r,n,i)},[e,r,n,i]),u=Pa.useMemo(()=>c.getPoints(o),[c,o]),d=Pa.useMemo(()=>{if(!s||s.length<2)return;if(s.length===o+1)return s;let f=s.map(A=>A instanceof uC?A:new uC(...A));r&&f.push(f[0].clone());let g=[f[0]],v=o/(f.length-1);for(let A=1;A<o;A++){let m=A%v/v,h=Math.floor(A/v);g.push(f[h].clone().lerp(f[h+1],m))}return g.push(f[f.length-1]),g},[s,o]);return Pa.createElement(vo,te({ref:l,points:u,vertexColors:d},p))});import*as dn from"react";import{AudioListener as xD,AudioLoader as MD}from"three";import{useThree as wD,useLoader as TD}from"@react-three/fiber";var SD=dn.forwardRef(({url:t,distance:e=1,loop:r=!0,autoplay:n,...i},o)=>{let s=dn.useRef(),p=wD(({camera:u})=>u),[l]=dn.useState(()=>new xD),c=TD(MD,t);return dn.useEffect(()=>{let u=s.current;u&&(u.setBuffer(c),u.setRefDistance(e),u.setLoop(r),n&&!u.isPlaying&&u.play())},[c,p,e,r]),dn.useEffect(()=>{let u=s.current;return p.add(l),()=>{p.remove(l),u&&(u.isPlaying&&u.stop(),u.source&&u.source._connected&&u.disconnect())}},[]),dn.createElement("positionalAudio",te({ref:tt([s,o]),args:[l]},i))});import*as ei from"react";import{Texture as XD,LinearFilter as bC,Color as jA,InstancedBufferGeometry as JD,Sphere as qD,Box3 as ZD,BackSide as $D,DoubleSide as FC,InstancedBufferAttribute as ek,PlaneGeometry as HA,BufferGeometry as tk,Float32BufferAttribute as rk,Vector2 as yg,Vector4 as _C,Matrix3 as ok,Mesh as QA,FrontSide as ik,MeshBasicMaterial as nk,Matrix4 as ak,Vector3 as WA}from"three";function ID(){var t=Object.create(null);function e(i,o){var s=i.id,p=i.name,l=i.dependencies;l===void 0&&(l=[]);var c=i.init;c===void 0&&(c=function(){});var u=i.getTransferables;if(u===void 0&&(u=null),!t[s])try{l=l.map(function(f){return f&&f.isWorkerModule&&(e(f,function(g){if(g instanceof Error)throw g}),f=t[f.id].value),f}),c=n("<"+p+">.init",c),u&&(u=n("<"+p+">.getTransferables",u));var d=null;typeof c=="function"?d=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[s]={id:s,value:d,getTransferables:u},o(d)}catch(f){f&&f.noLog||console.error(f),o(f)}}function r(i,o){var s,p=i.id,l=i.args;(!t[p]||typeof t[p].value!="function")&&o(new Error("Worker module "+p+": not found or its 'init' did not return a function"));try{var c=(s=t[p]).value.apply(s,l);c&&typeof c.then=="function"?c.then(u,function(d){return o(d instanceof Error?d:new Error(""+d))}):u(c)}catch(d){o(d)}function u(d){try{var f=t[p].getTransferables&&t[p].getTransferables(d);(!f||!Array.isArray(f)||!f.length)&&(f=void 0),o(d,f)}catch(g){console.error(g),o(g)}}}function n(i,o){var s=void 0;self.troikaDefine=function(l){return s=l};var p=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(p)}catch(l){console.error(l)}return URL.revokeObjectURL(p),delete self.troikaDefine,s}self.addEventListener("message",function(i){var o=i.data,s=o.messageId,p=o.action,l=o.data;try{p==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:s,success:!1,error:c.message}):postMessage({messageId:s,success:!0,result:{isCallable:typeof c=="function"}})}),p==="callModule"&&r(l,function(c,u){c instanceof Error?postMessage({messageId:s,success:!1,error:c.message}):postMessage({messageId:s,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:s,success:!1,error:c.stack})}})}function FD(t){var e=function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,r);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var r=t.dependencies,n=t.init;r=Array.isArray(r)?r.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var i=Promise.all(r).then(function(o){return n.apply(null,o)});return e._getInitResult=function(){return i},i},e}var gC=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(r){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+r.message+"]")}return gC=function(){return t},t},OD=0,DD=0,FA=!1,wd=Object.create(null),Td=Object.create(null),OA=Object.create(null);function Qp(t){if((!t||typeof t.init!="function")&&!FA)throw new Error("requires `options.init` function");var e=t.dependencies,r=t.init,n=t.getTransferables,i=t.workerId;if(!gC())return FD(t);i==null&&(i="#default");var o="workerModule"+ ++OD,s=t.name||o,p=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(FA=!0,c=Qp({workerId:i,name:"<"+s+"> function dependency: "+c.name,init:`function(){return (
`+fg(c)+`
)}`}),FA=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!p){p=fC(i,"registerModule",l.workerModuleData);var d=function(){p=null,Td[i].delete(d)};(Td[i]||(Td[i]=new Set)).add(d)}return p.then(function(f){var g=f.isCallable;if(g)return fC(i,"callModule",{id:o,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:o,name:s,dependencies:e,init:fg(r),getTransferables:n&&fg(n)},l}function hC(t){Td[t]&&Td[t].forEach(function(e){e()}),wd[t]&&(wd[t].terminate(),delete wd[t])}function fg(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function kD(t){var e=wd[t];if(!e){var r=fg(ID);e=wd[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+r+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var i=n.data,o=i.messageId,s=OA[o];if(!s)throw new Error("WorkerModule response with empty or unknown messageId");delete OA[o],s(i)}}return e}function fC(t,e,r){return new Promise(function(n,i){var o=++DD;OA[o]=function(s){s.success?n(s.result):i(new Error("Error in worker "+e+" call: "+s.error))},kD(t).postMessage({messageId:o,action:e,data:r})})}function DA(){var t=(function(e){function r(z,Y,L,Q,V,N,P,k){var O=1-P;k.x=O*O*z+2*O*P*L+P*P*V,k.y=O*O*Y+2*O*P*Q+P*P*N}function n(z,Y,L,Q,V,N,P,k,O,D){var q=1-O;D.x=q*q*q*z+3*q*q*O*L+3*q*O*O*V+O*O*O*P,D.y=q*q*q*Y+3*q*q*O*Q+3*q*O*O*N+O*O*O*k}function i(z,Y){for(var L=/([MLQCZ])([^MLQCZ]*)/g,Q,V,N,P,k;Q=L.exec(z);){var O=Q[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(D){return parseFloat(D)});switch(Q[1]){case"M":P=V=O[0],k=N=O[1];break;case"L":(O[0]!==P||O[1]!==k)&&Y("L",P,k,P=O[0],k=O[1]);break;case"Q":{Y("Q",P,k,P=O[2],k=O[3],O[0],O[1]);break}case"C":{Y("C",P,k,P=O[4],k=O[5],O[0],O[1],O[2],O[3]);break}case"Z":(P!==V||k!==N)&&Y("L",P,k,V,N);break}}}function o(z,Y,L){L===void 0&&(L=16);var Q={x:0,y:0};i(z,function(V,N,P,k,O,D,q,ae,K){switch(V){case"L":Y(N,P,k,O);break;case"Q":{for(var re=N,he=P,me=1;me<L;me++)r(N,P,D,q,k,O,me/(L-1),Q),Y(re,he,Q.x,Q.y),re=Q.x,he=Q.y;break}case"C":{for(var J=N,oe=P,ce=1;ce<L;ce++)n(N,P,D,q,ae,K,k,O,ce/(L-1),Q),Y(J,oe,Q.x,Q.y),J=Q.x,oe=Q.y;break}}})}var s="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",p="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(z,Y){var L=z.getContext?z.getContext("webgl",c):z,Q=l.get(L);if(!Q){let q=function(J){var oe=N[J];if(!oe&&(oe=N[J]=L.getExtension(J),!oe))throw new Error(J+" not supported");return oe},ae=function(J,oe){var ce=L.createShader(oe);return L.shaderSource(ce,J),L.compileShader(ce),ce},K=function(J,oe,ce,ie){if(!P[J]){var W={},j={},ne=L.createProgram();L.attachShader(ne,ae(oe,L.VERTEX_SHADER)),L.attachShader(ne,ae(ce,L.FRAGMENT_SHADER)),L.linkProgram(ne),P[J]={program:ne,transaction:function(Ce){L.useProgram(ne),Ce({setUniform:function(be,Qe){for(var Le=[],Fe=arguments.length-2;Fe-- >0;)Le[Fe]=arguments[Fe+2];var Ge=j[Qe]||(j[Qe]=L.getUniformLocation(ne,Qe));L["uniform"+be].apply(L,[Ge].concat(Le))},setAttribute:function(be,Qe,Le,Fe,Ge){var et=W[be];et||(et=W[be]={buf:L.createBuffer(),loc:L.getAttribLocation(ne,be),data:null}),L.bindBuffer(L.ARRAY_BUFFER,et.buf),L.vertexAttribPointer(et.loc,Qe,L.FLOAT,!1,0,0),L.enableVertexAttribArray(et.loc),V?L.vertexAttribDivisor(et.loc,Fe):q("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(et.loc,Fe),Ge!==et.data&&(L.bufferData(L.ARRAY_BUFFER,Ge,Le),et.data=Ge)}})}}}P[J].transaction(ie)},re=function(J,oe){O++;try{L.activeTexture(L.TEXTURE0+O);var ce=k[J];ce||(ce=k[J]=L.createTexture(),L.bindTexture(L.TEXTURE_2D,ce),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.NEAREST),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.NEAREST)),L.bindTexture(L.TEXTURE_2D,ce),oe(ce,O)}finally{O--}},he=function(J,oe,ce){var ie=L.createFramebuffer();D.push(ie),L.bindFramebuffer(L.FRAMEBUFFER,ie),L.activeTexture(L.TEXTURE0+oe),L.bindTexture(L.TEXTURE_2D,J),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,J,0);try{ce(ie)}finally{L.deleteFramebuffer(ie),L.bindFramebuffer(L.FRAMEBUFFER,D[--D.length-1]||null)}},me=function(){N={},P={},k={},O=-1,D.length=0};var V=typeof WebGL2RenderingContext<"u"&&L instanceof WebGL2RenderingContext,N={},P={},k={},O=-1,D=[];L.canvas.addEventListener("webglcontextlost",function(J){me(),J.preventDefault()},!1),l.set(L,Q={gl:L,isWebGL2:V,getExtension:q,withProgram:K,withTexture:re,withTextureFramebuffer:he,handleContextLoss:me})}Y(Q)}function d(z,Y,L,Q,V,N,P,k){P===void 0&&(P=15),k===void 0&&(k=null),u(z,function(O){var D=O.gl,q=O.withProgram,ae=O.withTexture;ae("copy",function(K,re){D.texImage2D(D.TEXTURE_2D,0,D.RGBA,V,N,0,D.RGBA,D.UNSIGNED_BYTE,Y),q("copy",s,p,function(he){var me=he.setUniform,J=he.setAttribute;J("aUV",2,D.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),me("1i","image",re),D.bindFramebuffer(D.FRAMEBUFFER,k||null),D.disable(D.BLEND),D.colorMask(P&8,P&4,P&2,P&1),D.viewport(L,Q,V,N),D.scissor(L,Q,V,N),D.drawArrays(D.TRIANGLES,0,3)})})})}function f(z,Y,L){var Q=z.width,V=z.height;u(z,function(N){var P=N.gl,k=new Uint8Array(Q*V*4);P.readPixels(0,0,Q,V,P.RGBA,P.UNSIGNED_BYTE,k),z.width=Y,z.height=L,d(P,k,0,0,Q,V)})}var g=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:d,resizeWebGLCanvasWithoutClearing:f});function v(z,Y,L,Q,V,N){N===void 0&&(N=1);var P=new Uint8Array(z*Y),k=Q[2]-Q[0],O=Q[3]-Q[1],D=[];o(L,function(J,oe,ce,ie){D.push({x1:J,y1:oe,x2:ce,y2:ie,minX:Math.min(J,ce),minY:Math.min(oe,ie),maxX:Math.max(J,ce),maxY:Math.max(oe,ie)})}),D.sort(function(J,oe){return J.maxX-oe.maxX});for(var q=0;q<z;q++)for(var ae=0;ae<Y;ae++){var K=he(Q[0]+k*(q+.5)/z,Q[1]+O*(ae+.5)/Y),re=Math.pow(1-Math.abs(K)/V,N)/2;K<0&&(re=1-re),re=Math.max(0,Math.min(255,Math.round(re*255))),P[ae*z+q]=re}return P;function he(J,oe){for(var ce=1/0,ie=1/0,W=D.length;W--;){var j=D[W];if(j.maxX+ie<=J)break;if(J+ie>j.minX&&oe-ie<j.maxY&&oe+ie>j.minY){var ne=h(J,oe,j.x1,j.y1,j.x2,j.y2);ne<ce&&(ce=ne,ie=Math.sqrt(ce))}}return me(J,oe)&&(ie=-ie),ie}function me(J,oe){for(var ce=0,ie=D.length;ie--;){var W=D[ie];if(W.maxX<=J)break;var j=W.y1>oe!=W.y2>oe&&J<(W.x2-W.x1)*(oe-W.y1)/(W.y2-W.y1)+W.x1;j&&(ce+=W.y1<W.y2?1:-1)}return ce!==0}}function A(z,Y,L,Q,V,N,P,k,O,D){N===void 0&&(N=1),k===void 0&&(k=0),O===void 0&&(O=0),D===void 0&&(D=0),m(z,Y,L,Q,V,N,P,null,k,O,D)}function m(z,Y,L,Q,V,N,P,k,O,D,q){N===void 0&&(N=1),O===void 0&&(O=0),D===void 0&&(D=0),q===void 0&&(q=0);for(var ae=v(z,Y,L,Q,V,N),K=new Uint8Array(ae.length*4),re=0;re<ae.length;re++)K[re*4+q]=ae[re];d(P,K,O,D,z,Y,1<<3-q,k)}function h(z,Y,L,Q,V,N){var P=V-L,k=N-Q,O=P*P+k*k,D=O?Math.max(0,Math.min(1,((z-L)*P+(Y-Q)*k)/O)):0,q=z-(L+D*P),ae=Y-(Q+D*k);return q*q+ae*ae}var y=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:A,generateIntoFramebuffer:m}),E="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",b="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",_="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",C=new Float32Array([0,0,2,0,0,2]),B=null,R=!1,M={},x=new WeakMap;function T(z){if(!R&&!G(z))throw new Error("WebGL generation not supported")}function w(z,Y,L,Q,V,N,P){if(N===void 0&&(N=1),P===void 0&&(P=null),!P&&(P=B,!P)){var k=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!k)throw new Error("OffscreenCanvas or DOM canvas not supported");P=B=k.getContext("webgl",{depth:!1})}T(P);var O=new Uint8Array(z*Y*4);u(P,function(K){var re=K.gl,he=K.withTexture,me=K.withTextureFramebuffer;he("readable",function(J,oe){re.texImage2D(re.TEXTURE_2D,0,re.RGBA,z,Y,0,re.RGBA,re.UNSIGNED_BYTE,null),me(J,oe,function(ce){I(z,Y,L,Q,V,N,re,ce,0,0,0),re.readPixels(0,0,z,Y,re.RGBA,re.UNSIGNED_BYTE,O)})})});for(var D=new Uint8Array(z*Y),q=0,ae=0;q<O.length;q+=4)D[ae++]=O[q];return D}function S(z,Y,L,Q,V,N,P,k,O,D){N===void 0&&(N=1),k===void 0&&(k=0),O===void 0&&(O=0),D===void 0&&(D=0),I(z,Y,L,Q,V,N,P,null,k,O,D)}function I(z,Y,L,Q,V,N,P,k,O,D,q){N===void 0&&(N=1),O===void 0&&(O=0),D===void 0&&(D=0),q===void 0&&(q=0),T(P);var ae=[];o(L,function(K,re,he,me){ae.push(K,re,he,me)}),ae=new Float32Array(ae),u(P,function(K){var re=K.gl,he=K.isWebGL2,me=K.getExtension,J=K.withProgram,oe=K.withTexture,ce=K.withTextureFramebuffer,ie=K.handleContextLoss;if(oe("rawDistances",function(W,j){(z!==W._lastWidth||Y!==W._lastHeight)&&re.texImage2D(re.TEXTURE_2D,0,re.RGBA,W._lastWidth=z,W._lastHeight=Y,0,re.RGBA,re.UNSIGNED_BYTE,null),J("main",E,b,function(ne){var ve=ne.setAttribute,Ce=ne.setUniform,we=!he&&me("ANGLE_instanced_arrays"),be=!he&&me("EXT_blend_minmax");ve("aUV",2,re.STATIC_DRAW,0,C),ve("aLineSegment",4,re.DYNAMIC_DRAW,1,ae),Ce.apply(void 0,["4f","uGlyphBounds"].concat(Q)),Ce("1f","uMaxDistance",V),Ce("1f","uExponent",N),ce(W,j,function(Qe){re.enable(re.BLEND),re.colorMask(!0,!0,!0,!0),re.viewport(0,0,z,Y),re.scissor(0,0,z,Y),re.blendFunc(re.ONE,re.ONE),re.blendEquationSeparate(re.FUNC_ADD,he?re.MAX:be.MAX_EXT),re.clear(re.COLOR_BUFFER_BIT),he?re.drawArraysInstanced(re.TRIANGLES,0,3,ae.length/4):we.drawArraysInstancedANGLE(re.TRIANGLES,0,3,ae.length/4)})}),J("post",s,_,function(ne){ne.setAttribute("aUV",2,re.STATIC_DRAW,0,C),ne.setUniform("1i","tex",j),re.bindFramebuffer(re.FRAMEBUFFER,k),re.disable(re.BLEND),re.colorMask(q===0,q===1,q===2,q===3),re.viewport(O,D,z,Y),re.scissor(O,D,z,Y),re.drawArrays(re.TRIANGLES,0,3)})}),re.isContextLost())throw ie(),new Error("webgl context lost")})}function G(z){var Y=!z||z===B?M:z.canvas||z,L=x.get(Y);if(L===void 0){R=!0;var Q=null;try{var V=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],N=w(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,z);L=N&&V.length===N.length&&N.every(function(P,k){return P===V[k]}),L||(Q="bad trial run results",console.info(V,N))}catch(P){L=!1,Q=P.message}Q&&console.warn("WebGL SDF generation not supported:",Q),R=!1,x.set(Y,L)}return L}var H=Object.freeze({__proto__:null,generate:w,generateIntoCanvas:S,generateIntoFramebuffer:I,isSupported:G});function X(z,Y,L,Q,V,N){V===void 0&&(V=Math.max(Q[2]-Q[0],Q[3]-Q[1])/2),N===void 0&&(N=1);try{return w.apply(H,arguments)}catch(P){return console.info("WebGL SDF generation failed, falling back to JS",P),v.apply(y,arguments)}}function Z(z,Y,L,Q,V,N,P,k,O,D){V===void 0&&(V=Math.max(Q[2]-Q[0],Q[3]-Q[1])/2),N===void 0&&(N=1),k===void 0&&(k=0),O===void 0&&(O=0),D===void 0&&(D=0);try{return S.apply(H,arguments)}catch(q){return console.info("WebGL SDF generation failed, falling back to JS",q),A.apply(y,arguments)}}return e.forEachPathCommand=i,e.generate=X,e.generateIntoCanvas=Z,e.javascript=y,e.pathToLineSegments=o,e.webgl=H,e.webglUtils=g,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return t}function LD(){var t=(function(e){var r={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},i={};n.L=1,i[1]="L",Object.keys(r).forEach(function(ie,W){n[ie]=1<<W+1,i[n[ie]]=ie}),Object.freeze(n);var o=n.LRI|n.RLI|n.FSI,s=n.L|n.R|n.AL,p=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,l=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,c=n.S|n.WS|n.B|o|n.PDI|l,u=null;function d(){if(!u){u=new Map;var ie=function(j){if(r.hasOwnProperty(j)){var ne=0;r[j].split(",").forEach(function(ve){var Ce=ve.split("+"),we=Ce[0],be=Ce[1];we=parseInt(we,36),be=be?parseInt(be,36):0,u.set(ne+=we,n[j]);for(var Qe=0;Qe<be;Qe++)u.set(++ne,n[j])})}};for(var W in r)ie(W)}}function f(ie){return d(),u.get(ie.codePointAt(0))||n.L}function g(ie){return i[f(ie)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function A(ie,W){var j=36,ne=0,ve=new Map,Ce=W&&new Map,we;return ie.split(",").forEach(function be(Qe){if(Qe.indexOf("+")!==-1)for(var Le=+Qe;Le--;)be(we);else{we=Qe;var Fe=Qe.split(">"),Ge=Fe[0],et=Fe[1];Ge=String.fromCodePoint(ne+=parseInt(Ge,j)),et=String.fromCodePoint(ne+=parseInt(et,j)),ve.set(Ge,et),W&&Ce.set(et,Ge)}}),{map:ve,reverseMap:Ce}}var m,h,y;function E(){if(!m){var ie=A(v.pairs,!0),W=ie.map,j=ie.reverseMap;m=W,h=j,y=A(v.canonical,!1).map}}function b(ie){return E(),m.get(ie)||null}function _(ie){return E(),h.get(ie)||null}function C(ie){return E(),y.get(ie)||null}var B=n.L,R=n.R,M=n.EN,x=n.ES,T=n.ET,w=n.AN,S=n.CS,I=n.B,G=n.S,H=n.ON,X=n.BN,Z=n.NSM,z=n.AL,Y=n.LRO,L=n.RLO,Q=n.LRE,V=n.RLE,N=n.PDF,P=n.LRI,k=n.RLI,O=n.FSI,D=n.PDI;function q(ie,W){for(var j=125,ne=new Uint32Array(ie.length),ve=0;ve<ie.length;ve++)ne[ve]=f(ie[ve]);var Ce=new Map;function we(Xo,Vi){var Jo=ne[Xo];ne[Xo]=Vi,Ce.set(Jo,Ce.get(Jo)-1),Jo&p&&Ce.set(p,Ce.get(p)-1),Ce.set(Vi,(Ce.get(Vi)||0)+1),Vi&p&&Ce.set(p,(Ce.get(p)||0)+1)}for(var be=new Uint8Array(ie.length),Qe=new Map,Le=[],Fe=null,Ge=0;Ge<ie.length;Ge++)Fe||Le.push(Fe={start:Ge,end:ie.length-1,level:W==="rtl"?1:W==="ltr"?0:ev(Ge,!1)}),ne[Ge]&I&&(Fe.end=Ge,Fe=null);for(var et=V|Q|L|Y|o|D|N|I,gt=function(Xo){return Xo+(Xo&1?1:2)},je=function(Xo){return Xo+(Xo&1?2:1)},pt=0;pt<Le.length;pt++){Fe=Le[pt];var De=[{_level:Fe.level,_override:0,_isolate:0}],ze=void 0,ee=0,Ae=0,_e=0;Ce.clear();for(var Ie=Fe.start;Ie<=Fe.end;Ie++){var ye=ne[Ie];if(ze=De[De.length-1],Ce.set(ye,(Ce.get(ye)||0)+1),ye&p&&Ce.set(p,(Ce.get(p)||0)+1),ye&et)if(ye&(V|Q)){be[Ie]=ze._level;var dt=(ye===V?je:gt)(ze._level);dt<=j&&!ee&&!Ae?De.push({_level:dt,_override:0,_isolate:0}):ee||Ae++}else if(ye&(L|Y)){be[Ie]=ze._level;var nr=(ye===L?je:gt)(ze._level);nr<=j&&!ee&&!Ae?De.push({_level:nr,_override:ye&L?R:B,_isolate:0}):ee||Ae++}else if(ye&o){ye&O&&(ye=ev(Ie+1,!0)===1?k:P),be[Ie]=ze._level,ze._override&&we(Ie,ze._override);var Bn=(ye===k?je:gt)(ze._level);Bn<=j&&ee===0&&Ae===0?(_e++,De.push({_level:Bn,_override:0,_isolate:1,_isolInitIndex:Ie})):ee++}else if(ye&D){if(ee>0)ee--;else if(_e>0){for(Ae=0;!De[De.length-1]._isolate;)De.pop();var ci=De[De.length-1]._isolInitIndex;ci!=null&&(Qe.set(ci,Ie),Qe.set(Ie,ci)),De.pop(),_e--}ze=De[De.length-1],be[Ie]=ze._level,ze._override&&we(Ie,ze._override)}else ye&N?(ee===0&&(Ae>0?Ae--:!ze._isolate&&De.length>1&&(De.pop(),ze=De[De.length-1])),be[Ie]=ze._level):ye&I&&(be[Ie]=Fe.level);else be[Ie]=ze._level,ze._override&&ye!==X&&we(Ie,ze._override)}for(var gr=[],dr=null,Lt=Fe.start;Lt<=Fe.end;Lt++){var di=ne[Lt];if(!(di&l)){var Nt=be[Lt],Ut=di&o,ui=di===D;dr&&Nt===dr._level?(dr._end=Lt,dr._endsWithIsolInit=Ut):gr.push(dr={_start:Lt,_end:Lt,_level:Nt,_startsWithPDI:ui,_endsWithIsolInit:Ut})}}for(var Po=[],Rt=0;Rt<gr.length;Rt++){var Xr=gr[Rt];if(!Xr._startsWithPDI||Xr._startsWithPDI&&!Qe.has(Xr._start)){for(var io=[dr=Xr],Br=void 0;dr&&dr._endsWithIsolInit&&(Br=Qe.get(dr._end))!=null;)for(var Ue=Rt+1;Ue<gr.length;Ue++)if(gr[Ue]._start===Br){io.push(dr=gr[Ue]);break}for(var no=[],xn=0;xn<io.length;xn++)for(var F=io[xn],U=F._start;U<=F._end;U++)no.push(U);for(var $=be[no[0]],le=Fe.level,ue=no[0]-1;ue>=0;ue--)if(!(ne[ue]&l)){le=be[ue];break}var fe=no[no.length-1],Re=be[fe],Ee=Fe.level;if(!(ne[fe]&o)){for(var Be=fe+1;Be<=Fe.end;Be++)if(!(ne[Be]&l)){Ee=be[Be];break}}Po.push({_seqIndices:no,_sosType:Math.max(le,$)%2?R:B,_eosType:Math.max(Ee,Re)%2?R:B})}}for(var xe=0;xe<Po.length;xe++){var Me=Po[xe],de=Me._seqIndices,jt=Me._sosType,Pe=Me._eosType,Oe=be[de[0]]&1?R:B;if(Ce.get(Z))for(var qe=0;qe<de.length;qe++){var it=de[qe];if(ne[it]&Z){for(var wt=jt,Tt=qe-1;Tt>=0;Tt--)if(!(ne[de[Tt]]&l)){wt=ne[de[Tt]];break}we(it,wt&(o|D)?H:wt)}}if(Ce.get(M))for(var hr=0;hr<de.length;hr++){var ao=de[hr];if(ne[ao]&M)for(var St=hr-1;St>=-1;St--){var fi=St===-1?jt:ne[de[St]];if(fi&s){fi===z&&we(ao,w);break}}}if(Ce.get(z))for(var Ht=0;Ht<de.length;Ht++){var kr=de[Ht];ne[kr]&z&&we(kr,R)}if(Ce.get(x)||Ce.get(S))for(var Go=1;Go<de.length-1;Go++){var qn=de[Go];if(ne[qn]&(x|S)){for(var Jr=0,It=0,Ur=Go-1;Ur>=0&&(Jr=ne[de[Ur]],!!(Jr&l));Ur--);for(var Yt=Go+1;Yt<de.length&&(It=ne[de[Yt]],!!(It&l));Yt++);Jr===It&&(ne[qn]===x?Jr===M:Jr&(M|w))&&we(qn,Jr)}}if(Ce.get(M))for(var st=0;st<de.length;st++){var Ko=de[st];if(ne[Ko]&M){for(var Bi=st-1;Bi>=0&&ne[de[Bi]]&(T|l);Bi--)we(de[Bi],M);for(st++;st<de.length&&ne[de[st]]&(T|l|M);st++)ne[de[st]]!==M&&we(de[st],M)}}if(Ce.get(T)||Ce.get(x)||Ce.get(S))for(var qr=0;qr<de.length;qr++){var Qi=de[qr];if(ne[Qi]&(T|x|S)){we(Qi,H);for(var yu=qr-1;yu>=0&&ne[de[yu]]&l;yu--)we(de[yu],H);for(var vu=qr+1;vu<de.length&&ne[de[vu]]&l;vu++)we(de[vu],H)}}if(Ce.get(M))for(var um=0,j3=jt;um<de.length;um++){var H3=de[um],fm=ne[H3];fm&M?j3===B&&we(H3,B):fm&s&&(j3=fm)}if(Ce.get(p)){var Hl=R|M|w,Q3=Hl|B,Eu=[];{for(var np=[],ap=0;ap<de.length;ap++)if(ne[de[ap]]&p){var Ql=ie[de[ap]],W3=void 0;if(b(Ql)!==null)if(np.length<63)np.push({char:Ql,seqIndex:ap});else break;else if((W3=_(Ql))!==null)for(var Wl=np.length-1;Wl>=0;Wl--){var gm=np[Wl].char;if(gm===W3||gm===_(C(Ql))||b(C(gm))===Ql){Eu.push([np[Wl].seqIndex,ap]),np.length=Wl;break}}}Eu.sort(function(Xo,Vi){return Xo[0]-Vi[0]})}for(var hm=0;hm<Eu.length;hm++){for(var V3=Eu[hm],bu=V3[0],mm=V3[1],Y3=!1,Wi=0,Am=bu+1;Am<mm;Am++){var K3=de[Am];if(ne[K3]&Q3){Y3=!0;var X3=ne[K3]&Hl?R:B;if(X3===Oe){Wi=X3;break}}}if(Y3&&!Wi){Wi=jt;for(var ym=bu-1;ym>=0;ym--){var J3=de[ym];if(ne[J3]&Q3){var q3=ne[J3]&Hl?R:B;q3!==Oe?Wi=q3:Wi=Oe;break}}}if(Wi){if(ne[de[bu]]=ne[de[mm]]=Wi,Wi!==Oe){for(var Vl=bu+1;Vl<de.length;Vl++)if(!(ne[de[Vl]]&l)){f(ie[de[Vl]])&Z&&(ne[de[Vl]]=Wi);break}}if(Wi!==Oe){for(var Yl=mm+1;Yl<de.length;Yl++)if(!(ne[de[Yl]]&l)){f(ie[de[Yl]])&Z&&(ne[de[Yl]]=Wi);break}}}}for(var va=0;va<de.length;va++)if(ne[de[va]]&p){for(var Z3=va,vm=va,Em=jt,Kl=va-1;Kl>=0;Kl--)if(ne[de[Kl]]&l)Z3=Kl;else{Em=ne[de[Kl]]&Hl?R:B;break}for(var $3=Pe,Xl=va+1;Xl<de.length;Xl++)if(ne[de[Xl]]&(p|l))vm=Xl;else{$3=ne[de[Xl]]&Hl?R:B;break}for(var bm=Z3;bm<=vm;bm++)ne[de[bm]]=Em===$3?Em:Oe;va=vm}}}for(var gi=Fe.start;gi<=Fe.end;gi++){var V5=be[gi],_u=ne[gi];if(V5&1?_u&(B|M|w)&&be[gi]++:_u&R?be[gi]++:_u&(w|M)&&(be[gi]+=2),_u&l&&(be[gi]=gi===0?Fe.level:be[gi-1]),gi===Fe.end||f(ie[gi])&(G|I))for(var Cu=gi;Cu>=0&&f(ie[Cu])&c;Cu--)be[Cu]=Fe.level}}return{levels:be,paragraphs:Le};function ev(Xo,Vi){for(var Jo=Xo;Jo<ie.length;Jo++){var Ea=ne[Jo];if(Ea&(R|z))return 1;if(Ea&(I|B)||Vi&&Ea===D)return 0;if(Ea&o){var tv=Y5(Jo);Jo=tv===-1?ie.length:tv}}return 0}function Y5(Xo){for(var Vi=1,Jo=Xo+1;Jo<ie.length;Jo++){var Ea=ne[Jo];if(Ea&I)break;if(Ea&D){if(--Vi===0)return Jo}else Ea&o&&Vi++}return-1}}var ae="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",K;function re(){if(!K){var ie=A(ae,!0),W=ie.map,j=ie.reverseMap;j.forEach(function(ne,ve){W.set(ve,ne)}),K=W}}function he(ie){return re(),K.get(ie)||null}function me(ie,W,j,ne){var ve=ie.length;j=Math.max(0,j==null?0:+j),ne=Math.min(ve-1,ne==null?ve-1:+ne);for(var Ce=new Map,we=j;we<=ne;we++)if(W[we]&1){var be=he(ie[we]);be!==null&&Ce.set(we,be)}return Ce}function J(ie,W,j,ne){var ve=ie.length;j=Math.max(0,j==null?0:+j),ne=Math.min(ve-1,ne==null?ve-1:+ne);var Ce=[];return W.paragraphs.forEach(function(we){var be=Math.max(j,we.start),Qe=Math.min(ne,we.end);if(be<Qe){for(var Le=W.levels.slice(be,Qe+1),Fe=Qe;Fe>=be&&f(ie[Fe])&c;Fe--)Le[Fe]=we.level;for(var Ge=we.level,et=1/0,gt=0;gt<Le.length;gt++){var je=Le[gt];je>Ge&&(Ge=je),je<et&&(et=je|1)}for(var pt=Ge;pt>=et;pt--)for(var De=0;De<Le.length;De++)if(Le[De]>=pt){for(var ze=De;De+1<Le.length&&Le[De+1]>=pt;)De++;De>ze&&Ce.push([ze+be,De+be])}}}),Ce}function oe(ie,W,j,ne){var ve=ce(ie,W,j,ne),Ce=[].concat(ie);return ve.forEach(function(we,be){Ce[be]=(W.levels[we]&1?he(ie[we]):null)||ie[we]}),Ce.join("")}function ce(ie,W,j,ne){for(var ve=J(ie,W,j,ne),Ce=[],we=0;we<ie.length;we++)Ce[we]=we;return ve.forEach(function(be){for(var Qe=be[0],Le=be[1],Fe=Ce.slice(Qe,Le+1),Ge=Fe.length;Ge--;)Ce[Le-Ge]=Fe[Ge]}),Ce}return e.closingToOpeningBracket=_,e.getBidiCharType=f,e.getBidiCharTypeName=g,e.getCanonicalBracket=C,e.getEmbeddingLevels=q,e.getMirroredCharacter=he,e.getMirroredCharactersMap=me,e.getReorderSegments=J,e.getReorderedIndices=ce,e.getReorderedString=oe,e.openingToClosingBracket=b,Object.defineProperty(e,"__esModule",{value:!0}),e})({});return t}var mC=LD;import{ShaderChunk as PD,UniformsUtils as GD,MeshDepthMaterial as zD,RGBADepthPacking as ND,MeshDistanceMaterial as UD,ShaderLib as Hte,Matrix4 as Qte,Vector3 as Wte,Mesh as Vte,CylinderGeometry as Yte,Vector2 as Kte,MeshStandardMaterial as Xte,DoubleSide as Jte}from"three";var LA=/\bvoid\s+main\s*\(\s*\)\s*{/g;function kA(t){let e=/^[ \t]*#include +<([\w\d./]+)>/gm;function r(n,i){let o=PD[i];return o?kA(o):n}return t.replace(e,r)}var bo=[];for(let t=0;t<256;t++)bo[t]=(t<16?"0":"")+t.toString(16);function jD(){let t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(bo[t&255]+bo[t>>8&255]+bo[t>>16&255]+bo[t>>24&255]+"-"+bo[e&255]+bo[e>>8&255]+"-"+bo[e>>16&15|64]+bo[e>>24&255]+"-"+bo[r&63|128]+bo[r>>8&255]+"-"+bo[r>>16&255]+bo[r>>24&255]+bo[n&255]+bo[n>>8&255]+bo[n>>16&255]+bo[n>>24&255]).toUpperCase()}var Gs=Object.assign||function(){let t=arguments[0];for(let e=1,r=arguments.length;e<r;e++){let n=arguments[e];if(n)for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},HD=Date.now(),AC=new WeakMap,yC=new Map,QD=1e10;function gg(t,e){let r=KD(e),n=AC.get(t);if(n||AC.set(t,n=Object.create(null)),n[r])return new n[r];let i=`_onBeforeCompile${r}`,o=function(c,u){t.onBeforeCompile.call(this,c,u);let d=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader,f=yC[d];if(!f){let g=WD(this,c,e,r);f=yC[d]=g}c.vertexShader=f.vertexShader,c.fragmentShader=f.fragmentShader,Gs(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-HD}}),this[i]&&this[i](c)},s=function(){return p(e.chained?t:t.clone())},p=function(c){let u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:t}),Object.defineProperty(u,"id",{value:QD++}),u.uuid=jD(),u.uniforms=Gs({},c.uniforms,e.uniforms),u.defines=Gs({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${r}`]="",u.extensions=Gs({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:s},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+r}},onBeforeCompile:{get(){return o},set(c){this[i]=c}},copy:{writable:!0,configurable:!0,value:function(c){return t.copy.call(this,c),!t.isShaderMaterial&&!t.isDerivedMaterial&&(Gs(this.extensions,c.extensions),Gs(this.defines,c.defines),Gs(this.uniforms,GD.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){let c=new t.constructor;return p(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=gg(t.isDerivedMaterial?t.getDepthMaterial():new zD({depthPacking:ND}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=gg(t.isDerivedMaterial?t.getDistanceMaterial():new UD,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){let{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),t.dispose.call(this)}}};return n[r]=s,new s}function WD(t,{vertexShader:e,fragmentShader:r},n,i){let{vertexDefs:o,vertexMainIntro:s,vertexMainOutro:p,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:d,fragmentColorTransform:f,customRewriter:g,timeUniform:v}=n;if(o=o||"",s=s||"",p=p||"",c=c||"",u=u||"",d=d||"",(l||g)&&(e=kA(e)),(f||g)&&(r=r.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),r=kA(r)),g){let A=g({vertexShader:e,fragmentShader:r});e=A.vertexShader,r=A.fragmentShader}if(f){let A=[];r=r.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,m=>(A.push(m),"")),d=`${f}
${A.join(`
`)}
${d}`}if(v){let A=`
uniform float ${v};
`;o=A+o,c=A+c}return l&&(e=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${e}
`,o=`${o}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,s=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${s}
`,e=e.replace(/\b(position|normal|uv)\b/g,(A,m,h,y)=>/\battribute\s+vec[23]\s+$/.test(y.substr(0,h))?m:`troika_${m}_${i}`),t.map&&t.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),e=vC(e,i,o,s,p),r=vC(r,i,c,u,d),{vertexShader:e,fragmentShader:r}}function vC(t,e,r,n,i){return(n||i||r)&&(t=t.replace(LA,`
${r}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${i}
}`),t}function VD(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}var YD=0,EC=new Map;function KD(t){let e=JSON.stringify(t,VD),r=EC.get(e);return r==null&&EC.set(e,r=++YD),r}function sk(t,e,r){let{defaultFontURL:n}=r,i=Object.create(null),o=1/0,s=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,p="[^\\S\\u00A0]",l=new RegExp(`${p}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function c(y,E){function b(){let _=C=>{console.error(`Failure loading font ${y}${y===n?"":"; trying fallback"}`,C),y!==n&&(y=n,b())};try{let C=new XMLHttpRequest;C.open("get",y,!0),C.responseType="arraybuffer",C.onload=function(){if(C.status>=400)_(new Error(C.statusText));else if(C.status>0)try{let B=t(C.response);E(B)}catch(B){_(B)}},C.onerror=_,C.send()}catch(C){_(C)}}b()}function u(y,E){y||(y=n);let b=i[y];b?b.pending?b.pending.push(E):E(b):(i[y]={pending:[E]},c(y,_=>{let C=i[y].pending;i[y]=_,C.forEach(B=>B(_))}))}function d({text:y="",font:E=n,sdfGlyphSize:b=64,fontSize:_=1,letterSpacing:C=0,lineHeight:B="normal",maxWidth:R=o,direction:M,textAlign:x="left",textIndent:T=0,whiteSpace:w="normal",overflowWrap:S="normal",anchorX:I=0,anchorY:G=0,includeCaretPositions:H=!1,chunkedBoundsSize:X=8192,colorRanges:Z=null},z,Y=!1){let L=A(),Q={fontLoad:0,typesetting:0};y.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),y=y.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),_=+_,C=+C,R=+R,B=B||"normal",T=+T,u(E,V=>{let N=isFinite(R),P=null,k=null,O=null,D=null,q=null,ae=null,K=null,re=0,he=0,me=w!=="nowrap",{ascender:J,descender:oe,unitsPerEm:ce,lineGap:ie,capHeight:W,xHeight:j}=V;Q.fontLoad=A()-L;let ne=A(),ve=_/ce;B==="normal"&&(B=(J-oe+ie)/ce),B=B*_;let Ce=(B-(J-oe)*ve)/2,we=-(J*ve+Ce),be=Math.min(B,(J-oe)*ve),Qe=(J+oe)/2*ve-be/2,Le=T,Fe=new m,Ge=[Fe];V.forEachGlyph(y,_,C,(je,pt,De)=>{let ze=y.charAt(De),ee=je.advanceWidth*ve,Ae=Fe.count,_e;if("isEmpty"in je||(je.isWhitespace=!!ze&&new RegExp(p).test(ze),je.canBreakAfter=!!ze&&l.test(ze),je.isEmpty=je.xMin===je.xMax||je.yMin===je.yMax||s.test(ze)),!je.isWhitespace&&!je.isEmpty&&he++,me&&N&&!je.isWhitespace&&pt+ee+Le>R&&Ae){if(Fe.glyphAt(Ae-1).glyphObj.canBreakAfter)_e=new m,Le=-pt;else for(let ye=Ae;ye--;)if(ye===0&&S==="break-word"){_e=new m,Le=-pt;break}else if(Fe.glyphAt(ye).glyphObj.canBreakAfter){_e=Fe.splitAt(ye+1);let dt=_e.glyphAt(0).x;Le-=dt;for(let nr=_e.count;nr--;)_e.glyphAt(nr).x-=dt;break}_e&&(Fe.isSoftWrapped=!0,Fe=_e,Ge.push(Fe),re=R)}let Ie=Fe.glyphAt(Fe.count);Ie.glyphObj=je,Ie.x=pt+Le,Ie.width=ee,Ie.charIndex=De,ze===`
`&&(Fe=new m,Ge.push(Fe),Le=-(pt+ee+C*_)+T)}),Ge.forEach(je=>{for(let pt=je.count;pt--;){let{glyphObj:De,x:ze,width:ee}=je.glyphAt(pt);if(!De.isWhitespace){je.width=ze+ee,je.width>re&&(re=je.width);return}}});let et=0,gt=0;if(I&&(typeof I=="number"?et=-I:typeof I=="string"&&(et=-re*(I==="left"?0:I==="center"?.5:I==="right"?1:g(I)))),G){if(typeof G=="number")gt=-G;else if(typeof G=="string"){let je=Ge.length*B;gt=G==="top"?0:G==="top-baseline"?-we:G==="top-cap"?-we-W*ve:G==="top-ex"?-we-j*ve:G==="middle"?je/2:G==="bottom"?je:G==="bottom-baseline"?je-Ce+oe*ve:g(G)*je}}if(!Y){let je=e.getEmbeddingLevels(y,M);P=new Uint16Array(he),k=new Float32Array(he*2),O={},ae=[o,o,-o,-o],K=[];let pt=we;H&&(q=new Float32Array(y.length*3)),Z&&(D=new Uint8Array(he*3));let De=0,ze=-1,ee=-1,Ae,_e;if(Ge.forEach((Ie,ye)=>{let{count:dt,width:nr}=Ie;if(dt>0){let Bn=0;for(let Nt=dt;Nt--&&Ie.glyphAt(Nt).glyphObj.isWhitespace;)Bn++;let ci=0,gr=0;if(x==="center")ci=(re-nr)/2;else if(x==="right")ci=re-nr;else if(x==="justify"&&Ie.isSoftWrapped){let Nt=0;for(let Ut=dt-Bn;Ut--;)Ie.glyphAt(Ut).glyphObj.isWhitespace&&Nt++;gr=(re-nr)/Nt}if(gr||ci){let Nt=0;for(let Ut=0;Ut<dt;Ut++){let ui=Ie.glyphAt(Ut),Po=ui.glyphObj;ui.x+=ci+Nt,gr!==0&&Po.isWhitespace&&Ut<dt-Bn&&(Nt+=gr,ui.width+=gr)}}let dr=e.getReorderSegments(y,je,Ie.glyphAt(0).charIndex,Ie.glyphAt(Ie.count-1).charIndex);for(let Nt=0;Nt<dr.length;Nt++){let[Ut,ui]=dr[Nt],Po=1/0,Rt=-1/0;for(let Xr=0;Xr<dt;Xr++)if(Ie.glyphAt(Xr).charIndex>=Ut){let io=Xr,Br=Xr;for(;Br<dt;Br++){let Ue=Ie.glyphAt(Br);if(Ue.charIndex>ui)break;Br<dt-Bn&&(Po=Math.min(Po,Ue.x),Rt=Math.max(Rt,Ue.x+Ue.width))}for(let Ue=io;Ue<Br;Ue++){let no=Ie.glyphAt(Ue);no.x=Rt-(no.x+no.width-Po)}break}}let Lt,di=Nt=>Lt=Nt;for(let Nt=0;Nt<dt;Nt++){let Ut=Ie.glyphAt(Nt);Lt=Ut.glyphObj;let ui=Lt.index,Po=je.levels[Ut.charIndex]&1;if(Po){let Rt=e.getMirroredCharacter(y[Ut.charIndex]);Rt&&V.forEachGlyph(Rt,0,0,di)}if(H){let{charIndex:Rt}=Ut,Xr=Ut.x+et,io=Ut.x+Ut.width+et;q[Rt*3]=Po?io:Xr,q[Rt*3+1]=Po?Xr:io,q[Rt*3+2]=pt+Qe+gt;let Br=Rt-ze;Br>1&&v(q,ze,Br),ze=Rt}if(Z){let{charIndex:Rt}=Ut;for(;Rt>ee;)ee++,Z.hasOwnProperty(ee)&&(_e=Z[ee])}if(!Lt.isWhitespace&&!Lt.isEmpty){let Rt=De++;O[ui]||(O[ui]={path:Lt.path,pathBounds:[Lt.xMin,Lt.yMin,Lt.xMax,Lt.yMax]});let Xr=Ut.x+et,io=pt+gt;k[Rt*2]=Xr,k[Rt*2+1]=io;let Br=Xr+Lt.xMin*ve,Ue=io+Lt.yMin*ve,no=Xr+Lt.xMax*ve,xn=io+Lt.yMax*ve;Br<ae[0]&&(ae[0]=Br),Ue<ae[1]&&(ae[1]=Ue),no>ae[2]&&(ae[2]=no),xn>ae[3]&&(ae[3]=xn),Rt%X===0&&(Ae={start:Rt,end:Rt,rect:[o,o,-o,-o]},K.push(Ae)),Ae.end++;let F=Ae.rect;if(Br<F[0]&&(F[0]=Br),Ue<F[1]&&(F[1]=Ue),no>F[2]&&(F[2]=no),xn>F[3]&&(F[3]=xn),P[Rt]=ui,Z){let U=Rt*3;D[U]=_e>>16&255,D[U+1]=_e>>8&255,D[U+2]=_e&255}}}}pt-=B}),q){let Ie=y.length-ze;Ie>1&&v(q,ze,Ie)}}Q.typesetting=A()-ne,z({glyphIds:P,glyphPositions:k,glyphData:O,caretPositions:q,caretHeight:be,glyphColors:D,chunkedBounds:K,fontSize:_,unitsPerEm:ce,ascender:J*ve,descender:oe*ve,capHeight:W*ve,xHeight:j*ve,lineHeight:B,topBaseline:we,blockBounds:[et,gt-Ge.length*B,et+re,gt],visibleBounds:ae,timings:Q})})}function f(y,E){d(y,b=>{let[_,C,B,R]=b.blockBounds;E({width:B-_,height:R-C})},{metricsOnly:!0})}function g(y){let E=y.match(/^([\d.]+)%$/),b=E?parseFloat(E[1]):NaN;return isNaN(b)?0:b/100}function v(y,E,b){let _=y[E*3],C=y[E*3+1],B=y[E*3+2],R=(C-_)/b;for(let M=0;M<b;M++){let x=(E+M)*3;y[x]=_+R*M,y[x+1]=_+R*(M+1),y[x+2]=B}}function A(){return(self.performance||Date).now()}function m(){this.data=[]}let h=["glyphObj","x","width","charIndex"];return m.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(y){let E=m.flyweight;return E.data=this.data,E.index=y,E},splitAt(y){let E=new m;return E.data=this.data.splice(y*h.length),E}},m.flyweight=h.reduce((y,E,b,_)=>(Object.defineProperty(y,E,{get(){return this.data[this.index*h.length+b]},set(C){this.data[this.index*h.length+b]=C}}),y),{data:null,index:0}),{typeset:d,measure:f,loadFont:u}}var zs=()=>(self.performance||Date).now(),vg=DA(),CC;function pk(t,e,r,n,i,o,s,p,l,c,u=!0){return u?ck(t,e,r,n,i,o,s,p,l,c).then(null,d=>(CC||(console.warn("WebGL SDF generation failed, falling back to JS",d),CC=!0),BC(t,e,r,n,i,o,s,p,l,c))):BC(t,e,r,n,i,o,s,p,l,c)}var Ag=[],lk=5,NA=0;function OC(){let t=zs();for(;Ag.length&&zs()-t<lk;)Ag.shift()();NA=Ag.length?setTimeout(OC,0):0}var ck=(...t)=>new Promise((e,r)=>{Ag.push(()=>{let n=zs();try{vg.webgl.generateIntoCanvas(...t),e({timing:zs()-n})}catch(i){r(i)}}),NA||(NA=setTimeout(OC,0))}),dk=4,uk=2e3,RC={},fk=0;function BC(t,e,r,n,i,o,s,p,l,c){let u="TroikaTextSDFGenerator_JS_"+fk++%dk,d=RC[u];return d||(d=RC[u]={workerModule:Qp({name:u,workerId:u,dependencies:[DA,zs],init(f,g){let v=f().javascript.generate;return function(...A){let m=g();return{textureData:v(...A),timing:g()-m}}},getTransferables(f){return[f.textureData.buffer]}}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(t,e,r,n,i,o).then(({textureData:f,timing:g})=>{let v=zs(),A=new Uint8Array(f.length*4);for(let m=0;m<f.length;m++)A[m*4+c]=f[m];return vg.webglUtils.renderImageData(s,A,p,l,t,e,1<<3-c),g+=zs()-v,--d.requests===0&&(d.idleTimer=setTimeout(()=>{hC(u)},uk)),{timing:g}})}function gk(t){t._warm||(vg.webgl.isSupported(t),t._warm=!0)}var hk=vg.webglUtils.resizeWebGLCanvasWithoutClearing;function mk(){return typeof window>"u"&&(self.window=self),(function(t){var e={parse:function(i){var o=e._bin,s=new Uint8Array(i);if(o.readASCII(s,0,4)=="ttcf"){var p=4;o.readUshort(s,p),p+=2,o.readUshort(s,p),p+=2;var l=o.readUint(s,p);p+=4;for(var c=[],u=0;u<l;u++){var d=o.readUint(s,p);p+=4,c.push(e._readFont(s,d))}return c}return[e._readFont(s,0)]},_readFont:function(i,o){var s=e._bin,p=o;s.readFixed(i,o),o+=4;var l=s.readUshort(i,o);o+=2,s.readUshort(i,o),o+=2,s.readUshort(i,o),o+=2,s.readUshort(i,o),o+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:i,_offset:p},d={},f=0;f<l;f++){var g=s.readASCII(i,o,4);o+=4,s.readUint(i,o),o+=4;var v=s.readUint(i,o);o+=4;var A=s.readUint(i,o);o+=4,d[g]={offset:v,length:A}}for(f=0;f<c.length;f++){var m=c[f];d[m]&&(u[m.trim()]=e[m.trim()].parse(i,d[m].offset,d[m].length,u))}return u},_tabOffset:function(i,o,s){for(var p=e._bin,l=p.readUshort(i,s+4),c=s+12,u=0;u<l;u++){var d=p.readASCII(i,c,4);c+=4,p.readUint(i,c),c+=4;var f=p.readUint(i,c);if(c+=4,p.readUint(i,c),c+=4,d==o)return f}return 0}};e._bin={readFixed:function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<8|i[o+3])/65540},readF2dot14:function(i,o){return e._bin.readShort(i,o)/16384},readInt:function(i,o){return e._bin._view(i).getInt32(o)},readInt8:function(i,o){return e._bin._view(i).getInt8(o)},readShort:function(i,o){return e._bin._view(i).getInt16(o)},readUshort:function(i,o){return e._bin._view(i).getUint16(o)},readUshorts:function(i,o,s){for(var p=[],l=0;l<s;l++)p.push(e._bin.readUshort(i,o+2*l));return p},readUint:function(i,o){return e._bin._view(i).getUint32(o)},readUint64:function(i,o){return 4294967296*e._bin.readUint(i,o)+e._bin.readUint(i,o+4)},readASCII:function(i,o,s){for(var p="",l=0;l<s;l++)p+=String.fromCharCode(i[o+l]);return p},readUnicode:function(i,o,s){for(var p="",l=0;l<s;l++){var c=i[o++]<<8|i[o++];p+=String.fromCharCode(c)}return p},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,o,s){var p=e._bin._tdec;return p&&o==0&&s==i.length?p.decode(i):e._bin.readASCII(i,o,s)},readBytes:function(i,o,s){for(var p=[],l=0;l<s;l++)p.push(i[o+l]);return p},readASCIIArray:function(i,o,s){for(var p=[],l=0;l<s;l++)p.push(String.fromCharCode(i[o+l]));return p},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,o,s,p,l){var c=e._bin,u={},d=o;c.readFixed(i,o),o+=4;var f=c.readUshort(i,o);o+=2;var g=c.readUshort(i,o);o+=2;var v=c.readUshort(i,o);return o+=2,u.scriptList=e._lctf.readScriptList(i,d+f),u.featureList=e._lctf.readFeatureList(i,d+g),u.lookupList=e._lctf.readLookupList(i,d+v,l),u},e._lctf.readLookupList=function(i,o,s){var p=e._bin,l=o,c=[],u=p.readUshort(i,o);o+=2;for(var d=0;d<u;d++){var f=p.readUshort(i,o);o+=2;var g=e._lctf.readLookupTable(i,l+f,s);c.push(g)}return c},e._lctf.readLookupTable=function(i,o,s){var p=e._bin,l=o,c={tabs:[]};c.ltype=p.readUshort(i,o),o+=2,c.flag=p.readUshort(i,o),o+=2;var u=p.readUshort(i,o);o+=2;for(var d=c.ltype,f=0;f<u;f++){var g=p.readUshort(i,o);o+=2;var v=s(i,d,l+g,c);c.tabs.push(v)}return c},e._lctf.numOfOnes=function(i){for(var o=0,s=0;s<32;s++)(i>>>s&1)!=0&&o++;return o},e._lctf.readClassDef=function(i,o){var s=e._bin,p=[],l=s.readUshort(i,o);if(o+=2,l==1){var c=s.readUshort(i,o);o+=2;var u=s.readUshort(i,o);o+=2;for(var d=0;d<u;d++)p.push(c+d),p.push(c+d),p.push(s.readUshort(i,o)),o+=2}if(l==2){var f=s.readUshort(i,o);for(o+=2,d=0;d<f;d++)p.push(s.readUshort(i,o)),o+=2,p.push(s.readUshort(i,o)),o+=2,p.push(s.readUshort(i,o)),o+=2}return p},e._lctf.getInterval=function(i,o){for(var s=0;s<i.length;s+=3){var p=i[s],l=i[s+1];if(i[s+2],p<=o&&o<=l)return s}return-1},e._lctf.readCoverage=function(i,o){var s=e._bin,p={};p.fmt=s.readUshort(i,o),o+=2;var l=s.readUshort(i,o);return o+=2,p.fmt==1&&(p.tab=s.readUshorts(i,o,l)),p.fmt==2&&(p.tab=s.readUshorts(i,o,3*l)),p},e._lctf.coverageIndex=function(i,o){var s=i.tab;if(i.fmt==1)return s.indexOf(o);if(i.fmt==2){var p=e._lctf.getInterval(s,o);if(p!=-1)return s[p+2]+(o-s[p])}return-1},e._lctf.readFeatureList=function(i,o){var s=e._bin,p=o,l=[],c=s.readUshort(i,o);o+=2;for(var u=0;u<c;u++){var d=s.readASCII(i,o,4);o+=4;var f=s.readUshort(i,o);o+=2;var g=e._lctf.readFeatureTable(i,p+f);g.tag=d.trim(),l.push(g)}return l},e._lctf.readFeatureTable=function(i,o){var s=e._bin,p=o,l={},c=s.readUshort(i,o);o+=2,c>0&&(l.featureParams=p+c);var u=s.readUshort(i,o);o+=2,l.tab=[];for(var d=0;d<u;d++)l.tab.push(s.readUshort(i,o+2*d));return l},e._lctf.readScriptList=function(i,o){var s=e._bin,p=o,l={},c=s.readUshort(i,o);o+=2;for(var u=0;u<c;u++){var d=s.readASCII(i,o,4);o+=4;var f=s.readUshort(i,o);o+=2,l[d.trim()]=e._lctf.readScriptTable(i,p+f)}return l},e._lctf.readScriptTable=function(i,o){var s=e._bin,p=o,l={},c=s.readUshort(i,o);o+=2,l.default=e._lctf.readLangSysTable(i,p+c);var u=s.readUshort(i,o);o+=2;for(var d=0;d<u;d++){var f=s.readASCII(i,o,4);o+=4;var g=s.readUshort(i,o);o+=2,l[f.trim()]=e._lctf.readLangSysTable(i,p+g)}return l},e._lctf.readLangSysTable=function(i,o){var s=e._bin,p={};s.readUshort(i,o),o+=2,p.reqFeature=s.readUshort(i,o),o+=2;var l=s.readUshort(i,o);return o+=2,p.features=s.readUshorts(i,o,l),p},e.CFF={},e.CFF.parse=function(i,o,s){var p=e._bin;(i=new Uint8Array(i.buffer,o,s))[o=0],i[++o],i[++o],i[++o],o++;var l=[];o=e.CFF.readIndex(i,o,l);for(var c=[],u=0;u<l.length-1;u++)c.push(p.readASCII(i,o+l[u],l[u+1]-l[u]));o+=l[l.length-1];var d=[];o=e.CFF.readIndex(i,o,d);var f=[];for(u=0;u<d.length-1;u++)f.push(e.CFF.readDict(i,o+d[u],o+d[u+1]));o+=d[d.length-1];var g=f[0],v=[];o=e.CFF.readIndex(i,o,v);var A=[];for(u=0;u<v.length-1;u++)A.push(p.readASCII(i,o+v[u],v[u+1]-v[u]));if(o+=v[v.length-1],e.CFF.readSubrs(i,o,g),g.CharStrings){o=g.CharStrings,v=[],o=e.CFF.readIndex(i,o,v);var m=[];for(u=0;u<v.length-1;u++)m.push(p.readBytes(i,o+v[u],v[u+1]-v[u]));g.CharStrings=m}if(g.ROS){o=g.FDArray;var h=[];for(o=e.CFF.readIndex(i,o,h),g.FDArray=[],u=0;u<h.length-1;u++){var y=e.CFF.readDict(i,o+h[u],o+h[u+1]);e.CFF._readFDict(i,y,A),g.FDArray.push(y)}o+=h[h.length-1],o=g.FDSelect,g.FDSelect=[];var E=i[o];if(o++,E!=3)throw E;var b=p.readUshort(i,o);for(o+=2,u=0;u<b+1;u++)g.FDSelect.push(p.readUshort(i,o),i[o+2]),o+=3}return g.Encoding&&(g.Encoding=e.CFF.readEncoding(i,g.Encoding,g.CharStrings.length)),g.charset&&(g.charset=e.CFF.readCharset(i,g.charset,g.CharStrings.length)),e.CFF._readFDict(i,g,A),g},e.CFF._readFDict=function(i,o,s){var p;for(var l in o.Private&&(p=o.Private[1],o.Private=e.CFF.readDict(i,p,p+o.Private[0]),o.Private.Subrs&&e.CFF.readSubrs(i,p+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(o[l]=s[o[l]-426+35])},e.CFF.readSubrs=function(i,o,s){var p=e._bin,l=[];o=e.CFF.readIndex(i,o,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,s.Bias=c,s.Subrs=[];for(var d=0;d<l.length-1;d++)s.Subrs.push(p.readBytes(i,o+l[d],l[d+1]-l[d]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,o){for(var s=0;s<i.charset.length;s++)if(i.charset[s]==o)return s;return-1},e.CFF.glyphBySE=function(i,o){return o<0||o>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[o])},e.CFF.readEncoding=function(i,o,s){e._bin;var p=[".notdef"],l=i[o];if(o++,l!=0)throw"error: unknown encoding format: "+l;var c=i[o];o++;for(var u=0;u<c;u++)p.push(i[o+u]);return p},e.CFF.readCharset=function(i,o,s){var p=e._bin,l=[".notdef"],c=i[o];if(o++,c==0)for(var u=0;u<s;u++){var d=p.readUshort(i,o);o+=2,l.push(d)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<s;){d=p.readUshort(i,o),o+=2;var f=0;for(c==1?(f=i[o],o++):(f=p.readUshort(i,o),o+=2),u=0;u<=f;u++)l.push(d),d++}}return l},e.CFF.readIndex=function(i,o,s){var p=e._bin,l=p.readUshort(i,o)+1,c=i[o+=2];if(o++,c==1)for(var u=0;u<l;u++)s.push(i[o+u]);else if(c==2)for(u=0;u<l;u++)s.push(p.readUshort(i,o+2*u));else if(c==3)for(u=0;u<l;u++)s.push(16777215&p.readUint(i,o+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(o+=l*c)-1},e.CFF.getCharString=function(i,o,s){var p=e._bin,l=i[o],c=i[o+1];i[o+2],i[o+3],i[o+4];var u=1,d=null,f=null;l<=20&&(d=l,u=1),l==12&&(d=100*l+c,u=2),21<=l&&l<=27&&(d=l,u=1),l==28&&(f=p.readShort(i,o+1),u=3),29<=l&&l<=31&&(d=l,u=1),32<=l&&l<=246&&(f=l-139,u=1),247<=l&&l<=250&&(f=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(f=256*-(l-251)-c-108,u=2),l==255&&(f=p.readInt(i,o+1)/65535,u=5),s.val=f??"o"+d,s.size=u},e.CFF.readCharString=function(i,o,s){for(var p=o+s,l=e._bin,c=[];o<p;){var u=i[o],d=i[o+1];i[o+2],i[o+3],i[o+4];var f=1,g=null,v=null;u<=20&&(g=u,f=1),u==12&&(g=100*u+d,f=2),u!=19&&u!=20||(g=u,f=2),21<=u&&u<=27&&(g=u,f=1),u==28&&(v=l.readShort(i,o+1),f=3),29<=u&&u<=31&&(g=u,f=1),32<=u&&u<=246&&(v=u-139,f=1),247<=u&&u<=250&&(v=256*(u-247)+d+108,f=2),251<=u&&u<=254&&(v=256*-(u-251)-d-108,f=2),u==255&&(v=l.readInt(i,o+1)/65535,f=5),c.push(v??"o"+g),o+=f}return c},e.CFF.readDict=function(i,o,s){for(var p=e._bin,l={},c=[];o<s;){var u=i[o],d=i[o+1];i[o+2],i[o+3],i[o+4];var f=1,g=null,v=null;if(u==28&&(v=p.readShort(i,o+1),f=3),u==29&&(v=p.readInt(i,o+1),f=5),32<=u&&u<=246&&(v=u-139,f=1),247<=u&&u<=250&&(v=256*(u-247)+d+108,f=2),251<=u&&u<=254&&(v=256*-(u-251)-d-108,f=2),u==255)throw v=p.readInt(i,o+1)/65535,f=5,"unknown number";if(u==30){var A=[];for(f=1;;){var m=i[o+f];f++;var h=m>>4,y=15&m;if(h!=15&&A.push(h),y!=15&&A.push(y),y==15)break}for(var E="",b=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],_=0;_<A.length;_++)E+=b[A[_]];v=parseFloat(E)}u<=21&&(g=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],f=1,u==12&&(g=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][d],f=2)),g!=null?(l[g]=c.length==1?c[0]:c,c=[]):c.push(v),o+=f}return l},e.cmap={},e.cmap.parse=function(i,o,s){i=new Uint8Array(i.buffer,o,s),o=0;var p=e._bin,l={};p.readUshort(i,o),o+=2;var c=p.readUshort(i,o);o+=2;var u=[];l.tables=[];for(var d=0;d<c;d++){var f=p.readUshort(i,o);o+=2;var g=p.readUshort(i,o);o+=2;var v=p.readUint(i,o);o+=4;var A="p"+f+"e"+g,m=u.indexOf(v);if(m==-1){var h;m=l.tables.length,u.push(v);var y=p.readUshort(i,v);y==0?h=e.cmap.parse0(i,v):y==4?h=e.cmap.parse4(i,v):y==6?h=e.cmap.parse6(i,v):y==12?h=e.cmap.parse12(i,v):console.debug("unknown format: "+y,f,g,v),l.tables.push(h)}if(l[A]!=null)throw"multiple tables for one platform+encoding";l[A]=m}return l},e.cmap.parse0=function(i,o){var s=e._bin,p={};p.format=s.readUshort(i,o),o+=2;var l=s.readUshort(i,o);o+=2,s.readUshort(i,o),o+=2,p.map=[];for(var c=0;c<l-6;c++)p.map.push(i[o+c]);return p},e.cmap.parse4=function(i,o){var s=e._bin,p=o,l={};l.format=s.readUshort(i,o),o+=2;var c=s.readUshort(i,o);o+=2,s.readUshort(i,o),o+=2;var u=s.readUshort(i,o);o+=2;var d=u/2;l.searchRange=s.readUshort(i,o),o+=2,l.entrySelector=s.readUshort(i,o),o+=2,l.rangeShift=s.readUshort(i,o),o+=2,l.endCount=s.readUshorts(i,o,d),o+=2*d,o+=2,l.startCount=s.readUshorts(i,o,d),o+=2*d,l.idDelta=[];for(var f=0;f<d;f++)l.idDelta.push(s.readShort(i,o)),o+=2;for(l.idRangeOffset=s.readUshorts(i,o,d),o+=2*d,l.glyphIdArray=[];o<p+c;)l.glyphIdArray.push(s.readUshort(i,o)),o+=2;return l},e.cmap.parse6=function(i,o){var s=e._bin,p={};p.format=s.readUshort(i,o),o+=2,s.readUshort(i,o),o+=2,s.readUshort(i,o),o+=2,p.firstCode=s.readUshort(i,o),o+=2;var l=s.readUshort(i,o);o+=2,p.glyphIdArray=[];for(var c=0;c<l;c++)p.glyphIdArray.push(s.readUshort(i,o)),o+=2;return p},e.cmap.parse12=function(i,o){var s=e._bin,p={};p.format=s.readUshort(i,o),o+=2,o+=2,s.readUint(i,o),o+=4,s.readUint(i,o),o+=4;var l=s.readUint(i,o);o+=4,p.groups=[];for(var c=0;c<l;c++){var u=o+12*c,d=s.readUint(i,u+0),f=s.readUint(i,u+4),g=s.readUint(i,u+8);p.groups.push([d,f,g])}return p},e.glyf={},e.glyf.parse=function(i,o,s,p){for(var l=[],c=0;c<p.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(i,o){var s=e._bin,p=i._data,l=e._tabOffset(p,"glyf",i._offset)+i.loca[o];if(i.loca[o]==i.loca[o+1])return null;var c={};if(c.noc=s.readShort(p,l),l+=2,c.xMin=s.readShort(p,l),l+=2,c.yMin=s.readShort(p,l),l+=2,c.xMax=s.readShort(p,l),l+=2,c.yMax=s.readShort(p,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(s.readUshort(p,l)),l+=2;var d=s.readUshort(p,l);if(l+=2,p.length-l<d)return null;c.instructions=s.readBytes(p,l,d),l+=d;var f=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<f;u++){var g=p[l];if(l++,c.flags.push(g),(8&g)!=0){var v=p[l];l++;for(var A=0;A<v;A++)c.flags.push(g),u++}}for(c.xs=[],u=0;u<f;u++){var m=(2&c.flags[u])!=0,h=(16&c.flags[u])!=0;m?(c.xs.push(h?p[l]:-p[l]),l++):h?c.xs.push(0):(c.xs.push(s.readShort(p,l)),l+=2)}for(c.ys=[],u=0;u<f;u++)m=(4&c.flags[u])!=0,h=(32&c.flags[u])!=0,m?(c.ys.push(h?p[l]:-p[l]),l++):h?c.ys.push(0):(c.ys.push(s.readShort(p,l)),l+=2);var y=0,E=0;for(u=0;u<f;u++)y+=c.xs[u],E+=c.ys[u],c.xs[u]=y,c.ys[u]=E}else{var b;c.parts=[];do{b=s.readUshort(p,l),l+=2;var _={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(_),_.glyphIndex=s.readUshort(p,l),l+=2,1&b){var C=s.readShort(p,l);l+=2;var B=s.readShort(p,l);l+=2}else C=s.readInt8(p,l),l++,B=s.readInt8(p,l),l++;2&b?(_.m.tx=C,_.m.ty=B):(_.p1=C,_.p2=B),8&b?(_.m.a=_.m.d=s.readF2dot14(p,l),l+=2):64&b?(_.m.a=s.readF2dot14(p,l),l+=2,_.m.d=s.readF2dot14(p,l),l+=2):128&b&&(_.m.a=s.readF2dot14(p,l),l+=2,_.m.b=s.readF2dot14(p,l),l+=2,_.m.c=s.readF2dot14(p,l),l+=2,_.m.d=s.readF2dot14(p,l),l+=2)}while(32&b);if(256&b){var R=s.readUshort(p,l);for(l+=2,c.instr=[],u=0;u<R;u++)c.instr.push(p[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(i,o,s,p){return e._lctf.parse(i,o,s,p,e.GPOS.subt)},e.GPOS.subt=function(i,o,s,p){var l=e._bin,c=s,u={};if(u.fmt=l.readUshort(i,s),s+=2,o==1||o==2||o==3||o==7||o==8&&u.fmt<=2){var d=l.readUshort(i,s);s+=2,u.coverage=e._lctf.readCoverage(i,d+c)}if(o==1&&u.fmt==1){var f=l.readUshort(i,s);s+=2;var g=e._lctf.numOfOnes(f);f!=0&&(u.pos=e.GPOS.readValueRecord(i,s,f))}else if(o==2&&u.fmt>=1&&u.fmt<=2){f=l.readUshort(i,s),s+=2;var v=l.readUshort(i,s);s+=2,g=e._lctf.numOfOnes(f);var A=e._lctf.numOfOnes(v);if(u.fmt==1){u.pairsets=[];var m=l.readUshort(i,s);s+=2;for(var h=0;h<m;h++){var y=c+l.readUshort(i,s);s+=2;var E=l.readUshort(i,y);y+=2;for(var b=[],_=0;_<E;_++){var C=l.readUshort(i,y);y+=2,f!=0&&(w=e.GPOS.readValueRecord(i,y,f),y+=2*g),v!=0&&(S=e.GPOS.readValueRecord(i,y,v),y+=2*A),b.push({gid2:C,val1:w,val2:S})}u.pairsets.push(b)}}if(u.fmt==2){var B=l.readUshort(i,s);s+=2;var R=l.readUshort(i,s);s+=2;var M=l.readUshort(i,s);s+=2;var x=l.readUshort(i,s);for(s+=2,u.classDef1=e._lctf.readClassDef(i,c+B),u.classDef2=e._lctf.readClassDef(i,c+R),u.matrix=[],h=0;h<M;h++){var T=[];for(_=0;_<x;_++){var w=null,S=null;f!=0&&(w=e.GPOS.readValueRecord(i,s,f),s+=2*g),v!=0&&(S=e.GPOS.readValueRecord(i,s,v),s+=2*A),T.push({val1:w,val2:S})}u.matrix.push(T)}}}else{if(o==9&&u.fmt==1){var I=l.readUshort(i,s);s+=2;var G=l.readUint(i,s);if(s+=4,p.ltype==9)p.ltype=I;else if(p.ltype!=I)throw"invalid extension substitution";return e.GPOS.subt(i,p.ltype,c+G)}console.debug("unsupported GPOS table LookupType",o,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(i,o,s){var p=e._bin,l=[];return l.push(1&s?p.readShort(i,o):0),o+=1&s?2:0,l.push(2&s?p.readShort(i,o):0),o+=2&s?2:0,l.push(4&s?p.readShort(i,o):0),o+=4&s?2:0,l.push(8&s?p.readShort(i,o):0),o+=8&s?2:0,l},e.GSUB={},e.GSUB.parse=function(i,o,s,p){return e._lctf.parse(i,o,s,p,e.GSUB.subt)},e.GSUB.subt=function(i,o,s,p){var l=e._bin,c=s,u={};if(u.fmt=l.readUshort(i,s),s+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&u.fmt<=2||o==6&&u.fmt<=2){var d=l.readUshort(i,s);s+=2,u.coverage=e._lctf.readCoverage(i,c+d)}if(o==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(i,s),s+=2;else if(u.fmt==2){var f=l.readUshort(i,s);s+=2,u.newg=l.readUshorts(i,s,f),s+=2*u.newg.length}}else if(o==4){u.vals=[],f=l.readUshort(i,s),s+=2;for(var g=0;g<f;g++){var v=l.readUshort(i,s);s+=2,u.vals.push(e.GSUB.readLigatureSet(i,c+v))}}else if(o==5&&u.fmt==2){if(u.fmt==2){var A=l.readUshort(i,s);s+=2,u.cDef=e._lctf.readClassDef(i,c+A),u.scset=[];var m=l.readUshort(i,s);for(s+=2,g=0;g<m;g++){var h=l.readUshort(i,s);s+=2,u.scset.push(h==0?null:e.GSUB.readSubClassSet(i,c+h))}}}else if(o==6&&u.fmt==3){if(u.fmt==3){for(g=0;g<3;g++){f=l.readUshort(i,s),s+=2;for(var y=[],E=0;E<f;E++)y.push(e._lctf.readCoverage(i,c+l.readUshort(i,s+2*E)));s+=2*f,g==0&&(u.backCvg=y),g==1&&(u.inptCvg=y),g==2&&(u.ahedCvg=y)}f=l.readUshort(i,s),s+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(i,s,f)}}else{if(o==7&&u.fmt==1){var b=l.readUshort(i,s);s+=2;var _=l.readUint(i,s);if(s+=4,p.ltype==9)p.ltype=b;else if(p.ltype!=b)throw"invalid extension substitution";return e.GSUB.subt(i,p.ltype,c+_)}console.debug("unsupported GSUB table LookupType",o,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(i,o){var s=e._bin.readUshort,p=o,l=[],c=s(i,o);o+=2;for(var u=0;u<c;u++){var d=s(i,o);o+=2,l.push(e.GSUB.readSubClassRule(i,p+d))}return l},e.GSUB.readSubClassRule=function(i,o){var s=e._bin.readUshort,p={},l=s(i,o),c=s(i,o+=2);o+=2,p.input=[];for(var u=0;u<l-1;u++)p.input.push(s(i,o)),o+=2;return p.substLookupRecords=e.GSUB.readSubstLookupRecords(i,o,c),p},e.GSUB.readSubstLookupRecords=function(i,o,s){for(var p=e._bin.readUshort,l=[],c=0;c<s;c++)l.push(p(i,o),p(i,o+2)),o+=4;return l},e.GSUB.readChainSubClassSet=function(i,o){var s=e._bin,p=o,l=[],c=s.readUshort(i,o);o+=2;for(var u=0;u<c;u++){var d=s.readUshort(i,o);o+=2,l.push(e.GSUB.readChainSubClassRule(i,p+d))}return l},e.GSUB.readChainSubClassRule=function(i,o){for(var s=e._bin,p={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=s.readUshort(i,o);o+=2,c==1&&u--,p[l[c]]=s.readUshorts(i,o,u),o+=2*p[l[c]].length}return u=s.readUshort(i,o),o+=2,p.subst=s.readUshorts(i,o,2*u),o+=2*p.subst.length,p},e.GSUB.readLigatureSet=function(i,o){var s=e._bin,p=o,l=[],c=s.readUshort(i,o);o+=2;for(var u=0;u<c;u++){var d=s.readUshort(i,o);o+=2,l.push(e.GSUB.readLigature(i,p+d))}return l},e.GSUB.readLigature=function(i,o){var s=e._bin,p={chain:[]};p.nglyph=s.readUshort(i,o),o+=2;var l=s.readUshort(i,o);o+=2;for(var c=0;c<l-1;c++)p.chain.push(s.readUshort(i,o)),o+=2;return p},e.head={},e.head.parse=function(i,o,s){var p=e._bin,l={};return p.readFixed(i,o),o+=4,l.fontRevision=p.readFixed(i,o),o+=4,p.readUint(i,o),o+=4,p.readUint(i,o),o+=4,l.flags=p.readUshort(i,o),o+=2,l.unitsPerEm=p.readUshort(i,o),o+=2,l.created=p.readUint64(i,o),o+=8,l.modified=p.readUint64(i,o),o+=8,l.xMin=p.readShort(i,o),o+=2,l.yMin=p.readShort(i,o),o+=2,l.xMax=p.readShort(i,o),o+=2,l.yMax=p.readShort(i,o),o+=2,l.macStyle=p.readUshort(i,o),o+=2,l.lowestRecPPEM=p.readUshort(i,o),o+=2,l.fontDirectionHint=p.readShort(i,o),o+=2,l.indexToLocFormat=p.readShort(i,o),o+=2,l.glyphDataFormat=p.readShort(i,o),o+=2,l},e.hhea={},e.hhea.parse=function(i,o,s){var p=e._bin,l={};return p.readFixed(i,o),o+=4,l.ascender=p.readShort(i,o),o+=2,l.descender=p.readShort(i,o),o+=2,l.lineGap=p.readShort(i,o),o+=2,l.advanceWidthMax=p.readUshort(i,o),o+=2,l.minLeftSideBearing=p.readShort(i,o),o+=2,l.minRightSideBearing=p.readShort(i,o),o+=2,l.xMaxExtent=p.readShort(i,o),o+=2,l.caretSlopeRise=p.readShort(i,o),o+=2,l.caretSlopeRun=p.readShort(i,o),o+=2,l.caretOffset=p.readShort(i,o),o+=2,o+=8,l.metricDataFormat=p.readShort(i,o),o+=2,l.numberOfHMetrics=p.readUshort(i,o),o+=2,l},e.hmtx={},e.hmtx.parse=function(i,o,s,p){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,d=0,f=0;f<p.maxp.numGlyphs;f++)f<p.hhea.numberOfHMetrics&&(u=l.readUshort(i,o),o+=2,d=l.readShort(i,o),o+=2),c.aWidth.push(u),c.lsBearing.push(d);return c},e.kern={},e.kern.parse=function(i,o,s,p){var l=e._bin,c=l.readUshort(i,o);if(o+=2,c==1)return e.kern.parseV1(i,o-2,s,p);var u=l.readUshort(i,o);o+=2;for(var d={glyph1:[],rval:[]},f=0;f<u;f++){o+=2,s=l.readUshort(i,o),o+=2;var g=l.readUshort(i,o);o+=2;var v=g>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;o=e.kern.readFormat0(i,o,d)}return d},e.kern.parseV1=function(i,o,s,p){var l=e._bin;l.readFixed(i,o),o+=4;var c=l.readUint(i,o);o+=4;for(var u={glyph1:[],rval:[]},d=0;d<c;d++){l.readUint(i,o),o+=4;var f=l.readUshort(i,o);o+=2,l.readUshort(i,o),o+=2;var g=f>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;o=e.kern.readFormat0(i,o,u)}return u},e.kern.readFormat0=function(i,o,s){var p=e._bin,l=-1,c=p.readUshort(i,o);o+=2,p.readUshort(i,o),o+=2,p.readUshort(i,o),o+=2,p.readUshort(i,o),o+=2;for(var u=0;u<c;u++){var d=p.readUshort(i,o);o+=2;var f=p.readUshort(i,o);o+=2;var g=p.readShort(i,o);o+=2,d!=l&&(s.glyph1.push(d),s.rval.push({glyph2:[],vals:[]}));var v=s.rval[s.rval.length-1];v.glyph2.push(f),v.vals.push(g),l=d}return o},e.loca={},e.loca.parse=function(i,o,s,p){var l=e._bin,c=[],u=p.head.indexToLocFormat,d=p.maxp.numGlyphs+1;if(u==0)for(var f=0;f<d;f++)c.push(l.readUshort(i,o+(f<<1))<<1);if(u==1)for(f=0;f<d;f++)c.push(l.readUint(i,o+(f<<2)));return c},e.maxp={},e.maxp.parse=function(i,o,s){var p=e._bin,l={},c=p.readUint(i,o);return o+=4,l.numGlyphs=p.readUshort(i,o),o+=2,c==65536&&(l.maxPoints=p.readUshort(i,o),o+=2,l.maxContours=p.readUshort(i,o),o+=2,l.maxCompositePoints=p.readUshort(i,o),o+=2,l.maxCompositeContours=p.readUshort(i,o),o+=2,l.maxZones=p.readUshort(i,o),o+=2,l.maxTwilightPoints=p.readUshort(i,o),o+=2,l.maxStorage=p.readUshort(i,o),o+=2,l.maxFunctionDefs=p.readUshort(i,o),o+=2,l.maxInstructionDefs=p.readUshort(i,o),o+=2,l.maxStackElements=p.readUshort(i,o),o+=2,l.maxSizeOfInstructions=p.readUshort(i,o),o+=2,l.maxComponentElements=p.readUshort(i,o),o+=2,l.maxComponentDepth=p.readUshort(i,o),o+=2),l},e.name={},e.name.parse=function(i,o,s){var p=e._bin,l={};p.readUshort(i,o),o+=2;var c=p.readUshort(i,o);o+=2,p.readUshort(i,o);for(var u,d=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],f=o+=2,g=0;g<c;g++){var v=p.readUshort(i,o);o+=2;var A=p.readUshort(i,o);o+=2;var m=p.readUshort(i,o);o+=2;var h=p.readUshort(i,o);o+=2;var y=p.readUshort(i,o);o+=2;var E=p.readUshort(i,o);o+=2;var b,_=d[h],C=f+12*c+E;if(v==0)b=p.readUnicode(i,C,y/2);else if(v==3&&A==0)b=p.readUnicode(i,C,y/2);else if(A==0)b=p.readASCII(i,C,y);else if(A==1)b=p.readUnicode(i,C,y/2);else if(A==3)b=p.readUnicode(i,C,y/2);else{if(v!=1)throw"unknown encoding "+A+", platformID: "+v;b=p.readASCII(i,C,y),console.debug("reading unknown MAC encoding "+A+" as ASCII")}var B="p"+v+","+m.toString(16);l[B]==null&&(l[B]={}),l[B][_!==void 0?_:h]=b,l[B]._lang=m}for(var R in l)if(l[R].postScriptName!=null&&l[R]._lang==1033)return l[R];for(var R in l)if(l[R].postScriptName!=null&&l[R]._lang==0)return l[R];for(var R in l)if(l[R].postScriptName!=null&&l[R]._lang==3084)return l[R];for(var R in l)if(l[R].postScriptName!=null)return l[R];for(var R in l){u=R;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(i,o,s){var p=e._bin.readUshort(i,o);o+=2;var l={};if(p==0)e["OS/2"].version0(i,o,l);else if(p==1)e["OS/2"].version1(i,o,l);else if(p==2||p==3||p==4)e["OS/2"].version2(i,o,l);else{if(p!=5)throw"unknown OS/2 table version: "+p;e["OS/2"].version5(i,o,l)}return l},e["OS/2"].version0=function(i,o,s){var p=e._bin;return s.xAvgCharWidth=p.readShort(i,o),o+=2,s.usWeightClass=p.readUshort(i,o),o+=2,s.usWidthClass=p.readUshort(i,o),o+=2,s.fsType=p.readUshort(i,o),o+=2,s.ySubscriptXSize=p.readShort(i,o),o+=2,s.ySubscriptYSize=p.readShort(i,o),o+=2,s.ySubscriptXOffset=p.readShort(i,o),o+=2,s.ySubscriptYOffset=p.readShort(i,o),o+=2,s.ySuperscriptXSize=p.readShort(i,o),o+=2,s.ySuperscriptYSize=p.readShort(i,o),o+=2,s.ySuperscriptXOffset=p.readShort(i,o),o+=2,s.ySuperscriptYOffset=p.readShort(i,o),o+=2,s.yStrikeoutSize=p.readShort(i,o),o+=2,s.yStrikeoutPosition=p.readShort(i,o),o+=2,s.sFamilyClass=p.readShort(i,o),o+=2,s.panose=p.readBytes(i,o,10),o+=10,s.ulUnicodeRange1=p.readUint(i,o),o+=4,s.ulUnicodeRange2=p.readUint(i,o),o+=4,s.ulUnicodeRange3=p.readUint(i,o),o+=4,s.ulUnicodeRange4=p.readUint(i,o),o+=4,s.achVendID=[p.readInt8(i,o),p.readInt8(i,o+1),p.readInt8(i,o+2),p.readInt8(i,o+3)],o+=4,s.fsSelection=p.readUshort(i,o),o+=2,s.usFirstCharIndex=p.readUshort(i,o),o+=2,s.usLastCharIndex=p.readUshort(i,o),o+=2,s.sTypoAscender=p.readShort(i,o),o+=2,s.sTypoDescender=p.readShort(i,o),o+=2,s.sTypoLineGap=p.readShort(i,o),o+=2,s.usWinAscent=p.readUshort(i,o),o+=2,s.usWinDescent=p.readUshort(i,o),o+=2},e["OS/2"].version1=function(i,o,s){var p=e._bin;return o=e["OS/2"].version0(i,o,s),s.ulCodePageRange1=p.readUint(i,o),o+=4,s.ulCodePageRange2=p.readUint(i,o),o+=4},e["OS/2"].version2=function(i,o,s){var p=e._bin;return o=e["OS/2"].version1(i,o,s),s.sxHeight=p.readShort(i,o),o+=2,s.sCapHeight=p.readShort(i,o),o+=2,s.usDefault=p.readUshort(i,o),o+=2,s.usBreak=p.readUshort(i,o),o+=2,s.usMaxContext=p.readUshort(i,o),o+=2},e["OS/2"].version5=function(i,o,s){var p=e._bin;return o=e["OS/2"].version2(i,o,s),s.usLowerOpticalPointSize=p.readUshort(i,o),o+=2,s.usUpperOpticalPointSize=p.readUshort(i,o),o+=2},e.post={},e.post.parse=function(i,o,s){var p=e._bin,l={};return l.version=p.readFixed(i,o),o+=4,l.italicAngle=p.readFixed(i,o),o+=4,l.underlinePosition=p.readShort(i,o),o+=2,l.underlineThickness=p.readShort(i,o),o+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,o){var s=i.cmap,p=-1;if(s.p0e4!=null?p=s.p0e4:s.p3e1!=null?p=s.p3e1:s.p1e0!=null?p=s.p1e0:s.p0e3!=null&&(p=s.p0e3),p==-1)throw"no familiar platform and encoding!";var l=s.tables[p];if(l.format==0)return o>=l.map.length?0:l.map[o];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(o<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>o?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[o-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:o+l.idDelta[c])}if(l.format==12){if(o>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var d=l.groups[u];if(d[0]<=o&&o<=d[1])return d[2]+(o-d[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,o){var s={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[o]){var p=i.SVG.entries[o];return p==null?s:(typeof p=="string"&&(p=e.SVG.toPath(p),i.SVG.entries[o]=p),p)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},c=i.CFF,u=i.CFF.Private;if(c.ROS){for(var d=0;c.FDSelect[d+2]<=o;)d+=2;u=c.FDArray[c.FDSelect[d+1]].Private}e.U._drawCFF(i.CFF.CharStrings[o],l,c,u,s)}else i.glyf&&e.U._drawGlyf(o,i,s);return s},e.U._drawGlyf=function(i,o,s){var p=o.glyf[i];p==null&&(p=o.glyf[i]=e.glyf._parseGlyf(o,i)),p!=null&&(p.noc>-1?e.U._simpleGlyph(p,s):e.U._compoGlyph(p,o,s))},e.U._simpleGlyph=function(i,o){for(var s=0;s<i.noc;s++){for(var p=s==0?0:i.endPts[s-1]+1,l=i.endPts[s],c=p;c<=l;c++){var u=c==p?l:c-1,d=c==l?p:c+1,f=1&i.flags[c],g=1&i.flags[u],v=1&i.flags[d],A=i.xs[c],m=i.ys[c];if(c==p)if(f){if(!g){e.U.P.moveTo(o,A,m);continue}e.U.P.moveTo(o,i.xs[u],i.ys[u])}else g?e.U.P.moveTo(o,i.xs[u],i.ys[u]):e.U.P.moveTo(o,(i.xs[u]+A)/2,(i.ys[u]+m)/2);f?g&&e.U.P.lineTo(o,A,m):v?e.U.P.qcurveTo(o,A,m,i.xs[d],i.ys[d]):e.U.P.qcurveTo(o,A,m,(A+i.xs[d])/2,(m+i.ys[d])/2)}e.U.P.closePath(o)}},e.U._compoGlyph=function(i,o,s){for(var p=0;p<i.parts.length;p++){var l={cmds:[],crds:[]},c=i.parts[p];e.U._drawGlyf(c.glyphIndex,o,l);for(var u=c.m,d=0;d<l.crds.length;d+=2){var f=l.crds[d],g=l.crds[d+1];s.crds.push(f*u.a+g*u.b+u.tx),s.crds.push(f*u.c+g*u.d+u.ty)}for(d=0;d<l.cmds.length;d++)s.cmds.push(l.cmds[d])}},e.U._getGlyphClass=function(i,o){var s=e._lctf.getInterval(o,i);return s==-1?0:o[s+2]},e.U.getPairAdjustment=function(i,o,s){var p=!1;if(i.GPOS)for(var l=i.GPOS,c=l.lookupList,u=l.featureList,d=[],f=0;f<u.length;f++){var g=u[f];if(g.tag=="kern"){p=!0;for(var v=0;v<g.tab.length;v++)if(!d[g.tab[v]]){d[g.tab[v]]=!0;for(var A=c[g.tab[v]],m=0;m<A.tabs.length;m++)if(A.tabs[m]!=null){var h,y=A.tabs[m];if((!y.coverage||(h=e._lctf.coverageIndex(y.coverage,o))!=-1)&&A.ltype!=1){if(A.ltype==2){var E=null;if(y.fmt==1){var b=y.pairsets[h];for(f=0;f<b.length;f++)b[f].gid2==s&&(E=b[f])}else if(y.fmt==2){var _=e.U._getGlyphClass(o,y.classDef1),C=e.U._getGlyphClass(s,y.classDef2);E=y.matrix[_][C]}if(E){var B=0;return E.val1&&E.val1[2]&&(B+=E.val1[2]),E.val2&&E.val2[0]&&(B+=E.val2[0]),B}}}}}}}if(i.kern&&!p){var R=i.kern.glyph1.indexOf(o);if(R!=-1){var M=i.kern.rval[R].glyph2.indexOf(s);if(M!=-1)return i.kern.rval[R].vals[M]}}return 0},e.U._applySubs=function(i,o,s,p){for(var l=i.length-o-1,c=0;c<s.tabs.length;c++)if(s.tabs[c]!=null){var u,d=s.tabs[c];if(!d.coverage||(u=e._lctf.coverageIndex(d.coverage,i[o]))!=-1){if(s.ltype==1)i[o],d.fmt==1?i[o]=i[o]+d.delta:i[o]=d.newg[u];else if(s.ltype==4)for(var f=d.vals[u],g=0;g<f.length;g++){var v=f[g],A=v.chain.length;if(!(A>l)){for(var m=!0,h=0,y=0;y<A;y++){for(;i[o+h+(1+y)]==-1;)h++;v.chain[y]!=i[o+h+(1+y)]&&(m=!1)}if(m){for(i[o]=v.nglyph,y=0;y<A+h;y++)i[o+y+1]=-1;break}}}else if(s.ltype==5&&d.fmt==2)for(var E=e._lctf.getInterval(d.cDef,i[o]),b=d.cDef[E+2],_=d.scset[b],C=0;C<_.length;C++){var B=_[C],R=B.input;if(!(R.length>l)){for(m=!0,y=0;y<R.length;y++){var M=e._lctf.getInterval(d.cDef,i[o+1+y]);if(E==-1&&d.cDef[M+2]!=R[y]){m=!1;break}}if(m){var x=B.substLookupRecords;for(g=0;g<x.length;g+=2)x[g],x[g+1]}}}else if(s.ltype==6&&d.fmt==3){if(!e.U._glsCovered(i,d.backCvg,o-d.backCvg.length)||!e.U._glsCovered(i,d.inptCvg,o)||!e.U._glsCovered(i,d.ahedCvg,o+d.inptCvg.length))continue;var T=d.lookupRec;for(C=0;C<T.length;C+=2){E=T[C];var w=p[T[C+1]];e.U._applySubs(i,o+E,w,p)}}}}},e.U._glsCovered=function(i,o,s){for(var p=0;p<o.length;p++)if(e._lctf.coverageIndex(o[p],i[s+p])==-1)return!1;return!0},e.U.glyphsToPath=function(i,o,s){for(var p={cmds:[],crds:[]},l=0,c=0;c<o.length;c++){var u=o[c];if(u!=-1){for(var d=c<o.length-1&&o[c+1]!=-1?o[c+1]:0,f=e.U.glyphToPath(i,u),g=0;g<f.crds.length;g+=2)p.crds.push(f.crds[g]+l),p.crds.push(f.crds[g+1]);for(s&&p.cmds.push(s),g=0;g<f.cmds.length;g++)p.cmds.push(f.cmds[g]);s&&p.cmds.push("X"),l+=i.hmtx.aWidth[u],c<o.length-1&&(l+=e.U.getPairAdjustment(i,u,d))}}return p},e.U.P={},e.U.P.moveTo=function(i,o,s){i.cmds.push("M"),i.crds.push(o,s)},e.U.P.lineTo=function(i,o,s){i.cmds.push("L"),i.crds.push(o,s)},e.U.P.curveTo=function(i,o,s,p,l,c,u){i.cmds.push("C"),i.crds.push(o,s,p,l,c,u)},e.U.P.qcurveTo=function(i,o,s,p,l){i.cmds.push("Q"),i.crds.push(o,s,p,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,o,s,p,l){for(var c=o.stack,u=o.nStems,d=o.haveWidth,f=o.width,g=o.open,v=0,A=o.x,m=o.y,h=0,y=0,E=0,b=0,_=0,C=0,B=0,R=0,M=0,x=0,T={val:0,size:0};v<i.length;){e.CFF.getCharString(i,v,T);var w=T.val;if(v+=T.size,w=="o1"||w=="o18")c.length%2!=0&&!d&&(f=c.shift()+p.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(w=="o3"||w=="o23")c.length%2!=0&&!d&&(f=c.shift()+p.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(w=="o4")c.length>1&&!d&&(f=c.shift()+p.nominalWidthX,d=!0),g&&e.U.P.closePath(l),m+=c.pop(),e.U.P.moveTo(l,A,m),g=!0;else if(w=="o5")for(;c.length>0;)A+=c.shift(),m+=c.shift(),e.U.P.lineTo(l,A,m);else if(w=="o6"||w=="o7")for(var S=c.length,I=w=="o6",G=0;G<S;G++){var H=c.shift();I?A+=H:m+=H,I=!I,e.U.P.lineTo(l,A,m)}else if(w=="o8"||w=="o24"){S=c.length;for(var X=0;X+6<=S;)h=A+c.shift(),y=m+c.shift(),E=h+c.shift(),b=y+c.shift(),A=E+c.shift(),m=b+c.shift(),e.U.P.curveTo(l,h,y,E,b,A,m),X+=6;w=="o24"&&(A+=c.shift(),m+=c.shift(),e.U.P.lineTo(l,A,m))}else{if(w=="o11")break;if(w=="o1234"||w=="o1235"||w=="o1236"||w=="o1237")w=="o1234"&&(y=m,E=(h=A+c.shift())+c.shift(),x=b=y+c.shift(),C=b,R=m,A=(B=(_=(M=E+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,h,y,E,b,M,x),e.U.P.curveTo(l,_,C,B,R,A,m)),w=="o1235"&&(h=A+c.shift(),y=m+c.shift(),E=h+c.shift(),b=y+c.shift(),M=E+c.shift(),x=b+c.shift(),_=M+c.shift(),C=x+c.shift(),B=_+c.shift(),R=C+c.shift(),A=B+c.shift(),m=R+c.shift(),c.shift(),e.U.P.curveTo(l,h,y,E,b,M,x),e.U.P.curveTo(l,_,C,B,R,A,m)),w=="o1236"&&(h=A+c.shift(),y=m+c.shift(),E=h+c.shift(),x=b=y+c.shift(),C=b,B=(_=(M=E+c.shift())+c.shift())+c.shift(),R=C+c.shift(),A=B+c.shift(),e.U.P.curveTo(l,h,y,E,b,M,x),e.U.P.curveTo(l,_,C,B,R,A,m)),w=="o1237"&&(h=A+c.shift(),y=m+c.shift(),E=h+c.shift(),b=y+c.shift(),M=E+c.shift(),x=b+c.shift(),_=M+c.shift(),C=x+c.shift(),B=_+c.shift(),R=C+c.shift(),Math.abs(B-A)>Math.abs(R-m)?A=B+c.shift():m=R+c.shift(),e.U.P.curveTo(l,h,y,E,b,M,x),e.U.P.curveTo(l,_,C,B,R,A,m));else if(w=="o14"){if(c.length>0&&!d&&(f=c.shift()+s.nominalWidthX,d=!0),c.length==4){var Z=c.shift(),z=c.shift(),Y=c.shift(),L=c.shift(),Q=e.CFF.glyphBySE(s,Y),V=e.CFF.glyphBySE(s,L);e.U._drawCFF(s.CharStrings[Q],o,s,p,l),o.x=Z,o.y=z,e.U._drawCFF(s.CharStrings[V],o,s,p,l)}g&&(e.U.P.closePath(l),g=!1)}else if(w=="o19"||w=="o20")c.length%2!=0&&!d&&(f=c.shift()+p.nominalWidthX),u+=c.length>>1,c.length=0,d=!0,v+=u+7>>3;else if(w=="o21")c.length>2&&!d&&(f=c.shift()+p.nominalWidthX,d=!0),m+=c.pop(),A+=c.pop(),g&&e.U.P.closePath(l),e.U.P.moveTo(l,A,m),g=!0;else if(w=="o22")c.length>1&&!d&&(f=c.shift()+p.nominalWidthX,d=!0),A+=c.pop(),g&&e.U.P.closePath(l),e.U.P.moveTo(l,A,m),g=!0;else if(w=="o25"){for(;c.length>6;)A+=c.shift(),m+=c.shift(),e.U.P.lineTo(l,A,m);h=A+c.shift(),y=m+c.shift(),E=h+c.shift(),b=y+c.shift(),A=E+c.shift(),m=b+c.shift(),e.U.P.curveTo(l,h,y,E,b,A,m)}else if(w=="o26")for(c.length%2&&(A+=c.shift());c.length>0;)h=A,y=m+c.shift(),A=E=h+c.shift(),m=(b=y+c.shift())+c.shift(),e.U.P.curveTo(l,h,y,E,b,A,m);else if(w=="o27")for(c.length%2&&(m+=c.shift());c.length>0;)y=m,E=(h=A+c.shift())+c.shift(),b=y+c.shift(),A=E+c.shift(),m=b,e.U.P.curveTo(l,h,y,E,b,A,m);else if(w=="o10"||w=="o29"){var N=w=="o10"?p:s;if(c.length==0)console.debug("error: empty stack");else{var P=c.pop(),k=N.Subrs[P+N.Bias];o.x=A,o.y=m,o.nStems=u,o.haveWidth=d,o.width=f,o.open=g,e.U._drawCFF(k,o,s,p,l),A=o.x,m=o.y,u=o.nStems,d=o.haveWidth,f=o.width,g=o.open}}else if(w=="o30"||w=="o31"){var O=c.length,D=(X=0,w=="o31");for(X+=O-(S=-3&O);X<S;)D?(y=m,E=(h=A+c.shift())+c.shift(),m=(b=y+c.shift())+c.shift(),S-X==5?(A=E+c.shift(),X++):A=E,D=!1):(h=A,y=m+c.shift(),E=h+c.shift(),b=y+c.shift(),A=E+c.shift(),S-X==5?(m=b+c.shift(),X++):m=b,D=!0),e.U.P.curveTo(l,h,y,E,b,A,m),X+=4}else{if((w+"").charAt(0)=="o")throw console.debug("Unknown operation: "+w,i),w;c.push(w)}}}o.x=A,o.y=m,o.nStems=u,o.haveWidth=d,o.width=f,o.open=g};var r=e,n={Typr:r};return t.Typr=r,t.default=n,Object.defineProperty(t,"__esModule",{value:!0}),t})({}).Typr}function Ak(){return(function(t){var e=Uint8Array,r=Uint16Array,n=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p=function(w,S){for(var I=new r(31),G=0;G<31;++G)I[G]=S+=1<<w[G-1];var H=new n(I[30]);for(G=1;G<30;++G)for(var X=I[G];X<I[G+1];++X)H[X]=X-I[G]<<5|G;return[I,H]},l=p(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var d=p(o,0)[0],f=new r(32768),g=0;g<32768;++g){var v=(43690&g)>>>1|(21845&g)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,f[g]=((65280&v)>>>8|(255&v)<<8)>>>1}var A=function(w,S,I){for(var G=w.length,H=0,X=new r(S);H<G;++H)++X[w[H]-1];var Z,z=new r(S);for(H=0;H<S;++H)z[H]=z[H-1]+X[H-1]<<1;if(I){Z=new r(1<<S);var Y=15-S;for(H=0;H<G;++H)if(w[H])for(var L=H<<4|w[H],Q=S-w[H],V=z[w[H]-1]++<<Q,N=V|(1<<Q)-1;V<=N;++V)Z[f[V]>>>Y]=L}else for(Z=new r(G),H=0;H<G;++H)w[H]&&(Z[H]=f[z[w[H]-1]++]>>>15-w[H]);return Z},m=new e(288);for(g=0;g<144;++g)m[g]=8;for(g=144;g<256;++g)m[g]=9;for(g=256;g<280;++g)m[g]=7;for(g=280;g<288;++g)m[g]=8;var h=new e(32);for(g=0;g<32;++g)h[g]=5;var y=A(m,9,1),E=A(h,5,1),b=function(w){for(var S=w[0],I=1;I<w.length;++I)w[I]>S&&(S=w[I]);return S},_=function(w,S,I){var G=S/8|0;return(w[G]|w[G+1]<<8)>>(7&S)&I},C=function(w,S){var I=S/8|0;return(w[I]|w[I+1]<<8|w[I+2]<<16)>>(7&S)},B=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],R=function(w,S,I){var G=new Error(S||B[w]);if(G.code=w,Error.captureStackTrace&&Error.captureStackTrace(G,R),!I)throw G;return G},M=function(w,S,I){var G=w.length;if(!G||I&&!I.l&&G<5)return S||new e(0);var H=!S||I,X=!I||I.i;I||(I={}),S||(S=new e(3*G));var Z,z=function(ze){var ee=S.length;if(ze>ee){var Ae=new e(Math.max(2*ee,ze));Ae.set(S),S=Ae}},Y=I.f||0,L=I.p||0,Q=I.b||0,V=I.l,N=I.d,P=I.m,k=I.n,O=8*G;do{if(!V){I.f=Y=_(w,L,1);var D=_(w,L+1,3);if(L+=3,!D){var q=w[(j=((Z=L)/8|0)+(7&Z&&1)+4)-4]|w[j-3]<<8,ae=j+q;if(ae>G){X&&R(0);break}H&&z(Q+q),S.set(w.subarray(j,ae),Q),I.b=Q+=q,I.p=L=8*ae;continue}if(D==1)V=y,N=E,P=9,k=5;else if(D==2){var K=_(w,L,31)+257,re=_(w,L+10,15)+4,he=K+_(w,L+5,31)+1;L+=14;for(var me=new e(he),J=new e(19),oe=0;oe<re;++oe)J[s[oe]]=_(w,L+3*oe,7);L+=3*re;var ce=b(J),ie=(1<<ce)-1,W=A(J,ce,1);for(oe=0;oe<he;){var j,ne=W[_(w,L,ie)];if(L+=15&ne,(j=ne>>>4)<16)me[oe++]=j;else{var ve=0,Ce=0;for(j==16?(Ce=3+_(w,L,3),L+=2,ve=me[oe-1]):j==17?(Ce=3+_(w,L,7),L+=3):j==18&&(Ce=11+_(w,L,127),L+=7);Ce--;)me[oe++]=ve}}var we=me.subarray(0,K),be=me.subarray(K);P=b(we),k=b(be),V=A(we,P,1),N=A(be,k,1)}else R(1);if(L>O){X&&R(0);break}}H&&z(Q+131072);for(var Qe=(1<<P)-1,Le=(1<<k)-1,Fe=L;;Fe=L){var Ge=(ve=V[C(w,L)&Qe])>>>4;if((L+=15&ve)>O){X&&R(0);break}if(ve||R(2),Ge<256)S[Q++]=Ge;else{if(Ge==256){Fe=L,V=null;break}var et=Ge-254;if(Ge>264){var gt=i[oe=Ge-257];et=_(w,L,(1<<gt)-1)+c[oe],L+=gt}var je=N[C(w,L)&Le],pt=je>>>4;if(je||R(3),L+=15&je,be=d[pt],pt>3&&(gt=o[pt],be+=C(w,L)&(1<<gt)-1,L+=gt),L>O){X&&R(0);break}H&&z(Q+131072);for(var De=Q+et;Q<De;Q+=4)S[Q]=S[Q-be],S[Q+1]=S[Q+1-be],S[Q+2]=S[Q+2-be],S[Q+3]=S[Q+3-be];Q=De}}I.l=V,I.p=Fe,I.b=Q,V&&(Y=1,I.m=P,I.d=N,I.n=k)}while(!Y);return Q==S.length?S:(function(ze,ee,Ae){(ee==null||ee<0)&&(ee=0),(Ae==null||Ae>ze.length)&&(Ae=ze.length);var _e=new(ze instanceof r?r:ze instanceof n?n:e)(Ae-ee);return _e.set(ze.subarray(ee,Ae)),_e})(S,0,Q)},x=new e(0),T=typeof TextDecoder<"u"&&new TextDecoder;try{T.decode(x,{stream:!0})}catch{}return t.convert_streams=function(w){var S=new DataView(w),I=0;function G(){var K=S.getUint16(I);return I+=2,K}function H(){var K=S.getUint32(I);return I+=4,K}function X(K){q.setUint16(ae,K),ae+=2}function Z(K){q.setUint32(ae,K),ae+=4}for(var z={signature:H(),flavor:H(),length:H(),numTables:G(),reserved:G(),totalSfntSize:H(),majorVersion:G(),minorVersion:G(),metaOffset:H(),metaLength:H(),metaOrigLength:H(),privOffset:H(),privLength:H()},Y=0;Math.pow(2,Y)<=z.numTables;)Y++;Y--;for(var L=16*Math.pow(2,Y),Q=16*z.numTables-L,V=12,N=[],P=0;P<z.numTables;P++)N.push({tag:H(),offset:H(),compLength:H(),origLength:H(),origChecksum:H()}),V+=16;var k,O=new Uint8Array(12+16*N.length+N.reduce((function(K,re){return K+re.origLength+4}),0)),D=O.buffer,q=new DataView(D),ae=0;return Z(z.flavor),X(z.numTables),X(L),X(Y),X(Q),N.forEach((function(K){Z(K.tag),Z(K.origChecksum),Z(V),Z(K.origLength),K.outOffset=V,(V+=K.origLength)%4!=0&&(V+=4-V%4)})),N.forEach((function(K){var re,he=w.slice(K.offset,K.offset+K.compLength);if(K.compLength!=K.origLength){var me=new Uint8Array(K.origLength);re=new Uint8Array(he,2),M(re,me)}else me=new Uint8Array(he);O.set(me,K.outOffset);var J=0;(V=K.outOffset+K.origLength)%4!=0&&(J=4-V%4),O.set(new Uint8Array(J).buffer,K.outOffset+K.origLength),k=V+J})),D.slice(0,k)},Object.defineProperty(t,"__esModule",{value:!0}),t})({}).convert_streams}function yk(t,e){let r={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,o=2,s=4,p=8,l=16,c=32,u;function d(_){if(!u){let C={R:o,L:i,D:s,C:l,U:c,T:p};u=new Map;for(let B in n){let R=0;n[B].split(",").forEach(M=>{let[x,T]=M.split("+");x=parseInt(x,36),T=T?parseInt(T,36):0,u.set(R+=x,C[B]);for(let w=T;w--;)u.set(++R,C[B])})}}return u.get(_)||c}let f=1,g=2,v=3,A=4,m=[null,"isol","init","fina","medi"];function h(_){let C=new Uint8Array(_.length),B=c,R=f,M=-1;for(let x=0;x<_.length;x++){let T=_.codePointAt(x),w=d(T)|0,S=f;w&p||(B&(i|s|l)?w&(o|s|l)?(S=v,(R===f||R===v)&&C[M]++):w&(i|c)&&(R===g||R===A)&&C[M]--:B&(o|c)&&(R===g||R===A)&&C[M]--,R=C[x]=S,B=w,M=x,T>65535&&x++)}return C}function y(_,C){let B=[];for(let M=0;M<C.length;M++){let x=C.codePointAt(M);x>65535&&M++,B.push(t.U.codeToGlyph(_,x))}let R=_.GSUB;if(R){let{lookupList:M,featureList:x}=R,T,w=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,S=[];x.forEach(I=>{if(w.test(I.tag))for(let G=0;G<I.tab.length;G++){if(S[I.tab[G]])continue;S[I.tab[G]]=!0;let H=M[I.tab[G]],X=/^(isol|init|fina|medi)$/.test(I.tag);X&&!T&&(T=h(C));for(let Z=0;Z<B.length;Z++)(!T||!X||m[T[Z]]===I.tag)&&t.U._applySubs(B,Z,H,M)}})}return B}function E(..._){for(let C=0;C<_.length;C++)if(typeof _[C]=="number")return _[C]}function b(_){let C=Object.create(null),B=_["OS/2"],R=_.hhea,M=_.head.unitsPerEm,x=E(B&&B.sTypoAscender,R&&R.ascender,M),T={unitsPerEm:M,ascender:x,descender:E(B&&B.sTypoDescender,R&&R.descender,0),capHeight:E(B&&B.sCapHeight,x),xHeight:E(B&&B.sxHeight,x),lineGap:E(B&&B.sTypoLineGap,R&&R.lineGap),forEachGlyph(w,S,I,G){let H=0,X=1/T.unitsPerEm*S,Z=y(_,w),z=0,Y=-1;return Z.forEach((L,Q)=>{if(L!==-1){let V=C[L];if(!V){let{cmds:N,crds:P}=t.U.glyphToPath(_,L),k="",O=0;for(let re=0,he=N.length;re<he;re++){let me=r[N[re]];k+=N[re];for(let J=1;J<=me;J++)k+=(J>1?",":"")+P[O++]}let D,q,ae,K;if(P.length){D=q=1/0,ae=K=-1/0;for(let re=0,he=P.length;re<he;re+=2){let me=P[re],J=P[re+1];me<D&&(D=me),J<q&&(q=J),me>ae&&(ae=me),J>K&&(K=J)}}else D=ae=q=K=0;V=C[L]={index:L,advanceWidth:_.hmtx.aWidth[L],xMin:D,yMin:q,xMax:ae,yMax:K,path:k,pathCommandCount:N.length}}Y!==-1&&(H+=t.U.getPairAdjustment(_,Y,L)*X),G.call(null,V,H,z),V.advanceWidth&&(H+=V.advanceWidth*X),I&&(H+=I*S),Y=L}z+=w.codePointAt(z)>65535?2:1}),H}};return T}return function(C){let B=new Uint8Array(C,0,4),R=t._bin.readASCII(B,0,4);if(R==="wOFF")C=e(C);else if(R==="wOF2")throw new Error("woff2 fonts not supported");return b(t.parse(C)[0])}}var vk=Qp({name:"Typr Font Parser",dependencies:[mk,Ak,yk],init(t,e,r){let n=t(),i=e();return r(n,i)}}),Vp={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Ek=new jA,bk=!1;function Wp(){return(self.performance||Date).now()}var xC=Object.create(null);function DC(t,e){bk=!0,t=Ck({},t);let r=Wp();if(t.font=Rk(t.font||Vp.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||Vp.sdfGlyphSize,t.colorRanges!=null){let d={};for(let f in t.colorRanges)if(t.colorRanges.hasOwnProperty(f)){let g=t.colorRanges[f];typeof g!="number"&&(g=Ek.set(g).getHex()),d[f]=g}t.colorRanges=d}Object.freeze(t);let{textureWidth:n,sdfExponent:i}=Vp,{sdfGlyphSize:o}=t,s=n/o*4,p=xC[o];if(!p){let d=document.createElement("canvas");d.width=n,d.height=o*256/s,p=xC[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:d,sdfTexture:new XD(d,void 0,void 0,void 0,bC,bC),contextLost:!1,glyphsByFont:new Map},p.sdfTexture.generateMipmaps=!1,_k(p)}let{sdfTexture:l,sdfCanvas:c}=p,u=p.glyphsByFont.get(t.font);u||p.glyphsByFont.set(t.font,u=new Map),xk(t).then(d=>{let{glyphIds:f,glyphPositions:g,fontSize:v,unitsPerEm:A,timings:m}=d,h=[],y=new Float32Array(f.length*4),E=v/A,b=0,_=0,C=Wp();f.forEach((T,w)=>{let S=u.get(T);if(!S){let{path:X,pathBounds:Z}=d.glyphData[T],z=Math.max(Z[2]-Z[0],Z[3]-Z[1])/o*(Vp.sdfMargin*o+.5),Y=p.glyphCount++,L=[Z[0]-z,Z[1]-z,Z[2]+z,Z[3]+z];u.set(T,S={path:X,atlasIndex:Y,sdfViewBox:L}),h.push(S)}let{sdfViewBox:I}=S,G=g[_++],H=g[_++];y[b++]=G+I[0]*E,y[b++]=H+I[1]*E,y[b++]=G+I[2]*E,y[b++]=H+I[3]*E,f[w]=S.atlasIndex}),m.quads=(m.quads||0)+(Wp()-C);let B=Wp();m.sdf={};let R=c.height,M=Math.ceil(p.glyphCount/s),x=Math.pow(2,Math.ceil(Math.log2(M*o)));x>R&&(console.info(`Increasing SDF texture size ${R}->${x}`),hk(c,n,x),l.dispose()),Promise.all(h.map(T=>kC(T,p,t.gpuAccelerateSDF).then(({timing:w})=>{m.sdf[T.atlasIndex]=w}))).then(()=>{h.length&&!p.contextLost&&(PC(p),l.needsUpdate=!0),m.sdfTotal=Wp()-B,m.total=Wp()-r,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:o,sdfExponent:i,glyphBounds:y,glyphAtlasIndices:f,glyphColors:d.glyphColors,caretPositions:d.caretPositions,caretHeight:d.caretHeight,chunkedBounds:d.chunkedBounds,ascender:d.ascender,descender:d.descender,lineHeight:d.lineHeight,capHeight:d.capHeight,xHeight:d.xHeight,topBaseline:d.topBaseline,blockBounds:d.blockBounds,visibleBounds:d.visibleBounds,timings:d.timings}))})}),Promise.resolve().then(()=>{p.contextLost||gk(c)})}function kC({path:t,atlasIndex:e,sdfViewBox:r},{sdfGlyphSize:n,sdfCanvas:i,contextLost:o},s){if(o)return Promise.resolve({timing:-1});let{textureWidth:p,sdfExponent:l}=Vp,c=Math.max(r[2]-r[0],r[3]-r[1]),u=Math.floor(e/4),d=u%(p/n)*n,f=Math.floor(u/(p/n))*n,g=e%4;return pk(n,n,t,r,c,l,i,d,f,g,s)}function _k(t){let e=t.sdfCanvas;e.addEventListener("webglcontextlost",r=>{console.log("Context Lost",r),r.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",r=>{console.log("Context Restored",r),t.contextLost=!1;let n=[];t.glyphsByFont.forEach(i=>{i.forEach(o=>{n.push(kC(o,t,!0))})}),Promise.all(n).then(()=>{PC(t),t.sdfTexture.needsUpdate=!0})})}function LC({font:t,characters:e,sdfGlyphSize:r},n){let i=Array.isArray(e)?e.join(`
`):""+e;DC({font:t,sdfGlyphSize:r,text:i},n)}function Ck(t,e){for(let r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var hg;function Rk(t){return hg||(hg=typeof document>"u"?{}:document.createElement("a")),hg.href=t,hg.href}function PC(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");let{sdfCanvas:e,sdfTexture:r}=t,{width:n,height:i}=e,o=t.sdfCanvas.getContext("webgl"),s=r.image.data;(!s||s.length!==n*i*4)&&(s=new Uint8Array(n*i*4),r.image={width:n,height:i,data:s},r.flipY=!1,r.isDataTexture=!0),o.readPixels(0,0,n,i,o.RGBA,o.UNSIGNED_BYTE,s)}}var Bk=Qp({name:"Typesetter",dependencies:[Vp,vk,sk,mC],init(t,e,r,n){let{defaultFontURL:i}=t;return r(e,n(),{defaultFontURL:i})}}),xk=Qp({name:"Typesetter",dependencies:[Bk],init(t){return function(e){return new Promise(r=>{t.typeset(e,r)})}},getTransferables(t){let e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}});var MC={};function Mk(t){let e=MC[t];if(!e){let r=new HA(1,1,t,t),n=r.clone(),i=r.attributes,o=n.attributes,s=new tk,p=i.uv.count;for(let l=0;l<p;l++)o.position.array[l*3]*=-1,o.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{s.setAttribute(l,new rk([...i[l].array,...o[l].array],i[l].itemSize))}),s.setIndex([...r.index.array,...n.index.array.map(l=>l+p)]),s.translate(.5,.5,0),e=MC[t]=s}return e}var wk="aTroikaGlyphBounds",wC="aTroikaGlyphIndex",Tk="aTroikaGlyphColor",UA=class extends JD{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new qD,this.boundingBox=new ZD}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){let r=this.getIndex().count;this.setDrawRange(e===$D?r/2:0,e===FC?r:r/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let r=Mk(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=r.attributes[n].clone()}),this.setIndex(r.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,r,n,i,o){PA(this,wk,e,4),PA(this,wC,r,1),PA(this,Tk,o,3),this._blockBounds=n,this._chunkedBounds=i,this.instanceCount=r.length,this._updateBounds()}_updateBounds(){let e=this._blockBounds;if(e){let{curveRadius:r,boundingBox:n}=this;if(r){let{PI:i,floor:o,min:s,max:p,sin:l,cos:c}=Math,u=i/2,d=i*2,f=Math.abs(r),g=e[0]/f,v=e[2]/f,A=o((g+u)/d)!==o((v+u)/d)?-f:s(l(g)*f,l(v)*f),m=o((g-u)/d)!==o((v-u)/d)?f:p(l(g)*f,l(v)*f),h=o((g+i)/d)!==o((v+i)/d)?f*2:p(f-c(g)*f,f-c(v)*f);n.min.set(A,e[1],r<0?-h:0),n.max.set(m,e[3],r<0?0:h)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let r=this.getAttribute(wC).count,n=this._chunkedBounds;if(n)for(let i=n.length;i--;){r=n[i].end;let o=n[i].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}this.instanceCount=r}};function PA(t,e,r,n){let i=t.getAttribute(e);r?i&&i.array.length===r.length?(i.array.set(r),i.needsUpdate=!0):(t.setAttribute(e,new ek(r,n)),delete t._maxInstanceCount,t.dispose()):i&&t.deleteAttribute(e)}var Sk=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,Ik=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Fk=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,Ok=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function Dk(t){let e=gg(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new yg},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new _C(0,0,0,0)},uTroikaClipRect:{value:new _C(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new yg},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new jA},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new ok},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Sk,vertexTransform:Ik,fragmentDefs:Fk,fragmentColorTransform:Ok,customRewriter({vertexShader:r,fragmentShader:n}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(n)&&(n=n.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(r)||(r=r.replace(LA,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:r,fragmentShader:n}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}var VA=new nk({color:16777215,side:FC,transparent:!0}),TC=8421504,SC=new ak,mg=new WA,GA=new WA,Sd=[],kk=new WA,zA="+x+y";function IC(t){return Array.isArray(t)?t[0]:t}var GC=()=>{let t=new QA(new HA(1,1),VA);return GC=()=>t,t},zC=()=>{let t=new QA(new HA(1,1,32,1),VA);return zC=()=>t,t},Lk={type:"syncstart"},Pk={type:"synccomplete"},NC=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Gk=NC.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail"),Id=class extends QA{constructor(){let e=new UA;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=TC,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=zA,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(Lk),DC({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},r=>{this._isSyncing=!1,this._textRenderInfo=r,this.geometry.updateGlyphs(r.glyphBounds,r.glyphAtlasIndices,r.blockBounds,r.chunkedBounds,r.glyphColors);let n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(i=>i&&i())})),this.dispatchEvent(Pk),e&&e()})))}onBeforeRender(e,r,n,i,o,s){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=ik}onAfterRender(e,r,n,i,o,s){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial,r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=VA.clone());if((!e||e.baseMaterial!==r)&&(e=this._derivedMaterial=Dk(r),r.addEventListener("dispose",function n(){r.removeEventListener("dispose",n),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return IC(this.material).getDepthMaterial()}get customDistanceMaterial(){return IC(this.material).getDistanceMaterial()}_prepareForRender(e){let r=e.isTextOutlineMaterial,n=e.uniforms,i=this.textRenderInfo;if(i){let{sdfTexture:p,blockBounds:l}=i;n.uTroikaSDFTexture.value=p,n.uTroikaSDFTextureSize.value.set(p.image.width,p.image.height),n.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,n.uTroikaSDFExponent.value=i.sdfExponent,n.uTroikaTotalBounds.value.fromArray(l),n.uTroikaUseGlyphColors.value=!r&&!!i.glyphColors;let c=0,u=0,d=0,f,g,v,A=0,m=0;if(r){let{outlineWidth:y,outlineOffsetX:E,outlineOffsetY:b,outlineBlur:_,outlineOpacity:C}=this;c=this._parsePercent(y)||0,u=Math.max(0,this._parsePercent(_)||0),f=C,A=this._parsePercent(E)||0,m=this._parsePercent(b)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(v=this.strokeColor,n.uTroikaStrokeColor.value.set(v??TC),g=this.strokeOpacity,g==null&&(g=1)),f=this.fillOpacity;n.uTroikaDistanceOffset.value=c,n.uTroikaPositionOffset.value.set(A,m),n.uTroikaBlurRadius.value=u,n.uTroikaStrokeWidth.value=d,n.uTroikaStrokeOpacity.value=g,n.uTroikaFillOpacity.value=f??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let h=this.clipRect;if(h&&Array.isArray(h)&&h.length===4)n.uTroikaClipRect.value.fromArray(h);else{let y=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(l[0]-y,l[1]-y,l[2]+y,l[3]+y)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;let o=r?this.outlineColor||0:this.color;if(o==null)delete e.color;else{let p=e.hasOwnProperty("color")?e.color:e.color=new jA;(o!==p._input||typeof o=="object")&&p.set(p._input=o)}let s=this.orientation||zA;if(s!==e._orientation){let p=n.uTroikaOrient.value;s=s.replace(/[^-+xyz]/g,"");let l=s!==zA&&s.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,d,f]=l;mg.set(0,0,0)[u]=c==="-"?1:-1,GA.set(0,0,0)[f]=d==="-"?-1:1,SC.lookAt(kk,mg.cross(GA),GA),p.setFromMatrix4(SC)}else p.identity();e._orientation=s}}_parsePercent(e){if(typeof e=="string"){let r=e.match(/^(-?[\d.]+)%$/),n=r?parseFloat(r[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,r=new yg){r.copy(e);let n=this.curveRadius;return n&&(r.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),r}worldPositionToTextCoords(e,r=new yg){return mg.copy(e),this.localPositionToTextCoords(this.worldToLocal(mg),r)}raycast(e,r){let{textRenderInfo:n,curveRadius:i}=this;if(n){let o=n.blockBounds,s=i?zC():GC(),p=s.geometry,{position:l,uv:c}=p.attributes;for(let u=0;u<c.count;u++){let d=o[0]+c.getX(u)*(o[2]-o[0]),f=o[1]+c.getY(u)*(o[3]-o[1]),g=0;i&&(g=i-Math.cos(d/i)*i,d=Math.sin(d/i)*i),l.setXYZ(u,d,f,g)}p.boundingSphere=this.geometry.boundingSphere,p.boundingBox=this.geometry.boundingBox,s.matrixWorld=this.matrixWorld,s.material.side=this.material.side,Sd.length=0,s.raycast(e,Sd);for(let u=0;u<Sd.length;u++)Sd[u].object=this,r.push(Sd[u])}}copy(e){let r=this.geometry;return super.copy(e),this.geometry=r,Gk.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};NC.forEach(t=>{let e="_private_"+t;Object.defineProperty(Id.prototype,t,{get(){return this[e]},set(r){r!==this[e]&&(this[e]=r,this._needsSync=!0)}})});import{useThree as Nk}from"@react-three/fiber";var zk=t=>typeof t=="object"&&typeof t.then=="function",Ns=[];function UC(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e)return!1;let n=t.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!r(t[i],e[i]))return!1;return!0}function jC(t,e=null,r=!1,n={}){e===null&&(e=[t]);for(let o of Ns)if(UC(e,o.keys,o.equal)){if(r)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return n.lifespan&&n.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,n.lifespan)),o.response;if(!r)throw o.promise}let i={keys:e,equal:n.equal,remove:()=>{let o=Ns.indexOf(i);o!==-1&&Ns.splice(o,1)},promise:(zk(t)?t:t(...e)).then(o=>{i.response=o,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(o=>i.error=o)};if(Ns.push(i),!r)throw i.promise}var Oo=(t,e,r)=>jC(t,e,!1,r),HC=(t,e,r)=>void jC(t,e,!0,r);var Yp=t=>{if(t===void 0||t.length===0)Ns.splice(0,Ns.length);else{let e=Ns.find(r=>UC(t,r.keys,r.equal));e&&e.remove()}};var Uk=ei.forwardRef(({sdfGlyphSize:t=64,anchorX:e="center",anchorY:r="middle",font:n,fontSize:i=1,children:o,characters:s,onSync:p,...l},c)=>{let u=Nk(({invalidate:v})=>v),[d]=ei.useState(()=>new Id),[f,g]=ei.useMemo(()=>{let v=[],A="";return ei.Children.forEach(o,m=>{typeof m=="string"||typeof m=="number"?A+=m:v.push(m)}),[v,A]},[o]);return Oo(()=>new Promise(v=>LC({font:n,characters:s},v)),["troika-text",n,s]),ei.useLayoutEffect(()=>void d.sync(()=>{u(),p&&p(d)})),ei.useEffect(()=>()=>d.dispose(),[d]),ei.createElement("primitive",te({object:d,ref:c,font:n,text:g,anchorX:e,anchorY:r,fontSize:i,sdfGlyphSize:t},l),f)});import*as Do from"react";import{useMemo as WC}from"react";import{extend as jk}from"@react-three/fiber";var YA=null;async function QC(t){YA||(YA=new ud);let e=typeof t=="string"?await(await fetch(t)).json():t;return YA.parse(e)}function Fd(t){return Oo(QC,[t])}Fd.preload=t=>HC(QC,[t]);Fd.clear=t=>Yp([t]);var Hk=["string","number"],Qk=t=>{let e="",r=[];return Do.Children.forEach(t,n=>{Hk.includes(typeof n)?e+=n+"":r.push(n)}),[e,...r]},KA=Do.forwardRef(({font:t,letterSpacing:e=0,lineHeight:r=1,size:n=1,height:i=.2,bevelThickness:o=.1,bevelSize:s=.01,bevelEnabled:p=!1,bevelOffset:l=0,bevelSegments:c=4,curveSegments:u=8,smooth:d,children:f,...g},v)=>{Do.useMemo(()=>jk({RenamedTextGeometry:Dp}),[]);let A=Do.useRef(null),m=Fd(t),h=WC(()=>({font:m,size:n,height:i,bevelThickness:o,bevelSize:s,bevelEnabled:p,bevelSegments:c,bevelOffset:l,curveSegments:u,letterSpacing:e,lineHeight:r}),[m,n,i,o,s,p,c,l,u,e,r]),[y,...E]=WC(()=>Qk(f),[f]),b=Do.useMemo(()=>[y,h],[y,h]);return Do.useLayoutEffect(()=>{d&&(A.current.geometry=H0(A.current.geometry,d),A.current.geometry.computeVertexNormals())},[b,d]),Do.useImperativeHandle(v,()=>A.current,[]),Do.createElement("mesh",te({},g,{ref:A}),Do.createElement("renamedTextGeometry",{args:b}),E)});import*as lo from"react";import{WebGLRenderTarget as Wk,HalfFloatType as Vk,RGBAFormat as Yk,UnsignedByteType as Kk}from"three";import{extend as Xk,useThree as Jk,useFrame as qk}from"@react-three/fiber";var Zk=()=>{try{var t=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&t.getContext("webgl2"))}catch{return!1}},$k=lo.forwardRef(({children:t,multisamping:e=8,renderIndex:r=1,disableRender:n,disableGamma:i,disableRenderPass:o,depthBuffer:s=!0,stencilBuffer:p=!1,anisotropy:l=1,encoding:c,type:u,...d},f)=>{lo.useMemo(()=>Xk({EffectComposer:Yc,RenderPass:Kc,ShaderPass:Sa}),[]);let g=lo.useRef(),{scene:v,camera:A,gl:m,size:h,viewport:y}=Jk(),[E]=lo.useState(()=>{let _=new Wk(h.width,h.height,{type:u||Vk,format:Yk,depthBuffer:s,stencilBuffer:p,anisotropy:l});return u===Kk&&c!=null&&("colorSpace"in _?_.texture.colorSpace=c:_.texture.encoding=c),_.samples=e,_});lo.useEffect(()=>{var _,C;(_=g.current)==null||_.setSize(h.width,h.height),(C=g.current)==null||C.setPixelRatio(y.dpr)},[m,h,y.dpr]),qk(()=>{var _;n||(_=g.current)==null||_.render()},r);let b=[];return o||b.push(lo.createElement("renderPass",{key:"renderpass",attach:`passes-${b.length}`,args:[v,A]})),i||b.push(lo.createElement("shaderPass",{attach:`passes-${b.length}`,key:"gammapass",args:[W1]})),lo.Children.forEach(t,_=>{_&&b.push(lo.cloneElement(_,{key:b.length,attach:`passes-${b.length}`}))}),lo.createElement("effectComposer",te({ref:tt([f,g]),args:[m,E]},d),b)});import*as Eg from"react";import{useThree as eL}from"@react-three/fiber";var XA=(function(t){return t.Linear="linear",t.Radial="radial",t})({});function tL({stops:t,colors:e,size:r=1024,width:n=16,type:i=XA.Linear,innerCircleRadius:o=0,outerCircleRadius:s="auto",...p}){let l=eL(u=>u.gl),c=Eg.useMemo(()=>{let u=document.createElement("canvas"),d=u.getContext("2d");u.width=n,u.height=r;let f;if(i===XA.Linear)f=d.createLinearGradient(0,0,0,r);else{let v=u.width/2,A=u.height/2,m=s!=="auto"?Math.abs(Number(s)):Math.sqrt(v**2+A**2);f=d.createRadialGradient(v,A,Math.abs(o),v,A,m)}let g=t.length;for(;g--;)f.addColorStop(t[g],e[g]);return d.save(),d.fillStyle=f,d.fillRect(0,0,n,r),d.restore(),u},[t]);return Eg.createElement("canvasTexture",te({colorSpace:l.outputColorSpace,args:[c],attach:"map"},p))}import*as _i from"react";import*as VC from"three";import{extend as sL}from"@react-three/fiber";import*as Kp from"three";function Mr(t,e,r,n){let i=class extends Kp.ShaderMaterial{constructor(s={}){let p=Object.entries(t);super({uniforms:p.reduce((l,[c,u])=>{let d=Kp.UniformsUtils.clone({[c]:{value:u}});return{...l,...d}},{}),vertexShader:e,fragmentShader:r}),this.key="",p.forEach(([l])=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c})),Object.assign(this,s),n&&n(this)}};return i.key=Kp.MathUtils.generateUUID(),i}import{TextureLoader as JA}from"three";import{useThree as rL,useLoader as qA}from"@react-three/fiber";import{useLayoutEffect as oL,useEffect as iL}from"react";var Xp=t=>t===Object(t)&&!Array.isArray(t)&&typeof t!="function";function un(t,e){let r=rL(i=>i.gl),n=qA(JA,Xp(t)?Object.values(t):t);if(oL(()=>{e?.(n)},[e]),iL(()=>{"initTexture"in r&&(Array.isArray(n)?n:[n]).forEach(r.initTexture)},[r,n]),Xp(t)){let i=Object.keys(t),o={};return i.forEach(s=>Object.assign(o,{[s]:n[i.indexOf(s)]})),o}else return n}un.preload=t=>qA.preload(JA,t);un.clear=t=>qA.clear(JA,t);import{REVISION as nL}from"three";var aL=()=>parseInt(nL.replace(/\D+/g,"")),er=aL();var pL=Mr({color:new VC.Color("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0,opacity:1},`
  varying vec2 vUv;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity), grayscale);
    
    #include <tonemapping_fragment>
    #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
  }
`),YC=_i.forwardRef(({children:t,color:e,segments:r=1,scale:n=1,zoom:i=1,grayscale:o=0,opacity:s=1,texture:p,toneMapped:l,transparent:c,...u},d)=>{sL({ImageMaterial:pL});let f=Array.isArray(n)?[n[0],n[1]]:[n,n],g=[p.image.width,p.image.height];return _i.createElement("mesh",te({ref:d,scale:Array.isArray(n)?[...n,1]:n},u),_i.createElement("planeGeometry",{args:[1,1,r,r]}),_i.createElement("imageMaterial",{color:e,map:p,zoom:i,grayscale:o,opacity:s,scale:f,imageBounds:g,toneMapped:l,transparent:c}),t)}),lL=_i.forwardRef(({url:t,...e},r)=>{let n=un(t);return _i.createElement(YC,te({},e,{texture:n,ref:r}))}),cL=_i.forwardRef(({url:t,...e},r)=>_i.createElement(YC,te({},e,{ref:r}))),dL=_i.forwardRef((t,e)=>{if(t.url)return _i.createElement(lL,te({},t,{ref:e}));if(t.texture)return _i.createElement(cL,te({},t,{ref:e}));throw new Error("<Image /> requires a url or texture")});import*as fn from"react";import*as KC from"three";var ZA=fn.forwardRef(({userData:t,children:e,geometry:r,threshold:n=15,color:i="black",...o},s)=>{let p=fn.useRef(null);return fn.useLayoutEffect(()=>{let l=p.current.parent;if(l){let c=r||l.geometry;(c!==p.current.userData.currentGeom||n!==p.current.userData.currentThreshold)&&(p.current.userData.currentGeom=c,p.current.userData.currentThreshold=n,p.current.geometry=new KC.EdgesGeometry(c,n))}}),fn.useImperativeHandle(s,()=>p.current),fn.createElement("lineSegments",te({ref:p,raycast:()=>null},o),e||fn.createElement("lineBasicMaterial",{color:i}))});import*as Ci from"three";import*as No from"react";import{useThree as uL,extend as fL,applyProps as gL}from"@react-three/fiber";var XC=Mr({screenspace:!1,color:new Ci.Color("black"),opacity:1,thickness:.05,size:new Ci.Vector2},`#include <common>
   #include <morphtarget_pars_vertex>
   #include <skinning_pars_vertex>
   uniform float thickness;
   uniform float screenspace;
   uniform vec2 size;
   void main() {
     #if defined (USE_SKINNING)
	     #include <beginnormal_vertex>
       #include <morphnormal_vertex>
       #include <skinbase_vertex>
       #include <skinnormal_vertex>
       #include <defaultnormal_vertex>
     #endif
     #include <begin_vertex>
	   #include <morphtarget_vertex>
	   #include <skinning_vertex>
     #include <project_vertex>
     vec4 tNormal = vec4(normal, 0.0);
     vec4 tPosition = vec4(transformed, 1.0);
     #ifdef USE_INSTANCING
       tNormal = instanceMatrix * tNormal;
       tPosition = instanceMatrix * tPosition;
     #endif
     if (screenspace == 0.0) {
       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;
       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0); 
     } else {
       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;
       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;
       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;
       clipPosition.xy += offset;
       gl_Position = clipPosition;
     }
   }`,`uniform vec3 color;
   uniform float opacity;
   void main(){
     gl_FragColor = vec4(color, opacity);
     #include <tonemapping_fragment>
     #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
   }`);function hL({color:t="black",opacity:e=1,transparent:r=!1,screenspace:n=!1,toneMapped:i=!0,polygonOffset:o=!1,polygonOffsetFactor:s=0,renderOrder:p=0,thickness:l=.05,angle:c=Math.PI,...u}){let d=No.useRef(null),[f]=No.useState(()=>new XC({side:Ci.BackSide})),{gl:g}=uL(),v=g.getDrawingBufferSize(new Ci.Vector2);No.useMemo(()=>fL({OutlinesMaterial:XC}),[]);let A=No.useRef(0),m=No.useRef(null);return No.useLayoutEffect(()=>{let h=d.current,y=h.parent;if(y&&y.geometry&&(A.current!==c||m.current!==y.geometry)){A.current=c,m.current=y.geometry;let E=h.children[0];E&&(c&&E.geometry.dispose(),h.remove(E)),y.skeleton?(E=new Ci.SkinnedMesh,E.material=f,E.bind(y.skeleton,y.bindMatrix),h.add(E)):y.isInstancedMesh?(E=new Ci.InstancedMesh(y.geometry,f,y.count),E.instanceMatrix=y.instanceMatrix,h.add(E)):(E=new Ci.Mesh,E.material=f,h.add(E)),E.geometry=c?Sc(y.geometry,c):y.geometry}}),No.useLayoutEffect(()=>{let y=d.current.children[0];y&&(y.renderOrder=p,gL(y.material,{transparent:r,thickness:l,color:t,opacity:e,size:v,screenspace:n,toneMapped:i,polygonOffset:o,polygonOffsetFactor:s}))}),No.useEffect(()=>()=>{let h=d.current,y=h.children[0];y&&(c&&y.geometry.dispose(),h.remove(y))},[]),No.createElement("group",te({ref:d},u))}import{useFrame as ZC,useThree as JC,createPortal as CL}from"@react-three/fiber";import*as wr from"react";import{Vector3 as qC,Object3D as RL,Vector2 as BL}from"three";import*as vt from"three";var mL=Object.defineProperty,AL=(t,e,r)=>e in t?mL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Dt=(t,e,r)=>(AL(t,typeof e!="symbol"?e+"":e,r),r);function $A(t,e,r,n,i){let o;if(t=t.subarray||t.slice?t:t.buffer,r=r.subarray||r.slice?r:r.buffer,t=e?t.subarray?t.subarray(e,i&&e+i):t.slice(e,i&&e+i):t,r.set)r.set(t,n);else for(o=0;o<t.length;o++)r[o+n]=t[o];return r}function yL(t){return t instanceof Float32Array?t:t instanceof vt.BufferGeometry?t.getAttribute("position").array:t.map(e=>{let r=Array.isArray(e);return e instanceof vt.Vector3?[e.x,e.y,e.z]:e instanceof vt.Vector2?[e.x,e.y,0]:r&&e.length===3?[e[0],e[1],e[2]]:r&&e.length===2?[e[0],e[1],0]:e}).flat()}var bg=class extends vt.BufferGeometry{constructor(){super(),Dt(this,"type","MeshLine"),Dt(this,"isMeshLine",!0),Dt(this,"positions",[]),Dt(this,"previous",[]),Dt(this,"next",[]),Dt(this,"side",[]),Dt(this,"width",[]),Dt(this,"indices_array",[]),Dt(this,"uvs",[]),Dt(this,"counters",[]),Dt(this,"widthCallback",null),Dt(this,"_attributes"),Dt(this,"_points",[]),Dt(this,"points"),Dt(this,"matrixWorld",new vt.Matrix4),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setPoints(e,r){if(e=yL(e),this._points=e,this.widthCallback=r??null,this.positions=[],this.counters=[],e.length&&e[0]instanceof vt.Vector3)for(let n=0;n<e.length;n++){let i=e[n],o=n/(e.length-1);this.positions.push(i.x,i.y,i.z),this.positions.push(i.x,i.y,i.z),this.counters.push(o),this.counters.push(o)}else for(let n=0;n<e.length;n+=3){let i=n/(e.length-1);this.positions.push(e[n],e[n+1],e[n+2]),this.positions.push(e[n],e[n+1],e[n+2]),this.counters.push(i),this.counters.push(i)}this.process()}compareV3(e,r){let n=e*6,i=r*6;return this.positions[n]===this.positions[i]&&this.positions[n+1]===this.positions[i+1]&&this.positions[n+2]===this.positions[i+2]}copyV3(e){let r=e*6;return[this.positions[r],this.positions[r+1],this.positions[r+2]]}process(){let e=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let r,n;this.compareV3(0,e-1)?n=this.copyV3(e-2):n=this.copyV3(0),this.previous.push(n[0],n[1],n[2]),this.previous.push(n[0],n[1],n[2]);for(let i=0;i<e;i++){if(this.side.push(1),this.side.push(-1),this.widthCallback?r=this.widthCallback(i/(e-1)):r=1,this.width.push(r),this.width.push(r),this.uvs.push(i/(e-1),0),this.uvs.push(i/(e-1),1),i<e-1){n=this.copyV3(i),this.previous.push(n[0],n[1],n[2]),this.previous.push(n[0],n[1],n[2]);let o=i*2;this.indices_array.push(o,o+1,o+2),this.indices_array.push(o+2,o+1,o+3)}i>0&&(n=this.copyV3(i),this.next.push(n[0],n[1],n[2]),this.next.push(n[0],n[1],n[2]))}this.compareV3(e-1,0)?n=this.copyV3(1):n=this.copyV3(e-1),this.next.push(n[0],n[1],n[2]),this.next.push(n[0],n[1],n[2]),!this._attributes||this._attributes.position.count!==this.counters.length?this._attributes={position:new vt.BufferAttribute(new Float32Array(this.positions),3),previous:new vt.BufferAttribute(new Float32Array(this.previous),3),next:new vt.BufferAttribute(new Float32Array(this.next),3),side:new vt.BufferAttribute(new Float32Array(this.side),1),width:new vt.BufferAttribute(new Float32Array(this.width),1),uv:new vt.BufferAttribute(new Float32Array(this.uvs),2),index:new vt.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new vt.BufferAttribute(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:r,z:n}){let i=this._attributes.position.array,o=this._attributes.previous.array,s=this._attributes.next.array,p=i.length;$A(i,0,o,0,p),$A(i,6,i,0,p-6),i[p-6]=e,i[p-5]=r,i[p-4]=n,i[p-3]=e,i[p-2]=r,i[p-1]=n,$A(i,6,s,0,p-6),s[p-6]=e,s[p-5]=r,s[p-4]=n,s[p-3]=e,s[p-2]=r,s[p-1]=n,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}},vL=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>
  #include <clipping_planes_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
    vCounters = counters;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0) * aspect;
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir;
    if (nextP == currentP) dir = normalize(currentP - prevP);
    else if (prevP == currentP) dir = normalize(nextP - currentP);
    else {
      vec2 dir1 = normalize(currentP - prevP);
      vec2 dir2 = normalize(nextP - currentP);
      dir = normalize(dir1 + dir2);
  
      vec2 perp = vec2(-dir1.y, dir1.x);
      vec2 miter = vec2(-dir.y, dir.x);
      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
    }
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy * aspect;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <clipping_planes_vertex>
    #include <fog_vertex>
  }
`,EL=parseInt(vt.REVISION.replace(/\D+/g,"")),bL=EL>=154?"colorspace_fragment":"encodings_fragment",_L=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  #include <clipping_planes_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useGradient;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  uniform vec3 gradient[2];
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 diffuseColor = vColor;
    if (useGradient == 1.) diffuseColor = vec4(mix(gradient[0], gradient[1], vCounters), 1.0);
    if (useMap == 1.) diffuseColor *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) diffuseColor.a *= texture2D(alphaMap, vUV * repeat).a;
    if (diffuseColor.a < alphaTest) discard;
    if (useDash == 1.) diffuseColor.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    diffuseColor.a *= step(vCounters, visibility);
    #include <clipping_planes_fragment>
    gl_FragColor = diffuseColor;     
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <${bL}>
  }
`,_g=class extends vt.ShaderMaterial{constructor(e){super({uniforms:{...vt.UniformsLib.fog,lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new vt.Color(16777215)},gradient:{value:[new vt.Color(16711680),new vt.Color(65280)]},opacity:{value:1},resolution:{value:new vt.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},useGradient:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new vt.Vector2(1,1)}},vertexShader:vL,fragmentShader:_L}),Dt(this,"lineWidth"),Dt(this,"map"),Dt(this,"useMap"),Dt(this,"alphaMap"),Dt(this,"useAlphaMap"),Dt(this,"color"),Dt(this,"gradient"),Dt(this,"resolution"),Dt(this,"sizeAttenuation"),Dt(this,"dashArray"),Dt(this,"dashOffset"),Dt(this,"dashRatio"),Dt(this,"useDash"),Dt(this,"useGradient"),Dt(this,"visibility"),Dt(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(r){this.uniforms.lineWidth.value=r}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(r){this.uniforms.map.value=r}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(r){this.uniforms.useMap.value=r}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(r){this.uniforms.alphaMap.value=r}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(r){this.uniforms.useAlphaMap.value=r}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(r){this.uniforms.color.value=r}},gradient:{enumerable:!0,get(){return this.uniforms.gradient.value},set(r){this.uniforms.gradient.value=r}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(r){this.uniforms.opacity.value=r}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(r){this.uniforms.resolution.value.copy(r)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(r){this.uniforms.sizeAttenuation.value=r}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(r){this.uniforms.dashArray.value=r,this.useDash=r!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(r){this.uniforms.dashOffset.value=r}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(r){this.uniforms.dashRatio.value=r}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(r){this.uniforms.useDash.value=r}},useGradient:{enumerable:!0,get(){return this.uniforms.useGradient.value},set(r){this.uniforms.useGradient.value=r}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(r){this.uniforms.visibility.value=r}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(r){this.uniforms.alphaTest.value=r}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(r){this.uniforms.repeat.value.copy(r)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.gradient=e.gradient,this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray=e.dashArray,this.dashOffset=e.dashOffset,this.dashRatio=e.dashRatio,this.useDash=e.useDash,this.useGradient=e.useGradient,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}};var $C={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},xL=(t,e=1)=>(t.set(t.subarray(e)),t.fill(-1/0,-e),t);function eR(t,e){let{length:r,local:n,decay:i,interval:o,stride:s}={...$C,...e},p=wr.useRef(),[l]=wr.useState(()=>new qC);wr.useLayoutEffect(()=>{t&&(p.current=Float32Array.from({length:r*10*3},(d,f)=>t.position.getComponent(f%3)))},[r,t]);let c=wr.useRef(new qC),u=wr.useRef(0);return ZC(()=>{if(t&&p.current){if(u.current===0){let d;n?d=t.position:(t.getWorldPosition(l),d=l);let f=1*i;for(let g=0;g<f;g++)d.distanceTo(c.current)<s||(xL(p.current,3),p.current.set(d.toArray(),p.current.length-3));c.current.copy(d)}u.current++,u.current=u.current%o}}),p}var ML=wr.forwardRef((t,e)=>{let{children:r}=t,{width:n,length:i,decay:o,local:s,stride:p,interval:l}={...$C,...t},{color:c="hotpink",attenuation:u,target:d}=t,f=JC(b=>b.size),g=JC(b=>b.scene),v=wr.useRef(null),[A,m]=wr.useState(null),h=eR(A,{length:i,decay:o,local:s,stride:p,interval:l});wr.useEffect(()=>{let b=d?.current||v.current.children.find(_=>_ instanceof RL);b&&m(b)},[h,d]);let y=wr.useMemo(()=>new bg,[]),E=wr.useMemo(()=>{var b;let _=new _g({lineWidth:.1*n,color:c,sizeAttenuation:1,resolution:new BL(f.width,f.height)}),C;if(r)if(Array.isArray(r))C=r.find(B=>{let R=B;return typeof R.type=="string"&&R.type==="meshLineMaterial"});else{let B=r;typeof B.type=="string"&&B.type==="meshLineMaterial"&&(C=B)}return typeof((b=C)==null?void 0:b.props)=="object"&&_.setValues(C.props),_},[n,c,f,r]);return wr.useEffect(()=>{E.uniforms.resolution.value.set(f.width,f.height)},[f]),ZC(()=>{h.current&&y.setPoints(h.current,u)}),wr.createElement("group",null,CL(wr.createElement("mesh",{ref:e,geometry:y,material:E}),g),wr.createElement("group",{ref:v},r))});import*as gn from"react";import{InstancedBufferAttribute as wL,Vector3 as tR,Color as TL,Object3D as SL}from"three";function rR(t,e=16,r,n,i){let[o,s]=gn.useState(()=>{let p=Array.from({length:e},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new wL(Float32Array.from(p),16)});return gn.useLayoutEffect(()=>{if(typeof t.current>"u")return;let p=new Pc(t.current);n&&p.setWeightAttribute(n),p.build();let l=new tR,c=new tR,u=new TL,d=new SL;t.current.updateMatrixWorld(!0);for(let f=0;f<e;f++)p.sample(l,c,u),typeof r=="function"?r({dummy:d,sampledMesh:t.current,position:l,normal:c,color:u},f):d.position.copy(l),d.updateMatrix(),i!=null&&i.current&&i.current.setMatrixAt(f,d.matrix),d.matrix.toArray(o.array,f*16);i!=null&&i.current&&(i.current.instanceMatrix.needsUpdate=!0),o.needsUpdate=!0,s(o.clone())},[t,i,n,e,r]),o}function IL({children:t,weight:e,transform:r,instances:n,mesh:i,count:o=16,...s}){let p=gn.useRef(null),l=gn.useRef(null),c=gn.useRef(null);return gn.useLayoutEffect(()=>{var u,d;l.current=(u=n?.current)!==null&&u!==void 0?u:p.current.children.find(f=>f.hasOwnProperty("instanceMatrix")),c.current=(d=i?.current)!==null&&d!==void 0?d:p.current.children.find(f=>f.type==="Mesh")},[t,i?.current,n?.current]),rR(c,o,r,e,l),gn.createElement("group",te({ref:p},s),t)}import*as Ga from"react";import{BufferAttribute as FL}from"three";var OL=({compute:t,name:e,...r})=>{let[n]=Ga.useState(()=>new FL(new Float32Array(0),1)),i=Ga.useRef(null);return Ga.useLayoutEffect(()=>{if(i.current){var o;let s=(o=i.current.parent)!==null&&o!==void 0?o:i.current.__r3f.parent,p=t(s);i.current.copy(p)}},[t]),Ga.createElement("primitive",te({ref:i,object:n,attach:`attributes-${e}`},r))};var cR=Mn(Cg());import*as lR from"three";import*as Li from"react";function pP(t,{keys:e=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:r,inject:n,castShadow:i,receiveShadow:o}){let s=(0,cR.default)(t,e);return r&&(s.geometry&&r!=="materialsOnly"&&(s.geometry=s.geometry.clone()),s.material&&r!=="geometriesOnly"&&(s.material=s.material.clone())),n&&(typeof n=="function"?s={...s,children:n(t)}:Li.isValidElement(n)?s={...s,children:n}:s={...s,...n}),t instanceof lR.Mesh&&(i&&(s.castShadow=!0),o&&(s.receiveShadow=!0)),s}var Od=Li.forwardRef(({isChild:t=!1,object:e,children:r,deep:n,castShadow:i,receiveShadow:o,inject:s,keys:p,...l},c)=>{var u;let d={keys:p,deep:n,inject:s,castShadow:i,receiveShadow:o};if(e=Li.useMemo(()=>{if(t===!1&&!Array.isArray(e)){let A=!1;if(e.traverse(m=>{m.isSkinnedMesh&&(A=!0)}),A)return J0.clone(e)}return e},[e,t]),Array.isArray(e))return Li.createElement("group",te({},l,{ref:c}),e.map(A=>Li.createElement(Od,te({key:A.uuid,object:A},d))),r);let{children:f,...g}=pP(e,d),v=e.type[0].toLowerCase()+e.type.slice(1);return Li.createElement(v,te({},g,l,{ref:c}),((u=e)==null?void 0:u.children).map(A=>A.type==="Bone"?Li.createElement("primitive",te({key:A.uuid,object:A},d)):Li.createElement(Od,te({key:A.uuid,object:A},d,{isChild:!0}))),r,f)});import*as dR from"three";import*as tr from"react";import{useFrame as ry}from"@react-three/fiber";var oy=tr.createContext(null),lP=tr.forwardRef(({resolution:t=28,maxPolyCount:e=1e4,enableUvs:r=!1,enableColors:n=!1,children:i,...o},s)=>{let p=tr.useRef(null),l=tr.useMemo(()=>new kc(t,null,r,n,e),[t,e,r,n]),c=tr.useMemo(()=>({getParent:()=>p}),[]);return ry(()=>{l.update(),l.reset()},-1),tr.createElement(tr.Fragment,null,tr.createElement("primitive",te({object:l,ref:tt([p,s])},o),tr.createElement(oy.Provider,{value:c},i)))}),cP=tr.forwardRef(({strength:t=.5,subtract:e=12,color:r,...n},i)=>{let{getParent:o}=tr.useContext(oy),s=tr.useMemo(()=>o(),[o]),p=tr.useRef(),l=new dR.Vector3;return ry(c=>{!s.current||!p.current||(p.current.getWorldPosition(l),s.current.addBall(.5+l.x*.5,.5+l.y*.5,.5+l.z*.5,t,e,r))}),tr.createElement("group",te({ref:tt([i,p])},n))}),dP=tr.forwardRef(({planeType:t="x",strength:e=.5,subtract:r=12,...n},i)=>{let{getParent:o}=tr.useContext(oy),s=tr.useMemo(()=>o(),[o]),p=tr.useRef(),l=tr.useMemo(()=>t==="x"?"addPlaneX":t==="y"?"addPlaneY":"addPlaneZ",[t]);return ry(()=>{!s.current||!p.current||s.current[l](e,r)}),tr.createElement("group",te({ref:tt([i,p])},n))});import*as Uo from"react";import*as hn from"three";import{applyProps as Rg}from"@react-three/fiber";function uP(t){return Array.isArray(t)}function iy(t=[0,0,0]){return uP(t)?t:t instanceof hn.Vector3||t instanceof hn.Euler?[t.x,t.y,t.z]:[t,t,t]}var fP=Uo.forwardRef(function({debug:e,depthTest:r=!1,polygonOffsetFactor:n=-10,map:i,mesh:o,children:s,position:p,rotation:l,scale:c,...u},d){let f=Uo.useRef(null);Uo.useImperativeHandle(d,()=>f.current);let g=Uo.useRef(null);return Uo.useLayoutEffect(()=>{let v=o?.current||f.current.parent,A=f.current;if(!(v instanceof hn.Mesh))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');let m={position:new hn.Vector3,rotation:new hn.Euler,scale:new hn.Vector3(1,1,1)};if(v){Rg(m,{position:p,scale:c});let h=v.matrixWorld.clone();if(v.matrixWorld.identity(),!l||typeof l=="number"){let y=new hn.Object3D;y.position.copy(m.position),y.lookAt(v.position),typeof l=="number"&&y.rotateZ(l),Rg(m,{rotation:y.rotation})}else Rg(m,{rotation:l});return A.geometry=new $c(v,m.position,m.rotation,m.scale),g.current&&(Rg(g.current,m),g.current.traverse(y=>y.raycast=()=>null)),v.matrixWorld=h,()=>{A.geometry.dispose()}}},[o,...iy(p),...iy(c),...iy(l)]),Uo.createElement("mesh",te({ref:f,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":n,"material-depthTest":r,"material-map":i},u),s,e&&Uo.createElement("mesh",{ref:g},Uo.createElement("boxGeometry",null),Uo.createElement("meshNormalMaterial",{wireframe:!0}),Uo.createElement("axesHelper",null)))});import{useLoader as gP}from"@react-three/fiber";import*as pa from"react";import{forwardRef as hP,useMemo as mP,useEffect as AP,Fragment as yP}from"react";import{DoubleSide as uR}from"three";var vP=hP(function({src:e,skipFill:r,skipStrokes:n,fillMaterial:i,strokeMaterial:o,fillMeshProps:s,strokeMeshProps:p,...l},c){let u=gP(Ed,e.startsWith("<svg")?`data:image/svg+xml;utf8,${e}`:e),d=mP(()=>n?[]:u.paths.map(f=>{var g;return((g=f.userData)==null?void 0:g.style.stroke)===void 0||f.userData.style.stroke==="none"?null:f.subPaths.map(v=>Ed.pointsToStroke(v.getPoints(),f.userData.style))}),[u,n]);return AP(()=>()=>d.forEach(f=>f&&f.map(g=>g.dispose())),[d]),pa.createElement("object3D",te({ref:c},l),pa.createElement("object3D",{scale:[1,-1,1]},u.paths.map((f,g)=>{var v,A;return pa.createElement(yP,{key:g},!r&&((v=f.userData)==null?void 0:v.style.fill)!==void 0&&f.userData.style.fill!=="none"&&Ed.createShapes(f).map((m,h)=>pa.createElement("mesh",te({key:h},s),pa.createElement("shapeGeometry",{args:[m]}),pa.createElement("meshBasicMaterial",te({color:f.userData.style.fill,opacity:f.userData.style.fillOpacity,transparent:!0,side:uR,depthWrite:!1},i)))),!n&&((A=f.userData)==null?void 0:A.style.stroke)!==void 0&&f.userData.style.stroke!=="none"&&f.subPaths.map((m,h)=>pa.createElement("mesh",te({key:h,geometry:d[g][h]},p),pa.createElement("meshBasicMaterial",te({color:f.userData.style.stroke,opacity:f.userData.style.strokeOpacity,transparent:!0,side:uR,depthWrite:!1},o)))))})))});import*as xg from"react";import{useLoader as ny}from"@react-three/fiber";var Bg=null,fR="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function gR(t,e,r){return n=>{r&&r(n),t&&(Bg||(Bg=new bd),Bg.setDecoderPath(typeof t=="string"?t:fR),n.setDRACOLoader(Bg)),e&&n.setMeshoptDecoder(typeof Cd=="function"?Cd():Cd)}}function Jp(t,e=!0,r=!0,n){return ny(Ts,t,gR(e,r,n))}Jp.preload=(t,e=!0,r=!0,n)=>ny.preload(Ts,t,gR(e,r,n));Jp.clear=t=>ny.clear(Ts,t);Jp.setDecoderPath=t=>{fR=t};var EP=xg.forwardRef(({src:t,...e},r)=>{let{scene:n}=Jp(t);return xg.createElement(Od,te({ref:r},e,{object:n}))});import*as mn from"react";import{useThree as bP,useFrame as _P}from"@react-three/fiber";function CP({renderIndex:t=1,bgColor:e="black",fgColor:r="white",characters:n=" .:-+*=%@#",invert:i=!0,color:o=!1,resolution:s=.15}){let{size:p,gl:l,scene:c,camera:u}=bP(),d=mn.useMemo(()=>{let f=new pd(l,n,{invert:i,color:o,resolution:s});return f.domElement.style.position="absolute",f.domElement.style.top="0px",f.domElement.style.left="0px",f.domElement.style.pointerEvents="none",f},[n,i,o,s]);return mn.useLayoutEffect(()=>{d.domElement.style.color=r,d.domElement.style.backgroundColor=e},[r,e]),mn.useEffect(()=>(l.domElement.style.opacity="0",l.domElement.parentNode.appendChild(d.domElement),()=>{l.domElement.style.opacity="1",l.domElement.parentNode.removeChild(d.domElement)}),[d]),mn.useEffect(()=>{d.setSize(p.width,p.height)},[d,p]),_P(f=>{d.render(c,u)},t),mn.createElement(mn.Fragment,null)}import*as jo from"react";import{useThree as ay,useFrame as RP}from"@react-three/fiber";import*as qp from"react";import*as An from"three";import{useThree as hR}from"@react-three/fiber";function zr(t,e,r){let n=hR(f=>f.size),i=hR(f=>f.viewport),o=typeof t=="number"?t:n.width*i.dpr,s=typeof e=="number"?e:n.height*i.dpr,p=(typeof t=="number"?r:t)||{},{samples:l=0,depth:c,...u}=p,d=qp.useMemo(()=>{let f=new An.WebGLRenderTarget(o,s,{minFilter:An.LinearFilter,magFilter:An.LinearFilter,type:An.HalfFloatType,...u});return c&&(f.depthTexture=new An.DepthTexture(o,s,An.FloatType)),f.samples=l,f},[]);return qp.useLayoutEffect(()=>{d.setSize(o,s),l&&(d.samples=l)},[l,d,o,s]),qp.useEffect(()=>()=>d.dispose(),[]),d}var BP=t=>typeof t=="function",sy=jo.forwardRef(({envMap:t,resolution:e=256,frames:r=1/0,children:n,makeDefault:i,...o},s)=>{let p=ay(({set:m})=>m),l=ay(({camera:m})=>m),c=ay(({size:m})=>m),u=jo.useRef(null),d=jo.useRef(null),f=zr(e);jo.useLayoutEffect(()=>{o.manual||u.current.updateProjectionMatrix()},[c,o]),jo.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),jo.useLayoutEffect(()=>{if(i){let m=l;return p(()=>({camera:u.current})),()=>p(()=>({camera:m}))}},[u,i,p]);let g=0,v=null,A=BP(n);return RP(m=>{A&&(r===1/0||g<r)&&(d.current.visible=!1,m.gl.setRenderTarget(f),v=m.scene.background,t&&(m.scene.background=t),m.gl.render(m.scene,u.current),m.scene.background=v,m.gl.setRenderTarget(null),d.current.visible=!0,g++)}),jo.createElement(jo.Fragment,null,jo.createElement("orthographicCamera",te({left:c.width/-2,right:c.width/2,top:c.height/2,bottom:c.height/-2,ref:tt([u,s])},o),!A&&n),jo.createElement("group",{ref:d},A&&n(f.texture)))});import*as Ho from"react";import{useThree as py,useFrame as xP}from"@react-three/fiber";var MP=t=>typeof t=="function",wP=Ho.forwardRef(({envMap:t,resolution:e=256,frames:r=1/0,makeDefault:n,children:i,...o},s)=>{let p=py(({set:m})=>m),l=py(({camera:m})=>m),c=py(({size:m})=>m),u=Ho.useRef(null),d=Ho.useRef(null),f=zr(e);Ho.useLayoutEffect(()=>{o.manual||(u.current.aspect=c.width/c.height)},[c,o]),Ho.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let g=0,v=null,A=MP(i);return xP(m=>{A&&(r===1/0||g<r)&&(d.current.visible=!1,m.gl.setRenderTarget(f),v=m.scene.background,t&&(m.scene.background=t),m.gl.render(m.scene,u.current),m.scene.background=v,m.gl.setRenderTarget(null),d.current.visible=!0,g++)}),Ho.useLayoutEffect(()=>{if(n){let m=l;return p(()=>({camera:u.current})),()=>p(()=>({camera:m}))}},[u,n,p]),Ho.createElement(Ho.Fragment,null,Ho.createElement("perspectiveCamera",te({ref:tt([u,s])},o),!A&&i),Ho.createElement("group",{ref:d},A&&i(f.texture)))});import*as Zp from"react";import{useFrame as FP}from"@react-three/fiber";import*as yR from"three";import{WebGLCubeRenderTarget as TP,HalfFloatType as SP}from"three";import*as vR from"react";import{useMemo as mR,useEffect as IP}from"react";import{useThree as AR}from"@react-three/fiber";function ly({resolution:t=256,near:e=.1,far:r=1e3,envMap:n,fog:i}={}){let o=AR(({gl:f})=>f),s=AR(({scene:f})=>f),p=mR(()=>{let f=new TP(t);return f.texture.type=SP,f},[t]);IP(()=>()=>{p.dispose()},[p]);let l=mR(()=>new yR.CubeCamera(e,r,p),[e,r,p]),c,u,d=vR.useCallback(()=>{c=s.fog,u=s.background,s.background=n||u,s.fog=i||c,l.update(o,s),s.fog=c,s.background=u},[o,s,l]);return{fbo:p,camera:l,update:d}}function OP({children:t,frames:e=1/0,resolution:r,near:n,far:i,envMap:o,fog:s,...p}){let l=Zp.useRef(null),{fbo:c,camera:u,update:d}=ly({resolution:r,near:n,far:i,envMap:o,fog:s}),f=0;return FP(()=>{l.current&&(e===1/0||f<e)&&(l.current.visible=!1,d(),l.current.visible=!0,f++)}),Zp.createElement("group",p,Zp.createElement("primitive",{object:u}),Zp.createElement("group",{ref:l},t(c.texture)))}import{useThree as Mg,useFrame as DP}from"@react-three/fiber";import*as zn from"react";var kP=zn.forwardRef((t,e)=>{let{camera:r,onChange:n,makeDefault:i,...o}=t,s=Mg(f=>f.camera),p=Mg(f=>f.invalidate),l=Mg(f=>f.get),c=Mg(f=>f.set),u=r||s,d=zn.useMemo(()=>new Uc(u),[u]);return zn.useEffect(()=>{let f=g=>{p(),n&&n(g)};return d==null||d.addEventListener==null||d.addEventListener("change",f),()=>d==null||d.removeEventListener==null?void 0:d.removeEventListener("change",f)},[n,d,p]),DP(()=>d?.update(),-1),zn.useEffect(()=>{let f=d;return f?.connect(),()=>f?.dispose()},[d]),zn.useEffect(()=>{if(i){let f=l().controls;return c({controls:d}),()=>c({controls:f})}},[i,d]),d?zn.createElement("primitive",te({ref:e,object:d},o)):null});import{useThree as $p,useFrame as LP}from"@react-three/fiber";import*as Nn from"react";var PP=Nn.forwardRef(({domElement:t,...e},r)=>{let{onChange:n,makeDefault:i,...o}=e,s=$p(v=>v.invalidate),p=$p(v=>v.camera),l=$p(v=>v.gl),c=$p(v=>v.events),u=$p(v=>v.get),d=$p(v=>v.set),f=t||c.connected||l.domElement,g=Nn.useMemo(()=>new Wc(p),[p]);return Nn.useEffect(()=>(g.connect(f),()=>void g.dispose()),[f,g,s]),Nn.useEffect(()=>{let v=A=>{s(),n&&n(A)};return g.addEventListener==null||g.addEventListener("change",v),()=>g.removeEventListener==null?void 0:g.removeEventListener("change",v)},[n,s]),Nn.useEffect(()=>{if(i){let v=u().controls;return d({controls:g}),()=>d({controls:v})}},[i,g]),LP((v,A)=>g.update(A)),Nn.createElement("primitive",te({ref:r,object:g,args:[p,f]},o))});import{useThree as el,useFrame as GP}from"@react-three/fiber";import*as la from"react";var zP=la.forwardRef((t={enableDamping:!0},e)=>{let{domElement:r,camera:n,makeDefault:i,onChange:o,onStart:s,onEnd:p,...l}=t,c=el(y=>y.invalidate),u=el(y=>y.camera),d=el(y=>y.gl),f=el(y=>y.events),g=el(y=>y.set),v=el(y=>y.get),A=r||f.connected||d.domElement,m=n||u,h=la.useMemo(()=>new Hc(m),[m]);return la.useEffect(()=>{h.connect(A);let y=E=>{c(),o&&o(E)};return h.addEventListener("change",y),s&&h.addEventListener("start",s),p&&h.addEventListener("end",p),()=>{h.dispose(),h.removeEventListener("change",y),s&&h.removeEventListener("start",s),p&&h.removeEventListener("end",p)}},[o,s,p,h,c,A]),la.useEffect(()=>{if(i){let y=v().controls;return g({controls:h}),()=>g({controls:y})}},[i,h]),GP(()=>h.update(),-1),la.createElement("primitive",te({ref:e,object:h,enableDamping:!0},l))});import{useThree as za,useFrame as NP}from"@react-three/fiber";import*as Un from"react";var UP=Un.forwardRef(({makeDefault:t,camera:e,regress:r,domElement:n,enableDamping:i=!0,keyEvents:o=!1,onChange:s,onStart:p,onEnd:l,...c},u)=>{let d=za(C=>C.invalidate),f=za(C=>C.camera),g=za(C=>C.gl),v=za(C=>C.events),A=za(C=>C.setEvents),m=za(C=>C.set),h=za(C=>C.get),y=za(C=>C.performance),E=e||f,b=n||v.connected||g.domElement,_=Un.useMemo(()=>new Ip(E),[E]);return NP(()=>{_.enabled&&_.update()},-1),Un.useEffect(()=>(o&&_.connect(o===!0?b:o),_.connect(b),()=>void _.dispose()),[o,b,r,_,d]),Un.useEffect(()=>{let C=M=>{d(),r&&y.regress(),s&&s(M)},B=M=>{p&&p(M)},R=M=>{l&&l(M)};return _.addEventListener("change",C),_.addEventListener("start",B),_.addEventListener("end",R),()=>{_.removeEventListener("start",B),_.removeEventListener("end",R),_.removeEventListener("change",C)}},[s,p,l,_,d,A]),Un.useEffect(()=>{if(t){let C=h().controls;return m({controls:_}),()=>m({controls:C})}},[t,_]),Un.createElement("primitive",te({ref:u,object:_,enableDamping:i},c))});import{useThree as jP,useFrame as HP}from"@react-three/fiber";import*as yn from"react";var QP=yn.forwardRef(({makeDefault:t,camera:e,domElement:r,regress:n,onChange:i,onStart:o,onEnd:s,...p},l)=>{let{invalidate:c,camera:u,gl:d,events:f,set:g,get:v,performance:A,viewport:m}=jP(),h=e||u,y=r||f.connected||d.domElement,E=yn.useMemo(()=>new jc(h),[h]);return HP(()=>{E.enabled&&E.update()},-1),yn.useEffect(()=>(E.connect(y),()=>void E.dispose()),[y,n,E,c]),yn.useEffect(()=>{let b=_=>{c(),n&&A.regress(),i&&i(_)};return E.addEventListener("change",b),o&&E.addEventListener("start",o),s&&E.addEventListener("end",s),()=>{o&&E.removeEventListener("start",o),s&&E.removeEventListener("end",s),E.removeEventListener("change",b)}},[i,o,s,E,c]),yn.useEffect(()=>{E.handleResize()},[m]),yn.useEffect(()=>{if(t){let b=v().controls;return g({controls:E}),()=>g({controls:b})}},[t,E]),yn.createElement("primitive",te({ref:l,object:E},p))});import{useThree as Us,useFrame as WP}from"@react-three/fiber";import*as ER from"react";import{forwardRef as VP,useMemo as YP,useEffect as cy}from"react";var KP=VP(({camera:t,makeDefault:e,regress:r,domElement:n,onChange:i,onStart:o,onEnd:s,...p},l)=>{let c=Us(E=>E.invalidate),u=Us(E=>E.camera),d=Us(E=>E.gl),f=Us(E=>E.events),g=Us(E=>E.set),v=Us(E=>E.get),A=Us(E=>E.performance),m=t||u,h=n||f.connected||d.domElement,y=YP(()=>new Qc(m),[m]);return WP(()=>{y.enabled&&y.update()},-1),cy(()=>(y.connect(h),()=>void y.dispose()),[h,r,y,c]),cy(()=>{let E=b=>{c(),r&&A.regress(),i&&i(b)};return y.addEventListener("change",E),o&&y.addEventListener("start",o),s&&y.addEventListener("end",s),()=>{y.removeEventListener("change",E),o&&y.removeEventListener("start",o),s&&y.removeEventListener("end",s)}},[i,o,s]),cy(()=>{if(e){let E=v().controls;return g({controls:y}),()=>g({controls:E})}},[e,y]),ER.createElement("primitive",te({ref:l,object:y},p))});var PR=Mn(vy()),GR=Mn(Cg());import{useThree as Hs}from"@react-three/fiber";import*as pr from"react";import*as Ey from"three";var uz=pr.forwardRef(({children:t,domElement:e,onChange:r,onMouseDown:n,onMouseUp:i,onObjectChange:o,object:s,makeDefault:p,...l},c)=>{let u=["enabled","axis","mode","translationSnap","rotationSnap","scaleSnap","space","size","showX","showY","showZ"],{camera:d,...f}=l,g=(0,GR.default)(f,u),v=(0,PR.default)(f,u),A=Hs(I=>I.controls),m=Hs(I=>I.gl),h=Hs(I=>I.events),y=Hs(I=>I.camera),E=Hs(I=>I.invalidate),b=Hs(I=>I.get),_=Hs(I=>I.set),C=d||y,B=e||h.connected||m.domElement,R=pr.useMemo(()=>new zc(C,B),[C,B]),M=pr.useRef();pr.useLayoutEffect(()=>(s?R.attach(s instanceof Ey.Object3D?s:s.current):M.current instanceof Ey.Object3D&&R.attach(M.current),()=>void R.detach()),[s,t,R]),pr.useEffect(()=>{if(A){let I=G=>A.enabled=!G.value;return R.addEventListener("dragging-changed",I),()=>R.removeEventListener("dragging-changed",I)}},[R,A]);let x=pr.useRef(),T=pr.useRef(),w=pr.useRef(),S=pr.useRef();return pr.useLayoutEffect(()=>void(x.current=r),[r]),pr.useLayoutEffect(()=>void(T.current=n),[n]),pr.useLayoutEffect(()=>void(w.current=i),[i]),pr.useLayoutEffect(()=>void(S.current=o),[o]),pr.useEffect(()=>{let I=Z=>{E(),x.current==null||x.current(Z)},G=Z=>T.current==null?void 0:T.current(Z),H=Z=>w.current==null?void 0:w.current(Z),X=Z=>S.current==null?void 0:S.current(Z);return R.addEventListener("change",I),R.addEventListener("mouseDown",G),R.addEventListener("mouseUp",H),R.addEventListener("objectChange",X),()=>{R.removeEventListener("change",I),R.removeEventListener("mouseDown",G),R.removeEventListener("mouseUp",H),R.removeEventListener("objectChange",X)}},[E,R]),pr.useEffect(()=>{if(p){let I=b().controls;return _({controls:R}),()=>_({controls:I})}},[p,R]),R?pr.createElement(pr.Fragment,null,pr.createElement("primitive",te({ref:c,object:R},g)),pr.createElement("group",te({ref:M},v),t)):null});import{useThree as Qs}from"@react-three/fiber";import*as jn from"react";var fz=jn.forwardRef(({domElement:t,selector:e,onChange:r,onLock:n,onUnlock:i,enabled:o=!0,makeDefault:s,...p},l)=>{let{camera:c,...u}=p,d=Qs(_=>_.setEvents),f=Qs(_=>_.gl),g=Qs(_=>_.camera),v=Qs(_=>_.invalidate),A=Qs(_=>_.events),m=Qs(_=>_.get),h=Qs(_=>_.set),y=c||g,E=t||A.connected||f.domElement,b=jn.useMemo(()=>new Nc(y),[y]);return jn.useEffect(()=>{if(o){b.connect(E);let _=m().events.compute;return d({compute(C,B){let R=B.size.width/2,M=B.size.height/2;B.pointer.set(R/B.size.width*2-1,-(M/B.size.height)*2+1),B.raycaster.setFromCamera(B.pointer,B.camera)}}),()=>{b.disconnect(),d({compute:_})}}},[o,b]),jn.useEffect(()=>{let _=R=>{v(),r&&r(R)};b.addEventListener("change",_),n&&b.addEventListener("lock",n),i&&b.addEventListener("unlock",i);let C=()=>b.lock(),B=e?Array.from(document.querySelectorAll(e)):[document];return B.forEach(R=>R&&R.addEventListener("click",C)),()=>{b.removeEventListener("change",_),n&&b.removeEventListener("lock",n),i&&b.removeEventListener("unlock",i),B.forEach(R=>R?R.removeEventListener("click",C):void 0)}},[r,n,i,e,b,v]),jn.useEffect(()=>{if(s){let _=m().controls;return h({controls:b}),()=>h({controls:_})}},[s,b]),jn.createElement("primitive",te({ref:l,object:b},u))});import*as Na from"react";import{useThree as kd,useFrame as gz}from"@react-three/fiber";var hz=Na.forwardRef(({domElement:t,makeDefault:e,...r},n)=>{let i=kd(d=>d.camera),o=kd(d=>d.gl),s=kd(d=>d.events),p=kd(d=>d.get),l=kd(d=>d.set),c=t||s.connected||o.domElement,[u]=Na.useState(()=>new Gc(i,c));return Na.useEffect(()=>{if(e){let d=p().controls;return l({controls:u}),()=>l({controls:d})}},[e,u]),gz((d,f)=>{u.update(f)},-1),u?Na.createElement("primitive",te({ref:n,object:u},r)):null});import{Box3 as yz,MathUtils as vz,Matrix4 as Ez,Quaternion as bz,Raycaster as _z,Sphere as Cz,Spherical as Rz,Vector2 as Bz,Vector3 as xz,Vector4 as Mz}from"three";import*as XR from"react";import{forwardRef as wz,useMemo as KR,useEffect as Ty}from"react";import{extend as Tz,useThree as ja,useFrame as Sz}from"@react-three/fiber";var vr={LEFT:1,RIGHT:2,MIDDLE:4},pe=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),il={NONE:0,IN:1,OUT:-1};function Ws(t){return t.isPerspectiveCamera}function Ua(t){return t.isOrthographicCamera}var nl=Math.PI*2,zR=Math.PI/2,YR=1e-5,Ld=Math.PI/180;function vn(t,e,r){return Math.max(e,Math.min(r,t))}function lr(t,e=YR){return Math.abs(t)<e}function zt(t,e,r=YR){return lr(t-e,r)}function NR(t,e){return Math.round(t/e)*e}function Pd(t){return isFinite(t)?t:t<0?-Number.MAX_VALUE:Number.MAX_VALUE}function Gd(t){return Math.abs(t)<Number.MAX_VALUE?t:t*(1/0)}function Fg(t,e,r,n,i=1/0,o){n=Math.max(1e-4,n);let s=2/n,p=s*o,l=1/(1+p+.48*p*p+.235*p*p*p),c=t-e,u=e,d=i*n;c=vn(c,-d,d),e=t-c;let f=(r.value+s*c)*o;r.value=(r.value-s*f)*l;let g=e+(c+f)*l;return u-t>0==g>u&&(g=u,r.value=(g-u)/o),g}function UR(t,e,r,n,i=1/0,o,s){n=Math.max(1e-4,n);let p=2/n,l=p*o,c=1/(1+l+.48*l*l+.235*l*l*l),u=e.x,d=e.y,f=e.z,g=t.x-u,v=t.y-d,A=t.z-f,m=u,h=d,y=f,E=i*n,b=E*E,_=g*g+v*v+A*A;if(_>b){let G=Math.sqrt(_);g=g/G*E,v=v/G*E,A=A/G*E}u=t.x-g,d=t.y-v,f=t.z-A;let C=(r.x+p*g)*o,B=(r.y+p*v)*o,R=(r.z+p*A)*o;r.x=(r.x-p*C)*c,r.y=(r.y-p*B)*c,r.z=(r.z-p*R)*c,s.x=u+(g+C)*c,s.y=d+(v+B)*c,s.z=f+(A+R)*c;let M=m-t.x,x=h-t.y,T=y-t.z,w=s.x-m,S=s.y-h,I=s.z-y;return M*w+x*S+T*I>0&&(s.x=m,s.y=h,s.z=y,r.x=(s.x-m)/o,r.y=(s.y-h)/o,r.z=(s.z-y)/o),s}function by(t,e){e.set(0,0),t.forEach(r=>{e.x+=r.clientX,e.y+=r.clientY}),e.x/=t.length,e.y/=t.length}function _y(t,e){return Ua(t)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}var wy=class{constructor(){this._listeners={}}addEventListener(e,r){let n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(r)===-1&&n[e].push(r)}hasEventListener(e,r){let n=this._listeners;return n[e]!==void 0&&n[e].indexOf(r)!==-1}removeEventListener(e,r){let i=this._listeners[e];if(i!==void 0){let o=i.indexOf(r);o!==-1&&i.splice(o,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){let n=this._listeners[e.type];if(n!==void 0){e.target=this;let i=n.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e)}}},Cy,mz="2.10.1",Og=1/8,Az=/Mac/.test((Cy=globalThis?.navigator)===null||Cy===void 0?void 0:Cy.platform),Ze,jR,Dg,Ry,ti,at,xt,al,zd,Hn,Qn,Vs,HR,QR,Pi,Nd,sl,WR,By,VR,xy,My,kg,pl=class t extends wy{static install(e){Ze=e.THREE,jR=Object.freeze(new Ze.Vector3(0,0,0)),Dg=Object.freeze(new Ze.Vector3(0,1,0)),Ry=Object.freeze(new Ze.Vector3(0,0,1)),ti=new Ze.Vector2,at=new Ze.Vector3,xt=new Ze.Vector3,al=new Ze.Vector3,zd=new Ze.Vector3,Hn=new Ze.Vector3,Qn=new Ze.Vector3,Vs=new Ze.Vector3,HR=new Ze.Vector3,QR=new Ze.Vector3,Pi=new Ze.Spherical,Nd=new Ze.Spherical,sl=new Ze.Box3,WR=new Ze.Box3,By=new Ze.Sphere,VR=new Ze.Quaternion,xy=new Ze.Quaternion,My=new Ze.Matrix4,kg=new Ze.Raycaster}static get ACTION(){return pe}set verticalDragToForward(e){console.warn("camera-controls: `verticalDragToForward` was removed. Use `mouseButtons.left = CameraControls.ACTION.SCREEN_PAN` instead.")}constructor(e,r){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=pe.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=il.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new Ze.Vector3,this._focalOffsetVelocity=new Ze.Vector3,this._zoomVelocity={value:0},this._truckInternal=(h,y,E,b)=>{let _,C;if(Ws(this._camera)){let B=at.copy(this._camera.position).sub(this._target),R=this._camera.getEffectiveFOV()*Ld,M=B.length()*Math.tan(R*.5);_=this.truckSpeed*h*M/this._elementRect.height,C=this.truckSpeed*y*M/this._elementRect.height}else if(Ua(this._camera)){let B=this._camera;_=this.truckSpeed*h*(B.right-B.left)/B.zoom/this._elementRect.width,C=this.truckSpeed*y*(B.top-B.bottom)/B.zoom/this._elementRect.height}else return;b?(E?this.setFocalOffset(this._focalOffsetEnd.x+_,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(_,0,!0),this.forward(-C,!0)):E?this.setFocalOffset(this._focalOffsetEnd.x+_,this._focalOffsetEnd.y+C,this._focalOffsetEnd.z,!0):this.truck(_,C,!0)},this._rotateInternal=(h,y)=>{let E=nl*this.azimuthRotateSpeed*h/this._elementRect.height,b=nl*this.polarRotateSpeed*y/this._elementRect.height;this.rotate(E,b,!0)},this._dollyInternal=(h,y,E)=>{let b=Math.pow(.95,-h*this.dollySpeed),_=this._sphericalEnd.radius,C=this._sphericalEnd.radius*b,B=vn(C,this.minDistance,this.maxDistance),R=B-C;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(C,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(R,!0),this._dollyToNoClamp(B,!0)):this._dollyToNoClamp(B,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?C:B)-_,this._dollyControlCoord.set(y,E)),this._lastDollyDirection=Math.sign(-h)},this._zoomInternal=(h,y,E)=>{let b=Math.pow(.95,h*this.dollySpeed),_=this._zoom,C=this._zoom*b;this.zoomTo(C,!0),this.dollyToCursor&&(this._changedZoom+=C-_,this._dollyControlCoord.set(y,E))},typeof Ze>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new Ze.Quaternion().setFromUnitVectors(this._camera.up,Dg),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=pe.NONE,this._target=new Ze.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new Ze.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new Ze.Spherical().setFromVector3(at.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new Ze.Vector3,new Ze.Vector3,new Ze.Vector3,new Ze.Vector3],this._updateNearPlaneCorners(),this._boundary=new Ze.Box3(new Ze.Vector3(-1/0,-1/0,-1/0),new Ze.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new Ze.Vector2,this.mouseButtons={left:pe.ROTATE,middle:pe.DOLLY,right:pe.TRUCK,wheel:Ws(this._camera)?pe.DOLLY:Ua(this._camera)?pe.ZOOM:pe.NONE},this.touches={one:pe.TOUCH_ROTATE,two:Ws(this._camera)?pe.TOUCH_DOLLY_TRUCK:Ua(this._camera)?pe.TOUCH_ZOOM_TRUCK:pe.NONE,three:pe.TOUCH_TRUCK};let n=new Ze.Vector2,i=new Ze.Vector2,o=new Ze.Vector2,s=h=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){let b=this._domElement.getBoundingClientRect(),_=h.clientX/b.width,C=h.clientY/b.height;if(_<this._interactiveArea.left||_>this._interactiveArea.right||C<this._interactiveArea.top||C>this._interactiveArea.bottom)return}let y=h.pointerType!=="mouse"?null:(h.buttons&vr.LEFT)===vr.LEFT?vr.LEFT:(h.buttons&vr.MIDDLE)===vr.MIDDLE?vr.MIDDLE:(h.buttons&vr.RIGHT)===vr.RIGHT?vr.RIGHT:null;if(y!==null){let b=this._findPointerByMouseButton(y);b&&this._disposePointer(b)}if((h.buttons&vr.LEFT)===vr.LEFT&&this._lockedPointer)return;let E={pointerId:h.pointerId,clientX:h.clientX,clientY:h.clientY,deltaX:0,deltaY:0,mouseButton:y};this._activePointers.push(E),this._domElement.ownerDocument.removeEventListener("pointermove",p,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.addEventListener("pointermove",p,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),this._isDragging=!0,f(h)},p=h=>{h.cancelable&&h.preventDefault();let y=h.pointerId,E=this._lockedPointer||this._findPointerById(y);if(E){if(E.clientX=h.clientX,E.clientY=h.clientY,E.deltaX=h.movementX,E.deltaY=h.movementY,this._state=0,h.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(h.buttons&vr.LEFT)===vr.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(h.buttons&vr.MIDDLE)===vr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(h.buttons&vr.RIGHT)===vr.RIGHT&&(this._state=this._state|this.mouseButtons.right);g()}},l=h=>{let y=this._findPointerById(h.pointerId);if(!(y&&y===this._lockedPointer)){if(y&&this._disposePointer(y),h.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=pe.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=pe.NONE;v()}},c=-1,u=h=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===pe.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){let C=this._domElement.getBoundingClientRect(),B=h.clientX/C.width,R=h.clientY/C.height;if(B<this._interactiveArea.left||B>this._interactiveArea.right||R<this._interactiveArea.top||R>this._interactiveArea.bottom)return}if(h.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===pe.ROTATE||this.mouseButtons.wheel===pe.TRUCK){let C=performance.now();c-C<1e3&&this._getClientRect(this._elementRect),c=C}let y=Az?-1:-3,E=h.deltaMode===1||h.ctrlKey?h.deltaY/y:h.deltaY/(y*10),b=this.dollyToCursor?(h.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,_=this.dollyToCursor?(h.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case pe.ROTATE:{this._rotateInternal(h.deltaX,h.deltaY),this._isUserControllingRotate=!0;break}case pe.TRUCK:{this._truckInternal(h.deltaX,h.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case pe.SCREEN_PAN:{this._truckInternal(h.deltaX,h.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case pe.OFFSET:{this._truckInternal(h.deltaX,h.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case pe.DOLLY:{this._dollyInternal(-E,b,_),this._isUserControllingDolly=!0;break}case pe.ZOOM:{this._zoomInternal(-E,b,_),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},d=h=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===t.ACTION.NONE){let y=h instanceof PointerEvent?h.pointerId:0,E=this._findPointerById(y);E&&this._disposePointer(E),this._domElement.ownerDocument.removeEventListener("pointermove",p,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l);return}h.preventDefault()}},f=h=>{if(!this._enabled)return;if(by(this._activePointers,ti),this._getClientRect(this._elementRect),n.copy(ti),i.copy(ti),this._activePointers.length>=2){let E=ti.x-this._activePointers[1].clientX,b=ti.y-this._activePointers[1].clientY,_=Math.sqrt(E*E+b*b);o.set(0,_);let C=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,B=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;i.set(C,B)}if(this._state=0,!h)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in h&&h.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(h.buttons&vr.LEFT)===vr.LEFT&&(this._state=this._state|this.mouseButtons.left),(h.buttons&vr.MIDDLE)===vr.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(h.buttons&vr.RIGHT)===vr.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&pe.ROTATE)===pe.ROTATE||(this._state&pe.TOUCH_ROTATE)===pe.TOUCH_ROTATE||(this._state&pe.TOUCH_DOLLY_ROTATE)===pe.TOUCH_DOLLY_ROTATE||(this._state&pe.TOUCH_ZOOM_ROTATE)===pe.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&pe.TRUCK)===pe.TRUCK||(this._state&pe.SCREEN_PAN)===pe.SCREEN_PAN||(this._state&pe.TOUCH_TRUCK)===pe.TOUCH_TRUCK||(this._state&pe.TOUCH_SCREEN_PAN)===pe.TOUCH_SCREEN_PAN||(this._state&pe.TOUCH_DOLLY_TRUCK)===pe.TOUCH_DOLLY_TRUCK||(this._state&pe.TOUCH_DOLLY_SCREEN_PAN)===pe.TOUCH_DOLLY_SCREEN_PAN||(this._state&pe.TOUCH_ZOOM_TRUCK)===pe.TOUCH_ZOOM_TRUCK||(this._state&pe.TOUCH_ZOOM_SCREEN_PAN)===pe.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&pe.DOLLY)===pe.DOLLY||(this._state&pe.TOUCH_DOLLY)===pe.TOUCH_DOLLY||(this._state&pe.TOUCH_DOLLY_TRUCK)===pe.TOUCH_DOLLY_TRUCK||(this._state&pe.TOUCH_DOLLY_SCREEN_PAN)===pe.TOUCH_DOLLY_SCREEN_PAN||(this._state&pe.TOUCH_DOLLY_OFFSET)===pe.TOUCH_DOLLY_OFFSET||(this._state&pe.TOUCH_DOLLY_ROTATE)===pe.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&pe.ZOOM)===pe.ZOOM||(this._state&pe.TOUCH_ZOOM)===pe.TOUCH_ZOOM||(this._state&pe.TOUCH_ZOOM_TRUCK)===pe.TOUCH_ZOOM_TRUCK||(this._state&pe.TOUCH_ZOOM_SCREEN_PAN)===pe.TOUCH_ZOOM_SCREEN_PAN||(this._state&pe.TOUCH_ZOOM_OFFSET)===pe.TOUCH_ZOOM_OFFSET||(this._state&pe.TOUCH_ZOOM_ROTATE)===pe.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&pe.OFFSET)===pe.OFFSET||(this._state&pe.TOUCH_OFFSET)===pe.TOUCH_OFFSET||(this._state&pe.TOUCH_DOLLY_OFFSET)===pe.TOUCH_DOLLY_OFFSET||(this._state&pe.TOUCH_ZOOM_OFFSET)===pe.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},g=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,by(this._activePointers,ti);let y=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,E=y?-y.deltaX:i.x-ti.x,b=y?-y.deltaY:i.y-ti.y;if(i.copy(ti),((this._state&pe.ROTATE)===pe.ROTATE||(this._state&pe.TOUCH_ROTATE)===pe.TOUCH_ROTATE||(this._state&pe.TOUCH_DOLLY_ROTATE)===pe.TOUCH_DOLLY_ROTATE||(this._state&pe.TOUCH_ZOOM_ROTATE)===pe.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(E,b),this._isUserControllingRotate=!0),(this._state&pe.DOLLY)===pe.DOLLY||(this._state&pe.ZOOM)===pe.ZOOM){let _=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,C=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,B=this.dollyDragInverted?-1:1;(this._state&pe.DOLLY)===pe.DOLLY?(this._dollyInternal(B*b*Og,_,C),this._isUserControllingDolly=!0):(this._zoomInternal(B*b*Og,_,C),this._isUserControllingZoom=!0)}if((this._state&pe.TOUCH_DOLLY)===pe.TOUCH_DOLLY||(this._state&pe.TOUCH_ZOOM)===pe.TOUCH_ZOOM||(this._state&pe.TOUCH_DOLLY_TRUCK)===pe.TOUCH_DOLLY_TRUCK||(this._state&pe.TOUCH_ZOOM_TRUCK)===pe.TOUCH_ZOOM_TRUCK||(this._state&pe.TOUCH_DOLLY_SCREEN_PAN)===pe.TOUCH_DOLLY_SCREEN_PAN||(this._state&pe.TOUCH_ZOOM_SCREEN_PAN)===pe.TOUCH_ZOOM_SCREEN_PAN||(this._state&pe.TOUCH_DOLLY_OFFSET)===pe.TOUCH_DOLLY_OFFSET||(this._state&pe.TOUCH_ZOOM_OFFSET)===pe.TOUCH_ZOOM_OFFSET||(this._state&pe.TOUCH_DOLLY_ROTATE)===pe.TOUCH_DOLLY_ROTATE||(this._state&pe.TOUCH_ZOOM_ROTATE)===pe.TOUCH_ZOOM_ROTATE){let _=ti.x-this._activePointers[1].clientX,C=ti.y-this._activePointers[1].clientY,B=Math.sqrt(_*_+C*C),R=o.y-B;o.set(0,B);let M=this.dollyToCursor?(i.x-this._elementRect.x)/this._elementRect.width*2-1:0,x=this.dollyToCursor?(i.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&pe.TOUCH_DOLLY)===pe.TOUCH_DOLLY||(this._state&pe.TOUCH_DOLLY_ROTATE)===pe.TOUCH_DOLLY_ROTATE||(this._state&pe.TOUCH_DOLLY_TRUCK)===pe.TOUCH_DOLLY_TRUCK||(this._state&pe.TOUCH_DOLLY_SCREEN_PAN)===pe.TOUCH_DOLLY_SCREEN_PAN||(this._state&pe.TOUCH_DOLLY_OFFSET)===pe.TOUCH_DOLLY_OFFSET?(this._dollyInternal(R*Og,M,x),this._isUserControllingDolly=!0):(this._zoomInternal(R*Og,M,x),this._isUserControllingZoom=!0)}((this._state&pe.TRUCK)===pe.TRUCK||(this._state&pe.TOUCH_TRUCK)===pe.TOUCH_TRUCK||(this._state&pe.TOUCH_DOLLY_TRUCK)===pe.TOUCH_DOLLY_TRUCK||(this._state&pe.TOUCH_ZOOM_TRUCK)===pe.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(E,b,!1,!1),this._isUserControllingTruck=!0),((this._state&pe.SCREEN_PAN)===pe.SCREEN_PAN||(this._state&pe.TOUCH_SCREEN_PAN)===pe.TOUCH_SCREEN_PAN||(this._state&pe.TOUCH_DOLLY_SCREEN_PAN)===pe.TOUCH_DOLLY_SCREEN_PAN||(this._state&pe.TOUCH_ZOOM_SCREEN_PAN)===pe.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(E,b,!1,!0),this._isUserControllingTruck=!0),((this._state&pe.OFFSET)===pe.OFFSET||(this._state&pe.TOUCH_OFFSET)===pe.TOUCH_OFFSET||(this._state&pe.TOUCH_DOLLY_OFFSET)===pe.TOUCH_DOLLY_OFFSET||(this._state&pe.TOUCH_ZOOM_OFFSET)===pe.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(E,b,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},v=()=>{by(this._activePointers,ti),i.copy(ti),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",p,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",p,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",A),this._domElement.ownerDocument.addEventListener("pointerlockerror",m),this._domElement.ownerDocument.addEventListener("pointermove",p,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",l),f())},this.unlockPointer=()=>{var h,y,E;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(h=this._domElement)===null||h===void 0||h.ownerDocument.exitPointerLock(),(y=this._domElement)===null||y===void 0||y.ownerDocument.removeEventListener("pointerlockchange",A),(E=this._domElement)===null||E===void 0||E.ownerDocument.removeEventListener("pointerlockerror",m),this.cancel()};let A=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},m=()=>{this.unlockPointer()};this._addAllEventListeners=h=>{this._domElement=h,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",s),this._domElement.addEventListener("pointercancel",l),this._domElement.addEventListener("wheel",u,{passive:!1}),this._domElement.addEventListener("contextmenu",d)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",s),this._domElement.removeEventListener("pointercancel",l),this._domElement.removeEventListener("wheel",u,{passive:!1}),this._domElement.removeEventListener("contextmenu",d),this._domElement.ownerDocument.removeEventListener("pointermove",p,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",l),this._domElement.ownerDocument.removeEventListener("pointerlockchange",A),this._domElement.ownerDocument.removeEventListener("pointerlockerror",m))},this.cancel=()=>{this._state!==pe.NONE&&(this._state=pe.NONE,this._activePointers.length=0,v())},r&&this.connect(r),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=vn(e.width,0,1),this._interactiveArea.height=vn(e.height,0,1),this._interactiveArea.x=vn(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=vn(e.y,0,1-this._interactiveArea.height)}addEventListener(e,r){super.addEventListener(e,r)}removeEventListener(e,r){super.removeEventListener(e,r)}rotate(e,r,n=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+r,n)}rotateAzimuthTo(e,r=!1){return this.rotateTo(e,this._sphericalEnd.phi,r)}rotatePolarTo(e,r=!1){return this.rotateTo(this._sphericalEnd.theta,e,r)}rotateTo(e,r,n=!1){this._isUserControllingRotate=!1;let i=vn(e,this.minAzimuthAngle,this.maxAzimuthAngle),o=vn(r,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=i,this._sphericalEnd.phi=o,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);let s=!n||zt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&zt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(s)}dolly(e,r=!1){return this.dollyTo(this._sphericalEnd.radius-e,r)}dollyTo(e,r=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=il.NONE,this._changedDolly=0,this._dollyToNoClamp(vn(e,this.minDistance,this.maxDistance),r)}_dollyToNoClamp(e,r=!1){let n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){let s=this._collisionTest(),p=zt(s,this._spherical.radius);if(!(n>e)&&p)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,s)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,r||(this._spherical.radius=this._sphericalEnd.radius);let o=!r||zt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(o)}dollyInFixed(e,r=!1){this._targetEnd.add(this._getCameraDirection(zd).multiplyScalar(e)),r||this._target.copy(this._targetEnd);let n=!r||zt(this._target.x,this._targetEnd.x,this.restThreshold)&&zt(this._target.y,this._targetEnd.y,this.restThreshold)&&zt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e,r=!1){return this.zoomTo(this._zoomEnd+e,r)}zoomTo(e,r=!1){this._isUserControllingZoom=!1,this._zoomEnd=vn(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,r||(this._zoom=this._zoomEnd);let n=!r||zt(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,r,n=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,r,n)}truck(e,r,n=!1){this._camera.updateMatrix(),Hn.setFromMatrixColumn(this._camera.matrix,0),Qn.setFromMatrixColumn(this._camera.matrix,1),Hn.multiplyScalar(e),Qn.multiplyScalar(-r);let i=at.copy(Hn).add(Qn),o=xt.copy(this._targetEnd).add(i);return this.moveTo(o.x,o.y,o.z,n)}forward(e,r=!1){at.setFromMatrixColumn(this._camera.matrix,0),at.crossVectors(this._camera.up,at),at.multiplyScalar(e);let n=xt.copy(this._targetEnd).add(at);return this.moveTo(n.x,n.y,n.z,r)}elevate(e,r=!1){return at.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+at.x,this._targetEnd.y+at.y,this._targetEnd.z+at.z,r)}moveTo(e,r,n,i=!1){this._isUserControllingTruck=!1;let o=at.set(e,r,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,o,this.boundaryFriction),this._needsUpdate=!0,i||this._target.copy(this._targetEnd);let s=!i||zt(this._target.x,this._targetEnd.x,this.restThreshold)&&zt(this._target.y,this._targetEnd.y,this.restThreshold)&&zt(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}lookInDirectionOf(e,r,n,i=!1){let p=at.set(e,r,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(p.x,p.y,p.z,i)}fitToBox(e,r,{cover:n=!1,paddingLeft:i=0,paddingRight:o=0,paddingBottom:s=0,paddingTop:p=0}={}){let l=[],c=e.isBox3?sl.copy(e):sl.setFromObject(e);c.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());let u=NR(this._sphericalEnd.theta,zR),d=NR(this._sphericalEnd.phi,zR);l.push(this.rotateTo(u,d,r));let f=at.setFromSpherical(this._sphericalEnd).normalize(),g=VR.setFromUnitVectors(f,Ry),v=zt(Math.abs(f.y),1);v&&g.multiply(xy.setFromAxisAngle(Dg,u)),g.multiply(this._yAxisUpSpaceInverse);let A=WR.makeEmpty();xt.copy(c.min).applyQuaternion(g),A.expandByPoint(xt),xt.copy(c.min).setX(c.max.x).applyQuaternion(g),A.expandByPoint(xt),xt.copy(c.min).setY(c.max.y).applyQuaternion(g),A.expandByPoint(xt),xt.copy(c.max).setZ(c.min.z).applyQuaternion(g),A.expandByPoint(xt),xt.copy(c.min).setZ(c.max.z).applyQuaternion(g),A.expandByPoint(xt),xt.copy(c.max).setY(c.min.y).applyQuaternion(g),A.expandByPoint(xt),xt.copy(c.max).setX(c.min.x).applyQuaternion(g),A.expandByPoint(xt),xt.copy(c.max).applyQuaternion(g),A.expandByPoint(xt),A.min.x-=i,A.min.y-=s,A.max.x+=o,A.max.y+=p,g.setFromUnitVectors(Ry,f),v&&g.premultiply(xy.invert()),g.premultiply(this._yAxisUpSpace);let m=A.getSize(at),h=A.getCenter(xt).applyQuaternion(g);if(Ws(this._camera)){let y=this.getDistanceToFitBox(m.x,m.y,m.z,n);l.push(this.moveTo(h.x,h.y,h.z,r)),l.push(this.dollyTo(y,r)),l.push(this.setFocalOffset(0,0,0,r))}else if(Ua(this._camera)){let y=this._camera,E=y.right-y.left,b=y.top-y.bottom,_=n?Math.max(E/m.x,b/m.y):Math.min(E/m.x,b/m.y);l.push(this.moveTo(h.x,h.y,h.z,r)),l.push(this.zoomTo(_,r)),l.push(this.setFocalOffset(0,0,0,r))}return Promise.all(l)}fitToSphere(e,r){let n=[],o="isObject3D"in e?t.createBoundingSphere(e,By):By.copy(e);if(n.push(this.moveTo(o.center.x,o.center.y,o.center.z,r)),Ws(this._camera)){let s=this.getDistanceToFitSphere(o.radius);n.push(this.dollyTo(s,r))}else if(Ua(this._camera)){let s=this._camera.right-this._camera.left,p=this._camera.top-this._camera.bottom,l=2*o.radius,c=Math.min(s/l,p/l);n.push(this.zoomTo(c,r))}return n.push(this.setFocalOffset(0,0,0,r)),Promise.all(n)}setLookAt(e,r,n,i,o,s,p=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=il.NONE,this._changedDolly=0;let l=xt.set(i,o,s),c=at.set(e,r,n);this._targetEnd.copy(l),this._sphericalEnd.setFromVector3(c.sub(l).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,p||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let u=!p||zt(this._target.x,this._targetEnd.x,this.restThreshold)&&zt(this._target.y,this._targetEnd.y,this.restThreshold)&&zt(this._target.z,this._targetEnd.z,this.restThreshold)&&zt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&zt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&zt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(u)}lerpLookAt(e,r,n,i,o,s,p,l,c,u,d,f,g,v=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=il.NONE,this._changedDolly=0;let A=at.set(i,o,s),m=xt.set(e,r,n);Pi.setFromVector3(m.sub(A).applyQuaternion(this._yAxisUpSpace));let h=al.set(u,d,f),y=xt.set(p,l,c);Nd.setFromVector3(y.sub(h).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(A.lerp(h,g));let E=Nd.theta-Pi.theta,b=Nd.phi-Pi.phi,_=Nd.radius-Pi.radius;this._sphericalEnd.set(Pi.radius+_*g,Pi.phi+b*g,Pi.theta+E*g),this.normalizeRotations(),this._needsUpdate=!0,v||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let C=!v||zt(this._target.x,this._targetEnd.x,this.restThreshold)&&zt(this._target.y,this._targetEnd.y,this.restThreshold)&&zt(this._target.z,this._targetEnd.z,this.restThreshold)&&zt(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&zt(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&zt(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(C)}setPosition(e,r,n,i=!1){return this.setLookAt(e,r,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,i)}setTarget(e,r,n,i=!1){let o=this.getPosition(at),s=this.setLookAt(o.x,o.y,o.z,e,r,n,i);return this._sphericalEnd.phi=vn(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),s}setFocalOffset(e,r,n,i=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,r,n),this._needsUpdate=!0,i||this._focalOffset.copy(this._focalOffsetEnd);let o=!i||zt(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&zt(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&zt(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}setOrbitPoint(e,r,n){this._camera.updateMatrixWorld(),Hn.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Qn.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Vs.setFromMatrixColumn(this._camera.matrixWorldInverse,2);let i=at.set(e,r,n),o=i.distanceTo(this._camera.position),s=i.sub(this._camera.position);Hn.multiplyScalar(s.x),Qn.multiplyScalar(s.y),Vs.multiplyScalar(s.z),at.copy(Hn).add(Qn).add(Vs),at.z=at.z+o,this.dollyTo(o,!1),this.setFocalOffset(-at.x,at.y,-at.z,!1),this.moveTo(e,r,n,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,r,n,i){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new Ze.Vector4,typeof e=="number"?this._viewport.set(e,r,n,i):this._viewport.copy(e)}getDistanceToFitBox(e,r,n,i=!1){if(_y(this._camera,"getDistanceToFitBox"))return this._spherical.radius;let o=e/r,s=this._camera.getEffectiveFOV()*Ld,p=this._camera.aspect;return((i?o>p:o<p)?r:e/p)*.5/Math.tan(s*.5)+n*.5}getDistanceToFitSphere(e){if(_y(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;let r=this._camera.getEffectiveFOV()*Ld,n=Math.atan(Math.tan(r*.5)*this._camera.aspect)*2,i=1<this._camera.aspect?r:n;return e/Math.sin(i*.5)}getTarget(e,r=!0){return(e&&e.isVector3?e:new Ze.Vector3).copy(r?this._targetEnd:this._target)}getPosition(e,r=!0){return(e&&e.isVector3?e:new Ze.Vector3).setFromSpherical(r?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(r?this._targetEnd:this._target)}getSpherical(e,r=!0){return(e||new Ze.Spherical).copy(r?this._sphericalEnd:this._spherical)}getFocalOffset(e,r=!0){return(e&&e.isVector3?e:new Ze.Vector3).copy(r?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%nl,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=nl),this._spherical.theta+=nl*Math.round((this._sphericalEnd.theta-this._spherical.theta)/nl)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(e=!1){if(!zt(this._camera.up.x,this._cameraUp0.x)||!zt(this._camera.up.y,this._cameraUp0.y)||!zt(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);let n=this.getPosition(at);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}let r=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(r)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Dg),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){let e=at.subVectors(this._target,this._camera.position).normalize(),r=xt.crossVectors(e,this._camera.up);this._camera.up.crossVectors(r,e).normalize(),this._camera.updateMatrixWorld();let n=this.getPosition(at);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){let r=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,i=this._sphericalEnd.radius-this._spherical.radius,o=HR.subVectors(this._targetEnd,this._target),s=QR.subVectors(this._focalOffsetEnd,this._focalOffset),p=this._zoomEnd-this._zoom;if(lr(r))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{let d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=Fg(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,d,1/0,e),this._needsUpdate=!0}if(lr(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{let d=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=Fg(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,d,1/0,e),this._needsUpdate=!0}if(lr(i))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{let d=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=Fg(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,d,this.maxSpeed,e),this._needsUpdate=!0}if(lr(o.x)&&lr(o.y)&&lr(o.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{let d=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;UR(this._target,this._targetEnd,this._targetVelocity,d,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(lr(s.x)&&lr(s.y)&&lr(s.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{let d=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;UR(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,d,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(lr(p))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{let d=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=Fg(this._zoom,this._zoomEnd,this._zoomVelocity,d,1/0,e)}if(this.dollyToCursor){if(Ws(this._camera)&&this._changedDolly!==0){let d=this._spherical.radius-this._lastDistance,f=this._camera,g=this._getCameraDirection(zd),v=at.copy(g).cross(f.up).normalize();v.lengthSq()===0&&(v.x=1);let A=xt.crossVectors(v,g),m=this._sphericalEnd.radius*Math.tan(f.getEffectiveFOV()*Ld*.5),y=(this._sphericalEnd.radius-d-this._sphericalEnd.radius)/this._sphericalEnd.radius,E=al.copy(this._targetEnd).add(v.multiplyScalar(this._dollyControlCoord.x*m*f.aspect)).add(A.multiplyScalar(this._dollyControlCoord.y*m)),b=at.copy(this._targetEnd).lerp(E,y),_=this._lastDollyDirection===il.IN&&this._spherical.radius<=this.minDistance,C=this._lastDollyDirection===il.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(_||C)){this._sphericalEnd.radius-=d,this._spherical.radius-=d;let R=xt.copy(g).multiplyScalar(-d);b.add(R)}this._boundary.clampPoint(b,b);let B=xt.subVectors(b,this._targetEnd);this._targetEnd.copy(b),this._target.add(B),this._changedDolly-=d,lr(this._changedDolly)&&(this._changedDolly=0)}else if(Ua(this._camera)&&this._changedZoom!==0){let d=this._zoom-this._lastZoom,f=this._camera,g=at.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(f.near+f.far)/(f.near-f.far)).unproject(f),v=xt.set(0,0,-1).applyQuaternion(f.quaternion),A=al.copy(g).add(v.multiplyScalar(-g.dot(f.up))),h=-(this._zoom-d-this._zoom)/this._zoom,y=this._getCameraDirection(zd),E=this._targetEnd.dot(y),b=at.copy(this._targetEnd).lerp(A,h),_=b.dot(y),C=y.multiplyScalar(_-E);b.sub(C),this._boundary.clampPoint(b,b);let B=xt.subVectors(b,this._targetEnd);this._targetEnd.copy(b),this._target.add(B),this._changedZoom-=d,lr(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;let l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!lr(this._focalOffset.x)||!lr(this._focalOffset.y)||!lr(this._focalOffset.z))&&(Hn.setFromMatrixColumn(this._camera.matrix,0),Qn.setFromMatrixColumn(this._camera.matrix,1),Vs.setFromMatrixColumn(this._camera.matrix,2),Hn.multiplyScalar(this._focalOffset.x),Qn.multiplyScalar(-this._focalOffset.y),Vs.multiplyScalar(this._focalOffset.z),at.copy(Hn).add(Qn).add(Vs),this._camera.position.add(at),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),at.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);let u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),lr(r,this.restThreshold)&&lr(n,this.restThreshold)&&lr(i,this.restThreshold)&&lr(o.x,this.restThreshold)&&lr(o.y,this.restThreshold)&&lr(o.z,this.restThreshold)&&lr(s.x,this.restThreshold)&&lr(s.y,this.restThreshold)&&lr(s.z,this.restThreshold)&&lr(p,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Pd(this.maxDistance),minZoom:this.minZoom,maxZoom:Pd(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Pd(this.maxPolarAngle),minAzimuthAngle:Pd(this.minAzimuthAngle),maxAzimuthAngle:Pd(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:at.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,r=!1){let n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=Gd(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=Gd(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=Gd(n.maxPolarAngle),this.minAzimuthAngle=Gd(n.minAzimuthAngle),this.maxAzimuthAngle=Gd(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],r),Pi.setFromVector3(at.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Pi.theta,Pi.phi,r),this.dollyTo(Pi.radius,r),this.zoomTo(n.zoom,r),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],r),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",mz),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(r=>r.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(r=>r.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,r,n){let i=r.lengthSq();if(i===0)return e;let o=xt.copy(r).add(e),p=this._boundary.clampPoint(o,al).sub(o),l=p.lengthSq();if(l===0)return e.add(r);if(l===i)return e;if(n===0)return e.add(r).add(p);{let c=1+n*l/r.dot(p);return e.add(xt.copy(r).multiplyScalar(c)).add(p.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(Ws(this._camera)){let e=this._camera,r=e.near,n=e.getEffectiveFOV()*Ld,i=Math.tan(n*.5)*r,o=i*e.aspect;this._nearPlaneCorners[0].set(-o,-i,0),this._nearPlaneCorners[1].set(o,-i,0),this._nearPlaneCorners[2].set(o,i,0),this._nearPlaneCorners[3].set(-o,i,0)}else if(Ua(this._camera)){let e=this._camera,r=1/e.zoom,n=e.left*r,i=e.right*r,o=e.top*r,s=e.bottom*r;this._nearPlaneCorners[0].set(n,o,0),this._nearPlaneCorners[1].set(i,o,0),this._nearPlaneCorners[2].set(i,s,0),this._nearPlaneCorners[3].set(n,s,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||_y(this._camera,"_collisionTest"))return e;let n=this._getTargetDirection(zd);My.lookAt(jR,n,this._camera.up);for(let i=0;i<4;i++){let o=xt.copy(this._nearPlaneCorners[i]);o.applyMatrix4(My);let s=al.addVectors(this._target,o);kg.set(s,n),kg.far=this._spherical.radius+1;let p=kg.intersectObjects(this.colliderMeshes);p.length!==0&&p[0].distance<e&&(e=p[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;let r=this._domElement.getBoundingClientRect();return e.x=r.left,e.y=r.top,this._viewport?(e.x+=this._viewport.x,e.y+=r.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=r.width,e.height=r.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(r=>{let n=()=>{this.removeEventListener("rest",n),r()};this.addEventListener("rest",n)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,r=new Ze.Sphere){let n=r,i=n.center;sl.makeEmpty(),e.traverseVisible(s=>{s.isMesh&&sl.expandByObject(s)}),sl.getCenter(i);let o=0;return e.traverseVisible(s=>{if(!s.isMesh)return;let p=s;if(!p.geometry)return;let l=p.geometry.clone();l.applyMatrix4(p.matrixWorld);let u=l.attributes.position;for(let d=0,f=u.count;d<f;d++)at.fromBufferAttribute(u,d),o=Math.max(o,i.distanceToSquared(at))}),n.radius=Math.sqrt(o),n}};var Iz=wz((t,e)=>{KR(()=>{let _={Box3:yz,MathUtils:{clamp:vz.clamp},Matrix4:Ez,Quaternion:bz,Raycaster:_z,Sphere:Cz,Spherical:Rz,Vector2:Bz,Vector3:xz,Vector4:Mz};pl.install({THREE:_}),Tz({CameraControlsImpl:pl})},[]);let{camera:r,domElement:n,makeDefault:i,onStart:o,onEnd:s,onChange:p,regress:l,...c}=t,u=ja(_=>_.camera),d=ja(_=>_.gl),f=ja(_=>_.invalidate),g=ja(_=>_.events),v=ja(_=>_.setEvents),A=ja(_=>_.set),m=ja(_=>_.get),h=ja(_=>_.performance),y=r||u,E=n||g.connected||d.domElement,b=KR(()=>new pl(y),[y]);return Sz((_,C)=>{b.enabled&&b.update(C)},-1),Ty(()=>(b.connect(E),()=>void b.disconnect()),[E,b]),Ty(()=>{let _=R=>{f(),l&&h.regress(),p&&p(R)},C=R=>{o&&o(R)},B=R=>{s&&s(R)};return b.addEventListener("update",_),b.addEventListener("controlstart",C),b.addEventListener("controlend",B),b.addEventListener("control",_),b.addEventListener("transitionstart",_),b.addEventListener("wake",_),()=>{b.removeEventListener("update",_),b.removeEventListener("controlstart",C),b.removeEventListener("controlend",B),b.removeEventListener("control",_),b.removeEventListener("transitionstart",_),b.removeEventListener("wake",_)}},[b,o,s,f,v,l,p]),Ty(()=>{if(i){let _=m().controls;return A({controls:b}),()=>A({controls:_})}},[i,b]),XR.createElement("primitive",te({ref:e,object:b},c))});import*as co from"three";import*as En from"react";import{forwardRef as l2,useRef as p2,useState as Xs,useCallback as oh,useMemo as c2,useImperativeHandle as d2,useEffect as ih,Suspense as T6,useContext as nU,createContext as aU}from"react";import{useThree as rh,useFrame as sU}from"@react-three/fiber";import*as JR from"three";import{useEffect as Fz}from"react";import{useThree as Oz}from"@react-three/fiber";function Sy(t,e){let{unsuspend:r,start:n,crossOrigin:i,muted:o,loop:s,...p}={unsuspend:"loadedmetadata",crossOrigin:"Anonymous",muted:!0,loop:!0,start:!0,playsInline:!0,...e},l=Oz(u=>u.gl),c=Oo(()=>new Promise((u,d)=>{let f=Object.assign(document.createElement("video"),{src:typeof t=="string"&&t||void 0,srcObject:t instanceof MediaStream&&t||void 0,crossOrigin:i,loop:s,muted:o,...p}),g=new JR.VideoTexture(f);"colorSpace"in g?g.colorSpace=l.outputColorSpace:g.encoding=l.outputEncoding,f.addEventListener(r,()=>u(g))}),[t]);return Fz(()=>void(n&&c.image.play()),[c,n]),c}import*as ke from"react";import*as Er from"three";import{useThree as Dz}from"@react-three/fiber";var kz=new Er.Vector3(0,0,-1),Lz=(function(){let t=new Er.Vector3,e=new Er.Vector3,r=new Er.Vector3,n=new Er.Vector3,i=new Er.Vector3;return function(o,s,p,l){return t.copy(o),e.copy(s),r.copy(p),n.copy(e).sub(t),i.copy(r).sub(t),l.crossVectors(i,n).normalize()}})();function Pz(t,e){return t.clone().add(e).multiplyScalar(.5)}var Fy=ke.forwardRef(({points:t=Lg.SAMPLE_FACELANDMARKER_RESULT.faceLandmarks[0],face:e,facialTransformationMatrix:r,faceBlendshapes:n,offset:i,offsetScalar:o=80,width:s,height:p,depth:l=1,verticalTri:c=[159,386,152],origin:u,eyes:d=!0,eyesAsOrigin:f=!1,debug:g=!1,children:v,...A},m)=>{var h;e&&(t=e.keypoints,console.warn("Facemesh `face` prop is deprecated: use `points` instead"));let y=ke.useRef(null),E=ke.useRef(null),b=ke.useRef(null),_=ke.useRef(null),C=ke.useRef(null),B=ke.useRef(null),R=ke.useRef(null),[M]=ke.useState(()=>new Er.Vector3),[x]=ke.useState(()=>new Er.Object3D),[T]=ke.useState(()=>new Er.Quaternion),[w]=ke.useState(()=>new Er.Vector3),{invalidate:S}=Dz();ke.useEffect(()=>{var z;(z=C.current)==null||z.geometry.setIndex(Lg.TRIANGULATION)},[]);let[I]=ke.useState(()=>new Er.Vector3);ke.useEffect(()=>{var z,Y;let L=(z=C.current)==null?void 0:z.geometry;if(!L)return;if(L.setFromPoints(t),L.setDrawRange(0,Lg.TRIANGULATION.length),r)if(x.matrix.fromArray(r.data),x.matrix.decompose(x.position,x.quaternion,x.scale),x.rotation.y*=-1,x.rotation.z*=-1,T.setFromEuler(x.rotation),i){var Q;x.position.y*=-1,x.position.z*=-1,(Q=y.current)==null||Q.position.copy(x.position.divideScalar(o))}else{var V;(V=y.current)==null||V.position.set(0,0,0)}else Lz(t[c[0]],t[c[1]],t[c[2]],M),T.setFromUnitVectors(kz,M);let N=T.clone().invert();if(L.computeBoundingBox(),g&&S(),L.center(),L.applyQuaternion(N),(Y=_.current)==null||Y.setRotationFromQuaternion(T),d){if(!n)console.warn("Facemesh `eyes` option only works if `faceBlendshapes` is provided: skipping.");else if(B.current&&R.current&&b.current)if(f){let P=B.current._computeSphere(L),k=R.current._computeSphere(L);u=Pz(P.center,k.center).negate(),B.current._update(L,n,P),R.current._update(L,n,k)}else B.current._update(L,n),R.current._update(L,n)}if(b.current){if(u!==void 0)if(typeof u=="number"){let P=L.getAttribute("position");w.set(-P.getX(u),-P.getY(u),-P.getZ(u))}else u.isVector3&&w.copy(u);else w.setScalar(0);b.current.position.copy(w)}if(E.current){let P=1;(s||p||l)&&(L.boundingBox.getSize(I),s&&(P=s/I.x),p&&(P=p/I.y),l&&(P=l/I.z)),E.current.scale.setScalar(P!==1?P:1)}L.computeVertexNormals(),L.attributes.position.needsUpdate=!0},[t,r,n,x,i,o,s,p,l,c,u,d,g,S,M,T,I,w]);let G=ke.useMemo(()=>({outerRef:_,meshRef:C,eyeRightRef:B,eyeLeftRef:R}),[]);ke.useImperativeHandle(m,()=>G,[G]);let[H]=ke.useState(()=>new Er.Vector3),X=(h=C.current)==null?void 0:h.geometry.boundingBox,Z=X?.getSize(H).z||1;return ke.createElement("group",A,ke.createElement("group",{ref:y},ke.createElement("group",{ref:_},ke.createElement("group",{ref:E},g?ke.createElement(ke.Fragment,null,ke.createElement("axesHelper",{args:[Z]}),ke.createElement(vo,{points:[[0,0,0],[0,0,-Z]],color:65535})):null,ke.createElement("group",{ref:b},d&&n&&ke.createElement("group",{name:"eyes"},ke.createElement(Iy,{side:"left",ref:B,debug:g}),ke.createElement(Iy,{side:"right",ref:R,debug:g})),ke.createElement("mesh",{ref:C,name:"face"},v,g?ke.createElement(ke.Fragment,null,X&&ke.createElement("box3Helper",{args:[X]})):null))))))}),ll={contourLandmarks:{right:[33,133,159,145,153],left:[263,362,386,374,380]},blendshapes:{right:[14,16,18,12],left:[13,15,17,11]},color:{right:"red",left:"#00ff00"},fov:{horizontal:100,vertical:90}},Iy=ke.forwardRef(({side:t,debug:e=!0},r)=>{let n=ke.useRef(null),i=ke.useRef(null),[o]=ke.useState(()=>new Er.Sphere),s=ke.useCallback(d=>{let f=d.getAttribute("position"),v=ll.contourLandmarks[t].map(A=>new Er.Vector3(f.getX(A),f.getY(A),f.getZ(A)));return o.center.set(0,0,0),v.forEach(A=>o.center.add(A)),o.center.divideScalar(v.length),o.radius=v[0].sub(v[1]).length()/2,o},[o,t]),[p]=ke.useState(()=>new Er.Euler),l=ke.useCallback((d,f,g)=>{if(n.current){var v;(v=g)!==null&&v!==void 0||(g=s(d)),n.current.position.copy(g.center),n.current.scale.setScalar(g.radius)}if(f&&i.current){let A=ll.blendshapes[t],m=f.categories[A[0]].score,h=f.categories[A[1]].score,y=f.categories[A[2]].score,E=f.categories[A[3]].score,b=ll.fov.horizontal*Er.MathUtils.DEG2RAD,_=ll.fov.vertical*Er.MathUtils.DEG2RAD,C=b*.5*(E-y),B=_*.5*(m-h)*(t==="left"?1:-1);p.set(C,B,0),i.current.setRotationFromEuler(p)}},[s,t,p]),c=ke.useMemo(()=>({eyeMeshRef:n,irisDirRef:i,_computeSphere:s,_update:l}),[s,l]);ke.useImperativeHandle(r,()=>c,[c]);let u=ll.color[t];return ke.createElement("group",null,ke.createElement("group",{ref:n},e&&ke.createElement("axesHelper",null),ke.createElement("group",{ref:i},ke.createElement(ke.Fragment,null,e&&ke.createElement(vo,{points:[[0,0,0],[0,0,-2]],lineWidth:1,color:u})))))}),Lg={TRIANGULATION:[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],SAMPLE_FACE:{keypoints:[{x:356.2804412841797,y:295.1960563659668,z:-23.786449432373047,name:"lips"},{x:354.8859405517578,y:264.69520568847656,z:-36.718435287475586},{x:355.2180862426758,y:275.3360366821289,z:-21.183712482452393},{x:347.349853515625,y:242.4400234222412,z:-25.093655586242676},{x:354.40135955810547,y:256.67933464050293,z:-38.23572635650635},{x:353.7689971923828,y:247.54886627197266,z:-34.5475435256958},{x:352.1288299560547,y:227.34312057495117,z:-13.095386028289795},{x:303.5013198852539,y:234.67002868652344,z:12.500141859054565,name:"rightEye"},{x:351.09378814697266,y:211.87547206878662,z:-6.413471698760986},{x:350.7115936279297,y:202.1251630783081,z:-6.413471698760986},{x:348.33667755126953,y:168.7741756439209,z:6.483500003814697,name:"faceOval"},{x:356.4806365966797,y:299.2995357513428,z:-23.144519329071045},{x:356.5511703491211,y:302.66146659851074,z:-21.020312309265137},{x:356.6239547729492,y:304.1536331176758,z:-18.137459754943848,name:"lips"},{x:356.5807342529297,y:305.1840591430664,z:-18.767719268798828,name:"lips"},{x:356.8241500854492,y:308.25711250305176,z:-20.16829490661621},{x:357.113037109375,y:312.26277351379395,z:-22.10575819015503},{x:357.34962463378906,y:317.1123218536377,z:-21.837315559387207,name:"lips"},{x:357.6658630371094,y:325.51036834716797,z:-16.27002477645874},{x:355.0201416015625,y:269.36279296875,z:-33.73054027557373},{x:348.5237503051758,y:270.33411026000977,z:-24.93025302886963},{x:279.97331619262695,y:213.24176788330078,z:47.759642601013184,name:"faceOval"},{x:322.66529083251953,y:238.5027265548706,z:5.535193085670471},{x:316.0983657836914,y:239.94489669799805,z:5.777376294136047},{x:309.9431610107422,y:240.24518966674805,z:7.510589361190796},{x:301.31994247436523,y:237.86138534545898,z:13.118728399276733},{x:328.14266204833984,y:235.80496788024902,z:6.646900177001953},{x:313.7326431274414,y:222.11161136627197,z:3.9887237548828125},{x:320.45196533203125,y:221.87729358673096,z:4.601476192474365},{x:307.35679626464844,y:223.63793849945068,z:5.932023525238037},{x:303.0031204223633,y:226.3743782043457,z:8.479321002960205},{x:296.80023193359375,y:242.94299125671387,z:15.931552648544312},{x:332.2352981567383,y:340.77341079711914,z:-10.165848731994629},{x:301.38587951660156,y:233.46447944641113,z:14.764405488967896,name:"rightEye"},{x:279.0147018432617,y:244.37155723571777,z:45.77549457550049},{x:289.60548400878906,y:239.1807460784912,z:23.191204071044922},{x:320.32257080078125,y:267.1292781829834,z:-4.954537749290466},{x:347.64583587646484,y:294.4955062866211,z:-23.062820434570312,name:"lips"},{x:349.28138732910156,y:303.1095886230469,z:-20.238323211669922},{x:338.9453125,y:298.19186210632324,z:-19.456336498260498,name:"lips"},{x:333.36788177490234,y:302.6706790924072,z:-14.776077270507812,name:"lips"},{x:342.89188385009766,y:304.3561363220215,z:-17.752301692962646},{x:337.7375030517578,y:306.0098361968994,z:-13.410515785217285},{x:325.6159210205078,y:316.22995376586914,z:-6.681914925575256},{x:349.0104675292969,y:264.9818515777588,z:-36.274919509887695},{x:347.7138900756836,y:257.5664806365967,z:-37.67549514770508},{x:291.79357528686523,y:218.88171672821045,z:11.578094959259033,name:"rightEyebrow"},{x:332.2689437866211,y:247.56946563720703,z:-3.3730539679527283},{x:332.0074462890625,y:267.1201229095459,z:-19.969879388809204},{x:331.27952575683594,y:263.6967658996582,z:-17.47218608856201},{x:301.04373931884766,y:269.56552505493164,z:3.61815482378006},{x:347.4863815307617,y:249.0706443786621,z:-32.633421421051025},{x:307.26118087768555,y:208.2646894454956,z:1.1591226607561111,name:"rightEyebrow"},{x:297.91919708251953,y:212.22604751586914,z:5.914516448974609,name:"rightEyebrow"},{x:285.1651382446289,y:197.98450469970703,z:36.391637325286865,name:"faceOval"},{x:337.04097747802734,y:211.25229835510254,z:-4.548954665660858},{x:326.5912628173828,y:223.16698551177979,z:6.670243740081787},{x:320.05664825439453,y:309.5834255218506,z:-4.055835008621216},{x:289.6866226196289,y:314.617395401001,z:53.875489234924316,name:"faceOval"},{x:337.4256896972656,y:270.8755302429199,z:-17.67060160636902},{x:343.69922637939453,y:273.0000400543213,z:-18.756048679351807},{x:327.4242401123047,y:309.22399520874023,z:-4.703601002693176,name:"lips"},{x:330.37220001220703,y:308.3323001861572,z:-6.442649960517883},{x:293.87027740478516,y:207.7961826324463,z:9.821539521217346,name:"rightEyebrow"},{x:332.11437225341797,y:271.22812271118164,z:-16.64351224899292},{x:320.1197814941406,y:207.40366458892822,z:-2.48164564371109,name:"rightEyebrow"},{x:318.59575271606445,y:201.07443809509277,z:-3.110446035861969,name:"rightEyebrow"},{x:310.72303771972656,y:175.75075149536133,z:13.328815698623657,name:"faceOval"},{x:289.67578887939453,y:202.29835510253906,z:21.370456218719482},{x:315.30879974365234,y:187.35260009765625,z:5.0304025411605835},{x:287.8936767578125,y:216.54793739318848,z:17.81065821647644,name:"rightEyebrow"},{x:283.9391899108887,y:215.01142501831055,z:32.04984903335571},{x:348.35330963134766,y:299.4155788421631,z:-22.47924566268921},{x:341.1790466308594,y:301.8221855163574,z:-18.977805376052856},{x:335.69713592529297,y:304.4266891479492,z:-14.682706594467163},{x:339.4615173339844,y:272.3654365539551,z:-16.38674020767212},{x:328.99600982666016,y:308.86685371398926,z:-5.616893768310547},{x:332.00313568115234,y:309.1875743865967,z:-10.335084199905396},{x:331.0068130493164,y:307.9274368286133,z:-6.681914925575256,name:"lips"},{x:341.13792419433594,y:266.4876937866211,z:-26.56425952911377},{x:339.02950286865234,y:305.6663703918457,z:-12.33674168586731,name:"lips"},{x:344.22935485839844,y:304.9452781677246,z:-15.161235332489014,name:"lips"},{x:350.1844024658203,y:304.374303817749,z:-17.5305438041687,name:"lips"},{x:348.52630615234375,y:325.9562301635742,z:-16.164982318878174},{x:348.6581802368164,y:317.1624183654785,z:-21.510512828826904,name:"lips"},{x:348.9766311645508,y:312.1923065185547,z:-21.708929538726807},{x:349.2427444458008,y:308.0660820007324,z:-19.643079042434692},{x:349.67491149902344,y:305.42747497558594,z:-18.16080331802368,name:"lips"},{x:337.95589447021484,y:306.6535949707031,z:-12.803598642349243,name:"lips"},{x:337.06878662109375,y:307.63169288635254,z:-14.274203777313232},{x:335.77449798583984,y:309.8449516296387,z:-15.698124170303345},{x:334.6099090576172,y:312.7997016906738,z:-14.764405488967896,name:"lips"},{x:327.2330856323242,y:293.80866050720215,z:-11.864047050476074},{x:280.97679138183594,y:279.79928970336914,z:68.90834331512451,name:"faceOval"},{x:355.13843536376953,y:271.7875671386719,z:-25.350427627563477},{x:334.7235870361328,y:307.4656391143799,z:-9.302158951759338,name:"lips"},{x:333.5293960571289,y:307.89782524108887,z:-10.200862884521484},{x:346.29688262939453,y:276.4256286621094,z:-19.748122692108154},{x:335.16246795654297,y:276.22097969055176,z:-12.313398122787476},{x:345.09132385253906,y:274.7082996368408,z:-19.304605722427368},{x:325.4267883300781,y:252.95130729675293,z:-1.6661019623279572},{x:315.347843170166,y:259.05200958251953,z:-.25604281574487686},{x:330.44933319091797,y:267.7570152282715,z:-14.017432928085327},{x:294.96768951416016,y:185.26001930236816,z:23.903164863586426,name:"faceOval"},{x:299.63531494140625,y:192.7913761138916,z:12.640198469161987},{x:304.5452117919922,y:202.4142837524414,z:3.244667649269104,name:"rightEyebrow"},{x:331.6915512084961,y:320.0467872619629,z:-10.632705688476562},{x:334.5911407470703,y:201.27566814422607,z:-6.133356094360352,name:"rightEyebrow"},{x:331.4815902709961,y:185.44180870056152,z:.6627205014228821},{x:328.05816650390625,y:170.8385467529297,z:7.358860373497009,name:"faceOval"},{x:304.49764251708984,y:239.76297855377197,z:10.387605428695679},{x:290.6382179260254,y:248.85257720947266,z:19.03616428375244},{x:331.5682601928711,y:233.20727348327637,z:7.837390303611755},{x:295.5115509033203,y:228.9834451675415,z:14.41426157951355},{x:336.94332122802734,y:241.8259334564209,z:-5.27842104434967},{x:336.2792205810547,y:262.7049922943115,z:-26.12074375152588},{x:284.4102478027344,y:255.3262710571289,z:25.467140674591064},{x:295.1420593261719,y:253.02655220031738,z:12.430112361907959},{x:303.5196113586426,y:254.20703887939453,z:6.139191389083862},{x:315.73450088500977,y:251.64799690246582,z:3.3788898587226868},{x:324.69661712646484,y:247.56494522094727,z:2.3328344523906708},{x:331.57970428466797,y:243.02241325378418,z:1.1423448473215103},{x:345.6210708618164,y:229.9976634979248,z:-10.825285911560059},{x:286.26644134521484,y:270.37991523742676,z:21.708929538726807},{x:290.2525520324707,y:228.4921360015869,z:17.71728754043579},{x:351.65367126464844,y:269.3400764465332,z:-33.450424671173096},{x:333.1378936767578,y:253.88388633728027,z:-7.230473756790161},{x:277.8318977355957,y:246.95331573486328,z:68.20805549621582,name:"faceOval"},{x:336.6680908203125,y:238.10003757476807,z:.7688578963279724},{x:329.95800018310547,y:269.18323516845703,z:-7.207130789756775},{x:299.17491912841797,y:234.13324356079102,z:15.95489501953125},{x:335.61729431152344,y:258.71752738952637,z:-23.016133308410645},{x:284.1079330444336,y:297.0343494415283,z:63.25934886932373,name:"faceOval"},{x:331.44542694091797,y:230.6892442703247,z:9.92658257484436,name:"rightEye"},{x:341.41536712646484,y:253.01264762878418,z:-29.038610458374023},{x:303.5472869873047,y:327.5896739959717,z:16.725212335586548},{x:304.7756576538086,y:337.4389457702637,z:27.38126277923584,name:"faceOval"},{x:280.80501556396484,y:275.32050132751465,z:45.0752067565918},{x:295.43582916259766,y:318.4501647949219,z:26.2608003616333},{x:281.4303207397461,y:228.7355661392212,z:40.94350814819336},{x:331.2549591064453,y:349.4216537475586,z:-7.376367449760437},{x:352.4247741699219,y:271.7330074310303,z:-24.953596591949463},{x:327.5672912597656,y:260.41900634765625,z:-5.456410646438599},{x:284.5432472229004,y:241.7647933959961,z:29.668869972229004},{x:310,y:235.66174507141113,z:8.502663969993591,name:"rightEye"},{x:315.7071113586426,y:235.7572603225708,z:6.938687562942505,name:"rightEye"},{x:330.41088104248047,y:311.04143142700195,z:-9.325502514839172,name:"lips"},{x:288.5377502441406,y:285.31983375549316,z:21.837315559387207},{x:344.55039978027344,y:359.4300842285156,z:-6.705257892608643,name:"faceOval"},{x:323.41880798339844,y:351.67362213134766,z:7.802375555038452,name:"faceOval"},{x:314.64088439941406,y:346.11894607543945,z:16.36339783668518,name:"faceOval"},{x:349.4945526123047,y:184.8434829711914,z:-.21847527474164963},{x:359.24694061279297,y:359.8348903656006,z:-8.403456211090088,name:"faceOval"},{x:321.26182556152344,y:234.64492321014404,z:6.90950870513916,name:"rightEye"},{x:326.318359375,y:232.90250301361084,z:8.029969334602356,name:"rightEye"},{x:329.6211624145508,y:231.6195774078369,z:9.722331762313843,name:"rightEye"},{x:285.9398078918457,y:228.2351303100586,z:24.650139808654785},{x:325.79288482666016,y:227.88007736206055,z:7.469738721847534,name:"rightEye"},{x:320.1699447631836,y:227.5934886932373,z:6.168370842933655,name:"rightEye"},{x:314.85408782958984,y:227.85282611846924,z:6.2675780057907104,name:"rightEye"},{x:309.3084907531738,y:229.1516876220703,z:7.7031683921813965,name:"rightEye"},{x:305.5621337890625,y:230.92366218566895,z:9.722331762313843,name:"rightEye"},{x:277.8681945800781,y:228.5354232788086,z:59.71122741699219,name:"faceOval"},{x:306.1444664001465,y:235.1954698562622,z:10.603528022766113,name:"rightEye"},{x:355.4478454589844,y:281.96210861206055,z:-20.565123558044434},{x:333.02661895751953,y:288.0105400085449,z:-14.72939133644104},{x:337.15728759765625,y:269.2059516906738,z:-19.8414945602417},{x:345.9898376464844,y:283.5453128814697,z:-20.4834246635437},{x:351.48963928222656,y:219.98916149139404,z:-7.0378947257995605},{x:312.39574432373047,y:336.50628089904785,z:8.671900033950806},{x:321.32152557373047,y:343.1755256652832,z:.9067271649837494},{x:343.78379821777344,y:353.2975959777832,z:-14.355905055999756},{x:296.8791389465332,y:327.91497230529785,z:41.01353645324707,name:"faceOval"},{x:329.6939468383789,y:229.27897453308105,z:8.934508562088013,name:"rightEye"},{x:341.6905212402344,y:241.4073657989502,z:-14.589333534240723},{x:359.03079986572266,y:353.48859786987305,z:-15.803166627883911},{x:333.1861877441406,y:356.43213272094727,z:-1.0234417766332626,name:"faceOval"},{x:283.97483825683594,y:291.4318656921387,z:41.94725513458252},{x:343.33770751953125,y:305.830135345459,z:-15.756480693817139,name:"lips"},{x:342.40283966064453,y:307.7453899383545,z:-17.4021577835083},{x:341.53621673583984,y:311.0595703125,z:-19.047834873199463},{x:340.9107208251953,y:315.4837703704834,z:-18.5576331615448,name:"lips"},{x:339.1478729248047,y:323.42233657836914,z:-14.367576837539673},{x:333.3201599121094,y:307.4406337738037,z:-9.617288708686829},{x:331.2411117553711,y:306.9811820983887,z:-9.669809937477112},{x:329.23255920410156,y:306.0508346557617,z:-9.582273960113525,name:"lips"},{x:322.4586486816406,y:301.33323669433594,z:-7.720675468444824},{x:297.1712112426758,y:286.9552803039551,z:8.240055441856384},{x:341.3060760498047,y:235.4432201385498,z:-7.504753470420837},{x:336.9318389892578,y:224.3451976776123,z:5.829898118972778},{x:332.65323638916016,y:226.70403957366943,z:8.105834126472473},{x:334.67357635498047,y:306.4397621154785,z:-8.981193900108337,name:"lips"},{x:297.4601936340332,y:306.29210472106934,z:15.476365089416504},{x:342.9119110107422,y:222.37077713012695,z:-2.754466235637665},{x:335.4629898071289,y:332.20250129699707,z:-11.823196411132812},{x:353.2412338256836,y:240.56339263916016,z:-27.147831916809082},{x:346.3080596923828,y:236.41446590423584,z:-18.452589511871338},{x:352.6475143432617,y:234.1420555114746,z:-19.748122692108154},{x:337.3209762573242,y:253.39937210083008,z:-16.024924516677856},{x:358.6122131347656,y:344.90861892700195,z:-18.592647314071655},{x:358.1117248535156,y:334.64990615844727,z:-17.49552845954895},{x:346.4450454711914,y:335.0321102142334,z:-16.32838249206543},{x:319.17640686035156,y:320.2833938598633,z:-3.276764452457428},{x:325.2540588378906,y:276.2369728088379,z:-6.460157036781311},{x:326.7214584350586,y:327.3939514160156,z:-7.417217493057251},{x:310.7190132141113,y:277.2265148162842,z:-3.5452082753181458},{x:319.78355407714844,y:284.8238182067871,z:-6.4543211460113525},{x:305.773983001709,y:290.83580017089844,z:.06907138042151928},{x:344.4001770019531,y:344.85408782958984,z:-16.946970224380493},{x:333.1879425048828,y:258.74256134033203,z:-11.90489649772644},{x:313.80598068237305,y:327.08919525146484,z:2.2277912497520447},{x:322.9637908935547,y:334.6819496154785,z:-3.3643004298210144},{x:313.4055519104004,y:311.2166690826416,z:-1.1175429821014404},{x:291.0865783691406,y:298.2831001281738,z:22.467575073242188},{x:305.6580924987793,y:313.3707904815674,z:5.561453700065613},{x:288.23760986328125,y:305.9941864013672,z:36.765122413635254},{x:315.10692596435547,y:296.26991271972656,z:-4.604393839836121},{x:337.50518798828125,y:247.5944423675537,z:-10.597691535949707},{x:338.8450622558594,y:265.47778129577637,z:-27.778091430664062},{x:334.25254821777344,y:269.0671920776367,z:-20.938611030578613},{x:341.64512634277344,y:259.6387195587158,z:-32.189905643463135},{x:331.44081115722656,y:219.0976095199585,z:4.207563698291779},{x:320.56339263916016,y:216.49658203125,z:2.930997312068939},{x:311.21912002563477,y:216.57853603363037,z:2.9674705862998962},{x:303.46256256103516,y:218.54614734649658,z:5.357203483581543},{x:297.99999237060547,y:222.505202293396,z:9.325502514839172},{x:294.93839263916016,y:236.39654159545898,z:18.534289598464966},{x:278.87489318847656,y:259.7095584869385,z:45.68212032318115},{x:300.3782653808594,y:245.38593292236328,z:12.278382778167725},{x:307.06348419189453,y:246.36857986450195,z:8.164191246032715},{x:315.5229187011719,y:245.3949737548828,z:5.503097176551819},{x:323.71395111083984,y:242.75178909301758,z:4.6335723996162415},{x:330.2785873413086,y:239.34658527374268,z:4.937030673027039},{x:334.6982192993164,y:236.0460376739502,z:4.823233783245087},{x:279.3412208557129,y:263.5196113586426,z:70.91583728790283,name:"faceOval"},{x:334.65972900390625,y:271.6648578643799,z:-17.775644063949585},{x:342.05677032470703,y:246.99846267700195,z:-20.84523916244507},{x:344.0357971191406,y:264.5701503753662,z:-32.936880588531494},{x:348.25531005859375,y:268.6645030975342,z:-30.695960521697998},{x:344.12227630615234,y:266.34212493896484,z:-29.808926582336426},{x:337.12318420410156,y:274.2556858062744,z:-15.768152475357056},{x:349.49047088623047,y:269.071683883667,z:-32.51670837402344},{x:350.1683044433594,y:271.4691352844238,z:-24.93025302886963},{x:333.9634704589844,y:230.56639194488525,z:8.89949381351471},{x:338.2147979736328,y:231.4807891845703,z:4.6715047955513},{x:340.4712677001953,y:231.74463272094727,z:-.34996166825294495},{x:303.28975677490234,y:232.24980354309082,z:11.916568279266357,name:"rightEye"},{x:299.4649124145508,y:229.53842639923096,z:12.325069904327393},{x:359.09618377685547,y:241.77349090576172,z:-24.650139808654785},{x:399.46216583251953,y:229.89503860473633,z:15.919880867004395,name:"leftEye"},{x:361.38919830322266,y:269.6129894256592,z:-24.510080814361572},{x:416.9973373413086,y:206.0895538330078,z:53.26857566833496,name:"faceOval"},{x:381.32179260253906,y:235.5476474761963,z:7.6214683055877686},{x:387.8068542480469,y:236.25958442687988,z:8.345099091529846},{x:393.95751953125,y:235.8660364151001,z:10.475142002105713},{x:401.84600830078125,y:232.77019500732422,z:16.760226488113403},{x:375.70568084716797,y:233.48456382751465,z:8.234220147132874},{x:388.17752838134766,y:218.94717693328857,z:6.810300946235657},{x:381.64928436279297,y:219.2656660079956,z:6.711093783378601},{x:394.4760513305664,y:219.66821193695068,z:9.173773527145386},{x:398.8843536376953,y:221.8837022781372,z:12.03328251838684},{x:406.5454864501953,y:237.12156772613525,z:19.7131085395813},{x:383.87447357177734,y:337.6932907104492,z:-8.631049990653992},{x:401.2682342529297,y:228.5916566848755,z:18.359217643737793,name:"leftEye"},{x:422.0449447631836,y:236.73934936523438,z:51.16771221160889},{x:412.69153594970703,y:232.80198097229004,z:27.52131938934326},{x:387.3497772216797,y:263.298397064209,z:-2.8609684109687805},{x:364.5124053955078,y:293.39221000671387,z:-22.397546768188477,name:"lips"},{x:363.62987518310547,y:302.1291446685791,z:-19.643079042434692},{x:373.2334518432617,y:295.8647060394287,z:-18.125789165496826,name:"lips"},{x:378.83365631103516,y:299.5177745819092,z:-13.153743743896484,name:"lips"},{x:369.91477966308594,y:302.5704002380371,z:-16.65518283843994},{x:374.9167251586914,y:303.5416603088379,z:-11.963253021240234},{x:387.58888244628906,y:312.2716999053955,z:-4.680258631706238},{x:360.6635284423828,y:264.31986808776855,z:-35.94811677932739},{x:361.04564666748047,y:256.8225860595703,z:-37.278664112091064},{x:408.3855438232422,y:213.52088928222656,z:15.756480693817139,name:"leftEyebrow"},{x:373.2946014404297,y:245.38101196289062,z:-1.9316278398036957},{x:376.83860778808594,y:264.3721103668213,z:-18.510947227478027},{x:376.9546127319336,y:261.0010528564453,z:-15.989909172058105},{x:406.1498260498047,y:263.5030174255371,z:7.072908878326416},{x:360.07205963134766,y:248.3631706237793,z:-32.16656446456909},{x:393.11119079589844,y:205.10473251342773,z:3.7786373496055603,name:"leftEyebrow"},{x:402.12791442871094,y:207.89000988006592,z:9.383859634399414,name:"leftEyebrow"},{x:410.8693313598633,y:191.6182279586792,z:41.27030849456787,name:"faceOval"},{x:364.9509811401367,y:210.40483474731445,z:-3.758212625980377},{x:375.94444274902344,y:221.1331844329834,z:8.368442058563232},{x:392.1904754638672,y:305.0360298156738,z:-1.752179116010666},{x:419.50225830078125,y:307.25592613220215,z:58.96425247192383,name:"faceOval"},{x:372.0027160644531,y:268.7212657928467,z:-16.631840467453003},{x:366.1614227294922,y:271.6237449645996,z:-18.219159841537476},{x:385.00938415527344,y:305.3863334655762,z:-2.567722797393799},{x:381.99771881103516,y:304.9723720550537,z:-4.575215280056},{x:405.078125,y:203.21216583251953,z:13.713973760604858,name:"leftEyebrow"},{x:377.13207244873047,y:268.4710121154785,z:-15.266278982162476},{x:380.9713363647461,y:205.36980628967285,z:-.7250899076461792,name:"leftEyebrow"},{x:381.7788314819336,y:198.9268398284912,z:-1.184653863310814,name:"leftEyebrow"},{x:385.5204772949219,y:172.1484375,z:16.04826807975769,name:"faceOval"},{x:407.94189453125,y:196.76236152648926,z:25.723915100097656},{x:383.03890228271484,y:184.5157527923584,z:7.393874526023865},{x:411.61781311035156,y:210.79241752624512,z:22.315845489501953,name:"leftEyebrow"},{x:414.30870056152344,y:208.4643030166626,z:37.021894454956055},{x:364.28722381591797,y:298.35777282714844,z:-21.86065673828125},{x:371.3682556152344,y:299.78848457336426,z:-17.834001779556274},{x:376.88201904296875,y:301.6696071624756,z:-13.153743743896484},{x:370.2193832397461,y:270.49095153808594,z:-15.569736957550049},{x:383.5081100463867,y:305.2726364135742,z:-3.673594295978546},{x:380.73760986328125,y:305.96869468688965,z:-8.660228252410889},{x:381.2334442138672,y:304.63574409484863,z:-4.820316135883331,name:"lips"},{x:368.1698989868164,y:264.8884963989258,z:-25.653886795043945},{x:373.5087203979492,y:303.4233856201172,z:-10.95950722694397,name:"lips"},{x:368.4544372558594,y:303.29601287841797,z:-14.169161319732666,name:"lips"},{x:362.76554107666016,y:303.5735607147217,z:-16.911956071853638,name:"lips"},{x:366.60980224609375,y:324.8870658874512,z:-15.616422891616821},{x:365.7067108154297,y:315.95678329467773,z:-20.903596878051758,name:"lips"},{x:365.0083923339844,y:311.2232208251953,z:-21.066999435424805},{x:364.1508102416992,y:307.0583438873291,z:-18.907777070999146},{x:363.37512969970703,y:304.5721435546875,z:-17.42550015449524,name:"lips"},{x:374.580078125,y:304.3059539794922,z:-11.40302300453186,name:"lips"},{x:375.55362701416016,y:305.0998020172119,z:-12.861957550048828},{x:377.2437286376953,y:307.1674346923828,z:-14.215847253799438},{x:378.68587493896484,y:309.9015712738037,z:-13.223772048950195,name:"lips"},{x:383.8992691040039,y:290.29629707336426,z:-9.97326910495758},{x:423.3871841430664,y:271.91688537597656,z:74.37058925628662,name:"faceOval"},{x:377.68043518066406,y:304.62209701538086,z:-7.603961229324341,name:"lips"},{x:379.00428771972656,y:304.9314594268799,z:-8.57852816581726},{x:364.00279998779297,y:275.2813911437988,z:-19.25792098045349},{x:374.68231201171875,y:273.82555961608887,z:-11.28047227859497},{x:365.0354766845703,y:273.4548568725586,z:-18.791062831878662},{x:380.61901092529297,y:249.8848056793213,z:.15501167625188828},{x:391.14158630371094,y:254.7934627532959,z:2.0906515419483185},{x:378.1761169433594,y:264.9612236022949,z:-12.605184316635132},{x:400.9540557861328,y:179.99592304229736,z:27.82477855682373,name:"faceOval"},{x:398.0038833618164,y:188.50656509399414,z:16.094952821731567},{x:394.8717498779297,y:199.0359592437744,z:6.226727366447449,name:"leftEyebrow"},{x:382.10926055908203,y:316.83926582336426,z:-8.946179747581482},{x:366.51588439941406,y:200.32583713531494,z:-5.24632453918457,name:"leftEyebrow"},{x:367.4893569946289,y:183.87210845947266,z:1.9039081037044525},{x:368.6243438720703,y:168.8127565383911,z:8.736093044281006,name:"faceOval"},{x:398.96175384521484,y:234.9675178527832,z:13.713973760604858},{x:412.9645538330078,y:242.23042488098145,z:23.272905349731445},{x:372.05257415771484,y:231.41919136047363,z:9.226294755935669},{x:406.0722351074219,y:223.58965873718262,z:18.370890617370605},{x:368.27442169189453,y:240.2039337158203,z:-4.166713654994965},{x:372.3575210571289,y:260.66442489624023,z:-24.976940155029297},{x:419.2244338989258,y:247.9079246520996,z:30.299127101898193},{x:409.43885803222656,y:246.60913467407227,z:16.398411989212036},{x:401.69139862060547,y:248.76328468322754,z:9.395531415939331},{x:389.7608184814453,y:247.56915092468262,z:5.841569304466248},{x:380.5461883544922,y:244.55984115600586,z:4.263003468513489},{x:373.25817108154297,y:240.80214500427246,z:2.5356262922286987},{x:358.77086639404297,y:229.35615062713623,z:-10.387605428695679},{x:419.5793914794922,y:262.8478717803955,z:26.5175724029541},{x:410.8808898925781,y:222.51372814178467,z:22.199130058288574},{x:358.45714569091797,y:268.91467094421387,z:-33.17030906677246},{x:373.4129333496094,y:251.6385841369629,z:-5.771540403366089},{x:422.5408172607422,y:239.23919677734375,z:74.04378890991211,name:"faceOval"},{x:367.8171920776367,y:236.58040523529053,z:1.820748895406723},{x:378.51959228515625,y:266.2532329559326,z:-5.74819803237915},{x:403.3472442626953,y:229.05112266540527,z:19.689764976501465},{x:372.34840393066406,y:256.6451168060303,z:-21.872329711914062},{x:422.54566192626953,y:289.1587829589844,z:68.67491245269775,name:"faceOval"},{x:371.9297409057617,y:228.90116214752197,z:11.432201862335205,name:"leftEye"},{x:366.21360778808594,y:251.6158962249756,z:-28.19826364517212},{x:409.1571807861328,y:321.3156223297119,z:20.2266526222229},{x:408.52943420410156,y:331.44238471984863,z:31.09278917312622,name:"faceOval"},{x:424.2788314819336,y:267.1992301940918,z:50.467424392700195},{x:415.60352325439453,y:311.6528606414795,z:30.579242706298828},{x:418.12793731689453,y:221.59927368164062,z:46.26569747924805},{x:385.68286895751953,y:346.0184955596924,z:-5.70151150226593},{x:357.82936096191406,y:271.3758373260498,z:-24.836881160736084},{x:379.588623046875,y:257.5071716308594,z:-3.755294680595398},{x:417.4592590332031,y:234.71948146820068,z:34.5475435256958},{x:393.4684371948242,y:231.58967971801758,z:11.408859491348267,name:"leftEye"},{x:387.8864288330078,y:232.14245796203613,z:9.51808214187622,name:"leftEye"},{x:382.4981689453125,y:307.5654888153076,z:-7.522260546684265,name:"lips"},{x:419.00169372558594,y:277.8332805633545,z:26.424202919006348},{x:373.62953186035156,y:357.6375102996826,z:-5.75986921787262,name:"faceOval"},{x:392.8708267211914,y:347.72446632385254,z:10.154176950454712,name:"faceOval"},{x:400.3953552246094,y:341.0005187988281,z:19.39797878265381,name:"faceOval"},{x:382.25440979003906,y:231.66935920715332,z:8.998700976371765,name:"leftEye"},{x:377.14550018310547,y:230.4228687286377,z:9.804032444953918,name:"leftEye"},{x:373.8358688354492,y:229.64950561523438,z:11.292144060134888,name:"leftEye"},{x:414.5794677734375,y:221.67891025543213,z:29.412097930908203},{x:377.00672149658203,y:225.66201210021973,z:9.360517263412476,name:"leftEye"},{x:382.29530334472656,y:224.8431158065796,z:8.32175612449646,name:"leftEye"},{x:387.5133514404297,y:224.49507236480713,z:8.917000889778137,name:"leftEye"},{x:393.15906524658203,y:225.24795055389404,z:10.737749338150024,name:"leftEye"},{x:397.05554962158203,y:226.55359268188477,z:13.002015352249146,name:"leftEye"},{x:420.5299377441406,y:221.014666557312,z:65.40690422058105,name:"faceOval"},{x:397.06920623779297,y:230.6661558151245,z:13.807345628738403,name:"leftEye"},{x:377.94647216796875,y:285.1647090911865,z:-13.305472135543823},{x:372.1118927001953,y:267.1267318725586,z:-18.83774757385254},{x:364.9968719482422,y:282.24411964416504,z:-19.818150997161865},{x:401.973876953125,y:331.20131492614746,z:11.566424369812012},{x:394.3083190917969,y:338.86693954467773,z:3.142542541027069},{x:373.9820861816406,y:351.4504623413086,z:-13.50388765335083},{x:414.3888854980469,y:321.24735832214355,z:45.51872253417969,name:"faceOval"},{x:373.44234466552734,y:227.33163356781006,z:10.626870393753052,name:"leftEye"},{x:364.0731430053711,y:240.31539916992188,z:-13.807345628738403},{x:384.2658233642578,y:353.3793067932129,z:.7385850697755814,name:"faceOval"},{x:423.20526123046875,y:283.5176181793213,z:47.152724266052246},{x:369.42798614501953,y:304.0898895263672,z:-14.647691249847412,name:"lips"},{x:370.63812255859375,y:305.90051651000977,z:-16.211668252944946},{x:371.91192626953125,y:309.0167713165283,z:-17.84567356109619},{x:373.0583953857422,y:313.3545398712158,z:-17.378815412521362,name:"lips"},{x:375.39905548095703,y:321.09289169311523,z:-13.118728399276733},{x:379.2567825317383,y:304.3582534790039,z:-7.924926280975342},{x:381.18797302246094,y:303.7031364440918,z:-7.843226194381714},{x:383.0918502807617,y:302.4884605407715,z:-7.6506465673446655,name:"lips"},{x:389.09461975097656,y:297.1475315093994,z:-5.5497825145721436},{x:411.6408920288086,y:280.24898529052734,z:12.02161192893982},{x:363.3110809326172,y:234.27620887756348,z:-6.775286793708801},{x:366.0474395751953,y:223.29872131347656,z:6.827808618545532},{x:370.34427642822266,y:225.1457118988037,z:9.558931589126587},{x:377.5371551513672,y:303.60079765319824,z:-7.358860373497009,name:"lips"},{x:412.9557800292969,y:299.53579902648926,z:19.39797878265381},{x:360.0810241699219,y:221.72012329101562,z:-2.153385728597641},{x:379.82784271240234,y:329.47723388671875,z:-10.48097848892212},{x:359.08477783203125,y:235.7911491394043,z:-18.079102039337158},{x:369.6688461303711,y:251.5407943725586,z:-14.962821006774902},{x:369.5555114746094,y:333.5307312011719,z:-15.67478060722351},{x:394.0193176269531,y:315.6973171234131,z:-.9920747578144073},{x:383.78997802734375,y:272.7268695831299,z:-4.689012169837952},{x:387.67765045166016,y:323.6722755432129,z:-5.640236139297485},{x:397.8769302368164,y:272.1331214904785,z:-.9395531564950943},{x:389.87476348876953,y:280.5630111694336,z:-4.29218202829361},{x:403.83888244628906,y:285.1167869567871,z:3.0229100584983826},{x:372.5467300415039,y:343.1070327758789,z:-16.153310537338257},{x:374.1112518310547,y:256.3721466064453,z:-10.574349164962769},{x:399.73785400390625,y:321.77515983581543,z:4.849494695663452},{x:392.03365325927734,y:330.56447982788086,z:-1.3407598435878754},{x:398.59134674072266,y:305.93902587890625,z:1.517290621995926},{x:417.95997619628906,y:290.9716987609863,z:26.89105987548828},{x:406.04541778564453,y:307.35154151916504,z:8.666064143180847},{x:420.75328826904297,y:298.40752601623535,z:41.78385257720947},{x:395.4522705078125,y:291.4153575897217,z:-2.1752697229385376},{x:368.6452102661133,y:245.8882999420166,z:-9.453888535499573},{x:370.34900665283203,y:263.56690406799316,z:-26.75100326538086},{x:374.98477935791016,y:266.6126346588135,z:-19.77146625518799},{x:366.99840545654297,y:258.12140464782715,z:-31.372904777526855},{x:371.00616455078125,y:217.63479709625244,z:5.60522198677063},{x:381.30577087402344,y:214.14087295532227,z:4.983716309070587},{x:390.1496124267578,y:213.38221549987793,z:5.593550801277161},{x:397.7696990966797,y:214.3659782409668,z:8.57852816581726},{x:403.1652069091797,y:217.65509605407715,z:13.013685941696167},{x:407.3551940917969,y:230.72525024414062,z:22.444231510162354},{x:424.0876770019531,y:251.7839241027832,z:51.16771221160889},{x:403.50196838378906,y:239.88757610321045,z:15.803166627883911},{x:397.31719970703125,y:241.49806022644043,z:11.233787536621094},{x:388.99425506591797,y:241.4366912841797,z:7.948269248008728},{x:380.7804489135742,y:239.78078842163086,z:6.600214838981628},{x:374.01336669921875,y:237.11946487426758,z:6.349278092384338},{x:369.39125061035156,y:234.35351371765137,z:5.987462401390076},{x:422.9730987548828,y:255.76455116271973,z:76.61150932312012,name:"faceOval"},{x:374.73915100097656,y:269.24214363098145,z:-16.608498096466064},{x:364.61681365966797,y:245.71088790893555,z:-20.02823829650879},{x:365.3834533691406,y:263.34174156188965,z:-32.32996463775635},{x:361.58252716064453,y:267.8273677825928,z:-30.345816612243652},{x:365.37208557128906,y:265.0249671936035,z:-29.178667068481445},{x:372.72605895996094,y:272.05135345458984,z:-14.834434986114502},{x:360.48614501953125,y:268.34827423095703,z:-32.189905643463135},{x:359.9516296386719,y:270.8049201965332,z:-24.650139808654785},{x:369.5049285888672,y:229.01945114135742,z:10.107489824295044},{x:365.5447769165039,y:230.24096488952637,z:5.593550801277161},{x:363.50669860839844,y:230.6208372116089,z:.43622106313705444},{x:399.3529510498047,y:227.65677452087402,z:15.35965085029602,name:"leftEye"},{x:402.5693130493164,y:224.60190296173096,z:15.931552648544312}],box:{xMin:277.8318977355957,yMin:168.7741756439209,xMax:424.2788314819336,yMax:359.8348903656006,width:146.4469337463379,height:191.0607147216797}},SAMPLE_FACELANDMARKER_RESULT:{faceLandmarks:[[{x:.5760777592658997,y:.8639070391654968,z:-.030997956171631813},{x:.572094738483429,y:.7886289358139038,z:-.07189624011516571},{x:.5723551511764526,y:.8075382709503174,z:-.03578168898820877},{x:.5548420548439026,y:.7188365459442139,z:-.057787876576185226},{x:.5706077814102173,y:.7674974799156189,z:-.07740399986505508},{x:.5681378245353699,y:.7387768030166626,z:-.07356284558773041},{x:.5621535181999207,y:.6681165099143982,z:-.04189874976873398},{x:.46613582968711853,y:.6679812073707581,z:.011289681307971478},{x:.5579932928085327,y:.6174106597900391,z:-.03502821549773216},{x:.5563451647758484,y:.5905600190162659,z:-.03928658738732338},{x:.5487832427024841,y:.4900572597980499,z:-.029898937791585922},{x:.5765544176101685,y:.8692144751548767,z:-.02831427752971649},{x:.5771114230155945,y:.873644232749939,z:-.02345779910683632},{x:.5771905779838562,y:.877016007900238,z:-.016658689826726913},{x:.5778058767318726,y:.8770116567611694,z:-.014505492523312569},{x:.5783766508102417,y:.8835000991821289,z:-.015996402129530907},{x:.5792440176010132,y:.8913810849189758,z:-.01924579218029976},{x:.5796768069267273,y:.8996334671974182,z:-.018261712044477463},{x:.5817288160324097,y:.9255813956260681,z:-.007126849144697189},{x:.5726592540740967,y:.7992473244667053,z:-.0643521398305893},{x:.5579419136047363,y:.7996989488601685,z:-.04566684365272522},{x:.4216199815273285,y:.5958762764930725,z:.06776496022939682},{x:.5052269697189331,y:.6796539425849915,z:-.0010737782577052712},{x:.49243026971817017,y:.6838865876197815,z:-.0005227324436418712},{x:.4796970784664154,y:.6856290102005005,z:.002684245817363262},{x:.4618356227874756,y:.6764569878578186,z:.013439622707664967},{x:.5160380601882935,y:.6737282276153564,z:-17607348127057776e-21},{x:.48070961236953735,y:.6255870461463928,z:-.008339674212038517},{x:.49719780683517456,y:.6256808042526245,z:-.008027955889701843},{x:.46674346923828125,y:.6317623853683472,z:-.004460199736058712},{x:.4582492709159851,y:.641118049621582,z:.0011905613355338573},{x:.45408669114112854,y:.6911458969116211,z:.020514748990535736},{x:.535312294960022,y:.9619986414909363,z:.012499462813138962},{x:.4608460068702698,y:.6628725528717041,z:.01517564244568348},{x:.4206731915473938,y:.6828458309173584,z:.07848648726940155},{x:.4390624463558197,y:.6796106696128845,z:.03283142298460007},{x:.5029968619346619,y:.7701570391654968,z:-.009734481573104858},{x:.5595027208328247,y:.8607323169708252,z:-.030043255537748337},{x:.5621269941329956,y:.8738374710083008,z:-.021709579974412918},{x:.5451499819755554,y:.865527331829071,z:-.022014077752828598},{x:.5351184010505676,y:.8705098032951355,z:-.011602800339460373},{x:.5495014190673828,y:.8744956254959106,z:-.016490943729877472},{x:.5395170450210571,y:.8759440779685974,z:-.007333362940698862},{x:.5183624029159546,y:.8959754705429077,z:.010520773939788342},{x:.5604349374771118,y:.7895449995994568,z:-.07082037627696991},{x:.557381272315979,y:.7687489986419678,z:-.07590588927268982},{x:.4432901442050934,y:.6308897733688354,z:.0027153254486620426},{x:.5258325338363647,y:.7151225805282593,z:-.014676518738269806},{x:.5271827578544617,y:.7833116054534912,z:-.037643320858478546},{x:.5257382988929749,y:.7717816233634949,z:-.03401920944452286},{x:.46516409516334534,y:.7705106735229492,z:.0065747760236263275},{x:.5558893084526062,y:.7420997619628906,z:-.0694495290517807},{x:.4720408320426941,y:.6066038608551025,z:-.021204356104135513},{x:.45432573556900024,y:.6158540844917297,z:-.011054684408009052},{x:.4305151402950287,y:.5608053803443909,z:.0396830290555954},{x:.5310865640640259,y:.6157484650611877,z:-.03081176057457924},{x:.5114666223526001,y:.6329749226570129,z:-.00335998204536736},{x:.506435751914978,y:.8786543607711792,z:.012980876490473747},{x:.4480472207069397,y:.8640613555908203,z:.12569651007652283},{x:.5372058153152466,y:.7942581176757812,z:-.03168361634016037},{x:.5488379597663879,y:.8001630306243896,z:-.03280917927622795},{x:.5213388204574585,y:.8794381618499756,z:.011892606504261494},{x:.5242055654525757,y:.8789222240447998,z:.008370225317776203},{x:.4477175176143646,y:.6039950251579285,z:-.0050799972377717495},{x:.526964008808136,y:.7916748523712158,z:-.02968614175915718},{x:.4971255660057068,y:.6050706505775452,z:-.028175678104162216},{x:.4938119053840637,y:.5882453918457031,z:-.03210941329598427},{x:.4757143557071686,y:.5094879865646362,z:-.01300730835646391},{x:.43947282433509827,y:.5816648006439209,z:.01415177434682846},{x:.485664039850235,y:.5477864146232605,z:-.023685332387685776},{x:.43635931611061096,y:.6226438283920288,z:.013606148771941662},{x:.42910251021385193,y:.6102726459503174,z:.03926564007997513},{x:.5605402588844299,y:.8680099248886108,z:-.027318159118294716},{x:.5474816560745239,y:.8702861070632935,z:-.019686367362737656},{x:.5373021364212036,y:.8728838562965393,z:-.010484928265213966},{x:.540735125541687,y:.7979167103767395,z:-.029073253273963928},{x:.5228585004806519,y:.87913578748703,z:.009915109723806381},{x:.530497670173645,y:.8815253973007202,z:.0020524784922599792},{x:.5259912610054016,y:.8790552616119385,z:.007895970717072487},{x:.5433906316757202,y:.7882310748100281,z:-.05121905356645584},{x:.541388213634491,y:.8777219653129578,z:-.00466804439201951},{x:.5515822172164917,y:.8767023086547852,z:-.010475946590304375},{x:.5637003779411316,y:.877059817314148,z:-.015273625031113625},{x:.5640299320220947,y:.9263423085212708,z:-.00658724969252944},{x:.5642300248146057,y:.8993074893951416,z:-.017653480172157288},{x:.5637336373329163,y:.8910360932350159,z:-.01852807030081749},{x:.5637134313583374,y:.8837276697158813,z:-.01482592523097992},{x:.564205527305603,y:.8768964409828186,z:-.01331155002117157},{x:.5419867634773254,y:.8778373599052429,z:-.0037720394320786},{x:.5404468774795532,y:.880696177482605,z:-.005610354244709015},{x:.5392338633537292,y:.8845721483230591,z:-.007352025713771582},{x:.538469672203064,y:.8891173601150513,z:-.005154991988092661},{x:.5189250111579895,y:.8452741503715515,z:-.009755070321261883},{x:.4258975088596344,y:.7662280797958374,z:.1387351155281067},{x:.5725725293159485,y:.8041572570800781,z:-.04583907872438431},{x:.5342061519622803,y:.8785833120346069,z:.002659974154084921},{x:.5324031114578247,y:.8804071545600891,z:.0017832003068178892},{x:.5538818836212158,y:.8078407645225525,z:-.03254539892077446},{x:.5325431823730469,y:.8026832938194275,z:-.019140373915433884},{x:.5514076948165894,y:.8043903112411499,z:-.03313535451889038},{x:.5131856203079224,y:.7284771800041199,z:-.009399853646755219},{x:.49331504106521606,y:.7443980574607849,z:-.005225230939686298},{x:.5239617824554443,y:.7807451486587524,z:-.025881027802824974},{x:.4473606050014496,y:.5315827131271362,z:.011164786294102669},{x:.45718759298324585,y:.5604941248893738,z:-.005943301599472761},{x:.4670005738735199,y:.5909327268600464,z:-.019681761041283607},{x:.5311570167541504,y:.9076261520385742,z:.00389476353302598},{x:.5249923467636108,y:.5893563628196716,z:-.037981919944286346},{x:.5166932344436646,y:.5429551005363464,z:-.03319704160094261},{x:.5085030198097229,y:.49676206707954407,z:-.02691275253891945},{x:.4687720239162445,y:.6834565997123718,z:.008113506250083447},{x:.4426414966583252,y:.7069531679153442,z:.028577271848917007},{x:.5230373740196228,y:.6675713658332825,z:.001773772411979735},{x:.4481240212917328,y:.6527872085571289,z:.012414850294589996},{x:.5339856743812561,y:.7012367844581604,z:-.020220188423991203},{x:.5347223281860352,y:.7761190533638,z:-.05141595005989075},{x:.4315067231655121,y:.7211957573890686,z:.04381405934691429},{x:.45203351974487305,y:.7206180095672607,z:.017288070172071457},{x:.46892452239990234,y:.7265436053276062,z:.005602988880127668},{x:.49314674735069275,y:.7202282547950745,z:-.0006408205372281373},{x:.5104925632476807,y:.7091827392578125,z:-.00362918758764863},{x:.5232142210006714,y:.698553740978241,z:-.00787867046892643},{x:.5497883558273315,y:.6743605136871338,z:-.036349106580019},{x:.43658503890037537,y:.7627100348472595,z:.042555369436740875},{x:.4397648870944977,y:.6528646349906921,z:.017956094816327095},{x:.5653332471847534,y:.7992802858352661,z:-.06365057826042175},{x:.5285563468933105,y:.736810564994812,z:-.018836988136172295},{x:.4180678725242615,y:.6792560815811157,z:.12284679710865021},{x:.5328429937362671,y:.6865872144699097,z:-.010484723374247551},{x:.5230283141136169,y:.7809416055679321,z:-.011922398582100868},{x:.4551771283149719,y:.6650775074958801,z:.01774493046104908},{x:.5337203741073608,y:.7618928551673889,z:-.04697106033563614},{x:.43463975191116333,y:.8133478164672852,z:.1354849934577942},{x:.5225707292556763,y:.6605283617973328,z:.004980515688657761},{x:.5441933870315552,y:.7497199773788452,z:-.06091512367129326},{x:.4774007797241211,y:.9159183502197266,z:.059622734785079956},{x:.48068761825561523,y:.9364941716194153,z:.08404944837093353},{x:.4268292486667633,y:.7657528519630432,z:.09051097184419632},{x:.46051913499832153,y:.8880485892295837,z:.0738474428653717},{x:.4243420660495758,y:.6434382200241089,z:.06230505183339119},{x:.5342157483100891,y:.9835634231567383,z:.021662971004843712},{x:.5668109655380249,y:.8042187094688416,z:-.044937074184417725},{x:.5176341533660889,y:.7530587315559387,z:-.012967454269528389},{x:.430206298828125,y:.6835605502128601,z:.04612284153699875},{x:.4794231951236725,y:.6732114553451538,z:.003970044665038586},{x:.49073347449302673,y:.6722435355186462,z:.0008692514384165406},{x:.5294116139411926,y:.884677529335022,z:.004413890186697245},{x:.4430122375488281,y:.80235356092453,z:.04987282305955887},{x:.5603825449943542,y:1.0092442035675049,z:.026417359709739685},{x:.5186598300933838,y:.9828659892082214,z:.0513598807156086},{x:.5010536909103394,y:.9640932679176331,z:.06591596454381943},{x:.5524769425392151,y:.539441704750061,z:-.035816047340631485},{x:.5879997611045837,y:1.0091472864151,z:.02285068854689598},{x:.5016193985939026,y:.6684437990188599,z:.00028415941051207483},{x:.511952817440033,y:.6642197370529175,z:.0021144719794392586},{x:.5194343328475952,y:.6623469591140747,z:.004674181342124939},{x:.4321230351924896,y:.6496355533599854,z:.03124697133898735},{x:.508686363697052,y:.6479565501213074,z:-.00044765998609364033},{x:.4963986277580261,y:.6431032419204712,z:-.0032507688738405704},{x:.4845542013645172,y:.6430778503417969,z:-.002903624437749386},{x:.4733612537384033,y:.647506833076477,z:.00023347247042693198},{x:.4668654501438141,y:.653346598148346,z:.004762572236359119},{x:.41815051436424255,y:.633708119392395,z:.09809435904026031},{x:.47159942984580994,y:.6711485385894775,z:.007849935442209244},{x:.5734396576881409,y:.8256140351295471,z:-.03155219927430153},{x:.5306524038314819,y:.8337990641593933,z:-.018351426348090172},{x:.5371729135513306,y:.7910830974578857,z:-.037286680191755295},{x:.5549534559249878,y:.8275275826454163,z:-.030664825811982155},{x:.5597432255744934,y:.6418541669845581,z:-.03318847343325615},{x:.4958484172821045,y:.9429569244384766,z:.048340678215026855},{x:.5140507817268372,y:.9634028077125549,z:.03589847311377525},{x:.5587693452835083,y:.9951097369194031,z:.00908728688955307},{x:.46411189436912537,y:.9051855206489563,z:.10601935535669327},{x:.5181609392166138,y:.6554316878318787,z:.002546071307733655},{x:.5436590909957886,y:.7085841298103333,z:-.03844436630606651},{x:.5872187614440918,y:.9960382580757141,z:.0063423276878893375},{x:.5379653573036194,y:.9989125728607178,z:.03636329993605614},{x:.4350326955318451,y:.8088565468788147,z:.09147704392671585},{x:.5523084998130798,y:.8773422837257385,z:-.009068487212061882},{x:.5510149598121643,y:.8816931843757629,z:-.011043853126466274},{x:.5503793954849243,y:.88776695728302,z:-.01348799467086792},{x:.5501549243927002,y:.8954370617866516,z:-.012142189778387547},{x:.546072781085968,y:.9192524552345276,z:-.003157563041895628},{x:.5314661860466003,y:.8771666884422302,z:.0005075141089037061},{x:.5293324589729309,y:.8762547969818115,z:.00039177737198770046},{x:.5275698900222778,y:.8750609755516052,z:47732755774632096e-21},{x:.5104271173477173,y:.8607332110404968,z:.0012934643309563398},{x:.45938700437545776,y:.8134918212890625,z:.023569690063595772},{x:.5418947339057922,y:.6864100694656372,z:-.027333909645676613},{x:.531914234161377,y:.6456130743026733,z:-.005434140563011169},{x:.523697018623352,y:.647885262966156,z:-.0002466466394253075},{x:.5338191390037537,y:.8783687353134155,z:.002268768846988678},{x:.46226605772972107,y:.8610277771949768,z:.04718952998518944},{x:.5434442758560181,y:.6456181406974792,z:-.02327350154519081},{x:.5399754643440247,y:.940219521522522,z:.005075343884527683},{x:.5661457777023315,y:.71457839012146,z:-.06242101639509201},{x:.5523148775100708,y:.6974870562553406,z:-.04863070324063301},{x:.5639959573745728,y:.6923378109931946,z:-.05180761218070984},{x:.5367592573165894,y:.7423217296600342,z:-.03623027727007866},{x:.5853689908981323,y:.9752064943313599,z:-.002361974213272333},{x:.5835235118865967,y:.9493685960769653,z:-.003941743168979883},{x:.5615018606185913,y:.949194610118866,z:-.0015953965485095978},{x:.5068561434745789,y:.9048219323158264,z:.01862684078514576},{x:.5134067535400391,y:.7971825003623962,z:-.008485661819577217},{x:.5223897099494934,y:.925589919090271,z:.01249657291918993},{x:.48500555753707886,y:.7959478497505188,z:-.0032065745908766985},{x:.5037734508514404,y:.8184596300125122,z:-.004932103678584099},{x:.4766361117362976,y:.828806459903717,z:.01027688942849636},{x:.5589827299118042,y:.974656343460083,z:.0009666886180639267},{x:.5294582843780518,y:.7541216611862183,z:-.025603046640753746},{x:.4973002076148987,y:.9208990931510925,z:.031931452453136444},{x:.5163551568984985,y:.9432790875434875,z:.024321340024471283},{x:.49399662017822266,y:.8814862370491028,z:.018687399104237556},{x:.44948166608810425,y:.836137592792511,z:.05702034756541252},{x:.47898444533348083,y:.8836610913276672,z:.03150695189833641},{x:.4454479217529297,y:.8499438166618347,z:.08868525922298431},{x:.49572959542274475,y:.8452823758125305,z:.0036111653316766024},{x:.5362502336502075,y:.7222585678100586,z:-.027912352234125137},{x:.5393770337104797,y:.7850722074508667,z:-.05415399745106697},{x:.531399667263031,y:.7898418307304382,z:-.03883346915245056},{x:.5451627373695374,y:.7717036604881287,z:-.06480253487825394},{x:.5206395983695984,y:.6287745833396912,z:-.010521138086915016},{x:.4974782466888428,y:.6191938519477844,z:-.014098240062594414},{x:.4774145185947418,y:.6193130612373352,z:-.013643337413668633},{x:.4616098403930664,y:.6259890198707581,z:-.008448202162981033},{x:.4516478478908539,y:.6368461847305298,z:9050309745362028e-20},{x:.4485096037387848,y:.6719120740890503,z:.022984720766544342},{x:.42177659273147583,y:.7240667343139648,z:.08511673659086227},{x:.4616215229034424,y:.6988231539726257,z:.014238474890589714},{x:.4755798876285553,y:.7034608721733093,z:.00625590980052948},{x:.4924992024898529,y:.7005885243415833,z:.0009391739731654525},{x:.5082254409790039,y:.693384051322937,z:-.0009464038303121924},{x:.5203112959861755,y:.6849707961082458,z:-.0022114769089967012},{x:.52867591381073,y:.6779075860977173,z:-.002962538506835699},{x:.4213953912258148,y:.7219811677932739,z:.1350894570350647},{x:.5320829749107361,y:.794858992099762,z:-.03181503340601921},{x:.5452795028686523,y:.7286570072174072,z:-.04771539941430092},{x:.5496407747268677,y:.7866933345794678,z:-.06452003121376038},{x:.557040274143219,y:.7962084412574768,z:-.05837344378232956},{x:.549176812171936,y:.7895247936248779,z:-.057761140167713165},{x:.5362890362739563,y:.8005836606025696,z:-.026903774589300156},{x:.560200035572052,y:.7983731031417847,z:-.06172555685043335},{x:.5616944432258606,y:.8022753596305847,z:-.045200999826192856},{x:.5273328423500061,y:.6611284017562866,z:.0029021520167589188},{x:.534850537776947,y:.6660012006759644,z:-.005215510260313749},{x:.5394860506057739,y:.6701375246047974,z:-.014931917190551758},{x:.4634307324886322,y:.658291757106781,z:.009295716881752014},{x:.4538393020629883,y:.6519932150840759,z:.00930330716073513},{x:.5776031613349915,y:.7159298658370972,z:-.057365912944078445},{x:.6504855155944824,y:.6461779475212097,z:.014184834435582161},{x:.5860154032707214,y:.7962266206741333,z:-.04522843658924103},{x:.6842049360275269,y:.5631637573242188,z:.07207967340946198},{x:.6152560710906982,y:.6674962639808655,z:.0007529259892180562},{x:.6280948519706726,y:.6684326529502869,z:.0016892586136236787},{x:.6408625245094299,y:.6663892269134521,z:.005331226624548435},{x:.6557814478874207,y:.6534678936004639,z:.01646413467824459},{x:.6035663485527039,y:.6639701724052429,z:.0013799630105495453},{x:.6329053044319153,y:.608010470867157,z:-.006195899099111557},{x:.6167260408401489,y:.6117533445358276,z:-.006319951266050339},{x:.6471013426780701,y:.6112449765205383,z:-.0017843559617176652},{x:.6560901999473572,y:.6185776591300964,z:.004047257360070944},{x:.6666946411132812,y:.6651176810264587,z:.023647578433156013},{x:.6311345100402832,y:.9495396018028259,z:.014004078693687916},{x:.6544655561447144,y:.6397901773452759,z:.01809609681367874},{x:.6965808868408203,y:.6482675075531006,z:.08304904401302338},{x:.679817259311676,y:.650188148021698,z:.03632688894867897},{x:.6336516737937927,y:.7541458010673523,z:-.007742783520370722},{x:.5921701192855835,y:.8567668199539185,z:-.029399123042821884},{x:.591663658618927,y:.870215654373169,z:-.02103729173541069},{x:.6068367958068848,y:.8584195375442505,z:-.020668085664510727},{x:.6176617741584778,y:.860965371131897,z:-.009790095500648022},{x:.6040634512901306,y:.8686612844467163,z:-.015289564616978168},{x:.6143736839294434,y:.8671170473098755,z:-.005712216719985008},{x:.6373105049133301,y:.8815656900405884,z:.012672550976276398},{x:.5832505822181702,y:.7866312861442566,z:-.07051534950733185},{x:.5836675763130188,y:.7658692598342896,z:-.07566110789775848},{x:.6709531545639038,y:.604898989200592,z:.005951565690338612},{x:.6029891967773438,y:.705652117729187,z:-.013388276100158691},{x:.6131622195243835,y:.7728396058082581,z:-.036248479038476944},{x:.6123163104057312,y:.7612020373344421,z:-.03264721855521202},{x:.6696187853813171,y:.744706928730011,z:.009673702530562878},{x:.5803102254867554,y:.7385968565940857,z:-.0689152330160141},{x:.6404349207878113,y:.5877999663352966,z:-.01929756999015808},{x:.6588467955589294,y:.5929454565048218,z:-.008487257175147533},{x:.6720337867736816,y:.530631422996521,z:.043437421321868896},{x:.584305465221405,y:.6099005341529846,z:-.030301367864012718},{x:.6034283638000488,y:.6217452883720398,z:-.001970183802768588},{x:.6460927724838257,y:.8608663082122803,z:.015541625209152699},{x:.6957815289497375,y:.8326103091239929,z:.13015234470367432},{x:.6043362617492676,y:.7861682772636414,z:-.030476901680231094},{x:.594293475151062,y:.7942103147506714,z:-.032218821346759796},{x:.6324057579040527,y:.8665139675140381,z:.014255806803703308},{x:.6296147704124451,y:.8667733669281006,z:.010388285852968693},{x:.663644552230835,y:.5798642635345459,z:-.0022301070857793093},{x:.6140630841255188,y:.7809288501739502,z:-.02835679054260254},{x:.615908145904541,y:.5921698212623596,z:-.026804860681295395},{x:.617181122303009,y:.5748661756515503,z:-.03060605563223362},{x:.6222207546234131,y:.49137672781944275,z:-.011151673272252083},{x:.6669357419013977,y:.5541607141494751,z:.017466170713305473},{x:.6182981729507446,y:.5320425629615784,z:-.021793590858578682},{x:.6760554313659668,y:.595052182674408,z:.017115700989961624},{x:.6801463961601257,y:.5800720453262329,z:.043127160519361496},{x:.5922210812568665,y:.8644017577171326,z:-.02662893570959568},{x:.6054555177688599,y:.8637874722480774,z:-.018363753333687782},{x:.6161889433860779,y:.8641164898872375,z:-.008808949030935764},{x:.6017249822616577,y:.7901403307914734,z:-.028126630932092667},{x:.631446123123169,y:.8664817810058594,z:.012112865224480629},{x:.6249198913574219,y:.8716511130332947,z:.003882825840264559},{x:.6281915903091431,y:.867301881313324,z:.009891441091895103},{x:.5986843109130859,y:.7813931703567505,z:-.050227612257003784},{x:.6126407384872437,y:.869275689125061,z:-.0031255714129656553},{x:.6027271151542664,y:.8711842894554138,z:-.009324162267148495},{x:.59088134765625,y:.8742044568061829,z:-.014608660712838173},{x:.5984604358673096,y:.9216185212135315,z:-.005981989670544863},{x:.5950398445129395,y:.8964707255363464,z:-.01703473925590515},{x:.5941568613052368,y:.8882410526275635,z:-.017784785479307175},{x:.5928806662559509,y:.8803883194923401,z:-.014153128489851952},{x:.5909661054611206,y:.8748103976249695,z:-.012609979137778282},{x:.6128016710281372,y:.8702545762062073,z:-.0022550546564161777},{x:.6150846481323242,y:.8726804256439209,z:-.00414019962772727},{x:.6173093914985657,y:.8770190477371216,z:-.005970994010567665},{x:.619335412979126,y:.8814800977706909,z:-.0036864024586975574},{x:.6292637586593628,y:.8314558267593384,z:-.007714875973761082},{x:.702275276184082,y:.7320667505264282,z:.1433621346950531},{x:.6204835176467896,y:.8689177632331848,z:.0044869170524179935},{x:.6223508715629578,y:.8704851269721985,z:.00352082890458405},{x:.590448260307312,y:.8029727935791016,z:-.03200828656554222},{x:.6097423434257507,y:.7933741211891174,z:-.018042555078864098},{x:.59229576587677,y:.7993767261505127,z:-.032564569264650345},{x:.6171364188194275,y:.7153720259666443,z:-.007672437466681004},{x:.6389747858047485,y:.726390540599823,z:-.002999067772179842},{x:.6151940226554871,y:.769412100315094,z:-.024427521973848343},{x:.6526776552200317,y:.505868136882782,z:.01412637997418642},{x:.6475822329521179,y:.5375454425811768,z:-.0033899128902703524},{x:.6433356404304504,y:.5714520215988159,z:-.017428796738386154},{x:.626949667930603,y:.8962116837501526,z:.005602736957371235},{x:.5868416428565979,y:.5829002261161804,z:-.03727729618549347},{x:.5877229571342468,y:.5345035791397095,z:-.032396964728832245},{x:.5887066125869751,y:.48655083775520325,z:-.025856535881757736},{x:.6507197618484497,y:.6612282991409302,z:.011114613153040409},{x:.6803066730499268,y:.677992045879364,z:.032125361263751984},{x:.5963194370269775,y:.6598632335662842,z:.002976928371936083},{x:.667536199092865,y:.6274255514144897,z:.015618261881172657},{x:.5930740833282471,y:.6940041780471802,z:-.019217798486351967},{x:.6053346395492554,y:.7676517963409424,z:-.050308309495449066},{x:.6934473514556885,y:.6884298920631409,z:.04794462397694588},{x:.6738007664680481,y:.6934011578559875,z:.020697161555290222},{x:.6588084697723389,y:.7033141851425171,z:.008462334051728249},{x:.6346072554588318,y:.7029502391815186,z:.001542167621664703},{x:.6157816648483276,y:.6966525912284851,z:-.002009218093007803},{x:.6015574336051941,y:.688928484916687,z:-.006588225718587637},{x:.5746836066246033,y:.6711069345474243,z:-.03597589209675789},{x:.6947521567344666,y:.7309479117393494,z:.046707939356565475},{x:.6759101152420044,y:.6249120831489563,z:.021654341369867325},{x:.5794773101806641,y:.7971615195274353,z:-.06339326500892639},{x:.6041849851608276,y:.727514922618866,z:-.017512541264295578},{x:.6968844532966614,y:.6440950036048889,z:.12727996706962585},{x:.5910853147506714,y:.679325520992279,z:-.009497715160250664},{x:.6157375574111938,y:.7695677280426025,z:-.010624290443956852},{x:.6606494784355164,y:.6410489678382874,z:.0208158977329731},{x:.6040687561035156,y:.7531470656394958,z:-.045887019485235214},{x:.7012156248092651,y:.780247151851654,z:.14028730988502502},{x:.595149576663971,y:.6527782678604126,z:.006308757700026035},{x:.5925500392913818,y:.7436665892601013,z:-.060151755809783936},{x:.6780198812484741,y:.8905693888664246,z:.0626060739159584},{x:.676746666431427,y:.9113880395889282,z:.08726003766059875},{x:.7030686140060425,y:.7312687635421753,z:.09529774636030197},{x:.688987135887146,y:.8588417172431946,z:.07752864807844162},{x:.6883691549301147,y:.6109960675239563,z:.06669612973928452},{x:.6358906030654907,y:.9702065587043762,z:.023120900616049767},{x:.5781539678573608,y:.8023634552955627,z:-.044763918966054916},{x:.6170316934585571,y:.7408350706100464,z:-.011375460773706436},{x:.688542366027832,y:.6516284346580505,z:.050206027925014496},{x:.6385149359703064,y:.6540714502334595,z:.006462941411882639},{x:.6279382109642029,y:.6563615798950195,z:.003062846139073372},{x:.6268895268440247,y:.8736732006072998,z:.00627936702221632},{x:.6944946050643921,y:.7709181308746338,z:.053824134171009064},{x:.614617109298706,y:1.0022112131118774,z:.02719894051551819},{x:.6493719220161438,y:.9665167927742004,z:.053563784807920456},{x:.6624587178230286,y:.943530797958374,z:.068605437874794},{x:.6162528991699219,y:.6558693051338196,z:.002187855076044798},{x:.6058168411254883,y:.654328465461731,z:.0036193584091961384},{x:.5987918972969055,y:.6536934971809387,z:.006134530063718557},{x:.6831037402153015,y:.6195642948150635,z:.03511790186166763},{x:.6062582731246948,y:.6356398463249207,z:.001280312892049551},{x:.6174948811531067,y:.62776118516922,z:-.0013642468256875873},{x:.6297246217727661,y:.6253792643547058,z:-.0007034156005829573},{x:.6407091617584229,y:.627578616142273,z:.0028144705574959517},{x:.6479622721672058,y:.6322650909423828,z:.00750273372977972},{x:.6915091276168823,y:.5990704298019409,z:.10270945727825165},{x:.6457163095474243,y:.6504453420639038,z:.010696077719330788},{x:.6164222955703735,y:.8231936097145081,z:-.016772059723734856},{x:.6042401194572449,y:.7830976843833923,z:-.03630910441279411},{x:.5922216773033142,y:.8228387236595154,z:-.029992375522851944},{x:.6646111011505127,y:.92097008228302,z:.050967294722795486},{x:.651232898235321,y:.9460107088088989,z:.038000158965587616},{x:.6140977144241333,y:.9882472157478333,z:.009882091544568539},{x:.6870781183242798,y:.8768675327301025,z:.10980932414531708},{x:.5986856818199158,y:.6456438899040222,z:.003999010659754276},{x:.585981547832489,y:.7034481763839722,z:-.0377722829580307},{x:.6342031359672546,y:.9867448806762695,z:.03786521404981613},{x:.7013950943946838,y:.776049017906189,z:.09598205983638763},{x:.6030206680297852,y:.8719133138656616,z:-.007931148633360863},{x:.6050592064857483,y:.8767156004905701,z:-.009791925549507141},{x:.6073468923568726,y:.8831382393836975,z:-.012361008673906326},{x:.6087977290153503,y:.890143632888794,z:-.01098148338496685},{x:.6147705316543579,y:.9110084772109985,z:-.0018823575228452682},{x:.622577965259552,y:.8670604825019836,z:.002609190298244357},{x:.6241236329078674,y:.8651344180107117,z:.0025534380692988634},{x:.6257084608078003,y:.8638408184051514,z:.0023300074972212315},{x:.639931321144104,y:.8449671268463135,z:.0038123116828501225},{x:.6810906529426575,y:.7856625318527222,z:.02717764675617218},{x:.583532452583313,y:.6811994910240173,z:-.026588857173919678},{x:.5855660438537598,y:.6393819451332092,z:-.004512844607234001},{x:.5932201743125916,y:.6398029327392578,z:.0008020466193556786},{x:.6200879812240601,y:.8683351874351501,z:.00417016725987196},{x:.6842559576034546,y:.8330534100532532,z:.050836317241191864},{x:.5754412412643433,y:.6418221592903137,z:-.022838059812784195},{x:.6232790350914001,y:.9295297265052795,z:.006339520215988159},{x:.5764067769050598,y:.694546639919281,z:-.04825803264975548},{x:.59778892993927,y:.7343927621841431,z:-.035004377365112305},{x:.6042810678482056,y:.9441440105438232,z:-.0010970570147037506},{x:.6496372222900391,y:.8869078159332275,z:.021036235615611076},{x:.6274012327194214,y:.7830310463905334,z:-.006658440921455622},{x:.637792706489563,y:.9104999899864197,z:.014290250837802887},{x:.6549934148788452,y:.7748609185218811,z:-.0006672973395325243},{x:.6404005289077759,y:.801220715045929,z:-.0026642554439604282},{x:.6671456694602966,y:.8045546412467957,z:.013180811889469624},{x:.6107483506202698,y:.9680658578872681,z:.001778992242179811},{x:.6060343980789185,y:.744587242603302,z:-.024382334202528},{x:.6602751612663269,y:.8998945355415344,z:.0344940721988678},{x:.6463775038719177,y:.9262562394142151,z:.02617623284459114},{x:.6579852104187012,y:.8602304458618164,z:.021586716175079346},{x:.6926165223121643,y:.8053340315818787,z:.061075080186128616},{x:.6724731922149658,y:.8594399690628052,z:.03457934781908989},{x:.6975721716880798,y:.8183245062828064,z:.09300774335861206},{x:.6512877941131592,y:.8258221745491028,z:.006324059329926968},{x:.594887375831604,y:.7148372530937195,z:-.026898479089140892},{x:.6017440557479858,y:.7773507833480835,z:-.05312420800328255},{x:.6096571683883667,y:.7806998491287231,z:-.037646256387233734},{x:.5952993035316467,y:.7654367685317993,z:-.06398405134677887},{x:.5950021147727966,y:.6201304793357849,z:-.009297547861933708},{x:.6165438890457153,y:.6052900552749634,z:-.012455573305487633},{x:.6362661719322205,y:.6015968918800354,z:-.011649220250546932},{x:.6522727608680725,y:.6046400666236877,z:-.005903332494199276},{x:.6625409722328186,y:.6128141283988953,z:.0030042496509850025},{x:.6688099503517151,y:.6457712054252625,z:.026322703808546066},{x:.7013440728187561,y:.6893666386604309,z:.08984331786632538},{x:.6608623266220093,y:.6749406456947327,z:.0172116681933403},{x:.6482325196266174,y:.6823726296424866,z:.008881398476660252},{x:.6313265562057495,y:.6842025518417358,z:.0031308617908507586},{x:.6147016286849976,y:.6809731721878052,z:.0007630771724507213},{x:.6018834114074707,y:.6755372285842896,z:-.0008834321051836014},{x:.5925027132034302,y:.670681357383728,z:-.001968748401850462},{x:.700127363204956,y:.6871103644371033,z:.13980500400066376},{x:.6095665693283081,y:.7853189706802368,z:-.03074747882783413},{x:.5880423784255981,y:.7229287028312683,z:-.04691500961780548},{x:.5930182337760925,y:.7811514139175415,z:-.06398335844278336},{x:.5867722034454346,y:.7922660112380981,z:-.05794971063733101},{x:.5933279991149902,y:.7842848896980286,z:-.05714067071676254},{x:.6063535809516907,y:.7920218706130981,z:-.02590685710310936},{x:.5839452743530273,y:.794978141784668,z:-.0615212507545948},{x:.5828126072883606,y:.8000800013542175,z:-.0449722595512867},{x:.5909603834152222,y:.6541213393211365,z:.003991890233010054},{x:.5852181911468506,y:.6602938771247864,z:-.004428438376635313},{x:.5825737714767456,y:.6651063561439514,z:-.014345290139317513},{x:.6517343521118164,y:.6362385153770447,z:.012151890434324741},{x:.6615052819252014,y:.6281577944755554,z:.0123682152479887},{x:.4856873154640198,y:.6568945646286011,z:.000720038078725338},{x:.49988406896591187,y:.6547410488128662,z:.0006949726957827806},{x:.48438939452171326,y:.6392973065376282,z:.000705525919329375},{x:.47143134474754333,y:.6589511632919312,z:.0006980331381782889},{x:.48704618215560913,y:.6752797961235046,z:.0006921177846379578},{x:.6243702173233032,y:.640461802482605,z:-6592126737814397e-20},{x:.6390967965126038,y:.6385173797607422,z:-.00016105435497593135},{x:.6230536699295044,y:.6224825382232666,z:-.00016136496560648084},{x:.6095397472381592,y:.641917884349823,z:-.0001803556369850412},{x:.6250996589660645,y:.6586247682571411,z:-.0001785515050869435}]],faceBlendshapes:[{categories:[{index:0,score:5187174338061595e-21,categoryName:"_neutral",displayName:""},{index:1,score:.24521504342556,categoryName:"browDownLeft",displayName:""},{index:2,score:.1987743377685547,categoryName:"browDownRight",displayName:""},{index:3,score:.013400448486208916,categoryName:"browInnerUp",displayName:""},{index:4,score:.012361560948193073,categoryName:"browOuterUpLeft",displayName:""},{index:5,score:.019305096939206123,categoryName:"browOuterUpRight",displayName:""},{index:6,score:28426356948330067e-21,categoryName:"cheekPuff",displayName:""},{index:7,score:34500112633395474e-23,categoryName:"cheekSquintLeft",displayName:""},{index:8,score:483789051486383e-21,categoryName:"cheekSquintRight",displayName:""},{index:9,score:.07650448381900787,categoryName:"eyeBlinkLeft",displayName:""},{index:10,score:.05070012807846069,categoryName:"eyeBlinkRight",displayName:""},{index:11,score:.13978900015354156,categoryName:"eyeLookDownLeft",displayName:""},{index:12,score:.14198613166809082,categoryName:"eyeLookDownRight",displayName:""},{index:13,score:.2177766114473343,categoryName:"eyeLookInLeft",displayName:""},{index:14,score:.014739357866346836,categoryName:"eyeLookInRight",displayName:""},{index:15,score:.02361512929201126,categoryName:"eyeLookOutLeft",displayName:""},{index:16,score:.19679604470729828,categoryName:"eyeLookOutRight",displayName:""},{index:17,score:.04874616861343384,categoryName:"eyeLookUpLeft",displayName:""},{index:18,score:.049392376095056534,categoryName:"eyeLookUpRight",displayName:""},{index:19,score:.34944331645965576,categoryName:"eyeSquintLeft",displayName:""},{index:20,score:.2939716875553131,categoryName:"eyeSquintRight",displayName:""},{index:21,score:.005955042317509651,categoryName:"eyeWideLeft",displayName:""},{index:22,score:.006776117719709873,categoryName:"eyeWideRight",displayName:""},{index:23,score:16942436559475027e-21,categoryName:"jawForward",displayName:""},{index:24,score:.0045165494084358215,categoryName:"jawLeft",displayName:""},{index:25,score:.07803940027952194,categoryName:"jawOpen",displayName:""},{index:26,score:2090057751047425e-20,categoryName:"jawRight",displayName:""},{index:27,score:.06032035872340202,categoryName:"mouthClose",displayName:""},{index:28,score:.00228882092051208,categoryName:"mouthDimpleLeft",displayName:""},{index:29,score:.00781762320548296,categoryName:"mouthDimpleRight",displayName:""},{index:30,score:.0017093931091949344,categoryName:"mouthFrownLeft",displayName:""},{index:31,score:.0019319106359034777,categoryName:"mouthFrownRight",displayName:""},{index:32,score:8485237776767462e-20,categoryName:"mouthFunnel",displayName:""},{index:33,score:.0009051355300471187,categoryName:"mouthLeft",displayName:""},{index:34,score:.0003630454302765429,categoryName:"mouthLowerDownLeft",displayName:""},{index:35,score:.00017601238505449146,categoryName:"mouthLowerDownRight",displayName:""},{index:36,score:.12865161895751953,categoryName:"mouthPressLeft",displayName:""},{index:37,score:.20137207210063934,categoryName:"mouthPressRight",displayName:""},{index:38,score:.0022203284315764904,categoryName:"mouthPucker",displayName:""},{index:39,score:.0009096377179957926,categoryName:"mouthRight",displayName:""},{index:40,score:.34189721941947937,categoryName:"mouthRollLower",displayName:""},{index:41,score:.11409689486026764,categoryName:"mouthRollUpper",displayName:""},{index:42,score:.17172536253929138,categoryName:"mouthShrugLower",displayName:""},{index:43,score:.004038424696773291,categoryName:"mouthShrugUpper",displayName:""},{index:44,score:.00023205230536404997,categoryName:"mouthSmileLeft",displayName:""},{index:45,score:.00019313619122840464,categoryName:"mouthSmileRight",displayName:""},{index:46,score:.0018571305554360151,categoryName:"mouthStretchLeft",displayName:""},{index:47,score:.0023813238367438316,categoryName:"mouthStretchRight",displayName:""},{index:48,score:24323100660694763e-21,categoryName:"mouthUpperUpLeft",displayName:""},{index:49,score:3161552012898028e-20,categoryName:"mouthUpperUpRight",displayName:""},{index:50,score:108198406678639e-21,categoryName:"noseSneerLeft",displayName:""},{index:51,score:12652527630052646e-22,categoryName:"noseSneerRight",displayName:""}],headIndex:-1,headName:""}],facialTransformationMatrixes:[{rows:4,columns:4,data:[.9947517514228821,.10230544209480286,.0013679931871592999,0,-.10230997204780579,.9947447776794434,.003816320328041911,0,-.000970348424743861,-.0039362297393381596,.9999914169311523,0,2.8888821601867676,-7.808934211730957,-30.52109146118164,1]}]}};import*as x6 from"react";import{useEffect as tU,useContext as rU,createContext as oU}from"react";var M6=oU({}),a2={basePath:"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.2/wasm",options:{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}};function iU({basePath:t=a2.basePath,options:e=a2.options,children:r}){let n=JSON.stringify(e),i=Oo(async()=>{let{FilesetResolver:o,FaceLandmarker:s}=await Promise.resolve().then(()=>(B6(),R6)),p=await o.forVisionTasks(t);return s.createFromOptions(p,e)},[t,n]);return tU(()=>()=>{i?.close(),Yp([t,n])},[i,t,n]),x6.createElement(M6.Provider,{value:i},r)}function s2(){return rU(M6)}function w6(t,e){return t.clone().add(e).multiplyScalar(.5)}function cl(t,e,r){let n=t.localToWorld(e);return r.worldToLocal(n)}var S6=aU({}),pU=l2(({camera:t,autostart:e=!0,webcam:r=!0,webcamVideoTextureSrc:n,manualUpdate:i=!1,manualDetect:o=!1,onVideoFrame:s,smoothTime:p=.25,offset:l=!0,offsetScalar:c=80,eyes:u=!1,eyesAsOrigin:d=!0,depth:f=.15,debug:g=!1,facemesh:v,makeDefault:A},m)=>{var h,y;let E=rh(k=>k.scene),b=rh(k=>k.camera),_=rh(k=>k.set),C=rh(k=>k.get),B=t||b,R=p2(null),M=p2(null),[x]=Xs(()=>new co.Object3D),[T]=Xs(()=>new co.Vector3),[w]=Xs(()=>new co.Vector3),[S]=Xs(()=>new co.Vector3),[I]=Xs(()=>new co.Vector3),G=oh(()=>{x.parent=B.parent;let k=M.current;if(k){let{outerRef:O,eyeRightRef:D,eyeLeftRef:q}=k;if(D.current&&q.current){let{irisDirRef:ae}=D.current,{irisDirRef:K}=q.current;ae.current&&K.current&&O.current&&(T.copy(cl(ae.current,new co.Vector3(0,0,0),O.current)),w.copy(cl(K.current,new co.Vector3(0,0,0),O.current)),x.position.copy(cl(O.current,w6(T,w),B.parent||E)),S.copy(cl(ae.current,new co.Vector3(0,0,1),O.current)),I.copy(cl(K.current,new co.Vector3(0,0,1),O.current)),x.lookAt(O.current.localToWorld(w6(S,I))))}else O.current&&(x.position.copy(cl(O.current,new co.Vector3(0,0,0),B.parent||E)),x.lookAt(O.current.localToWorld(new co.Vector3(0,0,1))))}return x},[B,w,I,T,S,E,x]),[H]=Xs(()=>new co.Object3D),X=oh(function(k,O){if(B){var D;(D=O)!==null&&D!==void 0||(O=G()),p>0?(wn.damp3(H.position,O.position,p,k,void 0,void 0,1e-9),wn.dampE(H.rotation,O.rotation,p,k,void 0,void 0,1e-9)):(H.position.copy(O.position),H.rotation.copy(O.rotation)),B.position.copy(H.position),B.rotation.copy(H.rotation)}},[B,G,p,H.position,H.rotation]),[Z,z]=Xs(),Y=s2(),L=oh((k,O)=>{let D=Y?.detectForVideo(k,O);z(D)},[Y]);sU((k,O)=>{i||X(O)});let Q=c2(()=>Object.assign(Object.create(co.EventDispatcher.prototype),{detect:L,computeTarget:G,update:X,facemeshApiRef:M,webcamApiRef:R,play:()=>{var k;(k=R.current)==null||(k=k.videoTextureApiRef.current)==null||k.texture.source.data.play()},pause:()=>{var k;(k=R.current)==null||(k=k.videoTextureApiRef.current)==null||k.texture.source.data.pause()}}),[L,G,X]);d2(m,()=>Q,[Q]),ih(()=>{let k=O=>{o||L(O.texture.source.data,O.time),s&&s(O)};return Q.addEventListener("videoFrame",k),()=>{Q.removeEventListener("videoFrame",k)}},[Q,L,Y,o,s]),ih(()=>{if(A){let k=C().controls;return _({controls:Q}),()=>_({controls:k})}},[A,Q,C,_]);let V=Z?.faceLandmarks[0],N=Z==null||(h=Z.facialTransformationMatrixes)==null?void 0:h[0],P=Z==null||(y=Z.faceBlendshapes)==null?void 0:y[0];return En.createElement(S6.Provider,{value:Q},r&&En.createElement(T6,{fallback:null},En.createElement(lU,{ref:R,autostart:e,videoTextureSrc:n})),En.createElement(Fy,te({ref:M},v,{points:V,depth:f,facialTransformationMatrix:N,faceBlendshapes:P,eyes:u,eyesAsOrigin:d,offset:l,offsetScalar:c,debug:g,"rotation-z":Math.PI,visible:g}),En.createElement("meshBasicMaterial",{side:co.DoubleSide})))}),u2=()=>nU(S6),lU=l2(({videoTextureSrc:t,autostart:e=!0},r)=>{let n=p2(null),i=u2(),o=Oo(async()=>t?Promise.resolve(null):await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}),[t]);ih(()=>(i.dispatchEvent({type:"stream",stream:o}),()=>{o?.getTracks().forEach(p=>p.stop()),Yp([t])}),[o,i,t]);let s=c2(()=>({videoTextureApiRef:n}),[]);return d2(r,()=>s,[s]),En.createElement(T6,{fallback:null},En.createElement(cU,{ref:n,src:t||o,start:e}))}),cU=l2(({src:t,start:e},r)=>{let n=Sy(t,{start:e}),i=n.source.data,o=u2(),s=oh(l=>{o.dispatchEvent({type:"videoFrame",texture:n,time:l})},[n,o]);dU(i,s);let p=c2(()=>({texture:n}),[n]);return d2(r,()=>p,[p]),En.createElement(En.Fragment,null)}),dU=(t,e)=>{ih(()=>{if(!t||!t.requestVideoFrameCallback)return;let r;function n(...i){e(...i),r=t.requestVideoFrameCallback(n)}return t.requestVideoFrameCallback(n),()=>t.cancelVideoFrameCallback(r)},[t,e])};import*as _o from"three";import*as _t from"react";import{useThree as uU,useFrame as fU}from"@react-three/fiber";var gU=t=>t?.current instanceof _o.Object3D,I6=_t.createContext(null);function F6(){return _t.useContext(I6)}function hU({points:t=50}){let{path:e}=F6(),[r,n]=_t.useState([]),[i]=_t.useState(()=>new _o.MeshBasicMaterial({color:"black"})),[o]=_t.useState(()=>new _o.SphereGeometry(.025,16,16)),s=_t.useRef([]);return _t.useEffect(()=>{e.curves!==s.current&&(n(e.getPoints(t)),s.current=e.curves)}),_t.createElement(_t.Fragment,null,r.map((p,l)=>_t.createElement("mesh",{key:l,material:i,geometry:o,position:[p.x,p.y,p.z]})))}var mU=_t.forwardRef(({children:t,curves:e=[],object:r,debug:n=!1,smooth:i=!1,focus:o,offset:s=void 0,eps:p=1e-5,damping:l=.1,focusDamping:c=.1,maxSpeed:u=1/0,...d},f)=>{let{camera:g}=uU(),v=_t.useRef(),[A]=_t.useState(()=>new _o.CurvePath),m=_t.useRef(s??0),h=_t.useMemo(()=>({focus:o,object:r?.current instanceof _o.Object3D?r:{current:g},path:A,current:m.current,offset:m.current,point:new _o.Vector3,tangent:new _o.Vector3,next:new _o.Vector3}),[o,r]);_t.useLayoutEffect(()=>{var b;A.curves=[];let _=e.length>0?e:(b=v.current)==null?void 0:b.__r3f.objects;for(var C=0;C<_.length;C++)A.add(_[C]);if(i){let B=A.getPoints(typeof i=="number"?i:1),R=new _o.CatmullRomCurve3(B);A.curves=[R]}A.updateArcLengths()}),_t.useImperativeHandle(f,()=>v.current,[]),_t.useLayoutEffect(()=>{m.current=$l.repeat(m.current,1)},[s]);let y=0,[E]=_t.useState(()=>new _o.Vector3);return fU((b,_)=>{if(y=h.offset,wn.damp(m,"current",s!==void 0?s:h.current,l,_,u,void 0,p),h.offset=$l.repeat(m.current,1),A.getCurveLengths().length>0){A.getPointAt(h.offset,h.point),A.getTangentAt(h.offset,h.tangent).normalize(),A.getPointAt($l.repeat(m.current-(y-h.offset),1),h.next);let C=r?.current instanceof _o.Object3D?r.current:g;C.position.copy(h.point),o&&wn.dampLookAt(C,gU(o)?o.current.getWorldPosition(E):o,c,_,u,void 0,p)}}),_t.createElement("group",te({ref:v},d),_t.createElement(I6.Provider,{value:h},t,n&&_t.createElement(hU,null)))});import*as Tr from"react";import{useThree as nh,useFrame as EU}from"@react-three/fiber";import{Vector3 as ah,Object3D as bU,Matrix4 as _U,Quaternion as k6}from"three";import*as O6 from"three";import*as Wn from"react";import{useThree as D6,createPortal as AU,useFrame as yU}from"@react-three/fiber";function vU({defaultScene:t,defaultCamera:e,renderPriority:r=1}){let{gl:n,scene:i,camera:o}=D6(),s;return yU(()=>{s=n.autoClear,r===1&&(n.autoClear=!0,n.render(t,e)),n.autoClear=!1,n.clearDepth(),n.render(i,o),n.autoClear=s},r),Wn.createElement("group",{onPointerOver:()=>null})}function f2({children:t,renderPriority:e=1}){let{scene:r,camera:n}=D6(),[i]=Wn.useState(()=>new O6.Scene);return Wn.createElement(Wn.Fragment,null,AU(Wn.createElement(Wn.Fragment,null,t,Wn.createElement(vU,{defaultScene:r,defaultCamera:n,renderPriority:e})),i,{events:{priority:e+1}}))}var z6=Tr.createContext({}),ul=()=>Tr.useContext(z6),CU=2*Math.PI,g2=new bU,L6=new _U,[dl,h2]=[new k6,new k6],P6=new ah,G6=new ah,RU=t=>"minPolarAngle"in t,BU=({alignment:t="bottom-right",margin:e=[80,80],renderPriority:r=1,onUpdate:n,onTarget:i,children:o})=>{let s=nh(C=>C.size),p=nh(C=>C.camera),l=nh(C=>C.controls),c=nh(C=>C.invalidate),u=Tr.useRef(null),d=Tr.useRef(null),f=Tr.useRef(!1),g=Tr.useRef(0),v=Tr.useRef(new ah(0,0,0)),A=Tr.useRef(new ah(0,0,0));Tr.useEffect(()=>{A.current.copy(p.up)},[p]);let m=Tr.useCallback(C=>{f.current=!0,(l||i)&&(v.current=l?.target||i?.()),g.current=p.position.distanceTo(P6),dl.copy(p.quaternion),G6.copy(C).multiplyScalar(g.current).add(P6),g2.lookAt(G6),g2.up.copy(p.up),h2.copy(g2.quaternion),c()},[l,p,i,c]);EU((C,B)=>{if(d.current&&u.current){var R;if(f.current)if(dl.angleTo(h2)<.01)f.current=!1,RU(l)&&p.up.copy(A.current);else{let M=B*CU;dl.rotateTowards(h2,M),p.position.set(0,0,1).applyQuaternion(dl).multiplyScalar(g.current).add(v.current),p.up.set(0,1,0).applyQuaternion(dl).normalize(),p.quaternion.copy(dl),n?n():l&&l.update(),c()}L6.copy(p.matrix).invert(),(R=u.current)==null||R.quaternion.setFromRotationMatrix(L6)}});let h=Tr.useMemo(()=>({tweenCamera:m}),[m]),[y,E]=e,b=t.endsWith("-center")?0:t.endsWith("-left")?-s.width/2+y:s.width/2-y,_=t.startsWith("center-")?0:t.startsWith("top-")?s.height/2-E:-s.height/2+E;return Tr.createElement(f2,{renderPriority:r},Tr.createElement(z6.Provider,{value:h},Tr.createElement(sy,{makeDefault:!0,ref:d,position:[0,0,200]}),Tr.createElement("group",{ref:u,position:[b,_,0]},o)))};import*as Co from"react";import{useThree as xU}from"@react-three/fiber";import{Vector3 as MU,CanvasTexture as wU}from"three";var $d={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},TU=["Right","Left","Top","Bottom","Front","Back"],U6=t=>new MU(...t).multiplyScalar(.38),SU=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(U6),IU=[.25,.25,.25],j6=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(U6),FU=j6.map(t=>t.toArray().map(e=>e==0?.5:.25)),OU=({hover:t,index:e,font:r="20px Inter var, Arial, sans-serif",faces:n=TU,color:i=$d.bg,hoverColor:o=$d.hover,textColor:s=$d.text,strokeColor:p=$d.stroke,opacity:l=1})=>{let c=xU(d=>d.gl),u=Co.useMemo(()=>{let d=document.createElement("canvas");d.width=128,d.height=128;let f=d.getContext("2d");return f.fillStyle=i,f.fillRect(0,0,d.width,d.height),f.strokeStyle=p,f.strokeRect(0,0,d.width,d.height),f.font=r,f.textAlign="center",f.fillStyle=s,f.fillText(n[e].toUpperCase(),64,76),new wU(d)},[e,n,r,i,s,p]);return Co.createElement("meshBasicMaterial",{map:u,"map-anisotropy":c.capabilities.getMaxAnisotropy()||1,attach:`material-${e}`,color:t?o:"white",transparent:!0,opacity:l})},DU=t=>{let{tweenCamera:e}=ul(),[r,n]=Co.useState(null),i=p=>{p.stopPropagation(),n(null)},o=p=>{p.stopPropagation(),e(p.face.normal)};return Co.createElement("mesh",{onPointerOut:i,onPointerMove:p=>{p.stopPropagation(),n(Math.floor(p.faceIndex/2))},onClick:t.onClick||o},[...Array(6)].map((p,l)=>Co.createElement(OU,te({key:l,index:l,hover:r===l},t))),Co.createElement("boxGeometry",null))},N6=({onClick:t,dimensions:e,position:r,hoverColor:n=$d.hover})=>{let{tweenCamera:i}=ul(),[o,s]=Co.useState(!1);return Co.createElement("mesh",{scale:1.01,position:r,onPointerOver:u=>{u.stopPropagation(),s(!0)},onPointerOut:u=>{u.stopPropagation(),s(!1)},onClick:t||(u=>{u.stopPropagation(),i(r)})},Co.createElement("meshBasicMaterial",{color:o?n:"white",transparent:!0,opacity:.6,visible:o}),Co.createElement("boxGeometry",{args:e}))},kU=t=>Co.createElement("group",{scale:[60,60,60]},Co.createElement(DU,t),j6.map((e,r)=>Co.createElement(N6,te({key:r,position:e,dimensions:FU[r]},t))),SU.map((e,r)=>Co.createElement(N6,te({key:r,position:e,dimensions:IU},t))));import*as cr from"react";import{useThree as LU}from"@react-three/fiber";import{CanvasTexture as PU}from"three";function m2({scale:t=[.8,.05,.05],color:e,rotation:r}){return cr.createElement("group",{rotation:r},cr.createElement("mesh",{position:[.4,0,0]},cr.createElement("boxGeometry",{args:t}),cr.createElement("meshBasicMaterial",{color:e,toneMapped:!1})))}function fl({onClick:t,font:e,disabled:r,arcStyle:n,label:i,labelColor:o,axisHeadScale:s=1,...p}){let l=LU(A=>A.gl),c=cr.useMemo(()=>{let A=document.createElement("canvas");A.width=64,A.height=64;let m=A.getContext("2d");return m.beginPath(),m.arc(32,32,16,0,2*Math.PI),m.closePath(),m.fillStyle=n,m.fill(),i&&(m.font=e,m.textAlign="center",m.fillStyle=o,m.fillText(i,32,41)),new PU(A)},[n,i,o,e]),[u,d]=cr.useState(!1),f=(i?1:.75)*(u?1.2:1)*s;return cr.createElement("sprite",te({scale:f,onPointerOver:r?void 0:A=>{A.stopPropagation(),d(!0)},onPointerOut:r?void 0:t||(A=>{A.stopPropagation(),d(!1)})},p),cr.createElement("spriteMaterial",{map:c,"map-anisotropy":l.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:i?1:.75,toneMapped:!1}))}var GU=({hideNegativeAxes:t,hideAxisHeads:e,disabled:r,font:n="18px Inter var, Arial, sans-serif",axisColors:i=["#ff2060","#20df80","#2080ff"],axisHeadScale:o=1,axisScale:s,labels:p=["X","Y","Z"],labelColor:l="#000",onClick:c,...u})=>{let[d,f,g]=i,{tweenCamera:v}=ul(),A={font:n,disabled:r,labelColor:l,onClick:c,axisHeadScale:o,onPointerDown:r?void 0:m=>{v(m.object.position),m.stopPropagation()}};return cr.createElement("group",te({scale:40},u),cr.createElement(m2,{color:d,rotation:[0,0,0],scale:s}),cr.createElement(m2,{color:f,rotation:[0,0,Math.PI/2],scale:s}),cr.createElement(m2,{color:g,rotation:[0,-Math.PI/2,0],scale:s}),!e&&cr.createElement(cr.Fragment,null,cr.createElement(fl,te({arcStyle:d,position:[1,0,0],label:p[0]},A)),cr.createElement(fl,te({arcStyle:f,position:[0,1,0],label:p[1]},A)),cr.createElement(fl,te({arcStyle:g,position:[0,0,1],label:p[2]},A)),!t&&cr.createElement(cr.Fragment,null,cr.createElement(fl,te({arcStyle:d,position:[-1,0,0]},A)),cr.createElement(fl,te({arcStyle:f,position:[0,-1,0]},A)),cr.createElement(fl,te({arcStyle:g,position:[0,0,-1]},A)))))};import*as Ya from"react";import*as Gi from"three";import{extend as zU,useFrame as NU}from"@react-three/fiber";var UU=Mr({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,cellThickness:.5,sectionThickness:1,cellColor:new Gi.Color,sectionColor:new Gi.Color,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new Gi.Vector3,worldPlanePosition:new Gi.Vector3},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      float dist = distance(worldCamProjPosition, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),jU=Ya.forwardRef(({args:t,cellColor:e="#000000",sectionColor:r="#2080ff",cellSize:n=.5,sectionSize:i=1,followCamera:o=!1,infiniteGrid:s=!1,fadeDistance:p=100,fadeStrength:l=1,cellThickness:c=.5,sectionThickness:u=1,side:d=Gi.BackSide,...f},g)=>{zU({GridMaterial:UU});let v=Ya.useRef(null),A=new Gi.Plane,m=new Gi.Vector3(0,1,0),h=new Gi.Vector3(0,0,0);NU(b=>{A.setFromNormalAndCoplanarPoint(m,h).applyMatrix4(v.current.matrixWorld);let _=v.current.material,C=_.uniforms.worldCamProjPosition,B=_.uniforms.worldPlanePosition;A.projectPoint(b.camera.position,C.value),B.value.set(0,0,0).applyMatrix4(v.current.matrixWorld)});let y={cellSize:n,sectionSize:i,cellColor:e,sectionColor:r,cellThickness:c,sectionThickness:u},E={fadeDistance:p,fadeStrength:l,infiniteGrid:s,followCamera:o};return Ya.createElement("mesh",te({ref:tt([v,g]),frustumCulled:!1},f),Ya.createElement("gridMaterial",te({transparent:!0,"extensions-derivatives":!0,side:d},y,E)),Ya.createElement("planeGeometry",{args:t}))});import{CubeTextureLoader as H6}from"three";import{useLoader as Q6}from"@react-three/fiber";function W6(t,{path:e}){let[r]=Q6(H6,[t],n=>n.setPath(e));return r}W6.preload=(t,{path:e})=>Q6.preload(H6,[t],r=>r.setPath(e));import{useLoader as A2}from"@react-three/fiber";function y2(t){return A2(Ss,t)}y2.preload=t=>A2.preload(Ss,t);y2.clear=t=>A2.clear(Ss,t);import{useThree as HU,useLoader as v2}from"@react-three/fiber";import{useEffect as QU}from"react";var V6="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master";function E2(t,e=`${V6}/basis/`){let r=HU(i=>i.gl),n=v2(md,Xp(t)?Object.values(t):t,i=>{i.detectSupport(r),i.setTranscoderPath(e)});if(QU(()=>{(Array.isArray(n)?n:[n]).forEach(r.initTexture)},[r,n]),Xp(t)){let i=Object.keys(t),o={};return i.forEach(s=>Object.assign(o,{[s]:n[i.indexOf(s)]})),o}else return n}E2.preload=(t,e=`${V6}/basis/`)=>v2.preload(md,t,r=>{r.setTranscoderPath(e)});E2.clear=t=>v2.clear(md,t);var J6=Mn(C2());import*as X6 from"react";import{addEffect as WU,addAfterEffect as VU}from"@react-three/fiber";import*as sh from"react";function Y6(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function K6(t,e=[],r){let[n,i]=sh.useState();return sh.useLayoutEffect(()=>{let o=t();return i(o),Y6(r,o),()=>Y6(r,null)},e),n}function YU({showPanel:t=0,className:e,parent:r}){let n=K6(()=>new J6.default,[]);return X6.useEffect(()=>{if(n){let i=r&&r.current||document.body;n.showPanel(t),i?.appendChild(n.dom),e&&n.dom.classList.add(...e.split(" ").filter(p=>p));let o=WU(()=>n.begin()),s=VU(()=>n.end());return()=>{i?.removeChild(n.dom),o(),s()}}},[r,n,e,t]),null}import*as ch from"react";import{useThree as KU,addEffect as XU,addAfterEffect as JU}from"@react-three/fiber";var ph=class{constructor(e,r,n){this.name=e,this.fg=r,this.bg=n,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(e,r,n,i,o=0){let s=1/0,p=0;this.context&&(s=Math.min(s,e),p=Math.max(n,e),i=Math.max(i,r),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(e.toFixed(o)+" "+this.name+" ("+s.toFixed(o)+"-"+parseFloat(p.toFixed(o))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-r/i)*this.GRAPH_HEIGHT))}};var q6=class lh{constructor({logsPerSecond:e=20,samplesLog:r=100,samplesGraph:n=10,precision:i=2,minimal:o=!1,horizontal:s=!0,mode:p=0}={}){this.mode=p,this.horizontal=s,this.container=document.createElement("div"),this.container.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",o&&(this.container.style.cssText+="cursor:pointer"),this.gl=null,this.query=null,this.minimal=o,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new lh.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new lh.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.samplesLog=r,this.samplesGraph=n,this.precision=i,this.logsPerSecond=e,this.minimal?(this.container.addEventListener("click",l=>{l.preventDefault(),this.showPanel(++this.mode%this.container.children.length)},!1),this.mode=p,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2)})}resizePanel(e,r){e.canvas.style.position="absolute",this.minimal?e.canvas.style.display="none":(e.canvas.style.display="block",this.horizontal?(e.canvas.style.top="0px",e.canvas.style.left=r*e.WIDTH/e.PR+"px"):(e.canvas.style.left="0px",e.canvas.style.top=r*e.HEIGHT/e.PR+"px"))}addPanel(e,r){return e.canvas&&(this.container.appendChild(e.canvas),this.resizePanel(e,r)),e}showPanel(e){for(let r=0;r<this.container.children.length;r++){let n=this.container.children[r];n.style.display=r===e?"block":"none"}this.mode=e}init(e){if(!e){console.error('Stats: The "canvas" parameter is undefined.');return}if(e instanceof WebGL2RenderingContext)this.gl=e;else if(e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas){if(this.gl=e.getContext("webgl2"),!this.gl){console.error("Stats: Unable to obtain WebGL2 context.");return}}else{console.error("Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.");return}this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new lh.Panel("GPU","#ff0","#220"),2))}begin(){if(this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)){if(this.query){let e=this.gl.getQueryParameter(this.query,this.gl.QUERY_RESULT_AVAILABLE);if(this.disjoint=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT),e&&!this.disjoint){this.ns=this.gl.getQueryParameter(this.query,this.gl.QUERY_RESULT);let r=this.ns*1e-6;(e||this.disjoint)&&(this.gl.deleteQuery(this.query),this.query=null),e&&this.addToAverage(r,this.averageGpu)}}this.query||(this.queryCreated=!0,this.query=this.gl.createQuery(),this.query&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.query))}}end(){this.beginTime=this.endInternal(),this.endProfiling("cpu-started","cpu-finished","cpu-duration",this.averageCpu),!(!this.gl||!this.ext)&&this.queryCreated&&this.gl.getQuery(this.ext.TIME_ELAPSED_EXT,this.gl.CURRENT_QUERY)&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT)}endInternal(){this.frames++;let e=(performance||Date).now();if(e>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.prevCpuTime=e),e>=this.prevTime+1e3){let r=this.frames*1e3/(e-this.prevTime);this.fpsPanel.update(r,r,100,100,0),this.prevTime=e,this.frames=0}return e}addToAverage(e,r){r.logs.push(e),r.logs.length>this.samplesLog&&r.logs.shift(),r.graph.push(e),r.graph.length>this.samplesGraph&&r.graph.shift()}beginProfiling(e){window.performance&&window.performance.mark(e)}endProfiling(e,r,n,i){if(window.performance&&r){window.performance.mark(r);let o=performance.measure(n,e,r);this.addToAverage(o.duration,i)}}updatePanel(e,r){if(r.logs.length>0){let n=0,i=.01;for(let p=0;p<r.logs.length;p++)n+=r.logs[p],r.logs[p]>i&&(i=r.logs[p]);let o=0,s=.01;for(let p=0;p<r.graph.length;p++)o+=r.graph[p],r.graph[p]>s&&(s=r.graph[p]);e&&e.update(n/Math.min(r.logs.length,this.samplesLog),o/Math.min(r.graph.length,this.samplesGraph),i,s,this.precision)}}};q6.Panel=ph;var Z6=q6;function qU({className:t,parent:e,...r}){let n=KU(o=>o.gl),i=ch.useMemo(()=>{let o=new Z6({...r});return o.init(n.domElement),o},[n]);return ch.useEffect(()=>{if(i){let o=e&&e.current||document.body;o?.appendChild(i.container),t&&i.container.classList.add(...t.split(" ").filter(l=>l));let s=XU(()=>i.begin()),p=JU(()=>i.end());return()=>{o?.removeChild(i.container),s(),p()}}},[e,i,t]),null}import{DepthTexture as ZU,DepthFormat as $U,UnsignedShortType as ej}from"three";import*as ex from"react";import{useThree as $6,useFrame as tj}from"@react-three/fiber";function rj({size:t=256,frames:e=1/0}={}){let r=$6(u=>u.viewport.dpr),{width:n,height:i}=$6(u=>u.size),o=t||n*r,s=t||i*r,p=ex.useMemo(()=>{let u=new ZU(o,s);return u.format=$U,u.type=ej,{depthTexture:u}},[o,s]),l=0,c=zr(o,s,p);return tj(u=>{(e===1/0||l<e)&&(u.gl.setRenderTarget(c),u.gl.render(u.scene,u.camera),u.gl.setRenderTarget(null),l++)}),c.depthTexture}import{useThree as oj}from"@react-three/fiber";function ij(t,e,r=1){let n=oj(s=>s.viewport),i=e*(n.aspect>t/e?n.width/t:n.height/e);return[t*(n.aspect>t/e?n.width/t:n.height/e)*r,i*r,1]}import*as tx from"react";import{Raycaster as nj,Camera as aj}from"three";import{useThree as sj,applyProps as pj}from"@react-three/fiber";function lj(t,e){let r=sj(i=>i.pointer),[n]=tx.useState(()=>{let i=new nj;return e&&pj(i,e,{}),function(o,s){i.setFromCamera(r,t instanceof aj?t:t.current);let p=this.constructor.prototype.raycast.bind(this);p&&p(i,s)}});return n}function R2(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(c){try{l(n.next(c))}catch(u){o(u)}}function p(c){try{l(n.throw(c))}catch(u){o(u)}}function l(c){var u;c.done?i(c.value):(u=c.value,u instanceof r?u:new r((function(d){d(u)}))).then(s,p)}l((n=n.apply(t,e||[])).next())}))}var cj=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function rx(t){return t=t.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}var ix=typeof window>"u",Vn=(()=>{if(ix)return;let{userAgent:t,platform:e,maxTouchPoints:r}=window.navigator,n=/(iphone|ipod|ipad)/i.test(t),i=e==="iPad"||e==="MacIntel"&&r>0&&!window.MSStream;return{isIpad:i,isMobile:/android/i.test(t)||n||i,isSafari12:/Version\/12.+Safari/.test(t),isFirefox:/Firefox/.test(t)}})();function dj(t,e,r){if(!r)return[e];let n=(function(c){let u=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,d=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,f=c.createShader(35633),g=c.createShader(35632),v=c.createProgram();if(!(g&&f&&v))return;c.shaderSource(f,u),c.shaderSource(g,d),c.compileShader(f),c.compileShader(g),c.attachShader(v,f),c.attachShader(v,g),c.linkProgram(v),c.detachShader(v,f),c.detachShader(v,g),c.deleteShader(f),c.deleteShader(g),c.useProgram(v);let A=c.createBuffer();c.bindBuffer(34962,A),c.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);let m=c.getAttribLocation(v,"aPosition");c.vertexAttribPointer(m,3,5126,!1,0,0),c.enableVertexAttribArray(m),c.clearColor(1,1,1,1),c.clear(16384),c.viewport(0,0,1,1),c.drawArrays(4,0,3);let h=new Uint8Array(4);return c.readPixels(0,0,1,1,6408,5121,h),c.deleteProgram(v),c.deleteBuffer(A),h.join("")})(t),i="801621810",o="8016218135",s="80162181161",p=Vn?.isIpad?[["a7",s,12],["a8",o,15],["a8x",o,15],["a9",o,15],["a9x",o,15],["a10",o,15],["a10x",o,15],["a12",i,15],["a12x",i,15],["a12z",i,15],["a14",i,15],["a15",i,15],["m1",i,15],["m2",i,15]]:[["a7",s,12],["a8",o,12],["a9",o,15],["a10",o,15],["a11",i,15],["a12",i,15],["a13",i,15],["a14",i,15],["a15",i,15],["a16",i,15],["a17",i,15]],l;return n==="80162181255"?l=p.filter((([,,c])=>c>=14)):(l=p.filter((([,c])=>c===n)),l.length||(l=p)),l.map((([c])=>`apple ${c} gpu`))}var dh=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}},B2=[],ox=[];function uj(t,e){if(t===e)return 0;let r=t;t.length>e.length&&(t=e,e=r);let n=t.length,i=e.length;for(;n>0&&t.charCodeAt(~-n)===e.charCodeAt(~-i);)n--,i--;let o,s=0;for(;s<n&&t.charCodeAt(s)===e.charCodeAt(s);)s++;if(n-=s,i-=s,n===0)return i;let p,l,c=0,u=0,d=0;for(;u<n;)ox[u]=t.charCodeAt(s+u),B2[u]=++u;for(;d<i;)for(o=e.charCodeAt(s+d),p=d++,c=d,u=0;u<n;u++)l=o===ox[u]?p:p+1,p=B2[u],c=B2[u]=p>c?l>c?c+1:l:l>p?p+1:l;return c}function fj(t){return t!=null}var nx=({mobileTiers:t=[0,15,30,60],desktopTiers:e=[0,15,30,60],override:r={},glContext:n,failIfMajorPerformanceCaveat:i=!1,benchmarksURL:o="https://unpkg.com/detect-gpu@5.0.70/dist/benchmarks"}={})=>R2(void 0,void 0,void 0,(function*(){let s={};if(ix)return{tier:0,type:"SSR"};let{isIpad:p=!!Vn?.isIpad,isMobile:l=!!Vn?.isMobile,screenSize:c=window.screen,loadBenchmarks:u=(_=>R2(void 0,void 0,void 0,(function*(){let C=yield fetch(`${o}/${_}`).then((B=>B.json()));if(parseInt(C.shift().split(".")[0],10)<4)throw new dh("Detect GPU benchmark data is out of date. Please update to version 4x");return C})))}=r,{renderer:d}=r,f=(_,C,B,R,M)=>({device:M,fps:R,gpu:B,isMobile:l,tier:_,type:C}),g,v="";if(d)d=rx(d),g=[d];else{let _=n||(function(B,R=!1){let M={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:R,powerPreference:"high-performance",stencil:!1};B&&delete M.powerPreference;let x=window.document.createElement("canvas"),T=x.getContext("webgl",M)||x.getContext("experimental-webgl",M);return T??void 0})(Vn?.isSafari12,i);if(!_)return f(0,"WEBGL_UNSUPPORTED");let C=Vn?.isFirefox?null:_.getExtension("WEBGL_debug_renderer_info");if(d=C?_.getParameter(C.UNMASKED_RENDERER_WEBGL):_.getParameter(_.RENDERER),!d)return f(1,"FALLBACK");v=d,d=rx(d),g=(function(B,R,M){return R==="apple gpu"?dj(B,R,M):[R]})(_,d,l)}let A=(yield Promise.all(g.map((function(_){var C;return R2(this,void 0,void 0,(function*(){let B=(V=>{let N=l?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce","adreno"];for(let P of N)if(V.includes(P))return P})(_);if(!B)return;let R=`${l?"m":"d"}-${B}${p?"-ipad":""}.json`,M=s[R]=(C=s[R])!==null&&C!==void 0?C:u(R),x;try{x=yield M}catch(V){if(V instanceof dh)throw V;return}let T=(function(V){var N;let P=(V=V.replace(/\([^)]+\)/,"")).match(/\d+/)||V.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(N=P?.join("").replace(/\W|amd/g,""))!==null&&N!==void 0?N:""})(_),w=x.filter((([,V])=>V===T));w.length||(w=x.filter((([V])=>V.includes(_))));let S=w.length;if(S===0)return;let I=_.split(/[.,()\[\]/\s]/g).sort().filter(((V,N,P)=>N===0||V!==P[N-1])).join(" "),G,[H,,,,X]=S>1?w.map((V=>[V,uj(I,V[2])])).sort((([,V],[,N])=>V-N))[0][0]:w[0],Z=Number.MAX_VALUE,{devicePixelRatio:z}=window,Y=c.width*z*c.height*z;for(let V of X){let[N,P]=V,k=N*P,O=Math.abs(Y-k);O<Z&&(Z=O,G=V)}if(!G)return;let[,,L,Q]=G;return[Z,L,H,Q]}))})))).filter(fj).sort((([_=Number.MAX_VALUE,C],[B=Number.MAX_VALUE,R])=>_===B?C-R:_-B));if(!A.length){let _=cj.find((C=>d.includes(C)));return _?f(0,"BLOCKLISTED",_):f(1,"FALLBACK",`${d} (${v})`)}let[,m,h,y]=A[0];if(m===-1)return f(0,"BLOCKLISTED",h,m,y);let E=l?t:e,b=0;for(let _=0;_<E.length;_++)m>=E[_]&&(b=_);return f(b,"BENCHMARK",h,m,y)}));var gj=t=>Oo(()=>nx(t),["useDetectGPU"]);import*as uh from"react";import{useThree as hj,useFrame as mj}from"@react-three/fiber";function x2(t,e,...r){let n=uh.useRef(),i=hj(o=>o.scene);return uh.useLayoutEffect(()=>{let o;if(t&&t!=null&&t.current&&e&&(n.current=o=new e(t.current,...r)),o)return o.traverse(s=>s.raycast=()=>null),i.add(o),()=>{n.current=void 0,i.remove(o),o.dispose==null||o.dispose()}},[i,e,t,...r]),mj(()=>{var o;return void((o=n.current)==null||o.update==null?void 0:o.update())}),n}import{useThree as MH}from"@react-three/fiber";import*as _n from"react";import{Mesh as lM}from"three";import{BufferAttribute as aH,Box3 as eM,FrontSide as Zx}from"three";var ax=Math.pow(2,-24),fh=Symbol("SKIP_GENERATION");import{BufferAttribute as Aj}from"three";function M2(t){return t.index?t.index.count:t.attributes.position.count}function Yn(t){return M2(t)/3}function w2(t,e=ArrayBuffer){return t>65535?new Uint32Array(new e(4*t)):new Uint16Array(new e(2*t))}function sx(t,e){if(!t.index){let r=t.attributes.position.count,n=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,i=w2(r,n);t.setIndex(new Aj(i,1));for(let o=0;o<r;o++)i[o]=o}}function T2(t){let e=Yn(t),r=t.drawRange,n=r.start/3,i=(r.start+r.count)/3,o=Math.max(0,n),s=Math.min(e,i)-o;return[{offset:Math.floor(o),count:Math.floor(s)}]}function S2(t){if(!t.groups||!t.groups.length)return T2(t);let e=[],r=new Set,n=t.drawRange,i=n.start/3,o=(n.start+n.count)/3;for(let p of t.groups){let l=p.start/3,c=(p.start+p.count)/3;r.add(Math.max(i,l)),r.add(Math.min(o,c))}let s=Array.from(r.values()).sort((p,l)=>p-l);for(let p=0;p<s.length-1;p++){let l=s[p],c=s[p+1];e.push({offset:Math.floor(l),count:Math.floor(c-l)})}return e}function px(t){if(t.groups.length===0)return!1;let e=Yn(t),r=S2(t).sort((o,s)=>o.offset-s.offset),n=r[r.length-1];n.count=Math.min(e-n.offset,n.count);let i=0;return r.forEach(({count:o})=>i+=o),e!==i}function Wt(t,e,r){return r.min.x=e[t],r.min.y=e[t+1],r.min.z=e[t+2],r.max.x=e[t+3],r.max.y=e[t+4],r.max.z=e[t+5],r}function lx(t){t[0]=t[1]=t[2]=1/0,t[3]=t[4]=t[5]=-1/0}function I2(t){let e=-1,r=-1/0;for(let n=0;n<3;n++){let i=t[n+3]-t[n];i>r&&(r=i,e=n)}return e}function F2(t,e){e.set(t)}function O2(t,e,r){let n,i;for(let o=0;o<3;o++){let s=o+3;n=t[o],i=e[o],r[o]=n<i?n:i,n=t[s],i=e[s],r[s]=n>i?n:i}}function eu(t,e,r){for(let n=0;n<3;n++){let i=e[t+2*n],o=e[t+2*n+1],s=i-o,p=i+o;s<r[n]&&(r[n]=s),p>r[n+3]&&(r[n+3]=p)}}function gl(t){let e=t[3]-t[0],r=t[4]-t[1],n=t[5]-t[2];return 2*(e*r+r*n+n*e)}function gh(t,e,r,n,i=null){let o=1/0,s=1/0,p=1/0,l=-1/0,c=-1/0,u=-1/0,d=1/0,f=1/0,g=1/0,v=-1/0,A=-1/0,m=-1/0,h=i!==null;for(let y=e*6,E=(e+r)*6;y<E;y+=6){let b=t[y+0],_=t[y+1],C=b-_,B=b+_;C<o&&(o=C),B>l&&(l=B),h&&b<d&&(d=b),h&&b>v&&(v=b);let R=t[y+2],M=t[y+3],x=R-M,T=R+M;x<s&&(s=x),T>c&&(c=T),h&&R<f&&(f=R),h&&R>A&&(A=R);let w=t[y+4],S=t[y+5],I=w-S,G=w+S;I<p&&(p=I),G>u&&(u=G),h&&w<g&&(g=w),h&&w>m&&(m=w)}n[0]=o,n[1]=s,n[2]=p,n[3]=l,n[4]=c,n[5]=u,h&&(i[0]=d,i[1]=f,i[2]=g,i[3]=v,i[4]=A,i[5]=m)}function cx(t,e,r,n){let i=1/0,o=1/0,s=1/0,p=-1/0,l=-1/0,c=-1/0;for(let u=e*6,d=(e+r)*6;u<d;u+=6){let f=t[u+0];f<i&&(i=f),f>p&&(p=f);let g=t[u+2];g<o&&(o=g),g>l&&(l=g);let v=t[u+4];v<s&&(s=v),v>c&&(c=v)}n[0]=i,n[1]=o,n[2]=s,n[3]=p,n[4]=l,n[5]=c}function dx(t,e){lx(e);let r=t.attributes.position,n=t.index?t.index.array:null,i=Yn(t),o=new Float32Array(i*6),s=r.normalized,p=r.array,l=r.offset||0,c=3;r.isInterleavedBufferAttribute&&(c=r.data.stride);let u=["getX","getY","getZ"];for(let d=0;d<i;d++){let f=d*3,g=d*6,v=f+0,A=f+1,m=f+2;n&&(v=n[v],A=n[A],m=n[m]),s||(v=v*c+l,A=A*c+l,m=m*c+l);for(let h=0;h<3;h++){let y,E,b;s?(y=r[u[h]](v),E=r[u[h]](A),b=r[u[h]](m)):(y=p[v+h],E=p[A+h],b=p[m+h]);let _=y;E<_&&(_=E),b<_&&(_=b);let C=y;E>C&&(C=E),b>C&&(C=b);let B=(C-_)/2,R=h*2;o[g+R+0]=_+B,o[g+R+1]=B+(Math.abs(_)+B)*ax,_<e[h]&&(e[h]=_),C>e[h+3]&&(e[h+3]=C)}}return o}var da=32,vj=(t,e)=>t.candidate-e.candidate,Ka=new Array(da).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),hh=new Float32Array(6);function gx(t,e,r,n,i,o){let s=-1,p=0;if(o===0)s=I2(e),s!==-1&&(p=(e[s]+e[s+3])/2);else if(o===1)s=I2(t),s!==-1&&(p=Ej(r,n,i,s));else if(o===2){let l=gl(t),c=1.25*i,u=n*6,d=(n+i)*6;for(let f=0;f<3;f++){let g=e[f],m=(e[f+3]-g)/da;if(i<da/4){let h=[...Ka];h.length=i;let y=0;for(let b=u;b<d;b+=6,y++){let _=h[y];_.candidate=r[b+2*f],_.count=0;let{bounds:C,leftCacheBounds:B,rightCacheBounds:R}=_;for(let M=0;M<3;M++)R[M]=1/0,R[M+3]=-1/0,B[M]=1/0,B[M+3]=-1/0,C[M]=1/0,C[M+3]=-1/0;eu(b,r,C)}h.sort(vj);let E=i;for(let b=0;b<E;b++){let _=h[b];for(;b+1<E&&h[b+1].candidate===_.candidate;)h.splice(b+1,1),E--}for(let b=u;b<d;b+=6){let _=r[b+2*f];for(let C=0;C<E;C++){let B=h[C];_>=B.candidate?eu(b,r,B.rightCacheBounds):(eu(b,r,B.leftCacheBounds),B.count++)}}for(let b=0;b<E;b++){let _=h[b],C=_.count,B=i-_.count,R=_.leftCacheBounds,M=_.rightCacheBounds,x=0;C!==0&&(x=gl(R)/l);let T=0;B!==0&&(T=gl(M)/l);let w=1+1.25*(x*C+T*B);w<c&&(s=f,c=w,p=_.candidate)}}else{for(let E=0;E<da;E++){let b=Ka[E];b.count=0,b.candidate=g+m+E*m;let _=b.bounds;for(let C=0;C<3;C++)_[C]=1/0,_[C+3]=-1/0}for(let E=u;E<d;E+=6){let C=~~((r[E+2*f]-g)/m);C>=da&&(C=da-1);let B=Ka[C];B.count++,eu(E,r,B.bounds)}let h=Ka[da-1];F2(h.bounds,h.rightCacheBounds);for(let E=da-2;E>=0;E--){let b=Ka[E],_=Ka[E+1];O2(b.bounds,_.rightCacheBounds,b.rightCacheBounds)}let y=0;for(let E=0;E<da-1;E++){let b=Ka[E],_=b.count,C=b.bounds,R=Ka[E+1].rightCacheBounds;_!==0&&(y===0?F2(C,hh):O2(C,hh,hh)),y+=_;let M=0,x=0;y!==0&&(M=gl(hh)/l);let T=i-y;T!==0&&(x=gl(R)/l);let w=1+1.25*(M*y+x*T);w<c&&(s=f,c=w,p=b.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${o} used.`);return{axis:s,pos:p}}function Ej(t,e,r,n){let i=0;for(let o=e,s=e+r;o<s;o++)i+=t[o*6+n*2];return i/r}var Js=class{constructor(){}};function hx(t,e,r,n,i,o){let s=n,p=n+i-1,l=o.pos,c=o.axis*2;for(;;){for(;s<=p&&r[s*6+c]<l;)s++;for(;s<=p&&r[p*6+c]>=l;)p--;if(s<p){for(let u=0;u<3;u++){let d=e[s*3+u];e[s*3+u]=e[p*3+u],e[p*3+u]=d}for(let u=0;u<6;u++){let d=r[s*6+u];r[s*6+u]=r[p*6+u],r[p*6+u]=d}s++,p--}else return s}}function mx(t,e,r,n,i,o){let s=n,p=n+i-1,l=o.pos,c=o.axis*2;for(;;){for(;s<=p&&r[s*6+c]<l;)s++;for(;s<=p&&r[p*6+c]>=l;)p--;if(s<p){let u=t[s];t[s]=t[p],t[p]=u;for(let d=0;d<6;d++){let f=r[s*6+d];r[s*6+d]=r[p*6+d],r[p*6+d]=f}s++,p--}else return s}}function bj(t,e){let r=(t.index?t.index.count:t.attributes.position.count)/3,n=r>2**16,i=n?4:2,o=e?new SharedArrayBuffer(r*i):new ArrayBuffer(r*i),s=n?new Uint32Array(o):new Uint16Array(o);for(let p=0,l=s.length;p<l;p++)s[p]=p;return s}function _j(t,e){let r=t.geometry,n=r.index?r.index.array:null,i=e.maxDepth,o=e.verbose,s=e.maxLeafTris,p=e.strategy,l=e.onProgress,c=Yn(r),u=t._indirectBuffer,d=!1,f=new Float32Array(6),g=new Float32Array(6),v=dx(r,f),A=e.indirect?mx:hx,m=[],h=e.indirect?T2(r):S2(r);if(h.length===1){let b=h[0],_=new Js;_.boundingData=f,cx(v,b.offset,b.count,g),E(_,b.offset,b.count,g),m.push(_)}else for(let b of h){let _=new Js;_.boundingData=new Float32Array(6),gh(v,b.offset,b.count,_.boundingData,g),E(_,b.offset,b.count,g),m.push(_)}return m;function y(b){l&&l(b/c)}function E(b,_,C,B=null,R=0){if(!d&&R>=i&&(d=!0,o&&(console.warn(`MeshBVH: Max depth of ${i} reached when generating BVH. Consider increasing maxDepth.`),console.warn(r))),C<=s||R>=i)return y(_+C),b.offset=_,b.count=C,b;let M=gx(b.boundingData,B,v,_,C,p);if(M.axis===-1)return y(_+C),b.offset=_,b.count=C,b;let x=A(u,n,v,_,C,M);if(x===_||x===_+C)y(_+C),b.offset=_,b.count=C;else{b.splitAxis=M.axis;let T=new Js,w=_,S=x-_;b.left=T,T.boundingData=new Float32Array(6),gh(v,w,S,T.boundingData,g),E(T,w,S,g,R+1);let I=new Js,G=x,H=C-S;b.right=I,I.boundingData=new Float32Array(6),gh(v,G,H,I.boundingData,g),E(I,G,H,g,R+1)}return b}}function Ax(t,e){let r=t.geometry;e.indirect&&(t._indirectBuffer=bj(r,e.useSharedArrayBuffer),px(r)&&!e.verbose&&console.warn('MeshBVH: Provided geometry contains groups that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),t._indirectBuffer||sx(r,e);let n=_j(t,e),i,o,s,p=[],l=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let d=0;d<n.length;d++){let f=n[d],g=c(f),v=new l(32*g);i=new Float32Array(v),o=new Uint32Array(v),s=new Uint16Array(v),u(0,f),p.push(v)}t._roots=p;return;function c(d){return d.count?1:1+c(d.left)+c(d.right)}function u(d,f){let g=d/4,v=d/2,A=!!f.count,m=f.boundingData;for(let h=0;h<6;h++)i[g+h]=m[h];if(A){let h=f.offset,y=f.count;return o[g+6]=h,s[v+14]=y,s[v+15]=65535,d+32}else{let h=f.left,y=f.right,E=f.splitAxis,b;if(b=u(d+32,h),b/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return o[g+6]=b/4,b=u(b,y),o[g+7]=E,b}}}import{Vector3 as Xa,Matrix4 as vx,Line3 as Ex}from"three";import{Vector3 as Cj}from"three";var oi=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,r){let n=1/0,i=-1/0;for(let o=0,s=e.length;o<s;o++){let l=e[o][r];n=l<n?l:n,i=l>i?l:i}this.min=n,this.max=i}setFromPoints(e,r){let n=1/0,i=-1/0;for(let o=0,s=r.length;o<s;o++){let p=r[o],l=e.dot(p);n=l<n?l:n,i=l>i?l:i}this.min=n,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}};oi.prototype.setFromBox=(function(){let t=new Cj;return function(r,n){let i=n.min,o=n.max,s=1/0,p=-1/0;for(let l=0;l<=1;l++)for(let c=0;c<=1;c++)for(let u=0;u<=1;u++){t.x=i.x*l+o.x*(1-l),t.y=i.y*c+o.y*(1-c),t.z=i.z*u+o.z*(1-u);let d=r.dot(t);s=Math.min(d,s),p=Math.max(d,p)}this.min=s,this.max=p}})();var Wae=(function(){let t=new oi;return function(r,n){let i=r.points,o=r.satAxes,s=r.satBounds,p=n.points,l=n.satAxes,c=n.satBounds;for(let u=0;u<3;u++){let d=s[u],f=o[u];if(t.setFromPoints(f,p),d.isSeparated(t))return!1}for(let u=0;u<3;u++){let d=c[u],f=l[u];if(t.setFromPoints(f,i),d.isSeparated(t))return!1}}})();import{Triangle as wj,Vector3 as zi,Line3 as hl,Sphere as Tj,Plane as Sj}from"three";import{Vector3 as Zs,Vector2 as Rj,Plane as Bj,Line3 as xj}from"three";var Mj=(function(){let t=new Zs,e=new Zs,r=new Zs;return function(i,o,s){let p=i.start,l=t,c=o.start,u=e;r.subVectors(p,c),t.subVectors(i.end,i.start),e.subVectors(o.end,o.start);let d=r.dot(u),f=u.dot(l),g=u.dot(u),v=r.dot(l),m=l.dot(l)*g-f*f,h,y;m!==0?h=(d*f-v*g)/m:h=0,y=(d+h*f)/g,s.x=h,s.y=y}})(),ru=(function(){let t=new Rj,e=new Zs,r=new Zs;return function(i,o,s,p){Mj(i,o,t);let l=t.x,c=t.y;if(l>=0&&l<=1&&c>=0&&c<=1){i.at(l,s),o.at(c,p);return}else if(l>=0&&l<=1){c<0?o.at(0,p):o.at(1,p),i.closestPointToPoint(p,!0,s);return}else if(c>=0&&c<=1){l<0?i.at(0,s):i.at(1,s),o.closestPointToPoint(s,!0,p);return}else{let u;l<0?u=i.start:u=i.end;let d;c<0?d=o.start:d=o.end;let f=e,g=r;if(i.closestPointToPoint(d,!0,e),o.closestPointToPoint(u,!0,r),f.distanceToSquared(d)<=g.distanceToSquared(u)){s.copy(f),p.copy(d);return}else{s.copy(u),p.copy(g);return}}}})(),yx=(function(){let t=new Zs,e=new Zs,r=new Bj,n=new xj;return function(o,s){let{radius:p,center:l}=o,{a:c,b:u,c:d}=s;if(n.start=c,n.end=u,n.closestPointToPoint(l,!0,t).distanceTo(l)<=p||(n.start=c,n.end=d,n.closestPointToPoint(l,!0,t).distanceTo(l)<=p)||(n.start=u,n.end=d,n.closestPointToPoint(l,!0,t).distanceTo(l)<=p))return!0;let A=s.getPlane(r);if(Math.abs(A.distanceToPoint(l))<=p){let h=A.projectPoint(l,e);if(s.containsPoint(h))return!0}return!1}})();var Ij=1e-15;function D2(t){return Math.abs(t)<Ij}var Ro=class extends wj{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new zi),this.satBounds=new Array(4).fill().map(()=>new oi),this.points=[this.a,this.b,this.c],this.sphere=new Tj,this.plane=new Sj,this.needsUpdate=!0}intersectsSphere(e){return yx(e,this)}update(){let e=this.a,r=this.b,n=this.c,i=this.points,o=this.satAxes,s=this.satBounds,p=o[0],l=s[0];this.getNormal(p),l.setFromPoints(p,i);let c=o[1],u=s[1];c.subVectors(e,r),u.setFromPoints(c,i);let d=o[2],f=s[2];d.subVectors(r,n),f.setFromPoints(d,i);let g=o[3],v=s[3];g.subVectors(n,e),v.setFromPoints(g,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(p,e),this.needsUpdate=!1}};Ro.prototype.closestPointToSegment=(function(){let t=new zi,e=new zi,r=new hl;return function(i,o=null,s=null){let{start:p,end:l}=i,c=this.points,u,d=1/0;for(let f=0;f<3;f++){let g=(f+1)%3;r.start.copy(c[f]),r.end.copy(c[g]),ru(r,i,t,e),u=t.distanceToSquared(e),u<d&&(d=u,o&&o.copy(t),s&&s.copy(e))}return this.closestPointToPoint(p,t),u=p.distanceToSquared(t),u<d&&(d=u,o&&o.copy(t),s&&s.copy(p)),this.closestPointToPoint(l,t),u=l.distanceToSquared(t),u<d&&(d=u,o&&o.copy(t),s&&s.copy(l)),Math.sqrt(d)}})();Ro.prototype.intersectsTriangle=(function(){let t=new Ro,e=new Array(3),r=new Array(3),n=new oi,i=new oi,o=new zi,s=new zi,p=new zi,l=new zi,c=new zi,u=new hl,d=new hl,f=new hl,g=new zi;function v(A,m,h){let y=A.points,E=0,b=-1;for(let _=0;_<3;_++){let{start:C,end:B}=u;C.copy(y[_]),B.copy(y[(_+1)%3]),u.delta(s);let R=D2(m.distanceToPoint(C));if(D2(m.normal.dot(s))&&R){h.copy(u),E=2;break}let M=m.intersectLine(u,g);if(!M&&R&&g.copy(C),(M||R)&&!D2(g.distanceTo(B))){if(E<=1)(E===1?h.start:h.end).copy(g),R&&(b=E);else if(E>=2){(b===1?h.start:h.end).copy(g),E=2;break}if(E++,E===2&&b===-1)break}}return E}return function(m,h=null,y=!1){this.needsUpdate&&this.update(),m.isExtendedTriangle?m.needsUpdate&&m.update():(t.copy(m),t.update(),m=t);let E=this.plane,b=m.plane;if(Math.abs(E.normal.dot(b.normal))>1-1e-10){let _=this.satBounds,C=this.satAxes;r[0]=m.a,r[1]=m.b,r[2]=m.c;for(let M=0;M<4;M++){let x=_[M],T=C[M];if(n.setFromPoints(T,r),x.isSeparated(n))return!1}let B=m.satBounds,R=m.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let M=0;M<4;M++){let x=B[M],T=R[M];if(n.setFromPoints(T,e),x.isSeparated(n))return!1}for(let M=0;M<4;M++){let x=C[M];for(let T=0;T<4;T++){let w=R[T];if(o.crossVectors(x,w),n.setFromPoints(o,e),i.setFromPoints(o,r),n.isSeparated(i))return!1}}return h&&(y||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),h.start.set(0,0,0),h.end.set(0,0,0)),!0}else{let _=v(this,b,d);if(_===1&&m.containsPoint(d.end))return h&&(h.start.copy(d.end),h.end.copy(d.end)),!0;if(_!==2)return!1;let C=v(m,E,f);if(C===1&&this.containsPoint(f.end))return h&&(h.start.copy(f.end),h.end.copy(f.end)),!0;if(C!==2)return!1;if(d.delta(p),f.delta(l),p.dot(l)<0){let S=f.start;f.start=f.end,f.end=S}let B=d.start.dot(p),R=d.end.dot(p),M=f.start.dot(p),x=f.end.dot(p),T=R<M,w=B<x;return B!==x&&M!==R&&T===w?!1:(h&&(c.subVectors(d.start,f.start),c.dot(p)>0?h.start.copy(d.start):h.start.copy(f.start),c.subVectors(d.end,f.end),c.dot(p)<0?h.end.copy(d.end):h.end.copy(f.end)),!0)}}})();Ro.prototype.distanceToPoint=(function(){let t=new zi;return function(r){return this.closestPointToPoint(r,t),r.distanceTo(t)}})();Ro.prototype.distanceToTriangle=(function(){let t=new zi,e=new zi,r=["a","b","c"],n=new hl,i=new hl;return function(s,p=null,l=null){let c=p||l?n:null;if(this.intersectsTriangle(s,c))return(p||l)&&(p&&c.getCenter(p),l&&c.getCenter(l)),0;let u=1/0;for(let d=0;d<3;d++){let f,g=r[d],v=s[g];this.closestPointToPoint(v,t),f=v.distanceToSquared(t),f<u&&(u=f,p&&p.copy(t),l&&l.copy(v));let A=this[g];s.closestPointToPoint(A,t),f=A.distanceToSquared(t),f<u&&(u=f,p&&p.copy(A),l&&l.copy(t))}for(let d=0;d<3;d++){let f=r[d],g=r[(d+1)%3];n.set(this[f],this[g]);for(let v=0;v<3;v++){let A=r[v],m=r[(v+1)%3];i.set(s[A],s[m]),ru(n,i,t,e);let h=t.distanceToSquared(e);h<u&&(u=h,p&&p.copy(t),l&&l.copy(e))}}return Math.sqrt(u)}})();var Sr=class{constructor(e,r,n){this.isOrientedBox=!0,this.min=new Xa,this.max=new Xa,this.matrix=new vx,this.invMatrix=new vx,this.points=new Array(8).fill().map(()=>new Xa),this.satAxes=new Array(3).fill().map(()=>new Xa),this.satBounds=new Array(3).fill().map(()=>new oi),this.alignedSatBounds=new Array(3).fill().map(()=>new oi),this.needsUpdate=!1,e&&this.min.copy(e),r&&this.max.copy(r),n&&this.matrix.copy(n)}set(e,r,n){this.min.copy(e),this.max.copy(r),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Sr.prototype.update=(function(){return function(){let e=this.matrix,r=this.min,n=this.max,i=this.points;for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)for(let d=0;d<=1;d++){let f=1*c|2*u|4*d,g=i[f];g.x=c?n.x:r.x,g.y=u?n.y:r.y,g.z=d?n.z:r.z,g.applyMatrix4(e)}let o=this.satBounds,s=this.satAxes,p=i[0];for(let c=0;c<3;c++){let u=s[c],d=o[c],f=1<<c,g=i[f];u.subVectors(p,g),d.setFromPoints(u,i)}let l=this.alignedSatBounds;l[0].setFromPointsField(i,"x"),l[1].setFromPointsField(i,"y"),l[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}})();Sr.prototype.intersectsBox=(function(){let t=new oi;return function(r){this.needsUpdate&&this.update();let n=r.min,i=r.max,o=this.satBounds,s=this.satAxes,p=this.alignedSatBounds;if(t.min=n.x,t.max=i.x,p[0].isSeparated(t)||(t.min=n.y,t.max=i.y,p[1].isSeparated(t))||(t.min=n.z,t.max=i.z,p[2].isSeparated(t)))return!1;for(let l=0;l<3;l++){let c=s[l],u=o[l];if(t.setFromBox(c,r),u.isSeparated(t))return!1}return!0}})();Sr.prototype.intersectsTriangle=(function(){let t=new Ro,e=new Array(3),r=new oi,n=new oi,i=new Xa;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(t.copy(s),t.update(),s=t);let p=this.satBounds,l=this.satAxes;e[0]=s.a,e[1]=s.b,e[2]=s.c;for(let f=0;f<3;f++){let g=p[f],v=l[f];if(r.setFromPoints(v,e),g.isSeparated(r))return!1}let c=s.satBounds,u=s.satAxes,d=this.points;for(let f=0;f<3;f++){let g=c[f],v=u[f];if(r.setFromPoints(v,d),g.isSeparated(r))return!1}for(let f=0;f<3;f++){let g=l[f];for(let v=0;v<4;v++){let A=u[v];if(i.crossVectors(g,A),r.setFromPoints(i,e),n.setFromPoints(i,d),r.isSeparated(n))return!1}}return!0}})();Sr.prototype.closestPointToPoint=(function(){return function(e,r){return this.needsUpdate&&this.update(),r.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),r}})();Sr.prototype.distanceToPoint=(function(){let t=new Xa;return function(r){return this.closestPointToPoint(r,t),r.distanceTo(t)}})();Sr.prototype.distanceToBox=(function(){let t=["x","y","z"],e=new Array(12).fill().map(()=>new Ex),r=new Array(12).fill().map(()=>new Ex),n=new Xa,i=new Xa;return function(s,p=0,l=null,c=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(l||c)&&(s.getCenter(i),this.closestPointToPoint(i,n),s.closestPointToPoint(n,i),l&&l.copy(n),c&&c.copy(i)),0;let u=p*p,d=s.min,f=s.max,g=this.points,v=1/0;for(let m=0;m<8;m++){let h=g[m];i.copy(h).clamp(d,f);let y=h.distanceToSquared(i);if(y<v&&(v=y,l&&l.copy(h),c&&c.copy(i),y<u))return Math.sqrt(y)}let A=0;for(let m=0;m<3;m++)for(let h=0;h<=1;h++)for(let y=0;y<=1;y++){let E=(m+1)%3,b=(m+2)%3,_=h<<E|y<<b,C=1<<m|h<<E|y<<b,B=g[_],R=g[C];e[A].set(B,R);let x=t[m],T=t[E],w=t[b],S=r[A],I=S.start,G=S.end;I[x]=d[x],I[T]=h?d[T]:f[T],I[w]=y?d[w]:f[T],G[x]=f[x],G[T]=h?d[T]:f[T],G[w]=y?d[w]:f[T],A++}for(let m=0;m<=1;m++)for(let h=0;h<=1;h++)for(let y=0;y<=1;y++){i.x=m?f.x:d.x,i.y=h?f.y:d.y,i.z=y?f.z:d.z,this.closestPointToPoint(i,n);let E=i.distanceToSquared(n);if(E<v&&(v=E,l&&l.copy(n),c&&c.copy(i),E<u))return Math.sqrt(E)}for(let m=0;m<12;m++){let h=e[m];for(let y=0;y<12;y++){let E=r[y];ru(h,E,n,i);let b=n.distanceToSquared(i);if(b<v&&(v=b,l&&l.copy(n),c&&c.copy(i),b<u))return Math.sqrt(b)}}return Math.sqrt(v)}})();var Ja=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};var k2=class extends Ja{constructor(){super(()=>new Ro)}},Wo=new k2;import{Box3 as Oj}from"three";function br(t,e){return e[t+15]===65535}function _r(t,e){return e[t+6]}function Ir(t,e){return e[t+14]}function uo(t){return t+8}function Wr(t,e){return e[t+6]}function ml(t,e){return e[t+7]}var L2=class{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;let e=[],r=null;this.setBuffer=n=>{r&&e.push(r),r=n,this.float32Array=new Float32Array(n),this.uint16Array=new Uint16Array(n),this.uint32Array=new Uint32Array(n)},this.clearBuffer=()=>{r=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}},Ct=new L2;var qa,yl,Al=[],Ah=new Ja(()=>new Oj);function bx(t,e,r,n,i,o){qa=Ah.getPrimitive(),yl=Ah.getPrimitive(),Al.push(qa,yl),Ct.setBuffer(t._roots[e]);let s=P2(0,t.geometry,r,n,i,o);Ct.clearBuffer(),Ah.releasePrimitive(qa),Ah.releasePrimitive(yl),Al.pop(),Al.pop();let p=Al.length;return p>0&&(yl=Al[p-1],qa=Al[p-2]),s}function P2(t,e,r,n,i=null,o=0,s=0){let{float32Array:p,uint16Array:l,uint32Array:c}=Ct,u=t*2;if(br(u,l)){let f=_r(t,c),g=Ir(u,l);return Wt(t,p,qa),n(f,g,!1,s,o+t,qa)}else{let x=function(w){let{uint16Array:S,uint32Array:I}=Ct,G=w*2;for(;!br(G,S);)w=uo(w),G=w*2;return _r(w,I)},T=function(w){let{uint16Array:S,uint32Array:I}=Ct,G=w*2;for(;!br(G,S);)w=Wr(w,I),G=w*2;return _r(w,I)+Ir(G,S)},f=uo(t),g=Wr(t,c),v=f,A=g,m,h,y,E;if(i&&(y=qa,E=yl,Wt(v,p,y),Wt(A,p,E),m=i(y),h=i(E),h<m)){v=g,A=f;let w=m;m=h,h=w,y=E}y||(y=qa,Wt(v,p,y));let b=br(v*2,l),_=r(y,b,m,s+1,o+v),C;if(_===2){let w=x(v),I=T(v)-w;C=n(w,I,!0,s+1,o+v,y)}else C=_&&P2(v,e,r,n,i,o,s+1);if(C)return!0;E=yl,Wt(A,p,E);let B=br(A*2,l),R=r(E,B,h,s+1,o+A),M;if(R===2){let w=x(A),I=T(A)-w;M=n(w,I,!0,s+1,o+A,E)}else M=R&&P2(A,e,r,n,i,o,s+1);return!!M}}import{Vector3 as _x}from"three";var ou=new _x,G2=new _x;function Cx(t,e,r={},n=0,i=1/0){let o=n*n,s=i*i,p=1/0,l=null;if(t.shapecast({boundsTraverseOrder:u=>(ou.copy(e).clamp(u.min,u.max),ou.distanceToSquared(e)),intersectsBounds:(u,d,f)=>f<p&&f<s,intersectsTriangle:(u,d)=>{u.closestPointToPoint(e,ou);let f=e.distanceToSquared(ou);return f<p&&(G2.copy(ou),p=f,l=d),f<o}}),p===1/0)return null;let c=Math.sqrt(p);return r.point?r.point.copy(G2):r.point=G2.clone(),r.distance=c,r.faceIndex=l,r}import{Vector3 as ua,Vector2 as iu,Triangle as vh,DoubleSide as Dj,BackSide as kj}from"three";var vl=new ua,El=new ua,bl=new ua,Eh=new iu,bh=new iu,_h=new iu,Rx=new ua,Bx=new ua,xx=new ua,Ch=new ua;function Lj(t,e,r,n,i,o){let s;return o===kj?s=t.intersectTriangle(n,r,e,!0,i):s=t.intersectTriangle(e,r,n,o!==Dj,i),s===null?null:{distance:t.origin.distanceTo(i),point:i.clone()}}function Pj(t,e,r,n,i,o,s,p,l){vl.fromBufferAttribute(e,o),El.fromBufferAttribute(e,s),bl.fromBufferAttribute(e,p);let c=Lj(t,vl,El,bl,Ch,l);if(c){n&&(Eh.fromBufferAttribute(n,o),bh.fromBufferAttribute(n,s),_h.fromBufferAttribute(n,p),c.uv=vh.getInterpolation(Ch,vl,El,bl,Eh,bh,_h,new iu)),i&&(Eh.fromBufferAttribute(i,o),bh.fromBufferAttribute(i,s),_h.fromBufferAttribute(i,p),c.uv1=vh.getInterpolation(Ch,vl,El,bl,Eh,bh,_h,new iu)),r&&(Rx.fromBufferAttribute(r,o),Bx.fromBufferAttribute(r,s),xx.fromBufferAttribute(r,p),c.normal=vh.getInterpolation(Ch,vl,El,bl,Rx,Bx,xx,new ua),c.normal.dot(t.direction)>0&&c.normal.multiplyScalar(-1));let u={a:o,b:s,c:p,normal:new ua,materialIndex:0};vh.getNormal(vl,El,bl,u.normal),c.face=u,c.faceIndex=o}return c}function _l(t,e,r,n,i){let o=n*3,s=o+0,p=o+1,l=o+2,c=t.index;t.index&&(s=c.getX(s),p=c.getX(p),l=c.getX(l));let{position:u,normal:d,uv:f,uv1:g}=t.attributes,v=Pj(r,u,d,f,g,s,p,l,e);return v?(v.faceIndex=n,i&&i.push(v),v):null}import{Vector2 as bse,Vector3 as _se,Triangle as Cse}from"three";function rr(t,e,r,n){let i=t.a,o=t.b,s=t.c,p=e,l=e+1,c=e+2;r&&(p=r.getX(p),l=r.getX(l),c=r.getX(c)),i.x=n.getX(p),i.y=n.getY(p),i.z=n.getZ(p),o.x=n.getX(l),o.y=n.getY(l),o.z=n.getZ(l),s.x=n.getX(c),s.y=n.getY(c),s.z=n.getZ(c)}function Mx(t,e,r,n,i,o){let{geometry:s,_indirectBuffer:p}=t;for(let l=n,c=n+i;l<c;l++)_l(s,e,r,l,o)}function wx(t,e,r,n,i){let{geometry:o,_indirectBuffer:s}=t,p=1/0,l=null;for(let c=n,u=n+i;c<u;c++){let d;d=_l(o,e,r,c),d&&d.distance<p&&(l=d,p=d.distance)}return l}function Tx(t,e,r,n,i,o,s){let{geometry:p}=r,{index:l}=p,c=p.attributes.position;for(let u=t,d=e+t;u<d;u++){let f;if(f=u,rr(s,f*3,l,c),s.needsUpdate=!0,n(s,f,i,o))return!0}return!1}function Sx(t,e=null){e&&Array.isArray(e)&&(e=new Set(e));let r=t.geometry,n=r.index?r.index.array:null,i=r.attributes.position,o,s,p,l,c=0,u=t._roots;for(let f=0,g=u.length;f<g;f++)o=u[f],s=new Uint32Array(o),p=new Uint16Array(o),l=new Float32Array(o),d(0,c),c+=o.byteLength;function d(f,g,v=!1){let A=f*2;if(p[A+15]===65535){let h=s[f+6],y=p[A+14],E=1/0,b=1/0,_=1/0,C=-1/0,B=-1/0,R=-1/0;for(let M=3*h,x=3*(h+y);M<x;M++){let T=n[M],w=i.getX(T),S=i.getY(T),I=i.getZ(T);w<E&&(E=w),w>C&&(C=w),S<b&&(b=S),S>B&&(B=S),I<_&&(_=I),I>R&&(R=I)}return l[f+0]!==E||l[f+1]!==b||l[f+2]!==_||l[f+3]!==C||l[f+4]!==B||l[f+5]!==R?(l[f+0]=E,l[f+1]=b,l[f+2]=_,l[f+3]=C,l[f+4]=B,l[f+5]=R,!0):!1}else{let h=f+8,y=s[f+6],E=h+g,b=y+g,_=v,C=!1,B=!1;e?_||(C=e.has(E),B=e.has(b),_=!C&&!B):(C=!0,B=!0);let R=_||C,M=_||B,x=!1;R&&(x=d(h,g,_));let T=!1;M&&(T=d(y,g,_));let w=x||T;if(w)for(let S=0;S<3;S++){let I=h+S,G=y+S,H=l[I],X=l[I+3],Z=l[G],z=l[G+3];l[f+S]=H<Z?H:Z,l[f+S+3]=X>z?X:z}return w}}}import{Vector3 as zj}from"three";import{Box3 as Gj}from"three";var Ix=new Gj;function Ni(t,e,r,n){return Wt(t,e,Ix),r.intersectBox(Ix,n)}function Fx(t,e,r,n,i,o){let{geometry:s,_indirectBuffer:p}=t;for(let l=n,c=n+i;l<c;l++){let u=p?p[l]:l;_l(s,e,r,u,o)}}function Ox(t,e,r,n,i){let{geometry:o,_indirectBuffer:s}=t,p=1/0,l=null;for(let c=n,u=n+i;c<u;c++){let d;d=_l(o,e,r,s?s[c]:c),d&&d.distance<p&&(l=d,p=d.distance)}return l}function Dx(t,e,r,n,i,o,s){let{geometry:p}=r,{index:l}=p,c=p.attributes.position;for(let u=t,d=e+t;u<d;u++){let f;if(f=r.resolveTriangleIndex(u),rr(s,f*3,l,c),s.needsUpdate=!0,n(s,f,i,o))return!0}return!1}var kx=new zj;function Lx(t,e,r,n,i){Ct.setBuffer(t._roots[e]),z2(0,t,r,n,i),Ct.clearBuffer()}function z2(t,e,r,n,i){let{float32Array:o,uint16Array:s,uint32Array:p}=Ct,l=t*2;if(br(l,s)){let u=_r(t,p),d=Ir(l,s);Mx(e,r,n,u,d,i)}else{let u=uo(t);Ni(u,o,n,kx)&&z2(u,e,r,n,i);let d=Wr(t,p);Ni(d,o,n,kx)&&z2(d,e,r,n,i)}}import{Vector3 as Nj}from"three";var Px=new Nj,Uj=["x","y","z"];function Gx(t,e,r,n){Ct.setBuffer(t._roots[e]);let i=N2(0,t,r,n);return Ct.clearBuffer(),i}function N2(t,e,r,n){let{float32Array:i,uint16Array:o,uint32Array:s}=Ct,p=t*2;if(br(p,o)){let c=_r(t,s),u=Ir(p,o);return wx(e,r,n,c,u)}else{let c=ml(t,s),u=Uj[c],f=n.direction[u]>=0,g,v;f?(g=uo(t),v=Wr(t,s)):(g=Wr(t,s),v=uo(t));let m=Ni(g,i,n,Px)?N2(g,e,r,n):null;if(m){let E=m.point[u];if(f?E<=i[v+c]:E>=i[v+c+3])return m}let y=Ni(v,i,n,Px)?N2(v,e,r,n):null;return m&&y?m.distance<=y.distance?m:y:m||y||null}}import{Box3 as jj,Matrix4 as Hj}from"three";var Rh=new jj,Cl=new Ro,Rl=new Ro,nu=new Hj,zx=new Sr,Bh=new Sr;function Nx(t,e,r,n){Ct.setBuffer(t._roots[e]);let i=U2(0,t,r,n);return Ct.clearBuffer(),i}function U2(t,e,r,n,i=null){let{float32Array:o,uint16Array:s,uint32Array:p}=Ct,l=t*2;if(i===null&&(r.boundingBox||r.computeBoundingBox(),zx.set(r.boundingBox.min,r.boundingBox.max,n),i=zx),br(l,s)){let u=e.geometry,d=u.index,f=u.attributes.position,g=r.index,v=r.attributes.position,A=_r(t,p),m=Ir(l,s);if(nu.copy(n).invert(),r.boundsTree)return Wt(t,o,Bh),Bh.matrix.copy(nu),Bh.needsUpdate=!0,r.boundsTree.shapecast({intersectsBounds:y=>Bh.intersectsBox(y),intersectsTriangle:y=>{y.a.applyMatrix4(n),y.b.applyMatrix4(n),y.c.applyMatrix4(n),y.needsUpdate=!0;for(let E=A*3,b=(m+A)*3;E<b;E+=3)if(rr(Rl,E,d,f),Rl.needsUpdate=!0,y.intersectsTriangle(Rl))return!0;return!1}});for(let h=A*3,y=(m+A)*3;h<y;h+=3){rr(Cl,h,d,f),Cl.a.applyMatrix4(nu),Cl.b.applyMatrix4(nu),Cl.c.applyMatrix4(nu),Cl.needsUpdate=!0;for(let E=0,b=g.count;E<b;E+=3)if(rr(Rl,E,g,v),Rl.needsUpdate=!0,Cl.intersectsTriangle(Rl))return!0}}else{let u=t+8,d=p[t+6];return Wt(u,o,Rh),!!(i.intersectsBox(Rh)&&U2(u,e,r,n,i)||(Wt(d,o,Rh),i.intersectsBox(Rh)&&U2(d,e,r,n,i)))}}import{Matrix4 as Qj,Vector3 as Mh}from"three";var xh=new Qj,j2=new Sr,au=new Sr,Wj=new Mh,Vj=new Mh,Yj=new Mh,Kj=new Mh;function Ux(t,e,r,n={},i={},o=0,s=1/0){e.boundingBox||e.computeBoundingBox(),j2.set(e.boundingBox.min,e.boundingBox.max,r),j2.needsUpdate=!0;let p=t.geometry,l=p.attributes.position,c=p.index,u=e.attributes.position,d=e.index,f=Wo.getPrimitive(),g=Wo.getPrimitive(),v=Wj,A=Vj,m=null,h=null;i&&(m=Yj,h=Kj);let y=1/0,E=null,b=null;return xh.copy(r).invert(),au.matrix.copy(xh),t.shapecast({boundsTraverseOrder:_=>j2.distanceToBox(_),intersectsBounds:(_,C,B)=>B<y&&B<s?(C&&(au.min.copy(_.min),au.max.copy(_.max),au.needsUpdate=!0),!0):!1,intersectsRange:(_,C)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:R=>au.distanceToBox(R),intersectsBounds:(R,M,x)=>x<y&&x<s,intersectsRange:(R,M)=>{for(let x=R,T=R+M;x<T;x++){rr(g,3*x,d,u),g.a.applyMatrix4(r),g.b.applyMatrix4(r),g.c.applyMatrix4(r),g.needsUpdate=!0;for(let w=_,S=_+C;w<S;w++){rr(f,3*w,c,l),f.needsUpdate=!0;let I=f.distanceToTriangle(g,v,m);if(I<y&&(A.copy(v),h&&h.copy(m),y=I,E=w,b=x),I<o)return!0}}}});{let B=Yn(e);for(let R=0,M=B;R<M;R++){rr(g,3*R,d,u),g.a.applyMatrix4(r),g.b.applyMatrix4(r),g.c.applyMatrix4(r),g.needsUpdate=!0;for(let x=_,T=_+C;x<T;x++){rr(f,3*x,c,l),f.needsUpdate=!0;let w=f.distanceToTriangle(g,v,m);if(w<y&&(A.copy(v),h&&h.copy(m),y=w,E=x,b=R),w<o)return!0}}}}}),Wo.releasePrimitive(f),Wo.releasePrimitive(g),y===1/0?null:(n.point?n.point.copy(A):n.point=A.clone(),n.distance=y,n.faceIndex=E,i&&(i.point?i.point.copy(h):i.point=h.clone(),i.point.applyMatrix4(xh),A.applyMatrix4(xh),i.distance=A.sub(i.point).length(),i.faceIndex=b),n)}function jx(t,e=null){e&&Array.isArray(e)&&(e=new Set(e));let r=t.geometry,n=r.index?r.index.array:null,i=r.attributes.position,o,s,p,l,c=0,u=t._roots;for(let f=0,g=u.length;f<g;f++)o=u[f],s=new Uint32Array(o),p=new Uint16Array(o),l=new Float32Array(o),d(0,c),c+=o.byteLength;function d(f,g,v=!1){let A=f*2;if(p[A+15]===65535){let h=s[f+6],y=p[A+14],E=1/0,b=1/0,_=1/0,C=-1/0,B=-1/0,R=-1/0;for(let M=h,x=h+y;M<x;M++){let T=3*t.resolveTriangleIndex(M);for(let w=0;w<3;w++){let S=T+w;S=n?n[S]:S;let I=i.getX(S),G=i.getY(S),H=i.getZ(S);I<E&&(E=I),I>C&&(C=I),G<b&&(b=G),G>B&&(B=G),H<_&&(_=H),H>R&&(R=H)}}return l[f+0]!==E||l[f+1]!==b||l[f+2]!==_||l[f+3]!==C||l[f+4]!==B||l[f+5]!==R?(l[f+0]=E,l[f+1]=b,l[f+2]=_,l[f+3]=C,l[f+4]=B,l[f+5]=R,!0):!1}else{let h=f+8,y=s[f+6],E=h+g,b=y+g,_=v,C=!1,B=!1;e?_||(C=e.has(E),B=e.has(b),_=!C&&!B):(C=!0,B=!0);let R=_||C,M=_||B,x=!1;R&&(x=d(h,g,_));let T=!1;M&&(T=d(y,g,_));let w=x||T;if(w)for(let S=0;S<3;S++){let I=h+S,G=y+S,H=l[I],X=l[I+3],Z=l[G],z=l[G+3];l[f+S]=H<Z?H:Z,l[f+S+3]=X>z?X:z}return w}}}import{Vector3 as Xj}from"three";var Hx=new Xj;function Qx(t,e,r,n,i){Ct.setBuffer(t._roots[e]),H2(0,t,r,n,i),Ct.clearBuffer()}function H2(t,e,r,n,i){let{float32Array:o,uint16Array:s,uint32Array:p}=Ct,l=t*2;if(br(l,s)){let u=_r(t,p),d=Ir(l,s);Fx(e,r,n,u,d,i)}else{let u=uo(t);Ni(u,o,n,Hx)&&H2(u,e,r,n,i);let d=Wr(t,p);Ni(d,o,n,Hx)&&H2(d,e,r,n,i)}}import{Vector3 as Jj}from"three";var Wx=new Jj,qj=["x","y","z"];function Vx(t,e,r,n){Ct.setBuffer(t._roots[e]);let i=Q2(0,t,r,n);return Ct.clearBuffer(),i}function Q2(t,e,r,n){let{float32Array:i,uint16Array:o,uint32Array:s}=Ct,p=t*2;if(br(p,o)){let c=_r(t,s),u=Ir(p,o);return Ox(e,r,n,c,u)}else{let c=ml(t,s),u=qj[c],f=n.direction[u]>=0,g,v;f?(g=uo(t),v=Wr(t,s)):(g=Wr(t,s),v=uo(t));let m=Ni(g,i,n,Wx)?Q2(g,e,r,n):null;if(m){let E=m.point[u];if(f?E<=i[v+c]:E>=i[v+c+3])return m}let y=Ni(v,i,n,Wx)?Q2(v,e,r,n):null;return m&&y?m.distance<=y.distance?m:y:m||y||null}}import{Box3 as Zj,Matrix4 as $j}from"three";var wh=new Zj,Bl=new Ro,xl=new Ro,su=new $j,Yx=new Sr,Th=new Sr;function Kx(t,e,r,n){Ct.setBuffer(t._roots[e]);let i=W2(0,t,r,n);return Ct.clearBuffer(),i}function W2(t,e,r,n,i=null){let{float32Array:o,uint16Array:s,uint32Array:p}=Ct,l=t*2;if(i===null&&(r.boundingBox||r.computeBoundingBox(),Yx.set(r.boundingBox.min,r.boundingBox.max,n),i=Yx),br(l,s)){let u=e.geometry,d=u.index,f=u.attributes.position,g=r.index,v=r.attributes.position,A=_r(t,p),m=Ir(l,s);if(su.copy(n).invert(),r.boundsTree)return Wt(t,o,Th),Th.matrix.copy(su),Th.needsUpdate=!0,r.boundsTree.shapecast({intersectsBounds:y=>Th.intersectsBox(y),intersectsTriangle:y=>{y.a.applyMatrix4(n),y.b.applyMatrix4(n),y.c.applyMatrix4(n),y.needsUpdate=!0;for(let E=A,b=m+A;E<b;E++)if(rr(xl,3*e.resolveTriangleIndex(E),d,f),xl.needsUpdate=!0,y.intersectsTriangle(xl))return!0;return!1}});for(let h=A,y=m+A;h<y;h++){let E=e.resolveTriangleIndex(h);rr(Bl,3*E,d,f),Bl.a.applyMatrix4(su),Bl.b.applyMatrix4(su),Bl.c.applyMatrix4(su),Bl.needsUpdate=!0;for(let b=0,_=g.count;b<_;b+=3)if(rr(xl,b,g,v),xl.needsUpdate=!0,Bl.intersectsTriangle(xl))return!0}}else{let u=t+8,d=p[t+6];return Wt(u,o,wh),!!(i.intersectsBox(wh)&&W2(u,e,r,n,i)||(Wt(d,o,wh),i.intersectsBox(wh)&&W2(d,e,r,n,i)))}}import{Matrix4 as eH,Vector3 as Ih}from"three";var Sh=new eH,V2=new Sr,pu=new Sr,tH=new Ih,rH=new Ih,oH=new Ih,iH=new Ih;function Xx(t,e,r,n={},i={},o=0,s=1/0){e.boundingBox||e.computeBoundingBox(),V2.set(e.boundingBox.min,e.boundingBox.max,r),V2.needsUpdate=!0;let p=t.geometry,l=p.attributes.position,c=p.index,u=e.attributes.position,d=e.index,f=Wo.getPrimitive(),g=Wo.getPrimitive(),v=tH,A=rH,m=null,h=null;i&&(m=oH,h=iH);let y=1/0,E=null,b=null;return Sh.copy(r).invert(),pu.matrix.copy(Sh),t.shapecast({boundsTraverseOrder:_=>V2.distanceToBox(_),intersectsBounds:(_,C,B)=>B<y&&B<s?(C&&(pu.min.copy(_.min),pu.max.copy(_.max),pu.needsUpdate=!0),!0):!1,intersectsRange:(_,C)=>{if(e.boundsTree){let B=e.boundsTree;return B.shapecast({boundsTraverseOrder:R=>pu.distanceToBox(R),intersectsBounds:(R,M,x)=>x<y&&x<s,intersectsRange:(R,M)=>{for(let x=R,T=R+M;x<T;x++){let w=B.resolveTriangleIndex(x);rr(g,3*w,d,u),g.a.applyMatrix4(r),g.b.applyMatrix4(r),g.c.applyMatrix4(r),g.needsUpdate=!0;for(let S=_,I=_+C;S<I;S++){let G=t.resolveTriangleIndex(S);rr(f,3*G,c,l),f.needsUpdate=!0;let H=f.distanceToTriangle(g,v,m);if(H<y&&(A.copy(v),h&&h.copy(m),y=H,E=S,b=x),H<o)return!0}}}})}else{let B=Yn(e);for(let R=0,M=B;R<M;R++){rr(g,3*R,d,u),g.a.applyMatrix4(r),g.b.applyMatrix4(r),g.c.applyMatrix4(r),g.needsUpdate=!0;for(let x=_,T=_+C;x<T;x++){let w=t.resolveTriangleIndex(x);rr(f,3*w,c,l),f.needsUpdate=!0;let S=f.distanceToTriangle(g,v,m);if(S<y&&(A.copy(v),h&&h.copy(m),y=S,E=x,b=R),S<o)return!0}}}}}),Wo.releasePrimitive(f),Wo.releasePrimitive(g),y===1/0?null:(n.point?n.point.copy(A):n.point=A.clone(),n.distance=y,n.faceIndex=E,i&&(i.point?i.point.copy(h):i.point=h.clone(),i.point.applyMatrix4(Sh),A.applyMatrix4(Sh),i.distance=A.sub(i.point).length(),i.faceIndex=b),n)}function Jx(){return typeof SharedArrayBuffer<"u"}import{Box3 as cu,Matrix4 as nH}from"three";var lu=new Ct.constructor,Fh=new Ct.constructor,Za=new Ja(()=>new cu),Ml=new cu,wl=new cu,Y2=new cu,K2=new cu,X2=!1;function qx(t,e,r,n){if(X2)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");X2=!0;let i=t._roots,o=e._roots,s,p=0,l=0,c=new nH().copy(r).invert();for(let u=0,d=i.length;u<d;u++){lu.setBuffer(i[u]),l=0;let f=Za.getPrimitive();Wt(0,lu.float32Array,f),f.applyMatrix4(c);for(let g=0,v=o.length;g<v&&(Fh.setBuffer(o[u]),s=bn(0,0,r,c,n,p,l,0,0,f),Fh.clearBuffer(),l+=o[g].length,!s);g++);if(Za.releasePrimitive(f),lu.clearBuffer(),p+=i[u].length,s)break}return X2=!1,s}function bn(t,e,r,n,i,o=0,s=0,p=0,l=0,c=null,u=!1){let d,f;u?(d=Fh,f=lu):(d=lu,f=Fh);let g=d.float32Array,v=d.uint32Array,A=d.uint16Array,m=f.float32Array,h=f.uint32Array,y=f.uint16Array,E=t*2,b=e*2,_=br(E,A),C=br(b,y),B=!1;if(C&&_)u?B=i(_r(e,h),Ir(e*2,y),_r(t,v),Ir(t*2,A),l,s+e,p,o+t):B=i(_r(t,v),Ir(t*2,A),_r(e,h),Ir(e*2,y),p,o+t,l,s+e);else if(C){let R=Za.getPrimitive();Wt(e,m,R),R.applyMatrix4(r);let M=uo(t),x=Wr(t,v);Wt(M,g,Ml),Wt(x,g,wl);let T=R.intersectsBox(Ml),w=R.intersectsBox(wl);B=T&&bn(e,M,n,r,i,s,o,l,p+1,R,!u)||w&&bn(e,x,n,r,i,s,o,l,p+1,R,!u),Za.releasePrimitive(R)}else{let R=uo(e),M=Wr(e,h);Wt(R,m,Y2),Wt(M,m,K2);let x=c.intersectsBox(Y2),T=c.intersectsBox(K2);if(x&&T)B=bn(t,R,r,n,i,o,s,p,l+1,c,u)||bn(t,M,r,n,i,o,s,p,l+1,c,u);else if(x)if(_)B=bn(t,R,r,n,i,o,s,p,l+1,c,u);else{let w=Za.getPrimitive();w.copy(Y2).applyMatrix4(r);let S=uo(t),I=Wr(t,v);Wt(S,g,Ml),Wt(I,g,wl);let G=w.intersectsBox(Ml),H=w.intersectsBox(wl);B=G&&bn(R,S,n,r,i,s,o,l,p+1,w,!u)||H&&bn(R,I,n,r,i,s,o,l,p+1,w,!u),Za.releasePrimitive(w)}else if(T)if(_)B=bn(t,M,r,n,i,o,s,p,l+1,c,u);else{let w=Za.getPrimitive();w.copy(K2).applyMatrix4(r);let S=uo(t),I=Wr(t,v);Wt(S,g,Ml),Wt(I,g,wl);let G=w.intersectsBox(Ml),H=w.intersectsBox(wl);B=G&&bn(M,S,n,r,i,s,o,l,p+1,w,!u)||H&&bn(M,I,n,r,i,s,o,l,p+1,w,!u),Za.releasePrimitive(w)}}return B}var Oh=new Sr,$x=new eM,$s=class t{static serialize(e,r={}){r={cloneBuffers:!0,...r};let n=e.geometry,i=e._roots,o=e._indirectBuffer,s=n.getIndex(),p;return r.cloneBuffers?p={roots:i.map(l=>l.slice()),index:s.array.slice(),indirectBuffer:o?o.slice():null}:p={roots:i,index:s.array,indirectBuffer:o},p}static deserialize(e,r,n={}){n={setIndex:!0,indirect:!!e.indirectBuffer,...n};let{index:i,roots:o,indirectBuffer:s}=e,p=new t(r,{...n,[fh]:!0});if(p._roots=o,p._indirectBuffer=s||null,n.setIndex){let l=r.getIndex();if(l===null){let c=new aH(e.index,1,!1);r.setIndex(c)}else l.array!==i&&(l.array.set(i),l.needsUpdate=!0)}return p}get indirect(){return!!this._indirectBuffer}constructor(e,r={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(r=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,[fh]:!1},r),r.useSharedArrayBuffer&&!Jx())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,r[fh]||(Ax(this,r),!e.boundingBox&&r.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new eM)));let{_indirectBuffer:n}=this;this.resolveTriangleIndex=r.indirect?i=>n[i]:i=>i}refit(e=null){return(this.indirect?jx:Sx)(this,e)}traverse(e,r=0){let n=this._roots[r],i=new Uint32Array(n),o=new Uint16Array(n);s(0);function s(p,l=0){let c=p*2,u=o[c+15]===65535;if(u){let d=i[p+6],f=o[c+14];e(l,u,new Float32Array(n,p*4,6),d,f)}else{let d=p+32/4,f=i[p+6],g=i[p+7];e(l,u,new Float32Array(n,p*4,6),g)||(s(d,l+1),s(f,l+1))}}}raycast(e,r=Zx){let n=this._roots,i=this.geometry,o=[],s=r.isMaterial,p=Array.isArray(r),l=i.groups,c=s?r.side:r,u=this.indirect?Qx:Lx;for(let d=0,f=n.length;d<f;d++){let g=p?r[l[d].materialIndex].side:c,v=o.length;if(u(this,d,g,e,o),p){let A=l[d].materialIndex;for(let m=v,h=o.length;m<h;m++)o[m].face.materialIndex=A}}return o}raycastFirst(e,r=Zx){let n=this._roots,i=this.geometry,o=r.isMaterial,s=Array.isArray(r),p=null,l=i.groups,c=o?r.side:r,u=this.indirect?Vx:Gx;for(let d=0,f=n.length;d<f;d++){let g=s?r[l[d].materialIndex].side:c,v=u(this,d,g,e);v!=null&&(p==null||v.distance<p.distance)&&(p=v,s&&(v.face.materialIndex=l[d].materialIndex))}return p}intersectsGeometry(e,r){let n=!1,i=this._roots,o=this.indirect?Kx:Nx;for(let s=0,p=i.length;s<p&&(n=o(this,s,e,r),!n);s++);return n}shapecast(e){let r=Wo.getPrimitive(),n=this.indirect?Dx:Tx,{boundsTraverseOrder:i,intersectsBounds:o,intersectsRange:s,intersectsTriangle:p}=e;if(s&&p){let d=s;s=(f,g,v,A,m)=>d(f,g,v,A,m)?!0:n(f,g,this,p,v,A,r)}else s||(p?s=(d,f,g,v)=>n(d,f,this,p,g,v,r):s=(d,f,g)=>g);let l=!1,c=0,u=this._roots;for(let d=0,f=u.length;d<f;d++){let g=u[d];if(l=bx(this,d,o,s,i,c),l)break;c+=g.byteLength}return Wo.releasePrimitive(r),l}bvhcast(e,r,n){let{intersectsRanges:i,intersectsTriangles:o}=n,s=Wo.getPrimitive(),p=this.geometry.index,l=this.geometry.attributes.position,c=this.indirect?v=>{let A=this.resolveTriangleIndex(v);rr(s,A*3,p,l)}:v=>{rr(s,v*3,p,l)},u=Wo.getPrimitive(),d=e.geometry.index,f=e.geometry.attributes.position,g=e.indirect?v=>{let A=e.resolveTriangleIndex(v);rr(u,A*3,d,f)}:v=>{rr(u,v*3,d,f)};if(o){let v=(A,m,h,y,E,b,_,C)=>{for(let B=h,R=h+y;B<R;B++){g(B),u.a.applyMatrix4(r),u.b.applyMatrix4(r),u.c.applyMatrix4(r),u.needsUpdate=!0;for(let M=A,x=A+m;M<x;M++)if(c(M),s.needsUpdate=!0,o(s,u,M,B,E,b,_,C))return!0}return!1};if(i){let A=i;i=function(m,h,y,E,b,_,C,B){return A(m,h,y,E,b,_,C,B)?!0:v(m,h,y,E,b,_,C,B)}}else i=v}return qx(this,e,r,i)}intersectsBox(e,r){return Oh.set(e.min,e.max,r),Oh.needsUpdate=!0,this.shapecast({intersectsBounds:n=>Oh.intersectsBox(n),intersectsTriangle:n=>Oh.intersectsTriangle(n)})}intersectsSphere(e){return this.shapecast({intersectsBounds:r=>e.intersectsBox(r),intersectsTriangle:r=>r.intersectsSphere(e)})}closestPointToGeometry(e,r,n={},i={},o=0,s=1/0){return(this.indirect?Xx:Ux)(this,e,r,n,i,o,s)}closestPointToPoint(e,r={},n=0,i=1/0){return Cx(this,e,r,n,i)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(n=>{Wt(0,new Float32Array(n),$x),e.union($x)}),e}};import{Ray as sH,Matrix4 as pH,Mesh as lH}from"three";function J2(t,e,r){return t===null||(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(r.ray.origin),t.object=e,t.distance<r.near||t.distance>r.far)?null:t}var q2=new sH,tM=new pH,cH=lH.prototype.raycast;function Dh(t,e){if(this.geometry.boundsTree){if(this.material===void 0)return;tM.copy(this.matrixWorld).invert(),q2.copy(t.ray).applyMatrix4(tM);let r=this.geometry.boundsTree;if(t.firstHitOnly===!0){let n=J2(r.raycastFirst(q2,this.material),this,t);n&&e.push(n)}else{let n=r.raycast(q2,this.material);for(let i=0,o=n.length;i<o;i++){let s=J2(n[i],this,t);s&&e.push(s)}}}else cH.call(this,t,e)}function kh(t){return this.boundsTree=new $s(this,t),this.boundsTree}function Lh(){this.boundsTree=null}import{DataTexture as aM,FloatType as EH,UnsignedIntType as bH,RGBAFormat as _H,RGIntegerFormat as CH,NearestFilter as jh,BufferAttribute as RH}from"three";import{DataTexture as dH,FloatType as Ph,IntType as Z2,UnsignedIntType as Gh,ByteType as rM,UnsignedByteType as oM,ShortType as uH,UnsignedShortType as fH,RedFormat as gH,RGFormat as hH,RGBAFormat as $2,RedIntegerFormat as mH,RGIntegerFormat as AH,RGBAIntegerFormat as e3,NearestFilter as iM}from"three";function yH(t){switch(t){case 1:return"R";case 2:return"RG";case 3:return"RGBA";case 4:return"RGBA"}throw new Error}function vH(t){switch(t){case 1:return gH;case 2:return hH;case 3:return $2;case 4:return $2}}function nM(t){switch(t){case 1:return mH;case 2:return AH;case 3:return e3;case 4:return e3}}var zh=class extends dH{constructor(){super(),this.minFilter=iM,this.magFilter=iM,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(e){let r=this.overrideItemSize,n=e.itemSize,i=e.count;if(r!==null){if(n*i%r!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");e.itemSize=r,e.count=i*n/r}let o=e.itemSize,s=e.count,p=e.normalized,l=e.array.constructor,c=l.BYTES_PER_ELEMENT,u=this._forcedType,d=o;if(u===null)switch(l){case Float32Array:u=Ph;break;case Uint8Array:case Uint16Array:case Uint32Array:u=Gh;break;case Int8Array:case Int16Array:case Int32Array:u=Z2;break}let f,g,v,A,m=yH(o);switch(u){case Ph:v=1,g=vH(o),p&&c===1?(A=l,m+="8",l===Uint8Array?f=oM:(f=rM,m+="_SNORM")):(A=Float32Array,m+="32F",f=Ph);break;case Z2:m+=c*8+"I",v=p?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,g=nM(o),c===1?(A=Int8Array,f=rM):c===2?(A=Int16Array,f=uH):(A=Int32Array,f=Z2);break;case Gh:m+=c*8+"UI",v=p?Math.pow(2,l.BYTES_PER_ELEMENT*8-1):1,g=nM(o),c===1?(A=Uint8Array,f=oM):c===2?(A=Uint16Array,f=fH):(A=Uint32Array,f=Gh);break}d===3&&(g===$2||g===e3)&&(d=4);let h=Math.ceil(Math.sqrt(s)),y=d*h*h,E=new A(y),b=e.normalized;e.normalized=!1;for(let _=0;_<s;_++){let C=d*_;E[C]=e.getX(_)/v,o>=2&&(E[C+1]=e.getY(_)/v),o>=3&&(E[C+2]=e.getZ(_)/v,d===4&&(E[C+3]=1)),o>=4&&(E[C+3]=e.getW(_)/v)}e.normalized=b,this.internalFormat=m,this.format=g,this.type=f,this.image.width=h,this.image.height=h,this.image.data=E,this.needsUpdate=!0,this.dispose(),e.itemSize=n,e.count=i}},Nh=class extends zh{constructor(){super(),this._forcedType=Gh}};var Uh=class extends zh{constructor(){super(),this._forcedType=Ph}};var Tl=class{constructor(){this.index=new Nh,this.position=new Uh,this.bvhBounds=new aM,this.bvhContents=new aM,this._cachedIndexAttr=null,this.index.overrideItemSize=3}updateFrom(e){let{geometry:r}=e;if(xH(e,this.bvhBounds,this.bvhContents),this.position.updateFrom(r.attributes.position),e.indirect){let n=e._indirectBuffer;if(this._cachedIndexAttr===null||this._cachedIndexAttr.count!==n.length)if(r.index)this._cachedIndexAttr=r.index.clone();else{let i=w2(M2(r));this._cachedIndexAttr=new RH(i,1,!1)}BH(r,n,this._cachedIndexAttr),this.index.updateFrom(this._cachedIndexAttr)}else this.index.updateFrom(r.index)}dispose(){let{index:e,position:r,bvhBounds:n,bvhContents:i}=this;e&&e.dispose(),r&&r.dispose(),n&&n.dispose(),i&&i.dispose()}};function BH(t,e,r){let n=r.array,i=t.index?t.index.array:null;for(let o=0,s=e.length;o<s;o++){let p=3*o,l=3*e[o];for(let c=0;c<3;c++)n[p+c]=i?i[l+c]:l+c}}function xH(t,e,r){let n=t._roots;if(n.length!==1)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");let i=n[0],o=new Uint16Array(i),s=new Uint32Array(i),p=new Float32Array(i),l=i.byteLength/32,c=2*Math.ceil(Math.sqrt(l/2)),u=new Float32Array(4*c*c),d=Math.ceil(Math.sqrt(l)),f=new Uint32Array(2*d*d);for(let g=0;g<l;g++){let v=g*32/4,A=v*2,m=v;for(let h=0;h<3;h++)u[8*g+0+h]=p[m+0+h],u[8*g+4+h]=p[m+3+h];if(br(A,o)){let h=Ir(A,o),y=_r(v,s),E=4294901760|h;f[g*2+0]=E,f[g*2+1]=y}else{let h=4*Wr(v,s)/32,y=ml(v,s);f[g*2+0]=y,f[g*2+1]=h}}e.image.data=u,e.image.width=c,e.image.height=c,e.format=_H,e.type=EH,e.internalFormat="RGBA32F",e.minFilter=jh,e.magFilter=jh,e.generateMipmaps=!1,e.needsUpdate=!0,e.dispose(),r.image.data=f,r.image.width=d,r.image.height=d,r.format=CH,r.type=bH,r.internalFormat="RG32UI",r.minFilter=jh,r.magFilter=jh,r.generateMipmaps=!1,r.needsUpdate=!0,r.dispose()}var sM=`
#ifndef TRI_INTERSECT_EPSILON
#define TRI_INTERSECT_EPSILON 1e-5
#endif

#ifndef INFINITY
#define INFINITY 1e20
#endif

struct BVH {

	usampler2D index;
	sampler2D position;

	sampler2D bvhBounds;
	usampler2D bvhContents;

};
`,pM=`

// Utilities
uvec4 uTexelFetch1D( usampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

ivec4 iTexelFetch1D( isampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 texelFetch1D( sampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {

	return
		barycoord.x * texelFetch1D( tex, faceIndices.x ) +
		barycoord.y * texelFetch1D( tex, faceIndices.y ) +
		barycoord.z * texelFetch1D( tex, faceIndices.z );

}

void ndcToCameraRay(
	vec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,
	out vec3 rayOrigin, out vec3 rayDirection
) {

	// get camera look direction and near plane for camera clipping
	vec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );
	vec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );
	float near = abs( nearVector.z / nearVector.w );

	// get the camera direction and position from camera matrices
	vec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );
	direction /= direction.w;
	direction = cameraWorld * direction - origin;

	// slide the origin along the ray until it sits at the near clip plane position
	origin.xyz += direction.xyz * near / dot( direction, lookDirection );

	rayOrigin = origin.xyz;
	rayDirection = direction.xyz;

}

// Raycasting
float intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax ) {

	// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/
	// https://tavianator.com/2011/ray_box.html
	vec3 invDir = 1.0 / rayDirection;

	// find intersection distances for each plane
	vec3 tMinPlane = invDir * ( boundsMin - rayOrigin );
	vec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );

	// get the min and max distances from each intersection
	vec3 tMinHit = min( tMaxPlane, tMinPlane );
	vec3 tMaxHit = max( tMaxPlane, tMinPlane );

	// get the furthest hit distance
	vec2 t = max( tMinHit.xx, tMinHit.yz );
	float t0 = max( t.x, t.y );

	// get the minimum hit distance
	t = min( tMaxHit.xx, tMaxHit.yz );
	float t1 = min( t.x, t.y );

	// set distance to 0.0 if the ray starts inside the box
	float dist = max( t0, 0.0 );

	return t1 >= dist ? dist : INFINITY;

}

bool intersectsTriangle(
	vec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,
	out vec3 barycoord, out vec3 norm, out float dist, out float side
) {

	// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d
	vec3 edge1 = b - a;
	vec3 edge2 = c - a;
	norm = cross( edge1, edge2 );

	float det = - dot( rayDirection, norm );
	float invdet = 1.0 / det;

	vec3 AO = rayOrigin - a;
	vec3 DAO = cross( AO, rayDirection );

	vec4 uvt;
	uvt.x = dot( edge2, DAO ) * invdet;
	uvt.y = - dot( edge1, DAO ) * invdet;
	uvt.z = dot( AO, norm ) * invdet;
	uvt.w = 1.0 - uvt.x - uvt.y;

	// set the hit information
	barycoord = uvt.wxy; // arranged in A, B, C order
	dist = uvt.z;
	side = sign( det );
	norm = side * normalize( norm );

	// add an epsilon to avoid misses between triangles
	uvt += vec4( TRI_INTERSECT_EPSILON );

	return all( greaterThanEqual( uvt, vec4( 0.0 ) ) );

}

bool intersectTriangles(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection, uint offset, uint count,
	inout float minDistance, inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	bool found = false;
	vec3 localBarycoord, localNormal;
	float localDist, localSide;
	for ( uint i = offset, l = offset + count; i < l; i ++ ) {

		uvec3 indices = uTexelFetch1D( bvh.index, i ).xyz;
		vec3 a = texelFetch1D( bvh.position, indices.x ).rgb;
		vec3 b = texelFetch1D( bvh.position, indices.y ).rgb;
		vec3 c = texelFetch1D( bvh.position, indices.z ).rgb;

		if (
			intersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )
			&& localDist < minDistance
		) {

			found = true;
			minDistance = localDist;

			faceIndices = uvec4( indices.xyz, i );
			faceNormal = localNormal;

			side = localSide;
			barycoord = localBarycoord;
			dist = localDist;

		}

	}

	return found;

}

float intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, BVH bvh, uint currNodeIndex ) {

	vec3 boundsMin = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 0u ).xyz;
	vec3 boundsMax = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 1u ).xyz;
	return intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax );

}

bool bvhIntersectFirstHit(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection,

	// output variables
	inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,
	inout float side, inout float dist
) {

	// stack needs to be twice as long as the deepest tree we expect because
	// we push both the left and right child onto the stack every traversal
	int ptr = 0;
	uint stack[ 60 ];
	stack[ 0 ] = 0u;

	float triangleDistance = 1e20;
	bool found = false;
	while ( ptr > - 1 && ptr < 60 ) {

		uint currNodeIndex = stack[ ptr ];
		ptr --;

		// check if we intersect the current bounds
		float boundsHitDistance = intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh, currNodeIndex );
		if ( boundsHitDistance == INFINITY || boundsHitDistance > triangleDistance ) {

			continue;

		}

		uvec2 boundsInfo = uTexelFetch1D( bvh.bvhContents, currNodeIndex ).xy;
		bool isLeaf = bool( boundsInfo.x & 0xffff0000u );

		if ( isLeaf ) {

			uint count = boundsInfo.x & 0x0000ffffu;
			uint offset = boundsInfo.y;

			found = intersectTriangles(
				bvh, rayOrigin, rayDirection, offset, count, triangleDistance,
				faceIndices, faceNormal, barycoord, side, dist
			) || found;

		} else {

			uint leftIndex = currNodeIndex + 1u;
			uint splitAxis = boundsInfo.x & 0x0000ffffu;
			uint rightIndex = boundsInfo.y;

			bool leftToRight = rayDirection[ splitAxis ] >= 0.0;
			uint c1 = leftToRight ? leftIndex : rightIndex;
			uint c2 = leftToRight ? rightIndex : leftIndex;

			// set c2 in the stack so we traverse it later. We need to keep track of a pointer in
			// the stack while we traverse. The second pointer added is the one that will be
			// traversed first
			ptr ++;
			stack[ ptr ] = c2;

			ptr ++;
			stack[ ptr ] = c1;

		}

	}

	return found;

}
`;var cM=t=>t.isMesh;function wH(t,e){e={strategy:2,verbose:!1,setBoundingBox:!0,maxDepth:40,maxLeafTris:10,...e},_n.useEffect(()=>{if(t.current){t.current.raycast=Dh;let r=t.current.geometry;return r.computeBoundsTree=kh,r.disposeBoundsTree=Lh,r.computeBoundsTree(e),()=>{r.boundsTree&&r.disposeBoundsTree()}}},[t,JSON.stringify(e)])}var TH=_n.forwardRef(({enabled:t=!0,firstHitOnly:e=!1,children:r,strategy:n=2,verbose:i=!1,setBoundingBox:o=!0,maxDepth:s=40,maxLeafTris:p=10,...l},c)=>{let u=_n.useRef(null),d=MH(f=>f.raycaster);return _n.useImperativeHandle(c,()=>u.current,[]),_n.useEffect(()=>{if(t){let f={strategy:n,verbose:i,setBoundingBox:o,maxDepth:s,maxLeafTris:p},g=u.current;return d.firstHitOnly=e,g.traverse(v=>{cM(v)&&!v.geometry.boundsTree&&v.raycast===lM.prototype.raycast&&(v.raycast=Dh,v.geometry.computeBoundsTree=kh,v.geometry.disposeBoundsTree=Lh,v.geometry.computeBoundsTree(f))}),()=>{delete d.firstHitOnly,g.traverse(v=>{cM(v)&&v.geometry.boundsTree&&(v.geometry.disposeBoundsTree(),v.raycast=lM.prototype.raycast)})}}}),_n.createElement("group",te({ref:u},l),r)});import*as $a from"react";function SH(...t){let e=$a.useRef([]);return e.current=t.map(r=>$a.useContext(r)),$a.useMemo(()=>({children:r})=>t.reduceRight((n,i,o)=>$a.createElement(i.Provider,{value:e.current[o],children:n}),r),[])}import*as Ui from"react";import{Object3D as dM,AnimationMixer as IH}from"three";import{useFrame as FH}from"@react-three/fiber";function OH(t,e){let r=Ui.useRef(),[n]=Ui.useState(()=>e?e instanceof dM?{current:e}:e:r),[i]=Ui.useState(()=>new IH(void 0));Ui.useLayoutEffect(()=>{e&&(n.current=e instanceof dM?e:e.current),i._root=n.current});let o=Ui.useRef({}),s=Ui.useMemo(()=>{let p={};return t.forEach(l=>Object.defineProperty(p,l.name,{enumerable:!0,get(){if(n.current)return o.current[l.name]||(o.current[l.name]=i.clipAction(l,n.current))},configurable:!0})),{ref:n,clips:t,actions:p,names:t.map(l=>l.name),mixer:i}},[t]);return FH((p,l)=>i.update(l)),Ui.useEffect(()=>{let p=n.current;return()=>{o.current={},i.stopAllAction(),Object.values(s.actions).forEach(l=>{p&&i.uncacheAction(l,p)})}},[t]),s}import*as fa from"react";import{addEffect as DH,addAfterEffect as kH}from"@react-three/fiber";function t3(t){let e=fa.useRef(null),r=fa.useRef(!1),n=fa.useRef(!1),i=fa.useRef(t);return fa.useLayoutEffect(()=>void(i.current=t),[t]),fa.useEffect(()=>{let o=e.current;if(o){let s=DH(()=>(r.current=!1,!0)),p=o.onBeforeRender;o.onBeforeRender=()=>r.current=!0;let l=kH(()=>(r.current!==n.current&&(i.current==null||i.current(n.current=r.current)),!0));return()=>{o.onBeforeRender=p,s(),l()}}},[]),e}import*as ep from"three";import*as es from"react";import{applyProps as LH}from"@react-three/fiber";var PH=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
  vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
  #ifdef BOX_PROJECTED_ENV_MAP
    vWorldPosition = worldPosition.xyz;
  #endif
#endif
`,GH=`
#ifdef BOX_PROJECTED_ENV_MAP
  uniform vec3 envMapSize;
  uniform vec3 envMapPosition;
  varying vec3 vWorldPosition;
    
  vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
    vec3 nDir = normalize( v );
    vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbminmax;
    rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
    rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
    rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;
    float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
    vec3 boxIntersection = vWorldPosition + nDir * correction;    
    return boxIntersection - cubePos;
  }
#endif
`,zH=`
#ifdef BOX_PROJECTED_ENV_MAP
  worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,NH=`
#ifdef BOX_PROJECTED_ENV_MAP
  reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function UH(t,e,r){t.defines.BOX_PROJECTED_ENV_MAP=!0,t.uniforms.envMapPosition={value:e},t.uniforms.envMapSize={value:r},t.vertexShader=`
  varying vec3 vWorldPosition;
  ${t.vertexShader.replace("#include <worldpos_vertex>",PH)}`,t.fragmentShader=`
    ${GH}
    ${t.fragmentShader.replace("#include <envmap_physical_pars_fragment>",ep.ShaderChunk.envmap_physical_pars_fragment).replace("vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );",`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
         ${zH}
         `).replace("reflectVec = inverseTransformDirection( reflectVec, viewMatrix );",`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
         ${NH}
        `)}`}function jH(t=new ep.Vector3,e=new ep.Vector3){let[r]=es.useState(()=>({position:new ep.Vector3,size:new ep.Vector3}));LH(r,{position:t,size:e});let n=es.useRef(null),i=es.useMemo(()=>({ref:n,onBeforeCompile:o=>UH(o,r.position,r.size),customProgramCacheKey:()=>JSON.stringify(r.position.toArray())+JSON.stringify(r.size.toArray())}),[...r.position.toArray(),...r.size.toArray()]);return es.useLayoutEffect(()=>void(n.current.needsUpdate=!0),[r]),i}import*as tp from"react";import*as Qh from"three";import{useFrame as HH}from"@react-three/fiber";var uM=new Qh.Box3,Hh=new Qh.Vector3,QH=({anchor:t,...e})=>{let r=tp.useRef(null),n=tp.useRef(null);return tp.useEffect(()=>{var i;(i=r.current)!=null&&(i=i.parent)!=null&&i.parent&&(n.current=r.current.parent,r.current.parent.parent.add(r.current))},[]),HH(()=>{n.current&&(uM.setFromObject(n.current),uM.getSize(Hh),r.current.position.set(n.current.position.x+Hh.x*(Array.isArray(t)?t[0]:t.x)/2,n.current.position.y+Hh.y*(Array.isArray(t)?t[1]:t.y)/2,n.current.position.z+Hh.z*(Array.isArray(t)?t[2]:t.z)/2))}),tp.createElement("group",te({ref:r},e))};import{useMemo as WH,useCallback as VH}from"react";import{useFrame as YH}from"@react-three/fiber";import{Texture as KH}from"three";function XH(t,e,r=.9){return e*r+t*(1-r)}var JH=t=>Math.sqrt(1-Math.pow(t-1,2)),r3=class{constructor({size:e=256,maxAge:r=750,radius:n=.3,intensity:i=.2,interpolate:o=0,smoothing:s=0,minForce:p=.3,blend:l="screen",ease:c=JH}={}){this.size=e,this.maxAge=r,this.radius=n,this.intensity=i,this.ease=c,this.interpolate=o,this.smoothing=s,this.minForce=p,this.blend=l,this.trail=[],this.force=0,this.initTexture()}initTexture(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.size,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new KH(this.canvas),this.canvas.id="touchTexture",this.canvas.style.width=this.canvas.style.height=`${this.canvas.width}px`}update(e){this.clear(),this.trail.forEach((r,n)=>{r.age+=e*1e3,r.age>this.maxAge&&this.trail.splice(n,1)}),this.trail.length||(this.force=0),this.trail.forEach(r=>{this.drawTouch(r)}),this.texture.needsUpdate=!0}clear(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}addTouch(e){let r=this.trail[this.trail.length-1];if(r){let n=r.x-e.x,i=r.y-e.y,o=n*n+i*i,s=Math.max(this.minForce,Math.min(o*1e4,1));if(this.force=XH(s,this.force,this.smoothing),this.interpolate){let p=Math.ceil(o/Math.pow(this.radius*.5/this.interpolate,2));if(p>1)for(let l=1;l<p;l++)this.trail.push({x:r.x-n/p*l,y:r.y-i/p*l,age:0,force:s})}}this.trail.push({x:e.x,y:e.y,age:0,force:this.force})}drawTouch(e){let r={x:e.x*this.size,y:(1-e.y)*this.size},n=1;e.age<this.maxAge*.3?n=this.ease(e.age/(this.maxAge*.3)):n=this.ease(1-(e.age-this.maxAge*.3)/(this.maxAge*.7)),n*=e.force,this.ctx.globalCompositeOperation=this.blend;let i=this.size*this.radius*n,o=this.ctx.createRadialGradient(r.x,r.y,Math.max(0,i*.25),r.x,r.y,Math.max(0,i));o.addColorStop(0,`rgba(255, 255, 255, ${this.intensity})`),o.addColorStop(1,"rgba(0, 0, 0, 0.0)"),this.ctx.beginPath(),this.ctx.fillStyle=o,this.ctx.arc(r.x,r.y,Math.max(0,i),0,Math.PI*2),this.ctx.fill()}};function qH(t={}){let{size:e,maxAge:r,radius:n,intensity:i,interpolate:o,smoothing:s,minForce:p,blend:l,ease:c}=t,u=WH(()=>new r3(t),[e,r,n,i,o,s,p,l,c]);YH((f,g)=>void u.update(g));let d=VH(f=>u.addTouch(f.uv),[u]);return[u.texture,d]}import*as Vr from"react";import{Box3 as ZH,Vector3 as $H,Sphere as eQ}from"three";import*as ii from"react";var du=ii.forwardRef(function({children:e,disable:r,disableX:n,disableY:i,disableZ:o,left:s,right:p,top:l,bottom:c,front:u,back:d,onCentered:f,precise:g=!0,cacheKey:v=0,...A},m){let h=ii.useRef(null),y=ii.useRef(null),E=ii.useRef(null);return ii.useLayoutEffect(()=>{y.current.matrixWorld.identity();let b=new ZH().setFromObject(E.current,g),_=new $H,C=new eQ,B=b.max.x-b.min.x,R=b.max.y-b.min.y,M=b.max.z-b.min.z;b.getCenter(_),b.getBoundingSphere(C);let x=l?R/2:c?-R/2:0,T=s?-B/2:p?B/2:0,w=u?M/2:d?-M/2:0;y.current.position.set(r||n?0:-_.x+T,r||i?0:-_.y+x,r||o?0:-_.z+w),typeof f<"u"&&f({parent:h.current.parent,container:h.current,width:B,height:R,depth:M,boundingBox:b,boundingSphere:C,center:_,verticalAlignment:x,horizontalAlignment:T,depthAlignment:w})},[v,f,l,s,u,r,n,i,o,g,p,c,d]),ii.useImperativeHandle(m,()=>h.current,[]),ii.createElement("group",te({ref:h},A),ii.createElement("group",{ref:y},ii.createElement("group",{ref:E},e)))});var tQ=Vr.forwardRef(({font:t,color:e="#cbcbcb",bevelSize:r=.04,debug:n=!1,children:i,...o},s)=>{let[p,l]=Vr.useState(0),c=Vr.useCallback((f=1)=>l(p+f),[p]),u=Vr.useCallback((f=1)=>l(p-f),[p]),d=Vr.useMemo(()=>({incr:c,decr:u}),[c,u]);return Vr.useImperativeHandle(s,()=>d,[d]),Vr.createElement("group",o,Vr.createElement(Vr.Suspense,{fallback:null},Vr.createElement(du,{top:!0,cacheKey:JSON.stringify({counter:p,font:t})},Vr.createElement(KA,{bevelEnabled:!0,bevelSize:r,font:t},n?Vr.createElement("meshNormalMaterial",{wireframe:!0}):Vr.createElement("meshStandardMaterial",{color:e}),p))),i)});import*as mt from"react";import{useFrame as rQ}from"@react-three/fiber";import*as ga from"three";var oQ=mt.forwardRef(({startFrame:t,endFrame:e,fps:r,frameName:n,textureDataURL:i,textureImageURL:o,loop:s,numberOfFrames:p,autoPlay:l,animationNames:c,onStart:u,onEnd:d,onLoopEnd:f,onFrame:g,play:v,pause:A,flipX:m,alphaTest:h,children:y,asSprite:E,resetOnEnd:b,..._},C)=>{let B=mt.useRef(null),[R,M]=mt.useState(!1),x=mt.useRef(!1),T=mt.useRef(),w=mt.useRef(),S=mt.useRef(window.performance.now()),I=mt.useRef(),G=mt.useRef(t||0),H=mt.useRef(n||""),X=1e3/(r||30),[Z,z]=mt.useState(new ga.Texture),Y=mt.useRef(0),[L,Q]=mt.useState([1,1,1]),V=m?-1:1,[N,P]=mt.useState(E??!0),k=mt.useRef(A);function O(J,oe,ce){let ie=new ga.TextureLoader,W=fetch(J).then(ne=>ne.json()),j=new Promise(ne=>{ie.load(oe,ne)});Promise.all([W,j]).then(ne=>{ce(ne[0],ne[1])})}let D=(J,oe)=>{let ce=oe/J;return w.current&&w.current.scale.set(1,ce,1),[1,ce,1]};mt.useEffect(()=>{if(i&&o)O(i,o,q);else if(o){let J=new ga.TextureLoader;new Promise(oe=>{J.load(o,oe)}).then(oe=>{q(null,oe)})}},[]),mt.useEffect(()=>{P(E??!0)},[E]),mt.useLayoutEffect(()=>{K()},[Z,m]),mt.useEffect(()=>{l&&(k.current=!1)},[l]),mt.useEffect(()=>{if(H.current!==n&&n&&(G.current=0,H.current=n,x.current=!1,K(),B.current)){let{w:J,h:oe}=me(B.current.frames).sourceSize,ce=D(J,oe);Q(ce)}},[n]);let q=(J,oe)=>{if(J===null){if(p){let ce=oe.image.width,ie=oe.image.height,W=ce/p,j=ie;if(I.current=oe,Y.current=p,B.current={frames:[],meta:{version:"1.0",size:{w:ce,h:ie},scale:"1"}},parseInt(W.toString(),10)===W)for(let ne=0;ne<p;ne++)B.current.frames.push({frame:{x:ne*W,y:0,w:W,h:j},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:W,h:j},sourceSize:{w:W,h:ie}})}}else{B.current=J,B.current.frames=Array.isArray(J.frames)?J.frames:ae(),Y.current=Array.isArray(J.frames)?J.frames.length:Object.keys(J.frames).length,I.current=oe;let{w:ce,h:ie}=me(J.frames).sourceSize,W=D(ce,ie);Q(W),T.current&&(T.current.map=oe)}oe.premultiplyAlpha=!1,z(oe)},ae=()=>{let J={},oe=B.current,ce=c;if(ce){for(let ie=0;ie<ce.length;ie++){J[ce[ie]]=[];for(let W in oe.frames){let j=oe.frames[W],ne=j.frame,ve=ne.x,Ce=ne.y,we=ne.w,be=ne.h,Qe=j.sourceSize.w,Le=j.sourceSize.h;W.toLowerCase().indexOf(ce[ie].toLowerCase())!==-1&&J[ce[ie]].push({x:ve,y:Ce,w:we,h:be,frame:ne,sourceSize:{w:Qe,h:Le}})}}return J}else if(n){let ie=[];for(let W in oe.frames)ie.push(oe.frames[W]);return ie}},K=()=>{if(!B.current)return;let{meta:{size:J},frames:oe}=B.current,{w:ce,h:ie}=Array.isArray(oe)?oe[0].sourceSize:n?oe[n]?oe[n][0].sourceSize:{w:0,h:0}:{w:0,h:0};T.current.map.wrapS=T.current.map.wrapT=ga.RepeatWrapping,T.current.map.center.set(0,0),T.current.map.repeat.set(1*V/(J.w/ce),1/(J.h/ie));let j=1/((J.h-1)/ie);T.current.map.offset.x=0,T.current.map.offset.y=1-j,M(!0),u&&u({currentFrameName:n,currentFrame:G.current})},re=()=>{let J=window.performance.now(),oe=J-S.current,{meta:{size:ce},frames:ie}=B.current,{w:W,h:j}=me(ie).sourceSize,ne=Array.isArray(ie)?ie:n?ie[n]:[],ve=e||ne.length-1;G.current>ve&&(G.current=s?t??0:0,s?f?.({currentFrameName:n,currentFrame:G.current}):(d?.({currentFrameName:n,currentFrame:G.current}),x.current=!b,b&&(k.current=!0)),!s)||oe<=X||(S.current=J-oe%X,he(W,j,ce,ne),G.current+=1)},he=(J,oe,ce,ie)=>{let W=0,j=0;D(J,oe);let ne=(ce.w-1)/J,ve=(ce.h-1)/oe,{frame:{x:Ce,y:we},sourceSize:{w:be,h:Qe}}=ie[G.current],Le=1/ne,Fe=1/ve;W=V>0?Le*(Ce/be):Le*(Ce/be)-T.current.map.repeat.x,j=Math.abs(1-Fe)-Fe*(we/Qe),T.current.map.offset.x=W,T.current.map.offset.y=j};rQ((J,oe)=>{var ce,ie;!((ce=B.current)!=null&&ce.frames)||!((ie=T.current)!=null&&ie.map)||k.current||!x.current&&(l||v)&&(re(),g&&g({currentFrameName:H.current,currentFrame:G.current}))});let me=J=>{if(Array.isArray(J))return J[0];if(typeof J=="object"&&J!==null){let oe=Object.keys(J);return n?J[n][0]:J[oe[0]][0]}else return{w:0,h:0}};return mt.createElement("group",te({ref:C},_),mt.createElement(mt.Suspense,{fallback:null},N&&mt.createElement("sprite",{ref:w,scale:L},mt.createElement("spriteMaterial",{toneMapped:!1,ref:T,map:Z,transparent:!0,alphaTest:h??0})),!N&&mt.createElement("mesh",{ref:w,scale:L},mt.createElement("planeGeometry",{args:[1,1]}),mt.createElement("meshBasicMaterial",{toneMapped:!1,side:ga.DoubleSide,ref:T,map:Z,transparent:!0,alphaTest:h??0}))),y)});import*as Bo from"react";import*as fM from"three";import{createPortal as iQ}from"@react-three/fiber";var nQ=Bo.forwardRef(({children:t,curve:e},r)=>{let[n]=Bo.useState(()=>new fM.Scene),[i,o]=Bo.useState(),s=Bo.useRef();return Bo.useEffect(()=>{s.current=new Tc(n.children[0]),o(s.current.object3D)},[t]),Bo.useEffect(()=>{var p;e&&((p=s.current)==null||p.updateCurve(0,e))},[e]),Bo.useImperativeHandle(r,()=>({moveAlongCurve:p=>{var l;(l=s.current)==null||l.moveAlongCurve(p)}})),Bo.createElement(Bo.Fragment,null,iQ(t,n),i&&Bo.createElement("primitive",{object:i}))});import*as Sl from"react";import{MeshPhysicalMaterial as aQ}from"three";import{useFrame as sQ}from"@react-three/fiber";var gM=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;var o3=class extends aQ{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${gM}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}},pQ=Sl.forwardRef(({speed:t=1,...e},r)=>{let[n]=Sl.useState(()=>new o3);return sQ(i=>n&&(n.time=i.clock.getElapsedTime()*t)),Sl.createElement("primitive",te({object:n,ref:r,attach:"material"},e))});import*as Il from"react";import{MeshStandardMaterial as lQ}from"three";import{useFrame as cQ}from"@react-three/fiber";var i3=class extends lQ{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._factor={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.factor=this._factor,e.vertexShader=`
      uniform float time;
      uniform float factor;
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`float theta = sin( time + position.y ) / 2.0 * factor;
        float c = cos( theta );
        float s = sin( theta );
        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
        vec3 transformed = vec3( position ) * m;
        vNormal = vNormal * m;`)}get time(){return this._time.value}set time(e){this._time.value=e}get factor(){return this._factor.value}set factor(e){this._factor.value=e}},dQ=Il.forwardRef(({speed:t=1,...e},r)=>{let[n]=Il.useState(()=>new i3);return cQ(i=>n&&(n.time=i.clock.getElapsedTime()*t)),Il.createElement("primitive",te({object:n,ref:r,attach:"material"},e))});import*as Rr from"react";import{Plane as EQ,Vector3 as Dl,Matrix4 as AM,Vector4 as yM,PerspectiveCamera as bQ,WebGLRenderTarget as vM,DepthTexture as _Q,DepthFormat as CQ,UnsignedShortType as RQ,LinearFilter as EM,HalfFloatType as BQ}from"three";import{extend as xQ,useThree as n3,useFrame as MQ}from"@react-three/fiber";import{WebGLRenderTarget as uQ,LinearFilter as hM,HalfFloatType as fQ,Vector2 as gQ,Scene as hQ,Camera as mQ,BufferGeometry as AQ,BufferAttribute as mM,Mesh as yQ}from"three";import*as Cr from"three";var Wh=class extends Cr.ShaderMaterial{constructor(e=new Cr.Vector2){super({uniforms:{inputBuffer:new Cr.Uniform(null),depthBuffer:new Cr.Uniform(null),resolution:new Cr.Uniform(new Cr.Vector2),texelSize:new Cr.Uniform(new Cr.Vector2),halfTexelSize:new Cr.Uniform(new Cr.Vector2),kernel:new Cr.Uniform(0),scale:new Cr.Uniform(1),cameraNear:new Cr.Uniform(0),cameraFar:new Cr.Uniform(1),minDepthThreshold:new Cr.Uniform(0),maxDepthThreshold:new Cr.Uniform(1),depthScale:new Cr.Uniform(0),depthToBlurRatioBias:new Cr.Uniform(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:Cr.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,r){this.uniforms.texelSize.value.set(e,r),this.uniforms.halfTexelSize.value.set(e,r).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}};var Fl=class{constructor({gl:e,resolution:r,width:n=500,height:i=500,minDepthThreshold:o=0,maxDepthThreshold:s=1,depthScale:p=0,depthToBlurRatioBias:l=.25}){this.renderToScreen=!1,this.renderTargetA=new uQ(r,r,{minFilter:hM,magFilter:hM,stencilBuffer:!1,depthBuffer:!1,type:fQ}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new Wh,this.convolutionMaterial.setTexelSize(1/n,1/i),this.convolutionMaterial.setResolution(new gQ(n,i)),this.scene=new hQ,this.camera=new mQ,this.convolutionMaterial.uniforms.minDepthThreshold.value=o,this.convolutionMaterial.uniforms.maxDepthThreshold.value=s,this.convolutionMaterial.uniforms.depthScale.value=p,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=l,this.convolutionMaterial.defines.USE_DEPTH=p>0;let c=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),u=new Float32Array([0,0,2,0,0,2]),d=new AQ;d.setAttribute("position",new mM(c,3)),d.setAttribute("uv",new mM(u,2)),this.screen=new yQ(d,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,r,n){let i=this.scene,o=this.camera,s=this.renderTargetA,p=this.renderTargetB,l=this.convolutionMaterial,c=l.uniforms;c.depthBuffer.value=r.depthTexture;let u=l.kernel,d=r,f,g,v;for(g=0,v=u.length-1;g<v;++g)f=(g&1)===0?s:p,c.kernel.value=u[g],c.inputBuffer.value=d.texture,e.setRenderTarget(f),e.render(i,o),d=f;c.kernel.value=u[g],c.inputBuffer.value=d.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(i,o)}};import{MeshStandardMaterial as vQ}from"three";var Ol=class extends vQ{constructor(e={}){super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var r;(r=e.defines)!=null&&r.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),e.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}};var wQ=Rr.forwardRef(({mixBlur:t=0,mixStrength:e=1,resolution:r=256,blur:n=[0,0],minDepthThreshold:i=.9,maxDepthThreshold:o=1,depthScale:s=0,depthToBlurRatioBias:p=.25,mirror:l=0,distortion:c=1,mixContrast:u=1,distortionMap:d,reflectorOffset:f=0,...g},v)=>{xQ({MeshReflectorMaterialImpl:Ol});let A=n3(({gl:L})=>L),m=n3(({camera:L})=>L),h=n3(({scene:L})=>L);n=Array.isArray(n)?n:[n,n];let y=n[0]+n[1]>0,E=Rr.useRef(null),[b]=Rr.useState(()=>new EQ),[_]=Rr.useState(()=>new Dl),[C]=Rr.useState(()=>new Dl),[B]=Rr.useState(()=>new Dl),[R]=Rr.useState(()=>new AM),[M]=Rr.useState(()=>new Dl(0,0,-1)),[x]=Rr.useState(()=>new yM),[T]=Rr.useState(()=>new Dl),[w]=Rr.useState(()=>new Dl),[S]=Rr.useState(()=>new yM),[I]=Rr.useState(()=>new AM),[G]=Rr.useState(()=>new bQ),H=Rr.useCallback(()=>{var L;let Q=E.current.parent||((L=E.current)==null?void 0:L.__r3f.parent);if(!Q||(C.setFromMatrixPosition(Q.matrixWorld),B.setFromMatrixPosition(m.matrixWorld),R.extractRotation(Q.matrixWorld),_.set(0,0,1),_.applyMatrix4(R),C.addScaledVector(_,f),T.subVectors(C,B),T.dot(_)>0))return;T.reflect(_).negate(),T.add(C),R.extractRotation(m.matrixWorld),M.set(0,0,-1),M.applyMatrix4(R),M.add(B),w.subVectors(C,M),w.reflect(_).negate(),w.add(C),G.position.copy(T),G.up.set(0,1,0),G.up.applyMatrix4(R),G.up.reflect(_),G.lookAt(w),G.far=m.far,G.updateMatrixWorld(),G.projectionMatrix.copy(m.projectionMatrix),I.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),I.multiply(G.projectionMatrix),I.multiply(G.matrixWorldInverse),I.multiply(Q.matrixWorld),b.setFromNormalAndCoplanarPoint(_,C),b.applyMatrix4(G.matrixWorldInverse),x.set(b.normal.x,b.normal.y,b.normal.z,b.constant);let V=G.projectionMatrix;S.x=(Math.sign(x.x)+V.elements[8])/V.elements[0],S.y=(Math.sign(x.y)+V.elements[9])/V.elements[5],S.z=-1,S.w=(1+V.elements[10])/V.elements[14],x.multiplyScalar(2/x.dot(S)),V.elements[2]=x.x,V.elements[6]=x.y,V.elements[10]=x.z+1,V.elements[14]=x.w},[m,f]),[X,Z,z,Y]=Rr.useMemo(()=>{let L={minFilter:EM,magFilter:EM,type:BQ},Q=new vM(r,r,L);Q.depthBuffer=!0,Q.depthTexture=new _Q(r,r),Q.depthTexture.format=CQ,Q.depthTexture.type=RQ;let V=new vM(r,r,L),N=new Fl({gl:A,resolution:r,width:n[0],height:n[1],minDepthThreshold:i,maxDepthThreshold:o,depthScale:s,depthToBlurRatioBias:p}),P={mirror:l,textureMatrix:I,mixBlur:t,tDiffuse:Q.texture,tDepth:Q.depthTexture,tDiffuseBlur:V.texture,hasBlur:y,mixStrength:e,minDepthThreshold:i,maxDepthThreshold:o,depthScale:s,depthToBlurRatioBias:p,distortion:c,distortionMap:d,mixContrast:u,"defines-USE_BLUR":y?"":void 0,"defines-USE_DEPTH":s>0?"":void 0,"defines-USE_DISTORTION":d?"":void 0};return[Q,V,N,P]},[A,n,I,r,l,y,t,e,i,o,s,p,c,d,u]);return MQ(()=>{var L;let Q=E.current.parent||((L=E.current)==null?void 0:L.__r3f.parent);if(!Q)return;Q.visible=!1;let V=A.xr.enabled,N=A.shadowMap.autoUpdate;H(),A.xr.enabled=!1,A.shadowMap.autoUpdate=!1,A.setRenderTarget(X),A.state.buffers.depth.setMask(!0),A.autoClear||A.clear(),A.render(h,G),y&&z.render(A,X,Z),A.xr.enabled=V,A.shadowMap.autoUpdate=N,Q.visible=!0,A.setRenderTarget(null)}),Rr.createElement("meshReflectorMaterialImpl",te({attach:"material",key:"key"+Y["defines-USE_BLUR"]+Y["defines-USE_DEPTH"]+Y["defines-USE_DISTORTION"],ref:tt([E,v])},Y,g))});import*as _M from"react";import{useRef as TQ,useMemo as SQ,useLayoutEffect as IQ}from"react";import{extend as FQ,useThree as OQ,useFrame as DQ}from"@react-three/fiber";import*as rp from"three";var bM=Mr({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new Tl,color:new rp.Color("white"),resolution:new rp.Vector2,viewMatrixInverse:new rp.Matrix4,projectionMatrixInverse:new rp.Matrix4},`
  uniform mat4 viewMatrixInverse;

  varying vec3 vWorldPosition;  
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif

  void main() {        
    vec4 transformedNormal = vec4(normal, 0.0);
    vec4 transformedPosition = vec4(position, 1.0);
    #ifdef USE_INSTANCING
      transformedNormal = instanceMatrix * transformedNormal;
      transformedPosition = instanceMatrix * transformedPosition;
    #endif

    #ifdef USE_INSTANCING
      vModelMatrixInverse = inverse(modelMatrix * instanceMatrix);
    #else
      vModelMatrixInverse = inverse(modelMatrix);
    #endif

    #ifdef USE_INSTANCING_COLOR
      vInstanceColor = instanceColor.rgb;
    #endif

    vWorldPosition = (modelMatrix * transformedPosition).xyz;
    vNormal = normalize((viewMatrixInverse * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz);
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;
  }`,`
  #define ENVMAP_TYPE_CUBE_UV
  precision highp isampler2D;
  precision highp usampler2D;
  varying vec3 vWorldPosition;
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif
    
  #ifdef ENVMAP_TYPE_CUBEM
    uniform samplerCube envMap;
  #else
    uniform sampler2D envMap;
  #endif
    
  uniform float bounces;
  ${sM}
  ${pM}
  uniform BVH bvh;
  uniform float ior;
  uniform bool correctMips;
  uniform vec2 resolution;
  uniform float fresnel;
  uniform mat4 modelMatrix;
  uniform mat4 projectionMatrixInverse;
  uniform mat4 viewMatrixInverse;
  uniform float aberrationStrength;
  uniform vec3 color;
  
  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {
    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );
  }
    
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {
    vec3 rayOrigin = ro;
    vec3 rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = vWorldPosition + rayDirection * 0.001;
    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;
    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);
    for(float i = 0.0; i < bounces; i++) {
      uvec4 faceIndices = uvec4( 0u );
      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );
      vec3 barycoord = vec3( 0.0 );
      float side = 1.0;
      float dist = 0.0;
      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );
      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);      
      vec3 tempDir = refract(rayDirection, faceNormal, ior);
      if (length(tempDir) != 0.0) {
        rayDirection = tempDir;
        break;
      }
      rayDirection = reflect(rayDirection, faceNormal);
      rayOrigin = hitPos + rayDirection * 0.01;
    }
    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);
    return rayDirection;
  }
    
  #include <common>
  #include <cube_uv_reflection_fragment>
    
  #ifdef ENVMAP_TYPE_CUBEM
    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));
    }
  #else
    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      vec2 uvv = equirectUv( rayDirection );
      vec2 smoothUv = equirectUv( directionCamPerfect );
      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));
    }
  #endif
  
  void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    vec3 directionCamPerfect = (projectionMatrixInverse * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;
    directionCamPerfect = (viewMatrixInverse * vec4(directionCamPerfect, 0.0)).xyz;
    directionCamPerfect = normalize(directionCamPerfect);
    vec3 normal = vNormal;
    vec3 rayOrigin = cameraPosition;
    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);
    vec3 finalColor;
    #ifdef CHROMATIC_ABERRATIONS
      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      #ifdef FAST_CHROMA 
        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));
        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));
      #else
        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), vModelMatrixInverse);
        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), vModelMatrixInverse);
      #endif
      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;
      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;
      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;
      finalColor = vec3(finalColorR, finalColorG, finalColorB);
    #else
      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      finalColor = textureGradient(envMap, rayDirection, directionCamPerfect).rgb;    
    #endif

    finalColor *= color;
    #ifdef USE_INSTANCING_COLOR
      finalColor *= vInstanceColor;
    #endif

    vec3 viewDirection = normalize(vWorldPosition - cameraPosition);
    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;
    gl_FragColor = vec4(mix(finalColor, vec3(1.0), nFresnel), 1.0);      
    #include <tonemapping_fragment>
    #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
  }`);var kQ=t=>t&&t.isCubeTexture;function LQ({aberrationStrength:t=0,fastChroma:e=!0,envMap:r,...n}){FQ({MeshRefractionMaterial:bM});let i=TQ(),{size:o}=OQ(),s=SQ(()=>{var p,l;let c={},u=kQ(r),f=((p=u?(l=r.image[0])==null?void 0:l.width:r.image.width)!==null&&p!==void 0?p:1024)/4,g=Math.floor(Math.log2(f)),v=Math.pow(2,g),A=3*Math.max(v,112),m=4*v;return u&&(c.ENVMAP_TYPE_CUBEM=""),c.CUBEUV_TEXEL_WIDTH=`${1/A}`,c.CUBEUV_TEXEL_HEIGHT=`${1/m}`,c.CUBEUV_MAX_MIP=`${g}.0`,t>0&&(c.CHROMATIC_ABERRATIONS=""),e&&(c.FAST_CHROMA=""),c},[t,e]);return IQ(()=>{var p;let l=(p=i.current)==null||(p=p.__r3f)==null||(p=p.parent)==null?void 0:p.geometry;l&&(i.current.bvh=new Tl,i.current.bvh.updateFrom(new $s(l.clone().toNonIndexed(),{lazyGeneration:!1,strategy:2})))},[]),DQ(({camera:p})=>{i.current.viewMatrixInverse=p.matrixWorld,i.current.projectionMatrixInverse=p.projectionMatrixInverse}),_M.createElement("meshRefractionMaterial",te({key:JSON.stringify(s),defines:s,ref:i,resolution:[o.width,o.height],aberrationStrength:t,envMap:r},n))}import*as Kn from"three";import*as Xn from"react";import{extend as PQ,useFrame as GQ}from"@react-three/fiber";var kl=Mr({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");var a3=class extends Kn.MeshPhysicalMaterial{constructor(e=6,r=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new Kn.Color("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=n=>{n.uniforms={...n.uniforms,...this.uniforms},this.anisotropy>0&&(n.defines.USE_ANISOTROPY=""),r?n.defines.USE_SAMPLER="":n.defines.USE_TRANSMISSION="",n.fragmentShader=`
      uniform float chromaticAberration;         
      uniform float anisotropicBlur;      
      uniform float time;
      uniform float distortion;
      uniform float distortionScale;
      uniform float temporalDistortion;
      uniform sampler2D buffer;

      vec3 random3(vec3 c) {
        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
        vec3 r;
        r.z = fract(512.0*j);
        j *= .125;
        r.x = fract(512.0*j);
        j *= .125;
        r.y = fract(512.0*j);
        return r-0.5;
      }

      float seed = 0.0;
      uint hash( uint x ) {
        x += ( x << 10u );
        x ^= ( x >>  6u );
        x += ( x <<  3u );
        x ^= ( x >> 11u );
        x += ( x << 15u );
        return x;
      }

      // Compound versions of the hashing algorithm I whipped together.
      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }
      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }
      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }

      // Construct a float with half-open range [0:1] using low 23 bits.
      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.
      float floatConstruct( uint m ) {
        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask
        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32
        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)
        m |= ieeeOne;                          // Add fractional part to 1.0
        float  f = uintBitsToFloat( m );       // Range [1:2]
        return f - 1.0;                        // Range [0:1]
      }

      // Pseudo-random value in half-open range [0:1].
      float random( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }
      float random( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float random( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float random( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }

      float rand() {
        float result = random(vec3(gl_FragCoord.xy, seed));
        seed += 1.0;
        return result;
      }

      const float F3 =  0.3333333;
      const float G3 =  0.1666667;

      float snoise(vec3 p) {
        vec3 s = floor(p + dot(p, vec3(F3)));
        vec3 x = p - s + dot(s, vec3(G3));
        vec3 e = step(vec3(0.0), x - x.yzx);
        vec3 i1 = e*(1.0 - e.zxy);
        vec3 i2 = 1.0 - e.zxy*(1.0 - e);
        vec3 x1 = x - i1 + G3;
        vec3 x2 = x - i2 + 2.0*G3;
        vec3 x3 = x - 1.0 + 3.0*G3;
        vec4 w, d;
        w.x = dot(x, x);
        w.y = dot(x1, x1);
        w.z = dot(x2, x2);
        w.w = dot(x3, x3);
        w = max(0.6 - w, 0.0);
        d.x = dot(random3(s), x);
        d.y = dot(random3(s + i1), x1);
        d.z = dot(random3(s + i2), x2);
        d.w = dot(random3(s + 1.0), x3);
        w *= w;
        w *= w;
        d *= w;
        return dot(d, vec4(52.0));
      }

      float snoiseFractal(vec3 m) {
        return 0.5333333* snoise(m)
              +0.2666667* snoise(2.0*m)
              +0.1333333* snoise(4.0*m)
              +0.0666667* snoise(8.0*m);
      }
`+n.fragmentShader,n.fragmentShader=n.fragmentShader.replace("#include <transmission_pars_fragment>",`
        #ifdef USE_TRANSMISSION
          // Transmission code is based on glTF-Sampler-Viewer
          // https://github.com/KhronosGroup/glTF-Sample-Viewer
          uniform float _transmission;
          uniform float thickness;
          uniform float attenuationDistance;
          uniform vec3 attenuationColor;
          #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
          #endif
          #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
          #endif
          uniform vec2 transmissionSamplerSize;
          uniform sampler2D transmissionSamplerMap;
          uniform mat4 modelMatrix;
          uniform mat4 projectionMatrix;
          varying vec3 vWorldPosition;
          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            // Direction of refracted light.
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            // Compute rotation-independant scaling of the model matrix.
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            // The thickness is specified in local space.
            return normalize( refractionVector ) * thickness * modelScale;
          }
          float applyIorToRoughness( const in float roughness, const in float ior ) {
            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
            // an IOR of 1.5 results in the default amount of microfacet refraction.
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
          }
          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            
            #ifdef USE_SAMPLER
              #ifdef texture2DLodEXT
                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #else
                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #endif
            #else
              return texture2D(buffer, fragCoord.xy);
            #endif
          }
          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
              // Attenuation distance is +\u221E, i.e. the transmitted color is not attenuated at all.
              return radiance;
            } else {
              // Compute light attenuation using Beer's law.
              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
              return transmittance * radiance;
            }
          }
          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
            vec3 refractedRayExit = position + transmissionRay;
            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
            refractionCoords += 1.0;
            refractionCoords /= 2.0;
            // Sample framebuffer to get pixel the refracted ray hits.
            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
            // Get the specular component.
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
          }
        #endif
`),n.fragmentShader=n.fragmentShader.replace("#include <transmission_fragment>",`  
        // Improve the refraction to use the world pos
        material.transmission = _transmission;
        material.transmissionAlpha = 1.0;
        material.thickness = thickness;
        material.attenuationDistance = attenuationDistance;
        material.attenuationColor = attenuationColor;
        #ifdef USE_TRANSMISSIONMAP
          material.transmission *= texture2D( transmissionMap, vUv ).r;
        #endif
        #ifdef USE_THICKNESSMAP
          material.thickness *= texture2D( thicknessMap, vUv ).g;
        #endif
        
        vec3 pos = vWorldPosition;
        vec3 v = normalize( cameraPosition - pos );
        vec3 n = inverseTransformDirection( normal, viewMatrix );
        vec3 transmission = vec3(0.0);
        float transmissionR, transmissionB, transmissionG;
        float randomCoords = rand();
        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);
        vec3 distortionNormal = vec3(0.0);
        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;
        if (distortion > 0.0) {
          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));
        }
        for (float i = 0.0; i < ${e}.0; i ++) {
          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand() - 0.5, rand() - 0.5, rand() - 0.5)) * pow(rand(), 0.33) + distortionNormal);
          transmissionR = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).r;
          transmissionG = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${e})) , material.thickness + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).g;
          transmissionB = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${e})), material.thickness + thickness_smear * (i + randomCoords) / float(${e}),
            material.attenuationColor, material.attenuationDistance
          ).b;
          transmission.r += transmissionR;
          transmission.g += transmissionG;
          transmission.b += transmissionB;
        }
        transmission /= ${e}.0;
        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
`)},Object.keys(this.uniforms).forEach(n=>Object.defineProperty(this,n,{get:()=>this.uniforms[n].value,set:i=>this.uniforms[n].value=i}))}},zQ=Xn.forwardRef(({buffer:t,transmissionSampler:e=!1,backside:r=!1,side:n=Kn.FrontSide,transmission:i=1,thickness:o=0,backsideThickness:s=0,samples:p=10,resolution:l,backsideResolution:c,background:u,anisotropy:d,anisotropicBlur:f,...g},v)=>{PQ({MeshTransmissionMaterial:a3});let A=Xn.useRef(null),[m]=Xn.useState(()=>new kl),h=zr(c||l),y=zr(l),E,b,_;return GQ(C=>{A.current.time=C.clock.getElapsedTime(),A.current.buffer===y.texture&&!e&&(_=A.current.__r3f.parent,_&&(b=C.gl.toneMapping,E=C.scene.background,C.gl.toneMapping=Kn.NoToneMapping,u&&(C.scene.background=u),_.material=m,r&&(C.gl.setRenderTarget(h),C.gl.render(C.scene,C.camera),_.material=A.current,_.material.buffer=h.texture,_.material.thickness=s,_.material.side=Kn.BackSide),C.gl.setRenderTarget(y),C.gl.render(C.scene,C.camera),_.material=A.current,_.material.thickness=o,_.material.side=n,_.material.buffer=y.texture,C.scene.background=E,C.gl.setRenderTarget(null),C.gl.toneMapping=b))}),Xn.useImperativeHandle(v,()=>A.current,[]),Xn.createElement("meshTransmissionMaterial",te({args:[p,e],ref:A},g,{buffer:t||y.texture,_transmission:i,anisotropicBlur:f??d,transmission:e?i:0,thickness:o,side:n}))});import*as Vh from"react";import{extend as NQ}from"@react-three/fiber";var UQ=Vh.forwardRef((t,e)=>(NQ({DiscardMaterialImpl:kl}),Vh.createElement("discardMaterialImpl",te({ref:e},t))));import*as CM from"three";import*as Ll from"react";var s3=er>=154?"opaque_fragment":"output_fragment",Yh=class extends CM.PointsMaterial{constructor(e){super(e),this.onBeforeCompile=(r,n)=>{let{isWebGL2:i}=n.capabilities;r.fragmentShader=r.fragmentShader.replace(`#include <${s3}>`,`
        ${i?`#include <${s3}>`:`#extension GL_OES_standard_derivatives : enable
#include <${s3}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}},jQ=Ll.forwardRef((t,e)=>{let[r]=Ll.useState(()=>new Yh(null));return Ll.createElement("primitive",te({},t,{object:r,ref:e,attach:"material"}))});import*as BM from"react";import*as uu from"three";import{useThree as p3}from"@react-three/fiber";var HQ=({focus:t=0,size:e=25,samples:r=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${e})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${t});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${r}; i ++) {
    offset = (vogelDiskSample(j, ${r}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${r}; i++) {
    vogelSample = vogelDiskSample(j, ${r}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${e}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${r}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function RM(t,e,r){e.traverse(n=>{n.material&&(t.properties.remove(n.material),n.material.dispose==null||n.material.dispose())}),t.info.programs.length=0,t.compile(e,r)}function QQ({focus:t=0,samples:e=10,size:r=25}){let n=p3(s=>s.gl),i=p3(s=>s.scene),o=p3(s=>s.camera);return BM.useEffect(()=>{let s=uu.ShaderChunk.shadowmap_pars_fragment;return uu.ShaderChunk.shadowmap_pars_fragment=uu.ShaderChunk.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+HQ({size:r,samples:e,focus:t})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),RM(n,i,o),()=>{uu.ShaderChunk.shadowmap_pars_fragment=s,RM(n,i,o)}},[t,r,e]),null}import*as Cn from"react";import*as Pl from"three";function to(t,e){let r=t+"Geometry";return Cn.forwardRef(({args:n,children:i,...o},s)=>{let p=Cn.useRef(null);return Cn.useImperativeHandle(s,()=>p.current),Cn.useLayoutEffect(()=>void e?.(p.current)),Cn.createElement("mesh",te({ref:p},o),Cn.createElement(r,{attach:"geometry",args:n}),i)})}var WQ=to("box"),VQ=to("circle"),YQ=to("cone"),KQ=to("cylinder"),XQ=to("sphere"),JQ=to("plane"),qQ=to("tube"),ZQ=to("torus"),$Q=to("torusKnot"),eW=to("tetrahedron"),tW=to("ring"),rW=to("polyhedron"),oW=to("icosahedron"),iW=to("octahedron"),nW=to("dodecahedron"),aW=to("extrude"),sW=to("lathe"),pW=to("capsule"),lW=to("shape",({geometry:t})=>{let e=t.attributes.position,r=new Pl.Box3().setFromBufferAttribute(e),n=new Pl.Vector3;r.getSize(n);let i=[],o=0,s=0,p=0,l=0;for(let c=0;c<e.count;c++)o=e.getX(c),s=e.getY(c),p=(o-r.min.x)/n.x,l=(s-r.min.y)/n.y,i.push(p,l);t.setAttribute("uv",new Pl.Float32BufferAttribute(i,2))});import*as ji from"react";import{Shape as cW}from"three";var Jn=1e-5;function dW(t,e,r){let n=new cW,i=r-Jn;return n.absarc(Jn,Jn,Jn,-Math.PI/2,-Math.PI,!0),n.absarc(Jn,e-i*2,Jn,Math.PI,Math.PI/2,!0),n.absarc(t-i*2,e-i*2,Jn,Math.PI/2,0,!0),n.absarc(t-i*2,Jn,Jn,0,-Math.PI/2,!0),n}var uW=ji.forwardRef(function({args:[e=1,r=1,n=1]=[],radius:i=.05,steps:o=1,smoothness:s=4,bevelSegments:p=4,creaseAngle:l=.4,children:c,...u},d){let f=ji.useMemo(()=>dW(e,r,i),[e,r,i]),g=ji.useMemo(()=>({depth:n-i*2,bevelEnabled:!0,bevelSegments:p*2,steps:o,bevelSize:i-Jn,bevelThickness:i,curveSegments:s}),[n,i,s]),v=ji.useRef(null);return ji.useLayoutEffect(()=>{v.current&&(v.current.center(),Sc(v.current,l))},[f,g]),ji.createElement("mesh",te({ref:d},u),ji.createElement("extrudeGeometry",{ref:v,args:[f,g]}),c)});import*as ts from"three";import*as Gl from"react";function fW(){let t=new ts.BufferGeometry,e=new Float32Array([-1,-1,3,-1,-1,3]);return t.boundingSphere=new ts.Sphere,t.boundingSphere.set(new ts.Vector3,1/0),t.setAttribute("position",new ts.BufferAttribute(e,2)),t}var gW=Gl.forwardRef(function({children:e,...r},n){let i=Gl.useMemo(fW,[]);return Gl.createElement("mesh",te({ref:n,geometry:i,frustumCulled:!1},r),e)});import*as xM from"three";import*as ni from"react";var hW=ni.forwardRef(({children:t,width:e,height:r,depth:n,box3:i,precise:o=!0,...s},p)=>{let l=ni.useRef(null),c=ni.useRef(null),u=ni.useRef(null);return ni.useLayoutEffect(()=>{c.current.matrixWorld.identity();let d=i||new xM.Box3().setFromObject(u.current,o),f=d.max.x-d.min.x,g=d.max.y-d.min.y,v=d.max.z-d.min.z,A=Math.max(f,g,v);e&&(A=f),r&&(A=g),n&&(A=v),c.current.scale.setScalar(1/A)},[e,r,n,i,o]),ni.useImperativeHandle(p,()=>l.current,[]),ni.createElement("group",te({ref:l},s),ni.createElement("group",{ref:c},ni.createElement("group",{ref:u},t)))});import*as Yr from"react";import*as yr from"three";import{useThree as mW,useFrame as AW}from"@react-three/fiber";var zl=t=>t&&t.isOrthographicCamera,yW=t=>t&&t.isBox3,MM=Yr.createContext(null);function l3({children:t,damping:e=6,fit:r,clip:n,observe:i,margin:o=1.2,eps:s=.01,onFit:p}){let l=Yr.useRef(null),{camera:c,invalidate:u,size:d,controls:f}=mW(),g=f,v=Yr.useRef(p);v.current=p;function A(C,B){return Math.abs(C.x-B.x)<s&&Math.abs(C.y-B.y)<s&&Math.abs(C.z-B.z)<s}function m(C,B,R,M){C.x=yr.MathUtils.damp(C.x,B.x,R,M),C.y=yr.MathUtils.damp(C.y,B.y,R,M),C.z=yr.MathUtils.damp(C.z,B.z,R,M)}let[h]=Yr.useState(()=>({animating:!1,focus:new yr.Vector3,camera:new yr.Vector3,zoom:1})),[y]=Yr.useState(()=>({focus:new yr.Vector3,camera:new yr.Vector3,zoom:1})),[E]=Yr.useState(()=>new yr.Box3),b=Yr.useMemo(()=>{function C(){let B=E.getSize(new yr.Vector3),R=E.getCenter(new yr.Vector3),M=Math.max(B.x,B.y,B.z),x=zl(c)?M*4:M/(2*Math.atan(Math.PI*c.fov/360)),T=zl(c)?M*4:x/c.aspect,w=o*Math.max(x,T);return{box:E,size:B,center:R,distance:w}}return{getSize:C,refresh(B){if(yW(B))E.copy(B);else{let R=B||l.current;if(!R)return this;R.updateWorldMatrix(!0,!0),E.setFromObject(R)}if(E.isEmpty()){let R=c.position.length()||10;E.setFromCenterAndSize(new yr.Vector3,new yr.Vector3(R,R,R))}if(g?.constructor.name==="OrthographicTrackballControls"){let{distance:R}=C(),M=c.position.clone().sub(g.target).normalize().multiplyScalar(R),x=g.target.clone().add(M);c.position.copy(x)}return this},clip(){let{distance:B}=C();return g&&(g.maxDistance=B*10),c.near=B/100,c.far=B*100,c.updateProjectionMatrix(),g&&g.update(),u(),this},to({position:B,target:R}){h.camera.copy(c.position);let{center:M}=C();return y.camera.set(...B),R?y.focus.set(...R):y.focus.copy(M),e?h.animating=!0:c.position.set(...B),this},fit(){h.camera.copy(c.position),g&&h.focus.copy(g.target);let{center:B,distance:R}=C(),M=B.clone().sub(c.position).normalize().multiplyScalar(R);if(y.camera.copy(B).sub(M),y.focus.copy(B),zl(c)){h.zoom=c.zoom;let x=0,T=0,w=[new yr.Vector3(E.min.x,E.min.y,E.min.z),new yr.Vector3(E.min.x,E.max.y,E.min.z),new yr.Vector3(E.min.x,E.min.y,E.max.z),new yr.Vector3(E.min.x,E.max.y,E.max.z),new yr.Vector3(E.max.x,E.max.y,E.max.z),new yr.Vector3(E.max.x,E.max.y,E.min.z),new yr.Vector3(E.max.x,E.min.y,E.max.z),new yr.Vector3(E.max.x,E.min.y,E.min.z)];B.applyMatrix4(c.matrixWorldInverse);for(let G of w)G.applyMatrix4(c.matrixWorldInverse),x=Math.max(x,Math.abs(G.y-B.y)),T=Math.max(T,Math.abs(G.x-B.x));x*=2,T*=2;let S=(c.top-c.bottom)/x,I=(c.right-c.left)/T;y.zoom=Math.min(S,I)/o,e||(c.zoom=y.zoom,c.updateProjectionMatrix())}return e?h.animating=!0:(c.position.copy(y.camera),c.lookAt(y.focus),g&&(g.target.copy(y.focus),g.update())),v.current&&v.current(this.getSize()),u(),this}}},[E,c,g,o,e,u]);Yr.useLayoutEffect(()=>{if(g){let C=()=>h.animating=!1;return g.addEventListener("start",C),()=>g.removeEventListener("start",C)}},[g]);let _=Yr.useRef(0);return Yr.useLayoutEffect(()=>{(i||_.current++===0)&&(b.refresh(),r&&b.fit(),n&&b.clip())},[d,n,r,i,c,g]),AW((C,B)=>{if(h.animating){if(m(h.focus,y.focus,e,B),m(h.camera,y.camera,e,B),h.zoom=yr.MathUtils.damp(h.zoom,y.zoom,e,B),c.position.copy(h.camera),zl(c)&&(c.zoom=h.zoom,c.updateProjectionMatrix()),g?(g.target.copy(h.focus),g.update()):c.lookAt(h.focus),u(),zl(c)&&!(Math.abs(h.zoom-y.zoom)<s)||!zl(c)&&!A(h.camera,y.camera)||g&&!A(h.focus,y.focus))return;h.animating=!1}}),Yr.createElement("group",{ref:l},Yr.createElement(MM.Provider,{value:b},t))}function c3(){return Yr.useContext(MM)}import*as Ri from"react";import{useThree as wM,useFrame as vW}from"@react-three/fiber";var EW=Ri.forwardRef(({intensity:t=1,decay:e,decayRate:r=.65,maxYaw:n=.1,maxPitch:i=.1,maxRoll:o=.1,yawFrequency:s=.1,pitchFrequency:p=.1,rollFrequency:l=.1},c)=>{let u=wM(y=>y.camera),d=wM(y=>y.controls),f=Ri.useRef(t),g=Ri.useRef(u.rotation.clone()),[v]=Ri.useState(()=>new Es),[A]=Ri.useState(()=>new Es),[m]=Ri.useState(()=>new Es),h=()=>{(f.current<0||f.current>1)&&(f.current=f.current<0?0:1)};return Ri.useImperativeHandle(c,()=>({getIntensity:()=>f.current,setIntensity:y=>{f.current=y,h()}}),[]),Ri.useEffect(()=>{if(d){let y=()=>void(g.current=u.rotation.clone());return d.addEventListener("change",y),y(),()=>void d.removeEventListener("change",y)}},[u,d]),vW((y,E)=>{let b=Math.pow(f.current,2),_=n*b*v.noise(y.clock.elapsedTime*s,1),C=i*b*A.noise(y.clock.elapsedTime*p,1),B=o*b*m.noise(y.clock.elapsedTime*l,1);u.rotation.set(g.current.x+C,g.current.y+_,g.current.z+B),e&&f.current>0&&(f.current-=r*E,h())}),null});import*as rs from"react";import{useFrame as bW}from"@react-three/fiber";import*as TM from"three";var _W=rs.forwardRef(({children:t,enabled:e=!0,speed:r=1,rotationIntensity:n=1,floatIntensity:i=1,floatingRange:o=[-.1,.1],...s},p)=>{let l=rs.useRef(null),c=rs.useRef(Math.random()*1e4);return bW(u=>{var d,f;if(!e||r===0)return;let g=c.current+u.clock.getElapsedTime();l.current.rotation.x=Math.cos(g/4*r)/8*n,l.current.rotation.y=Math.sin(g/4*r)/8*n,l.current.rotation.z=Math.sin(g/4*r)/20*n;let v=Math.sin(g/4*r)/10;v=TM.MathUtils.mapLinear(v,-.1,.1,(d=o?.[0])!==null&&d!==void 0?d:-.1,(f=o?.[1])!==null&&f!==void 0?f:.1),l.current.position.y=v*i,l.current.updateMatrix()}),rs.createElement("group",s,rs.createElement("group",{ref:tt([l,p]),matrixAutoUpdate:!1},t))});import*as Nr from"react";import*as Vt from"react";import{useThree as Jh,useFrame as wW,createPortal as TW,extend as SW}from"@react-three/fiber";import{Scene as IW,WebGLCubeRenderTarget as FW,HalfFloatType as OW}from"three";import{useLoader as CW}from"@react-three/fiber";import{CubeReflectionMapping as RW,EquirectangularReflectionMapping as BW,CubeTextureLoader as xW}from"three";var Kh={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"};var MW="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",SM=t=>Array.isArray(t);function Xh({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:r=void 0,encoding:n=void 0,extensions:i}={}){var o;let s=null,p=!1,l;if(r){if(!(r in Kh))throw new Error("Preset must be one of: "+Object.keys(Kh).join(", "));t=Kh[r],e=MW}if(p=SM(t),l=SM(t)?"cube":t.startsWith("data:application/exr")?"exr":t.startsWith("data:application/hdr")?"hdr":(o=t.split(".").pop())==null||(o=o.split("?"))==null||(o=o.shift())==null?void 0:o.toLowerCase(),s=p?xW:l==="hdr"?Ad:l==="exr"?vd:null,!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);let c=CW(s,p?[t]:t,g=>{g.setPath==null||g.setPath(e),i&&i(g)}),u=p?c[0]:c;u.mapping=p?RW:BW;let d=3001,f=3e3;return"colorSpace"in u?u.colorSpace=n??p?"srgb":"srgb-linear":u.encoding=n??p?d:f,u}var DW=t=>t.current&&t.current.isScene,kW=t=>DW(t)?t.current:t;function d3(t,e,r,n,i=0){let o=kW(e||r),s=o.background,p=o.environment,l=o.backgroundBlurriness||0;return t!=="only"&&(o.environment=n),t&&(o.background=n),t&&o.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=i),()=>{t!=="only"&&(o.environment=p),t&&(o.background=s),t&&o.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=l)}}function qh({scene:t,background:e=!1,blur:r,map:n}){let i=Jh(o=>o.scene);return Vt.useLayoutEffect(()=>{if(n)return d3(e,t,i,n,r)},[i,t,n,e,r]),null}function u3({background:t=!1,scene:e,blur:r,...n}){let i=Xh(n),o=Jh(s=>s.scene);return Vt.useLayoutEffect(()=>d3(t,e,o,i,r),[i,t,e,o,r]),null}function IM({children:t,near:e=1,far:r=1e3,resolution:n=256,frames:i=1,map:o,background:s=!1,blur:p,scene:l,files:c,path:u,preset:d=void 0,extensions:f}){let g=Jh(E=>E.gl),v=Jh(E=>E.scene),A=Vt.useRef(null),[m]=Vt.useState(()=>new IW),h=Vt.useMemo(()=>{let E=new FW(n);return E.texture.type=OW,E},[n]);Vt.useLayoutEffect(()=>(i===1&&A.current.update(g,m),d3(s,l,v,h.texture,p)),[t,m,h.texture,l,v,s,i,g]);let y=1;return wW(()=>{(i===1/0||y<i)&&(A.current.update(g,m),y++)}),Vt.createElement(Vt.Fragment,null,TW(Vt.createElement(Vt.Fragment,null,t,Vt.createElement("cubeCamera",{ref:A,args:[e,r,h]}),c||d?Vt.createElement(u3,{background:!0,files:c,preset:d,path:u,extensions:f}):o?Vt.createElement(qh,{background:!0,map:o,extensions:f}):null),m))}function LW(t){var e,r,n,i;let o=Xh(t),s=t.map||o;Vt.useMemo(()=>SW({GroundProjectedEnvImpl:Lc}),[]);let p=Vt.useMemo(()=>[s],[s]),l=(e=t.ground)==null?void 0:e.height,c=(r=t.ground)==null?void 0:r.radius,u=(n=(i=t.ground)==null?void 0:i.scale)!==null&&n!==void 0?n:1e3;return Vt.createElement(Vt.Fragment,null,Vt.createElement(qh,te({},t,{map:s})),Vt.createElement("groundProjectedEnvImpl",{args:p,scale:u,height:l,radius:c}))}function f3(t){return t.ground?Vt.createElement(LW,t):t.map?Vt.createElement(qh,t):t.children?Vt.createElement(IM,t):Vt.createElement(u3,t)}import*as ai from"react";import*as si from"three";import{useThree as FM,useFrame as PW}from"@react-three/fiber";var g3=ai.forwardRef(({scale:t=10,frames:e=1/0,opacity:r=1,width:n=1,height:i=1,blur:o=1,near:s=0,far:p=10,resolution:l=512,smooth:c=!0,color:u="#000000",depthWrite:d=!1,renderOrder:f,...g},v)=>{let A=ai.useRef(null),m=FM(I=>I.scene),h=FM(I=>I.gl),y=ai.useRef(null);n=n*(Array.isArray(t)?t[0]:t||1),i=i*(Array.isArray(t)?t[1]:t||1);let[E,b,_,C,B,R,M]=ai.useMemo(()=>{let I=new si.WebGLRenderTarget(l,l),G=new si.WebGLRenderTarget(l,l);G.texture.generateMipmaps=I.texture.generateMipmaps=!1;let H=new si.PlaneGeometry(n,i).rotateX(Math.PI/2),X=new si.Mesh(H),Z=new si.MeshDepthMaterial;Z.depthTest=Z.depthWrite=!1,Z.onBeforeCompile=L=>{L.uniforms={...L.uniforms,ucolor:{value:new si.Color(u)}},L.fragmentShader=L.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),L.fragmentShader=L.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};let z=new si.ShaderMaterial(V1),Y=new si.ShaderMaterial(Y1);return Y.depthTest=z.depthTest=!1,[I,H,Z,X,z,Y,G]},[l,n,i,t,u]),x=I=>{C.visible=!0,C.material=B,B.uniforms.tDiffuse.value=E.texture,B.uniforms.h.value=I*1/256,h.setRenderTarget(M),h.render(C,y.current),C.material=R,R.uniforms.tDiffuse.value=M.texture,R.uniforms.v.value=I*1/256,h.setRenderTarget(E),h.render(C,y.current),C.visible=!1},T=0,w,S;return PW(()=>{y.current&&(e===1/0||T<e)&&(T++,w=m.background,S=m.overrideMaterial,A.current.visible=!1,m.background=null,m.overrideMaterial=_,h.setRenderTarget(E),h.render(m,y.current),x(o),c&&x(o*.4),h.setRenderTarget(null),A.current.visible=!0,m.overrideMaterial=S,m.background=w)}),ai.useImperativeHandle(v,()=>A.current,[]),ai.createElement("group",te({"rotation-x":Math.PI/2},g,{ref:A}),ai.createElement("mesh",{renderOrder:f,geometry:b,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},ai.createElement("meshBasicMaterial",{transparent:!0,map:E.texture,opacity:r,depthWrite:d})),ai.createElement("orthographicCamera",{ref:y,args:[-n/2,n/2,i/2,-i/2,s,p]}))});import*as ro from"three";import*as At from"react";import{extend as GW,useThree as Zh,useFrame as zW}from"@react-three/fiber";function NW(t){return t.isLight}function UW(t){return!!t.geometry}var m3=At.createContext(null),jW=Mr({color:new ro.Color,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),A3=At.forwardRef(({children:t,temporal:e,frames:r=40,limit:n=1/0,blend:i=20,scale:o=10,opacity:s=1,alphaTest:p=.75,color:l="black",colorBlend:c=2,resolution:u=1024,toneMapped:d=!0,...f},g)=>{GW({SoftShadowMaterial:jW});let v=Zh(C=>C.gl),A=Zh(C=>C.scene),m=Zh(C=>C.camera),h=Zh(C=>C.invalidate),y=At.useRef(null),E=At.useRef(null),[b]=At.useState(()=>new h3(v,A,u));At.useLayoutEffect(()=>{b.configure(y.current)},[]);let _=At.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,r),blend:Math.max(2,r===1/0?i:r),count:0,getMesh:()=>y.current,reset:()=>{b.clear();let C=y.current.material;C.opacity=0,C.alphaTest=0,_.count=0},update:(C=1)=>{let B=y.current.material;_.temporal?(B.opacity=Math.min(s,B.opacity+s/_.blend),B.alphaTest=Math.min(p,B.alphaTest+p/_.blend)):(B.opacity=s,B.alphaTest=p),E.current.visible=!0,b.prepare();for(let R=0;R<C;R++)_.lights.forEach(M=>M.update()),b.update(m,_.blend);E.current.visible=!1,b.finish()}}),[b,m,A,e,r,i,s,p]);return At.useLayoutEffect(()=>{_.reset(),!_.temporal&&_.frames!==1/0&&_.update(_.blend)}),At.useImperativeHandle(g,()=>_,[_]),zW(()=>{(_.temporal||_.frames===1/0)&&_.count<_.frames&&_.count<n&&(h(),_.update(),_.count++)}),At.createElement("group",f,At.createElement("group",{traverse:()=>null,ref:E},At.createElement(m3.Provider,{value:_},t)),At.createElement("mesh",{receiveShadow:!0,ref:y,scale:o,rotation:[-Math.PI/2,0,0]},At.createElement("planeGeometry",null),At.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:d,color:l,blend:c,map:b.progressiveLightMap2.texture})))}),y3=At.forwardRef(({castShadow:t=!0,bias:e=.001,mapSize:r=512,size:n=5,near:i=.5,far:o=500,frames:s=1,position:p=[0,0,0],radius:l=1,amount:c=8,intensity:u=er>=155?Math.PI:1,ambient:d=.5,...f},g)=>{let v=At.useRef(null),A=new ro.Vector3(...p).length(),m=At.useContext(m3),h=At.useCallback(()=>{let E;if(v.current)for(let b=0;b<v.current.children.length;b++)if(E=v.current.children[b],Math.random()>d)E.position.set(p[0]+ro.MathUtils.randFloatSpread(l),p[1]+ro.MathUtils.randFloatSpread(l),p[2]+ro.MathUtils.randFloatSpread(l));else{let _=Math.acos(2*Math.random()-1)-Math.PI/2,C=2*Math.PI*Math.random();E.position.set(Math.cos(_)*Math.cos(C)*A,Math.abs(Math.cos(_)*Math.sin(C)*A),Math.sin(_)*A)}},[l,d,A,...p]),y=At.useMemo(()=>({update:h}),[h]);return At.useImperativeHandle(g,()=>y,[y]),At.useLayoutEffect(()=>{let E=v.current;return m&&m.lights.set(E.uuid,y),()=>void m.lights.delete(E.uuid)},[m,y]),At.createElement("group",te({ref:v},f),Array.from({length:c},(E,b)=>At.createElement("directionalLight",{key:b,castShadow:t,"shadow-bias":e,"shadow-mapSize":[r,r],intensity:u/c},At.createElement("orthographicCamera",{attach:"shadow-camera",args:[-n,n,n,-n,i,o]}))))}),h3=class{constructor(e,r,n=1024){this.renderer=e,this.res=n,this.scene=r,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new ro.Color,this.clearAlpha=0;let i={type:ro.HalfFloatType,magFilter:ro.NearestFilter,minFilter:ro.NearestFilter};this.progressiveLightMap1=new ro.WebGLRenderTarget(this.res,this.res,i),this.progressiveLightMap2=new ro.WebGLRenderTarget(this.res,this.res,i),this.discardMat=new kl,this.targetMat=new ro.MeshLambertMaterial({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=o=>{o.vertexShader=`varying vec2 vUv;
`+o.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";let s=o.fragmentShader.indexOf("void main() {");o.fragmentShader=`varying vec2 vUv;
`+o.fragmentShader.slice(0,s)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+o.fragmentShader.slice(s-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,o.uniforms.previousShadowMap=this.previousShadowMap,o.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{UW(e)?this.meshes.push({object:e,material:e.material}):NW(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,r=100){if(!this.object)return;this.averagingWindow.value=r,this.object.material=this.targetMat;let n=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,i=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,o=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(n),this.previousShadowMap.value=i.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=o}};var HW={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function QW({radius:t,adjustCamera:e}){let r=c3();return Nr.useEffect(()=>{e&&r.refresh().clip().fit()},[t,e]),null}function WW({children:t,center:e,adjustCamera:r=!0,intensity:n=.5,shadows:i="contact",environment:o="city",preset:s="rembrandt",...p}){var l,c,u,d,f,g,v,A;let m=typeof s=="string"?HW[s]:s,[{radius:h,height:y},E]=Nr.useState({radius:0,width:0,height:0,depth:0}),b=(l=i?.bias)!==null&&l!==void 0?l:-1e-4,_=(c=i?.normalBias)!==null&&c!==void 0?c:0,C=(u=i?.size)!==null&&u!==void 0?u:1024,B=(d=i?.offset)!==null&&d!==void 0?d:0,R=i==="contact"||i?.type==="contact",M=i==="accumulative"||i?.type==="accumulative",x={...typeof i=="object"?i:{}},T=o?typeof o=="string"?{preset:o}:o:null,w=Nr.useCallback(S=>{let{width:I,height:G,depth:H,boundingSphere:X}=S;E({radius:X.radius,width:I,height:G,depth:H}),e!=null&&e.onCentered&&e.onCentered(S)},[]);return Nr.createElement(Nr.Fragment,null,Nr.createElement("ambientLight",{intensity:n/3}),Nr.createElement("spotLight",{penumbra:1,position:[m.main[0]*h,m.main[1]*h,m.main[2]*h],intensity:n*2,castShadow:!!i,"shadow-bias":b,"shadow-normalBias":_,"shadow-mapSize":C}),Nr.createElement("pointLight",{position:[m.fill[0]*h,m.fill[1]*h,m.fill[2]*h],intensity:n}),Nr.createElement(l3,te({fit:!!r,clip:!!r,margin:Number(r),observe:!0},p),Nr.createElement(QW,{radius:h,adjustCamera:r}),Nr.createElement(du,te({},e,{position:[0,B/2,0],onCentered:w}),t)),Nr.createElement("group",{position:[0,-y/2-B/2,0]},R&&Nr.createElement(g3,te({scale:h*4,far:h,blur:2},x)),M&&Nr.createElement(A3,te({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:h*4},x),Nr.createElement(y3,{amount:(f=x.amount)!==null&&f!==void 0?f:8,radius:(g=x.radius)!==null&&g!==void 0?g:h,ambient:(v=x.ambient)!==null&&v!==void 0?v:.5,intensity:(A=x.intensity)!==null&&A!==void 0?A:1,position:[m.main[0]*h,m.main[1]*h,m.main[2]*h],size:h*4,bias:-b,mapSize:C}))),o&&Nr.createElement(f3,T))}import*as os from"react";var VW=t=>t===0?0:Math.pow(2,10*t-10);function YW({children:t,floor:e=.25,segments:r=20,receiveShadow:n,...i}){let o=os.useRef(null);return os.useLayoutEffect(()=>{let s=0,p=r/r/2,l=o.current.attributes.position;for(let c=0;c<r+1;c++)for(let u=0;u<r+1;u++)l.setXYZ(s++,c/r-p+(c===0?-e:0),u/r-p,VW(c/r));l.needsUpdate=!0,o.current.computeVertexNormals()},[r,e]),os.createElement("group",i,os.createElement("mesh",{receiveShadow:n,rotation:[-Math.PI/2,0,Math.PI/2]},os.createElement("planeGeometry",{ref:o,args:[1,1,r,r]}),t))}import*as ha from"react";import{Color as KW,DoubleSide as XW}from"three";var JW=ha.forwardRef(({fog:t=!1,renderOrder:e,depthWrite:r=!1,colorStop:n=0,color:i="black",opacity:o=.5,...s},p)=>{let l=ha.useMemo(()=>{let c=document.createElement("canvas");c.width=128,c.height=128;let u=c.getContext("2d"),d=u.createRadialGradient(c.width/2,c.height/2,0,c.width/2,c.height/2,c.width/2);return d.addColorStop(n,new KW(i).getStyle()),d.addColorStop(1,"rgba(0,0,0,0)"),u.fillStyle=d,u.fillRect(0,0,c.width,c.height),c},[i,n]);return ha.createElement("mesh",te({renderOrder:e,ref:p,"rotation-x":-Math.PI/2},s),ha.createElement("planeGeometry",null),ha.createElement("meshBasicMaterial",{transparent:!0,opacity:o,fog:t,depthWrite:r,side:XW},ha.createElement("canvasTexture",{attach:"map",args:[l]})))});import*as Ye from"three";import*as fr from"react";import{extend as qW,useThree as ZW,useFrame as $W}from"@react-three/fiber";function OM(t=Ye.FrontSide){let e={value:new Ye.Matrix4};return Object.assign(new Ye.MeshNormalMaterial({side:t}),{viewMatrix:e,onBeforeCompile:r=>{r.uniforms.viewMatrix=e,r.fragmentShader=`vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
           return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
         }
`+r.fragmentShader.replace("#include <normal_fragment_maps>",`#include <normal_fragment_maps>
           normal = inverseTransformDirection( normal, viewMatrix );
`)}})}var eV=Mr({causticsTexture:null,causticsTextureB:null,color:new Ye.Color,lightProjMatrix:new Ye.Matrix4,lightViewMatrix:new Ye.Matrix4},`varying vec3 vWorldPosition;   
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vec4 worldPosition = modelMatrix * vec4(position, 1.);
     vWorldPosition = worldPosition.xyz;
   }`,`varying vec3 vWorldPosition;
  uniform vec3 color;
  uniform sampler2D causticsTexture; 
  uniform sampler2D causticsTextureB; 
  uniform mat4 lightProjMatrix;
  uniform mat4 lightViewMatrix;
   void main() {
    // Apply caustics  
    vec4 lightSpacePos = lightProjMatrix * lightViewMatrix * vec4(vWorldPosition, 1.0);
    lightSpacePos.xyz /= lightSpacePos.w;
    lightSpacePos.xyz = lightSpacePos.xyz * 0.5 + 0.5; 
    vec3 front = texture2D(causticsTexture, lightSpacePos.xy).rgb;
    vec3 back = texture2D(causticsTextureB, lightSpacePos.xy).rgb;
    gl_FragColor = vec4((front + back) * color, 1.0);
    #include <tonemapping_fragment>
    #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),tV=Mr({cameraMatrixWorld:new Ye.Matrix4,cameraProjectionMatrixInv:new Ye.Matrix4,normalTexture:null,depthTexture:null,lightDir:new Ye.Vector3(0,1,0),lightPlaneNormal:new Ye.Vector3(0,1,0),lightPlaneConstant:0,near:.1,far:100,modelMatrix:new Ye.Matrix4,worldRadius:1/40,ior:1.1,bounces:0,resolution:1024,size:10,intensity:.5},`
  varying vec2 vUv;
  void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }`,`  
  uniform mat4 cameraMatrixWorld;
  uniform mat4 cameraProjectionMatrixInv;
  uniform vec3 lightDir;
  uniform vec3 lightPlaneNormal;
  uniform float lightPlaneConstant;
  uniform float near;
  uniform float far;
  uniform float time;
  uniform float worldRadius;
  uniform float resolution;
  uniform float size;
  uniform float intensity;
  uniform float ior;
  precision highp isampler2D;
  precision highp usampler2D;
  uniform sampler2D normalTexture;
  uniform sampler2D depthTexture;
  uniform float bounces;
  varying vec2 vUv;
  vec3 WorldPosFromDepth(float depth, vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = cameraProjectionMatrixInv * clipSpacePosition;
    // Perspective division
    viewSpacePosition /= viewSpacePosition.w;
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    return worldSpacePosition.xyz;
  }                  
  float sdPlane( vec3 p, vec3 n, float h ) {
    // n must be normalized
    return dot(p,n) + h;
  }
  float planeIntersect( vec3 ro, vec3 rd, vec4 p ) {
    return -(dot(ro,p.xyz)+p.w)/dot(rd,p.xyz);
  }
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 pos, vec3 normal, float ior, out vec3 rayOrigin, out vec3 rayDirection) {
    rayOrigin = ro;
    rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = pos + rayDirection * 0.1;
    return rayDirection;
  }
  void main() {
    // Each sample consists of random offset in the x and y direction
    float caustic = 0.0;
    float causticTexelSize = (1.0 / resolution) * size * 2.0;
    float texelsNeeded = worldRadius / causticTexelSize;
    float sampleRadius = texelsNeeded / resolution;
    float sum = 0.0;
    if (texture2D(depthTexture, vUv).x == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec2 offset1 = vec2(-0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset2 = vec2(-0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset3 = vec2(0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset4 = vec2(0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 uv1 = vUv + offset1 * sampleRadius;
    vec2 uv2 = vUv + offset2 * sampleRadius;
    vec2 uv3 = vUv + offset3 * sampleRadius;
    vec2 uv4 = vUv + offset4 * sampleRadius;
    vec3 normal1 = texture2D(normalTexture, uv1, -10.0).rgb * 2.0 - 1.0;
    vec3 normal2 = texture2D(normalTexture, uv2, -10.0).rgb * 2.0 - 1.0;
    vec3 normal3 = texture2D(normalTexture, uv3, -10.0).rgb * 2.0 - 1.0;
    vec3 normal4 = texture2D(normalTexture, uv4, -10.0).rgb * 2.0 - 1.0;
    float depth1 = texture2D(depthTexture, uv1, -10.0).x;
    float depth2 = texture2D(depthTexture, uv2, -10.0).x;
    float depth3 = texture2D(depthTexture, uv3, -10.0).x;
    float depth4 = texture2D(depthTexture, uv4, -10.0).x;
    // Sanity check the depths
    if (depth1 == 1.0 || depth2 == 1.0 || depth3 == 1.0 || depth4 == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec3 pos1 = WorldPosFromDepth(depth1, uv1);
    vec3 pos2 = WorldPosFromDepth(depth2, uv2);
    vec3 pos3 = WorldPosFromDepth(depth3, uv3);
    vec3 pos4 = WorldPosFromDepth(depth4, uv4);
    vec3 originPos1 = WorldPosFromDepth(0.0, uv1);
    vec3 originPos2 = WorldPosFromDepth(0.0, uv2);
    vec3 originPos3 = WorldPosFromDepth(0.0, uv3);
    vec3 originPos4 = WorldPosFromDepth(0.0, uv4);
    vec3 endPos1, endPos2, endPos3, endPos4;
    vec3 endDir1, endDir2, endDir3, endDir4;
    totalInternalReflection(originPos1, lightDir, pos1, normal1, ior, endPos1, endDir1);
    totalInternalReflection(originPos2, lightDir, pos2, normal2, ior, endPos2, endDir2);
    totalInternalReflection(originPos3, lightDir, pos3, normal3, ior, endPos3, endDir3);
    totalInternalReflection(originPos4, lightDir, pos4, normal4, ior, endPos4, endDir4);
    float lightPosArea = length(cross(originPos2 - originPos1, originPos3 - originPos1)) + length(cross(originPos3 - originPos1, originPos4 - originPos1));
    float t1 = planeIntersect(endPos1, endDir1, vec4(lightPlaneNormal, lightPlaneConstant));
    float t2 = planeIntersect(endPos2, endDir2, vec4(lightPlaneNormal, lightPlaneConstant));
    float t3 = planeIntersect(endPos3, endDir3, vec4(lightPlaneNormal, lightPlaneConstant));
    float t4 = planeIntersect(endPos4, endDir4, vec4(lightPlaneNormal, lightPlaneConstant));
    vec3 finalPos1 = endPos1 + endDir1 * t1;
    vec3 finalPos2 = endPos2 + endDir2 * t2;
    vec3 finalPos3 = endPos3 + endDir3 * t3;
    vec3 finalPos4 = endPos4 + endDir4 * t4;
    float finalArea = length(cross(finalPos2 - finalPos1, finalPos3 - finalPos1)) + length(cross(finalPos3 - finalPos1, finalPos4 - finalPos1));
    caustic += intensity * (lightPosArea / finalArea);
    // Calculate the area of the triangle in light spaces
    gl_FragColor = vec4(vec3(max(caustic, 0.0)), 1.0);
  }`),DM={depth:!0,minFilter:Ye.LinearFilter,magFilter:Ye.LinearFilter,type:Ye.UnsignedByteType},kM={minFilter:Ye.LinearMipmapLinearFilter,magFilter:Ye.LinearFilter,type:Ye.FloatType,generateMipmaps:!0},rV=fr.forwardRef(({debug:t,children:e,frames:r=1,ior:n=1.1,color:i="white",causticsOnly:o=!1,backside:s=!1,backsideIOR:p=1.1,worldRadius:l=.3125,intensity:c=.05,resolution:u=2024,lightSource:d=[5,5,5],...f},g)=>{qW({CausticsProjectionMaterial:eV});let v=fr.useRef(null),A=fr.useRef(null),m=fr.useRef(null),h=fr.useRef(null),y=ZW(k=>k.gl),E=x2(t&&A,Ye.CameraHelper),b=zr(u,u,DM),_=zr(u,u,DM),C=zr(u,u,kM),B=zr(u,u,kM),[R]=fr.useState(()=>OM()),[M]=fr.useState(()=>OM(Ye.BackSide)),[x]=fr.useState(()=>new tV),[T]=fr.useState(()=>new So(x));fr.useLayoutEffect(()=>{v.current.updateWorldMatrix(!1,!0)});let w=0,S=new Ye.Vector3,I=new Ye.Frustum,G=new Ye.Matrix4,H=new Ye.Plane,X=new Ye.Vector3,Z=new Ye.Vector3,z=new Ye.Box3,Y=new Ye.Vector3,L=[],Q=[],V=[],N=[],P=new Ye.Vector3;for(let k=0;k<8;k++)L.push(new Ye.Vector3),Q.push(new Ye.Vector3),V.push(new Ye.Vector3),N.push(new Ye.Vector3);return $W(()=>{if(r===1/0||w++<r){var k,O;Array.isArray(d)?X.fromArray(d).normalize():X.copy(v.current.worldToLocal(d.current.getWorldPosition(S)).normalize()),Z.copy(X).multiplyScalar(-1),(k=m.current.parent)==null||k.matrixWorld.identity(),z.setFromObject(m.current,!0),L[0].set(z.min.x,z.min.y,z.min.z),L[1].set(z.min.x,z.min.y,z.max.z),L[2].set(z.min.x,z.max.y,z.min.z),L[3].set(z.min.x,z.max.y,z.max.z),L[4].set(z.max.x,z.min.y,z.min.z),L[5].set(z.max.x,z.min.y,z.max.z),L[6].set(z.max.x,z.max.y,z.min.z),L[7].set(z.max.x,z.max.y,z.max.z);for(let W=0;W<8;W++)Q[W].copy(L[W]);z.getCenter(Y),L.map(W=>W.sub(Y));let D=H.set(Z,0);L.map((W,j)=>D.projectPoint(W,V[j]));let q=V.reduce((W,j)=>W.add(j),S.set(0,0,0)).divideScalar(V.length),ae=V.map(W=>W.distanceTo(q)).reduce((W,j)=>Math.max(W,j)),K=L.map(W=>W.dot(X)).reduce((W,j)=>Math.max(W,j));A.current.position.copy(P.copy(X).multiplyScalar(K).add(Y)),A.current.lookAt(m.current.localToWorld(Y));let re=G.lookAt(A.current.position,Y,S.set(0,1,0));A.current.left=-ae,A.current.right=ae,A.current.top=ae,A.current.bottom=-ae;let he=S.set(0,ae,0).applyMatrix4(re),me=(A.current.position.y+he.y)/X.y;A.current.near=.1,A.current.far=me,A.current.updateProjectionMatrix(),A.current.updateMatrixWorld();let J=Q.map((W,j)=>W.add(N[j].copy(X).multiplyScalar(-W.y/X.y))),oe=J.reduce((W,j)=>W.add(j),S.set(0,0,0)).divideScalar(J.length),ce=2*J.map(W=>Math.hypot(W.x-oe.x,W.z-oe.z)).reduce((W,j)=>Math.max(W,j));h.current.scale.setScalar(ce),h.current.position.copy(oe),t&&((O=E.current)==null||O.update()),M.viewMatrix.value=R.viewMatrix.value=A.current.matrixWorldInverse;let ie=I.setFromProjectionMatrix(G.multiplyMatrices(A.current.projectionMatrix,A.current.matrixWorldInverse)).planes[4];x.cameraMatrixWorld=A.current.matrixWorld,x.cameraProjectionMatrixInv=A.current.projectionMatrixInverse,x.lightDir=Z,x.lightPlaneNormal=ie.normal,x.lightPlaneConstant=ie.constant,x.near=A.current.near,x.far=A.current.far,x.resolution=u,x.size=ae,x.intensity=c,x.worldRadius=l,m.current.visible=!0,y.setRenderTarget(b),y.clear(),m.current.overrideMaterial=R,y.render(m.current,A.current),y.setRenderTarget(_),y.clear(),s&&(m.current.overrideMaterial=M,y.render(m.current,A.current)),m.current.overrideMaterial=null,x.ior=n,h.current.material.lightProjMatrix=A.current.projectionMatrix,h.current.material.lightViewMatrix=A.current.matrixWorldInverse,x.normalTexture=b.texture,x.depthTexture=b.depthTexture,y.setRenderTarget(C),y.clear(),T.render(y),x.ior=p,x.normalTexture=_.texture,x.depthTexture=_.depthTexture,y.setRenderTarget(B),y.clear(),s&&T.render(y),y.setRenderTarget(null),o&&(m.current.visible=!1)}}),fr.useImperativeHandle(g,()=>v.current,[]),fr.createElement("group",te({ref:v},f),fr.createElement("scene",{ref:m},fr.createElement("orthographicCamera",{ref:A,up:[0,1,0]}),e),fr.createElement("mesh",{renderOrder:2,ref:h,"rotation-x":-Math.PI/2},fr.createElement("planeGeometry",null),fr.createElement("causticsProjectionMaterial",{transparent:!0,color:i,causticsTexture:C.texture,causticsTextureB:B.texture,blending:Ye.CustomBlending,blendSrc:Ye.OneFactor,blendDst:Ye.SrcAlphaFactor,depthWrite:!1}),t&&fr.createElement(ZA,null,fr.createElement("lineBasicMaterial",{color:"#ffff00",toneMapped:!1}))))});import*as or from"react";import{Plane as oV,Vector3 as Nl,Matrix4 as LM,Vector4 as PM,PerspectiveCamera as iV,WebGLRenderTarget as GM,DepthTexture as nV,DepthFormat as aV,UnsignedShortType as sV,HalfFloatType as pV,LinearFilter as zM}from"three";import{extend as lV,useThree as v3,useFrame as cV}from"@react-three/fiber";var dV=or.forwardRef(({mixBlur:t=0,mixStrength:e=.5,resolution:r=256,blur:n=[0,0],args:i=[1,1],minDepthThreshold:o=.9,maxDepthThreshold:s=1,depthScale:p=0,depthToBlurRatioBias:l=.25,mirror:c=0,children:u,debug:d=0,distortion:f=1,mixContrast:g=1,distortionMap:v,...A},m)=>{lV({MeshReflectorMaterial:Ol}),or.useEffect(()=>{console.warn("Reflector has been deprecated and will be removed next major. Replace it with <MeshReflectorMaterial />!")},[]);let h=v3(({gl:V})=>V),y=v3(({camera:V})=>V),E=v3(({scene:V})=>V);n=Array.isArray(n)?n:[n,n];let b=n[0]+n[1]>0,_=or.useRef(null),[C]=or.useState(()=>new oV),[B]=or.useState(()=>new Nl),[R]=or.useState(()=>new Nl),[M]=or.useState(()=>new Nl),[x]=or.useState(()=>new LM),[T]=or.useState(()=>new Nl(0,0,-1)),[w]=or.useState(()=>new PM),[S]=or.useState(()=>new Nl),[I]=or.useState(()=>new Nl),[G]=or.useState(()=>new PM),[H]=or.useState(()=>new LM),[X]=or.useState(()=>new iV),Z=or.useCallback(()=>{if(R.setFromMatrixPosition(_.current.matrixWorld),M.setFromMatrixPosition(y.matrixWorld),x.extractRotation(_.current.matrixWorld),B.set(0,0,1),B.applyMatrix4(x),S.subVectors(R,M),S.dot(B)>0)return;S.reflect(B).negate(),S.add(R),x.extractRotation(y.matrixWorld),T.set(0,0,-1),T.applyMatrix4(x),T.add(M),I.subVectors(R,T),I.reflect(B).negate(),I.add(R),X.position.copy(S),X.up.set(0,1,0),X.up.applyMatrix4(x),X.up.reflect(B),X.lookAt(I),X.far=y.far,X.updateMatrixWorld(),X.projectionMatrix.copy(y.projectionMatrix),H.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),H.multiply(X.projectionMatrix),H.multiply(X.matrixWorldInverse),H.multiply(_.current.matrixWorld),C.setFromNormalAndCoplanarPoint(B,R),C.applyMatrix4(X.matrixWorldInverse),w.set(C.normal.x,C.normal.y,C.normal.z,C.constant);let V=X.projectionMatrix;G.x=(Math.sign(w.x)+V.elements[8])/V.elements[0],G.y=(Math.sign(w.y)+V.elements[9])/V.elements[5],G.z=-1,G.w=(1+V.elements[10])/V.elements[14],w.multiplyScalar(2/w.dot(G)),V.elements[2]=w.x,V.elements[6]=w.y,V.elements[10]=w.z+1,V.elements[14]=w.w},[]),[z,Y,L,Q]=or.useMemo(()=>{let V={type:pV,minFilter:zM,magFilter:zM},N=new GM(r,r,V);N.depthBuffer=!0,N.depthTexture=new nV(r,r),N.depthTexture.format=aV,N.depthTexture.type=sV;let P=new GM(r,r,V),k=new Fl({gl:h,resolution:r,width:n[0],height:n[1],minDepthThreshold:o,maxDepthThreshold:s,depthScale:p,depthToBlurRatioBias:l}),O={mirror:c,textureMatrix:H,mixBlur:t,tDiffuse:N.texture,tDepth:N.depthTexture,tDiffuseBlur:P.texture,hasBlur:b,mixStrength:e,minDepthThreshold:o,maxDepthThreshold:s,depthScale:p,depthToBlurRatioBias:l,transparent:!0,debug:d,distortion:f,distortionMap:v,mixContrast:g,"defines-USE_BLUR":b?"":void 0,"defines-USE_DEPTH":p>0?"":void 0,"defines-USE_DISTORTION":v?"":void 0};return[N,P,k,O]},[h,n,H,r,c,b,t,e,o,s,p,l,d,f,v,g]);return cV(()=>{if(!(_!=null&&_.current))return;_.current.visible=!1;let V=h.xr.enabled,N=h.shadowMap.autoUpdate;Z(),h.xr.enabled=!1,h.shadowMap.autoUpdate=!1,h.setRenderTarget(z),h.state.buffers.depth.setMask(!0),h.autoClear||h.clear(),h.render(E,X),b&&L.render(h,z,Y),h.xr.enabled=V,h.shadowMap.autoUpdate=N,_.current.visible=!0,h.setRenderTarget(null)}),or.createElement("mesh",te({ref:tt([_,m])},A),or.createElement("planeGeometry",{args:i}),u?u("meshReflectorMaterial",Q):or.createElement("meshReflectorMaterial",Q))});import*as $e from"react";import{Vector3 as b3,CylinderGeometry as uV,Matrix4 as UM,WebGLRenderTarget as fV,RGBAFormat as gV,LinearEncoding as hV,ShaderMaterial as mV,DoubleSide as jM,RepeatWrapping as em}from"three";import{useThree as E3,useFrame as _3}from"@react-three/fiber";import*as is from"three";var $h=class extends is.ShaderMaterial{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new is.Vector3(0,0,0)},lightColor:{value:new is.Color("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new is.Vector2(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      varying float vViewZ;
      varying float vIntensity;
      uniform vec3 spotPosition;
      uniform float attenuation;      

      void main() {
        // compute intensity
        vNormal = normalize( normalMatrix * normal );
        vec4 worldPosition	= modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;
        vec4 viewPosition = viewMatrix * worldPosition;
        vViewZ = viewPosition.z;
        float intensity	= distance(worldPosition.xyz, spotPosition) / attenuation;
        intensity	= 1.0 - clamp(intensity, 0.0, 1.0);
        vIntensity = intensity;        
        // set gl_Position
        gl_Position	= projectionMatrix * viewPosition;

      }`,fragmentShader:`
      #include <packing>

      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      uniform vec3 lightColor;
      uniform vec3 spotPosition;
      uniform float attenuation;
      uniform float anglePower;
      uniform sampler2D depth;
      uniform vec2 resolution;
      uniform float cameraNear;
      uniform float cameraFar;
      varying float vViewZ;
      varying float vIntensity;
      uniform float opacity;

      float readDepth( sampler2D depthSampler, vec2 coord ) {
        float fragCoordZ = texture2D( depthSampler, coord ).x;
        float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
        return viewZ;
      }

      void main() {
        float d = 1.0;
        bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
        if (isSoft) {
          vec2 sUv = gl_FragCoord.xy / resolution;
          d = readDepth(depth, sUv);
        }
        float intensity = vIntensity;
        vec3 normal	= vec3(vNormal.x, vNormal.y, abs(vNormal.z));
        float angleIntensity	= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );
        intensity	*= angleIntensity;
        // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
        if (isSoft) {
          intensity	*= smoothstep(0., 1., vViewZ - d);
        }
        gl_FragColor = vec4(lightColor, intensity * opacity);

        #include <tonemapping_fragment>
	      #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}};var NM=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D uShadowMap;uniform float uTime;void main(){vec3 color=texture2D(uShadowMap,vUv).xyz;gl_FragColor=vec4(color,1.);}`;var AV=t=>t?.isSpotLight;function yV({opacity:t=1,radiusTop:e,radiusBottom:r,depthBuffer:n,color:i="white",distance:o=5,angle:s=.15,attenuation:p=5,anglePower:l=5}){let c=$e.useRef(null),u=E3(m=>m.size),d=E3(m=>m.camera),f=E3(m=>m.viewport.dpr),[g]=$e.useState(()=>new $h),[v]=$e.useState(()=>new b3);e=e===void 0?.1:e,r=r===void 0?s*7:r,_3(()=>{g.uniforms.spotPosition.value.copy(c.current.getWorldPosition(v)),c.current.lookAt(c.current.parent.target.getWorldPosition(v))});let A=$e.useMemo(()=>{let m=new uV(e,r,o,128,64,!0);return m.applyMatrix4(new UM().makeTranslation(0,-o/2,0)),m.applyMatrix4(new UM().makeRotationX(-Math.PI/2)),m},[o,e,r]);return $e.createElement($e.Fragment,null,$e.createElement("mesh",{ref:c,geometry:A,raycast:()=>null},$e.createElement("primitive",{object:g,attach:"material","uniforms-opacity-value":t,"uniforms-lightColor-value":i,"uniforms-attenuation-value":p,"uniforms-anglePower-value":l,"uniforms-depth-value":n,"uniforms-cameraNear-value":d.near,"uniforms-cameraFar-value":d.far,"uniforms-resolution-value":n?[u.width*f,u.height*f]:[0,0]})))}function HM(t,e,r,n,i){let[[o,s]]=$e.useState(()=>[new b3,new b3]);$e.useLayoutEffect(()=>{if(AV(t.current))t.current.shadow.mapSize.set(r,n),t.current.shadow.needsUpdate=!0;else throw new Error("SpotlightShadow must be a child of a SpotLight")},[t,r,n]),_3(()=>{if(!t.current)return;let p=t.current.position,l=t.current.target.position;s.copy(l).sub(p);var c=s.length();s.normalize().multiplyScalar(c*i),o.copy(p).add(s),e.current.position.copy(o),e.current.lookAt(t.current.target.position)})}function vV({distance:t=.4,alphaTest:e=.5,map:r,shader:n=NM,width:i=512,height:o=512,scale:s=1,children:p,...l}){let c=$e.useRef(null),u=l.spotlightRef,d=l.debug;HM(u,c,i,o,t);let f=$e.useMemo(()=>new fV(i,o,{format:gV,encoding:hV,stencilBuffer:!1}),[i,o]),g=$e.useRef({uShadowMap:{value:r},uTime:{value:0}});$e.useEffect(()=>void(g.current.uShadowMap.value=r),[r]);let v=$e.useMemo(()=>new So(new mV({uniforms:g.current,vertexShader:`
          varying vec2 vUv;

          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
          `,fragmentShader:n})),[n]);return $e.useEffect(()=>()=>{v.material.dispose(),v.dispose()},[v]),$e.useEffect(()=>()=>f.dispose(),[f]),_3(({gl:A},m)=>{g.current.uTime.value+=m,A.setRenderTarget(f),v.render(A),A.setRenderTarget(null)}),$e.createElement($e.Fragment,null,$e.createElement("mesh",{ref:c,scale:s,castShadow:!0},$e.createElement("planeGeometry",null),$e.createElement("meshBasicMaterial",{transparent:!0,side:jM,alphaTest:e,alphaMap:f.texture,"alphaMap-wrapS":em,"alphaMap-wrapT":em,opacity:d?1:0},p)))}function EV({distance:t=.4,alphaTest:e=.5,map:r,width:n=512,height:i=512,scale:o,children:s,...p}){let l=$e.useRef(null),c=p.spotlightRef,u=p.debug;return HM(c,l,n,i,t),$e.createElement($e.Fragment,null,$e.createElement("mesh",{ref:l,scale:o,castShadow:!0},$e.createElement("planeGeometry",null),$e.createElement("meshBasicMaterial",{transparent:!0,side:jM,alphaTest:e,alphaMap:r,"alphaMap-wrapS":em,"alphaMap-wrapT":em,opacity:u?1:0},s)))}function bV(t){return t.shader?$e.createElement(vV,t):$e.createElement(EV,t)}var _V=$e.forwardRef(({opacity:t=1,radiusTop:e,radiusBottom:r,depthBuffer:n,color:i="white",distance:o=5,angle:s=.15,attenuation:p=5,anglePower:l=5,volumetric:c=!0,debug:u=!1,children:d,...f},g)=>{let v=$e.useRef(null);return $e.createElement("group",null,u&&v.current&&$e.createElement("spotLightHelper",{args:[v.current]}),$e.createElement("spotLight",te({ref:tt([g,v]),angle:s,color:i,distance:o,castShadow:!0},f),c&&$e.createElement(yV,{debug:u,opacity:t,radiusTop:e,radiusBottom:r,depthBuffer:n,color:i,distance:o,angle:s,attenuation:p,anglePower:l})),d&&$e.cloneElement(d,{spotlightRef:v,debug:u}))});import{applyProps as CV}from"@react-three/fiber";import*as pi from"react";import*as tm from"three";var RV=pi.forwardRef(({args:t,map:e,toneMapped:r=!1,color:n="white",form:i="rect",intensity:o=1,scale:s=1,target:p,children:l,...c},u)=>{let d=pi.useRef(null);return pi.useLayoutEffect(()=>{!l&&!c.material&&(CV(d.current.material,{color:n}),d.current.material.color.multiplyScalar(o))},[n,o,l,c.material]),pi.useLayoutEffect(()=>{p&&d.current.lookAt(Array.isArray(p)?new tm.Vector3(...p):p)},[p]),s=Array.isArray(s)&&s.length===2?[s[0],s[1],1]:s,pi.createElement("mesh",te({ref:tt([d,u]),scale:s},c),i==="circle"?pi.createElement("ringGeometry",{args:[0,1,64]}):i==="ring"?pi.createElement("ringGeometry",{args:[.5,1,64]}):i==="rect"?pi.createElement("planeGeometry",null):pi.createElement(i,{args:t}),l||(c.material?null:pi.createElement("meshBasicMaterial",{toneMapped:r,map:e,side:tm.DoubleSide})))});import*as ns from"react";import{Vector3 as QM}from"three";function WM(t,e,r=new QM){let n=Math.PI*(t-.5),i=2*Math.PI*(e-.5);return r.x=Math.cos(i),r.y=Math.sin(n),r.z=Math.sin(i),r}var BV=ns.forwardRef(({inclination:t=.6,azimuth:e=.1,distance:r=1e3,mieCoefficient:n=.005,mieDirectionalG:i=.8,rayleigh:o=.5,turbidity:s=10,sunPosition:p=WM(t,e),...l},c)=>{let u=ns.useMemo(()=>new QM().setScalar(r),[r]),[d]=ns.useState(()=>new K0);return ns.createElement("primitive",te({object:d,ref:c,"material-uniforms-mieCoefficient-value":n,"material-uniforms-mieDirectionalG-value":i,"material-uniforms-rayleigh-value":o,"material-uniforms-sunPosition-value":p,"material-uniforms-turbidity-value":s,scale:u},l))});import*as Vo from"react";import{useFrame as xV}from"@react-three/fiber";import{Color as MV,AdditiveBlending as wV,ShaderMaterial as TV,Vector3 as SV,Spherical as IV}from"three";var C3=class extends TV{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}},FV=t=>new SV().setFromSpherical(new IV(t,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),OV=Vo.forwardRef(({radius:t=100,depth:e=50,count:r=5e3,saturation:n=0,factor:i=4,fade:o=!1,speed:s=1},p)=>{let l=Vo.useRef(),[c,u,d]=Vo.useMemo(()=>{let g=[],v=[],A=Array.from({length:r},()=>(.5+.5*Math.random())*i),m=new MV,h=t+e,y=e/r;for(let E=0;E<r;E++)h-=y*Math.random(),g.push(...FV(h).toArray()),m.setHSL(E/r,n,.9),v.push(m.r,m.g,m.b);return[new Float32Array(g),new Float32Array(v),new Float32Array(A)]},[r,e,i,t,n]);xV(g=>l.current&&(l.current.uniforms.time.value=g.clock.getElapsedTime()*s));let[f]=Vo.useState(()=>new C3);return Vo.createElement("points",{ref:p},Vo.createElement("bufferGeometry",null,Vo.createElement("bufferAttribute",{attach:"attributes-position",args:[c,3]}),Vo.createElement("bufferAttribute",{attach:"attributes-color",args:[u,3]}),Vo.createElement("bufferAttribute",{attach:"attributes-size",args:[d,1]})),Vo.createElement("primitive",{ref:l,object:f,attach:"material",blending:wV,"uniforms-fade-value":o,depthWrite:!1,transparent:!0,vertexColors:!0}))});import*as lt from"react";import{REVISION as PV,Quaternion as w3,Vector3 as op,DynamicDrawUsage as YM,MeshLambertMaterial as GV,Matrix4 as qM,Color as zV}from"three";import{extend as NV,useFrame as UV,applyProps as jV}from"@react-three/fiber";var rm,DV=new Uint8Array(16);function R3(){if(!rm&&(rm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rm(DV)}var xo=[];for(let t=0;t<256;++t)xo.push((t+256).toString(16).slice(1));function VM(t,e=0){return xo[t[e+0]]+xo[t[e+1]]+xo[t[e+2]]+xo[t[e+3]]+"-"+xo[t[e+4]]+xo[t[e+5]]+"-"+xo[t[e+6]]+xo[t[e+7]]+"-"+xo[t[e+8]]+xo[t[e+9]]+"-"+xo[t[e+10]]+xo[t[e+11]]+xo[t[e+12]]+xo[t[e+13]]+xo[t[e+14]]+xo[t[e+15]]}var kV=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),B3={randomUUID:kV};function LV(t,e,r){if(B3.randomUUID&&!e&&!t)return B3.randomUUID();t=t||{};let n=t.random||(t.rng||R3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return VM(n)}var x3=LV;var HV="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png",KM=new qM,om=new op,im=new w3,XM=new op,JM=new w3,fu=new op,T3=lt.createContext(null),ZM=lt.forwardRef(({children:t,material:e=GV,texture:r=HV,range:n,limit:i=200,...o},s)=>{var p,l;let c=lt.useMemo(()=>class extends e{constructor(){super();let B=parseInt(PV.replace(/\D+/g,""))>=154?"opaque_fragment":"output_fragment";this.onBeforeCompile=R=>{R.vertexShader=`attribute float opacity;
               varying float vOpacity;
              `+R.vertexShader.replace("#include <fog_vertex>",`#include <fog_vertex>
                 vOpacity = opacity;
                `),R.fragmentShader=`varying float vOpacity;
              `+R.fragmentShader.replace(`#include <${B}>`,`#include <${B}>
                 gl_FragColor = vec4(outgoingLight, diffuseColor.a * vOpacity);
                `)}}},[e]);NV({CloudMaterial:c});let u=lt.useRef(null),d=lt.useRef([]),f=lt.useMemo(()=>new Float32Array(Array.from({length:i},()=>1)),[i]),g=lt.useMemo(()=>new Float32Array(Array.from({length:i},()=>[1,1,1]).flat()),[i]),v=un(r),A=0,m=0,h,y=new w3,E=new op(0,0,1),b=new op;UV((B,R)=>{for(A=B.clock.getElapsedTime(),KM.copy(u.current.matrixWorld).invert(),B.camera.matrixWorld.decompose(XM,JM,fu),m=0;m<d.current.length;m++)h=d.current[m],h.ref.current.matrixWorld.decompose(om,im,fu),om.add(b.copy(h.position).applyQuaternion(im).multiply(fu)),im.copy(JM).multiply(y.setFromAxisAngle(E,h.rotation+=R*h.rotationFactor)),fu.multiplyScalar(h.volume+(1+Math.sin(A*h.density*h.speed))/2*h.growth),h.matrix.compose(om,im,fu).premultiply(KM),h.dist=om.distanceTo(XM);for(d.current.sort((M,x)=>x.dist-M.dist),m=0;m<d.current.length;m++)h=d.current[m],f[m]=h.opacity*(h.dist<h.fade-1?h.dist/h.fade:1),u.current.setMatrixAt(m,h.matrix),u.current.setColorAt(m,h.color);u.current.geometry.attributes.opacity.needsUpdate=!0,u.current.instanceMatrix.needsUpdate=!0,u.current.instanceColor&&(u.current.instanceColor.needsUpdate=!0)}),lt.useLayoutEffect(()=>{let B=Math.min(i,n!==void 0?n:i,d.current.length);u.current.count=B,u.current.instanceMatrix.updateRange.count=B*16,u.current.instanceColor&&(u.current.instanceColor.updateRange.count=B*3),u.current.geometry.attributes.opacity.updateRange.count=B});let _=[(p=v.image.width)!==null&&p!==void 0?p:1,(l=v.image.height)!==null&&l!==void 0?l:1],C=Math.max(_[0],_[1]);return _=[_[0]/C,_[1]/C],lt.createElement("group",te({ref:s},o),lt.createElement(T3.Provider,{value:d},t,lt.createElement("instancedMesh",{matrixAutoUpdate:!1,ref:u,args:[null,null,i]},lt.createElement("instancedBufferAttribute",{usage:YM,attach:"instanceColor",args:[g,3]}),lt.createElement("planeGeometry",{args:[..._]},lt.createElement("instancedBufferAttribute",{usage:YM,attach:"attributes-opacity",args:[f,1]})),lt.createElement("cloudMaterial",{key:e.name,map:v,transparent:!0,depthWrite:!1}))))}),M3=lt.forwardRef(({opacity:t=1,speed:e=0,bounds:r=[5,1,1],segments:n=20,color:i="#ffffff",fade:o=10,volume:s=6,smallestVolume:p=.25,distribute:l=null,growth:c=4,concentrate:u="inside",seed:d=Math.random(),...f},g)=>{function v(){let E=Math.sin(d++)*1e4;return E-Math.floor(E)}let A=lt.useContext(T3),m=lt.useRef(null),[h]=lt.useState(()=>x3()),y=lt.useMemo(()=>[...new Array(n)].map((E,b)=>({segments:n,bounds:new op(1,1,1),position:new op,uuid:h,index:b,ref:m,dist:0,matrix:new qM,color:new zV,rotation:b*(Math.PI/n)})),[n,h]);return lt.useLayoutEffect(()=>{y.forEach((E,b)=>{var _;jV(E,{volume:s,color:i,speed:e,growth:c,opacity:t,fade:o,bounds:r,density:Math.max(.5,v()),rotationFactor:Math.max(.2,.5*v())*e});let C=l?.(E,b);(C||n>1)&&E.position.copy(E.bounds).multiply((_=C?.point)!==null&&_!==void 0?_:{x:v()*2-1,y:v()*2-1,z:v()*2-1});let B=Math.abs(E.position.x),R=Math.abs(E.position.y),M=Math.abs(E.position.z),x=Math.max(B,R,M);E.length=1,B===x&&(E.length-=B/E.bounds.x),R===x&&(E.length-=R/E.bounds.y),M===x&&(E.length-=M/E.bounds.z),E.volume=(C?.volume!==void 0?C.volume:Math.max(Math.max(0,p),u==="random"?v():u==="inside"?E.length:1-E.length))*s})},[u,r,o,i,t,c,s,d,n,e]),lt.useLayoutEffect(()=>{let E=y;return A.current=[...A.current,...E],()=>{A.current=A.current.filter(b=>b.uuid!==h)}},[y]),lt.useImperativeHandle(g,()=>m.current,[]),lt.createElement("group",te({ref:m},f))}),QV=lt.forwardRef((t,e)=>lt.useContext(T3)?lt.createElement(M3,te({ref:e},t)):lt.createElement(ZM,null,lt.createElement(M3,te({ref:e},t))));import*as Kr from"react";import*as Rn from"three";import{extend as WV,useThree as VV,useFrame as YV}from"@react-three/fiber";var KV=Mr({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
    }`),$M=t=>t&&t.constructor===Float32Array,XV=t=>[t.r,t.g,t.b],e5=t=>t instanceof Rn.Vector2||t instanceof Rn.Vector3||t instanceof Rn.Vector4,t5=t=>Array.isArray(t)?t:e5(t)?t.toArray():[t,t,t];function gu(t,e,r){return Kr.useMemo(()=>{if(e!==void 0){if($M(e))return e;if(e instanceof Rn.Color){let n=Array.from({length:t*3},()=>XV(e)).flat();return Float32Array.from(n)}else if(e5(e)||Array.isArray(e)){let n=Array.from({length:t*3},()=>t5(e)).flat();return Float32Array.from(n)}return Float32Array.from({length:t},()=>e)}return Float32Array.from({length:t},r)},[e])}var JV=Kr.forwardRef(({noise:t=1,count:e=100,speed:r=1,opacity:n=1,scale:i=1,size:o,color:s,children:p,...l},c)=>{Kr.useMemo(()=>WV({SparklesImplMaterial:KV}),[]);let u=Kr.useRef(null),d=VV(E=>E.viewport.dpr),f=t5(i),g=Kr.useMemo(()=>Float32Array.from(Array.from({length:e},()=>f.map(Rn.MathUtils.randFloatSpread)).flat()),[e,...f]),v=gu(e,o,Math.random),A=gu(e,n),m=gu(e,r),h=gu(e*3,t),y=gu(s===void 0?e*3:e,$M(s)?s:new Rn.Color(s),()=>1);return YV(E=>{u.current&&u.current.material&&(u.current.material.time=E.clock.elapsedTime)}),Kr.useImperativeHandle(c,()=>u.current,[]),Kr.createElement("points",te({key:`particle-${e}-${JSON.stringify(i)}`},l,{ref:u}),Kr.createElement("bufferGeometry",null,Kr.createElement("bufferAttribute",{attach:"attributes-position",args:[g,3]}),Kr.createElement("bufferAttribute",{attach:"attributes-size",args:[v,1]}),Kr.createElement("bufferAttribute",{attach:"attributes-opacity",args:[A,1]}),Kr.createElement("bufferAttribute",{attach:"attributes-speed",args:[m,1]}),Kr.createElement("bufferAttribute",{attach:"attributes-color",args:[y,3]}),Kr.createElement("bufferAttribute",{attach:"attributes-noise",args:[h,3]})),p||Kr.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:d,depthWrite:!1}))});import*as S3 from"react";function qV(t){switch(t){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}var ZV="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/matcaps.json",$V="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d";function eY(t=0,e=1024,r){let n=Oo(()=>fetch(ZV).then(u=>u.json()),["matcapList"]),i=n[0],o=S3.useMemo(()=>Object.keys(n).length,[]),p=`${S3.useMemo(()=>typeof t=="string"?t:typeof t=="number"?n[t]:null,[t])||i}${qV(e)}.png`,l=`${$V}/${e}/${p}`;return[un(l,r),l,o]}import*as nm from"react";import{RepeatWrapping as tY,Vector2 as r5}from"three";var rY="https://rawcdn.githack.com/pmndrs/drei-assets/7a3104997e1576f83472829815b00880d88b32fb",oY="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/normals/normals.json";function iY(t=0,e={},r){let{repeat:n=[1,1],anisotropy:i=1,offset:o=[0,0]}=e,s=Oo(()=>fetch(oY).then(f=>f.json()),["normalsList"]),p=nm.useMemo(()=>Object.keys(s).length,[]),l=s[0],c=s[t]||l,u=`${rY}/normals/${c}`,d=un(u,r);return nm.useLayoutEffect(()=>{d&&(d.wrapS=d.wrapT=tY,d.repeat=new r5(n[0],n[1]),d.offset=new r5(o[0],o[1]),d.anisotropy=i)},[d,i,n,o]),[d,u,p]}import*as oo from"react";import*as am from"three";import{extend as nY}from"@react-three/fiber";import*as ma from"three";import*as Lo from"react";var Aa={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new ma.Color("#ff0000"),backfaceStroke:new ma.Color("#0000ff"),fill:new ma.Color("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},o5=Mr(Aa.uniforms,Aa.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,Aa.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function i5(t,e){t.onBeforeCompile=r=>{r.uniforms={...r.uniforms,...e},r.vertexShader=r.vertexShader.replace("void main() {",`
		  ${Aa.vertex}
		  void main() {
			initWireframe();
		`),r.fragmentShader=r.fragmentShader.replace("void main() {",`
		  ${Aa.fragment}
		  void main() {
		`),r.fragmentShader=r.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},t.side=ma.DoubleSide,t.transparent=!0}function n5(t,e){Lo.useEffect(()=>{var r;return void(t.fillOpacity.value=(r=e.fillOpacity)!==null&&r!==void 0?r:t.fillOpacity.value)},[e.fillOpacity]),Lo.useEffect(()=>{var r;return void(t.fillMix.value=(r=e.fillMix)!==null&&r!==void 0?r:t.fillMix.value)},[e.fillMix]),Lo.useEffect(()=>{var r;return void(t.strokeOpacity.value=(r=e.strokeOpacity)!==null&&r!==void 0?r:t.strokeOpacity.value)},[e.strokeOpacity]),Lo.useEffect(()=>{var r;return void(t.thickness.value=(r=e.thickness)!==null&&r!==void 0?r:t.thickness.value)},[e.thickness]),Lo.useEffect(()=>void(t.colorBackfaces.value=!!e.colorBackfaces),[e.colorBackfaces]),Lo.useEffect(()=>void(t.dash.value=!!e.dash),[e.dash]),Lo.useEffect(()=>void(t.dashInvert.value=!!e.dashInvert),[e.dashInvert]),Lo.useEffect(()=>{var r;return void(t.dashRepeats.value=(r=e.dashRepeats)!==null&&r!==void 0?r:t.dashRepeats.value)},[e.dashRepeats]),Lo.useEffect(()=>{var r;return void(t.dashLength.value=(r=e.dashLength)!==null&&r!==void 0?r:t.dashLength.value)},[e.dashLength]),Lo.useEffect(()=>void(t.squeeze.value=!!e.squeeze),[e.squeeze]),Lo.useEffect(()=>{var r;return void(t.squeezeMin.value=(r=e.squeezeMin)!==null&&r!==void 0?r:t.squeezeMin.value)},[e.squeezeMin]),Lo.useEffect(()=>{var r;return void(t.squeezeMax.value=(r=e.squeezeMax)!==null&&r!==void 0?r:t.squeezeMax.value)},[e.squeezeMax]),Lo.useEffect(()=>void(t.stroke.value=e.stroke?new ma.Color(e.stroke):t.stroke.value),[e.stroke]),Lo.useEffect(()=>void(t.fill.value=e.fill?new ma.Color(e.fill):t.fill.value),[e.fill]),Lo.useEffect(()=>void(t.backfaceStroke.value=e.backfaceStroke?new ma.Color(e.backfaceStroke):t.backfaceStroke.value),[e.backfaceStroke])}function aY(t){return!!(t!=null&&t.geometry)}function sY(t){return!!(t!=null&&t.isBufferGeometry)}function pY(t){return!!(t!=null&&t.current)}function a5(t){return t?.current!==void 0}function s5(t){return t.type==="WireframeGeometry"}function lY(){let t={};for(let e in Aa.uniforms)t[e]={value:Aa.uniforms[e]};return t}function cY(t,e){let n=t.getAttribute("position").count,i=[];for(let o=0;o<n;o++){let s=o%2===0,p=e?1:0;s?i.push(0,0,1,0,1,0,1,0,p):i.push(0,1,0,0,0,1,1,0,p)}return new am.BufferAttribute(Float32Array.from(i),3)}function p5(t){let e=pY(t)?t.current:t;if(sY(e))return e;{if(s5(e))throw new Error("Wireframe: WireframeGeometry is not supported.");let r=e.parent;if(aY(r)){if(s5(r.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return r.geometry}}}function l5(t,e){if(t.index){console.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");let n=t.toNonIndexed();t.copy(n),t.setIndex(null)}let r=cY(t,e);t.setAttribute("barycentric",r)}function dY({geometry:t,simplify:e=!1,...r}){nY({MeshWireframeMaterial:o5});let[n,i]=oo.useState(null);oo.useLayoutEffect(()=>{let s=p5(t);if(!s)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");l5(s,e),a5(t)&&i(s)},[e,t]);let o=a5(t)?n:t;return oo.createElement(oo.Fragment,null,o&&oo.createElement("mesh",{geometry:o},oo.createElement("meshWireframeMaterial",te({attach:"material",transparent:!0,side:am.DoubleSide,polygonOffset:!0,polygonOffsetFactor:-4},r,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function uY({simplify:t=!1,...e}){let r=oo.useRef(null),n=oo.useMemo(()=>lY(),[Aa.uniforms]);return n5(n,e),oo.useLayoutEffect(()=>{let i=p5(r);if(!i)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");let o=i.clone();return l5(i,t),()=>{i.copy(o),o.dispose()}},[t]),oo.useLayoutEffect(()=>{let i=r.current.parent,o=i.material.clone();return i5(i.material,n),()=>{i.material.dispose(),i.material=o}},[]),oo.createElement("object3D",{ref:r})}function fY({geometry:t,...e}){return t?oo.createElement(dY,te({geometry:t},e)):oo.createElement(uY,e)}import*as Fr from"three";import*as ct from"react";import{extend as gY,useFrame as g5}from"@react-three/fiber";var c5=new Fr.Matrix4,I3=new Fr.Ray,d5=new Fr.Sphere,hY=new Fr.Vector3,sm=class extends Fr.Group{constructor(){super(),this.size=0,this.color=new Fr.Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,r){var n,i;let o=this.instance.current;if(!o||!o.geometry)return;let s=o.userData.instances.indexOf(this.instanceKey);if(s===-1||s>o.geometry.drawRange.count)return;let p=(n=(i=e.params.Points)==null?void 0:i.threshold)!==null&&n!==void 0?n:1;if(d5.set(this.getWorldPosition(hY),p),e.ray.intersectsSphere(d5)===!1)return;c5.copy(o.matrixWorld).invert(),I3.copy(e.ray).applyMatrix4(c5);let l=p/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=I3.distanceSqToPoint(this.position);if(u<c){let d=new Fr.Vector3;I3.closestPointToPoint(this.position,d),d.applyMatrix4(this.matrixWorld);let f=e.ray.origin.distanceTo(d);if(f<e.near||f>e.far)return;r.push({distance:f,distanceToRay:Math.sqrt(u),point:d,index:s,face:null,object:this})}}},ip,hu,h5=ct.createContext(null),u5=new Fr.Matrix4,f5=new Fr.Vector3,mY=ct.forwardRef(({children:t,range:e,limit:r=1e3,...n},i)=>{let o=ct.useRef(null),[s,p]=ct.useState([]),[[l,c,u]]=ct.useState(()=>[new Float32Array(r*3),Float32Array.from({length:r*3},()=>1),Float32Array.from({length:r},()=>1)]);ct.useEffect(()=>{o.current.geometry.attributes.position.needsUpdate=!0}),g5(()=>{for(o.current.updateMatrix(),o.current.updateMatrixWorld(),u5.copy(o.current.matrixWorld).invert(),o.current.geometry.drawRange.count=Math.min(r,e!==void 0?e:r,s.length),ip=0;ip<s.length;ip++)hu=s[ip].current,hu.getWorldPosition(f5).applyMatrix4(u5),f5.toArray(l,ip*3),o.current.geometry.attributes.position.needsUpdate=!0,hu.matrixWorldNeedsUpdate=!0,hu.color.toArray(c,ip*3),o.current.geometry.attributes.color.needsUpdate=!0,u.set([hu.size],ip),o.current.geometry.attributes.size.needsUpdate=!0});let d=ct.useMemo(()=>({getParent:()=>o,subscribe:f=>(p(g=>[...g,f]),()=>p(g=>g.filter(v=>v.current!==f.current)))}),[]);return ct.createElement("points",te({userData:{instances:s},matrixAutoUpdate:!1,ref:tt([i,o]),raycast:()=>null},n),ct.createElement("bufferGeometry",null,ct.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:Fr.DynamicDrawUsage}),ct.createElement("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:Fr.DynamicDrawUsage}),ct.createElement("bufferAttribute",{attach:"attributes-size",count:u.length,array:u,itemSize:1,usage:Fr.DynamicDrawUsage})),ct.createElement(h5.Provider,{value:d},t))}),AY=ct.forwardRef(({children:t,...e},r)=>{ct.useMemo(()=>gY({PositionPoint:sm}),[]);let n=ct.useRef(),{subscribe:i,getParent:o}=ct.useContext(h5);return ct.useLayoutEffect(()=>i(n),[]),ct.createElement("positionPoint",te({instance:o(),instanceKey:n,ref:tt([r,n])},e),t)}),m5=ct.forwardRef(({children:t,positions:e,colors:r,sizes:n,stride:i=3,...o},s)=>{let p=ct.useRef(null);return g5(()=>{let l=p.current.geometry.attributes;l.position.needsUpdate=!0,r&&(l.color.needsUpdate=!0),n&&(l.size.needsUpdate=!0)}),ct.createElement("points",te({ref:tt([s,p])},o),ct.createElement("bufferGeometry",null,ct.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/i,array:e,itemSize:i,usage:Fr.DynamicDrawUsage}),r&&ct.createElement("bufferAttribute",{attach:"attributes-color",count:r.length/i,array:r,itemSize:3,usage:Fr.DynamicDrawUsage}),n&&ct.createElement("bufferAttribute",{attach:"attributes-size",count:n.length/i,array:n,itemSize:1,usage:Fr.DynamicDrawUsage})),t)}),yY=ct.forwardRef((t,e)=>t.positions instanceof Float32Array?ct.createElement(m5,te({},t,{ref:e})):ct.createElement(mY,te({},t,{ref:e})));import*as Or from"three";import*as yt from"react";import{extend as _Y,useFrame as CY}from"@react-three/fiber";var Ul=Mn(R5());import{cloneElement as bY}from"react";function pm(t){return B5(t.children,t.components)}pm.propTypes={children:Ul.default.func.isRequired,components:Ul.default.arrayOf(Ul.default.oneOfType([Ul.default.element,Ul.default.func])).isRequired};function B5(t,e,r){if(r=r||[],!e[0])return t(r);function n(i){return B5(t,e.slice(1),r.concat([i]))}return typeof e[0]=="function"?e[0]({results:r,render:n}):bY(e[0],{children:n})}var x5=new Or.Matrix4,M5=new Or.Matrix4,lm=[],mu=new Or.Mesh,F3=class extends Or.Group{constructor(){super(),this.color=new Or.Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return(e=this.instance.current)==null?void 0:e.geometry}raycast(e,r){let n=this.instance.current;if(!n||!n.geometry||!n.material)return;mu.geometry=n.geometry;let i=n.matrixWorld,o=n.userData.instances.indexOf(this.instanceKey);if(!(o===-1||o>n.count)){n.getMatrixAt(o,x5),M5.multiplyMatrices(i,x5),mu.matrixWorld=M5,n.material instanceof Or.Material?mu.material.side=n.material.side:mu.material.side=n.material[0].side,mu.raycast(e,lm);for(let s=0,p=lm.length;s<p;s++){let l=lm[s];l.instanceId=o,l.object=this,r.push(l)}lm.length=0}}},O5=yt.createContext(null),w5=new Or.Matrix4,T5=new Or.Matrix4,RY=new Or.Matrix4,S5=new Or.Vector3,I5=new Or.Quaternion,F5=new Or.Vector3,D5=yt.forwardRef(({context:t,children:e,...r},n)=>{yt.useMemo(()=>_Y({PositionMesh:F3}),[]);let i=yt.useRef(),{subscribe:o,getParent:s}=yt.useContext(t||O5);return yt.useLayoutEffect(()=>o(i),[]),yt.createElement("positionMesh",te({instance:s(),instanceKey:i,ref:tt([n,i])},r),e)}),k5=yt.forwardRef(({children:t,range:e,limit:r=1e3,frames:n=1/0,...i},o)=>{let[{context:s,instance:p}]=yt.useState(()=>{let m=yt.createContext(null);return{context:m,instance:yt.forwardRef((h,y)=>yt.createElement(D5,te({context:m},h,{ref:y})))}}),l=yt.useRef(null),[c,u]=yt.useState([]),[[d,f]]=yt.useState(()=>{let m=new Float32Array(r*16);for(let h=0;h<r;h++)RY.identity().toArray(m,h*16);return[m,new Float32Array([...new Array(r*3)].map(()=>1))]});yt.useEffect(()=>{l.current.instanceMatrix.needsUpdate=!0});let g=0,v=0;CY(()=>{if(n===1/0||g<n){l.current.updateMatrix(),l.current.updateMatrixWorld(),w5.copy(l.current.matrixWorld).invert(),v=Math.min(r,e!==void 0?e:r,c.length),l.current.count=v,l.current.instanceMatrix.updateRange.count=v*16,l.current.instanceColor.updateRange.count=v*3;for(let m=0;m<c.length;m++){let h=c[m].current;h.matrixWorld.decompose(S5,I5,F5),T5.compose(S5,I5,F5).premultiply(w5),T5.toArray(d,m*16),l.current.instanceMatrix.needsUpdate=!0,h.color.toArray(f,m*3),l.current.instanceColor.needsUpdate=!0}g++}});let A=yt.useMemo(()=>({getParent:()=>l,subscribe:m=>(u(h=>[...h,m]),()=>u(h=>h.filter(y=>y.current!==m.current)))}),[]);return yt.createElement("instancedMesh",te({userData:{instances:c},matrixAutoUpdate:!1,ref:tt([o,l]),args:[null,null,0],raycast:()=>null},i),yt.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:d.length/16,array:d,itemSize:16,usage:Or.DynamicDrawUsage}),yt.createElement("instancedBufferAttribute",{attach:"instanceColor",count:f.length/3,array:f,itemSize:3,usage:Or.DynamicDrawUsage}),typeof t=="function"?yt.createElement(s.Provider,{value:A},t(p)):yt.createElement(O5.Provider,{value:A},t))}),BY=yt.forwardRef(function({meshes:e,children:r,...n},i){let o=Array.isArray(e);if(!o)for(let s of Object.keys(e))e[s].isMesh||delete e[s];return yt.createElement("group",{ref:i},yt.createElement(pm,{components:(o?e:Object.values(e)).map(({geometry:s,material:p})=>yt.createElement(k5,te({key:s.uuid,geometry:s,material:p},n)))},s=>o?r(...s):r(Object.keys(e).filter(p=>e[p].isMesh).reduce((p,l,c)=>({...p,[l]:s[c]}),{}))))});import*as ya from"three";import*as Jt from"react";import{extend as xY,useFrame as MY}from"@react-three/fiber";var P5=Jt.createContext(null),wY=Jt.forwardRef((t,e)=>{Jt.useMemo(()=>xY({SegmentObject:cm}),[]);let{limit:r=1e3,lineWidth:n=1,children:i,...o}=t,[s,p]=Jt.useState([]),[l]=Jt.useState(()=>new Ls),[c]=Jt.useState(()=>new ln),[u]=Jt.useState(()=>new pn),[d]=Jt.useState(()=>new ya.Vector2(512,512)),[f]=Jt.useState(()=>Array(r*6).fill(0)),[g]=Jt.useState(()=>Array(r*6).fill(0)),v=Jt.useMemo(()=>({subscribe:A=>(p(m=>[...m,A]),()=>p(m=>m.filter(h=>h.current!==A.current)))}),[]);return MY(()=>{for(let m=0;m<r;m++){var A;let h=(A=s[m])==null?void 0:A.current;h&&(f[m*6+0]=h.start.x,f[m*6+1]=h.start.y,f[m*6+2]=h.start.z,f[m*6+3]=h.end.x,f[m*6+4]=h.end.y,f[m*6+5]=h.end.z,g[m*6+0]=h.color.r,g[m*6+1]=h.color.g,g[m*6+2]=h.color.b,g[m*6+3]=h.color.r,g[m*6+4]=h.color.g,g[m*6+5]=h.color.b)}u.setColors(g),u.setPositions(f),l.computeLineDistances()}),Jt.createElement("primitive",{object:l,ref:e},Jt.createElement("primitive",{object:u,attach:"geometry"}),Jt.createElement("primitive",te({object:c,attach:"material",vertexColors:!0,resolution:d,linewidth:n},o)),Jt.createElement(P5.Provider,{value:v},i))}),cm=class{constructor(){this.color=new ya.Color("white"),this.start=new ya.Vector3(0,0,0),this.end=new ya.Vector3(0,0,0)}},L5=t=>t instanceof ya.Vector3?t:new ya.Vector3(...typeof t=="number"?[t,t,t]:t),TY=Jt.forwardRef(({color:t,start:e,end:r},n)=>{let i=Jt.useContext(P5);if(!i)throw"Segment must used inside Segments component.";let o=Jt.useRef(null);return Jt.useLayoutEffect(()=>i.subscribe(o),[]),Jt.createElement("segmentObject",{ref:tt([o,n]),color:t,start:L5(e),end:L5(r)})});import*as as from"react";import{useFrame as SY}from"@react-three/fiber";var IY=as.forwardRef(({children:t,hysteresis:e=0,distances:r,...n},i)=>{let o=as.useRef(null);return as.useLayoutEffect(()=>{let{current:s}=o;s.levels.length=0,s.children.forEach((p,l)=>s.levels.push({object:p,hysteresis:e,distance:r[l]}))}),SY(s=>{var p;return(p=o.current)==null?void 0:p.update(s.camera)}),as.createElement("lOD",te({ref:tt([o,i])},n),t)});import{WebGLCubeRenderTarget as FY,CubeCamera as OY}from"three";import*as G5 from"react";import{useThree as O3}from"@react-three/fiber";function DY({all:t,scene:e,camera:r}){let n=O3(({gl:s})=>s),i=O3(({camera:s})=>s),o=O3(({scene:s})=>s);return G5.useLayoutEffect(()=>{let s=[];t&&(e||o).traverse(c=>{c.visible===!1&&(s.push(c),c.visible=!0)}),n.compile(e||o,r||i);let p=new FY(128);new OY(.01,1e5,p).update(n,e||o),p.dispose(),s.forEach(c=>c.visible=!1)},[]),null}import{useEffect as kY}from"react";import{useThree as LY}from"@react-three/fiber";function PY(){let t=LY(e=>e.gl);return kY(()=>(t.shadowMap.autoUpdate=!1,t.shadowMap.needsUpdate=!0,()=>{t.shadowMap.autoUpdate=t.shadowMap.needsUpdate=!0}),[t.shadowMap]),null}import{Matrix4 as GY,Ray as zY,Sphere as NY,Vector3 as UY}from"three";var z5=new GY,N5=new zY,D3=new NY,k3=new UY;function jY(t,e){let r=this.geometry,n=this.material,i=this.matrixWorld;n!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),D3.copy(r.boundingSphere),D3.applyMatrix4(i),t.ray.intersectsSphere(D3)!==!1&&(z5.copy(i).invert(),N5.copy(t.ray).applyMatrix4(z5),!(r.boundingBox!==null&&N5.intersectBox(r.boundingBox,k3)===null)&&e.push({distance:k3.distanceTo(t.ray.origin),point:k3.clone(),object:this})))}import*as L3 from"react";import{useThree as Au}from"@react-three/fiber";function HY({pixelated:t}){let e=Au(s=>s.gl),r=Au(s=>s.internal.active),n=Au(s=>s.performance.current),i=Au(s=>s.viewport.initialDpr),o=Au(s=>s.setDpr);return L3.useEffect(()=>{let s=e.domElement;return()=>{r&&o(i),t&&s&&(s.style.imageRendering="auto")}},[]),L3.useEffect(()=>{o(n*i),t&&e.domElement&&(e.domElement.style.imageRendering=n===1?"auto":"pixelated")},[n]),null}import*as G3 from"react";import{useThree as P3}from"@react-three/fiber";function QY(){let t=P3(n=>n.get),e=P3(n=>n.setEvents),r=P3(n=>n.performance.current);return G3.useEffect(()=>{let n=t().events.enabled;return()=>e({enabled:n})},[]),G3.useEffect(()=>e({enabled:r===1}),[r]),null}import*as j5 from"react";import{useState as WY,useContext as VY,useRef as YY,useLayoutEffect as U5,createContext as KY}from"react";import{useFrame as XY}from"@react-three/fiber";var H5=KY(null);function JY({iterations:t=10,ms:e=250,threshold:r=.75,step:n=.1,factor:i=.5,flipflops:o=1/0,bounds:s=f=>f>100?[60,100]:[40,60],onIncline:p,onDecline:l,onChange:c,onFallback:u,children:d}){let f=Math.pow(10,0),[g,v]=WY(()=>({fps:0,index:0,factor:i,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:m=>{let h=Symbol();return g.subscriptions.set(h,m.current),()=>void g.subscriptions.delete(h)}})),A=0;return XY(()=>{let{frames:m,averages:h}=g;if(!g.fallback&&h.length<t){m.push(performance.now());let y=m[m.length-1]-m[0];if(y>=e){if(g.fps=Math.round(m.length/y*1e3*f)/f,g.refreshrate=Math.max(g.refreshrate,g.fps),h[g.index++%t]=g.fps,h.length===t){let[E,b]=s(g.refreshrate),_=h.filter(B=>B>=b),C=h.filter(B=>B<E);_.length>t*r&&(g.factor=Math.min(1,g.factor+n),g.flipped++,p&&p(g),g.subscriptions.forEach(B=>B.onIncline&&B.onIncline(g))),C.length>t*r&&(g.factor=Math.max(0,g.factor-n),g.flipped++,l&&l(g),g.subscriptions.forEach(B=>B.onDecline&&B.onDecline(g))),A!==g.factor&&(A=g.factor,c&&c(g),g.subscriptions.forEach(B=>B.onChange&&B.onChange(g))),g.flipped>o&&!g.fallback&&(g.fallback=!0,u&&u(g),g.subscriptions.forEach(B=>B.onFallback&&B.onFallback(g))),g.averages=[]}g.frames=[]}}}),j5.createElement(H5.Provider,{value:g},d)}function qY({onIncline:t,onDecline:e,onChange:r,onFallback:n}){let i=VY(H5),o=YY({onIncline:t,onDecline:e,onChange:r,onFallback:n});U5(()=>{o.current.onIncline=t,o.current.onDecline=e,o.current.onChange=r,o.current.onFallback=n},[t,e,r,n]),U5(()=>i.subscribe(o),[i])}import*as dm from"three";import*as Mo from"react";import{useThree as ZY,createPortal as $Y,useFrame as eK}from"@react-three/fiber";var z3=Mo.forwardRef(({children:t,compute:e,width:r,height:n,samples:i=8,renderPriority:o=0,eventPriority:s=0,frames:p=1/0,stencilBuffer:l=!1,depthBuffer:c=!0,generateMipmaps:u=!1,...d},f)=>{let{size:g,viewport:v}=ZY(),A=zr((r||g.width)*v.dpr,(n||g.height)*v.dpr,{samples:i,stencilBuffer:l,depthBuffer:c,generateMipmaps:u}),[m]=Mo.useState(()=>new dm.Scene),h=Mo.useCallback((y,E,b)=>{var _,C;let B=(_=A.texture)==null?void 0:_.__r3f.parent;for(;B&&!(B instanceof dm.Object3D);)B=B.__r3f.parent;if(!B)return!1;b.raycaster.camera||b.events.compute(y,b,(C=b.previousRoot)==null?void 0:C.getState());let[R]=b.raycaster.intersectObject(B);if(!R)return!1;let M=R.uv;if(!M)return!1;E.raycaster.setFromCamera(E.pointer.set(M.x*2-1,M.y*2-1),E.camera)},[]);return Mo.useImperativeHandle(f,()=>A.texture,[A]),Mo.createElement(Mo.Fragment,null,$Y(Mo.createElement(tK,{renderPriority:o,frames:p,fbo:A},t,Mo.createElement("group",{onPointerOver:()=>null})),m,{events:{compute:e||h,priority:s}}),Mo.createElement("primitive",te({object:A.texture},d)))});function tK({frames:t,renderPriority:e,children:r,fbo:n}){let i=0,o;return eK(s=>{(t===1/0||i<t)&&(o=s.gl.autoClear,s.gl.autoClear=!0,s.gl.setRenderTarget(n),s.gl.render(s.scene,s.camera),s.gl.setRenderTarget(null),s.gl.autoClear=o,i++)},e),Mo.createElement(Mo.Fragment,null,r)}import*as jl from"three";import*as Dr from"react";import{useThree as rK,createPortal as oK,useFrame as iK}from"@react-three/fiber";var N3=Dr.forwardRef(({children:t,compute:e,renderPriority:r=-1,eventPriority:n=0,frames:i=1/0,stencilBuffer:o=!1,depthBuffer:s=!0,generateMipmaps:p=!1,resolution:l=896,near:c=.1,far:u=1e3,flip:d=!1,position:f,rotation:g,scale:v,quaternion:A,matrix:m,matrixAutoUpdate:h,...y},E)=>{let{size:b,viewport:_}=rK(),C=Dr.useRef(null),B=Dr.useMemo(()=>{let M=new jl.WebGLCubeRenderTarget(Math.max((l||b.width)*_.dpr,(l||b.height)*_.dpr),{stencilBuffer:o,depthBuffer:s,generateMipmaps:p});return M.texture.isRenderTargetTexture=!d,M.texture.flipY=!0,M.texture.type=jl.HalfFloatType,M},[l,d]);Dr.useEffect(()=>()=>B.dispose(),[B]);let[R]=Dr.useState(()=>new jl.Scene);return Dr.useImperativeHandle(E,()=>({scene:R,fbo:B,camera:C.current}),[B]),Dr.createElement(Dr.Fragment,null,oK(Dr.createElement(nK,{renderPriority:r,frames:i,camera:C},t,Dr.createElement("group",{onPointerOver:()=>null})),R,{events:{compute:e,priority:n}}),Dr.createElement("primitive",te({object:B.texture},y)),Dr.createElement("cubeCamera",{ref:C,args:[c,u,B],position:f,rotation:g,scale:v,quaternion:A,matrix:m,matrixAutoUpdate:h}))});function nK({frames:t,renderPriority:e,children:r,camera:n}){let i=0;return iK(o=>{(t===1/0||i<t)&&(n.current.update(o.gl,o.scene),i++)},e),Dr.createElement(Dr.Fragment,null,r)}import*as li from"three";import*as Hi from"react";var aK=Hi.forwardRef(({id:t=1,colorWrite:e=!1,depthWrite:r=!1,...n},i)=>{let o=Hi.useRef(null),s=Hi.useMemo(()=>({colorWrite:e,depthWrite:r,stencilWrite:!0,stencilRef:t,stencilFunc:li.AlwaysStencilFunc,stencilFail:li.ReplaceStencilOp,stencilZFail:li.ReplaceStencilOp,stencilZPass:li.ReplaceStencilOp}),[t,e,r]);return Hi.useLayoutEffect(()=>{Object.assign(o.current.material,s)}),Hi.useImperativeHandle(i,()=>o.current,[]),Hi.createElement("mesh",te({ref:o,renderOrder:-t},n))});function sK(t,e=!1){return{stencilWrite:!0,stencilRef:t,stencilFunc:e?li.NotEqualStencilFunc:li.EqualStencilFunc,stencilFail:li.KeepStencilOp,stencilZFail:li.KeepStencilOp,stencilZPass:li.KeepStencilOp}}import*as Yo from"three";import*as fo from"react";import{useThree as pK,useFrame as Q5}from"@react-three/fiber";function lK({renderPriority:t=1,zoom:e=0,segments:r=64,children:n,resolution:i=896,...o}){let s=fo.useRef(null),p=fo.useRef(null),{width:l,height:c}=pK(m=>m.size),[u]=fo.useState(()=>new Yo.OrthographicCamera);fo.useLayoutEffect(()=>{u.position.set(0,0,100),u.zoom=100,u.left=l/-2,u.right=l/2,u.top=c/2,u.bottom=c/-2,u.updateProjectionMatrix()},[l,c]);let d=Math.sqrt(l*l+c*c)/100*(.5+e/2),f=new Yo.Vector3,g=new Yo.Sphere(new Yo.Vector3,d),v=new Yo.Matrix3,A=fo.useCallback((m,h,y)=>{if(h.pointer.set(m.offsetX/h.size.width*2-1,-(m.offsetY/h.size.height)*2+1),h.raycaster.setFromCamera(h.pointer,u),h.raycaster.ray.intersectSphere(g,f))f.normalize();else return;v.getNormalMatrix(p.current.camera.matrixWorld),p.current.camera.getWorldPosition(h.raycaster.ray.origin),h.raycaster.ray.direction.set(0,0,1).reflect(f),h.raycaster.ray.direction.x*=-1,h.raycaster.ray.direction.applyNormalMatrix(v).multiplyScalar(-1)},[]);return Q5(m=>{t&&m.gl.render(s.current,u)},t),fo.createElement(fo.Fragment,null,fo.createElement("mesh",te({ref:s},o,{scale:d}),fo.createElement("sphereGeometry",{args:[1,r,r]}),fo.createElement("meshBasicMaterial",null,fo.createElement(N3,{compute:A,attach:"envMap",flip:!0,resolution:i,ref:p},n,fo.createElement(cK,{api:p})))))}function cK({api:t}){let e=new Yo.Vector3,r=new Yo.Quaternion,n=new Yo.Vector3,i=new Yo.Euler(0,Math.PI,0);return Q5(o=>{o.camera.matrixWorld.decompose(e,r,n),t.current.camera.position.copy(e),t.current.camera.quaternion.setFromEuler(i).premultiply(r)}),null}import*as He from"three";import*as ir from"react";import{extend as dK,useThree as U3,useFrame as W5}from"@react-three/fiber";var uK=Mr({blur:0,map:null,sdf:null,blend:0,size:0,resolution:new He.Vector2},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
     vUv = uv;
   }`,`uniform sampler2D sdf;
   uniform sampler2D map;
   uniform float blur;
   uniform float size;
   uniform float time;
   uniform vec2 resolution;
   varying vec2 vUv;
   #include <packing>
   void main() {
     vec2 uv = gl_FragCoord.xy / resolution.xy;
     vec4 t = texture2D(map, uv);
     float k = blur;
     float d = texture2D(sdf, vUv).r/size;
     float alpha = 1.0 - smoothstep(0.0, 1.0, clamp(d/k + 1.0, 0.0, 1.0));
     gl_FragColor = vec4(t.rgb, blur == 0.0 ? t.a : t.a * alpha);
     #include <tonemapping_fragment>
     #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),fK=ir.forwardRef(({children:t,events:e=void 0,blur:r=0,eventPriority:n=0,renderPriority:i=0,worldUnits:o=!1,resolution:s=512,...p},l)=>{dK({PortalMaterialImpl:uK});let c=ir.useRef(null),{scene:u,gl:d,size:f,viewport:g,setEvents:v}=U3(),A=zr(s,s),[m,h]=ir.useState(0);W5(()=>{let C=c.current.blend>0?Math.max(1,i):0;m!==C&&h(C)}),ir.useEffect(()=>{e!==void 0&&v({enabled:!e})},[e]);let[y,E]=ir.useState(!0),b=t3(E);ir.useLayoutEffect(()=>{var C;b.current=(C=c.current)==null?void 0:C.__r3f.parent},[]),ir.useLayoutEffect(()=>{if(b.current&&r&&c.current.sdf===null){let C=new He.Mesh(b.current.geometry,new He.MeshBasicMaterial),B=new He.Box3().setFromBufferAttribute(C.geometry.attributes.position),R=new He.OrthographicCamera(B.min.x*(1+2/s),B.max.x*(1+2/s),B.max.y*(1+2/s),B.min.y*(1+2/s),.1,1e3);R.position.set(0,0,1),R.lookAt(0,0,0),d.setRenderTarget(A),d.render(C,R);let x=hK(s,s,d)(A.texture),T=new Float32Array(s*s);d.readRenderTargetPixels(x,0,0,s,s,T);let w=1/0;for(let S=0;S<T.length;S++)T[S]<w&&(w=T[S]);w=-w,c.current.size=w,c.current.sdf=x.texture,d.setRenderTarget(null)}},[s,r]),ir.useImperativeHandle(l,()=>c.current);let _=ir.useCallback((C,B,R)=>{var M;if(!b.current)return!1;if(B.pointer.set(C.offsetX/B.size.width*2-1,-(C.offsetY/B.size.height)*2+1),B.raycaster.setFromCamera(B.pointer,B.camera),((M=c.current)==null?void 0:M.blend)===0){let[x]=B.raycaster.intersectObject(b.current);if(!x)return B.raycaster.camera=void 0,!1}},[]);return ir.createElement("portalMaterialImpl",te({ref:c,blur:r,blend:0,resolution:[f.width*g.dpr,f.height*g.dpr],attach:"material"},p),ir.createElement(z3,{attach:"map",frames:y?1/0:0,eventPriority:n,renderPriority:i,compute:_},t,ir.createElement(gK,{events:e,rootScene:u,priority:m,material:c,worldUnits:o})))});function gK({events:t=void 0,rootScene:e,material:r,priority:n,worldUnits:i}){let o=U3(d=>d.scene),s=U3(d=>d.setEvents),p=zr(),l=zr();ir.useLayoutEffect(()=>{o.matrixAutoUpdate=!1},[]),ir.useEffect(()=>{t!==void 0&&s({enabled:t})},[t]);let[c,u]=ir.useMemo(()=>{let d={value:0};return[new So(new He.ShaderMaterial({uniforms:{a:{value:p.texture},b:{value:l.texture},blend:d},vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
          }`,fragmentShader:`
          uniform sampler2D a;
          uniform sampler2D b;
          uniform float blend;
          varying vec2 vUv;
          #include <packing>
          void main() {
            vec4 ta = texture2D(a, vUv);
            vec4 tb = texture2D(b, vUv);
            gl_FragColor = mix(tb, ta, blend);
            #include <tonemapping_fragment>
            #include <${er>=154?"colorspace_fragment":"encodings_fragment"}>
          }`})),d]},[]);return W5(d=>{var f;let g=r==null||(f=r.current)==null?void 0:f.__r3f.parent;if(g){if(i)o.matrixWorld.identity();else{var v;n&&((v=r.current)==null?void 0:v.blend)===1&&g.updateWorldMatrix(!0,!1),o.matrixWorld.copy(g.matrixWorld)}if(n){var A,m,h;((A=r.current)==null?void 0:A.blend)>0&&((m=r.current)==null?void 0:m.blend)<1?(u.value=r.current.blend,d.gl.setRenderTarget(p),d.gl.render(o,d.camera),d.gl.setRenderTarget(l),d.gl.render(e,d.camera),d.gl.setRenderTarget(null),c.render(d.gl)):((h=r.current)==null?void 0:h.blend)===1&&d.gl.render(o,d.camera)}}},n),ir.createElement(ir.Fragment,null)}var hK=(t,e,r)=>{let n=new He.WebGLRenderTarget(t,e,{minFilter:He.LinearMipmapLinearFilter,magFilter:He.LinearFilter,type:He.FloatType,format:He.RedFormat,generateMipmaps:!0}),i=new He.WebGLRenderTarget(t,e,{minFilter:He.NearestFilter,magFilter:He.NearestFilter}),o=new He.WebGLRenderTarget(t,e,{minFilter:He.NearestFilter,magFilter:He.NearestFilter}),s=new He.WebGLRenderTarget(t,e,{minFilter:He.NearestFilter,magFilter:He.NearestFilter}),p=new He.WebGLRenderTarget(t,e,{minFilter:He.NearestFilter,magFilter:He.NearestFilter}),l=new He.WebGLRenderTarget(t,e,{minFilter:He.NearestFilter,magFilter:He.NearestFilter,type:He.FloatType,format:He.RedFormat}),c=new He.WebGLRenderTarget(t,e,{minFilter:He.NearestFilter,magFilter:He.NearestFilter,type:He.FloatType,format:He.RedFormat}),u=new So(new He.ShaderMaterial({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (round(texture2D(tex, vUv).x)));
        }`})),d=new So(new He.ShaderMaterial({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (1.0 - round(texture2D(tex, vUv).x)));
        }`})),f=new So(new He.ShaderMaterial({uniforms:{tex:{value:null},offset:{value:0},level:{value:0},maxSteps:{value:0}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform float offset;
        uniform float level;
        uniform float maxSteps;
        #include <packing>
        void main() {
          float closestDist = 9999999.9;
          vec2 closestPos = vec2(0.0);
          for (float x = -1.0; x <= 1.0; x += 1.0) {
            for (float y = -1.0; y <= 1.0; y += 1.0) {
              vec2 voffset = vUv;
              voffset += vec2(x, y) * vec2(${1/t}, ${1/e}) * offset;
              vec2 pos = unpackRGBATo2Half(texture2D(tex, voffset));
              float dist = distance(pos.xy, vUv);
              if(pos.x != 0.0 && pos.y != 0.0 && dist < closestDist) {
                closestDist = dist;
                closestPos = pos;
              }
            }
          }
          gl_FragColor = pack2HalfToRGBA(closestPos);
        }`})),g=new So(new He.ShaderMaterial({uniforms:{tex:{value:null},size:{value:new He.Vector2(t,e)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform vec2 size;
        #include <packing>
        void main() {
          gl_FragColor = vec4(distance(size * unpackRGBATo2Half(texture2D(tex, vUv)), size * vUv), 0.0, 0.0, 0.0);
        }`})),v=new So(new He.ShaderMaterial({uniforms:{inside:{value:c.texture},outside:{value:l.texture},tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D inside;
        uniform sampler2D outside;
        uniform sampler2D tex;
        #include <packing>
        void main() {
          float i = texture2D(inside, vUv).x;
          float o =texture2D(outside, vUv).x;
          if (texture2D(tex, vUv).x == 0.0) {
            gl_FragColor = vec4(o, 0.0, 0.0, 0.0);
          } else {
            gl_FragColor = vec4(-i, 0.0, 0.0, 0.0);
          }
        }`}));return A=>{let m=n;A.minFilter=He.NearestFilter,A.magFilter=He.NearestFilter,u.material.uniforms.tex.value=A,r.setRenderTarget(i),u.render(r);let h=Math.ceil(Math.log(Math.max(t,e))/Math.log(2)),y=i,E=null;for(let b=0;b<h;b++){let _=Math.pow(2,h-b-1);E=y===i?s:i,f.material.uniforms.level.value=b,f.material.uniforms.maxSteps.value=h,f.material.uniforms.offset.value=_,f.material.uniforms.tex.value=y.texture,r.setRenderTarget(E),f.render(r),y=E}r.setRenderTarget(l),g.material.uniforms.tex.value=E.texture,g.render(r),d.material.uniforms.tex.value=A,r.setRenderTarget(o),d.render(r),y=o;for(let b=0;b<h;b++){let _=Math.pow(2,h-b-1);E=y===o?p:o,f.material.uniforms.level.value=b,f.material.uniforms.maxSteps.value=h,f.material.uniforms.offset.value=_,f.material.uniforms.tex.value=y.texture,r.setRenderTarget(E),f.render(r),y=E}return r.setRenderTarget(c),g.material.uniforms.tex.value=E.texture,g.render(r),r.setRenderTarget(m),v.material.uniforms.tex.value=A,v.render(r),r.setRenderTarget(null),m}};import"react";import"react-dom/client";import"three";import"@react-three/fiber";var zge=Mn(BA());var Uge=Mn(Cg()),jge=Mn(vy());var Qge=Mn(C2());export{A3 as AccumulativeShadows,HY as AdaptiveDpr,QY as AdaptiveEvents,KP as ArcballControls,CP as AsciiRenderer,QH as BBAnchor,YW as Backdrop,PY as BakeShadows,mD as Billboard,l3 as Bounds,WQ as Box,TH as Bvh,Iz as CameraControls,EW as CameraShake,pW as Capsule,BD as CatmullRomLine,rV as Caustics,du as Center,VQ as Circle,Od as Clone,QV as Cloud,M3 as CloudInstance,ZM as Clouds,OL as ComputedAttribute,YQ as Cone,g3 as ContactShadows,OP as CubeCamera,CD as CubicBezierLine,nQ as CurveModifier,gw as CycleRaycast,KQ as Cylinder,fP as Decal,IY as Detailed,kP as DeviceOrientationControls,nW as Dodecahedron,ZA as Edges,$k as Effects,f3 as Environment,u3 as EnvironmentCube,qh as EnvironmentMap,IM as EnvironmentPortal,tQ as Example,aW as Extrude,pU as FaceControls,iU as FaceLandmarker,a2 as FaceLandmarkerDefaults,Fy as Facemesh,Lg as FacemeshDatas,Iy as FacemeshEye,ll as FacemeshEyeDefaults,hz as FirstPersonControls,lK as Fisheye,_W as Float,PP as FlyControls,BU as GizmoHelper,kU as GizmoViewcube,GU as GizmoViewport,EP as Gltf,tL as GradientTexture,XA as GradientType,jU as Grid,ps as Html,f2 as Hud,oW as Icosahedron,dL as Image,D5 as Instance,k5 as Instances,Xp as IsObject,BI as KeyboardControls,sW as Lathe,RV as Lightformer,vo as Line,Cw as Loader,zP as MapControls,cP as MarchingCube,lP as MarchingCubes,dP as MarchingPlane,aK as Mask,BY as Merged,UQ as MeshDiscardMaterial,pQ as MeshDistortMaterial,fK as MeshPortalMaterial,wQ as MeshReflectorMaterial,LQ as MeshRefractionMaterial,zQ as MeshTransmissionMaterial,dQ as MeshWobbleMaterial,mU as MotionPathControls,iW as Octahedron,UP as OrbitControls,sy as OrthographicCamera,hL as Outlines,JY as PerformanceMonitor,wP as PerspectiveCamera,gD as PivotControls,JQ as Plane,AY as Point,jQ as PointMaterial,Yh as PointMaterialImpl,fz as PointerLockControls,yY as Points,m5 as PointsBuffer,rW as Polyhedron,sm as PositionPoint,SD as PositionalAudio,DY as Preload,RI as PresentationControls,bD as QuadraticBezierLine,y3 as RandomizedLight,dV as Reflector,N3 as RenderCubeTexture,z3 as RenderTexture,hW as Resize,tW as Ring,uW as RoundedBox,IL as Sampler,gW as ScreenQuad,yD as ScreenSpace,xT as Scroll,CT as ScrollControls,TY as Segment,cm as SegmentObject,wY as Segments,w7 as Select,JW as Shadow,lW as Shape,BV as Sky,QQ as SoftShadows,JV as Sparkles,XQ as Sphere,_V as SpotLight,bV as SpotLightShadow,oQ as SpriteAnimator,WW as Stage,OV as Stars,YU as Stats,qU as StatsGl,vP as Svg,eW as Tetrahedron,Uk as Text,KA as Text3D,ZQ as Torus,$Q as TorusKnot,QP as TrackballControls,ML as Trail,uz as TransformControls,qQ as Tube,k7 as View,fY as Wireframe,m3 as accumulativeContext,WM as calcPosFromAngles,cC as calculateScaleFactor,Zk as isWebGL2Available,jY as meshBounds,Mr as shaderMaterial,OH as useAnimations,ij as useAspect,wH as useBVH,c3 as useBounds,jH as useBoxProjectedEnv,lj as useCamera,SH as useContextBridge,ly as useCubeCamera,W6 as useCubeTexture,hw as useCursor,rj as useDepthBuffer,gj as useDetectGPU,Xh as useEnvironment,zr as useFBO,y2 as useFBX,u2 as useFaceControls,s2 as useFaceLandmarker,Fd as useFont,Jp as useGLTF,ul as useGizmoContext,x2 as useHelper,t3 as useIntersect,E2 as useKTX2,xI as useKeyboardControls,sK as useMask,eY as useMatcapTexture,F6 as useMotion,iY as useNormalTexture,qY as usePerformanceMonitor,xm as useProgress,Um as useScroll,T7 as useSelect,rR as useSurfaceSampler,un as useTexture,eR as useTrail,qH as useTrailTexture,Sy as useVideoTexture};
/*! Bundled license information:

troika-three-text/dist/troika-three-text.esm.js:
  (*!
  Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
  Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
  *)
  (*!
  Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
  (https://github.com/101arrowz/fflate) for use in Troika text rendering. 
  Original licenses apply: 
  - fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
  - woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
  *)

camera-controls/dist/camera-controls.module.js:
  (*!
   * camera-controls
   * https://github.com/yomotsu/camera-controls
   * (c) 2017 @yomotsu
   * Released under the MIT License.
   *)
*/
