<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>无穷小比较可视化实验室</title>
    <!-- Tailwind CSS 本地化 -->
    <script src="../common-assets/js/tailwind.min.js"></script>
    <!-- Google Material Symbols 本地化 -->
    <link rel="stylesheet" href="../common-assets/css/lab1-material-symbols.css">
    <!-- MathJax 本地化配置 -->
    <script src="../common-assets/js/mathjax-config.js"></script>
    <script defer src="../common-assets/js/mathjax-3.2.2-tex-svg.min.js"></script>
    <!-- 页面样式 -->
    <link rel="stylesheet" href="assets/lab2-7.css">
</head>
<body class="bg-gray-50 text-slate-800 h-screen flex flex-col overflow-hidden">

<!-- 返回主页面板 -->
<div class="return-links">
    <a href="index.html"><span class="material-symbols-outlined">home</span> 返回主页</a>
</div>

<!-- Header -->
<header class="bg-white border-b border-gray-200 h-16 flex-none flex items-center justify-between px-6 shadow-sm z-20">
    <div class="flex items-center gap-3">
        <div class="bg-indigo-600 p-2 rounded-lg text-white cursor-pointer" onclick="toggleReturnLinks()">
            <span class="material-symbols-outlined text-2xl">compare</span>
        </div>
        <h1 class="text-xl font-bold text-gray-800 tracking-tight">无穷小比较实验室</h1>
    </div>
    <div class="text-sm text-gray-500 hidden sm:block font-medium">
        $\displaystyle\lim_{x \to 0} \frac{\beta(x)}{\alpha(x)}$
    </div>
</header>

<div class="flex flex-1 overflow-hidden">
    <!-- Sidebar -->
    <nav class="w-64 bg-white border-r border-gray-200 flex-none flex flex-col z-10 hidden md:flex">
        <div class="p-4 space-y-2">
            <button class="nav-btn w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 bg-indigo-50 text-indigo-700" id="btn-concept" onclick="switchTab('concept')">
                <span class="material-symbols-outlined">school</span>
                基本概念
            </button>
            <button class="nav-btn w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 text-gray-600 hover:bg-gray-50" id="btn-compare" onclick="switchTab('compare')">
                <span class="material-symbols-outlined">experiment</span>
                比较实验
            </button>
            <button class="nav-btn w-full flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 text-gray-600 hover:bg-gray-50" id="btn-equivalent" onclick="switchTab('equivalent')">
                <span class="material-symbols-outlined">swap_horiz</span>
                等价替换
            </button>
        </div>
        <div class="mt-auto p-4 border-t border-gray-100">
            <div class="bg-indigo-50/50 rounded-lg p-4 border border-indigo-50">
                <h4 class="text-xs font-bold text-indigo-800 uppercase tracking-wider mb-2">核心定义</h4>
                <p class="text-xs text-indigo-600 leading-relaxed">
                    若 $\displaystyle\lim \frac{\beta}{\alpha} = 0$，则 $\beta$ 是 $\alpha$ 的高阶无穷小，记作 $\beta = o(\alpha)$。
                </p>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto bg-gray-50/50 p-4 md:p-8 relative scroll-smooth no-scrollbar">
        
        <!-- Tab 1: Concept -->
        <div id="tab-concept" class="tab-content space-y-6 max-w-6xl mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Left: Definitions -->
                <div class="space-y-6">
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
                        <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                            <span class="material-symbols-outlined text-indigo-600">menu_book</span>
                            无穷小的比较
                        </h2>
                        <div class="space-y-4 text-sm text-gray-700">
                            <p class="leading-relaxed">设 $\alpha(x)$ 和 $\beta(x)$ 都是 $x \to x_0$ 时的无穷小，考察其比值 $\dfrac{\beta(x)}{\alpha(x)}$ 的极限：</p>
                            <ul class="space-y-3 pb-2">
                                <li class="flex items-start gap-2 p-3 bg-emerald-50 rounded-xl border border-emerald-100">
                                    <span class="text-emerald-600 font-bold">高阶：</span>
                                    <span>若 $\displaystyle\lim \frac{\beta}{\alpha} = 0$，则 $\beta$ 是 $\alpha$ 的<b>高阶无穷小</b>。</span>
                                </li>
                                <li class="flex items-start gap-2 p-3 bg-amber-50 rounded-xl border border-amber-100">
                                    <span class="text-amber-600 font-bold">低阶：</span>
                                    <span>若 $\displaystyle\lim \frac{\beta}{\alpha} = \infty$，则 $\beta$ 是 $\alpha$ 的<b>低阶无穷小</b>。</span>
                                </li>
                                <li class="flex items-start gap-2 p-3 bg-blue-50 rounded-xl border border-blue-100">
                                    <span class="text-blue-600 font-bold">同阶：</span>
                                    <span>若 $\displaystyle\lim \frac{\beta}{\alpha} = C \neq 0$，则 $\beta$ 与 $\alpha$ 是<b>同阶无穷小</b>。</span>
                                </li>
                                <li class="flex items-start gap-2 p-3 bg-indigo-50 rounded-xl border border-indigo-100">
                                    <span class="text-indigo-600 font-bold">等价：</span>
                                    <span>若 $\displaystyle\lim \frac{\beta}{\alpha} = 1$，则 $\beta$ 与 $\alpha$ 是<b>等价无穷小</b>，记作 $\alpha \sim \beta$。</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                            <span class="material-symbols-outlined text-rose-600">lightbulb</span>
                            直观理解
                        </h3>
                        <p class="text-sm text-gray-600 leading-relaxed mb-4">
                            当 $x \to 0$ 时，$x$、$x^2$、$x^3$ 都趋近于 $0$。但它们趋近的"速度"不同：$x^3$ 比 $x^2$ 更快，$x^2$ 比 $x$ 更快。因此 $x^3$ 是 $x^2$ 的高阶无穷小，$x^2$ 是 $x$ 的高阶无穷小。
                        </p>
                        <div class="flex justify-around items-center text-center py-4 border-t border-gray-100">
                            <div>
                                <div class="w-3 h-3 rounded-full bg-blue-500 mx-auto mb-1"></div>
                                <span class="text-xs text-gray-500">$y = x$</span>
                            </div>
                            <span class="material-symbols-outlined text-gray-400">arrow_forward</span>
                            <div>
                                <div class="w-3 h-3 rounded-full bg-red-500 mx-auto mb-1"></div>
                                <span class="text-xs text-gray-500">$y = x^2$</span>
                            </div>
                            <span class="material-symbols-outlined text-gray-400">arrow_forward</span>
                            <div>
                                <div class="w-3 h-3 rounded-full bg-purple-500 mx-auto mb-1"></div>
                                <span class="text-xs text-gray-500">$y = x^3$</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Right: Graph -->
                <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 flex flex-col">
                    <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <span class="material-symbols-outlined text-indigo-600">ssid_chart</span>
                        函数图像对比
                    </h2>
                    <div class="relative flex-1 min-h-[220px] w-full bg-white rounded-xl overflow-hidden border border-gray-100">
                        <canvas id="conceptCanvas" class="w-full h-full"></canvas>
                    </div>
                    <div class="mt-3 flex justify-center gap-6 text-xs font-medium text-gray-500">
                        <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-blue-500"></span> $y = x$</span>
                        <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-red-500"></span> $y = x^2$</span>
                        <span class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-purple-500"></span> $y = x^3$</span>
                    </div>
                    <p class="mt-1 text-xs text-gray-400 text-center">观察原点附近：$x$ 更"平缓"，$x^3$ 更"贴近"x轴</p>
                </div>
            </div>
        </div>

        <!-- Tab 2: Compare -->
        <div id="tab-compare" class="tab-content hidden space-y-6 max-w-6xl mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                <!-- Controls -->
                <div class="lg:col-span-4 space-y-6">
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-6 flex items-center gap-2">
                            <span class="material-symbols-outlined text-indigo-600">tune</span>
                            选择无穷小
                        </h3>
                        <div class="space-y-5">
                            <div>
                                <label class="block text-xs font-semibold text-gray-500 uppercase mb-2 tracking-wide">无穷小 $\alpha(x)$</label>
                                <select id="alphaSelect" onchange="updateComparison()" class="w-full p-3 border border-gray-300 rounded-lg text-gray-700 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none">
                                    <option value="x" selected>$x$</option>
                                    <option value="x2">$x^2$</option>
                                    <option value="x3">$x^3$</option>
                                    <option value="sin">$\sin x$</option>
                                    <option value="tan">$\tan x$</option>
                                    <option value="1-cos">$1 - \cos x$</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-gray-500 uppercase mb-2 tracking-wide">无穷小 $\beta(x)$</label>
                                <select id="betaSelect" onchange="updateComparison()" class="w-full p-3 border border-gray-300 rounded-lg text-gray-700 bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none">
                                    <option value="x">$x$</option>
                                    <option value="x2" selected>$x^2$</option>
                                    <option value="x3">$x^3$</option>
                                    <option value="sin">$\sin x$</option>
                                    <option value="tan">$\tan x$</option>
                                    <option value="1-cos">$1 - \cos x$</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Result Card -->
                    <div id="resultCard" class="rounded-2xl shadow-sm border p-6 transition-all duration-500 transform translate-y-4 opacity-0 border-emerald-200 bg-emerald-50">
                        <h4 class="text-xs font-bold text-gray-500 uppercase mb-3 tracking-wider">比较结果</h4>
                        <div id="comparisonResult" class="text-lg font-bold mb-3">
                            <span class="text-emerald-600">$\beta$ 是 $\alpha$ 的高阶无穷小</span>
                        </div>
                        <div id="limitValue" class="text-sm text-gray-700 font-mono">$\displaystyle\lim_{x \to 0} \frac{x^2}{x} = 0$</div>
                    </div>
                </div>

                <!-- Graph -->
                <div class="lg:col-span-8">
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 h-full flex flex-col">
                        <h3 class="text-lg font-bold text-gray-800 mb-4 border-b border-gray-100 pb-3">
                            比值函数 $y = \dfrac{\beta(x)}{\alpha(x)}$ 图像
                        </h3>
                        <div class="relative flex-1 min-h-[220px] w-full bg-white rounded-xl overflow-hidden border border-gray-100 cursor-crosshair">
                            <canvas id="compareCanvas" class="w-full h-full"></canvas>
                            <!-- Overlay Info -->
                            <div class="absolute top-4 right-4 bg-white/90 backdrop-blur-sm p-3 rounded-lg shadow-sm border border-gray-100 text-xs font-mono pointer-events-none z-10">
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="w-2 h-2 rounded-full bg-indigo-500"></span>
                                    <span class="font-bold">x:</span> <span id="overlayX">0.00</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-2 h-2 rounded-full bg-transparent"></span>
                                    <span class="font-bold">Ratio:</span> <span id="overlayY">0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 3: Equivalent -->
        <div id="tab-equivalent" class="tab-content hidden max-w-6xl mx-auto space-y-6">
            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 text-center">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">常用等价无穷小替换</h2>
                <p class="text-gray-600 mb-8 max-w-2xl mx-auto">
                    当 $x \to 0$ 时，复杂的函数可以用简单的幂函数（如 $x, x^2$）来代替，这在求极限时非常有用。
                    <br><span class="text-xs text-gray-400">定理：若 $\alpha \sim \alpha'$，$\beta \sim \beta'$，则 $\displaystyle\lim \frac{\beta}{\alpha} = \lim \frac{\beta'}{\alpha'}$</span>
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <!-- Flashcards -->
                    <div class="bg-emerald-50 border border-emerald-100 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer group">
                        <div class="text-sm text-emerald-600 font-bold mb-2 uppercase tracking-wide">三角函数</div>
                        <div class="text-2xl font-bold text-gray-800 mb-2 group-hover:text-emerald-700 transition-colors">$\sin x \sim x$</div>
                        <div class="text-2xl font-bold text-gray-800 group-hover:text-emerald-700 transition-colors">$\tan x \sim x$</div>
                    </div>
                    <div class="bg-blue-50 border border-blue-100 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer group">
                        <div class="text-sm text-blue-600 font-bold mb-2 uppercase tracking-wide">反三角函数</div>
                        <div class="text-xl font-bold text-gray-800 mb-2 group-hover:text-blue-700 transition-colors">$\arcsin x \sim x$</div>
                        <div class="text-xl font-bold text-gray-800 group-hover:text-blue-700 transition-colors">$\arctan x \sim x$</div>
                    </div>
                    <div class="bg-amber-50 border border-amber-100 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer group">
                        <div class="text-sm text-amber-600 font-bold mb-2 uppercase tracking-wide">指数与对数</div>
                        <div class="text-xl font-bold text-gray-800 mb-2 group-hover:text-amber-700 transition-colors">$e^x - 1 \sim x$</div>
                        <div class="text-xl font-bold text-gray-800 group-hover:text-amber-700 transition-colors">$\ln(1+x) \sim x$</div>
                    </div>
                    <div class="bg-rose-50 border border-rose-100 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer group">
                        <div class="text-sm text-rose-600 font-bold mb-2 uppercase tracking-wide">二项式与余弦</div>
                        <div class="text-xl font-bold text-gray-800 mb-2 group-hover:text-rose-700 transition-colors">$(1+x)^a - 1 \sim ax$</div>
                        <div class="text-xl font-bold text-gray-800 group-hover:text-rose-700 transition-colors">$1 - \cos x \sim \dfrac{1}{2}x^2$</div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
                <h3 class="text-lg font-bold text-gray-800 mb-4 border-b border-gray-100 pb-2">替换练习</h3>
                <div class="space-y-4">
                    <div class="flex flex-col md:flex-row gap-4 items-center justify-between bg-gray-50 p-4 rounded-xl border border-gray-200">
                        <div class="text-lg font-mono text-gray-800">
                            $\displaystyle\lim_{x \to 0} \frac{\sin(2x)}{\tan(3x)}$
                        </div>
                        <div class="flex gap-2">
                            <button onclick="toggleAnswer('ans1')" class="px-4 py-2 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors">显示解析</button>
                        </div>
                    </div>
                    <div id="ans1" class="hidden bg-emerald-50 border border-emerald-100 p-4 rounded-xl text-emerald-900 text-sm">
                        <strong>解析：</strong> 当 $x \to 0$ 时，$\sin(2x) \sim 2x$，$\tan(3x) \sim 3x$。<br>
                        原式 $= \displaystyle\lim_{x \to 0} \frac{2x}{3x} = \frac{2}{3}$。
                    </div>

                    <div class="flex flex-col md:flex-row gap-4 items-center justify-between bg-gray-50 p-4 rounded-xl border border-gray-200">
                        <div class="text-lg font-mono text-gray-800">
                            $\displaystyle\lim_{x \to 0} \frac{1 - \cos x}{x \sin x}$
                        </div>
                        <div class="flex gap-2">
                            <button onclick="toggleAnswer('ans2')" class="px-4 py-2 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors">显示解析</button>
                        </div>
                    </div>
                    <div id="ans2" class="hidden bg-emerald-50 border border-emerald-100 p-4 rounded-xl text-emerald-900 text-sm">
                        <strong>解析：</strong> 当 $x \to 0$ 时，$1 - \cos x \sim \dfrac{1}{2}x^2$，$\sin x \sim x$。<br>
                        原式 $= \displaystyle\lim_{x \to 0} \frac{\frac{1}{2}x^2}{x \cdot x} = \lim_{x \to 0} \frac{\frac{1}{2}x^2}{x^2} = \frac{1}{2}$。
                    </div>
                </div>
            </div>
        </div>

    </main>
</div>

<!-- Mobile Nav (Bottom) -->
<div class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around p-2 z-50 safe-pb">
    <button onclick="switchTab('concept')" class="mobile-nav-btn flex flex-col items-center p-2 text-indigo-600" data-target="concept">
        <span class="material-symbols-outlined">school</span>
        <span class="text-[10px] mt-1">概念</span>
    </button>
    <button onclick="switchTab('compare')" class="mobile-nav-btn flex flex-col items-center p-2 text-gray-400" data-target="compare">
        <span class="material-symbols-outlined">experiment</span>
        <span class="text-[10px] mt-1">比较</span>
    </button>
    <button onclick="switchTab('equivalent')" class="mobile-nav-btn flex flex-col items-center p-2 text-gray-400" data-target="equivalent">
        <span class="material-symbols-outlined">swap_horiz</span>
        <span class="text-[10px] mt-1">替换</span>
    </button>
</div>

<!-- 页面脚本 -->
<script src="assets/lab2-7.js"></script>

</body>
</html>
