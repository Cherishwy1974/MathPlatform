<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­å€¼å®šç†è™šæ‹Ÿå®éªŒå®¤</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            },
            startup: {
                pageReady: () => {
                    return MathJax.startup.defaultPageReady().then(() => {
                        console.log('MathJaxåŠ è½½å®Œæˆ');
                    });
                }
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>
    <script defer src="../common-assets/js/mathjax-3.2.2-tex-svg.min.js"></script>
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #3730a3;
            --primary-light: #6366f1;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #1f2937;
            --white: #ffffff;
            --border: #e5e7eb;
            --h1-size: 22px;
            --h3-size: 18px;
            --text-size: 16px;
            --formula-size: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        *::-webkit-scrollbar {
            width: 0;
            background: transparent;
        }

        * {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
            font-size: var(--text-size);
            line-height: 1.5;
            background: var(--gray-50);
            color: var(--gray-700);
        }

        .container {
            width: 100%;
            max-width: 1400px;
            height: min(100vh, 700px);
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
            overflow: hidden;
        }

        .header {
            height: 40px;
            background: var(--primary);
            color: var(--white);
            display: flex;
            align-items: center;
            padding: 0 20px;
        }

        .header h1 {
            font-size: var(--h1-size);
            font-weight: 600;
        }

        .main {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .sidebar {
            width: 120px;
            background: var(--gray-50);
            border-right: 1px solid var(--border);
            padding: 12px 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .nav-btn {
            width: 100%;
            padding: 8px;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: var(--text-size);
            color: var(--gray-600);
            text-align: left;
            transition: background 0.2s ease, color 0.2s ease;
        }

        .nav-btn:hover {
            background: var(--gray-100);
        }

        .nav-btn.active {
            background: var(--primary);
            color: var(--white);
        }

        .content {
            flex: 1;
            display: none;
            padding: 16px;
            overflow-y: auto;
            background: var(--white);
        }

        .content.active {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 18px;
        }

        .column {
            display: flex;
            flex-direction: column;
            gap: 16px;
            min-height: 0;
            overflow-y: auto;
            padding-right: 4px;
        }

        .card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            box-shadow: 0 8px 20px rgba(15, 23, 42, 0.04);
        }

        .card h3 {
            font-size: var(--h3-size);
            color: var(--primary);
        }

        .info-box {
            background: var(--gray-50);
            padding: 12px;
            border-radius: 8px;
            font-size: var(--text-size);
            color: var(--gray-600);
        }

        .info-box.success {
            background: #f0fdf4;
            border: 1px solid #10b981;
            color: #15803d;
        }

        .info-box.warning {
            background: #fefce8;
            border: 1px solid #f59e0b;
            color: #854d0e;
        }

        .info-box.danger {
            background: #fef2f2;
            border: 1px solid #ef4444;
            color: #991b1b;
        }

        .formula-box {
            background: #f0f7ff;
            border-left: 3px solid var(--primary);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            font-size: var(--formula-size);
        }

        .steps {
            background: #fff9e6;
            border-left: 3px solid var(--warning);
            border-radius: 8px;
            padding: 12px;
            line-height: 1.8;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .input-group label {
            font-weight: 600;
            color: var(--gray-600);
        }

        .input-group select,
        .input-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: var(--text-size);
            background: var(--gray-50);
        }

        .slider-group {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--gray-50);
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
        }

        .slider-group label {
            min-width: 60px;
            font-weight: 600;
            color: var(--gray-600);
        }

        .slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 4px;
            background: var(--gray-200);
            border-radius: 999px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--primary);
            border: none;
            cursor: pointer;
        }

        .slider-value {
            min-width: 60px;
            text-align: center;
            font-weight: 600;
            color: var(--primary);
        }

        .canvas-container {
            border: 1px solid var(--gray-200);
            border-radius: 12px;
            background: #fafafa;
            padding: 16px;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .canvas-container canvas {
            max-width: 100%;
            height: auto;
        }

        .btn {
            padding: 8px 16px;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: var(--text-size);
            transition: background 0.2s ease, transform 0.2s ease;
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-success:hover {
            background: #059669;
        }

        .highlight-box {
            position: relative;
            background: linear-gradient(135deg, #eff6ff, #dbeafe);
            border: 2px solid rgba(59, 130, 246, 0.4);
            border-radius: 12px;
            padding: 16px;
            color: var(--gray-600);
        }

        .highlight-box::before {
            content: '<i class="fa-solid fa-lightbulb"></i>';
            position: absolute;
            top: -12px;
            left: 20px;
            background: var(--white);
            padding: 0 8px;
            font-size: 20px;
        }

        @media (max-width: 768px) {
            .main {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                flex-direction: row;
                align-items: center;
                justify-content: center;
                border-right: none;
                border-bottom: 1px solid var(--border);
                gap: 8px;
                overflow-x: auto;
            }

            .nav-btn {
                min-width: 90px;
                text-align: center;
                white-space: nowrap;
            }

            .page-content.active {
                grid-template-columns: 1fr;
            }

            .container {
                height: auto;
                max-height: none;
            }
        }

        .return-home-panel { position: fixed; bottom: 12px; right: 12px; display: flex; flex-direction: column; align-items: flex-end; gap: 8px; z-index: 40; }
        .return-toggle { width: 40px; height: 40px; border-radius: 50%; border: none; background: linear-gradient(135deg, rgba(79,70,229,0.96), rgba(99,102,241,0.9)); color: #fff; font-size: 20px; cursor: pointer; box-shadow: 0 10px 18px rgba(79,70,229,0.28); transition: transform 0.2s, box-shadow 0.2s; }
        .return-toggle:hover { transform: translateY(-1px) scale(1.03); box-shadow: 0 14px 26px rgba(79,70,229,0.35); }
        .return-links { display: none; flex-direction: column; gap: 6px; padding: 10px; border-radius: 10px; background: rgba(255,255,255,0.96); border: 1px solid rgba(79,70,229,0.18); box-shadow: 0 10px 30px rgba(15,23,42,0.14); opacity: 0; transition: opacity 0.16s; }
        .return-link { text-decoration: none; font-size: 15px; color: var(--primary-dark); padding: 6px 12px; border-radius: 8px; background: rgba(99,102,241,0.12); transition: background 0.2s; }
        .return-link:hover { background: rgba(79,70,229,0.18); }
    </style>


</head>
<body>
    <div class="return-home-panel"><button class="return-toggle" onclick="toggleReturnLinks()"><i class="fa-solid fa-house"></i></button><div class="return-links"><a class="return-link" href="index.html"><i class="fa-solid fa-arrow-left"></i> è¿”å›ç›®å½•</a><a class="return-link" href="../index.html"><i class="fa-solid fa-house"></i> è¿”å›ä¸»ç«™</a></div></div>

    <div class="container">
        <header class="header">
            <h1>ä¸­å€¼å®šç†è™šæ‹Ÿå®éªŒå®¤</h1>
        </header>

        <div class="main">
            <nav class="sidebar">
                <button class="nav-btn active" data-section="intro">æ¦‚å¿µå¼•å…¥</button>
                <button class="nav-btn" data-section="practice">åŠ¨æ‰‹å®è·µ</button>
                <button class="nav-btn" data-section="application">å®é™…åº”ç”¨</button>
            </nav>

            <!-- æ¦‚å¿µå¼•å…¥é¡µé¢ -->
            <div class="content active" id="intro">
                <div class="column">
                    <div class="card">
                        <h3>ğŸš— é€Ÿåº¦çš„ç§˜å¯†</h3>
                        <div class="steps">
                            æƒ³è±¡ä½ å¼€è½¦ä»AåŸåˆ°BåŸï¼Œå…¨ç¨‹120å…¬é‡Œï¼Œç”¨äº†2å°æ—¶ã€‚
                            <br><br>
                            <strong>å¹³å‡é€Ÿåº¦</strong> = 120å…¬é‡Œ Ã· 2å°æ—¶ = <span style="color: #3b82f6;">60å…¬é‡Œ/å°æ—¶</span>
                            <br><br>
                            <strong>ä¸­å€¼å®šç†å‘Šè¯‰æˆ‘ä»¬ï¼š</strong>
                            åœ¨è¿™2å°æ—¶çš„æ—…ç¨‹ä¸­ï¼Œ<span style="color: #ef4444;">å¿…ç„¶æœ‰æŸä¸ªæ—¶åˆ»</span>ï¼Œä½ çš„é€Ÿåº¦è¡¨æŒ‡é’ˆ<span style="color: #ef4444;">æ°å¥½æŒ‡åœ¨60å…¬é‡Œ/å°æ—¶</span>ï¼
                        </div>
                    </div>

                    <div class="card">
                        <h3><i class="fa-solid fa-drafting-compass"></i> å‡ ä½•æ„ä¹‰</h3>
                        <div class="info-box">
                            å‰²çº¿æ–œç‡ = å¹³å‡å˜åŒ–ç‡ = <span style="color: #3b82f6;">å¹³å‡é€Ÿåº¦</span>
                        </div>
                        <div class="info-box">
                            åˆ‡çº¿æ–œç‡ = ç¬æ—¶å˜åŒ–ç‡ = <span style="color: #ef4444;">ç¬æ—¶é€Ÿåº¦</span>
                        </div>
                        <div class="formula-box">
                            $f'(c) = \frac{f(b) - f(a)}{b - a}$
                        </div>
                        <div style="font-size: 14px; color: #6b7280; text-align: center; margin-top: 8px;">
                            æŸç‚¹cçš„åˆ‡çº¿æ–œç‡ = æ•´ä½“çš„å‰²çº¿æ–œç‡
                        </div>
                    </div>
                    <div class="highlight-box">
                        âœ… æˆ‘ä»¬å¾ˆå®¹æ˜“æµ‹é‡ä¸€ä¸ªè¿‡ç¨‹çš„å¼€å§‹å’Œç»“æŸï¼Œç®—å‡ºå¹³å‡å€¼<br>
                        âŒ ä½†å¾ˆéš¾æŒç»­ç›‘æ§è¿‡ç¨‹ä¸­çš„æ¯ä¸€ä¸ªç¬é—´
                    </div>
                </div>

                <div class="column">
                    <div class="card">
                        <h3><i class="fa-solid fa-chart-bar"></i> å›¾å½¢æ¼”ç¤º</h3>
                        <div class="canvas-container">
                            <canvas id="introCanvas" width="500" height="300"></canvas>
                        </div>
                        <div class="info-box">
                            <span style="color: #3b82f6;">è“è‰²è™šçº¿</span>æ˜¯å‰²çº¿ï¼ˆå¹³å‡é€Ÿåº¦ï¼‰<br>
                            <span style="color: #ef4444;">çº¢è‰²åˆ‡çº¿</span>æ˜¯æŸç‚¹çš„åˆ‡çº¿ï¼ˆç¬æ—¶é€Ÿåº¦ï¼‰<br>
                            å®ƒä»¬<strong>å¹³è¡Œ</strong>æ—¶ï¼Œæ–œç‡å°±ç›¸ç­‰äº†ï¼
                        </div>
                        <button class="btn" onclick="animateIntro()">æ’­æ”¾åŠ¨ç”»</button>
                        <button class="btn btn-success" onclick="resetIntro()">é‡ç½®</button>
                    </div>
                    <div class="highlight-box">
                        ä¸­å€¼å®šç†è§£å†³äº†ç°å®ä¸­çš„æµ‹é‡éš¾é¢˜â€”â€”æˆ‘ä»¬ä¸éœ€è¦ç›‘æ§æ¯ä¸ªç¬é—´ï¼Œåªè¦çŸ¥é“èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œå°±èƒ½ç¡®å®šæŸä¸ªç¬æ—¶å€¼çš„å­˜åœ¨ã€‚
                    </div>
                </div>
            </div>

            <!-- åŠ¨æ‰‹å®è·µé¡µé¢ -->
            <div class="content" id="practice">
                <div class="column">
                    <div class="card">
                        <h3>ğŸ§ª å®éªŒæŒ‘æˆ˜</h3>
                        <div class="highlight-box" style="background: linear-gradient(135deg, #fef3c7, #fde68a); border-color: #f59e0b;">
                            <strong>ä»»åŠ¡ï¼š</strong>ç›´æ¥ç”¨é¼ æ ‡æ‹–åŠ¨ç”»å¸ƒä¸­çš„ç‚¹ï¼
                            <br>â€¢ æ‹–åŠ¨<span style="color: #3b82f6;">Aã€Bç‚¹</span>æ”¹å˜åŒºé—´
                            <br>â€¢ æ‹–åŠ¨<span style="color: #ef4444;">Cç‚¹</span>æ‰¾åˆ°ä¸­å€¼ç‚¹
                            <br>â€¢ è®©ä¸¤ä¸ªæ–œç‡æ•°å€¼ç›¸ç­‰å³å¯ï¼
                        </div>
                        
                        <div class="input-group">
                            <label>é€‰æ‹©å®éªŒå‡½æ•°</label>
                            <select id="funcSelect" onchange="changeFunction()">
                                <option value="parabola">å¹³æ»‘æŠ›ç‰©çº¿</option>
                                <option value="sine">æ­£å¼¦æ³¢æµª</option>
                                <option value="cubic">ä¸‰æ¬¡æ›²çº¿</option>
                                <option value="abs"><i class="fa-solid fa-triangle-exclamation"></i> ç ´åæ€§å‡½æ•°ï¼ˆæœ‰å°–è§’ï¼‰</option>
                            </select>
                        </div>

                        <div class="slope-display" style="display: flex; gap: 10px; margin-top: 15px;">
                            <div style="flex: 1; padding: 15px; border-radius: 8px; text-align: center; background: linear-gradient(135deg, #3b82f6, #2563eb); color: white;">
                                <div style="font-size: 24px; font-weight: bold;" id="secantSlope">0.000</div>
                                <div style="font-size: 12px; margin-top: 5px;">å‰²çº¿æ–œç‡<br>(å¹³å‡é€Ÿåº¦)</div>
                            </div>
                            <div style="flex: 1; padding: 15px; border-radius: 8px; text-align: center; background: linear-gradient(135deg, #ef4444, #dc2626); color: white;">
                                <div style="font-size: 24px; font-weight: bold;" id="tangentSlope">0.000</div>
                                <div style="font-size: 12px; margin-top: 5px;">åˆ‡çº¿æ–œç‡<br>(ç¬æ—¶é€Ÿåº¦)</div>
                            </div>
                        </div>

                        <div class="info-box" id="resultMessage" style="margin-top: 15px;">
                            æ‹–åŠ¨Cç‚¹æ¥åŒ¹é…æ–œç‡...
                        </div>

                        <button class="btn" onclick="autoFindC()" style="width: 100%; margin-top: 10px;">
                            ğŸ” è‡ªåŠ¨å¯»æ‰¾ä¸­å€¼ç‚¹
                        </button>
                    </div>

                    <div class="card">
                        <h3><i class="fa-solid fa-file-pen"></i> å®éªŒæ•°æ®</h3>
                        <div id="experimentData" class="steps">
                            <div>Aç‚¹ä½ç½®ï¼šx = <span id="pointAX">0.8</span></div>
                            <div>Bç‚¹ä½ç½®ï¼šx = <span id="pointBX">4.2</span></div>
                            <div>Cç‚¹ä½ç½®ï¼šx = <span id="pointCX">2.5</span></div>
                            <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #d1d5db;">
                                æ–œç‡å·®å€¼ï¼š<span id="slopeDiff" style="font-weight: bold;">0.000</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="column">
                    <div class="card">
                        <h3><i class="fa-solid fa-chart-line"></i> äº¤äº’å®éªŒåŒº</h3>
                        <div class="canvas-container" style="min-height: 400px;">
                            <canvas id="practiceCanvas" width="500" height="400"></canvas>
                        </div>
                        <div class="info-box" style="font-size: 14px;">
                            <i class="fa-solid fa-lightbulb"></i> ç›´æ¥æ‹–åŠ¨å›¾ä¸­çš„ç‚¹è¿›è¡Œå®éªŒï¼<br>
                            å½“<span style="color: #ef4444;">çº¢è‰²åˆ‡çº¿</span>ä¸<span style="color: #3b82f6;">è“è‰²å‰²çº¿</span>å¹³è¡Œæ—¶å³ä¸ºæˆåŠŸ
                        </div>
                    </div>

                    <div class="card">
                        <h3><i class="fa-solid fa-bullseye"></i> å®éªŒæŠ€å·§</h3>
                        <div class="steps">
                            <div><strong>æŠ€å·§1ï¼š</strong>å…ˆæ‹–åŠ¨Aã€Bç‚¹ç¡®å®šåŒºé—´ï¼Œå†è°ƒæ•´Cç‚¹</div>
                            <div><strong>æŠ€å·§2ï¼š</strong>è§‚å¯Ÿæ–œç‡å·®å€¼ï¼Œå½“æ¥è¿‘0æ—¶å³ä¸ºæˆåŠŸ</div>
                            <div><strong>æŠ€å·§3ï¼š</strong>ä½¿ç”¨"è‡ªåŠ¨å¯»æ‰¾"åŠŸèƒ½éªŒè¯ç»“æœ</div>
                            <div><strong>æŠ€å·§4ï¼š</strong>å°è¯•ä¸åŒå‡½æ•°ï¼Œè§‚å¯Ÿä¸­å€¼ç‚¹çš„ä½ç½®å˜åŒ–</div>
                        </div>
                        <div class="info-box" style="margin-top: 15px;">
                            ğŸ” <strong>æ·±åº¦æ€è€ƒï¼š</strong>ä¸ºä»€ä¹ˆæœ‰äº›å‡½æ•°ï¼ˆå¦‚ç»å¯¹å€¼å‡½æ•°ï¼‰æ— æ³•æ‰¾åˆ°ä¸­å€¼ç‚¹ï¼Ÿè¿™ä¸ä¸­å€¼å®šç†çš„æ¡ä»¶æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ
                        </div>
                    </div>
                </div>
            </div>

            <!-- å®é™…åº”ç”¨é¡µé¢ -->
            <div class="content" id="application">
                <div class="column">
                    <div class="card">
                        <h3>ğŸš” åŒºé—´æµ‹é€ŸåŸç†</h3>
                        <div class="steps">
                            <strong>åœºæ™¯ï¼š</strong>é«˜é€Ÿå…¬è·¯é™é€Ÿ100å…¬é‡Œ/å°æ—¶
                            <br><br>
                            æŸå¸æœºçš„è¡Œè½¦è®°å½•ï¼š
                            <br>â€¢ 10:00 è¿›å…¥æµ‹é€ŸåŒºï¼ˆ0å…¬é‡Œå¤„ï¼‰
                            <br>â€¢ 11:00 ç¦»å¼€æµ‹é€ŸåŒºï¼ˆ120å…¬é‡Œå¤„ï¼‰
                            <br><br>
                            <strong>è®¡ç®—ï¼š</strong>
                            <br>å¹³å‡é€Ÿåº¦ = 120å…¬é‡Œ Ã· 1å°æ—¶ = <span style="color: #ef4444;">120å…¬é‡Œ/å°æ—¶</span>
                            <br><br>
                            <strong>ç»“è®ºï¼š</strong>
                            æ ¹æ®ä¸­å€¼å®šç†ï¼Œå¿…ç„¶å­˜åœ¨æŸä¸ªæ—¶åˆ»ï¼Œè¯¥å¸æœºçš„ç¬æ—¶é€Ÿåº¦è¾¾åˆ°120å…¬é‡Œ/å°æ—¶ï¼Œè¶…è¿‡äº†é™é€Ÿï¼
                        </div>
                        <div class="info-box danger">
                            <i class="fa-solid fa-triangle-exclamation"></i> ç½šå•å·²å¼€å‡ºï¼šè¶…é€Ÿ20å…¬é‡Œ/å°æ—¶
                        </div>
                    </div>

                    <div class="card">
                        <h3>ğŸ­ ç”Ÿäº§çº¿è´¨æ£€</h3>
                        <div class="steps">
                            æŸå·¥å‚ç”Ÿäº§çº¿ï¼š
                            <br>â€¢ æ—©ä¸Š8:00 å·²ç”Ÿäº§100ä»¶
                            <br>â€¢ ä¸‹åˆ5:00 å·²ç”Ÿäº§1000ä»¶
                            <br><br>
                            å¹³å‡äº§é€Ÿ = (1000-100)ä»¶ Ã· 9å°æ—¶ = 100ä»¶/å°æ—¶
                            <br><br>
                            <strong>ä¸­å€¼å®šç†åº”ç”¨ï¼š</strong>
                            å¿…ç„¶å­˜åœ¨æŸä¸ªæ—¶åˆ»ï¼Œç”Ÿäº§çº¿çš„ç¬æ—¶äº§é€Ÿæ°å¥½æ˜¯100ä»¶/å°æ—¶ã€‚
                            è¿™å¯ä»¥ç”¨æ¥æ£€æŸ¥ç”Ÿäº§çº¿æ˜¯å¦æœ‰å¼‚å¸¸æ³¢åŠ¨ã€‚
                        </div>
                    </div>
                </div>

                <div class="column">
                    <div class="card">
                        <h3>ğŸš— æ¨¡æ‹ŸåŒºé—´æµ‹é€Ÿ</h3>
                        <div class="canvas-container">
                            <canvas id="speedCanvas" width="500" height="250"></canvas>
                        </div>
                        <div class="slider-group">
                            <label>æ—¶é—´</label>
                            <input type="range" class="slider" id="timeSlider" 
                                   min="0" max="60" step="1" value="0" 
                                   oninput="updateSpeedSimulation()">
                            <span class="slider-value" id="timeValue">0åˆ†é’Ÿ</span>
                        </div>
                        <div class="info-box" id="speedInfo">
                            å½“å‰ä½ç½®ï¼š0å…¬é‡Œ | ç¬æ—¶é€Ÿåº¦ï¼š80å…¬é‡Œ/å°æ—¶
                        </div>
                        <button class="btn" onclick="startSpeedSimulation()">å¼€å§‹æ¨¡æ‹Ÿ</button>
                        <button class="btn btn-success" onclick="resetSpeedSimulation()">é‡ç½®</button>
                    </div>

                    <div class="card">
                        <h3><i class="fa-solid fa-money-bill-wave"></i> æŠ•èµ„æ”¶ç›Šåˆ†æ</h3>
                        <div class="steps">
                            æŸè‚¡ç¥¨ï¼š
                            <br>â€¢ å¹´åˆä»·æ ¼ï¼š100å…ƒ
                            <br>â€¢ å¹´æœ«ä»·æ ¼ï¼š150å…ƒ
                            <br><br>
                            å¹´å‡æ¶¨å¹… = 50%
                            <br><br>
                            æ ¹æ®ä¸­å€¼å®šç†ï¼Œè¿™ä¸€å¹´ä¸­å¿…ç„¶æœ‰æŸä¸ªæ—¶åˆ»ï¼Œè‚¡ç¥¨çš„ç¬æ—¶æ¶¨å¹…ç‡æ°å¥½æ˜¯50%/å¹´ã€‚
                        </div>
                        <div class="info-box success">
                            è¿™å¸®åŠ©æŠ•èµ„è€…ç†è§£ï¼šå³ä½¿è‚¡ä»·æ³¢åŠ¨ï¼Œä¹Ÿä¼šæœ‰"å¹³å‡è¡¨ç°"çš„æ—¶åˆ»
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let practiceCanvas, practiceCtx;
        let isDragging = false;
        let dragPoint = null;
        let practiceFunc = 'parabola';
        let points = {
            A: { x: 0.8, y: 0 },
            B: { x: 4.2, y: 0 },
            C: { x: 2.5, y: 0 }
        };
        let speedTime = 0;
        let speedAnimation = null;
        let introAnimationFrame = 0;
        let introAnimation = null;

        const functions = {
            parabola: {
                f: (x) => -0.3 * (x - 2.5) * (x - 2.5) + 3,
                df: (x) => -0.6 * (x - 2.5),
                name: 'å¹³æ»‘æŠ›ç‰©çº¿',
                smooth: true
            },
            sine: {
                f: (x) => Math.sin(2 * x) + x / 3,
                df: (x) => 2 * Math.cos(2 * x) + 1/3,
                name: 'æ­£å¼¦æ³¢æµª',
                smooth: true
            },
            cubic: {
                f: (x) => Math.pow(x, 3) / 4 - x,
                df: (x) => 3 * x * x / 4 - 1,
                name: 'ä¸‰æ¬¡æ›²çº¿',
                smooth: true
            },
            abs: {
                f: (x) => Math.abs(x - 2.5) + 1,
                df: (x) => x > 2.5 ? 1 : (x < 2.5 ? -1 : undefined),
                name: 'ç ´åæ€§å‡½æ•°ï¼ˆæœ‰å°–è§’ï¼‰',
                smooth: false
            }
        };

        // æ¦‚å¿µå¼•å…¥é¡µé¢çš„å›¾å½¢
        function drawIntro() {
            const canvas = document.getElementById('introCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            const padding = 60;
            const graphWidth = width - 2 * padding;
            const graphHeight = height - 2 * padding;
            
            // ç»˜åˆ¶ç½‘æ ¼
            ctx.strokeStyle = '#e5e7eb';
            ctx.lineWidth = 0.5;
            for (let i = 0; i <= 10; i++) {
                const x = padding + (i * graphWidth / 10);
                const y = padding + (i * graphHeight / 10);
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.strokeStyle = '#374151';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.stroke();
            
            // å®šä¹‰å‡½æ•°
            const func = (x) => -0.3 * (x - 2.5) * (x - 2.5) + 3;
            
            const xa = 0.8;
            const xb = 4.2;
            const xc = 2.5;
            
            const ya = func(xa);
            const yb = func(xb);
            const yc = func(xc);
            
            const toCanvasX = (x) => padding + (x / 5) * graphWidth;
            const toCanvasY = (y) => height - padding - (y / 4) * graphHeight;
            
            // ç»˜åˆ¶å‡½æ•°æ›²çº¿
            ctx.strokeStyle = '#4f46e5';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let x = 0; x <= 5; x += 0.05) {
                const y = func(x);
                const canvasX = toCanvasX(x);
                const canvasY = toCanvasY(y);
                
                if (x === 0) {
                    ctx.moveTo(canvasX, canvasY);
                } else {
                    ctx.lineTo(canvasX, canvasY);
                }
            }
            ctx.stroke();
            
            // ç»˜åˆ¶å‰²çº¿
            ctx.strokeStyle = '#3b82f6';
            ctx.lineWidth = 2.5;
            ctx.setLineDash([8, 4]);
            ctx.beginPath();
            ctx.moveTo(toCanvasX(xa), toCanvasY(ya));
            ctx.lineTo(toCanvasX(xb), toCanvasY(yb));
            ctx.stroke();
            ctx.setLineDash([]);
            
            // è®¡ç®—å‰²çº¿æ–œç‡
            const secantSlope = (yb - ya) / (xb - xa);
            
            // ç»˜åˆ¶Cç‚¹çš„åˆ‡çº¿
            const tangentLength = 1.5;
            ctx.strokeStyle = '#ef4444';
            ctx.lineWidth = 2.5;
            ctx.beginPath();
            const x1 = xc - tangentLength;
            const y1 = yc - secantSlope * tangentLength;
            const x2 = xc + tangentLength;
            const y2 = yc + secantSlope * tangentLength;
            ctx.moveTo(toCanvasX(x1), toCanvasY(y1));
            ctx.lineTo(toCanvasX(x2), toCanvasY(y2));
            ctx.stroke();
            
            // æ ‡è®°ç‚¹Aã€Bã€C
            ctx.fillStyle = '#3b82f6';
            ctx.beginPath();
            ctx.arc(toCanvasX(xa), toCanvasY(ya), 6, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            ctx.fillStyle = '#3b82f6';
            ctx.beginPath();
            ctx.arc(toCanvasX(xb), toCanvasY(yb), 6, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            ctx.fillStyle = '#ef4444';
            ctx.beginPath();
            ctx.arc(toCanvasX(xc), toCanvasY(yc), 7, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // æ·»åŠ æ ‡ç­¾
            ctx.fillStyle = '#1f2937';
            ctx.font = 'bold 16px Arial';
            ctx.fillText('A(èµ·ç‚¹)', toCanvasX(xa) - 30, toCanvasY(ya) + 25);
            ctx.fillText('B(ç»ˆç‚¹)', toCanvasX(xb) - 20, toCanvasY(yb) + 25);
            ctx.fillText('C(ä¸­å€¼ç‚¹)', toCanvasX(xc) - 35, toCanvasY(yc) - 15);
            
            ctx.font = '14px Arial';
            ctx.fillStyle = '#3b82f6';
            ctx.fillText('å‰²çº¿ï¼ˆå¹³å‡é€Ÿåº¦ï¼‰', toCanvasX(2.5), toCanvasY(1.2));
            
            ctx.fillStyle = '#ef4444';
            ctx.fillText('åˆ‡çº¿ï¼ˆç¬æ—¶é€Ÿåº¦ï¼‰', toCanvasX(xc) + 70, toCanvasY(yc) + 20);
            
            ctx.fillStyle = '#10b981';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('âœ“ å¹³è¡Œï¼', toCanvasX(3.5), toCanvasY(2.5));
            
            ctx.fillStyle = '#374151';
            ctx.font = '14px Arial';
            ctx.fillText('xï¼ˆæ—¶é—´ï¼‰', width - padding + 5, height - padding + 5);
            ctx.fillText('yï¼ˆè·¯ç¨‹ï¼‰', padding - 45, padding - 10);
        }

        function animateIntro() {
            if (introAnimation) return;
            
            const canvas = document.getElementById('introCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const padding = 60;
            const graphWidth = width - 2 * padding;
            const graphHeight = height - 2 * padding;
            
            const func = (x) => -0.3 * (x - 2.5) * (x - 2.5) + 3;
            const dfunc = (x) => -0.6 * (x - 2.5);
            const toCanvasX = (x) => padding + (x / 5) * graphWidth;
            const toCanvasY = (y) => height - padding - (y / 4) * graphHeight;
            
            const xa = 0.8;
            const xb = 4.2;
            const ya = func(xa);
            const yb = func(xb);
            const secantSlope = (yb - ya) / (xb - xa);
            
            introAnimation = setInterval(() => {
                introAnimationFrame += 2;
                if (introAnimationFrame > 100) {
                    introAnimationFrame = 0;
                }
                
                ctx.clearRect(0, 0, width, height);
                
                // é‡ç»˜ç½‘æ ¼
                ctx.strokeStyle = '#e5e7eb';
                ctx.lineWidth = 0.5;
                for (let i = 0; i <= 10; i++) {
                    const x = padding + (i * graphWidth / 10);
                    const y = padding + (i * graphHeight / 10);
                    ctx.beginPath();
                    ctx.moveTo(x, padding);
                    ctx.lineTo(x, height - padding);
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.moveTo(padding, y);
                    ctx.lineTo(width - padding, y);
                    ctx.stroke();
                }
                
                // é‡ç»˜åæ ‡è½´
                ctx.strokeStyle = '#374151';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(padding, height - padding);
                ctx.lineTo(width - padding, height - padding);
                ctx.moveTo(padding, padding);
                ctx.lineTo(padding, height - padding);
                ctx.stroke();
                
                // é‡ç»˜å‡½æ•°æ›²çº¿
                ctx.strokeStyle = '#4f46e5';
                ctx.lineWidth = 3;
                ctx.beginPath();
                for (let x = 0; x <= 5; x += 0.05) {
                    const y = func(x);
                    const canvasX = toCanvasX(x);
                    const canvasY = toCanvasY(y);
                    if (x === 0) {
                        ctx.moveTo(canvasX, canvasY);
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                }
                ctx.stroke();
                
                // é‡ç»˜å‰²çº¿
                ctx.strokeStyle = '#3b82f6';
                ctx.lineWidth = 2.5;
                ctx.setLineDash([8, 4]);
                ctx.beginPath();
                ctx.moveTo(toCanvasX(xa), toCanvasY(ya));
                ctx.lineTo(toCanvasX(xb), toCanvasY(yb));
                ctx.stroke();
                ctx.setLineDash([]);
                
                // æ ‡è®°Aã€Bç‚¹
                ctx.fillStyle = '#3b82f6';
                ctx.beginPath();
                ctx.arc(toCanvasX(xa), toCanvasY(ya), 6, 0, 2 * Math.PI);
                ctx.fill();
                ctx.beginPath();
                ctx.arc(toCanvasX(xb), toCanvasY(yb), 6, 0, 2 * Math.PI);
                ctx.fill();
                
                // è®¡ç®—å½“å‰åŠ¨ç”»ç‚¹çš„ä½ç½®
                const t = introAnimationFrame / 100;
                const currentX = xa + t * (xb - xa);
                const currentY = func(currentX);
                const currentSlope = dfunc(currentX);
                
                // ç»˜åˆ¶å½“å‰ç‚¹çš„åˆ‡çº¿
                const tangentLength = 1.2;
                ctx.strokeStyle = '#10b981';
                ctx.lineWidth = 3;
                ctx.beginPath();
                const x1 = currentX - tangentLength;
                const y1 = currentY - currentSlope * tangentLength;
                const x2 = currentX + tangentLength;
                const y2 = currentY + currentSlope * tangentLength;
                ctx.moveTo(toCanvasX(x1), toCanvasY(y1));
                ctx.lineTo(toCanvasX(x2), toCanvasY(y2));
                ctx.stroke();
                
                // ç»˜åˆ¶ç§»åŠ¨çš„ç‚¹
                ctx.fillStyle = '#10b981';
                ctx.beginPath();
                ctx.arc(toCanvasX(currentX), toCanvasY(currentY), 7, 0, 2 * Math.PI);
                ctx.fill();
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // æ˜¾ç¤ºæ–œç‡ä¿¡æ¯
                const slopeDiff = Math.abs(currentSlope - secantSlope);
                ctx.fillStyle = '#374151';
                ctx.font = '14px Arial';
                ctx.fillText(`ç§»åŠ¨ç‚¹ä½ç½®ï¼šx = ${currentX.toFixed(2)}`, padding, padding - 30);
                ctx.fillText(`åˆ‡çº¿æ–œç‡ï¼ˆç¬æ—¶é€Ÿåº¦ï¼‰= ${currentSlope.toFixed(3)}`, padding, padding - 10);
                ctx.fillText(`å‰²çº¿æ–œç‡ï¼ˆå¹³å‡é€Ÿåº¦ï¼‰= ${secantSlope.toFixed(3)}`, padding + 250, padding - 10);
                
                // å½“åˆ‡çº¿ä¸å‰²çº¿æ¥è¿‘å¹³è¡Œæ—¶é«˜äº®æ˜¾ç¤º
                if (slopeDiff < 0.05) {
                    ctx.fillStyle = '#ef4444';
                    ctx.font = 'bold 18px Arial';
                    ctx.fillText('âœ¨ æ‰¾åˆ°äº†ï¼åˆ‡çº¿ä¸å‰²çº¿å¹³è¡Œï¼', width/2 - 100, padding - 30);
                    
                    ctx.strokeStyle = '#ef4444';
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.moveTo(toCanvasX(x1), toCanvasY(y1));
                    ctx.lineTo(toCanvasX(x2), toCanvasY(y2));
                    ctx.stroke();
                }
                
                ctx.fillStyle = '#1f2937';
                ctx.font = 'bold 14px Arial';
                ctx.fillText('A', toCanvasX(xa) - 20, toCanvasY(ya) + 25);
                ctx.fillText('B', toCanvasX(xb) + 10, toCanvasY(yb) + 25);
                
            }, 80);
        }

        function resetIntro() {
            if (introAnimation) {
                clearInterval(introAnimation);
                introAnimation = null;
            }
            introAnimationFrame = 0;
            drawIntro();
        }

        // åŠ¨æ‰‹å®è·µé¡µé¢å‡½æ•°
        function initPracticeCanvas() {
            practiceCanvas = document.getElementById('practiceCanvas');
            if (!practiceCanvas) return;
            
            practiceCtx = practiceCanvas.getContext('2d');
            
            // è®¾ç½®ç”»å¸ƒå¤§å°
            practiceCanvas.width = 500;
            practiceCanvas.height = 400;
            
            // æ¸…é™¤ä¹‹å‰çš„äº‹ä»¶ç›‘å¬å™¨
            const newCanvas = practiceCanvas.cloneNode(true);
            practiceCanvas.parentNode.replaceChild(newCanvas, practiceCanvas);
            practiceCanvas = newCanvas;
            practiceCtx = practiceCanvas.getContext('2d');
            
            // é¼ æ ‡äº‹ä»¶
            practiceCanvas.addEventListener('mousedown', handleMouseDown);
            practiceCanvas.addEventListener('mousemove', handleMouseMove);
            practiceCanvas.addEventListener('mouseup', handleMouseUp);
            practiceCanvas.addEventListener('mouseleave', handleMouseUp);
            
            // è§¦æ‘¸äº‹ä»¶
            practiceCanvas.addEventListener('touchstart', (e) => {
                const touch = e.touches[0];
                const rect = practiceCanvas.getBoundingClientRect();
                handleMouseDown({
                    clientX: touch.clientX,
                    clientY: touch.clientY,
                    target: practiceCanvas
                });
                e.preventDefault();
            });
            
            practiceCanvas.addEventListener('touchmove', (e) => {
                const touch = e.touches[0];
                handleMouseMove({
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                e.preventDefault();
            });
            
            practiceCanvas.addEventListener('touchend', handleMouseUp);
            
            // ç«‹å³æ›´æ–°ç”»å¸ƒ
            updatePractice();
        }

        function toCanvasCoords(x, y) {
            const width = practiceCanvas.width;
            const height = practiceCanvas.height;
            const padding = 50;
            
            const canvasX = padding + (x / 5) * (width - 2 * padding);
            const canvasY = height - padding - (y / 4) * (height - 2 * padding);
            
            return { x: canvasX, y: canvasY };
        }

        function fromCanvasCoords(canvasX, canvasY) {
            const width = practiceCanvas.width;
            const height = practiceCanvas.height;
            const padding = 50;
            
            const x = (canvasX - padding) / (width - 2 * padding) * 5;
            const y = (height - padding - canvasY) / (height - 2 * padding) * 4;
            
            return { x, y };
        }

        function handleMouseDown(e) {
            const rect = practiceCanvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            
            for (let pointName in points) {
                const point = points[pointName];
                const canvasPoint = toCanvasCoords(point.x, point.y);
                const dist = Math.sqrt(Math.pow(mouseX - canvasPoint.x, 2) + Math.pow(mouseY - canvasPoint.y, 2));
                
                if (dist < 12) {
                    isDragging = true;
                    dragPoint = pointName;
                    practiceCanvas.style.cursor = 'grabbing';
                    break;
                }
            }
        }

        function handleMouseMove(e) {
            const rect = practiceCanvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            
            if (isDragging && dragPoint) {
                const coords = fromCanvasCoords(mouseX, mouseY);
                let newX = Math.max(0, Math.min(5, coords.x));
                
                if (dragPoint === 'A') {
                    newX = Math.min(newX, points.B.x - 0.5);
                } else if (dragPoint === 'B') {
                    newX = Math.max(newX, points.A.x + 0.5);
                } else if (dragPoint === 'C') {
                    newX = Math.max(points.A.x + 0.1, Math.min(newX, points.B.x - 0.1));
                }
                
                points[dragPoint].x = newX;
                points[dragPoint].y = functions[practiceFunc].f(newX);
                
                updatePractice();
            } else {
                let hoverPoint = false;
                for (let pointName in points) {
                    const point = points[pointName];
                    const canvasPoint = toCanvasCoords(point.x, point.y);
                    const dist = Math.sqrt(Math.pow(mouseX - canvasPoint.x, 2) + Math.pow(mouseY - canvasPoint.y, 2));
                    
                    if (dist < 12) {
                        hoverPoint = true;
                        break;
                    }
                }
                
                practiceCanvas.style.cursor = hoverPoint ? 'grab' : 'crosshair';
            }
        }

        function handleMouseUp() {
            isDragging = false;
            dragPoint = null;
            practiceCanvas.style.cursor = 'crosshair';
        }

        function changeFunction() {
            practiceFunc = document.getElementById('funcSelect').value;
            
            if (practiceFunc === 'abs') {
                points.A.x = 1;
                points.B.x = 4;
                points.C.x = 2.5;
            } else {
                points.A.x = 0.8;
                points.B.x = 4.2;
                points.C.x = 2.5;
            }
            
            updatePractice();
        }

        function updatePractice() {
            if (!practiceCanvas || !practiceCtx) return;
            
            const func = functions[practiceFunc];
            const width = practiceCanvas.width;
            const height = practiceCanvas.height;
            
            practiceCtx.clearRect(0, 0, width, height);
            
            const padding = 50;
            
            // æ›´æ–°ç‚¹çš„yå€¼
            points.A.y = func.f(points.A.x);
            points.B.y = func.f(points.B.x);
            points.C.y = func.f(points.C.x);
            
            // ç»˜åˆ¶ç½‘æ ¼
            practiceCtx.strokeStyle = '#e5e7eb';
            practiceCtx.lineWidth = 0.5;
            for (let i = 0; i <= 10; i++) {
                const x = padding + (i / 10) * (width - 2 * padding);
                const y = padding + (i / 10) * (height - 2 * padding);
                
                practiceCtx.beginPath();
                practiceCtx.moveTo(x, padding);
                practiceCtx.lineTo(x, height - padding);
                practiceCtx.stroke();
                
                practiceCtx.beginPath();
                practiceCtx.moveTo(padding, y);
                practiceCtx.lineTo(width - padding, y);
                practiceCtx.stroke();
            }
            
            // ç»˜åˆ¶åæ ‡è½´
            practiceCtx.strokeStyle = '#374151';
            practiceCtx.lineWidth = 2;
            practiceCtx.beginPath();
            practiceCtx.moveTo(padding, height - padding);
            practiceCtx.lineTo(width - padding, height - padding);
            practiceCtx.moveTo(padding, padding);
            practiceCtx.lineTo(padding, height - padding);
            practiceCtx.stroke();
            
            // ç»˜åˆ¶å‡½æ•°æ›²çº¿
            practiceCtx.strokeStyle = practiceFunc === 'abs' ? '#f59e0b' : '#4f46e5';
            practiceCtx.lineWidth = 3;
            practiceCtx.beginPath();
            
            for (let x = 0; x <= 5; x += 0.02) {
                const y = func.f(x);
                const canvasPoint = toCanvasCoords(x, y);
                
                if (x === 0) {
                    practiceCtx.moveTo(canvasPoint.x, canvasPoint.y);
                } else {
                    practiceCtx.lineTo(canvasPoint.x, canvasPoint.y);
                }
            }
            practiceCtx.stroke();
            
            // è®¡ç®—æ–œç‡
            const secantSlope = (points.B.y - points.A.y) / (points.B.x - points.A.x);
            const tangentSlope = func.df(points.C.x);
            
            // ç»˜åˆ¶å‰²çº¿
            practiceCtx.strokeStyle = '#3b82f6';
            practiceCtx.lineWidth = 2.5;
            practiceCtx.setLineDash([8, 4]);
            const pointA = toCanvasCoords(points.A.x, points.A.y);
            const pointB = toCanvasCoords(points.B.x, points.B.y);
            practiceCtx.beginPath();
            practiceCtx.moveTo(pointA.x, pointA.y);
            practiceCtx.lineTo(pointB.x, pointB.y);
            practiceCtx.stroke();
            practiceCtx.setLineDash([]);
            
            // ç»˜åˆ¶åˆ‡çº¿
            if (tangentSlope !== undefined) {
                practiceCtx.strokeStyle = '#ef4444';
                practiceCtx.lineWidth = 2.5;
                practiceCtx.beginPath();
                
                const tangentLength = 1.2;
                const x1 = points.C.x - tangentLength;
                const y1 = points.C.y - tangentSlope * tangentLength;
                const x2 = points.C.x + tangentLength;
                const y2 = points.C.y + tangentSlope * tangentLength;
                
                const p1 = toCanvasCoords(x1, y1);
                const p2 = toCanvasCoords(x2, y2);
                
                practiceCtx.moveTo(p1.x, p1.y);
                practiceCtx.lineTo(p2.x, p2.y);
                practiceCtx.stroke();
            }
            
            // ç»˜åˆ¶ç‚¹
            const pointC = toCanvasCoords(points.C.x, points.C.y);
            
            // Aç‚¹
            practiceCtx.fillStyle = '#3b82f6';
            practiceCtx.beginPath();
            practiceCtx.arc(pointA.x, pointA.y, 8, 0, 2 * Math.PI);
            practiceCtx.fill();
            practiceCtx.strokeStyle = 'white';
            practiceCtx.lineWidth = 2;
            practiceCtx.stroke();
            
            // Bç‚¹
            practiceCtx.fillStyle = '#3b82f6';
            practiceCtx.beginPath();
            practiceCtx.arc(pointB.x, pointB.y, 8, 0, 2 * Math.PI);
            practiceCtx.fill();
            practiceCtx.strokeStyle = 'white';
            practiceCtx.stroke();
            
            // Cç‚¹
            practiceCtx.fillStyle = '#ef4444';
            practiceCtx.beginPath();
            practiceCtx.arc(pointC.x, pointC.y, 8, 0, 2 * Math.PI);
            practiceCtx.fill();
            practiceCtx.strokeStyle = 'white';
            practiceCtx.stroke();
            
            // æ·»åŠ ç‚¹æ ‡ç­¾
            practiceCtx.fillStyle = '#1f2937';
            practiceCtx.font = 'bold 14px Arial';
            practiceCtx.fillText('A', pointA.x - 20, pointA.y - 10);
            practiceCtx.fillText('B', pointB.x + 10, pointB.y - 10);
            practiceCtx.fillText('C', pointC.x - 5, pointC.y - 15);
            
            // æ›´æ–°UI
            updatePracticeUI(secantSlope, tangentSlope);
        }

        function updatePracticeUI(secantSlope, tangentSlope) {
            document.getElementById('secantSlope').textContent = secantSlope.toFixed(3);
            document.getElementById('tangentSlope').textContent = 
                tangentSlope !== undefined ? tangentSlope.toFixed(3) : 'ä¸å¯å¯¼';
            
            document.getElementById('pointAX').textContent = points.A.x.toFixed(2);
            document.getElementById('pointBX').textContent = points.B.x.toFixed(2);
            document.getElementById('pointCX').textContent = points.C.x.toFixed(2);
            
            const diff = tangentSlope !== undefined ? 
                Math.abs(secantSlope - tangentSlope) : Infinity;
            
            document.getElementById('slopeDiff').textContent = 
                diff !== Infinity ? diff.toFixed(4) : '--';
            
            const msgBox = document.getElementById('resultMessage');
            
            if (tangentSlope === undefined) {
                msgBox.className = 'info-box danger';
                msgBox.innerHTML = '<i class="fa-solid fa-triangle-exclamation"></i> æ­¤ç‚¹ä¸å¯å¯¼ï¼ä¸­å€¼å®šç†ä¸é€‚ç”¨ï¼';
            } else if (diff < 0.01) {
                msgBox.className = 'info-box success';
                msgBox.innerHTML = 'ğŸ‰ å®Œç¾ï¼ä½ æ‰¾åˆ°äº†ä¸­å€¼ç‚¹ï¼åˆ‡çº¿ä¸å‰²çº¿å¹³è¡Œï¼';
            } else if (diff < 0.1) {
                msgBox.className = 'info-box warning';
                msgBox.innerHTML = 'å¾ˆæ¥è¿‘äº†ï¼ç»§ç»­è°ƒæ•´Cç‚¹...';
            } else {
                msgBox.className = 'info-box';
                msgBox.innerHTML = 'æ‹–åŠ¨Cç‚¹æ¥åŒ¹é…æ–œç‡...';
            }
        }

        function autoFindC() {
            const func = functions[practiceFunc];
            
            if (!func.smooth) {
                alert('å½“å‰å‡½æ•°å­˜åœ¨ä¸å¯å¯¼ç‚¹ï¼Œä¸­å€¼å®šç†ä¸é€‚ç”¨ï¼\nå°è¯•æ¢ä¸ªå‡½æ•°è¯•è¯•ï¼Ÿ');
                return;
            }
            
            const targetSlope = (points.B.y - points.A.y) / (points.B.x - points.A.x);
            let left = points.A.x + 0.01;
            let right = points.B.x - 0.01;
            let animationSteps = [];
            
            for (let i = 0; i < 30; i++) {
                const mid = (left + right) / 2;
                animationSteps.push(mid);
                
                const midSlope = func.df(mid);
                if (Math.abs(midSlope - targetSlope) < 0.001) {
                    break;
                }
                
                if (midSlope < targetSlope) {
                    left = mid;
                } else {
                    right = mid;
                }
            }
            
            let step = 0;
            const animate = () => {
                if (step < animationSteps.length) {
                    points.C.x = animationSteps[step];
                    points.C.y = func.f(points.C.x);
                    updatePractice();
                    step++;
                    setTimeout(animate, 100);
                }
            };
            
            animate();
        }

        // é€Ÿåº¦æ¨¡æ‹Ÿ
        function drawSpeedChart() {
            const canvas = document.getElementById('speedCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶é“è·¯
            ctx.fillStyle = '#6b7280';
            ctx.fillRect(50, height / 2 - 20, width - 100, 40);
            
            ctx.fillStyle = '#fbbf24';
            ctx.setLineDash([20, 10]);
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(50, height / 2);
            ctx.lineTo(width - 50, height / 2);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // ç»˜åˆ¶é‡Œç¨‹æ ‡è®°
            ctx.fillStyle = '#374151';
            ctx.font = '12px Arial';
            ctx.fillText('0km', 45, height / 2 + 50);
            ctx.fillText('120km', width - 70, height / 2 + 50);
            
            // ç»˜åˆ¶é€Ÿåº¦æ›²çº¿
            ctx.strokeStyle = '#ef4444';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let t = 0; t <= 60; t++) {
                const x = 50 + (t / 60) * (width - 100);
                const speed = 80 + 40 * Math.sin(t / 10);
                const y = height / 2 - 60 - speed / 3;
                
                if (t === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // ç»˜åˆ¶å¹³å‡é€Ÿåº¦çº¿
            ctx.strokeStyle = '#3b82f6';
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(50, height / 2 - 100);
            ctx.lineTo(width - 50, height / 2 - 100);
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.fillStyle = '#3b82f6';
            ctx.font = '12px Arial';
            ctx.fillText('å¹³å‡: 120km/h', width - 140, height / 2 - 105);
        }

        function updateSpeedSimulation() {
            speedTime = parseInt(document.getElementById('timeSlider').value);
            document.getElementById('timeValue').textContent = speedTime + 'åˆ†é’Ÿ';
            
            const distance = speedTime * 2;
            const speed = 80 + 40 * Math.sin(speedTime / 10);
            
            document.getElementById('speedInfo').innerHTML = 
                `å½“å‰ä½ç½®ï¼š${distance.toFixed(1)}å…¬é‡Œ | ç¬æ—¶é€Ÿåº¦ï¼š${speed.toFixed(1)}å…¬é‡Œ/å°æ—¶`;
            
            const canvas = document.getElementById('speedCanvas');
            if (!canvas) return;
            
            drawSpeedChart();
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            // ç»˜åˆ¶æ±½è½¦ä½ç½®
            const carX = 50 + (speedTime / 60) * (width - 100);
            ctx.fillStyle = '#10b981';
            ctx.beginPath();
            ctx.arc(carX, height / 2, 8, 0, 2 * Math.PI);
            ctx.fill();
            
            // æ ‡è®°å½“å‰é€Ÿåº¦ç‚¹
            const speedY = height / 2 - 60 - speed / 3;
            ctx.fillStyle = '#ef4444';
            ctx.beginPath();
            ctx.arc(carX, speedY, 5, 0, 2 * Math.PI);
            ctx.fill();
        }

        function startSpeedSimulation() {
            if (speedAnimation) clearInterval(speedAnimation);
            
            speedAnimation = setInterval(() => {
                speedTime += 1;
                if (speedTime > 60) speedTime = 0;
                
                document.getElementById('timeSlider').value = speedTime;
                updateSpeedSimulation();
            }, 100);
        }

        function resetSpeedSimulation() {
            if (speedAnimation) {
                clearInterval(speedAnimation);
                speedAnimation = null;
            }
            speedTime = 0;
            document.getElementById('timeSlider').value = 0;
            updateSpeedSimulation();
        }

        // é¡µé¢åˆ‡æ¢
        function switchPage(section) {
            const pages = document.querySelectorAll('.content');
            const navButtons = document.querySelectorAll('.nav-btn');
            
            pages.forEach(page => {
                page.classList.toggle('active', page.id === section);
            });
            navButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.section === section);
            });

            // æ¸²æŸ“MathJax
            if (window.MathJax && MathJax.typesetPromise) {
                setTimeout(() => {
                    MathJax.typesetPromise();
                }, 100);
            }

            // åˆå§‹åŒ–å¯¹åº”é¡µé¢çš„å†…å®¹
            setTimeout(() => {
                if (section === 'intro') {
                    resetIntro();
                } else if (section === 'practice') {
                    initPracticeCanvas();
                } else if (section === 'application') {
                    drawSpeedChart();
                    updateSpeedSimulation();
                }
            }, 100);
        }

        // åˆå§‹åŒ–å¯¼èˆª
        function initNavigation() {
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const section = btn.dataset.section;
                    switchPage(section);
                });
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', () => {
            initNavigation();
            switchPage('intro');
        });

        function toggleReturnLinks() { const p = document.querySelector('.return-links'); if (!p) return; if (p.style.display === 'flex') { p.style.opacity = '0'; setTimeout(() => p.style.display = 'none', 160); } else { p.style.display = 'flex'; requestAnimationFrame(() => p.style.opacity = '1'); } }
    </script>
</body>
</html>
