<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>左右极限与存在性判定实验室</title>
    
    <!-- 页面专用样式 -->
    <link rel="stylesheet" href="assets/lab2-4.css">
    
    <!-- Material Symbols 图标字体 -->
    <link rel="stylesheet" href="../common-assets/css/lab1-material-symbols.css">
    
    <!-- MathJax 配置 -->
    <script src="../common-assets/js/mathjax-config.js"></script>
    <script defer src="../common-assets/js/mathjax-3.2.2-tex-svg.min.js"></script>
</head>

<body>
    <!-- 返回主页浮动面板 -->
    <div class="return-home-panel">
        <button class="return-toggle" onclick="toggleReturnLinks()">
            <span class="material-symbols-outlined">home</span>
        </button>
        <div class="return-links">
            <a class="return-link" href="index.html">
                <span class="material-symbols-outlined" style="font-size: 16px;">arrow_back</span> 返回目录
            </a>
            <a class="return-link" href="../index.html">
                <span class="material-symbols-outlined" style="font-size: 16px;">home</span> 返回主站
            </a>
        </div>
    </div>

    <div class="container">
    <header class="header">
    <h1>左右极限与存在性判定实验室</h1>
    </header>
        
    <div class="main">
    <!-- 侧边栏 -->
    <nav class="sidebar">
    <button class="nav-btn active" onclick="switchPanel('theorem')">定理演示</button>
    <button class="nav-btn" onclick="switchPanel('visual')">可视化逼近</button>
    <button class="nav-btn" onclick="switchPanel('verify')">参数验证</button>
    </nav>

    <!-- 定理演示页面 -->
    <div class="content active" id="theorem">
    <div class="column">
    <div class="card">
    <h3>定理2：极限存在的充要条件</h3>
    <div class="formula-box">
                            $\displaystyle\lim_{x \to x_0} f(x) = A$ 的充要条件是<br>
                            $\displaystyle\lim_{x \to x_0^-} f(x) = \displaystyle\lim_{x \to x_0^+} f(x) = A$
                            </div>
    <div class="steps">
    <strong>含义解释：</strong><br>
                                • 函数在某点的极限存在<br>
                                • 当且仅当左极限和右极限都存在<br>
                                • 且两者相等<br>
                                • 这个共同值就是函数的极限值
                            </div>
    </div>
    <div class="card">
    <h3>选择测试函数</h3>
    <div class="function-selector">
    <button class="func-btn active" onclick="selectTestFunction(1)">
                                    连续函数<br>$f(x) = x^2$
                                </button>
    <button class="func-btn" onclick="selectTestFunction(2)">
                                    跳跃间断<br>$f(x) = \text{sgn}(x)$
                                </button>
    <button class="func-btn" onclick="selectTestFunction(3)">
                                可去间断<br>$f(x) = \dfrac{\sin x}{x}$
                                </button>
    <button class="func-btn" onclick="selectTestFunction(4)">
                                无穷间断<br>$f(x) = \dfrac{1}{x^2}$
                                </button>
    </div>
    <div class="info-box" id="funcDescription">在 x = 0 处，左右极限都等于 0，极限存在</div>
    </div>
    </div>
    <div class="column">
    <div class="card">
    <h3>极限判定结果</h3>
    <div class="limit-display">
    <div class="limit-box left">
    <div>左极限</div>
    <div class="limit-value" id="leftLimitValue">0</div>
    </div>
    <div class="limit-box right">
    <div>右极限</div>
    <div class="limit-value" id="rightLimitValue">0</div>
    </div>
    </div>
                        <div class="comparison-result equal" id="comparisonResult">
                            左极限 = 右极限 = 0<br>
                            <strong>极限存在：$\displaystyle\lim_{x \to 0} f(x) = 0$</strong>
                        </div>
    </div>
    <div class="card">
    <h3>图像展示</h3>
    <div class="canvas-container" style="min-height: 200px;">
    <canvas height="200" id="theoremGraph" width="500"></canvas>
    </div>
    </div>
    </div>
    </div>

    <!-- 可视化逼近页面 -->
    <div class="content" id="visual">
    <div class="column">
    <div class="card">
    <h3>逼近控制</h3>
    <div class="input-group">
                            <label>目标点 $x_0$</label>
    <input id="targetPoint" step="0.1" type="number" value="0">
    </div>
    <div class="slider-group">
    <label>逼近度</label>
    <input class="slider" id="approachSlider" max="1" min="0.01" step="0.01" type="range" value="0.5">
    <span class="slider-value" id="approachValue">0.50</span>
    </div>
    <div class="btn-row">
    <button class="btn" onclick="startApproach()">开始逼近</button>
    <button class="btn" onclick="resetApproach()">重置</button>
    </div>
    </div>
    <div class="card">
    <h3>逼近数据表</h3>
    <table class="approach-table">
    <thead>
    <tr>
    <th colspan="2">左侧逼近</th>
    <th colspan="2">右侧逼近</th>
    </tr>
    <tr>
                                    <th>$x$</th>
                                    <th>$f(x)$</th>
                                    <th>$x$</th>
                                    <th>$f(x)$</th>
    </tr>
    </thead>
                            <tbody id="approachTableBody"></tbody>
    </table>
    </div>
    </div>
    <div class="column">
    <div class="card">
    <h3>逼近过程可视化</h3>
    <div class="canvas-container">
    <canvas height="350" id="approachGraph" width="600"></canvas>
    </div>
    <div class="info-box">
    <span style="color: var(--left-color);">■</span> 左侧逼近轨迹
                                &nbsp;&nbsp;
                                <span style="color: var(--right-color);">■</span> 右侧逼近轨迹
                            </div>
    </div>
    <div class="card">
    <h3>实时状态</h3>
    <div class="info-box" id="approachStatus">
                            当前距离: $|x - x_0| = $ <span id="currentDistance">0.50</span><br>
                            左侧点: $x = $ <span id="leftPoint">-0.50</span>, $f(x) = $ <span id="leftValue">0.25</span><br>
                            右侧点: $x = $ <span id="rightPoint">0.50</span>, $f(x) = $ <span id="rightValue">0.25</span>
    </div>
    </div>
    </div>
    </div>

    <!-- 参数验证页面 -->
    <div class="content" id="verify">
    <div class="column">
    <div class="card">
    <h3>函数类型选择</h3>
    <div class="function-selector">
    <button class="func-btn" onclick="selectFunctionType(1)">
                                    连续函数<br>$f(x) = x + b$
                                </button>
    <button class="func-btn" onclick="selectFunctionType(2)">
                                跳跃函数<br>$f(x) = \begin{cases} x + b & x \geq 0 \\ x + b + a & x < 0 \end{cases}$
                                </button>
    <button class="func-btn" onclick="selectFunctionType(3)">
                                可去间断<br>$f(x) = \begin{cases} x + b & x \neq 0 \\ b + a & x = 0 \end{cases}$
                                </button>
    </div>
    <div class="input-group">
                            <label>参数 $b$（基础值）</label>
    <input id="paramB" max="2" min="-2" step="0.1" type="range" value="0">
                            <span>$b = $ <span id="paramBValue">0.0</span></span>
    </div>
    <div class="input-group">
                            <label>间断参数 $a$</label>
    <input id="paramA" max="2" min="-2" step="0.1" type="range" value="1">
                            <span>$a = $ <span id="paramAValue">1.0</span></span>
    </div>
                        <div class="formula-box" id="paramFunction">$f(x) = x + 0$</div>
    <button class="btn" onclick="updateParametric()">更新函数</button>
    </div>
    <div class="card">
    <h3>测试点选择</h3>
    <div class="input-group">
                            <label>测试点 $x_0$</label>
    <input id="testPoint" step="0.1" type="number" value="0">
    </div>
    <div class="input-group">
    <label>逼近距离</label>
    <input class="slider" id="testDistance" max="0.5" min="0.01" step="0.01" type="range" value="0.1">
    <span>距离 = <span id="testDistanceValue">0.10</span></span>
    </div>
    <button class="btn" onclick="calculateLimits()">计算极限</button>
    </div>
    </div>
    <div class="column">
    <div class="card">
    <h3>函数图像与极限</h3>
    <div class="canvas-container">
    <canvas height="350" id="epsilonGraph" width="600"></canvas>
    </div>
    <div class="info-box">
    <span style="color: var(--left-color);">■</span> 左极限点
                                &nbsp;&nbsp;
                                <span style="color: var(--right-color);">■</span> 右极限点
                                &nbsp;&nbsp;
                                <span style="color: #10b981;">■</span> 测试点
                            </div>
    </div>
    <div class="card">
    <h3>极限计算结果</h3>
    <div class="limit-display">
    <div class="limit-box left">
    <div>左极限</div>
    <div class="limit-value" id="verifyLeft">0.000</div>
    </div>
    <div class="limit-box right">
    <div>右极限</div>
    <div class="limit-value" id="verifyRight">0.000</div>
    </div>
    </div>
    <div class="result" id="verificationResult">左右极限相等，极限存在，函数连续</div>
    <div class="steps">
    <strong>判断步骤：</strong><br>
                            1. 计算左极限：$\displaystyle\lim_{x \to x_0^-} f(x)$<br>
                            2. 计算右极限：$\displaystyle\lim_{x \to x_0^+} f(x)$<br>
                                3. 比较两者是否相等<br>
                                4. 如果相等，极限存在；如果不等，极限不存在<br>
    <span id="verifyConclusion" style="color: var(--success);">✓ 极限存在（连续函数）</span><br>
                            <small style="color: #666;">注：连续函数和可去间断点的极限都存在，但跳跃间断点的极限不存在</small>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>

    <!-- 页面专用脚本 -->
    <script src="assets/lab2-4.js"></script>
</body>
</html>
