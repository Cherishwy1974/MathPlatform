<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>图像压缩与数列极限实验室</title>
    
    <!-- 页面专用样式 -->
    <link rel="stylesheet" href="assets/lab2-1.css">
    
    <!-- Material Symbols 图标字体 -->
    <link rel="stylesheet" href="../common-assets/css/lab1-material-symbols.css">
    
    <!-- MathJax 配置 -->
    <script src="../common-assets/js/mathjax-config.js"></script>
    <script defer src="../common-assets/js/mathjax-3.2.2-tex-svg.min.js"></script>
</head>

<body>
    <!-- 返回主页浮动面板 -->
    <div class="return-home-panel">
        <button class="return-toggle" onclick="toggleReturnLinks()">
            <span class="material-symbols-outlined">home</span>
        </button>
        <div class="return-links">
            <a class="return-link" href="index.html">
                <span class="material-symbols-outlined" style="font-size: 16px;">arrow_back</span> 返回目录
            </a>
            <a class="return-link" href="../index.html">
                <span class="material-symbols-outlined" style="font-size: 16px;">home</span> 返回主站
            </a>
        </div>
    </div>

    <div class="container">
    <header class="header">
    <h1>图像压缩与数列极限实验室</h1>
    </header>
        
    <div class="main">
    <!-- 侧边栏 -->
    <nav class="sidebar">
    <button class="nav-btn active" onclick="switchPanel('concept')">基础概念</button>
    <button class="nav-btn" onclick="switchPanel('compress')">压缩模拟</button>
    <button class="nav-btn" onclick="switchPanel('limit')">极限逼近</button>
    </nav>

    <!-- 基础概念页面 -->
    <div class="content active" id="concept">
    <div class="column">
    <div class="card">
    <h3>数列与极限</h3>
    <div class="formula-box">
                            $\{a_n\} = a_1, a_2, a_3, \ldots, a_n, \ldots$
                            </div>
    <div class="info-box">
    <strong>简单理解：</strong>数列就是一串有规律的数字，就像排队一样，每个数字都有自己的位置
                            </div>
    <div class="input-group">
    <label>选择数列类型</label>
    <select id="seqType" onchange="updateSequence()">
    <option value="arithmetic">等差数列（每次增加相同的数）</option>
    <option value="geometric">等比数列（每次乘以相同的数）</option>
                                <option value="harmonic">调和数列（$1, \frac{1}{2}, \frac{1}{3}, \frac{1}{4}, \ldots$）</option>
    <option value="converge">收敛数列（越来越接近某个数）</option>
    </select>
    </div>
                        <div class="sequence-display" id="seqDisplay"></div>
    <div class="result" id="seqFormula">$a_n = 2 + 3(n-1) = 3n - 1$</div>
    </div>
    <div class="card">
    <h3>极限概念</h3>
    <div class="formula-box">
                            $\displaystyle\lim_{n \to \infty} a_n = L$
                            </div>
    <div class="steps">
    <strong>通俗理解：</strong><br>
                                想象你站在一个目标前面，每次只能走一半的距离<br>
                                第一次走一半，第二次走剩下的一半，第三次再走剩下的一半...<br>
                                虽然永远走不到目标，但会越来越接近！<br>
                                这个"越来越接近"就是极限的概念
                            </div>
    <div class="info-box">
    <strong>在图像压缩中：</strong><br>
                            $\displaystyle\lim_{n \to \infty} d_n = 0$<br>
                                压缩次数越多，图像差异越小，最终几乎看不出差别
                            </div>
    <div class="steps">
    <strong>实际应用：</strong><br>
                                • 手机拍照自动压缩<br>
                                • 网页图片优化<br>
                                • 视频流媒体传输<br>
                                • 云存储空间节省
                            </div>
    </div>
    </div>
    <div class="column">
    <div class="card">
    <h3>数列可视化</h3>
    <div class="canvas-container">
    <canvas height="300" id="seqGraph" width="600"></canvas>
    </div>
    <div class="slider-group">
                            <label>项数 $n$</label>
    <input class="slider" id="nSlider" max="50" min="5" step="1" type="range" value="20">
    <span class="slider-value" id="nValue">20</span>
    </div>
    </div>
    <div class="card">
    <h3>图像压缩原理</h3>
    <div class="steps">
    <strong>图像压缩就像整理房间：</strong><br>
                                1. <strong>分类整理</strong> - 把相似的颜色放在一起<br>
                                2. <strong>简化细节</strong> - 去掉不重要的细节（人眼看不出的）<br>
                                3. <strong>打包存储</strong> - 用更少的地方存放相同的信息<br>
                                4. <strong>节省空间</strong> - 文件变小了，但看起来差不多
                            </div>
    <div class="formula-box">
                            压缩率 $= \dfrac{\text{原始大小} - \text{压缩后大小}}{\text{原始大小}} \times 100\%$
                            </div>
    <div class="info-box">
    <strong>生活例子：</strong>就像把衣服压缩袋里，体积变小了，但衣服还是那些衣服
                            </div>
    </div>
    </div>
    </div>

    <!-- 压缩模拟页面 -->
    <div class="content" id="compress">
    <div class="column">
    <div class="card">
    <h3>压缩控制</h3>
    <div class="input-group">
    <label>选择图像类型</label>
    <select id="imageSelect" onchange="loadImage()">
    <option value="landscape">风景照片（适合压缩）</option>
    <option value="portrait">人物照片（中等压缩）</option>
    <option value="abstract">抽象图案（难压缩）</option>
    </select>
    </div>
    <div class="info-box">
    <strong>压缩效果对比：</strong><br>
                                风景照：颜色渐变多，压缩效果好<br>
                                人物照：细节丰富，需要平衡<br>
                                抽象图：线条复杂，压缩困难
                            </div>
    <div class="slider-group">
    <label>质量</label>
    <input class="slider" id="qualitySlider" max="100" min="1" step="1" type="range" value="50">
    <span class="slider-value" id="qualityValue">50%</span>
    </div>
    <div class="btn-row">
    <button class="btn" onclick="compressImage()">立即压缩</button>
    <button class="btn" onclick="animateCompression()">观看压缩过程</button>
    </div>
    <div class="info-box">
    <strong>操作提示：</strong><br>
                                • 拖动质量滑块看压缩效果<br>
                                • 点击"观看压缩过程"看动画<br>
                                • 对比不同图像类型的压缩效果
                            </div>
    <div class="result" id="compressionInfo">
                                压缩率: 0% | 文件大小: 0KB
                            </div>
    </div>
    <div class="card">
    <h3>压缩差异变化</h3>
    <div class="formula-box">
                            $d_n = \|I_{\text{original}} - I_n\|$
                            </div>
    <div class="info-box">
    <strong>简单理解：</strong>每次压缩后，图像和原图的差别有多大<br>
                                数字越小 = 差别越小 = 压缩效果越好
                            </div>
    <div class="sequence-display" id="diffSequence"></div>
    <div class="progress-bar">
                            <div class="progress-fill" id="progressBar" style="width: 0%">0%</div>
    </div>
    </div>
    </div>
    <div class="column">
    <div class="card">
    <h3>图像对比</h3>
    <div class="image-grid">
    <div class="image-item">
    <canvas height="200" id="originalImage" width="200"></canvas>
    <div class="image-label">原始图像</div>
    </div>
    <div class="image-item">
    <canvas height="200" id="compressedImage" width="200"></canvas>
                                <div class="image-label">压缩后 ($Q=$<span id="qLabel">50</span>)</div>
    </div>
    <div class="image-item">
    <canvas height="200" id="diffImage" width="200"></canvas>
    <div class="image-label">差异图</div>
    </div>
    <div class="image-item">
    <canvas height="200" id="dctImage" width="200"></canvas>
    <div class="image-label">频域表示</div>
    </div>
    </div>
    </div>
    </div>
    </div>

    <!-- 极限逼近页面 -->
    <div class="content" id="limit">
    <div class="column">
    <div class="card">
    <h3>逐步逼近控制</h3>
    <div class="input-group">
    <label>迭代次数</label>
    <input id="iterations" max="100" min="1" type="number" value="10">
    </div>
    <div class="slider-group">
    <label>速度</label>
    <input class="slider" id="speedSlider" max="2000" min="100" step="100" type="range" value="500">
    <span class="slider-value" id="speedValue">500ms</span>
    </div>
    <div class="btn-row">
    <button class="btn" onclick="startApproximation()">开始演示</button>
    <button class="btn" onclick="pauseApproximation()">暂停/继续</button>
    </div>
    <div class="info-box">
    <strong>演示说明：</strong><br>
                                • 观看图像如何逐步逼近原图<br>
                                • 调整速度看不同效果<br>
                                • 观察误差如何逐渐减小
                            </div>
    <div class="result" id="approxInfo">
                                当前迭代: 0 | 误差: 100%
                            </div>
    </div>
    <div class="card">
    <h3>逼近效果分析</h3>
    <div class="formula-box">
                            $\varepsilon_n = \dfrac{d_n}{d_1} \times 100\%$
                            </div>
    <div class="info-box">
    <strong>简单理解：</strong>看看压缩效果如何变化<br>
                                曲线下降越快 = 逼近效果越好
                            </div>
    <div class="canvas-container" style="min-height: 150px;">
    <canvas height="150" id="convergenceGraph" width="400"></canvas>
    </div>
    <div class="info-box" id="convergenceInfo">
                                逼近效果: 计算中...
                            </div>
    </div>
    </div>
    <div class="column">
    <div class="card">
    <h3>逼近过程可视化</h3>
    <div class="canvas-container">
    <canvas height="400" id="approxCanvas" width="400"></canvas>
    </div>
    <div class="info-box">
    <strong>当前状态：</strong>
    <span id="approxStatus">等待开始</span>
    </div>
    </div>
    <div class="card">
    <h3>极限的直观理解</h3>
    <div class="formula-box">
                            当 $n \to \infty$ 时，$a_n \to L$
                            </div>
    <div class="steps">
    <strong>简单理解：</strong><br>
                                数列的极限就是数列"想去"的那个数<br>
                                虽然可能永远达不到，但会越来越接近<br>
                                就像追着影子跑，永远追不上但越来越近
                            </div>
    <div class="info-box">
    <strong>生活例子：</strong><br>
                                • 温度逐渐接近室温<br>
                                • 房价逐渐稳定<br>
                                • 学习效果越来越好
                            </div>
    <div class="steps">
    <strong>图像压缩中的极限：</strong><br>
                                压缩次数越多，图像越接近原图<br>
                                但永远不可能完全一样<br>
                                这就是极限的完美体现！
                            </div>
    </div>
    </div>
    </div>
    </div>
    </div>

    <!-- 页面专用脚本 -->
    <script src="assets/lab2-1.js"></script>
</body>
</html>
