<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>基本初等函数实验室 - 函数艺术与运动</title>
    
    <!-- 本地化资源 -->
    <!-- Tailwind CSS (运行时编译) -->
    <script src="../common-assets/js/tailwind.min.js"></script>
    
    <!-- Material Symbols 图标字体 -->
    <link rel="stylesheet" href="../common-assets/css/lab1-material-symbols.css">
    
    <!-- 页面专用样式 -->
    <link rel="stylesheet" href="assets/lab1-8.css">

    <!-- MathJax 配置 -->
    <script src="../common-assets/js/mathjax-config.js"></script>
    <script defer src="../common-assets/js/mathjax-3.2.2-tex-svg.min.js"></script>
</head>

<body class="bg-gray-50 text-gray-800 font-sans h-screen w-screen overflow-hidden flex flex-col md:flex-row">

    <!-- 返回主页浮动面板 -->
    <div class="fixed bottom-4 right-4 z-50 flex flex-col items-end space-y-2">
        <div class="hidden flex-col space-y-2 p-3 bg-white/95 backdrop-blur shadow-xl border border-indigo-100 rounded-xl transition-all duration-300 origin-bottom-right transform scale-95 opacity-0" id="return-links">
            <a class="flex items-center space-x-2 px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 hover:bg-indigo-100 transition-colors text-sm" href="index.html">
                <span class="material-symbols-outlined text-[18px]">arrow_back</span>
                <span>返回目录</span>
            </a>
            <a class="flex items-center space-x-2 px-3 py-2 rounded-lg bg-indigo-50 text-indigo-700 hover:bg-indigo-100 transition-colors text-sm" href="../index.html">
                <span class="material-symbols-outlined text-[18px]">home</span>
                <span>返回主站</span>
            </a>
        </div>
        <button class="w-12 h-12 rounded-full bg-gradient-to-br from-indigo-600 to-indigo-500 text-white shadow-lg shadow-indigo-500/30 hover:scale-105 hover:shadow-indigo-500/50 transition-all duration-300 flex items-center justify-center group" onclick="toggleReturnLinks()">
            <span class="material-symbols-outlined group-hover:rotate-12 transition-transform">home</span>
        </button>
    </div>

    <!-- 移动端头部 -->
    <header class="md:hidden bg-indigo-600 text-white p-4 shadow-md flex items-center justify-between z-20">
        <h1 class="text-lg font-bold flex items-center gap-2">
            <span class="material-symbols-outlined">palette</span>
            函数艺术与运动
        </h1>
    </header>

    <!-- 侧边导航 -->
    <nav class="w-full md:w-64 bg-white border-b md:border-b-0 md:border-r border-gray-200 flex md:flex-col shrink-0 overflow-x-auto md:overflow-visible z-10 p-2 md:p-4 gap-2 md:gap-3 shadow-sm">
        <div class="hidden md:flex items-center gap-2 mb-6 px-2 text-indigo-600">
            <span class="material-symbols-outlined text-3xl">palette</span>
            <h1 class="text-xl font-bold text-gray-800">艺术与运动</h1>
        </div>
        <button class="nav-btn group flex items-center gap-3 w-full p-3 rounded-lg text-left transition-all duration-200 bg-indigo-50 text-indigo-700 font-medium" onclick="switchPanel('art')">
            <span class="material-symbols-outlined">brush</span>
            <span class="whitespace-nowrap">函数艺术</span>
        </button>
        <button class="nav-btn group flex items-center gap-3 w-full p-3 rounded-lg text-left transition-all duration-200 hover:bg-gray-100 text-gray-600" onclick="switchPanel('motion')">
            <span class="material-symbols-outlined">animation</span>
            <span class="whitespace-nowrap">函数运动</span>
        </button>
    </nav>

    <!-- 主内容区 -->
    <main class="flex-1 overflow-y-auto no-scrollbar relative bg-slate-50 p-4 md:p-6 lg:p-8">
        
        <!-- 面板1：函数艺术 -->
        <div class="panel-content active grid-cols-1 lg:grid-cols-2 gap-6 max-w-7xl mx-auto" id="art">
            <div class="space-y-6">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-semibold text-indigo-600 mb-4 flex items-center gap-2">
                        <span class="material-symbols-outlined">auto_awesome</span> 数学之美
                    </h3>
                    <div class="prose text-sm text-gray-600 mb-4">
                        函数不仅仅是冰冷的公式，它们能绘制出令人惊叹的图形。通过参数方程和极坐标，简单的数学关系绽放出艺术的花朵。
                    </div>
                    <div class="bg-indigo-50 border-l-4 border-indigo-400 p-4 rounded-r-lg text-sm text-indigo-900 mb-4">
                        <strong>经典艺术曲线：</strong>
                        <ul class="list-disc list-inside mt-2 space-y-1">
                            <li><strong>心形线 (Cardioid)</strong>：$r = a(1 - \cos\theta)$ — 爱的形状</li>
                            <li><strong>玫瑰线 (Rose)</strong>：$r = a\cos(n\theta)$ — 花瓣绽放</li>
                            <li><strong>蝴蝶曲线</strong>：复杂的参数方程模拟自然形态</li>
                        </ul>
                    </div>
                    <div class="text-center">
                        <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-lg font-medium transition shadow-sm flex items-center justify-center gap-2 w-full md:w-auto mx-auto" onclick="openDesmosGallery()">
                            <span class="material-symbols-outlined">gallery_thumbnail</span>
                            进入 Desmos 艺术画廊
                        </button>
                        <p class="text-xs text-gray-400 mt-2">点击跳转至 Desmos 欣赏更多数学艺术作品</p>
                    </div>
                </div>
                
                <!-- 迷你预览 Canvas -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex flex-col h-64">
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">实时预览：动态玫瑰线</h3>
                    <div class="flex-1 relative overflow-hidden flex items-center justify-center" id="art-preview">
                        <canvas height="200" id="roseCanvas" width="200"></canvas>
                    </div>
                    <div class="text-center text-xs text-gray-500 mt-2">
                        $r = \sin(k\theta)$，参数 $k$ 随时间变化
                    </div>
                </div>
            </div>
            
            <div class="space-y-6">
                <!-- 嵌入 Desmos -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-1 flex flex-col h-full min-h-[400px]">
                    <iframe class="w-full h-full rounded-lg border-0" src="https://www.desmos.com/calculator/s0vl5m9y1e?embed" title="Desmos Graph"></iframe>
                </div>
            </div>
        </div>

        <!-- 面板2：函数运动 -->
        <div class="panel-content grid-cols-1 lg:grid-cols-2 gap-6 max-w-7xl mx-auto" id="motion">
            <!-- 控制与描述 -->
            <div class="space-y-6">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-semibold text-indigo-600 mb-4 flex items-center gap-2">
                        <span class="material-symbols-outlined">directions_run</span> 函数的"性格"与运动
                    </h3>
                    <div class="grid grid-cols-2 gap-3 mb-6">
                        <button class="func-btn hover:bg-indigo-100 py-3 rounded-lg font-medium transition border bg-indigo-50 text-indigo-700 border-indigo-200 active-func" onclick="selectMotion('linear')">
                            线性函数
                        </button>
                        <button class="func-btn bg-white hover:bg-gray-50 text-gray-700 py-3 rounded-lg font-medium transition border border-gray-200" onclick="selectMotion('quadratic')">
                            二次函数
                        </button>
                        <button class="func-btn bg-white hover:bg-gray-50 text-gray-700 py-3 rounded-lg font-medium transition border border-gray-200" onclick="selectMotion('exponential')">
                            指数函数
                        </button>
                        <button class="func-btn bg-white hover:bg-gray-50 text-gray-700 py-3 rounded-lg font-medium transition border border-gray-200" onclick="selectMotion('sine')">
                            正弦函数
                        </button>
                    </div>
                    <div class="bg-slate-50 p-5 rounded-xl border border-slate-200 min-h-[160px] flex flex-col justify-center" id="motion-desc-container">
                        <div class="slide-animate">
                            <h4 class="font-bold text-gray-800 mb-2 text-lg">线性函数 (Linear)</h4>
                            <p class="text-sm text-gray-600 leading-relaxed mb-3">就像匀速行驶的汽车，步伐稳健，不急不躁。<br>变化率（速度）是恒定的。</p>
                            <div class="font-mono text-indigo-600 bg-white px-3 py-1 rounded border border-indigo-100 inline-block">
                                $s(t) = v \cdot t$
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 动画舞台 -->
            <div class="space-y-6">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex flex-col h-full min-h-[400px]">
                    <h3 class="text-lg font-semibold text-indigo-600 mb-4 flex items-center gap-2">
                        <span class="material-symbols-outlined">movie</span> 运动演示
                    </h3>
                    <div class="flex-1 bg-slate-900 rounded-xl relative overflow-hidden flex items-center justify-center border border-slate-800" id="motion-stage">
                        <!-- 小球 -->
                        <div class="w-8 h-8 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,0.6)] absolute left-4" id="motion-ball" style="top: 50%; transform: translateY(-50%); left: 16px;"></div>
                        <!-- 轨迹容器 -->
                        <svg class="absolute inset-0 w-full h-full pointer-events-none" id="motion-trail"></svg>
                        <!-- 时间显示 -->
                        <div class="absolute bottom-4 right-4 text-xs text-slate-500 font-mono" id="time-display">t = 0.0s</div>
                    </div>
                    <div class="mt-6 flex justify-center">
                        <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-2.5 rounded-full font-bold shadow-lg shadow-indigo-500/30 transition hover:scale-105 active:scale-95 flex items-center gap-2" onclick="playMotion()">
                            <span class="material-symbols-outlined">play_arrow</span> 播放动画
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 页面专用脚本 -->
    <script src="assets/lab1-8.js"></script>
</body>
</html>
