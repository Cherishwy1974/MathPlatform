<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>无穷大与无穷小倒数关系可视化</title>
    <!-- 本地化资源 -->
    <script src="../common-assets/js/tailwind.min.js"></script>
    <link rel="stylesheet" href="../common-assets/css/lab1-material-symbols.css">
    <script src="../common-assets/js/mathjax-config.js"></script>
    <script defer src="../common-assets/js/mathjax-3.2.2-tex-svg.min.js"></script>
    <link rel="stylesheet" href="assets/lab2-5.css">
</head>
<body class="bg-gray-50 text-gray-900 h-screen flex flex-col overflow-hidden font-sans">
    <!-- Header -->
    <header class="bg-white border-b border-gray-200 h-16 flex-none flex items-center justify-between px-4 md:px-6 z-20 shadow-sm">
        <div class="flex items-center gap-3">
            <div class="bg-indigo-600 p-2 rounded-lg text-white">
                <span class="material-symbols-outlined text-2xl">all_inclusive</span>
            </div>
            <h1 class="text-xl font-bold text-gray-800 hidden sm:block">无穷大与无穷小倒数关系</h1>
        </div>
        <div class="text-sm text-gray-500 hidden md:block font-mono">若 $\alpha \to 0$，则 $1/\alpha \to \infty$</div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <!-- Sidebar Navigation -->
        <nav class="w-20 md:w-64 bg-white border-r border-gray-200 flex-none flex flex-col z-10">
            <div class="p-2 md:p-4 space-y-2">
                <button class="nav-btn w-full flex items-center gap-3 px-2 md:px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 bg-indigo-50 text-indigo-700 font-bold border-l-4 border-indigo-600" onclick="switchTab('concept')">
                    <span class="material-symbols-outlined">explore</span>
                    <span class="hidden md:inline">基本概念</span>
                </button>
                <button class="nav-btn w-full flex items-center gap-3 px-2 md:px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 text-gray-600 border-transparent" onclick="switchTab('cases')">
                    <span class="material-symbols-outlined">science</span>
                    <span class="hidden md:inline">典型案例</span>
                </button>
                <button class="nav-btn w-full flex items-center gap-3 px-2 md:px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 text-gray-600 border-transparent" onclick="switchTab('practice')">
                    <span class="material-symbols-outlined">quiz</span>
                    <span class="hidden md:inline">动手练习</span>
                </button>
            </div>
            <div class="mt-auto p-2 md:p-4 border-t border-gray-100">
                <div class="bg-yellow-50 border border-yellow-100 rounded-lg p-3 text-xs text-yellow-900 hidden md:block">
                    <strong>核心定理：</strong>如果 $\alpha$ 是无穷小，则 $1/\alpha$ 是无穷大；反之亦然。
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto bg-gray-50/50 p-4 md:p-6 relative scroll-smooth no-scrollbar">
            <!-- Tab 1: Concept -->
            <div class="tab-content max-w-[1600px] mx-auto space-y-6" id="tab-concept">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="space-y-6">
                        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
                            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                                <span class="material-symbols-outlined text-indigo-600">lightbulb</span>
                                核心概念
                            </h2>
                            <p class="text-gray-600 text-sm leading-relaxed mb-4">
                                无穷小量 $\alpha$ 与无穷大量 $\beta$ 存在互为倒数的关系。当 $\alpha \to 0$ 时，$1/\alpha \to \infty$；当 $\beta \to \infty$ 时，$1/\beta \to 0$。
                            </p>
                            <div class="bg-indigo-50 border border-indigo-100 rounded-xl p-4 mb-4">
                                <p class="text-gray-700 text-sm"><strong>核心关系：</strong>$\alpha \to 0 \Leftrightarrow \dfrac{1}{\alpha} \to \infty$</p>
                            </div>
                            <p class="text-sm text-gray-500">拖动下方滑块，观察函数 $y = 1/x$ 随 $x$ 变化的行为。</p>
                        </div>
                        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6">
                            <h3 class="text-sm font-bold text-gray-700 uppercase tracking-wide mb-3 flex items-center gap-2">
                                <span class="material-symbols-outlined text-indigo-500">tune</span>
                                交互控制
                            </h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="flex justify-between text-xs font-semibold text-gray-500 uppercase mb-2">
                                        <span>$x$ 的值</span>
                                        <span class="text-indigo-600 font-mono" id="conceptXVal">1.00</span>
                                    </label>
                                    <input type="range" id="conceptSlider" min="0.1" max="4" step="0.05" value="1"
                                           class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600">
                                </div>
                                <div class="flex justify-between items-center p-4 bg-gray-50 rounded-xl border border-gray-100">
                                    <div class="text-center">
                                        <span class="block text-xs text-gray-500 mb-1">$x$</span>
                                        <span class="block text-xl font-bold text-gray-800" id="conceptXVal2">1.00</span>
                                    </div>
                                    <span class="material-symbols-outlined text-gray-400 text-2xl">arrow_forward</span>
                                    <div class="text-center">
                                        <span class="block text-xs text-gray-500 mb-1">$y = 1/x$</span>
                                        <span class="block text-xl font-bold text-indigo-600" id="conceptYVal">1.00</span>
                                    </div>
                                </div>
                                <button onclick="resetConceptGraph()" class="w-full py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-xl transition flex items-center justify-center gap-2">
                                    <span class="material-symbols-outlined">refresh</span>
                                    重置
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 flex flex-col">
                        <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                            <span class="material-symbols-outlined text-indigo-600">ssid_chart</span>
                            函数图像：$y = 1/x$
                        </h2>
                        <div class="relative flex-1 min-h-[220px] w-full bg-white rounded-xl overflow-hidden border border-gray-100 cursor-crosshair">
                            <canvas id="conceptCanvas" class="w-full h-full"></canvas>
                        </div>
                        <p class="mt-3 text-sm text-gray-500 text-center">红点追踪当前 $x$ 值对应的函数值</p>
                    </div>
                </div>
            </div>

            <!-- Tab 2: Cases -->
            <div class="tab-content hidden max-w-[1600px] mx-auto space-y-6" id="tab-cases">
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                    <div class="lg:col-span-4 space-y-4">
                        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-5">
                            <h3 class="text-sm font-bold text-gray-700 uppercase tracking-wide mb-4">选择案例</h3>
                            <div class="space-y-3">
                                <button class="case-btn w-full text-left p-4 rounded-xl border-2 border-indigo-600 bg-indigo-50 transition hover:shadow-md active" data-id="1" onclick="selectCase(1)">
                                    <span class="font-bold text-indigo-900">案例 1</span>
                                    <span class="block text-xs text-gray-600 mt-1">$x \to 0^+$，$y = 1/x \to +\infty$</span>
                                </button>
                                <button class="case-btn w-full text-left p-4 rounded-xl border-2 border-gray-100 bg-white transition hover:shadow-md" data-id="2" onclick="selectCase(2)">
                                    <span class="font-bold text-gray-800">案例 2</span>
                                    <span class="block text-xs text-gray-600 mt-1">$x \to +\infty$，$y = 1/x \to 0$</span>
                                </button>
                                <button class="case-btn w-full text-left p-4 rounded-xl border-2 border-gray-100 bg-white transition hover:shadow-md" data-id="3" onclick="selectCase(3)">
                                    <span class="font-bold text-gray-800">案例 3</span>
                                    <span class="block text-xs text-gray-600 mt-1">$y = x$（无穷小本身）</span>
                                </button>
                                <button class="case-btn w-full text-left p-4 rounded-xl border-2 border-gray-100 bg-white transition hover:shadow-md" data-id="4" onclick="selectCase(4)">
                                    <span class="font-bold text-gray-800">案例 4</span>
                                    <span class="block text-xs text-gray-600 mt-1">$y = x$（无穷大本身）</span>
                                </button>
                            </div>
                        </div>
                        <button onclick="animateCase()" class="w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-md transition flex items-center justify-center gap-2">
                            <span class="material-symbols-outlined">play_arrow</span>
                            播放动画
                        </button>
                    </div>
                    <div class="lg:col-span-8 space-y-4">
                        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 flex flex-col">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-bold text-gray-800" id="caseTitle">案例 1: 当 $x \to 0$ 时，$y = 1/x$</h3>
                                <span class="text-xs font-medium px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full" id="caseDesc">无穷小的倒数是无穷大</span>
                            </div>
                            <div class="relative flex-1 min-h-[220px] w-full bg-white rounded-xl overflow-hidden border border-gray-100">
                                <canvas id="caseCanvas" class="w-full h-full"></canvas>
                                <div id="caseOverlay" class="hidden absolute top-4 right-4 bg-white/90 backdrop-blur p-3 rounded-lg shadow-sm border border-gray-200 text-xs">
                                    <div class="font-mono"><strong>坐标：</strong><span id="overlayPoint"></span></div>
                                    <div class="font-mono mt-1"><strong>趋势：</strong><span id="overlayState"></span></div>
                                </div>
                            </div>
                        </div>
                        <div class="bg-indigo-50 rounded-xl p-4 border border-indigo-100">
                            <p class="text-sm text-indigo-900 leading-relaxed" id="caseAnalysis">
                                随着 $x$ 从右侧无限接近 $0$（无穷小），函数值 $y=1/x$ 迅速上升，超过任何预定的正数，表现为无穷大（$\infty$）。<strong>结论：</strong>$0$ 的倒数趋势是 $\infty$。
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 3: Practice -->
            <div class="tab-content hidden max-w-[1600px] mx-auto space-y-6" id="tab-practice">
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                    <div class="lg:col-span-4 space-y-4">
                        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-5">
                            <h3 class="text-sm font-bold text-gray-700 uppercase tracking-wide mb-4">选择函数</h3>
                            <div class="grid grid-cols-3 gap-2">
                                <button class="practice-func-btn px-3 py-2 rounded-lg border-2 border-indigo-500 bg-indigo-100 text-indigo-700 text-sm font-medium transition active" onclick="setPracticeFunc('1/x')">1/x</button>
                                <button class="practice-func-btn px-3 py-2 rounded-lg border-2 border-gray-300 bg-white text-sm font-medium transition" onclick="setPracticeFunc('x')">x</button>
                                <button class="practice-func-btn px-3 py-2 rounded-lg border-2 border-gray-300 bg-white text-sm font-medium transition" onclick="setPracticeFunc('x^2')">x²</button>
                                <button class="practice-func-btn px-3 py-2 rounded-lg border-2 border-gray-300 bg-white text-sm font-medium transition" onclick="setPracticeFunc('1/x^2')">1/x²</button>
                                <button class="practice-func-btn px-3 py-2 rounded-lg border-2 border-gray-300 bg-white text-sm font-medium transition" onclick="setPracticeFunc('sqrt')">√x</button>
                            </div>
                        </div>
                        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-5">
                            <h3 class="text-sm font-bold text-gray-700 uppercase tracking-wide mb-4">选择极限过程</h3>
                            <select id="practiceLimit" onchange="updatePractice()" class="w-full p-3 border border-gray-300 rounded-xl text-gray-700 focus:border-indigo-500 focus:ring-indigo-500">
                                <option value="0+">x → 0⁺ (从右趋近于0)</option>
                                <option value="inf">x → +∞ (趋近正无穷)</option>
                                <option value="1">x → 1 (趋近于1)</option>
                            </select>
                        </div>
                        <button onclick="analyzePractice()" class="w-full py-3 bg-green-500 hover:bg-green-600 text-white font-bold rounded-xl shadow-md transition flex items-center justify-center gap-2">
                            <span class="material-symbols-outlined">analytics</span>
                            分析极限
                        </button>
                        <div id="practiceResultBox" class="hidden bg-green-50 rounded-xl p-4 border border-green-200">
                            <p class="font-bold text-green-700" id="practiceResultText">无穷大量 (+∞)</p>
                            <p class="text-sm text-green-600 mt-1" id="practiceResultDetail">分母趋近0（正），分子为1，倒数趋向正无穷。</p>
                        </div>
                    </div>
                    <div class="lg:col-span-8">
                        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-6 h-full flex flex-col">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">函数图像</h3>
                            <div class="relative flex-1 min-h-[220px] w-full bg-white rounded-xl overflow-hidden border border-gray-100">
                                <canvas id="practiceCanvas" class="w-full h-full"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 返回首页面板 -->
    <div class="return-home-panel" id="returnHomePanel">
        <a href="../index.html" class="return-home-btn">
            <span class="material-symbols-outlined">home</span>
            返回首页
        </a>
    </div>

    <script src="assets/lab2-5.js"></script>
</body>
</html>
