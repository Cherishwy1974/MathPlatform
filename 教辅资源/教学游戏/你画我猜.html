<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathSketch - é«˜èŒæ•°å­¦ä½ ç”»æˆ‘çŒœ</title>
    <link rel="icon" href="../../common-assets/icons/mathsketch.svg">
    <link rel="stylesheet" href="../../common-assets/css/lab1-google-fonts.css">
    <link rel="stylesheet" href="../../common-assets/css/fonts.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --blue-50: #eff6ff;
            --blue-100: #dbeafe;
            --blue-500: #3b82f6;
            --blue-600: #2563eb;
            --blue-700: #1d4ed8;
            --blue-900: #1e3a8a;
            --purple-600: #9333ea;
            --green-500: #22c55e;
            --green-600: #16a34a;
            --red-500: #ef4444;
            --amber-50: #fffbeb;
            --amber-100: #fef3c7;
            --amber-400: #fbbf24;
            --amber-600: #d97706;
            --amber-800: #92400e;
            --slate-50: #f8fafc;
            --slate-100: #f1f5f9;
            --slate-200: #e2e8f0;
            --slate-300: #cbd5e1;
            --slate-400: #94a3b8;
            --slate-500: #64748b;
            --slate-600: #475569;
            --slate-700: #334155;
            --slate-800: #1e293b;
            --slate-900: #0f172a;
            --font-body: 'JF Open Hun Inn', 'Noto Serif SC', 'Microsoft YaHei', 'PingFang SC', 'Hiragino Sans GB', Arial, sans-serif;
        }
        
        body {
            font-family: var(--font-body);
            background: var(--slate-50);
            color: var(--slate-900);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #c7c7c7;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        /* Math Formula Styles */
        .math-formula {
            display: inline-flex;
            align-items: center;
            font-family: 'Times New Roman', serif;
            font-style: italic;
        }
        
        .frac {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            vertical-align: middle;
            margin: 0 3px;
            text-align: center;
        }
        
        .frac-num {
            border-bottom: 1.5px solid currentColor;
            padding: 0 6px 3px;
            line-height: 1.2;
        }
        
        .frac-den {
            padding: 3px 6px 0;
            line-height: 1.2;
        }
        
        .lim-block {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            margin-right: 6px;
            font-family: 'Times New Roman', serif;
        }
        
        .lim-text {
            font-size: 1em;
            font-style: normal;
        }
        
        .lim-sub {
            font-size: 0.7em;
            margin-top: -2px;
            font-style: italic;
        }
        
        .integral {
            font-size: 1.4em;
            font-family: 'Times New Roman', serif;
            line-height: 1;
            vertical-align: middle;
        }
        
        .integral-limits {
            display: inline-flex;
            flex-direction: column;
            font-size: 0.6em;
            margin-left: -2px;
            margin-right: 2px;
        }
        
        .sqrt {
            display: inline-flex;
            align-items: stretch;
            position: relative;
        }
        
        .sqrt::before {
            content: 'âˆš';
            font-size: 1.2em;
        }
        
        .sqrt-content {
            border-top: 1px solid currentColor;
            padding: 0 4px;
            margin-top: 2px;
        }
        
        .sum-block {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            font-family: 'Times New Roman', serif;
            margin: 0 4px;
        }
        
        .sum-symbol {
            font-size: 1.3em;
            line-height: 1;
        }
        
        .sum-limits {
            font-size: 0.65em;
            font-style: italic;
        }
        
        /* Animation Keyframes */
        @keyframes popIn {
            0% { transform: scale(0.95); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .animate-pop-in {
            animation: popIn 0.3s ease-out;
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        .animate-pulse {
            animation: pulse 1s ease-in-out infinite;
        }
        
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        
        /* Screen Styles */
        .screen {
            display: none;
            min-height: 100vh;
        }
        
        .screen.active {
            display: flex;
        }
        
        /* Setup Screen */
        .setup-screen {
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 24px;
            position: relative;
        }
        
        .setup-header {
            margin-bottom: 40px;
            text-align: center;
        }
        
        .setup-header h1 {
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--blue-900);
            margin-bottom: 16px;
            letter-spacing: -0.02em;
        }
        
        .setup-header p {
            font-size: 1.25rem;
            color: var(--slate-500);
        }
        
        .settings-btn {
            position: absolute;
            top: 24px;
            right: 24px;
            padding: 12px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            color: var(--slate-400);
        }
        
        .settings-btn:hover {
            color: var(--slate-600);
            transform: rotate(30deg);
        }
        
        .settings-btn.active {
            background: var(--blue-100);
            color: var(--blue-600);
        }
        
        .settings-panel {
            display: none;
            margin-bottom: 32px;
            width: 100%;
            max-width: 640px;
            background: white;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.15);
            border: 1px solid var(--blue-100);
        }
        
        .settings-panel.active {
            display: block;
            animation: popIn 0.3s ease-out;
        }
        
        .settings-panel h3 {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--slate-800);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }
        
        @media (max-width: 640px) {
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .setting-group label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--slate-500);
            margin-bottom: 8px;
        }
        
        .setting-options {
            display: flex;
            gap: 8px;
        }
        
        .setting-options button {
            flex: 1;
            padding: 8px;
            border-radius: 8px;
            font-weight: 500;
            border: 1px solid var(--slate-200);
            background: white;
            color: var(--slate-600);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .setting-options button:hover {
            background: var(--slate-50);
        }
        
        .setting-options button.active {
            background: var(--blue-600);
            color: white;
            border-color: var(--blue-600);
        }
        
        .topics-container {
            max-width: 896px;
            width: 100%;
        }
        
        .topics-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--slate-700);
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .topics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }
        
        @media (max-width: 768px) {
            .topics-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .topic-card {
            position: relative;
            overflow: hidden;
            background: white;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
            border: 1px solid var(--slate-100);
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }
        
        .topic-card:hover {
            border-color: var(--blue-400);
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }
        
        .topic-icon {
            position: absolute;
            top: 0;
            right: 0;
            padding: 16px;
            font-size: 5rem;
            font-weight: 900;
            opacity: 0.05;
            transition: opacity 0.3s;
        }
        
        .topic-card:hover .topic-icon {
            opacity: 0.1;
        }
        
        .topic-card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--slate-800);
            margin-bottom: 8px;
            transition: color 0.3s;
        }
        
        .topic-card:hover h3 {
            color: var(--blue-600);
        }
        
        .topic-card p {
            font-size: 0.875rem;
            color: var(--slate-500);
            margin-bottom: 16px;
        }
        
        .topic-badge {
            display: inline-flex;
            align-items: center;
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--blue-600);
            background: var(--blue-50);
            padding: 4px 12px;
            border-radius: 9999px;
        }
        
        .setup-footer {
            margin-top: 48px;
            font-size: 0.875rem;
            color: var(--slate-400);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .setup-footer span:last-child {
            font-size: 0.75rem;
            color: var(--slate-300);
        }
        
        /* Loading Screen */
        .loading-screen {
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .loader {
            position: relative;
            width: 80px;
            height: 80px;
            margin-bottom: 24px;
        }
        
        .loader-ring {
            width: 80px;
            height: 80px;
            border: 4px solid var(--blue-100);
            border-top-color: var(--blue-600);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .loader-icon {
            position: absolute;
            top: 0;
            left: 0;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .loading-text h2 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--slate-800);
            margin-bottom: 8px;
        }
        
        .loading-text p {
            font-size: 0.875rem;
            color: var(--slate-500);
        }
        
        /* Playing Screen */
        .playing-screen {
            flex-direction: column;
            height: 100vh;
        }
        
        .game-header {
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 12px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--slate-200);
            z-index: 20;
        }
        
        .teams-display {
            display: flex;
            gap: 24px;
            align-items: center;
        }
        
        .team-score {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .team-score.active-a {
            background: var(--blue-600);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            transform: scale(1.05);
        }
        
        .team-score.active-b {
            background: var(--purple-600);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            transform: scale(1.05);
        }
        
        .team-score:not(.active-a):not(.active-b) {
            background: var(--slate-100);
            color: var(--slate-400);
        }
        
        .team-label {
            font-size: 0.875rem;
            font-weight: 700;
            text-transform: uppercase;
        }
        
        .team-points {
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .vs-text {
            color: var(--slate-300);
            font-weight: 700;
        }
        
        .timer-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: var(--slate-100);
            padding: 4px 24px;
            border-radius: 9999px;
            border: 1px solid var(--slate-200);
        }
        
        .timer-text {
            font-size: 1.5rem;
            font-family: monospace;
            font-weight: 700;
            color: var(--slate-700);
        }
        
        .timer-text.warning {
            color: var(--red-500);
            animation: pulse 1s ease-in-out infinite;
        }
        
        .end-game-btn {
            color: var(--slate-400);
            font-size: 0.875rem;
            font-weight: 500;
            background: none;
            border: none;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .end-game-btn:hover {
            color: var(--red-500);
        }
        
        .god-view-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 8px;
            background: var(--slate-100);
            color: var(--slate-600);
            font-size: 0.875rem;
            font-weight: 500;
            border: 1px solid var(--slate-200);
            cursor: pointer;
            transition: all 0.2s;
            margin-right: 12px;
        }
        
        .god-view-btn:hover {
            background: var(--slate-200);
            color: var(--slate-700);
        }
        
        .god-view-btn.active {
            background: var(--amber-100);
            color: var(--amber-800);
            border-color: var(--amber-300);
        }
        
        .god-view-panel {
            position: fixed;
            top: 82px;
            right: 24px;
            width: 360px;
            max-height: calc(100vh - 120px);
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.2);
            border: 2px solid var(--amber-200);
            z-index: 30;
            display: none;
            flex-direction: column;
            overflow: hidden;
            animation: popIn 0.3s ease-out;
        }
        
        @media (max-width: 768px) {
            .god-view-panel {
                right: 12px;
                left: 12px;
                width: auto;
                top: 70px;
                max-height: calc(100vh - 90px);
            }
            
            .god-view-btn span {
                display: none;
            }
        }
        
        .god-view-panel.active {
            display: flex;
        }
        
        .god-view-header {
            background: linear-gradient(135deg, var(--amber-400), var(--amber-600));
            color: white;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
        }
        
        .god-view-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }
        
        .god-view-close:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .god-view-content {
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }
        
        .god-view-item {
            margin-bottom: 20px;
        }
        
        .god-view-label {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--slate-400);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        
        .god-view-value {
            font-size: 1rem;
            color: var(--slate-800);
            line-height: 1.6;
            padding: 12px;
            background: var(--slate-50);
            border-radius: 8px;
            border-left: 3px solid var(--amber-400);
        }
        
        .god-view-hint {
            background: var(--blue-50);
            border-left-color: var(--blue-500);
        }
        
        .god-view-explanation {
            background: var(--green-50);
            border-left-color: var(--green-500);
        }
        
        .game-content {
            flex: 1;
            display: flex;
            overflow: hidden;
            position: relative;
        }
        
        /* Left Panel */
        .left-panel {
            width: 320px;
            background: white;
            border-right: 1px solid var(--slate-200);
            padding: 24px;
            display: flex;
            flex-direction: column;
            z-index: 20;
            box-shadow: 4px 0 24px rgba(0,0,0,0.02);
        }
        
        .term-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .term-header h4 {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--slate-400);
            text-transform: uppercase;
        }
        
        .term-count {
            font-size: 0.75rem;
            background: var(--slate-100);
            color: var(--slate-500);
            padding: 2px 8px;
            border-radius: 9999px;
        }
        
        .term-category {
            display: inline-block;
            background: var(--blue-50);
            color: var(--blue-700);
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
            border: 1px solid var(--blue-100);
            margin-bottom: 16px;
        }
        
        .term-display {
            padding: 24px;
            background: var(--amber-50);
            border-radius: 16px;
            border: 1px solid var(--amber-100);
            text-align: center;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
        }
        
        .visibility-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            z-index: 10;
            color: var(--amber-400);
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .visibility-btn:hover {
            color: var(--amber-600);
        }
        
        .term-visible {
            animation: popIn 0.2s ease-out;
        }
        
        .term-visible h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--slate-800);
            margin-bottom: 8px;
        }
        
        .term-explanation {
            font-size: 0.75rem;
            color: var(--slate-500);
            line-height: 1.6;
            text-align: left;
            margin-top: 12px;
            background: rgba(255,255,255,0.5);
            padding: 8px;
            border-radius: 8px;
        }
        
        .term-hidden {
            padding: 32px 0;
        }
        
        .term-hidden p:first-child {
            color: var(--amber-800);
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .term-hidden p:last-child {
            font-size: 0.75rem;
            color: rgba(146, 64, 14, 0.7);
        }
        
        .change-term-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            font-size: 0.75rem;
            color: var(--slate-400);
            background: none;
            border: none;
            cursor: pointer;
            transition: color 0.2s;
            margin: 0 auto 24px;
        }
        
        .change-term-btn:hover {
            color: var(--blue-500);
        }
        
        .change-term-btn span {
            text-decoration: underline;
            text-decoration-style: dotted;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: auto;
            padding-top: 16px;
            border-top: 1px solid var(--slate-100);
        }
        
        .skip-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px;
            border-radius: 12px;
            background: var(--slate-100);
            color: var(--slate-600);
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .skip-btn:hover {
            background: var(--slate-200);
        }
        
        .correct-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px;
            border-radius: 12px;
            background: var(--green-500);
            color: white;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 10px 15px -3px rgba(34, 197, 94, 0.3);
        }
        
        .correct-btn:hover {
            background: var(--green-600);
            transform: translateY(-2px);
        }
        
        /* Right Panel - Canvas */
        .right-panel {
            flex: 1;
            background: var(--slate-50);
            position: relative;
            padding: 16px;
            display: flex;
            flex-direction: column;
        }
        
        .toolbar {
            position: absolute;
            top: 24px;
            left: 24px;
            z-index: 10;
            display: flex;
            gap: 8px;
            background: white;
            padding: 8px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid var(--slate-100);
        }
        
        .color-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .color-btn:hover {
            transform: scale(1.1);
        }
        
        .color-btn.active {
            transform: scale(1.1);
            box-shadow: 0 0 0 2px var(--slate-300), 0 0 0 4px white;
        }
        
        .toolbar-divider {
            width: 1px;
            height: 32px;
            background: var(--slate-200);
            margin: 0 4px;
        }
        
        .tool-btn {
            padding: 6px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            background: transparent;
            color: var(--slate-500);
        }
        
        .tool-btn:hover {
            background: var(--slate-100);
        }
        
        .tool-btn.active {
            color: var(--blue-600);
            background: var(--blue-50);
        }
        
        .clear-btn {
            padding: 6px 8px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            background: transparent;
            color: var(--slate-500);
            font-size: 0.75rem;
            font-weight: 700;
        }
        
        .clear-btn:hover {
            color: var(--red-500);
            background: rgba(239, 68, 68, 0.1);
        }
        
        .canvas-container {
            flex: 1;
            background: white;
            border-radius: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
            border: 1px solid var(--slate-200);
            cursor: crosshair;
        }
        
        #drawCanvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        
        /* Round End Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(8px);
            z-index: 50;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
            max-width: 512px;
            width: 100%;
            padding: 32px;
            text-align: center;
            animation: popIn 0.3s ease-out;
        }
        
        .modal-category {
            display: inline-block;
            background: var(--blue-100);
            color: var(--blue-700);
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-bottom: 16px;
        }
        
        .modal-term {
            font-size: 2.25rem;
            font-weight: 700;
            color: var(--slate-800);
            margin-bottom: 24px;
        }
        
        .explanation-box {
            background: var(--slate-50);
            padding: 24px;
            border-radius: 12px;
            text-align: left;
            border: 1px solid var(--slate-100);
            position: relative;
            margin-bottom: 32px;
        }
        
        .explanation-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--blue-500);
            border-radius: 12px 0 0 12px;
        }
        
        .explanation-box h3 {
            font-weight: 700;
            color: var(--slate-900);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .explanation-box p {
            color: var(--slate-600);
            font-size: 0.875rem;
            line-height: 1.6;
            text-align: justify;
        }
        
        .modal-scores {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 48px;
            margin-bottom: 32px;
            padding: 16px;
            background: var(--slate-50);
            border-radius: 12px;
        }
        
        .modal-score-item {
            text-align: center;
        }
        
        .modal-score-label {
            color: var(--slate-400);
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 4px;
        }
        
        .modal-score-value {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--slate-700);
        }
        
        .modal-score-value.highlight-a {
            color: var(--blue-600);
        }
        
        .modal-score-value.highlight-b {
            color: var(--purple-600);
        }
        
        .modal-divider {
            height: 40px;
            width: 1px;
            background: var(--slate-200);
        }
        
        .next-btn {
            width: 100%;
            padding: 16px;
            background: var(--blue-600);
            color: white;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.125rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.3);
        }
        
        .next-btn:hover {
            background: var(--blue-700);
        }
        
        .next-btn:active {
            transform: scale(0.95);
        }
        
        /* Game Over Screen */
        .game-over-screen {
            flex-direction: column;
            align-items: center;
            padding: 24px;
            overflow-y: auto;
        }
        
        .game-over-container {
            max-width: 768px;
            width: 100%;
            background: white;
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.15);
            overflow: hidden;
            margin-bottom: 32px;
        }
        
        .game-over-header {
            background: var(--slate-900);
            padding: 48px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .game-over-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.1;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='m36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm-30 30v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        
        .game-over-header h1 {
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 8px;
            position: relative;
            z-index: 10;
        }
        
        .game-over-header p {
            color: var(--slate-400);
            position: relative;
            z-index: 10;
        }
        
        .game-over-body {
            padding: 32px;
        }
        
        .final-scores {
            display: flex;
            justify-content: center;
            gap: 64px;
            margin-bottom: 40px;
        }
        
        .final-score-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .final-score-icon {
            font-size: 3rem;
            margin-bottom: 12px;
        }
        
        .final-score-value {
            font-size: 3rem;
            font-weight: 700;
        }
        
        .final-score-value.winner {
            color: var(--blue-600);
        }
        
        .final-score-value.winner-b {
            color: var(--purple-600);
        }
        
        .final-score-value.loser {
            color: var(--slate-300);
        }
        
        .final-score-label {
            font-weight: 700;
            color: var(--slate-500);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-size: 0.875rem;
            margin-top: 8px;
        }
        
        .review-section {
            margin-bottom: 32px;
        }
        
        .review-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--slate-800);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .review-title-bar {
            width: 4px;
            height: 24px;
            background: var(--blue-500);
            border-radius: 9999px;
        }
        
        .review-table {
            overflow: hidden;
            border-radius: 12px;
            border: 1px solid var(--slate-200);
        }
        
        .review-table table {
            width: 100%;
            font-size: 0.875rem;
            text-align: left;
            border-collapse: collapse;
        }
        
        .review-table thead {
            background: var(--slate-50);
        }
        
        .review-table th {
            padding: 16px;
            font-weight: 500;
            color: var(--slate-500);
        }
        
        .review-table tbody tr {
            border-top: 1px solid var(--slate-100);
            transition: background 0.2s;
        }
        
        .review-table tbody tr:hover {
            background: var(--slate-50);
        }
        
        .review-table td {
            padding: 16px;
        }
        
        .review-table td:first-child {
            font-weight: 700;
            color: var(--slate-800);
        }
        
        .review-table td:nth-child(2) span {
            background: var(--slate-100);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
        }
        
        .review-table td:last-child {
            color: var(--slate-600);
            line-height: 1.6;
        }
        
        .empty-review {
            padding: 32px;
            text-align: center;
            color: var(--slate-400);
            font-style: italic;
        }
        
        .return-btn {
            width: 100%;
            padding: 16px;
            background: var(--slate-900);
            color: white;
            border-radius: 12px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: background 0.2s;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.2);
        }
        
        .return-btn:hover {
            background: var(--slate-800);
        }
        
        /* SVG Icon Styles */
        .icon {
            width: 24px;
            height: 24px;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
        }
        
        .icon-small {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
    <!-- Setup Screen -->
    <div id="setupScreen" class="screen setup-screen active">
        <button class="settings-btn" onclick="toggleSettings()">
            <svg class="icon" viewBox="0 0 24 24"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
        </button>
        
        <header class="setup-header">
            <h1>MathSketch</h1>
            <p>é«˜èŒæ•°å­¦ Â· æ¸¸æˆåŒ–äº’åŠ¨æ•™å­¦å¹³å°</p>
        </header>
        
        <div id="settingsPanel" class="settings-panel">
            <h3>
                <svg class="icon-small" viewBox="0 0 24 24"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
                æ¸¸æˆæµç¨‹ç®¡ç†
            </h3>
            <div class="settings-grid">
                <div class="setting-group">
                    <label>å•è½®æ—¶é•¿ (ç§’)</label>
                    <div class="setting-options" id="timeOptions">
                        <button onclick="setTime(60)">60s</button>
                        <button onclick="setTime(90)" class="active">90s</button>
                        <button onclick="setTime(120)">120s</button>
                        <button onclick="setTime(180)">180s</button>
                    </div>
                </div>
                <div class="setting-group">
                    <label>è·èƒœåˆ†æ•° (é¢˜)</label>
                    <div class="setting-options" id="scoreOptions">
                        <button onclick="setWinScore(3)" class="active">3</button>
                        <button onclick="setWinScore(5)">5</button>
                        <button onclick="setWinScore(7)">7</button>
                        <button onclick="setWinScore(10)">10</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="topics-container">
            <h2 class="topics-title">ğŸ¯ é€‰æ‹©è¯¾é¢˜å•å…ƒ</h2>
            <div class="topics-grid">
                <button class="topic-card" onclick="startGame('algebra')">
                    <div class="topic-icon">f(x)</div>
                    <div>
                        <h3>ç¬¬ä¸€ç«  åŸºç¡€çŸ¥è¯†</h3>
                        <p>æŒ‡æ•°ã€å¯¹æ•°ã€å‡½æ•°åŸºç¡€</p>
                        <div class="topic-badge">åŒ…å«è€ƒç‚¹ Â· çŸ¥è¯†å¼ºåŒ–</div>
                    </div>
                </button>
                <button class="topic-card" onclick="startGame('limit')">
                    <div class="topic-icon">lim</div>
                    <div>
                        <h3>ç¬¬äºŒç«  æé™ä¸è¿ç»­</h3>
                        <p>æé™æ¦‚å¿µã€è¿ç»­æ€§</p>
                        <div class="topic-badge">åŒ…å«è€ƒç‚¹ Â· çŸ¥è¯†å¼ºåŒ–</div>
                    </div>
                </button>
                <button class="topic-card" onclick="startGame('derivative')">
                    <div class="topic-icon">dy/dx</div>
                    <div>
                        <h3>ç¬¬ä¸‰ã€å››ç«  å¯¼æ•°</h3>
                        <p>å¯¼æ•°ã€å¾®åˆ†ã€åº”ç”¨</p>
                        <div class="topic-badge">åŒ…å«è€ƒç‚¹ Â· çŸ¥è¯†å¼ºåŒ–</div>
                    </div>
                </button>
                <button class="topic-card" onclick="startGame('integral')">
                    <div class="topic-icon">âˆ«</div>
                    <div>
                        <h3>ç¬¬äº”ã€å…­ç«  ç§¯åˆ†</h3>
                        <p>ä¸å®šç§¯åˆ†ã€å®šç§¯åˆ†</p>
                        <div class="topic-badge">åŒ…å«è€ƒç‚¹ Â· çŸ¥è¯†å¼ºåŒ–</div>
                    </div>
                </button>
                <button class="topic-card" onclick="startGame('differential')">
                    <div class="topic-icon">y'</div>
                    <div>
                        <h3>ç¬¬ä¸ƒç«  å¾®åˆ†æ–¹ç¨‹</h3>
                        <p>ä¸€é˜¶ã€äºŒé˜¶å¾®åˆ†æ–¹ç¨‹</p>
                        <div class="topic-badge">åŒ…å«è€ƒç‚¹ Â· çŸ¥è¯†å¼ºåŒ–</div>
                    </div>
                </button>
                <button class="topic-card" onclick="startGame('multivariable')">
                    <div class="topic-icon">âˆ‚</div>
                    <div>
                        <h3>ç¬¬å…«ã€ä¹ç«  å¤šå…ƒå‡½æ•°</h3>
                        <p>åå¯¼æ•°ã€äºŒé‡ç§¯åˆ†</p>
                        <div class="topic-badge">åŒ…å«è€ƒç‚¹ Â· çŸ¥è¯†å¼ºåŒ–</div>
                    </div>
                </button>
                <button class="topic-card" onclick="startGame('linear')">
                    <div class="topic-icon">[A]</div>
                    <div>
                        <h3>ç¬¬åç«  çº¿æ€§ä»£æ•°</h3>
                        <p>çŸ©é˜µã€è¡Œåˆ—å¼ã€æ–¹ç¨‹ç»„</p>
                        <div class="topic-badge">åŒ…å«è€ƒç‚¹ Â· çŸ¥è¯†å¼ºåŒ–</div>
                    </div>
                </button>
                <button class="topic-card" onclick="startGame('series')">
                    <div class="topic-icon">Î£</div>
                    <div>
                        <h3>ç¬¬åä¸€ç«  æ— ç©·çº§æ•°</h3>
                        <p>çº§æ•°æ”¶æ•›ã€å¹‚çº§æ•°</p>
                        <div class="topic-badge">åŒ…å«è€ƒç‚¹ Â· çŸ¥è¯†å¼ºåŒ–</div>
                    </div>
                </button>
                <button class="topic-card" onclick="startGame('geometry')">
                    <div class="topic-icon">ğŸ“</div>
                    <div>
                        <h3>ç¬¬åäºŒç«  è§£æå‡ ä½•</h3>
                        <p>å‘é‡ã€ç©ºé—´å‡ ä½•</p>
                        <div class="topic-badge">åŒ…å«è€ƒç‚¹ Â· çŸ¥è¯†å¼ºåŒ–</div>
                    </div>
                </button>
                <button class="topic-card" onclick="startGame('probability')">
                    <div class="topic-icon">P</div>
                    <div>
                        <h3>ç¬¬åä¸‰ç«  æ¦‚ç‡ç»Ÿè®¡</h3>
                        <p>æ¦‚ç‡ã€åˆ†å¸ƒã€æœŸæœ›</p>
                        <div class="topic-badge">åŒ…å«è€ƒç‚¹ Â· çŸ¥è¯†å¼ºåŒ–</div>
                    </div>
                </button>
            </div>
        </div>
        
        <div class="setup-footer">
            <span>æœ¬åœ°é¢˜åº“ç‰ˆæœ¬</span>
            <span>ä¸¥è°¨é€‚é…é«˜èŒæ•°å­¦å¤§çº²</span>
        </div>
    </div>
    
    <!-- Loading Screen -->
    <div id="loadingScreen" class="screen loading-screen">
        <div class="loader">
            <div class="loader-ring"></div>
            <div class="loader-icon">âš¡</div>
        </div>
        <div class="loading-text">
            <h2>æ­£åœ¨å‡†å¤‡é¢˜ç›®...</h2>
            <p>æ­£åœ¨æ£€ç´¢é«˜èŒæ•°å­¦é¢˜åº“ä¸è€ƒç‚¹</p>
        </div>
    </div>
    
    <!-- Playing Screen -->
    <div id="playingScreen" class="screen playing-screen">
        <div class="game-header">
            <div class="teams-display">
                <div id="teamAScore" class="team-score active-a">
                    <span class="team-label">A ç»„</span>
                    <span class="team-points" id="scoreA">0</span>
                </div>
                <div class="vs-text">VS</div>
                <div id="teamBScore" class="team-score">
                    <span class="team-label">B ç»„</span>
                    <span class="team-points" id="scoreB">0</span>
                </div>
            </div>
            
            <div class="timer-display">
                <div class="timer-text" id="timerDisplay">1:30</div>
            </div>
            
            <div style="display: flex; align-items: center; gap: 12px;">
                <button class="god-view-btn" id="godViewBtn" onclick="toggleGodView()" title="åˆ‡æ¢ä¸Šå¸è§†è§’ï¼ˆæ˜¾ç¤ºé¢˜ç›®è¯¦æƒ…ï¼‰">
                    <svg class="icon-small" viewBox="0 0 24 24" style="width: 18px; height: 18px;"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>
                    <span>ä¸Šå¸è§†è§’</span>
                </button>
                <button class="end-game-btn" onclick="endGame()">ç»“æŸæ¸¸æˆ</button>
            </div>
        </div>
        
        <!-- ä¸Šå¸è§†è§’é¢æ¿ -->
        <div id="godViewPanel" class="god-view-panel">
            <div class="god-view-header">
                <span>ğŸ‘ï¸ ä¸Šå¸è§†è§’ - é¢˜ç›®è¯¦æƒ…</span>
                <button class="god-view-close" onclick="toggleGodView()">
                    <svg class="icon-small" viewBox="0 0 24 24" style="width: 16px; height: 16px;"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
                </button>
            </div>
            <div class="god-view-content">
                <div class="god-view-item">
                    <div class="god-view-label">é¢˜ç›®åç§°</div>
                    <div class="god-view-value" id="godViewTerm">-</div>
                </div>
                <div class="god-view-item">
                    <div class="god-view-label">æç¤ºè¯</div>
                    <div class="god-view-value god-view-hint" id="godViewHint">-</div>
                </div>
                <div class="god-view-item">
                    <div class="god-view-label">æ‰€å±ç« èŠ‚</div>
                    <div class="god-view-value" id="godViewCategory">-</div>
                </div>
                <div class="god-view-item">
                    <div class="god-view-label">å®Œæ•´è§£æ</div>
                    <div class="god-view-value god-view-explanation" id="godViewExplanation">-</div>
                </div>
            </div>
        </div>
        
        <div class="game-content">
            <div class="left-panel">
                <div style="flex: 1; overflow-y: auto;">
                    <div class="term-header">
                        <h4>å½“å‰é¢˜ç›®</h4>
                        <span class="term-count" id="termCount">1 / 15</span>
                    </div>
                    <span class="term-category" id="termCategory">å¾®ç§¯åˆ†</span>
                    
                    <div class="term-display">
                        <button class="visibility-btn" onclick="toggleTermVisibility()">
                            <svg id="eyeIcon" class="icon" viewBox="0 0 24 24"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
                        </button>
                        
                        <div id="termVisible" class="term-visible" style="display: none;">
                            <h2 id="termName">æé™</h2>
                            <p class="term-explanation" id="termExplanation">æé™çš„å®šä¹‰...</p>
                        </div>
                        
                        <div id="termHidden" class="term-hidden">
                            <p>é¢˜ç›®å·²éšè—</p>
                            <p>è¯·ä½œç”»è€…ç‚¹å‡»å³ä¸Šè§’æŸ¥çœ‹</p>
                        </div>
                    </div>
                    
                    <button class="change-term-btn" onclick="changeTerm()">
                        <svg class="icon-small" viewBox="0 0 24 24"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 21h5v-5"/></svg>
                        <span>å¤ªéš¾äº†ï¼Œæ¢ä¸€é¢˜</span>
                    </button>
                </div>
                
                <div class="action-buttons">
                    <button class="skip-btn" onclick="skipTerm()">
                        <svg class="icon-small" viewBox="0 0 24 24"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                        è·³è¿‡
                    </button>
                    <button class="correct-btn" onclick="correctAnswer()">
                        <svg class="icon-small" viewBox="0 0 24 24"><path d="M20 6 9 17l-5-5"/></svg>
                        æ­£ç¡®
                    </button>
                </div>
            </div>
            
            <div class="right-panel">
                <div class="toolbar">
                    <button class="color-btn active" style="background: #000000;" onclick="setColor('#000000', this)"></button>
                    <button class="color-btn" style="background: #EF4444;" onclick="setColor('#EF4444', this)"></button>
                    <button class="color-btn" style="background: #3B82F6;" onclick="setColor('#3B82F6', this)"></button>
                    <button class="color-btn" style="background: #22C55E;" onclick="setColor('#22C55E', this)"></button>
                    <button class="color-btn" style="background: #A855F7;" onclick="setColor('#A855F7', this)"></button>
                    <div class="toolbar-divider"></div>
                    <button class="tool-btn" id="eraserBtn" onclick="toggleEraser()">
                        <svg class="icon" viewBox="0 0 24 24"><path d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"/><path d="M22 21H7"/><path d="m5 11 9 9"/></svg>
                    </button>
                    <button class="clear-btn" onclick="clearCanvas()">æ¸…ç©º</button>
                </div>
                
                <div class="canvas-container">
                    <canvas id="drawCanvas"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Round End Modal -->
    <div id="roundEndModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-category" id="modalCategory">å¾®ç§¯åˆ†</div>
            <h1 class="modal-term" id="modalTerm">æé™</h1>
            
            <div class="explanation-box">
                <h3>ğŸ“– çŸ¥è¯†ç‚¹è§£æ</h3>
                <p id="modalExplanation">æé™çš„å®šä¹‰...</p>
            </div>
            
            <div class="modal-scores">
                <div class="modal-score-item">
                    <div class="modal-score-label">A ç»„å¾—åˆ†</div>
                    <div class="modal-score-value" id="modalScoreA">0</div>
                </div>
                <div class="modal-divider"></div>
                <div class="modal-score-item">
                    <div class="modal-score-label">B ç»„å¾—åˆ†</div>
                    <div class="modal-score-value" id="modalScoreB">0</div>
                </div>
            </div>
            
            <button class="next-btn" id="nextBtn" onclick="nextRound()">ä¸‹ä¸€é¢˜ â†’</button>
        </div>
    </div>
    
    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="screen game-over-screen">
        <div class="game-over-container">
            <div class="game-over-header">
                <h1>è¯¾ç¨‹ç»“æŸ</h1>
                <p>æœ¬æ¬¡äº’åŠ¨æ•™å­¦å›é¡¾</p>
            </div>
            
            <div class="game-over-body">
                <div class="final-scores">
                    <div class="final-score-item">
                        <div class="final-score-icon">ğŸ†</div>
                        <div class="final-score-value" id="finalScoreA">0</div>
                        <div class="final-score-label">A ç»„</div>
                    </div>
                    <div class="final-score-item">
                        <div class="final-score-icon">ğŸ…</div>
                        <div class="final-score-value" id="finalScoreB">0</div>
                        <div class="final-score-label">B ç»„</div>
                    </div>
                </div>
                
                <div class="review-section">
                    <h3 class="review-title">
                        <div class="review-title-bar"></div>
                        çŸ¥è¯†ç‚¹å¤ä¹ è¡¨
                    </h3>
                    <div class="review-table">
                        <table>
                            <thead>
                                <tr>
                                    <th style="width: 25%;">æ•°å­¦æ¦‚å¿µ</th>
                                    <th style="width: 25%;">æ‰€å±ç« èŠ‚</th>
                                    <th style="width: 50%;">å®šä¹‰ä¸è§£æ</th>
                                </tr>
                            </thead>
                            <tbody id="reviewTableBody">
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <button class="return-btn" onclick="returnToMenu()">è¿”å›ä¸»èœå•</button>
            </div>
        </div>
    </div>

    <script>
        // ========== æ•°å­¦é¢˜åº“ï¼ˆå«æ•°å­¦å…¬å¼ï¼‰- é«˜èŒæ•°å­¦åˆ†ç±» ==========
        const MATH_TERMS = {
            algebra: [
                { 
                    term: "æŒ‡æ•°", 
                    termHtml: 'a<sup>n</sup>',
                    hint: "å¹‚è¿ç®—", 
                    category: "ç¬¬ä¸€ç«  åŸºç¡€çŸ¥è¯†", 
                    explanation: 'æŒ‡æ•°è¿ç®—ï¼ša<sup>n</sup>è¡¨ç¤ºnä¸ªaç›¸ä¹˜ã€‚åŸºæœ¬æ³•åˆ™ï¼ša<sup>m</sup>Â·a<sup>n</sup>=a<sup>m+n</sup>ï¼Œa<sup>m</sup>/a<sup>n</sup>=a<sup>m-n</sup>ï¼Œa<sup>0</sup>=1ï¼ˆaâ‰ 0ï¼‰ã€‚'
                },
                { 
                    term: "å¯¹æ•°", 
                    termHtml: 'log<sub>a</sub>b',
                    hint: "æŒ‡æ•°é€†è¿ç®—", 
                    category: "ç¬¬ä¸€ç«  åŸºç¡€çŸ¥è¯†", 
                    explanation: 'å¦‚æœa<sup>x</sup>=bï¼ˆa>0ï¼Œaâ‰ 1ï¼‰ï¼Œåˆ™x=log<sub>a</sub>bã€‚åŸºæœ¬æ€§è´¨ï¼šlog<sub>a</sub>(xy)=log<sub>a</sub>x+log<sub>a</sub>yï¼Œlog<sub>a</sub>(x/y)=log<sub>a</sub>x-log<sub>a</sub>yã€‚'
                },
                { 
                    term: "å‡½æ•°", 
                    termHtml: 'y = f(x)',
                    hint: "å¯¹åº”å…³ç³»", 
                    category: "ç¬¬ä¸€ç«  åŸºç¡€çŸ¥è¯†", 
                    explanation: 'å‡½æ•°æ˜¯å®šä¹‰åŸŸåˆ°å€¼åŸŸçš„å¯¹åº”å…³ç³»ï¼Œè®°ä½œy=f(x)ã€‚æ¯ä¸ªxå¯¹åº”å”¯ä¸€çš„yå€¼ã€‚å®šä¹‰åŸŸæ˜¯è‡ªå˜é‡xçš„å–å€¼èŒƒå›´ï¼Œå€¼åŸŸæ˜¯å‡½æ•°å€¼çš„é›†åˆã€‚'
                },
                { 
                    term: "å•è°ƒæ€§", 
                    termHtml: 'f(xâ‚) < f(xâ‚‚)',
                    hint: "å¢å‡æ€§", 
                    category: "ç¬¬ä¸€ç«  åŸºç¡€çŸ¥è¯†", 
                    explanation: 'å•è°ƒé€’å¢ï¼šå½“xâ‚<xâ‚‚æ—¶ï¼Œf(xâ‚)â‰¤f(xâ‚‚)ï¼›å•è°ƒé€’å‡ï¼šå½“xâ‚<xâ‚‚æ—¶ï¼Œf(xâ‚)â‰¥f(xâ‚‚)ã€‚'
                },
                { 
                    term: "å¥‡å¶æ€§", 
                    termHtml: 'f(-x) = Â±f(x)',
                    hint: "å¯¹ç§°æ€§", 
                    category: "ç¬¬ä¸€ç«  åŸºç¡€çŸ¥è¯†", 
                    explanation: 'å¥‡å‡½æ•°ï¼šf(-x)=-f(x)ï¼Œå›¾åƒå…³äºåŸç‚¹å¯¹ç§°ï¼›å¶å‡½æ•°ï¼šf(-x)=f(x)ï¼Œå›¾åƒå…³äºyè½´å¯¹ç§°ã€‚'
                },
                { 
                    term: "å‘¨æœŸæ€§", 
                    termHtml: 'f(x+T) = f(x)',
                    hint: "é‡å¤æ€§", 
                    category: "ç¬¬ä¸€ç«  åŸºç¡€çŸ¥è¯†", 
                    explanation: 'è‹¥å­˜åœ¨T>0ï¼Œä½¿å¾—f(x+T)=f(x)å¯¹æ‰€æœ‰xæˆç«‹ï¼Œåˆ™å‡½æ•°æ˜¯å‘¨æœŸå‡½æ•°ï¼ŒTæ˜¯æœ€å°æ­£å‘¨æœŸã€‚'
                },
                { 
                    term: "å¤åˆå‡½æ•°", 
                    termHtml: 'f(g(x))',
                    hint: "å‡½æ•°å¥—å‡½æ•°", 
                    category: "ç¬¬ä¸€ç«  åŸºç¡€çŸ¥è¯†", 
                    explanation: 'å¤åˆå‡½æ•°æ˜¯ç”±ä¸¤ä¸ªå‡½æ•°ç»„åˆè€Œæˆï¼Œè®°ä½œf(g(x))ã€‚å…ˆè®¡ç®—å†…å±‚å‡½æ•°g(x)ï¼Œå†å°†ç»“æœä»£å…¥å¤–å±‚å‡½æ•°fã€‚'
                },
                { 
                    term: "åˆç­‰å‡½æ•°", 
                    termHtml: 'åŸºæœ¬å‡½æ•°',
                    hint: "åŸºç¡€å‡½æ•°", 
                    category: "ç¬¬ä¸€ç«  åŸºç¡€çŸ¥è¯†", 
                    explanation: 'åˆç­‰å‡½æ•°åŒ…æ‹¬ï¼šå¹‚å‡½æ•°ã€æŒ‡æ•°å‡½æ•°ã€å¯¹æ•°å‡½æ•°ã€ä¸‰è§’å‡½æ•°ã€åä¸‰è§’å‡½æ•°ã€‚ç”±è¿™äº›å‡½æ•°ç»è¿‡æœ‰é™æ¬¡å››åˆ™è¿ç®—å’Œå¤åˆå¾—åˆ°ã€‚'
                }
            ],
            limit: [
                { 
                    term: "æé™", 
                    termHtml: '<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">xâ†’a</span></span>f(x)',
                    hint: "è¶‹å‘", 
                    category: "ç¬¬äºŒç«  æé™ä¸è¿ç»­", 
                    explanation: 'æé™è¡¨ç¤ºå½“xæ— é™æ¥è¿‘aæ—¶ï¼Œf(x)æ— é™æ¥è¿‘çš„å€¼Lã€‚è®°ä½œ <span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">xâ†’a</span></span>f(x)=Lã€‚'
                },
                { 
                    term: "å·¦æé™", 
                    termHtml: '<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">xâ†’aâ»</span></span>f(x)',
                    hint: "ä»å·¦è¾¹æ¥è¿‘", 
                    category: "ç¬¬äºŒç«  æé™ä¸è¿ç»­", 
                    explanation: 'å·¦æé™è¡¨ç¤ºxä»å°äºaçš„ä¸€ä¾§ï¼ˆå·¦ä¾§ï¼‰æ— é™æ¥è¿‘aæ—¶ï¼Œf(x)çš„æé™å€¼ã€‚'
                },
                { 
                    term: "å³æé™", 
                    termHtml: '<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">xâ†’aâº</span></span>f(x)',
                    hint: "ä»å³è¾¹æ¥è¿‘", 
                    category: "ç¬¬äºŒç«  æé™ä¸è¿ç»­", 
                    explanation: 'å³æé™è¡¨ç¤ºxä»å¤§äºaçš„ä¸€ä¾§ï¼ˆå³ä¾§ï¼‰æ— é™æ¥è¿‘aæ—¶ï¼Œf(x)çš„æé™å€¼ã€‚'
                },
                { 
                    term: "æ— ç©·å°é‡", 
                    termHtml: 'Î±(x) â†’ 0',
                    hint: "è¶‹äºé›¶", 
                    category: "ç¬¬äºŒç«  æé™ä¸è¿ç»­", 
                    explanation: 'å½“xâ†’aæ—¶ï¼Œå¦‚æœÎ±(x)â†’0ï¼Œåˆ™ç§°Î±(x)ä¸ºxâ†’aæ—¶çš„æ— ç©·å°é‡ã€‚'
                },
                { 
                    term: "æ— ç©·å¤§é‡", 
                    termHtml: 'f(x) â†’ âˆ',
                    hint: "è¶‹äºæ— ç©·", 
                    category: "ç¬¬äºŒç«  æé™ä¸è¿ç»­", 
                    explanation: 'å½“xâ†’aæ—¶ï¼Œå¦‚æœ|f(x)|æ— é™å¢å¤§ï¼Œåˆ™ç§°f(x)ä¸ºxâ†’aæ—¶çš„æ— ç©·å¤§é‡ã€‚'
                },
                { 
                    term: "é‡è¦æé™", 
                    termHtml: '<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">xâ†’0</span></span><span class="frac"><span class="frac-num">sin x</span><span class="frac-den">x</span></span>=1',
                    hint: "sinx/x", 
                    category: "ç¬¬äºŒç«  æé™ä¸è¿ç»­", 
                    explanation: 'ç¬¬ä¸€ä¸ªé‡è¦æé™ï¼š<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">xâ†’0</span></span><span class="frac"><span class="frac-num">sin x</span><span class="frac-den">x</span></span>=1ã€‚'
                },
                { 
                    term: "è¿ç»­æ€§", 
                    termHtml: '<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">xâ†’a</span></span>f(x)=f(a)',
                    hint: "ä¸æ–­", 
                    category: "ç¬¬äºŒç«  æé™ä¸è¿ç»­", 
                    explanation: 'å‡½æ•°åœ¨ç‚¹aè¿ç»­éœ€æ»¡è¶³ï¼š<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">xâ†’a</span></span>f(x)=f(a)ï¼Œå³æé™å€¼ç­‰äºå‡½æ•°å€¼ã€‚'
                },
                { 
                    term: "é—´æ–­ç‚¹", 
                    termHtml: 'ä¸è¿ç»­ç‚¹',
                    hint: "æ–­ç‚¹", 
                    category: "ç¬¬äºŒç«  æé™ä¸è¿ç»­", 
                    explanation: 'å‡½æ•°ä¸è¿ç»­çš„ç‚¹ç§°ä¸ºé—´æ–­ç‚¹ã€‚åŒ…æ‹¬ï¼šå¯å»é—´æ–­ç‚¹ã€è·³è·ƒé—´æ–­ç‚¹ã€æ— ç©·é—´æ–­ç‚¹ã€æŒ¯è¡é—´æ–­ç‚¹ã€‚'
                }
            ],
            derivative: [
                { 
                    term: "å¯¼æ•°", 
                    termHtml: 'f\'(x) = <span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">Î”xâ†’0</span></span><span class="frac"><span class="frac-num">f(x+Î”x)-f(x)</span><span class="frac-den">Î”x</span></span>',
                    hint: "å˜åŒ–ç‡", 
                    category: "ç¬¬ä¸‰ç«  å¯¼æ•°ä¸å¾®åˆ†", 
                    explanation: 'å¯¼æ•°è¡¨ç¤ºå‡½æ•°åœ¨æŸç‚¹çš„ç¬æ—¶å˜åŒ–ç‡ï¼Œå‡ ä½•æ„ä¹‰æ˜¯æ›²çº¿åœ¨è¯¥ç‚¹åˆ‡çº¿çš„æ–œç‡ã€‚å®šä¹‰ï¼šf\'(x)=<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">Î”xâ†’0</span></span><span class="frac"><span class="frac-num">f(x+Î”x)-f(x)</span><span class="frac-den">Î”x</span></span>ã€‚'
                },
                { 
                    term: "å¯å¯¼", 
                    termHtml: 'f\'(x)å­˜åœ¨',
                    hint: "æœ‰å¯¼æ•°", 
                    category: "ç¬¬ä¸‰ç«  å¯¼æ•°ä¸å¾®åˆ†", 
                    explanation: 'å¦‚æœå‡½æ•°åœ¨æŸç‚¹çš„å¯¼æ•°å­˜åœ¨ï¼Œåˆ™ç§°å‡½æ•°åœ¨è¯¥ç‚¹å¯å¯¼ã€‚å¯å¯¼å¿…è¿ç»­ï¼Œä½†è¿ç»­ä¸ä¸€å®šå¯å¯¼ã€‚'
                },
                { 
                    term: "å¯¼æ•°çš„å››åˆ™è¿ç®—", 
                    termHtml: '(uÂ±v)\' = u\'Â±v\'',
                    hint: "åŠ å‡ä¹˜é™¤", 
                    category: "ç¬¬ä¸‰ç«  å¯¼æ•°ä¸å¾®åˆ†", 
                    explanation: 'å¯¼æ•°çš„å››åˆ™è¿ç®—æ³•åˆ™ï¼š(uÂ±v)\'=u\'Â±v\'ï¼Œ(uv)\'=u\'v+uv\'ï¼Œ<span class="frac"><span class="frac-num">u</span><span class="frac-den">v</span></span>\'=<span class="frac"><span class="frac-num">u\'v-uv\'</span><span class="frac-den">vÂ²</span></span>ã€‚'
                },
                { 
                    term: "å¤åˆå‡½æ•°æ±‚å¯¼", 
                    termHtml: '[f(g(x))]\' = f\'(g(x))Â·g\'(x)',
                    hint: "é“¾å¼æ³•åˆ™", 
                    category: "ç¬¬ä¸‰ç«  å¯¼æ•°ä¸å¾®åˆ†", 
                    explanation: 'å¤åˆå‡½æ•°æ±‚å¯¼æ³•åˆ™ï¼ˆé“¾å¼æ³•åˆ™ï¼‰ï¼š[f(g(x))]\'=f\'(g(x))Â·g\'(x)ã€‚å…ˆå¯¹å¤–å±‚å‡½æ•°æ±‚å¯¼ï¼Œå†ä¹˜ä»¥å†…å±‚å‡½æ•°çš„å¯¼æ•°ã€‚'
                },
                { 
                    term: "é«˜é˜¶å¯¼æ•°", 
                    termHtml: 'f<sup>(n)</sup>(x)',
                    hint: "å¤šæ¬¡æ±‚å¯¼", 
                    category: "ç¬¬ä¸‰ç«  å¯¼æ•°ä¸å¾®åˆ†", 
                    explanation: 'å¯¹å¯¼æ•°å†æ¬¡æ±‚å¯¼å¾—åˆ°äºŒé˜¶å¯¼æ•°f\'\'(x)ï¼Œç»§ç»­æ±‚å¯¼å¾—åˆ°ä¸‰é˜¶ã€å››é˜¶...né˜¶å¯¼æ•°f<sup>(n)</sup>(x)ã€‚'
                },
                { 
                    term: "éšå‡½æ•°æ±‚å¯¼", 
                    termHtml: 'F(x,y)=0',
                    hint: "éšå¼å‡½æ•°", 
                    category: "ç¬¬ä¸‰ç«  å¯¼æ•°ä¸å¾®åˆ†", 
                    explanation: 'å¯¹äºæ–¹ç¨‹F(x,y)=0ç¡®å®šçš„éšå‡½æ•°ï¼Œé€šè¿‡å¯¹æ–¹ç¨‹ä¸¤è¾¹åŒæ—¶æ±‚å¯¼ï¼Œå¯ä»¥æ±‚å‡ºyå¯¹xçš„å¯¼æ•°ã€‚'
                },
                { 
                    term: "å¾®åˆ†", 
                    termHtml: 'dy = f\'(x)dx',
                    hint: "å¢é‡", 
                    category: "ç¬¬ä¸‰ç«  å¯¼æ•°ä¸å¾®åˆ†", 
                    explanation: 'å¾®åˆ†dy=f\'(x)dxè¡¨ç¤ºå‡½æ•°å¢é‡çš„çº¿æ€§ä¸»éƒ¨ã€‚å½“Î”xå¾ˆå°æ—¶ï¼ŒÎ”yâ‰ˆdyï¼Œç”¨äºè¿‘ä¼¼è®¡ç®—ã€‚'
                },
                { 
                    term: "æ´›å¿…è¾¾æ³•åˆ™", 
                    termHtml: '<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">xâ†’a</span></span><span class="frac"><span class="frac-num">f(x)</span><span class="frac-den">g(x)</span></span>=<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">xâ†’a</span></span><span class="frac"><span class="frac-num">f\'(x)</span><span class="frac-den">g\'(x)</span></span>',
                    hint: "0/0å‹", 
                    category: "ç¬¬å››ç«  å¯¼æ•°çš„åº”ç”¨", 
                    explanation: 'å½“æé™ä¸º <span class="frac"><span class="frac-num">0</span><span class="frac-den">0</span></span> æˆ– <span class="frac"><span class="frac-num">âˆ</span><span class="frac-den">âˆ</span></span> ä¸å®šå‹æ—¶ï¼Œå¯ç”¨åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼åå†æ±‚æé™ã€‚'
                },
                { 
                    term: "å•è°ƒæ€§", 
                    termHtml: 'f\'(x) > 0 é€’å¢',
                    hint: "å¢å‡", 
                    category: "ç¬¬å››ç«  å¯¼æ•°çš„åº”ç”¨", 
                    explanation: 'åˆ©ç”¨å¯¼æ•°åˆ¤æ–­å•è°ƒæ€§ï¼šf\'(x)>0æ—¶å‡½æ•°å•è°ƒé€’å¢ï¼Œf\'(x)<0æ—¶å‡½æ•°å•è°ƒé€’å‡ã€‚'
                },
                { 
                    term: "æå€¼", 
                    termHtml: 'f\'(xâ‚€) = 0',
                    hint: "æœ€å€¼", 
                    category: "ç¬¬å››ç«  å¯¼æ•°çš„åº”ç”¨", 
                    explanation: 'å‡½æ•°åœ¨xâ‚€å¤„å–å¾—æå€¼çš„å¿…è¦æ¡ä»¶ï¼šf\'(xâ‚€)=0æˆ–f\'(xâ‚€)ä¸å­˜åœ¨ã€‚é€šè¿‡åˆ¤æ–­f\'(x)åœ¨xâ‚€å·¦å³ä¸¤ä¾§çš„ç¬¦å·å˜åŒ–ç¡®å®šæ˜¯æå¤§å€¼è¿˜æ˜¯æå°å€¼ã€‚'
                },
                { 
                    term: "å‡¹å‡¸æ€§", 
                    termHtml: 'f\'\'(x) > 0 å‡¹',
                    hint: "å¼¯æ›²æ–¹å‘", 
                    category: "ç¬¬å››ç«  å¯¼æ•°çš„åº”ç”¨", 
                    explanation: 'åˆ©ç”¨äºŒé˜¶å¯¼æ•°åˆ¤æ–­å‡¹å‡¸æ€§ï¼šf\'\'(x)>0æ—¶æ›²çº¿å‘ä¸Šå‡¹ï¼ˆä¸‹å‡¸ï¼‰ï¼Œf\'\'(x)<0æ—¶æ›²çº¿å‘ä¸‹å‡¹ï¼ˆä¸Šå‡¸ï¼‰ã€‚'
                },
                { 
                    term: "æ‹ç‚¹", 
                    termHtml: 'f\'\'(xâ‚€) = 0',
                    hint: "å‡¹å‡¸è½¬æŠ˜", 
                    category: "ç¬¬å››ç«  å¯¼æ•°çš„åº”ç”¨", 
                    explanation: 'æ›²çº¿å‡¹å‡¸æ€§å‘ç”Ÿæ”¹å˜çš„ç‚¹ç§°ä¸ºæ‹ç‚¹ã€‚æ‹ç‚¹çš„å¿…è¦æ¡ä»¶æ˜¯f\'\'(xâ‚€)=0æˆ–f\'\'(xâ‚€)ä¸å­˜åœ¨ã€‚'
                },
                { 
                    term: "æœ€å€¼", 
                    termHtml: 'æœ€å¤§å€¼ã€æœ€å°å€¼',
                    hint: "æœ€å¤§æœ€å°", 
                    category: "ç¬¬å››ç«  å¯¼æ•°çš„åº”ç”¨", 
                    explanation: 'åœ¨é—­åŒºé—´[a,b]ä¸Šï¼Œå‡½æ•°çš„æœ€å€¼å¯èƒ½åœ¨ç«¯ç‚¹æˆ–æå€¼ç‚¹å–å¾—ã€‚æ¯”è¾ƒè¿™äº›ç‚¹çš„å‡½æ•°å€¼å³å¯å¾—åˆ°æœ€å€¼ã€‚'
                }
            ],
            integral: [
                { 
                    term: "åŸå‡½æ•°", 
                    termHtml: 'F\'(x) = f(x)',
                    hint: "å¯¼æ•°çš„é€†", 
                    category: "ç¬¬äº”ç«  ä¸å®šç§¯åˆ†", 
                    explanation: 'å¦‚æœF\'(x)=f(x)ï¼Œåˆ™F(x)æ˜¯f(x)çš„ä¸€ä¸ªåŸå‡½æ•°ã€‚ä¸€ä¸ªå‡½æ•°çš„åŸå‡½æ•°æœ‰æ— ç©·å¤šä¸ªï¼Œå®ƒä»¬ä¹‹é—´ç›¸å·®å¸¸æ•°ã€‚'
                },
                { 
                    term: "ä¸å®šç§¯åˆ†", 
                    termHtml: '<span class="integral">âˆ«</span>f(x)dx = F(x) + C',
                    hint: "åŸå‡½æ•°æ—", 
                    category: "ç¬¬äº”ç«  ä¸å®šç§¯åˆ†", 
                    explanation: 'ä¸å®šç§¯åˆ†æ˜¯æ±‚å¯¼çš„é€†è¿ç®—ï¼Œ<span class="integral">âˆ«</span>f(x)dxè¡¨ç¤ºf(x)çš„æ‰€æœ‰åŸå‡½æ•°ï¼Œè®°ä½œF(x)+Cï¼Œå…¶ä¸­Cæ˜¯ä»»æ„å¸¸æ•°ã€‚'
                },
                { 
                    term: "æ¢å…ƒç§¯åˆ†æ³•", 
                    termHtml: '<span class="integral">âˆ«</span>f(g(x))g\'(x)dx = <span class="integral">âˆ«</span>f(u)du',
                    hint: "å˜é‡æ›¿æ¢", 
                    category: "ç¬¬äº”ç«  ä¸å®šç§¯åˆ†", 
                    explanation: 'é€šè¿‡å˜é‡æ›¿æ¢u=g(x)ç®€åŒ–ç§¯åˆ†è®¡ç®—ã€‚ç¬¬ä¸€ç±»æ¢å…ƒæ³•ï¼ˆå‡‘å¾®åˆ†æ³•ï¼‰ï¼š<span class="integral">âˆ«</span>f(g(x))g\'(x)dx=<span class="integral">âˆ«</span>f(u)duã€‚'
                },
                { 
                    term: "åˆ†éƒ¨ç§¯åˆ†æ³•", 
                    termHtml: '<span class="integral">âˆ«</span>udv = uv - <span class="integral">âˆ«</span>vdu',
                    hint: "âˆ«udv", 
                    category: "ç¬¬äº”ç«  ä¸å®šç§¯åˆ†", 
                    explanation: 'åˆ†éƒ¨ç§¯åˆ†å…¬å¼ï¼š<span class="integral">âˆ«</span>udv = uv - <span class="integral">âˆ«</span>vduã€‚ç”¨äºå¤„ç†ä¸¤ä¸ªå‡½æ•°ä¹˜ç§¯çš„ç§¯åˆ†ï¼Œé€‰æ‹©uå’Œdvæ˜¯å…³é”®ã€‚'
                },
                { 
                    term: "å®šç§¯åˆ†", 
                    termHtml: '<span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>f(x)dx',
                    hint: "é¢ç§¯", 
                    category: "ç¬¬å…­ç«  å®šç§¯åˆ†åŠå…¶åº”ç”¨", 
                    explanation: 'å®šç§¯åˆ† <span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>f(x)dx è¡¨ç¤ºå‡½æ•°f(x)åœ¨åŒºé—´[a,b]ä¸Šä¸xè½´å›´æˆçš„æœ‰å‘é¢ç§¯ã€‚'
                },
                { 
                    term: "ç‰›é¡¿-è±å¸ƒå°¼èŒ¨å…¬å¼", 
                    termHtml: '<span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>f(x)dx = F(b) - F(a)',
                    hint: "å¾®ç§¯åˆ†åŸºæœ¬å…¬å¼", 
                    category: "ç¬¬å…­ç«  å®šç§¯åˆ†åŠå…¶åº”ç”¨", 
                    explanation: 'å¾®ç§¯åˆ†åŸºæœ¬å…¬å¼ï¼ˆç‰›é¡¿-è±å¸ƒå°¼èŒ¨å…¬å¼ï¼‰ï¼š<span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>f(x)dx = F(b) - F(a)ï¼Œå…¶ä¸­F(x)æ˜¯f(x)çš„ä¸€ä¸ªåŸå‡½æ•°ã€‚'
                },
                { 
                    term: "å®šç§¯åˆ†çš„æ¢å…ƒæ³•", 
                    termHtml: 'æ¢å…ƒåŒæ—¶æ¢é™',
                    hint: "å˜é‡æ›¿æ¢", 
                    category: "ç¬¬å…­ç«  å®šç§¯åˆ†åŠå…¶åº”ç”¨", 
                    explanation: 'å®šç§¯åˆ†æ¢å…ƒæ—¶ï¼Œä¸ä»…è¦æ¢å˜é‡ï¼Œè¿˜è¦æ¢ç§¯åˆ†é™ã€‚å¦‚æœx=Ï†(t)ï¼Œåˆ™å½“x=aæ—¶t=Î±ï¼Œx=bæ—¶t=Î²ã€‚'
                },
                { 
                    term: "å®šç§¯åˆ†çš„åˆ†éƒ¨ç§¯åˆ†æ³•", 
                    termHtml: '<span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>udv = [uv]<span class="integral-limits"><sup>b</sup><sub>a</sub></span> - <span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>vdu',
                    hint: "å®šç§¯åˆ†åˆ†éƒ¨", 
                    category: "ç¬¬å…­ç«  å®šç§¯åˆ†åŠå…¶åº”ç”¨", 
                    explanation: 'å®šç§¯åˆ†çš„åˆ†éƒ¨ç§¯åˆ†å…¬å¼ï¼š<span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>udv = [uv]<span class="integral-limits"><sup>b</sup><sub>a</sub></span> - <span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>vduã€‚'
                },
                { 
                    term: "å¹¿ä¹‰ç§¯åˆ†", 
                    termHtml: 'æ— é™åŒºé—´ç§¯åˆ†',
                    hint: "æ— ç©·ç§¯åˆ†", 
                    category: "ç¬¬å…­ç«  å®šç§¯åˆ†åŠå…¶åº”ç”¨", 
                    explanation: 'å¹¿ä¹‰ç§¯åˆ†åŒ…æ‹¬ï¼šæ— é™åŒºé—´ä¸Šçš„ç§¯åˆ†ï¼ˆå¦‚<span class="integral">âˆ«</span><span class="integral-limits"><sup>+âˆ</sup><sub>a</sub></span>f(x)dxï¼‰å’Œæ— ç•Œå‡½æ•°çš„ç§¯åˆ†ã€‚'
                },
                { 
                    term: "å®šç§¯åˆ†æ±‚é¢ç§¯", 
                    termHtml: 'S = <span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>f(x)dx',
                    hint: "å‡ ä½•åº”ç”¨", 
                    category: "ç¬¬å…­ç«  å®šç§¯åˆ†åŠå…¶åº”ç”¨", 
                    explanation: 'ç”±æ›²çº¿y=f(x)ä¸xè½´ã€ç›´çº¿x=aã€x=bå›´æˆçš„å¹³é¢å›¾å½¢é¢ç§¯ï¼šS=<span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>|f(x)|dxã€‚'
                }
            ],
            differential: [
                { 
                    term: "å¾®åˆ†æ–¹ç¨‹", 
                    termHtml: 'F(x,y,y\')=0',
                    hint: "å«å¯¼æ•°çš„æ–¹ç¨‹", 
                    category: "ç¬¬ä¸ƒç«  å¾®åˆ†æ–¹ç¨‹", 
                    explanation: 'å«æœ‰æœªçŸ¥å‡½æ•°åŠå…¶å¯¼æ•°çš„æ–¹ç¨‹ç§°ä¸ºå¾®åˆ†æ–¹ç¨‹ã€‚å¦‚y\'=f(x,y)æ˜¯ä¸€é˜¶å¾®åˆ†æ–¹ç¨‹ã€‚'
                },
                { 
                    term: "å¯åˆ†ç¦»å˜é‡", 
                    termHtml: 'dy/dx = f(x)g(y)',
                    hint: "åˆ†ç¦»å˜é‡", 
                    category: "ç¬¬ä¸ƒç«  å¾®åˆ†æ–¹ç¨‹", 
                    explanation: 'å¯åˆ†ç¦»å˜é‡çš„å¾®åˆ†æ–¹ç¨‹ï¼šdy/dx=f(x)g(y)ã€‚é€šè¿‡åˆ†ç¦»å˜é‡ï¼Œä¸¤è¾¹åŒæ—¶ç§¯åˆ†æ±‚è§£ã€‚'
                },
                { 
                    term: "é½æ¬¡æ–¹ç¨‹", 
                    termHtml: 'dy/dx = f(y/x)',
                    hint: "é½æ¬¡å‹", 
                    category: "ç¬¬ä¸ƒç«  å¾®åˆ†æ–¹ç¨‹", 
                    explanation: 'é½æ¬¡å‹å¾®åˆ†æ–¹ç¨‹ï¼šdy/dx=f(y/x)ã€‚é€šè¿‡å˜é‡æ›¿æ¢u=y/xï¼Œå¯åŒ–ä¸ºå¯åˆ†ç¦»å˜é‡çš„æ–¹ç¨‹ã€‚'
                },
                { 
                    term: "ä¸€é˜¶çº¿æ€§å¾®åˆ†æ–¹ç¨‹", 
                    termHtml: 'y\' + P(x)y = Q(x)',
                    hint: "çº¿æ€§", 
                    category: "ç¬¬ä¸ƒç«  å¾®åˆ†æ–¹ç¨‹", 
                    explanation: 'ä¸€é˜¶çº¿æ€§å¾®åˆ†æ–¹ç¨‹ï¼šy\'+P(x)y=Q(x)ã€‚é€šè¿‡ç§¯åˆ†å› å­æ³•æ±‚è§£ï¼Œé€šè§£å…¬å¼ï¼šy=e<sup>-âˆ«P(x)dx</sup>[âˆ«Q(x)e<sup>âˆ«P(x)dx</sup>dx+C]ã€‚'
                },
                { 
                    term: "äºŒé˜¶å¸¸ç³»æ•°é½æ¬¡", 
                    termHtml: 'y\'\' + py\' + qy = 0',
                    hint: "äºŒé˜¶é½æ¬¡", 
                    category: "ç¬¬ä¸ƒç«  å¾®åˆ†æ–¹ç¨‹", 
                    explanation: 'äºŒé˜¶å¸¸ç³»æ•°é½æ¬¡çº¿æ€§å¾®åˆ†æ–¹ç¨‹ï¼šy\'\'+py\'+qy=0ã€‚é€šè¿‡ç‰¹å¾æ–¹ç¨‹rÂ²+pr+q=0æ±‚è§£ï¼Œæ ¹æ®æ ¹çš„ä¸‰ç§æƒ…å†µå¾—åˆ°é€šè§£ã€‚'
                },
                { 
                    term: "äºŒé˜¶å¸¸ç³»æ•°éé½æ¬¡", 
                    termHtml: 'y\'\' + py\' + qy = f(x)',
                    hint: "äºŒé˜¶éé½æ¬¡", 
                    category: "ç¬¬ä¸ƒç«  å¾®åˆ†æ–¹ç¨‹", 
                    explanation: 'äºŒé˜¶å¸¸ç³»æ•°éé½æ¬¡çº¿æ€§å¾®åˆ†æ–¹ç¨‹ï¼šy\'\'+py\'+qy=f(x)ã€‚é€šè§£=å¯¹åº”é½æ¬¡æ–¹ç¨‹çš„é€šè§£+éé½æ¬¡æ–¹ç¨‹çš„ç‰¹è§£ã€‚'
                }
            ],
            multivariable: [
                { 
                    term: "äºŒå…ƒå‡½æ•°", 
                    termHtml: 'z = f(x,y)',
                    hint: "ä¸¤ä¸ªå˜é‡", 
                    category: "ç¬¬å…«ç«  å¤šå…ƒå‡½æ•°å¾®åˆ†å­¦", 
                    explanation: 'äºŒå…ƒå‡½æ•°z=f(x,y)è¡¨ç¤ºä¸¤ä¸ªè‡ªå˜é‡xã€yä¸å› å˜é‡zä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚å®šä¹‰åŸŸæ˜¯å¹³é¢ä¸Šçš„åŒºåŸŸã€‚'
                },
                { 
                    term: "åå¯¼æ•°", 
                    termHtml: '<span class="frac"><span class="frac-num">âˆ‚f</span><span class="frac-den">âˆ‚x</span></span>',
                    hint: "å¯¹xæ±‚å¯¼", 
                    category: "ç¬¬å…«ç«  å¤šå…ƒå‡½æ•°å¾®åˆ†å­¦", 
                    explanation: 'åå¯¼æ•°ï¼šå¯¹å¤šå…ƒå‡½æ•°ä¸­ä¸€ä¸ªå˜é‡æ±‚å¯¼ï¼Œå…¶ä»–å˜é‡è§†ä¸ºå¸¸æ•°ã€‚è®°ä½œ<span class="frac"><span class="frac-num">âˆ‚f</span><span class="frac-den">âˆ‚x</span></span>æˆ–f<sub>x</sub>ã€‚'
                },
                { 
                    term: "å…¨å¾®åˆ†", 
                    termHtml: 'dz = <span class="frac"><span class="frac-num">âˆ‚f</span><span class="frac-den">âˆ‚x</span></span>dx + <span class="frac"><span class="frac-num">âˆ‚f</span><span class="frac-den">âˆ‚y</span></span>dy',
                    hint: "å…¨å¢é‡", 
                    category: "ç¬¬å…«ç«  å¤šå…ƒå‡½æ•°å¾®åˆ†å­¦", 
                    explanation: 'å…¨å¾®åˆ†dz=<span class="frac"><span class="frac-num">âˆ‚f</span><span class="frac-den">âˆ‚x</span></span>dx+<span class="frac"><span class="frac-num">âˆ‚f</span><span class="frac-den">âˆ‚y</span></span>dyï¼Œè¡¨ç¤ºå‡½æ•°å¢é‡çš„çº¿æ€§ä¸»éƒ¨ã€‚'
                },
                { 
                    term: "å¤åˆå‡½æ•°æ±‚åå¯¼", 
                    termHtml: 'é“¾å¼æ³•åˆ™',
                    hint: "å¤šå…ƒå¤åˆ", 
                    category: "ç¬¬å…«ç«  å¤šå…ƒå‡½æ•°å¾®åˆ†å­¦", 
                    explanation: 'å¤šå…ƒå¤åˆå‡½æ•°æ±‚åå¯¼çš„é“¾å¼æ³•åˆ™ï¼šå¦‚æœz=f(u,v)ï¼Œu=u(x,y)ï¼Œv=v(x,y)ï¼Œåˆ™<span class="frac"><span class="frac-num">âˆ‚z</span><span class="frac-den">âˆ‚x</span></span>=<span class="frac"><span class="frac-num">âˆ‚z</span><span class="frac-den">âˆ‚u</span></span><span class="frac"><span class="frac-num">âˆ‚u</span><span class="frac-den">âˆ‚x</span></span>+<span class="frac"><span class="frac-num">âˆ‚z</span><span class="frac-den">âˆ‚v</span></span><span class="frac"><span class="frac-num">âˆ‚v</span><span class="frac-den">âˆ‚x</span></span>ã€‚'
                },
                { 
                    term: "éšå‡½æ•°æ±‚åå¯¼", 
                    termHtml: 'F(x,y,z)=0',
                    hint: "éšå¼å¤šå…ƒ", 
                    category: "ç¬¬å…«ç«  å¤šå…ƒå‡½æ•°å¾®åˆ†å­¦", 
                    explanation: 'å¯¹äºæ–¹ç¨‹F(x,y,z)=0ç¡®å®šçš„éšå‡½æ•°z=z(x,y)ï¼Œé€šè¿‡å¯¹æ–¹ç¨‹ä¸¤è¾¹æ±‚åå¯¼ï¼Œå¯ä»¥æ±‚å‡º<span class="frac"><span class="frac-num">âˆ‚z</span><span class="frac-den">âˆ‚x</span></span>å’Œ<span class="frac"><span class="frac-num">âˆ‚z</span><span class="frac-den">âˆ‚y</span></span>ã€‚'
                },
                { 
                    term: "å¤šå…ƒå‡½æ•°æå€¼", 
                    termHtml: 'é©»ç‚¹',
                    hint: "æœ€å€¼", 
                    category: "ç¬¬å…«ç«  å¤šå…ƒå‡½æ•°å¾®åˆ†å­¦", 
                    explanation: 'å¤šå…ƒå‡½æ•°å–å¾—æå€¼çš„å¿…è¦æ¡ä»¶æ˜¯æ‰€æœ‰ä¸€é˜¶åå¯¼æ•°éƒ½ä¸ºé›¶çš„ç‚¹ï¼ˆé©»ç‚¹ï¼‰ã€‚é€šè¿‡äºŒé˜¶åå¯¼æ•°åˆ¤æ–­æ˜¯æå¤§å€¼è¿˜æ˜¯æå°å€¼ã€‚'
                },
                { 
                    term: "äºŒé‡ç§¯åˆ†", 
                    termHtml: '<span class="integral">âˆ¬</span><span class="integral-limits"><sub>D</sub></span>f(x,y)dÏƒ',
                    hint: "åŒé‡ç§¯åˆ†", 
                    category: "ç¬¬ä¹ç«  äºŒé‡ç§¯åˆ†", 
                    explanation: 'äºŒé‡ç§¯åˆ† <span class="integral">âˆ¬</span><span class="integral-limits"><sub>D</sub></span>f(x,y)dÏƒ è¡¨ç¤ºå‡½æ•°f(x,y)åœ¨åŒºåŸŸDä¸Šçš„ä½“ç§¯æˆ–è´¨é‡ã€‚'
                },
                { 
                    term: "ç›´è§’åæ ‡äºŒé‡ç§¯åˆ†", 
                    termHtml: '<span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>dx<span class="integral">âˆ«</span><span class="integral-limits"><sup>Ï†â‚‚(x)</sup><sub>Ï†â‚(x)</sub></span>f(x,y)dy',
                    hint: "ç´¯æ¬¡ç§¯åˆ†", 
                    category: "ç¬¬ä¹ç«  äºŒé‡ç§¯åˆ†", 
                    explanation: 'åœ¨ç›´è§’åæ ‡ç³»ä¸‹ï¼ŒäºŒé‡ç§¯åˆ†å¯åŒ–ä¸ºç´¯æ¬¡ç§¯åˆ†ï¼š<span class="integral">âˆ«</span><span class="integral-limits"><sup>b</sup><sub>a</sub></span>dx<span class="integral">âˆ«</span><span class="integral-limits"><sup>Ï†â‚‚(x)</sup><sub>Ï†â‚(x)</sub></span>f(x,y)dyã€‚'
                },
                { 
                    term: "æåæ ‡äºŒé‡ç§¯åˆ†", 
                    termHtml: '<span class="integral">âˆ«</span><span class="integral-limits"><sup>Î²</sup><sub>Î±</sub></span>dÎ¸<span class="integral">âˆ«</span><span class="integral-limits"><sup>râ‚‚(Î¸)</sup><sub>râ‚(Î¸)</sub></span>f(rcosÎ¸,rsinÎ¸)rdr',
                    hint: "æåæ ‡", 
                    category: "ç¬¬ä¹ç«  äºŒé‡ç§¯åˆ†", 
                    explanation: 'åœ¨æåæ ‡ç³»ä¸‹ï¼ŒäºŒé‡ç§¯åˆ†ï¼š<span class="integral">âˆ«</span><span class="integral-limits"><sup>Î²</sup><sub>Î±</sub></span>dÎ¸<span class="integral">âˆ«</span><span class="integral-limits"><sup>râ‚‚(Î¸)</sup><sub>râ‚(Î¸)</sub></span>f(rcosÎ¸,rsinÎ¸)rdrï¼Œæ³¨æ„å¤šä¸€ä¸ªrå› å­ã€‚'
                },
                { 
                    term: "äºŒé‡ç§¯åˆ†æ±‚ä½“ç§¯", 
                    termHtml: 'V = <span class="integral">âˆ¬</span><span class="integral-limits"><sub>D</sub></span>f(x,y)dÏƒ',
                    hint: "å‡ ä½•åº”ç”¨", 
                    category: "ç¬¬ä¹ç«  äºŒé‡ç§¯åˆ†", 
                    explanation: 'äºŒé‡ç§¯åˆ†å¯ç”¨æ¥è®¡ç®—æ›²é¡¶æŸ±ä½“çš„ä½“ç§¯ï¼šV=<span class="integral">âˆ¬</span><span class="integral-limits"><sub>D</sub></span>f(x,y)dÏƒï¼Œå…¶ä¸­f(x,y)æ˜¯æ›²é¡¶çš„é«˜åº¦ã€‚'
                }
            ],
            linear: [
                { 
                    term: "çŸ©é˜µ", 
                    termHtml: 'A<sub>mÃ—n</sub>',
                    hint: "æ•°è¡¨", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'çŸ©é˜µæ˜¯æŒ‰è¡Œåˆ—æ’åˆ—çš„æ•°è¡¨ï¼Œç”¨äºè¡¨ç¤ºçº¿æ€§å˜æ¢å’Œè§£æ–¹ç¨‹ç»„ã€‚mÃ—nçŸ©é˜µæœ‰mè¡Œnåˆ—ï¼Œç”¨å¤§å†™å­—æ¯è¡¨ç¤ºã€‚'
                },
                { 
                    term: "è¡Œåˆ—å¼", 
                    termHtml: '|A| = det(A)',
                    hint: "æ–¹é˜µçš„å€¼", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'è¡Œåˆ—å¼æ˜¯æ–¹é˜µå¯¹åº”çš„ä¸€ä¸ªæ ‡é‡å€¼ï¼Œè®°ä½œ|A|æˆ–det(A)ï¼Œç”¨äºåˆ¤æ–­çŸ©é˜µå¯é€†æ€§ã€‚å½“|A|â‰ 0æ—¶çŸ©é˜µå¯é€†ã€‚'
                },
                { 
                    term: "å‘é‡", 
                    termHtml: '<span style="font-weight:bold;text-decoration:overline">a</span> = (x, y, z)',
                    hint: "æœ‰å‘çº¿æ®µ", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'å‘é‡æ˜¯æ—¢æœ‰å¤§å°åˆæœ‰æ–¹å‘çš„é‡ï¼Œå¯ç”¨åæ ‡è¡¨ç¤ºä¸º(x,y)æˆ–(x,y,z)ã€‚'
                },
                { 
                    term: "çº¿æ€§æ–¹ç¨‹ç»„", 
                    termHtml: 'Ax = b',
                    hint: "Ax=b", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'å½¢å¦‚Ax=bçš„æ–¹ç¨‹ç»„ï¼Œå…¶ä¸­Aæ˜¯ç³»æ•°çŸ©é˜µï¼Œxæ˜¯æœªçŸ¥æ•°å‘é‡ï¼Œbæ˜¯å¸¸æ•°å‘é‡ã€‚'
                },
                { 
                    term: "çŸ©é˜µä¹˜æ³•", 
                    termHtml: 'C<sub>ij</sub> = <span class="sum-block"><span class="sum-symbol">Î£</span><span class="sum-limits">k</span></span>A<sub>ik</sub>B<sub>kj</sub>',
                    hint: "è¡Œä¹˜åˆ—", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'çŸ©é˜µä¹˜æ³•ä¸­ï¼Œç»“æœçŸ©é˜µçš„ç¬¬iè¡Œjåˆ—å…ƒç´ æ˜¯Açš„ç¬¬iè¡Œä¸Bçš„ç¬¬jåˆ—å¯¹åº”å…ƒç´ ä¹˜ç§¯ä¹‹å’Œã€‚'
                },
                { 
                    term: "é€†çŸ©é˜µ", 
                    termHtml: 'AA<sup>-1</sup> = I',
                    hint: "AAâ»Â¹=I", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'è‹¥æ–¹é˜µAå­˜åœ¨çŸ©é˜µBä½¿AB=BA=Iï¼ˆå•ä½çŸ©é˜µï¼‰ï¼Œåˆ™Bæ˜¯Açš„é€†çŸ©é˜µï¼Œè®°ä½œA<sup>-1</sup>ã€‚'
                },
                { 
                    term: "ç‰¹å¾å€¼", 
                    termHtml: 'Av = Î»v',
                    hint: "Î»", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'æ»¡è¶³Av=Î»vçš„æ ‡é‡Î»ç§°ä¸ºçŸ©é˜µAçš„ç‰¹å¾å€¼ï¼Œvæ˜¯å¯¹åº”çš„ç‰¹å¾å‘é‡ã€‚'
                },
                { 
                    term: "ç‰¹å¾å‘é‡", 
                    termHtml: '(A - Î»I)v = 0',
                    hint: "Av=Î»v", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'éé›¶å‘é‡væ»¡è¶³Av=Î»væ—¶ï¼Œvæ˜¯çŸ©é˜µAå…³äºç‰¹å¾å€¼Î»çš„ç‰¹å¾å‘é‡ã€‚é€šè¿‡è§£(A-Î»I)v=0å¾—åˆ°ã€‚'
                },
                { 
                    term: "ç§©", 
                    termHtml: 'rank(A) = r',
                    hint: "çº¿æ€§æ— å…³è¡Œ/åˆ—æ•°", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'çŸ©é˜µçš„ç§©æ˜¯å…¶æœ€å¤§çº¿æ€§æ— å…³è¡Œï¼ˆæˆ–åˆ—ï¼‰çš„ä¸ªæ•°ï¼Œè®°ä½œrank(A)æˆ–r(A)ã€‚'
                },
                { 
                    term: "è½¬ç½®çŸ©é˜µ", 
                    termHtml: 'A<sup>T</sup>',
                    hint: "è¡Œåˆ—äº’æ¢", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'çŸ©é˜µAçš„è½¬ç½®è®°ä½œA<sup>T</sup>ï¼Œæ˜¯å°†Açš„è¡Œå˜ä¸ºåˆ—ã€åˆ—å˜ä¸ºè¡Œå¾—åˆ°çš„çŸ©é˜µã€‚'
                },
                { 
                    term: "å•ä½çŸ©é˜µ", 
                    termHtml: 'I = E',
                    hint: "å¯¹è§’çº¿ä¸º1", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'ä¸»å¯¹è§’çº¿å…ƒç´ å…¨ä¸º1ï¼Œå…¶ä½™å…ƒç´ å…¨ä¸º0çš„æ–¹é˜µï¼Œè®°ä½œIæˆ–Eã€‚AI=IA=Aã€‚'
                },
                { 
                    term: "æ­£äº¤çŸ©é˜µ", 
                    termHtml: 'A<sup>T</sup>A = I',
                    hint: "AAáµ€=I", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'æ»¡è¶³A<sup>T</sup>A=AA<sup>T</sup>=Içš„æ–¹é˜µAç§°ä¸ºæ­£äº¤çŸ©é˜µï¼Œå…¶åˆ—å‘é‡æ„æˆæ ‡å‡†æ­£äº¤åŸºã€‚'
                },
                { 
                    term: "å‘é‡ç©ºé—´", 
                    termHtml: 'V',
                    hint: "çº¿æ€§ç©ºé—´", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'æ»¡è¶³å‘é‡åŠ æ³•å’Œæ•°ä¹˜å°é—­æ€§çš„é›†åˆï¼Œå…·æœ‰é›¶å‘é‡å’Œé€†å‘é‡ã€‚'
                },
                { 
                    term: "çº¿æ€§ç»„åˆ", 
                    termHtml: 'v = <span class="sum-block"><span class="sum-symbol">Î£</span><span class="sum-limits">i</span></span>a<sub>i</sub>v<sub>i</sub>',
                    hint: "å‘é‡æ±‚å’Œ", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'è‹¥v=aâ‚vâ‚+aâ‚‚vâ‚‚+...+aâ‚™vâ‚™ï¼Œåˆ™væ˜¯vâ‚,vâ‚‚,...,vâ‚™çš„çº¿æ€§ç»„åˆã€‚'
                },
                { 
                    term: "çº¿æ€§ç›¸å…³", 
                    termHtml: '<span class="sum-block"><span class="sum-symbol">Î£</span><span class="sum-limits">i</span></span>a<sub>i</sub>v<sub>i</sub>=0',
                    hint: "ä¸ç‹¬ç«‹", 
                    category: "ç¬¬åç«  çº¿æ€§ä»£æ•°", 
                    explanation: 'å‘é‡ç»„ä¸­å­˜åœ¨éé›¶ç³»æ•°ä½¿å¾—çº¿æ€§ç»„åˆä¸ºé›¶å‘é‡ï¼Œåˆ™ç§°çº¿æ€§ç›¸å…³ã€‚'
                }
            ],
            series: [
                { 
                    term: "å¸¸æ•°é¡¹çº§æ•°", 
                    termHtml: '<span class="sum-block"><span class="sum-symbol">Î£</span><span class="sum-limits">n=1</span></span><span class="sum-limits">âˆ</span>a<sub>n</sub>',
                    hint: "æ— ç©·å’Œ", 
                    category: "ç¬¬åä¸€ç«  æ— ç©·çº§æ•°", 
                    explanation: 'å¸¸æ•°é¡¹çº§æ•°æ˜¯æ— ç©·å¤šé¡¹çš„å’Œï¼š<span class="sum-block"><span class="sum-symbol">Î£</span><span class="sum-limits">n=1</span></span><span class="sum-limits">âˆ</span>a<sub>n</sub>ã€‚éƒ¨åˆ†å’ŒS<sub>n</sub>=aâ‚+aâ‚‚+...+a<sub>n</sub>ã€‚'
                },
                { 
                    term: "çº§æ•°æ”¶æ•›", 
                    termHtml: '<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">nâ†’âˆ</span></span>S<sub>n</sub> = S',
                    hint: "æœ‰æé™", 
                    category: "ç¬¬åä¸€ç«  æ— ç©·çº§æ•°", 
                    explanation: 'å¦‚æœéƒ¨åˆ†å’Œæ•°åˆ—{S<sub>n</sub>}æœ‰æé™Sï¼Œåˆ™ç§°çº§æ•°æ”¶æ•›ï¼Œå’Œä¸ºSã€‚å¦åˆ™ç§°çº§æ•°å‘æ•£ã€‚'
                },
                { 
                    term: "æ­£é¡¹çº§æ•°", 
                    termHtml: 'a<sub>n</sub> â‰¥ 0',
                    hint: "éè´Ÿé¡¹", 
                    category: "ç¬¬åä¸€ç«  æ— ç©·çº§æ•°", 
                    explanation: 'å„é¡¹éƒ½éè´Ÿçš„çº§æ•°ç§°ä¸ºæ­£é¡¹çº§æ•°ã€‚æ­£é¡¹çº§æ•°æ”¶æ•›çš„å……è¦æ¡ä»¶æ˜¯éƒ¨åˆ†å’Œæ•°åˆ—æœ‰ä¸Šç•Œã€‚'
                },
                { 
                    term: "æ¯”è¾ƒå®¡æ•›æ³•", 
                    termHtml: 'æ¯”è¾ƒå¤§å°',
                    hint: "æ¯”è¾ƒ", 
                    category: "ç¬¬åä¸€ç«  æ— ç©·çº§æ•°", 
                    explanation: 'æ¯”è¾ƒå®¡æ•›æ³•ï¼šå¦‚æœ0â‰¤a<sub>n</sub>â‰¤b<sub>n</sub>ï¼Œä¸”<span class="sum-block"><span class="sum-symbol">Î£</span></span>b<sub>n</sub>æ”¶æ•›ï¼Œåˆ™<span class="sum-block"><span class="sum-symbol">Î£</span></span>a<sub>n</sub>æ”¶æ•›ã€‚'
                },
                { 
                    term: "æ¯”å€¼å®¡æ•›æ³•", 
                    termHtml: '<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">nâ†’âˆ</span></span><span class="frac"><span class="frac-num">a<sub>n+1</sub></span><span class="frac-den">a<sub>n</sub></span></span> = Ï',
                    hint: "è¾¾æœ—è´å°”", 
                    category: "ç¬¬åä¸€ç«  æ— ç©·çº§æ•°", 
                    explanation: 'æ¯”å€¼å®¡æ•›æ³•ï¼ˆè¾¾æœ—è´å°”åˆ¤åˆ«æ³•ï¼‰ï¼šå¦‚æœ<span class="lim-block"><span class="lim-text">lim</span><span class="lim-sub">nâ†’âˆ</span></span><span class="frac"><span class="frac-num">a<sub>n+1</sub></span><span class="frac-den">a<sub>n</sub></span></span>=Ïï¼Œåˆ™å½“Ï<1æ—¶çº§æ•°æ”¶æ•›ï¼ŒÏ>1æ—¶å‘æ•£ã€‚'
                },
                { 
                    term: "äº¤é”™çº§æ•°", 
                    termHtml: '<span class="sum-block"><span class="sum-symbol">Î£</span><span class="sum-limits">n=1</span></span><span class="sum-limits">âˆ</span>(-1)<sup>n-1</sup>a<sub>n</sub>',
                    hint: "æ­£è´Ÿäº¤æ›¿", 
                    category: "ç¬¬åä¸€ç«  æ— ç©·çº§æ•°", 
                    explanation: 'å„é¡¹æ­£è´Ÿäº¤æ›¿çš„çº§æ•°ç§°ä¸ºäº¤é”™çº§æ•°ã€‚è±å¸ƒå°¼èŒ¨åˆ¤åˆ«æ³•ï¼šå¦‚æœa<sub>n</sub>å•è°ƒé€’å‡ä¸”è¶‹äº0ï¼Œåˆ™äº¤é”™çº§æ•°æ”¶æ•›ã€‚'
                },
                { 
                    term: "ç»å¯¹æ”¶æ•›", 
                    termHtml: '<span class="sum-block"><span class="sum-symbol">Î£</span></span>|a<sub>n</sub>|æ”¶æ•›',
                    hint: "ç»å¯¹å€¼æ”¶æ•›", 
                    category: "ç¬¬åä¸€ç«  æ— ç©·çº§æ•°", 
                    explanation: 'å¦‚æœçº§æ•°å„é¡¹çš„ç»å¯¹å€¼æ„æˆçš„çº§æ•°æ”¶æ•›ï¼Œåˆ™åŸçº§æ•°ç»å¯¹æ”¶æ•›ã€‚ç»å¯¹æ”¶æ•›çš„çº§æ•°å¿…æ”¶æ•›ã€‚'
                },
                { 
                    term: "å¹‚çº§æ•°", 
                    termHtml: '<span class="sum-block"><span class="sum-symbol">Î£</span><span class="sum-limits">n=0</span></span><span class="sum-limits">âˆ</span>a<sub>n</sub>x<sup>n</sup>',
                    hint: "xçš„å¹‚æ¬¡", 
                    category: "ç¬¬åä¸€ç«  æ— ç©·çº§æ•°", 
                    explanation: 'å¹‚çº§æ•°æ˜¯å½¢å¦‚<span class="sum-block"><span class="sum-symbol">Î£</span><span class="sum-limits">n=0</span></span><span class="sum-limits">âˆ</span>a<sub>n</sub>x<sup>n</sup>çš„å‡½æ•°é¡¹çº§æ•°ï¼Œæœ‰æ”¶æ•›åŠå¾„Rã€‚'
                },
                { 
                    term: "æ”¶æ•›åŠå¾„", 
                    termHtml: 'R',
                    hint: "æ”¶æ•›èŒƒå›´", 
                    category: "ç¬¬åä¸€ç«  æ— ç©·çº§æ•°", 
                    explanation: 'å¹‚çº§æ•°çš„æ”¶æ•›åŠå¾„Rï¼šå½“|x|<Ræ—¶çº§æ•°ç»å¯¹æ”¶æ•›ï¼Œ|x|>Ræ—¶å‘æ•£ï¼Œ|x|=Ræ—¶éœ€å•ç‹¬åˆ¤æ–­ã€‚'
                }
            ],
            geometry: [
                { 
                    term: "å‘é‡", 
                    termHtml: '<span style="font-weight:bold;text-decoration:overline">a</span> = (x, y, z)',
                    hint: "æœ‰å‘çº¿æ®µ", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'å‘é‡æ˜¯æ—¢æœ‰å¤§å°åˆæœ‰æ–¹å‘çš„é‡ï¼Œå¯ç”¨åæ ‡è¡¨ç¤ºä¸º(x,y)æˆ–(x,y,z)ã€‚å‘é‡çš„æ¨¡è¡¨ç¤ºé•¿åº¦ï¼Œæ–¹å‘ç”±æ–¹å‘è§’ç¡®å®šã€‚'
                },
                { 
                    term: "å‘é‡çš„æ•°é‡ç§¯", 
                    termHtml: 'aÂ·b = |a||b|cosÎ¸',
                    hint: "ç‚¹ç§¯", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'å‘é‡çš„æ•°é‡ç§¯ï¼ˆç‚¹ç§¯ï¼‰aÂ·b=|a||b|cosÎ¸=aâ‚bâ‚+aâ‚‚bâ‚‚+aâ‚ƒbâ‚ƒï¼Œç»“æœæ˜¯æ ‡é‡ã€‚ç”¨äºè®¡ç®—å¤¹è§’å’ŒæŠ•å½±ã€‚'
                },
                { 
                    term: "å‘é‡çš„å‘é‡ç§¯", 
                    termHtml: 'aÃ—b',
                    hint: "å‰ç§¯", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'å‘é‡çš„å‘é‡ç§¯ï¼ˆå‰ç§¯ï¼‰aÃ—bçš„ç»“æœæ˜¯å‚ç›´äºaå’Œbçš„å‘é‡ï¼Œæ¨¡ä¸º|a||b|sinÎ¸ï¼Œè¡¨ç¤ºå¹³è¡Œå››è¾¹å½¢é¢ç§¯ã€‚'
                },
                { 
                    term: "ç›´çº¿æ–¹ç¨‹", 
                    termHtml: 'y = kx + b',
                    hint: "y=kx+b", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'å¹³é¢ç›´çº¿æ–¹ç¨‹çš„å½¢å¼ï¼šç‚¹æ–œå¼y-yâ‚€=k(x-xâ‚€)ï¼Œæ–œæˆªå¼y=kx+bï¼Œä¸€èˆ¬å¼Ax+By+C=0ã€‚'
                },
                { 
                    term: "åœ†æ–¹ç¨‹", 
                    termHtml: '(x-a)Â² + (y-b)Â² = rÂ²',
                    hint: "(x-a)Â²+(y-b)Â²=rÂ²", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'åœ†å¿ƒä¸º(a,b)ï¼ŒåŠå¾„ä¸ºrçš„åœ†çš„æ ‡å‡†æ–¹ç¨‹æ˜¯(x-a)Â²+(y-b)Â²=rÂ²ã€‚'
                },
                { 
                    term: "æ¤­åœ†", 
                    termHtml: '<span class="frac"><span class="frac-num">xÂ²</span><span class="frac-den">aÂ²</span></span>+<span class="frac"><span class="frac-num">yÂ²</span><span class="frac-den">bÂ²</span></span>=1',
                    hint: "ä¸¤ç„¦ç‚¹è·ç¦»å’Œ", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'æ¤­åœ†æ˜¯åˆ°ä¸¤ç„¦ç‚¹è·ç¦»ä¹‹å’Œä¸ºå¸¸æ•°2açš„ç‚¹çš„è½¨è¿¹ï¼Œæ ‡å‡†æ–¹ç¨‹<span class="frac"><span class="frac-num">xÂ²</span><span class="frac-den">aÂ²</span></span>+<span class="frac"><span class="frac-num">yÂ²</span><span class="frac-den">bÂ²</span></span>=1ï¼Œå…¶ä¸­a>b>0ã€‚'
                },
                { 
                    term: "åŒæ›²çº¿", 
                    termHtml: '<span class="frac"><span class="frac-num">xÂ²</span><span class="frac-den">aÂ²</span></span>-<span class="frac"><span class="frac-num">yÂ²</span><span class="frac-den">bÂ²</span></span>=1',
                    hint: "ä¸¤ç„¦ç‚¹è·ç¦»å·®", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'åŒæ›²çº¿æ˜¯åˆ°ä¸¤ç„¦ç‚¹è·ç¦»ä¹‹å·®çš„ç»å¯¹å€¼ä¸ºå¸¸æ•°2açš„ç‚¹çš„è½¨è¿¹ï¼Œ<span class="frac"><span class="frac-num">xÂ²</span><span class="frac-den">aÂ²</span></span>-<span class="frac"><span class="frac-num">yÂ²</span><span class="frac-den">bÂ²</span></span>=1ã€‚'
                },
                { 
                    term: "æŠ›ç‰©çº¿", 
                    termHtml: 'yÂ² = 2px',
                    hint: "ç„¦ç‚¹åˆ°å‡†çº¿", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'æŠ›ç‰©çº¿æ˜¯åˆ°ç„¦ç‚¹å’Œå‡†çº¿è·ç¦»ç›¸ç­‰çš„ç‚¹çš„è½¨è¿¹ï¼Œæ ‡å‡†æ–¹ç¨‹yÂ²=2pxï¼Œç„¦ç‚¹åœ¨(<span class="frac"><span class="frac-num">p</span><span class="frac-den">2</span></span>,0)ã€‚'
                },
                { 
                    term: "ç©ºé—´ç›´çº¿", 
                    termHtml: '<span class="frac"><span class="frac-num">x-xâ‚€</span><span class="frac-den">l</span></span>=<span class="frac"><span class="frac-num">y-yâ‚€</span><span class="frac-den">m</span></span>=<span class="frac"><span class="frac-num">z-zâ‚€</span><span class="frac-den">n</span></span>',
                    hint: "å‚æ•°æ–¹ç¨‹", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'ç©ºé—´ç›´çº¿å¯ç”¨å¯¹ç§°å¼è¡¨ç¤ºï¼š<span class="frac"><span class="frac-num">x-xâ‚€</span><span class="frac-den">l</span></span>=<span class="frac"><span class="frac-num">y-yâ‚€</span><span class="frac-den">m</span></span>=<span class="frac"><span class="frac-num">z-zâ‚€</span><span class="frac-den">n</span></span>ï¼Œå…¶ä¸­(l,m,n)ä¸ºæ–¹å‘å‘é‡ã€‚'
                },
                { 
                    term: "å¹³é¢æ–¹ç¨‹", 
                    termHtml: 'Ax + By + Cz + D = 0',
                    hint: "Ax+By+Cz+D=0", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'ç©ºé—´å¹³é¢çš„ä¸€èˆ¬æ–¹ç¨‹Ax+By+Cz+D=0ï¼Œå…¶ä¸­(A,B,C)æ˜¯æ³•å‘é‡ã€‚'
                },
                { 
                    term: "ç‚¹åˆ°ç›´çº¿è·ç¦»", 
                    termHtml: 'd = <span class="frac"><span class="frac-num">|Axâ‚€+Byâ‚€+C|</span><span class="frac-den">âˆš(AÂ²+BÂ²)</span></span>',
                    hint: "å‚ç›´è·ç¦»", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'ç‚¹(xâ‚€,yâ‚€)åˆ°ç›´çº¿Ax+By+C=0çš„è·ç¦»d=<span class="frac"><span class="frac-num">|Axâ‚€+Byâ‚€+C|</span><span class="frac-den">âˆš(AÂ²+BÂ²)</span></span>ã€‚'
                },
                { 
                    term: "ç‚¹åˆ°å¹³é¢è·ç¦»", 
                    termHtml: 'd = <span class="frac"><span class="frac-num">|Axâ‚€+Byâ‚€+Czâ‚€+D|</span><span class="frac-den">âˆš(AÂ²+BÂ²+CÂ²)</span></span>',
                    hint: "ç©ºé—´å‚è·", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'ç‚¹åˆ°å¹³é¢Ax+By+Cz+D=0çš„è·ç¦»d=<span class="frac"><span class="frac-num">|Axâ‚€+Byâ‚€+Czâ‚€+D|</span><span class="frac-den">âˆš(AÂ²+BÂ²+CÂ²)</span></span>ã€‚'
                }
            ],
            probability: [
                { 
                    term: "éšæœºäº‹ä»¶", 
                    termHtml: 'A, B',
                    hint: "å¯èƒ½ç»“æœ", 
                    category: "ç¬¬åä¸‰ç«  æ¦‚ç‡ä¸ç»Ÿè®¡", 
                    explanation: 'éšæœºè¯•éªŒçš„æ¯ä¸€ä¸ªå¯èƒ½ç»“æœç§°ä¸ºéšæœºäº‹ä»¶ã€‚å¿…ç„¶äº‹ä»¶ã€ä¸å¯èƒ½äº‹ä»¶ã€éšæœºäº‹ä»¶ã€‚'
                },
                { 
                    term: "æ¦‚ç‡", 
                    termHtml: 'P(A) âˆˆ [0,1]',
                    hint: "å¯èƒ½æ€§å¤§å°", 
                    category: "ç¬¬åä¸‰ç«  æ¦‚ç‡ä¸ç»Ÿè®¡", 
                    explanation: 'æ¦‚ç‡P(A)è¡¨ç¤ºäº‹ä»¶Aå‘ç”Ÿçš„å¯èƒ½æ€§å¤§å°ï¼Œå–å€¼åœ¨0åˆ°1ä¹‹é—´ã€‚P(å¿…ç„¶äº‹ä»¶)=1ï¼ŒP(ä¸å¯èƒ½äº‹ä»¶)=0ã€‚'
                },
                { 
                    term: "éšæœºå˜é‡", 
                    termHtml: 'X: Î© â†’ â„',
                    hint: "æ•°å€¼ç»“æœ", 
                    category: "ç¬¬åä¸‰ç«  æ¦‚ç‡ä¸ç»Ÿè®¡", 
                    explanation: 'éšæœºå˜é‡æ˜¯å°†æ ·æœ¬ç©ºé—´æ˜ å°„åˆ°å®æ•°çš„å‡½æ•°ï¼Œåˆ†ä¸ºç¦»æ•£å‹å’Œè¿ç»­å‹ã€‚'
                },
                { 
                    term: "æœŸæœ›", 
                    termHtml: 'E(X) = <span class="sum-block"><span class="sum-symbol">Î£</span><span class="sum-limits">i</span></span>x<sub>i</sub>P(X=x<sub>i</sub>)',
                    hint: "å¹³å‡å€¼", 
                    category: "ç¬¬åä¸‰ç«  æ¦‚ç‡ä¸ç»Ÿè®¡", 
                    explanation: 'æœŸæœ›E(X)æ˜¯éšæœºå˜é‡Xçš„åŠ æƒå¹³å‡ï¼Œç¦»æ•£å‹ä¸º<span class="sum-block"><span class="sum-symbol">Î£</span></span>x<sub>i</sub>P(X=x<sub>i</sub>)ï¼Œè¿ç»­å‹ä¸º<span class="integral">âˆ«</span>xf(x)dxã€‚'
                },
                { 
                    term: "æ–¹å·®", 
                    termHtml: 'D(X) = E[(X-Î¼)Â²]',
                    hint: "ç¦»æ•£ç¨‹åº¦", 
                    category: "ç¬¬åä¸‰ç«  æ¦‚ç‡ä¸ç»Ÿè®¡", 
                    explanation: 'æ–¹å·®D(X)=E[(X-Î¼)Â²]=E(XÂ²)-[E(X)]Â²ï¼Œè¡¡é‡æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ã€‚'
                },
                { 
                    term: "æ ‡å‡†å·®", 
                    termHtml: 'Ïƒ = âˆšD(X)',
                    hint: "æ–¹å·®å¼€æ–¹", 
                    category: "ç¬¬åä¸‰ç«  æ¦‚ç‡ä¸ç»Ÿè®¡", 
                    explanation: 'æ ‡å‡†å·®Ïƒ=âˆšD(X)ï¼Œæ˜¯æ–¹å·®çš„ç®—æœ¯å¹³æ–¹æ ¹ï¼Œä¸åŸæ•°æ®å•ä½ç›¸åŒã€‚'
                },
                { 
                    term: "æ­£æ€åˆ†å¸ƒ", 
                    termHtml: 'X ~ N(Î¼, ÏƒÂ²)',
                    hint: "é’Ÿå½¢æ›²çº¿", 
                    category: "ç¬¬åä¸‰ç«  æ¦‚ç‡ä¸ç»Ÿè®¡", 
                    explanation: 'æ­£æ€åˆ†å¸ƒN(Î¼,ÏƒÂ²)çš„æ¦‚ç‡å¯†åº¦å‡½æ•°å‘ˆé’Ÿå½¢å¯¹ç§°æ›²çº¿ï¼ŒÎ¼æ˜¯å‡å€¼ï¼ŒÏƒæ˜¯æ ‡å‡†å·®ã€‚'
                },
                { 
                    term: "äºŒé¡¹åˆ†å¸ƒ", 
                    termHtml: 'X ~ B(n, p)',
                    hint: "næ¬¡ç‹¬ç«‹è¯•éªŒ", 
                    category: "ç¬¬åä¸‰ç«  æ¦‚ç‡ä¸ç»Ÿè®¡", 
                    explanation: 'næ¬¡ç‹¬ç«‹é‡å¤è¯•éªŒä¸­æˆåŠŸæ¬¡æ•°çš„åˆ†å¸ƒï¼ŒB(n,p)ï¼ŒP(X=k)=C<sub>n</sub><sup>k</sup>p<sup>k</sup>(1-p)<sup>n-k</sup>ã€‚'
                },
                { 
                    term: "æ¡ä»¶æ¦‚ç‡", 
                    termHtml: 'P(A|B) = <span class="frac"><span class="frac-num">P(AB)</span><span class="frac-den">P(B)</span></span>',
                    hint: "P(A|B)", 
                    category: "ç¬¬åä¸‰ç«  æ¦‚ç‡ä¸ç»Ÿè®¡", 
                    explanation: 'åœ¨äº‹ä»¶Bå‘ç”Ÿæ¡ä»¶ä¸‹Aå‘ç”Ÿçš„æ¦‚ç‡ï¼ŒP(A|B)=<span class="frac"><span class="frac-num">P(AB)</span><span class="frac-den">P(B)</span></span>ã€‚'
                },
                { 
                    term: "ç‹¬ç«‹äº‹ä»¶", 
                    termHtml: 'P(AB) = P(A)P(B)',
                    hint: "äº’ä¸å½±å“", 
                    category: "ç¬¬åä¸‰ç«  æ¦‚ç‡ä¸ç»Ÿè®¡", 
                    explanation: 'è‹¥P(AB)=P(A)P(B)ï¼Œåˆ™äº‹ä»¶Aå’ŒBç›¸äº’ç‹¬ç«‹ã€‚'
                }
            ],
            geometry: [
                { 
                    term: "å‘é‡ç‚¹ç§¯", 
                    termHtml: 'aÂ·b = |a||b|cosÎ¸',
                    hint: "å†…ç§¯", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'å‘é‡ç‚¹ç§¯aÂ·b=|a||b|cosÎ¸=aâ‚bâ‚+aâ‚‚bâ‚‚+aâ‚ƒbâ‚ƒï¼Œç»“æœæ˜¯æ ‡é‡ã€‚ç”¨äºè®¡ç®—å¤¹è§’å’ŒæŠ•å½±ã€‚'
                },
                { 
                    term: "å‘é‡å‰ç§¯", 
                    termHtml: '|aÃ—b| = |a||b|sinÎ¸',
                    hint: "å¤–ç§¯", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'å‘é‡å‰ç§¯aÃ—bçš„ç»“æœæ˜¯å‚ç›´äºaå’Œbçš„å‘é‡ï¼Œæ¨¡ä¸º|a||b|sinÎ¸ï¼Œè¡¨ç¤ºå¹³è¡Œå››è¾¹å½¢é¢ç§¯ã€‚'
                },
                { 
                    term: "ç›´çº¿æ–¹ç¨‹", 
                    termHtml: 'y = kx + b',
                    hint: "y=kx+b", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'å¹³é¢ç›´çº¿æ–¹ç¨‹çš„å½¢å¼ï¼šç‚¹æ–œå¼y-yâ‚€=k(x-xâ‚€)ï¼Œæ–œæˆªå¼y=kx+bï¼Œä¸€èˆ¬å¼Ax+By+C=0ã€‚'
                },
                { 
                    term: "åœ†æ–¹ç¨‹", 
                    termHtml: '(x-a)Â² + (y-b)Â² = rÂ²',
                    hint: "(x-a)Â²+(y-b)Â²=rÂ²", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'åœ†å¿ƒä¸º(a,b)ï¼ŒåŠå¾„ä¸ºrçš„åœ†çš„æ ‡å‡†æ–¹ç¨‹æ˜¯(x-a)Â²+(y-b)Â²=rÂ²ã€‚'
                },
                { 
                    term: "æ¤­åœ†", 
                    termHtml: '<span class="frac"><span class="frac-num">xÂ²</span><span class="frac-den">aÂ²</span></span>+<span class="frac"><span class="frac-num">yÂ²</span><span class="frac-den">bÂ²</span></span>=1',
                    hint: "ä¸¤ç„¦ç‚¹è·ç¦»å’Œ", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'æ¤­åœ†æ˜¯åˆ°ä¸¤ç„¦ç‚¹è·ç¦»ä¹‹å’Œä¸ºå¸¸æ•°2açš„ç‚¹çš„è½¨è¿¹ï¼Œæ ‡å‡†æ–¹ç¨‹<span class="frac"><span class="frac-num">xÂ²</span><span class="frac-den">aÂ²</span></span>+<span class="frac"><span class="frac-num">yÂ²</span><span class="frac-den">bÂ²</span></span>=1ï¼Œå…¶ä¸­a>b>0ã€‚'
                },
                { 
                    term: "åŒæ›²çº¿", 
                    termHtml: '<span class="frac"><span class="frac-num">xÂ²</span><span class="frac-den">aÂ²</span></span>-<span class="frac"><span class="frac-num">yÂ²</span><span class="frac-den">bÂ²</span></span>=1',
                    hint: "ä¸¤ç„¦ç‚¹è·ç¦»å·®", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'åŒæ›²çº¿æ˜¯åˆ°ä¸¤ç„¦ç‚¹è·ç¦»ä¹‹å·®çš„ç»å¯¹å€¼ä¸ºå¸¸æ•°2açš„ç‚¹çš„è½¨è¿¹ï¼Œ<span class="frac"><span class="frac-num">xÂ²</span><span class="frac-den">aÂ²</span></span>-<span class="frac"><span class="frac-num">yÂ²</span><span class="frac-den">bÂ²</span></span>=1ã€‚'
                },
                { 
                    term: "æŠ›ç‰©çº¿", 
                    termHtml: 'yÂ² = 2px',
                    hint: "ç„¦ç‚¹åˆ°å‡†çº¿", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'æŠ›ç‰©çº¿æ˜¯åˆ°ç„¦ç‚¹å’Œå‡†çº¿è·ç¦»ç›¸ç­‰çš„ç‚¹çš„è½¨è¿¹ï¼Œæ ‡å‡†æ–¹ç¨‹yÂ²=2pxï¼Œç„¦ç‚¹åœ¨(<span class="frac"><span class="frac-num">p</span><span class="frac-den">2</span></span>,0)ã€‚'
                },
                { 
                    term: "ç©ºé—´ç›´çº¿", 
                    termHtml: '<span class="frac"><span class="frac-num">x-xâ‚€</span><span class="frac-den">l</span></span>=<span class="frac"><span class="frac-num">y-yâ‚€</span><span class="frac-den">m</span></span>=<span class="frac"><span class="frac-num">z-zâ‚€</span><span class="frac-den">n</span></span>',
                    hint: "å‚æ•°æ–¹ç¨‹", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'ç©ºé—´ç›´çº¿å¯ç”¨å¯¹ç§°å¼è¡¨ç¤ºï¼š<span class="frac"><span class="frac-num">x-xâ‚€</span><span class="frac-den">l</span></span>=<span class="frac"><span class="frac-num">y-yâ‚€</span><span class="frac-den">m</span></span>=<span class="frac"><span class="frac-num">z-zâ‚€</span><span class="frac-den">n</span></span>ï¼Œå…¶ä¸­(l,m,n)ä¸ºæ–¹å‘å‘é‡ã€‚'
                },
                { 
                    term: "å¹³é¢æ–¹ç¨‹", 
                    termHtml: 'Ax + By + Cz + D = 0',
                    hint: "Ax+By+Cz+D=0", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'ç©ºé—´å¹³é¢çš„ä¸€èˆ¬æ–¹ç¨‹Ax+By+Cz+D=0ï¼Œå…¶ä¸­(A,B,C)æ˜¯æ³•å‘é‡ã€‚'
                },
                { 
                    term: "ç‚¹åˆ°ç›´çº¿è·ç¦»", 
                    termHtml: 'd = <span class="frac"><span class="frac-num">|Axâ‚€+Byâ‚€+C|</span><span class="frac-den">âˆš(AÂ²+BÂ²)</span></span>',
                    hint: "å‚ç›´è·ç¦»", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'ç‚¹(xâ‚€,yâ‚€)åˆ°ç›´çº¿Ax+By+C=0çš„è·ç¦»d=<span class="frac"><span class="frac-num">|Axâ‚€+Byâ‚€+C|</span><span class="frac-den">âˆš(AÂ²+BÂ²)</span></span>ã€‚'
                },
                { 
                    term: "ç‚¹åˆ°å¹³é¢è·ç¦»", 
                    termHtml: 'd = <span class="frac"><span class="frac-num">|Axâ‚€+Byâ‚€+Czâ‚€+D|</span><span class="frac-den">âˆš(AÂ²+BÂ²+CÂ²)</span></span>',
                    hint: "ç©ºé—´å‚è·", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'ç‚¹åˆ°å¹³é¢Ax+By+Cz+D=0çš„è·ç¦»d=<span class="frac"><span class="frac-num">|Axâ‚€+Byâ‚€+Czâ‚€+D|</span><span class="frac-den">âˆš(AÂ²+BÂ²+CÂ²)</span></span>ã€‚'
                },
                { 
                    term: "ä¸¤ç›´çº¿å¤¹è§’", 
                    termHtml: 'cosÎ¸ = <span class="frac"><span class="frac-num">|aÂ·b|</span><span class="frac-den">|a||b|</span></span>',
                    hint: "å‘é‡å¤¹è§’", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'ä¸¤ç›´çº¿å¤¹è§’é€šè¿‡æ–¹å‘å‘é‡å¤¹è§’è®¡ç®—ï¼ŒcosÎ¸=<span class="frac"><span class="frac-num">|aÂ·b|</span><span class="frac-den">|a||b|</span></span>ã€‚'
                },
                { 
                    term: "åæ ‡å˜æ¢", 
                    termHtml: 'x\' = x - h, y\' = y - k',
                    hint: "æ—‹è½¬å¹³ç§»", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'é€šè¿‡åæ ‡å˜æ¢ç®€åŒ–æ›²çº¿æ–¹ç¨‹ï¼Œå¹³ç§»å˜æ¢x\'=x-h,y\'=y-kï¼›æ—‹è½¬å˜æ¢æ¶‰åŠä¸‰è§’å‡½æ•°ã€‚'
                },
                { 
                    term: "æåæ ‡", 
                    termHtml: '(r, Î¸)',
                    hint: "(r,Î¸)", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'æåæ ‡ç”¨è·ç¦»rå’Œè§’åº¦Î¸è¡¨ç¤ºç‚¹çš„ä½ç½®ï¼Œä¸ç›´è§’åæ ‡çš„è½¬æ¢ï¼šx=rcosÎ¸, y=rsinÎ¸ã€‚'
                },
                { 
                    term: "å‚æ•°æ–¹ç¨‹", 
                    termHtml: 'x = f(t), y = g(t)',
                    hint: "x=f(t),y=g(t)", 
                    category: "ç¬¬åäºŒç«  å‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•", 
                    explanation: 'ç”¨å‚æ•°tåŒæ—¶è¡¨ç¤ºxå’Œyï¼Œå¦‚åœ†çš„å‚æ•°æ–¹ç¨‹x=rcost, y=rsintã€‚'
                }
            ]
        };
        
        // ========== æ¸¸æˆçŠ¶æ€ ==========
        let gameConfig = {
            roundTime: 90,
            winningScore: 3
        };
        
        let gameState = {
            terms: [],
            currentTermIndex: 0,
            scores: { teamA: 0, teamB: 0 },
            activeTeam: 'teamA',
            history: [],
            timeLeft: 0,
            timerInterval: null,
            isTermVisible: false,
            isGodViewVisible: false
        };
        
        // CanvasçŠ¶æ€
        let canvas, ctx;
        let isDrawing = false;
        let lastX = 0, lastY = 0;
        let strokeColor = '#000000';
        let strokeWidth = 4;
        let isEraser = false;
        
        // ========== å±å¹•åˆ‡æ¢ ==========
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }
        
        // ========== è®¾ç½®é¢æ¿ ==========
        function toggleSettings() {
            const btn = document.querySelector('.settings-btn');
            const panel = document.getElementById('settingsPanel');
            btn.classList.toggle('active');
            panel.classList.toggle('active');
        }
        
        function setTime(time) {
            gameConfig.roundTime = time;
            document.querySelectorAll('#timeOptions button').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }
        
        function setWinScore(score) {
            gameConfig.winningScore = score;
            document.querySelectorAll('#scoreOptions button').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }
        
        // ========== æ¸¸æˆé€»è¾‘ ==========
        function startGame(topic) {
            showScreen('loadingScreen');
            
            // é‡ç½®æ¸¸æˆçŠ¶æ€
            gameState.terms = shuffleArray([...MATH_TERMS[topic]]);
            gameState.currentTermIndex = 0;
            gameState.scores = { teamA: 0, teamB: 0 };
            gameState.activeTeam = 'teamA';
            gameState.history = [];
            gameState.isTermVisible = false;
            
            // æ¨¡æ‹ŸåŠ è½½
            setTimeout(() => {
                showScreen('playingScreen');
                initCanvas();
                startRound();
            }, 1500);
        }
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function startRound() {
            gameState.timeLeft = gameConfig.roundTime;
            gameState.isTermVisible = false;
            updateUI();
            clearCanvas();
            
            // å¦‚æœä¸Šå¸è§†è§’æ˜¯æ‰“å¼€çš„ï¼Œæ›´æ–°å†…å®¹
            if (gameState.isGodViewVisible) {
                updateGodView();
            }
            
            if (gameState.timerInterval) clearInterval(gameState.timerInterval);
            gameState.timerInterval = setInterval(() => {
                gameState.timeLeft--;
                updateTimerDisplay();
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timerInterval);
                }
            }, 1000);
        }
        
        function updateUI() {
            const term = gameState.terms[gameState.currentTermIndex];
            
            // æ›´æ–°é˜Ÿä¼æ˜¾ç¤º
            const teamA = document.getElementById('teamAScore');
            const teamB = document.getElementById('teamBScore');
            teamA.className = 'team-score ' + (gameState.activeTeam === 'teamA' ? 'active-a' : '');
            teamB.className = 'team-score ' + (gameState.activeTeam === 'teamB' ? 'active-b' : '');
            
            document.getElementById('scoreA').textContent = gameState.scores.teamA;
            document.getElementById('scoreB').textContent = gameState.scores.teamB;
            
            // æ›´æ–°é¢˜ç›®ä¿¡æ¯
            document.getElementById('termCount').textContent = `${gameState.currentTermIndex + 1} / ${gameState.terms.length}`;
            document.getElementById('termCategory').textContent = term.category;
            document.getElementById('termName').innerHTML = term.termHtml || term.term;
            document.getElementById('termExplanation').innerHTML = term.explanation;
            
            // æ›´æ–°ä¸Šå¸è§†è§’
            updateGodView();
            
            // æ›´æ–°å¯è§æ€§
            updateTermVisibility();
            updateTimerDisplay();
        }
        
        function toggleGodView() {
            gameState.isGodViewVisible = !gameState.isGodViewVisible;
            const panel = document.getElementById('godViewPanel');
            const btn = document.getElementById('godViewBtn');
            
            if (gameState.isGodViewVisible) {
                panel.classList.add('active');
                btn.classList.add('active');
                updateGodView();
            } else {
                panel.classList.remove('active');
                btn.classList.remove('active');
            }
        }
        
        function updateGodView() {
            if (!gameState.isGodViewVisible || gameState.terms.length === 0) return;
            
            const term = gameState.terms[gameState.currentTermIndex];
            document.getElementById('godViewTerm').innerHTML = term.termHtml || term.term;
            document.getElementById('godViewHint').textContent = term.hint || 'æ— æç¤º';
            document.getElementById('godViewCategory').textContent = term.category || 'æœªåˆ†ç±»';
            document.getElementById('godViewExplanation').innerHTML = term.explanation || 'æš‚æ— è§£æ';
        }
        
        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.timeLeft / 60);
            const seconds = gameState.timeLeft % 60;
            const display = document.getElementById('timerDisplay');
            display.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            display.className = 'timer-text' + (gameState.timeLeft < 10 ? ' warning' : '');
        }
        
        function toggleTermVisibility() {
            gameState.isTermVisible = !gameState.isTermVisible;
            updateTermVisibility();
        }
        
        function updateTermVisibility() {
            const visible = document.getElementById('termVisible');
            const hidden = document.getElementById('termHidden');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (gameState.isTermVisible) {
                visible.style.display = 'block';
                hidden.style.display = 'none';
                eyeIcon.innerHTML = '<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7c.44 0 .87-.03 1.28-.09"/><path d="m2 2 20 20"/>';
            } else {
                visible.style.display = 'none';
                hidden.style.display = 'block';
                eyeIcon.innerHTML = '<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>';
            }
        }
        
        function changeTerm() {
            if (gameState.currentTermIndex < gameState.terms.length - 1) {
                gameState.currentTermIndex++;
                gameState.isTermVisible = false;
                updateUI();
                clearCanvas();
            } else {
                alert("é¢˜åº“å·²å°½ï¼Œè¿›å…¥ç»“ç®—");
                endGame();
            }
        }
        
        function correctAnswer() {
            clearInterval(gameState.timerInterval);
            
            gameState.scores[gameState.activeTeam]++;
            gameState.history.push({
                term: gameState.terms[gameState.currentTermIndex],
                winner: gameState.activeTeam
            });
            
            showRoundEnd();
        }
        
        function skipTerm() {
            clearInterval(gameState.timerInterval);
            
            gameState.history.push({
                term: gameState.terms[gameState.currentTermIndex],
                winner: 'skipped'
            });
            
            showRoundEnd();
        }
        
        function showRoundEnd() {
            const term = gameState.terms[gameState.currentTermIndex];
            
            document.getElementById('modalCategory').textContent = term.category;
            document.getElementById('modalTerm').innerHTML = term.termHtml || term.term;
            document.getElementById('modalExplanation').innerHTML = term.explanation;
            
            const scoreA = document.getElementById('modalScoreA');
            const scoreB = document.getElementById('modalScoreB');
            scoreA.textContent = gameState.scores.teamA;
            scoreB.textContent = gameState.scores.teamB;
            scoreA.className = 'modal-score-value' + (gameState.activeTeam === 'teamA' ? ' highlight-a' : '');
            scoreB.className = 'modal-score-value' + (gameState.activeTeam === 'teamB' ? ' highlight-b' : '');
            
            const isGameOver = 
                gameState.scores.teamA >= gameConfig.winningScore ||
                gameState.scores.teamB >= gameConfig.winningScore ||
                gameState.currentTermIndex >= gameState.terms.length - 1;
            
            document.getElementById('nextBtn').textContent = isGameOver ? 'æŸ¥çœ‹æœ€ç»ˆç»“æœ' : 'ä¸‹ä¸€é¢˜ â†’';
            
            document.getElementById('roundEndModal').classList.add('active');
        }
        
        function nextRound() {
            document.getElementById('roundEndModal').classList.remove('active');
            
            const isGameOver = 
                gameState.scores.teamA >= gameConfig.winningScore ||
                gameState.scores.teamB >= gameConfig.winningScore ||
                gameState.currentTermIndex >= gameState.terms.length - 1;
            
            if (isGameOver) {
                showGameOver();
            } else {
                gameState.activeTeam = gameState.activeTeam === 'teamA' ? 'teamB' : 'teamA';
                gameState.currentTermIndex++;
                gameState.isTermVisible = false;
                startRound();
            }
        }
        
        function endGame() {
            clearInterval(gameState.timerInterval);
            document.getElementById('roundEndModal').classList.remove('active');
            showGameOver();
        }
        
        function showGameOver() {
            const finalA = document.getElementById('finalScoreA');
            const finalB = document.getElementById('finalScoreB');
            
            finalA.textContent = gameState.scores.teamA;
            finalB.textContent = gameState.scores.teamB;
            
            if (gameState.scores.teamA > gameState.scores.teamB) {
                finalA.className = 'final-score-value winner';
                finalB.className = 'final-score-value loser';
            } else if (gameState.scores.teamB > gameState.scores.teamA) {
                finalA.className = 'final-score-value loser';
                finalB.className = 'final-score-value winner-b';
            } else {
                finalA.className = 'final-score-value';
                finalB.className = 'final-score-value';
            }
            
            // å¡«å……å¤ä¹ è¡¨
            const tbody = document.getElementById('reviewTableBody');
            tbody.innerHTML = '';
            
            if (gameState.history.length > 0) {
                gameState.history.forEach(item => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${item.term.termHtml || item.term.term}</td>
                        <td><span>${item.term.category}</span></td>
                        <td>${item.term.explanation}</td>
                    `;
                    tbody.appendChild(row);
                });
            } else {
                tbody.innerHTML = '<tr><td colspan="3" class="empty-review">æœ¬æ¬¡æ²¡æœ‰å®Œæˆçš„é¢˜ç›®</td></tr>';
            }
            
            showScreen('gameOverScreen');
        }
        
        function returnToMenu() {
            showScreen('setupScreen');
        }
        
        // ========== ç”»æ¿åŠŸèƒ½ ==========
        function initCanvas() {
            canvas = document.getElementById('drawCanvas');
            ctx = canvas.getContext('2d');
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // é¼ æ ‡äº‹ä»¶
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // è§¦æ‘¸äº‹ä»¶
            canvas.addEventListener('touchstart', handleTouchStart);
            canvas.addEventListener('touchmove', handleTouchMove);
            canvas.addEventListener('touchend', stopDrawing);
        }
        
        function resizeCanvas() {
            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
            
            // è®¾ç½®ç™½è‰²èƒŒæ™¯
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
        
        function startDrawing(e) {
            isDrawing = true;
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }
        
        function draw(e) {
            if (!isDrawing) return;
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(e.offsetX, e.offsetY);
            ctx.strokeStyle = isEraser ? '#ffffff' : strokeColor;
            ctx.lineWidth = isEraser ? 20 : strokeWidth;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.stroke();
            
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }
        
        function stopDrawing() {
            isDrawing = false;
        }
        
        function handleTouchStart(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            isDrawing = true;
            lastX = touch.clientX - rect.left;
            lastY = touch.clientY - rect.top;
        }
        
        function handleTouchMove(e) {
            e.preventDefault();
            if (!isDrawing) return;
            
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(x, y);
            ctx.strokeStyle = isEraser ? '#ffffff' : strokeColor;
            ctx.lineWidth = isEraser ? 20 : strokeWidth;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.stroke();
            
            lastX = x;
            lastY = y;
        }
        
        function setColor(color, btn) {
            strokeColor = color;
            isEraser = false;
            document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('eraserBtn').classList.remove('active');
        }
        
        function toggleEraser() {
            isEraser = !isEraser;
            document.getElementById('eraserBtn').classList.toggle('active', isEraser);
            if (isEraser) {
                document.querySelectorAll('.color-btn').forEach(b => b.classList.remove('active'));
            }
        }
        
        function clearCanvas() {
            if (ctx) {
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }
        }
    </script>
</body>
</html>
